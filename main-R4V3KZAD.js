var oQ=Object.create;var ZC=Object.defineProperty,lQ=Object.defineProperties,hQ=Object.getOwnPropertyDescriptor,uQ=Object.getOwnPropertyDescriptors,dQ=Object.getOwnPropertyNames,iI=Object.getOwnPropertySymbols,fQ=Object.getPrototypeOf,nI=Object.prototype.hasOwnProperty,cQ=Object.prototype.propertyIsEnumerable;var rI=(e,t,i)=>t in e?ZC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_=(e,t)=>{for(var i in t||={})nI.call(t,i)&&rI(e,i,t[i]);if(iI)for(var i of iI(t))cQ.call(t,i)&&rI(e,i,t[i]);return e},At=(e,t)=>lQ(e,uQ(t));var sI=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pQ=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of dQ(t))!nI.call(e,n)&&n!==i&&ZC(e,n,{get:()=>t[n],enumerable:!(s=hQ(t,n))||s.enumerable});return e};var il=(e,t,i)=>(i=e!=null?oQ(fQ(e)):{},pQ(t||!e||!e.__esModule?ZC(i,"default",{value:e,enumerable:!0}):i,e));var yc=(e,t,i)=>new Promise((s,n)=>{var o=p=>{try{a(i.next(p))}catch(h){n(h)}},r=p=>{try{a(i.throw(p))}catch(h){n(h)}},a=p=>p.done?s(p.value):Promise.resolve(p.value).then(o,r);a((i=i.apply(e,t)).next())});var Ul=sI((kd,bE)=>{"use strict";(function(t,i){typeof kd=="object"&&typeof bE=="object"?bE.exports=i():typeof define=="function"&&define.amd?define("Phaser",[],i):typeof kd=="object"?kd.Phaser=i():t.Phaser=i()})(kd,()=>(()=>{var e={50792:n=>{"use strict";var o=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function p(l,d,v){this.fn=l,this.context=d,this.once=v||!1}function h(l,d,v,c,m){if(typeof v!="function")throw new TypeError("The listener must be a function");var g=new p(v,c||l,m),y=r?r+d:d;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function u(l,d){--l._eventsCount===0?l._events=new a:delete l._events[d]}function f(){this._events=new a,this._eventsCount=0}f.prototype.eventNames=function(){var d=[],v,c;if(this._eventsCount===0)return d;for(c in v=this._events)o.call(v,c)&&d.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(v)):d},f.prototype.listeners=function(d){var v=r?r+d:d,c=this._events[v];if(!c)return[];if(c.fn)return[c.fn];for(var m=0,g=c.length,y=new Array(g);m<g;m++)y[m]=c[m].fn;return y},f.prototype.listenerCount=function(d){var v=r?r+d:d,c=this._events[v];return c?c.fn?1:c.length:0},f.prototype.emit=function(d,v,c,m,g,y){var x=r?r+d:d;if(!this._events[x])return!1;var C=this._events[x],S=arguments.length,E,T;if(C.fn){switch(C.once&&this.removeListener(d,C.fn,void 0,!0),S){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,v),!0;case 3:return C.fn.call(C.context,v,c),!0;case 4:return C.fn.call(C.context,v,c,m),!0;case 5:return C.fn.call(C.context,v,c,m,g),!0;case 6:return C.fn.call(C.context,v,c,m,g,y),!0}for(T=1,E=new Array(S-1);T<S;T++)E[T-1]=arguments[T];C.fn.apply(C.context,E)}else{var P=C.length,M;for(T=0;T<P;T++)switch(C[T].once&&this.removeListener(d,C[T].fn,void 0,!0),S){case 1:C[T].fn.call(C[T].context);break;case 2:C[T].fn.call(C[T].context,v);break;case 3:C[T].fn.call(C[T].context,v,c);break;case 4:C[T].fn.call(C[T].context,v,c,m);break;default:if(!E)for(M=1,E=new Array(S-1);M<S;M++)E[M-1]=arguments[M];C[T].fn.apply(C[T].context,E)}}return!0},f.prototype.on=function(d,v,c){return h(this,d,v,c,!1)},f.prototype.once=function(d,v,c){return h(this,d,v,c,!0)},f.prototype.removeListener=function(d,v,c,m){var g=r?r+d:d;if(!this._events[g])return this;if(!v)return u(this,g),this;var y=this._events[g];if(y.fn)y.fn===v&&(!m||y.once)&&(!c||y.context===c)&&u(this,g);else{for(var x=0,C=[],S=y.length;x<S;x++)(y[x].fn!==v||m&&!y[x].once||c&&y[x].context!==c)&&C.push(y[x]);C.length?this._events[g]=C.length===1?C[0]:C:u(this,g)}return this},f.prototype.removeAllListeners=function(d){var v;return d?(v=r?r+d:d,this._events[v]&&u(this,v)):(this._events=new a,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=r,f.EventEmitter=f,n.exports=f},11517:(n,o,r)=>{var a=r(38829),p=function(h,u,f,l){for(var d=h[0],v=1;v<h.length;v++){var c=h[v];a(c,d,u,f,l),d=c}return h};n.exports=p},80318:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"angle",u,f,l,d)};n.exports=p},60757:n=>{var o=function(r,a,p){for(var h=0;h<r.length;h++){var u=r[h];a.call(p,u)}return r};n.exports=o},69927:n=>{var o=function(r,a,p){p===void 0&&(p=0);for(var h=p;h<r.length;h++){var u=r[h],f=!0;for(var l in a)u[l]!==a[l]&&(f=!1);if(f)return u}return null};n.exports=o},32265:n=>{var o=function(r,a,p){p===void 0&&(p=0);for(var h=r.length-1;h>=p;h--){var u=r[h],f=!0;for(var l in a)u[l]!==a[l]&&(f=!1);if(f)return u}return null};n.exports=o},94420:(n,o,r)=>{var a=r(11879),p=r(60461),h=r(95540),u=r(29747),f=r(41481),l=new f({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1).setOrigin(0,0),d=function(v,c){c===void 0&&(c={});var m=c.hasOwnProperty("width"),g=c.hasOwnProperty("height"),y=h(c,"width",-1),x=h(c,"height",-1),C=h(c,"cellWidth",1),S=h(c,"cellHeight",C),E=h(c,"position",p.TOP_LEFT),T=h(c,"x",0),P=h(c,"y",0),M=0,w=0,b=y*C,I=x*S;l.setPosition(T,P),l.setSize(C,S);for(var R=0;R<v.length;R++)if(a(v[R],l,E),m&&y===-1)l.x+=C;else if(g&&x===-1)l.y+=S;else if(g&&!m){if(w+=S,l.y+=S,w===I&&(w=0,M+=C,l.y=P,l.x+=C,M===b))break}else if(M+=C,l.x+=C,M===b&&(M=0,w+=S,l.x=T,l.y+=S,w===I))break;return v};n.exports=d},41721:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"alpha",u,f,l,d)};n.exports=p},67285:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"x",u,f,l,d)};n.exports=p},9074:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d,v,c){return f==null&&(f=u),a(h,"x",u,l,v,c),a(h,"y",f,d,v,c)};n.exports=p},75222:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"y",u,f,l,d)};n.exports=p},22983:n=>{var o=function(r,a,p,h){p===void 0&&(p=0),h===void 0&&(h=6.28);for(var u=p,f=(h-p)/r.length,l=a.x,d=a.y,v=a.radius,c=0;c<r.length;c++)r[c].x=l+v*Math.cos(u),r[c].y=d+v*Math.sin(u),u+=f;return r};n.exports=o},95253:n=>{var o=function(r,a,p,h){p===void 0&&(p=0),h===void 0&&(h=6.28);for(var u=p,f=(h-p)/r.length,l=a.width/2,d=a.height/2,v=0;v<r.length;v++)r[v].x=a.x+l*Math.cos(u),r[v].y=a.y+d*Math.sin(u),u+=f;return r};n.exports=o},88505:(n,o,r)=>{var a=r(15258),p=r(26708),h=function(u,f,l){var d;l?d=p(f,l,u.length):d=a(f,u.length);for(var v=0;v<u.length;v++){var c=u[v],m=d[v];c.x=m.x,c.y=m.y}return u};n.exports=h},41346:(n,o,r)=>{var a=r(14649),p=r(86003),h=r(49498),u=function(f,l,d){d===void 0&&(d=0);var v=a(l,!1,f.length);d>0?p(v,d):d<0&&h(v,Math.abs(d));for(var c=0;c<f.length;c++)f[c].x=v[c].x,f[c].y=v[c].y;return f};n.exports=u},11575:(n,o,r)=>{var a=r(84993),p=function(h,u,f){var l=a({x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2},f),d=a({x1:u.x2,y1:u.y2,x2:u.x3,y2:u.y3},f),v=a({x1:u.x3,y1:u.y3,x2:u.x1,y2:u.y1},f);l.pop(),d.pop(),v.pop(),l=l.concat(d,v);for(var c=l.length/h.length,m=0,g=0;g<h.length;g++){var y=h[g],x=l[Math.floor(m)];y.x=x.x,y.y=x.y,m+=c}return h};n.exports=p},29953:n=>{var o=function(r,a,p){for(var h=0;h<r.length;h++){var u=r[h];u.anims&&u.anims.play(a,p)}return r};n.exports=o},66979:n=>{var o=function(r,a,p,h,u,f){h===void 0&&(h=0),u===void 0&&(u=0),f===void 0&&(f=1);var l,d=0,v=r.length;if(f===1)for(l=u;l<v;l++)r[l][a]+=p+d*h,d++;else for(l=u;l>=0;l--)r[l][a]+=p+d*h,d++;return r};n.exports=o},43967:n=>{var o=function(r,a,p,h,u,f){h===void 0&&(h=0),u===void 0&&(u=0),f===void 0&&(f=1);var l,d=0,v=r.length;if(f===1)for(l=u;l<v;l++)r[l][a]=p+d*h,d++;else for(l=u;l>=0;l--)r[l][a]=p+d*h,d++;return r};n.exports=o},88926:(n,o,r)=>{var a=r(28176),p=function(h,u){for(var f=0;f<h.length;f++)a(u,h[f]);return h};n.exports=p},33286:(n,o,r)=>{var a=r(24820),p=function(h,u){for(var f=0;f<h.length;f++)a(u,h[f]);return h};n.exports=p},96e3:(n,o,r)=>{var a=r(65822),p=function(h,u){for(var f=0;f<h.length;f++)a(u,h[f]);return h};n.exports=p},28789:(n,o,r)=>{var a=r(26597),p=function(h,u){for(var f=0;f<h.length;f++)a(u,h[f]);return h};n.exports=p},97154:(n,o,r)=>{var a=r(90260),p=function(h,u){for(var f=0;f<h.length;f++)a(u,h[f]);return h};n.exports=p},20510:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"rotation",u,f,l,d)};n.exports=p},91051:(n,o,r)=>{var a=r(1163),p=r(20339),h=function(u,f,l){for(var d=f.x,v=f.y,c=0;c<u.length;c++){var m=u[c];a(m,d,v,l,Math.max(1,p(m.x,m.y,d,v)))}return u};n.exports=h},76332:(n,o,r)=>{var a=r(1163),p=function(h,u,f,l){var d=u.x,v=u.y;if(l===0)return h;for(var c=0;c<h.length;c++)a(h[c],d,v,f,l);return h};n.exports=p},61619:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"scaleX",u,f,l,d)};n.exports=p},94868:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d,v,c){return f==null&&(f=u),a(h,"scaleX",u,l,v,c),a(h,"scaleY",f,d,v,c)};n.exports=p},95532:(n,o,r)=>{var a=r(66979),p=function(h,u,f,l,d){return a(h,"scaleY",u,f,l,d)};n.exports=p},8689:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"alpha",u,f,l,d)};n.exports=p},2645:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l){return a(h,"blendMode",u,0,f,l)};n.exports=p},32372:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"depth",u,f,l,d)};n.exports=p},85373:n=>{var o=function(r,a,p){for(var h=0;h<r.length;h++)r[h].setInteractive(a,p);return r};n.exports=o},81583:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d,v,c){return f==null&&(f=u),a(h,"originX",u,l,v,c),a(h,"originY",f,d,v,c),h.forEach(function(m){m.updateDisplayOrigin()}),h};n.exports=p},79939:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"rotation",u,f,l,d)};n.exports=p},2699:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d,v,c){return f==null&&(f=u),a(h,"scaleX",u,l,v,c),a(h,"scaleY",f,d,v,c)};n.exports=p},98739:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"scaleX",u,f,l,d)};n.exports=p},98476:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"scaleY",u,f,l,d)};n.exports=p},6207:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d,v,c){return f==null&&(f=u),a(h,"scrollFactorX",u,l,v,c),a(h,"scrollFactorY",f,d,v,c)};n.exports=p},6607:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"scrollFactorX",u,f,l,d)};n.exports=p},72248:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"scrollFactorY",u,f,l,d)};n.exports=p},14036:n=>{var o=function(r,a,p,h,u){for(var f=0;f<r.length;f++)r[f].setTint(a,p,h,u);return r};n.exports=o},50159:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l){return a(h,"visible",u,0,f,l)};n.exports=p},77597:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"x",u,f,l,d)};n.exports=p},83194:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d,v,c){return f==null&&(f=u),a(h,"x",u,l,v,c),a(h,"y",f,d,v,c)};n.exports=p},67678:(n,o,r)=>{var a=r(43967),p=function(h,u,f,l,d){return a(h,"y",u,f,l,d)};n.exports=p},35850:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d){l===void 0&&(l=0),d===void 0&&(d=new a);var v,c,m=h.length;if(m===1)v=h[0].x,c=h[0].y,h[0].x=u,h[0].y=f;else{var g=1,y=0;l===0&&(y=m-1,g=m-2),v=h[y].x,c=h[y].y,h[y].x=u,h[y].y=f;for(var x=0;x<m;x++)if(!(g>=m||g===-1)){var C=h[g],S=C.x,E=C.y;C.x=v,C.y=c,v=S,c=E,l===0?g--:g++}}return d.x=v,d.y=c,d};n.exports=p},8628:(n,o,r)=>{var a=r(33680),p=function(h){return a(h)};n.exports=p},21837:(n,o,r)=>{var a=r(7602),p=function(h,u,f,l,d){d===void 0&&(d=!1);var v=Math.abs(l-f)/h.length,c;if(d)for(c=0;c<h.length;c++)h[c][u]+=a(c*v,f,l);else for(c=0;c<h.length;c++)h[c][u]=a(c*v,f,l);return h};n.exports=p},21910:(n,o,r)=>{var a=r(54261),p=function(h,u,f,l,d){d===void 0&&(d=!1);var v=Math.abs(l-f)/h.length,c;if(d)for(c=0;c<h.length;c++)h[c][u]+=a(c*v,f,l);else for(c=0;c<h.length;c++)h[c][u]=a(c*v,f,l);return h};n.exports=p},62054:n=>{var o=function(r,a,p,h,u){if(u===void 0&&(u=!1),r.length===0)return r;if(r.length===1)return u?r[0][a]+=(h+p)/2:r[0][a]=(h+p)/2,r;var f=Math.abs(h-p)/(r.length-1),l;if(u)for(l=0;l<r.length;l++)r[l][a]+=l*f+p;else for(l=0;l<r.length;l++)r[l][a]=l*f+p;return r};n.exports=o},79815:n=>{var o=function(r){for(var a=0;a<r.length;a++)r[a].visible=!r[a].visible;return r};n.exports=o},39665:(n,o,r)=>{var a=r(15994),p=function(h,u,f){f===void 0&&(f=0);for(var l=0;l<h.length;l++){var d=h[l];d.x=a(d.x,u.left-f,u.right+f),d.y=a(d.y,u.top-f,u.bottom+f)}return h};n.exports=p},61061:(n,o,r)=>{n.exports={AlignTo:r(11517),Angle:r(80318),Call:r(60757),GetFirst:r(69927),GetLast:r(32265),GridAlign:r(94420),IncAlpha:r(41721),IncX:r(67285),IncXY:r(9074),IncY:r(75222),PlaceOnCircle:r(22983),PlaceOnEllipse:r(95253),PlaceOnLine:r(88505),PlaceOnRectangle:r(41346),PlaceOnTriangle:r(11575),PlayAnimation:r(29953),PropertyValueInc:r(66979),PropertyValueSet:r(43967),RandomCircle:r(88926),RandomEllipse:r(33286),RandomLine:r(96e3),RandomRectangle:r(28789),RandomTriangle:r(97154),Rotate:r(20510),RotateAround:r(91051),RotateAroundDistance:r(76332),ScaleX:r(61619),ScaleXY:r(94868),ScaleY:r(95532),SetAlpha:r(8689),SetBlendMode:r(2645),SetDepth:r(32372),SetHitArea:r(85373),SetOrigin:r(81583),SetRotation:r(79939),SetScale:r(2699),SetScaleX:r(98739),SetScaleY:r(98476),SetScrollFactor:r(6207),SetScrollFactorX:r(6607),SetScrollFactorY:r(72248),SetTint:r(14036),SetVisible:r(50159),SetX:r(77597),SetXY:r(83194),SetY:r(67678),ShiftPosition:r(35850),Shuffle:r(8628),SmootherStep:r(21910),SmoothStep:r(21837),Spread:r(62054),ToggleVisible:r(79815),WrapInRectangle:r(39665)}},42099:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(74943),u=r(81957),f=r(41138),l=r(35154),d=r(90126),v=new p({initialize:function(m,g,y){this.manager=m,this.key=g,this.type="frame",this.frames=this.getFrames(m.textureManager,l(y,"frames",[]),l(y,"defaultTextureKey",null),l(y,"sortFrames",!0)),this.frameRate=l(y,"frameRate",null),this.duration=l(y,"duration",null),this.msPerFrame,this.skipMissedFrames=l(y,"skipMissedFrames",!0),this.delay=l(y,"delay",0),this.repeat=l(y,"repeat",0),this.repeatDelay=l(y,"repeatDelay",0),this.yoyo=l(y,"yoyo",!1),this.showBeforeDelay=l(y,"showBeforeDelay",!1),this.showOnStart=l(y,"showOnStart",!1),this.hideOnComplete=l(y,"hideOnComplete",!1),this.randomFrame=l(y,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(h.PAUSE_ALL,this.pause,this),this.manager.on(h.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(c,m,g,y){g===null&&y===null?(c.frameRate=24,c.duration=24/m*1e3):g&&y===null?(c.duration=g,c.frameRate=m/(g/1e3)):(c.frameRate=y,c.duration=m/y*1e3),c.msPerFrame=1e3/c.frameRate},addFrame:function(c){return this.addFrameAt(this.frames.length,c)},addFrameAt:function(c,m){var g=this.getFrames(this.manager.textureManager,m);if(g.length>0){if(c===0)this.frames=g.concat(this.frames);else if(c===this.frames.length)this.frames=this.frames.concat(g);else{var y=this.frames.slice(0,c),x=this.frames.slice(c);this.frames=y.concat(g,x)}this.updateFrameSequence()}return this},checkFrame:function(c){return c>=0&&c<this.frames.length},getFirstTick:function(c){c.accumulator=0,c.nextTick=c.frameRate===c.currentAnim.frameRate&&c.currentFrame.duration||c.msPerFrame},getFrameAt:function(c){return this.frames[c]},getFrames:function(c,m,g,y){y===void 0&&(y=!0);var x=[],C,S,E=1,T,P;if(typeof m=="string"){if(P=m,!c.exists(P))return console.warn('Texture "%s" not found',P),x;var M=c.get(P),w=M.getFrameNames();y&&d(w),m=[],w.forEach(function(O){m.push({key:P,frame:O})})}if(!Array.isArray(m)||m.length===0)return x;for(T=0;T<m.length;T++){var b=m[T],I=l(b,"key",g);if(I){var R=l(b,"frame",0),A=c.getFrame(I,R);if(!A){console.warn('Texture "%s" not found',I);continue}S=new f(I,R,E,A),S.duration=l(b,"duration",0),S.isFirst=!C,C&&(C.nextFrame=S,S.prevFrame=C),x.push(S),C=S,E++}}if(x.length>0){S.isLast=!0,S.nextFrame=x[0],x[0].prevFrame=S;var L=1/(x.length-1);for(T=0;T<x.length;T++)x[T].progress=T*L}return x},getNextTick:function(c){c.accumulator-=c.nextTick,c.nextTick=c.frameRate===c.currentAnim.frameRate&&c.currentFrame.duration||c.msPerFrame},getFrameByProgress:function(c){return c=a(c,0,1),u(c,this.frames,"progress")},nextFrame:function(c){var m=c.currentFrame;m.isLast?c.yoyo?this.handleYoyoFrame(c,!1):c.repeatCounter>0?c.inReverse&&c.forward?c.forward=!1:this.repeatAnimation(c):c.complete():this.updateAndGetNextTick(c,m.nextFrame)},handleYoyoFrame:function(c,m){if(m||(m=!1),c.inReverse===!m&&c.repeatCounter>0){(c.repeatDelay===0||c.pendingRepeat)&&(c.forward=m),this.repeatAnimation(c);return}if(c.inReverse!==m&&c.repeatCounter===0){c.complete();return}c.forward=m;var g=m?c.currentFrame.nextFrame:c.currentFrame.prevFrame;this.updateAndGetNextTick(c,g)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(c){var m=c.currentFrame;m.isFirst?c.yoyo?this.handleYoyoFrame(c,!0):c.repeatCounter>0?c.inReverse&&!c.forward?this.repeatAnimation(c):(c.forward=!0,this.repeatAnimation(c)):c.complete():this.updateAndGetNextTick(c,m.prevFrame)},updateAndGetNextTick:function(c,m){c.setCurrentFrame(m),this.getNextTick(c)},removeFrame:function(c){var m=this.frames.indexOf(c);return m!==-1&&this.removeFrameAt(m),this},removeFrameAt:function(c){return this.frames.splice(c,1),this.updateFrameSequence(),this},repeatAnimation:function(c){if(c._pendingStop===2){if(c._pendingStopValue===0)return c.stop();c._pendingStopValue--}c.repeatDelay>0&&!c.pendingRepeat?(c.pendingRepeat=!0,c.accumulator-=c.nextTick,c.nextTick+=c.repeatDelay):(c.repeatCounter--,c.forward?c.setCurrentFrame(c.currentFrame.nextFrame):c.setCurrentFrame(c.currentFrame.prevFrame),c.isPlaying&&(this.getNextTick(c),c.handleRepeat()))},toJSON:function(){var c={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(m){c.frames.push(m.toJSON())}),c},updateFrameSequence:function(){for(var c=this.frames.length,m=1/(c-1),g,y=0;y<c;y++)g=this.frames[y],g.index=y+1,g.isFirst=!1,g.isLast=!1,g.progress=y*m,y===0?(g.isFirst=!0,c===1?(g.isLast=!0,g.nextFrame=g,g.prevFrame=g):(g.isLast=!1,g.prevFrame=this.frames[c-1],g.nextFrame=this.frames[y+1])):y===c-1&&c>1?(g.isLast=!0,g.prevFrame=this.frames[c-2],g.nextFrame=this.frames[0]):c>1&&(g.prevFrame=this.frames[y-1],g.nextFrame=this.frames[y+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(h.PAUSE_ALL,this.pause,this),this.manager.off(h.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var c=0;c<this.frames.length;c++)this.frames[c].destroy();this.frames=[],this.manager=null}});n.exports=v},41138:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d,v){v===void 0&&(v=!1),this.textureKey=u,this.textureFrame=f,this.index=l,this.frame=d,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=v},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});n.exports=p},60848:(n,o,r)=>{var a=r(42099),p=r(83419),h=r(90330),u=r(50792),f=r(74943),l=r(8443),d=r(95540),v=r(35154),c=r(36383),m=r(20283),g=r(41836),y=new p({Extends:u,initialize:function(C){u.call(this),this.game=C,this.textureManager=null,this.globalTimeScale=1,this.anims=new h,this.mixes=new h,this.paused=!1,this.name="AnimationManager",C.events.once(l.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(l.DESTROY,this.destroy,this)},addMix:function(x,C,S){var E=this.anims,T=this.mixes,P=typeof x=="string"?x:x.key,M=typeof C=="string"?C:C.key;if(E.has(P)&&E.has(M)){var w=T.get(P);w||(w={}),w[M]=S,T.set(P,w)}return this},removeMix:function(x,C){var S=this.mixes,E=typeof x=="string"?x:x.key,T=S.get(E);if(T)if(C){var P=typeof C=="string"?C:C.key;T.hasOwnProperty(P)&&delete T[P]}else C||S.delete(E);return this},getMix:function(x,C){var S=this.mixes,E=typeof x=="string"?x:x.key,T=typeof C=="string"?C:C.key,P=S.get(E);return P&&P.hasOwnProperty(T)?P[T]:0},add:function(x,C){return this.anims.has(x)?(console.warn("Animation key exists: "+x),this):(C.key=x,this.anims.set(x,C),this.emit(f.ADD_ANIMATION,x,C),this)},exists:function(x){return this.anims.has(x)},createFromAseprite:function(x,C,S){var E=[],T=this.game.cache.json.get(x);if(!T)return console.warn("No Aseprite data found for: "+x),E;var P=this,M=v(T,"meta",null),w=v(T,"frames",null);if(M&&w){var b=v(M,"frameTags",[]);b.forEach(function(I){var R=[],A=d(I,"name",null),L=d(I,"from",0),O=d(I,"to",0),F=d(I,"direction","forward");if(A&&(!C||C&&C.indexOf(A)>-1)){for(var G=0,U=L;U<=O;U++){var z=U.toString(),N=w[z];if(N){var k=d(N,"duration",c.MAX_SAFE_INTEGER);R.push({key:x,frame:z,duration:k}),G+=k}}F==="reverse"&&(R=R.reverse());var D={key:A,frames:R,duration:G,yoyo:F==="pingpong"},V;S?S.anims&&(V=S.anims.create(D)):V=P.create(D),V&&E.push(V)}})}return E},create:function(x){var C=x.key,S=!1;return C&&(S=this.get(C),S?console.warn("AnimationManager key already exists: "+C):(S=new a(this,C,x),this.anims.set(C,S),this.emit(f.ADD_ANIMATION,C,S))),S},fromJSON:function(x,C){C===void 0&&(C=!1),C&&this.anims.clear(),typeof x=="string"&&(x=JSON.parse(x));var S=[];if(x.hasOwnProperty("anims")&&Array.isArray(x.anims)){for(var E=0;E<x.anims.length;E++)S.push(this.create(x.anims[E]));x.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=x.globalTimeScale)}else x.hasOwnProperty("key")&&x.type==="frame"&&S.push(this.create(x));return S},generateFrameNames:function(x,C){var S=v(C,"prefix",""),E=v(C,"start",0),T=v(C,"end",0),P=v(C,"suffix",""),M=v(C,"zeroPad",0),w=v(C,"outputArray",[]),b=v(C,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),w;var I=this.textureManager.get(x);if(!I)return w;var R;if(C)for(b||(b=m(E,T)),R=0;R<b.length;R++){var A=S+g(b[R],M,"0",1)+P;I.has(A)?w.push({key:x,frame:A}):console.warn('Frame "%s" not found in texture "%s"',A,x)}else for(b=I.getFrameNames(),R=0;R<b.length;R++)w.push({key:x,frame:b[R]});return w},generateFrameNumbers:function(x,C){var S=v(C,"start",0),E=v(C,"end",-1),T=v(C,"first",!1),P=v(C,"outputArray",[]),M=v(C,"frames",!1);if(!this.textureManager.exists(x))return console.warn('Texture "%s" not found',x),P;var w=this.textureManager.get(x);if(!w)return P;T&&w.has(T)&&P.push({key:x,frame:T}),M||(E===-1&&(E=w.frameTotal-2),M=m(S,E));for(var b=0;b<M.length;b++){var I=M[b];w.has(I)?P.push({key:x,frame:I}):console.warn('Frame "%s" not found in texture "%s"',I,x)}return P},get:function(x){return this.anims.get(x)},getAnimsFromTexture:function(x){for(var C=this.textureManager.get(x),S=C.key,E=this.anims.getArray(),T=[],P=0;P<E.length;P++)for(var M=E[P],w=M.frames,b=0;b<w.length;b++)if(w[b].textureKey===S){T.push(M.key);break}return T},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(f.PAUSE_ALL)),this},play:function(x,C){Array.isArray(C)||(C=[C]);for(var S=0;S<C.length;S++)C[S].anims.play(x);return this},staggerPlay:function(x,C,S,E){S===void 0&&(S=0),E===void 0&&(E=!0),Array.isArray(C)||(C=[C]);var T=C.length;E||T--;for(var P=0;P<C.length;P++){var M=S<0?Math.abs(S)*(T-P):S*P;C[P].anims.playAfterDelay(x,M)}return this},remove:function(x){var C=this.get(x);return C&&(this.emit(f.REMOVE_ANIMATION,x,C),this.anims.delete(x),this.removeMix(x)),C},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(f.RESUME_ALL)),this},toJSON:function(x){var C={anims:[],globalTimeScale:this.globalTimeScale};return x!==void 0&&x!==""?C.anims.push(this.anims.get(x).toJSON()):this.anims.each(function(S,E){C.anims.push(E.toJSON())}),C},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});n.exports=y},9674:(n,o,r)=>{var a=r(42099),p=r(30976),h=r(83419),u=r(90330),f=r(74943),l=r(95540),d=new h({initialize:function(c){this.parent=c,this.animationManager=c.scene.sys.anims,this.animationManager.on(f.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(v){var c=this.parent;if(v===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,c;Array.isArray(v)||(v=[v]);for(var m=0;m<v.length;m++){var g=v[m];this.nextAnim?this.nextAnimsQueue.push(g):this.nextAnim=g}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(v){this.isPlaying&&this.stop();var c=this.animationManager,m=typeof v=="string"?v:l(v,"key",null),g=this.exists(m)?this.get(m):c.get(m);if(!g)console.warn("Missing animation: "+m);else{this.currentAnim=g;var y=g.getTotalFrames(),x=l(v,"frameRate",g.frameRate),C=l(v,"duration",g.duration);g.calculateDuration(this,y,C,x),this.delay=l(v,"delay",g.delay),this.repeat=l(v,"repeat",g.repeat),this.repeatDelay=l(v,"repeatDelay",g.repeatDelay),this.yoyo=l(v,"yoyo",g.yoyo),this.showBeforeDelay=l(v,"showBeforeDelay",g.showBeforeDelay),this.showOnStart=l(v,"showOnStart",g.showOnStart),this.hideOnComplete=l(v,"hideOnComplete",g.hideOnComplete),this.skipMissedFrames=l(v,"skipMissedFrames",g.skipMissedFrames),this.randomFrame=l(v,"randomFrame",g.randomFrame),this.timeScale=l(v,"timeScale",this.timeScale);var S=l(v,"startFrame",0);S>y&&(S=0),this.randomFrame&&(S=p(0,y-1));var E=g.frames[S];S===0&&!this.forward&&(E=g.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(v){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),v!==void 0&&this.setCurrentFrame(v),this.parent},resume:function(v){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),v!==void 0&&this.setCurrentFrame(v),this.parent},playAfterDelay:function(v,c){if(!this.isPlaying)this.delayCounter=c,this.play(v,!0);else{var m=this.nextAnim,g=this.nextAnimsQueue;m&&g.unshift(m),this.nextAnim=v,this._pendingStop=1,this._pendingStopValue=c}return this.parent},playAfterRepeat:function(v,c){if(c===void 0&&(c=1),!this.isPlaying)this.play(v);else{var m=this.nextAnim,g=this.nextAnimsQueue;m&&g.unshift(m),this.repeatCounter!==-1&&c>this.repeatCounter&&(c=this.repeatCounter),this.nextAnim=v,this._pendingStop=2,this._pendingStopValue=c}return this.parent},play:function(v,c){c===void 0&&(c=!1);var m=this.currentAnim,g=this.parent,y=typeof v=="string"?v:v.key;if(c&&this.isPlaying&&m.key===y)return g;if(m&&this.isPlaying){var x=this.animationManager.getMix(m.key,v);if(x>0)return this.playAfterDelay(v,x)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(v)},playReverse:function(v,c){c===void 0&&(c=!1);var m=typeof v=="string"?v:v.key;return c&&this.isPlaying&&this.currentAnim.key===m?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(v))},startAnimation:function(v){this.load(v);var c=this.currentAnim,m=this.parent;return c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,c.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),m},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(f.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(f.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(f.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(f.ANIMATION_COMPLETE,f.ANIMATION_COMPLETE_KEY)},emitEvents:function(v,c){var m=this.currentAnim;if(m){var g=this.currentFrame,y=this.parent,x=g.textureFrame;y.emit(v,m,g,y,x),c&&y.emit(c+m.key,m,g,y,x)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var v=this.currentFrame;if(!v)return 0;var c=v.progress;return this.inReverse&&(c*=-1),c},setProgress:function(v){return this.forward||(v=1-v),this.setCurrentFrame(this.currentAnim.getFrameByProgress(v)),this.parent},setRepeat:function(v){return this.repeatCounter=v===-1?Number.MAX_VALUE:v,this.parent},globalRemove:function(v,c){c===void 0&&(c=this.currentAnim),this.isPlaying&&c.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(v,c){v===void 0&&(v=!1),c===void 0&&(c=!1);var m=this.currentAnim,g=this.parent;return m?(c&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),m.getFirstTick(this),this.emitEvents(f.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!v,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(m.frames[0]),this.parent):g},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var v=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(v)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var v=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(v)}return this.parent},stopAfterDelay:function(v){return this._pendingStop=1,this._pendingStopValue=v,this.parent},stopAfterRepeat:function(v){return v===void 0&&(v=1),this.repeatCounter!==-1&&v>this.repeatCounter&&(v=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=v,this.parent},stopOnFrame:function(v){return this._pendingStop=3,this._pendingStopValue=v,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(v,c){var m=this.currentAnim;if(!(!this.isPlaying||!m||m.paused)){if(this.accumulator+=c*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=c,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?m.nextFrame(this):m.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var g=0;do this.forward?m.nextFrame(this):m.previousFrame(this),g++;while(this.isPlaying&&this.accumulator>this.nextTick&&g<60)}}},setCurrentFrame:function(v){var c=this.parent;return this.currentFrame=v,c.texture=v.frame.texture,c.frame=v.frame,c.isCropped&&c.frame.updateCropUVs(c._crop,c.flipX,c.flipY),v.setAlpha&&(c.alpha=v.alpha),c.setSizeToFrame(),c._originComponent&&(v.frame.customPivot?c.setOrigin(v.frame.pivotX,v.frame.pivotY):c.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(f.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===v&&this.stop()),c},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(v){return this.anims?this.anims.get(v):null},exists:function(v){return this.anims?this.anims.has(v):!1},create:function(v){var c=v.key,m=!1;return c&&(m=this.get(c),m?console.warn("Animation key already exists: "+c):(m=new a(this,c,v),this.anims||(this.anims=new u),this.anims.set(c,m))),m},createFromAseprite:function(v,c){return this.animationManager.createFromAseprite(v,c,this.parent)},generateFrameNames:function(v,c){return this.animationManager.generateFrameNames(v,c)},generateFrameNumbers:function(v,c){return this.animationManager.generateFrameNumbers(v,c)},remove:function(v){var c=this.get(v);return c&&(this.currentAnim===c&&this.stop(),this.anims.delete(v)),c},destroy:function(){this.animationManager.off(f.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});n.exports=d},57090:n=>{n.exports="add"},25312:n=>{n.exports="animationcomplete"},89580:n=>{n.exports="animationcomplete-"},52860:n=>{n.exports="animationrepeat"},63850:n=>{n.exports="animationrestart"},99085:n=>{n.exports="animationstart"},28087:n=>{n.exports="animationstop"},1794:n=>{n.exports="animationupdate"},52562:n=>{n.exports="pauseall"},57953:n=>{n.exports="remove"},68339:n=>{n.exports="resumeall"},74943:(n,o,r)=>{n.exports={ADD_ANIMATION:r(57090),ANIMATION_COMPLETE:r(25312),ANIMATION_COMPLETE_KEY:r(89580),ANIMATION_REPEAT:r(52860),ANIMATION_RESTART:r(63850),ANIMATION_START:r(99085),ANIMATION_STOP:r(28087),ANIMATION_UPDATE:r(1794),PAUSE_ALL:r(52562),REMOVE_ANIMATION:r(57953),RESUME_ALL:r(68339)}},60421:(n,o,r)=>{n.exports={Animation:r(42099),AnimationFrame:r(41138),AnimationManager:r(60848),AnimationState:r(9674),Events:r(74943)}},2161:(n,o,r)=>{var a=r(83419),p=r(90330),h=r(50792),u=r(24736),f=new a({initialize:function(){this.entries=new p,this.events=new h},add:function(l,d){return this.entries.set(l,d),this.events.emit(u.ADD,this,l,d),this},has:function(l){return this.entries.has(l)},exists:function(l){return this.entries.has(l)},get:function(l){return this.entries.get(l)},remove:function(l){var d=this.get(l);return d&&(this.entries.delete(l),this.events.emit(u.REMOVE,this,l,d.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});n.exports=f},24047:(n,o,r)=>{var a=r(2161),p=r(83419),h=r(8443),u=new p({initialize:function(l){this.game=l,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(h.DESTROY,this.destroy,this)},addCustom:function(f){return this.custom.hasOwnProperty(f)||(this.custom[f]=new a),this.custom[f]},destroy:function(){for(var f=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],l=0;l<f.length;l++)this[f[l]].destroy(),this[f[l]]=null;for(var d in this.custom)this.custom[d].destroy();this.custom=null,this.game=null}});n.exports=u},51464:n=>{n.exports="add"},59261:n=>{n.exports="remove"},24736:(n,o,r)=>{n.exports={ADD:r(51464),REMOVE:r(59261)}},83388:(n,o,r)=>{n.exports={BaseCache:r(2161),CacheManager:r(24047),Events:r(24736)}},71911:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(39506),u=r(50792),f=r(19715),l=r(87841),d=r(61340),v=r(80333),c=r(26099),m=new a({Extends:u,Mixins:[p.AlphaSingle,p.Visible],initialize:function(y,x,C,S){y===void 0&&(y=0),x===void 0&&(x=0),C===void 0&&(C=0),S===void 0&&(S=0),u.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new l,this.dirty=!0,this._x=y,this._y=x,this._width=C,this._height=S,this._bounds=new l,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new d,this.transparent=!0,this.backgroundColor=v("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new c(C/2,S/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0,this.renderRoundPixels=!0},addToRenderList:function(g){this.renderList.push(g)},setOrigin:function(g,y){return g===void 0&&(g=.5),y===void 0&&(y=g),this.originX=g,this.originY=y,this},getScroll:function(g,y,x){x===void 0&&(x=new c);var C=this.width*.5,S=this.height*.5;return x.x=g-C,x.y=y-S,this.useBounds&&(x.x=this.clampX(x.x),x.y=this.clampY(x.y)),x},centerOnX:function(g){var y=this.width*.5;return this.midPoint.x=g,this.scrollX=g-y,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(g){var y=this.height*.5;return this.midPoint.y=g,this.scrollY=g-y,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(g,y){return this.centerOnX(g),this.centerOnY(y),this},centerToBounds:function(){if(this.useBounds){var g=this._bounds,y=this.width*.5,x=this.height*.5;this.midPoint.set(g.centerX,g.centerY),this.scrollX=g.centerX-y,this.scrollY=g.centerY-x}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(g){if(this.disableCull)return g;var y=this.matrix.matrix,x=y[0],C=y[1],S=y[2],E=y[3],T=x*E-C*S;if(!T)return g;var P=y[4],M=y[5],w=this.scrollX,b=this.scrollY,I=this.width,R=this.height,A=this.y,L=A+R,O=this.x,F=O+I,G=this.culledObjects,U=g.length;T=1/T,G.length=0;for(var z=0;z<U;++z){var N=g[z];if(!N.hasOwnProperty("width")||N.parentContainer){G.push(N);continue}var k=N.width,D=N.height,V=N.x-w*N.scrollFactorX-k*N.originX,B=N.y-b*N.scrollFactorY-D*N.originY,W=V*x+B*S+P,H=V*C+B*E+M,Y=(V+k)*x+(B+D)*S+P,X=(V+k)*C+(B+D)*E+M;Y>O&&W<F&&X>A&&H<L&&G.push(N)}return G},getWorldPoint:function(g,y,x){x===void 0&&(x=new c);var C=this.matrix.matrix,S=C[0],E=C[1],T=C[2],P=C[3],M=C[4],w=C[5],b=S*P-E*T;if(!b)return x.x=g,x.y=y,x;b=1/b;var I=P*b,R=-E*b,A=-T*b,L=S*b,O=(T*w-P*M)*b,F=(E*M-S*w)*b,G=Math.cos(this.rotation),U=Math.sin(this.rotation),z=this.zoomX,N=this.zoomY,k=this.scrollX,D=this.scrollY,V=g+(k*G-D*U)*z,B=y+(k*U+D*G)*N;return x.x=V*I+B*A+O,x.y=V*R+B*L+F,x},ignore:function(g){var y=this.id;Array.isArray(g)||(g=[g]);for(var x=0;x<g.length;x++){var C=g[x];Array.isArray(C)?this.ignore(C):C.isParent?this.ignore(C.getChildren()):C.cameraFilter|=y}return this},clampX:function(g){var y=this._bounds,x=this.displayWidth,C=y.x+(x-this.width)/2,S=Math.max(C,C+y.width-x);return g<C?g=C:g>S&&(g=S),g},clampY:function(g){var y=this._bounds,x=this.displayHeight,C=y.y+(x-this.height)/2,S=Math.max(C,C+y.height-x);return g<C?g=C:g>S&&(g=S),g},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(g){return g===void 0&&(g=0),this.rotation=h(g),this},setBackgroundColor:function(g){return g===void 0&&(g="rgba(0,0,0,0)"),this.backgroundColor=v(g),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(g,y,x,C,S){return S===void 0&&(S=!1),this._bounds.setTo(g,y,x,C),this.dirty=!0,this.useBounds=!0,S?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(g){g===void 0&&(g=new l);var y=this._bounds;return g.setTo(y.x,y.y,y.width,y.height),g},setName:function(g){return g===void 0&&(g=""),this.name=g,this},setPosition:function(g,y){return y===void 0&&(y=g),this.x=g,this.y=y,this},setRotation:function(g){return g===void 0&&(g=0),this.rotation=g,this},setRoundPixels:function(g){return this.roundPixels=g,this},setScene:function(g,y){y===void 0&&(y=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=g,this.isSceneCamera=y;var x=g.sys;return this.sceneManager=x.game.scene,this.scaleManager=x.scale,this.cameraManager=x.cameras,this.updateSystem(),this},setScroll:function(g,y){return y===void 0&&(y=g),this.scrollX=g,this.scrollY=y,this},setSize:function(g,y){return y===void 0&&(y=g),this.width=g,this.height=y,this},setViewport:function(g,y,x,C){return this.x=g,this.y=y,this.width=x,this.height=C,this},setZoom:function(g,y){return g===void 0&&(g=1),y===void 0&&(y=g),g===0&&(g=.001),y===0&&(y=.001),this.zoomX=g,this.zoomY=y,this},setMask:function(g,y){return y===void 0&&(y=!0),this.mask=g,this._maskCamera=y?this.cameraManager.default:this,this},clearMask:function(g){return g===void 0&&(g=!1),g&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var g={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(g.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),g},update:function(){},setIsSceneCamera:function(g){return this.isSceneCamera=g,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var g=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,y=this.sceneManager;g&&!this._customViewport?y.customViewports++:!g&&this._customViewport&&y.customViewports--,this.dirty=!0,this._customViewport=g}},destroy:function(){this.emit(f.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(g){this._x=g,this.updateSystem()}},y:{get:function(){return this._y},set:function(g){this._y=g,this.updateSystem()}},width:{get:function(){return this._width},set:function(g){this._width=g,this.updateSystem()}},height:{get:function(){return this._height},set:function(g){this._height=g,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(g){g!==this._scrollX&&(this._scrollX=g,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(g){g!==this._scrollY&&(this._scrollY=g,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(g){this._zoomX=g,this._zoomY=g,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(g){this._zoomX=g,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(g){this._zoomY=g,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(g){this._rotation=g,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});n.exports=m},38058:(n,o,r)=>{var a=r(71911),p=r(67502),h=r(45319),u=r(83419),f=r(31401),l=r(20052),d=r(19715),v=r(28915),c=r(87841),m=r(26099),g=new u({Extends:a,Mixins:[f.PostPipeline],initialize:function(x,C,S,E){a.call(this,x,C,S,E),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new l.Fade(this),this.flashEffect=new l.Flash(this),this.shakeEffect=new l.Shake(this),this.panEffect=new l.Pan(this),this.rotateToEffect=new l.RotateTo(this),this.zoomEffect=new l.Zoom(this),this.lerp=new m(1,1),this.followOffset=new m,this.deadzone=null,this._follow=null},setDeadzone:function(y,x){if(y===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=y,this.deadzone.height=x):this.deadzone=new c(0,0,y,x),this._follow){var C=this.width/2,S=this.height/2,E=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(E,T),this.scrollX=E-C,this.scrollY=T-S}p(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(y,x,C,S,E,T){return this.fadeEffect.start(!1,y,x,C,S,!0,E,T)},fadeOut:function(y,x,C,S,E,T){return this.fadeEffect.start(!0,y,x,C,S,!0,E,T)},fadeFrom:function(y,x,C,S,E,T,P){return this.fadeEffect.start(!1,y,x,C,S,E,T,P)},fade:function(y,x,C,S,E,T,P){return this.fadeEffect.start(!0,y,x,C,S,E,T,P)},flash:function(y,x,C,S,E,T,P){return this.flashEffect.start(y,x,C,S,E,T,P)},shake:function(y,x,C,S,E){return this.shakeEffect.start(y,x,C,S,E)},pan:function(y,x,C,S,E,T,P){return this.panEffect.start(y,x,C,S,E,T,P)},rotateTo:function(y,x,C,S,E,T,P){return this.rotateToEffect.start(y,x,C,S,E,T,P)},zoomTo:function(y,x,C,S,E,T){return this.zoomEffect.start(y,x,C,S,E,T)},preRender:function(){this.renderList.length=0;var y=this.width,x=this.height,C=y*.5,S=x*.5,E=this.zoomX,T=this.zoomY,P=this.matrix;this.renderRoundPixels=this.roundPixels&&Number.isInteger(E)&&Number.isInteger(T);var M=y*this.originX,w=x*this.originY,b=this._follow,I=this.deadzone,R=this.scrollX,A=this.scrollY;I&&p(I,this.midPoint.x,this.midPoint.y);var L=!1;if(b&&!this.panEffect.isRunning){var O=this.lerp,F=b.x-this.followOffset.x,G=b.y-this.followOffset.y;I?(F<I.x?R=v(R,R-(I.x-F),O.x):F>I.right&&(R=v(R,R+(F-I.right),O.x)),G<I.y?A=v(A,A-(I.y-G),O.y):G>I.bottom&&(A=v(A,A+(G-I.bottom),O.y))):(R=v(R,F-M,O.x),A=v(A,G-w,O.y)),L=!0}this.roundPixels&&(R=Math.floor(R),A=Math.floor(A)),this.useBounds&&(R=this.clampX(R),A=this.clampY(A)),this.scrollX=R,this.scrollY=A;var U=R+C,z=A+S;this.midPoint.set(U,z);var N=Math.floor(y/E+.5),k=Math.floor(x/T+.5),D=Math.floor(U-N/2+.5),V=Math.floor(z-k/2+.5);this.worldView.setTo(D,V,N,k),P.applyITRS(Math.floor(this.x+M+.5),Math.floor(this.y+w+.5),this.rotation,E,T),P.translate(-M,-w),this.shakeEffect.preRender(),L&&this.emit(d.FOLLOW_UPDATE,this,b)},setLerp:function(y,x){return y===void 0&&(y=1),x===void 0&&(x=y),this.lerp.set(y,x),this},setFollowOffset:function(y,x){return y===void 0&&(y=0),x===void 0&&(x=0),this.followOffset.set(y,x),this},startFollow:function(y,x,C,S,E,T){x===void 0&&(x=!1),C===void 0&&(C=1),S===void 0&&(S=C),E===void 0&&(E=0),T===void 0&&(T=E),this._follow=y,this.roundPixels=x,C=h(C,0,1),S=h(S,0,1),this.lerp.set(C,S),this.followOffset.set(E,T);var P=this.width/2,M=this.height/2,w=y.x-E,b=y.y-T;return this.midPoint.set(w,b),this.scrollX=w-P,this.scrollY=b-M,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(y,x){this.visible&&(this.rotateToEffect.update(y,x),this.panEffect.update(y,x),this.zoomEffect.update(y,x),this.shakeEffect.update(y,x),this.flashEffect.update(y,x),this.fadeEffect.update(y,x))},destroy:function(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});n.exports=g},32743:(n,o,r)=>{var a=r(38058),p=r(83419),h=r(95540),u=r(37277),f=r(37303),l=r(97480),d=r(44594),v=new p({initialize:function(m){this.scene=m,this.systems=m.sys,this.roundPixels=m.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,m.sys.events.once(d.BOOT,this.boot,this),m.sys.events.on(d.START,this.start,this)},boot:function(){var c=this.systems;c.settings.cameras?this.fromJSON(c.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,c.scale.width,c.scale.height).setScene(this.scene),c.game.scale.on(l.RESIZE,this.onResize,this),this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){if(!this.main){var c=this.systems;c.settings.cameras?this.fromJSON(c.settings.cameras):this.add(),this.main=this.cameras[0]}var m=this.systems.events;m.on(d.UPDATE,this.update,this),m.once(d.SHUTDOWN,this.shutdown,this)},add:function(c,m,g,y,x,C){c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=this.scene.sys.scale.width),y===void 0&&(y=this.scene.sys.scale.height),x===void 0&&(x=!1),C===void 0&&(C="");var S=new a(c,m,g,y);return S.setName(C),S.setScene(this.scene),S.setRoundPixels(this.roundPixels),S.id=this.getNextID(),this.cameras.push(S),x&&(this.main=S),S},addExisting:function(c,m){m===void 0&&(m=!1);var g=this.cameras.indexOf(c);return g===-1?(c.id=this.getNextID(),c.setRoundPixels(this.roundPixels),this.cameras.push(c),m&&(this.main=c),c):null},getNextID:function(){for(var c=this.cameras,m=1,g=0;g<32;g++){for(var y=!1,x=0;x<c.length;x++){var C=c[x];if(C&&C.id===m){y=!0;continue}}if(y)m=m<<1;else return m}return 0},getTotal:function(c){c===void 0&&(c=!1);for(var m=0,g=this.cameras,y=0;y<g.length;y++){var x=g[y];(!c||c&&x.visible)&&m++}return m},fromJSON:function(c){Array.isArray(c)||(c=[c]);for(var m=this.scene.sys.scale.width,g=this.scene.sys.scale.height,y=0;y<c.length;y++){var x=c[y],C=h(x,"x",0),S=h(x,"y",0),E=h(x,"width",m),T=h(x,"height",g),P=this.add(C,S,E,T);P.name=h(x,"name",""),P.zoom=h(x,"zoom",1),P.rotation=h(x,"rotation",0),P.scrollX=h(x,"scrollX",0),P.scrollY=h(x,"scrollY",0),P.roundPixels=h(x,"roundPixels",!1),P.visible=h(x,"visible",!0);var M=h(x,"backgroundColor",!1);M&&P.setBackgroundColor(M);var w=h(x,"bounds",null);if(w){var b=h(w,"x",0),I=h(w,"y",0),R=h(w,"width",m),A=h(w,"height",g);P.setBounds(b,I,R,A)}}return this},getCamera:function(c){for(var m=this.cameras,g=0;g<m.length;g++)if(m[g].name===c)return m[g];return null},getCamerasBelowPointer:function(c){for(var m=this.cameras,g=c.x,y=c.y,x=[],C=0;C<m.length;C++){var S=m[C];S.visible&&S.inputEnabled&&f(S,g,y)&&x.unshift(S)}return x},remove:function(c,m){m===void 0&&(m=!0),Array.isArray(c)||(c=[c]);for(var g=0,y=this.cameras,x=0;x<c.length;x++){var C=y.indexOf(c[x]);C!==-1&&(m?y[C].destroy():y[C].renderList=[],y.splice(C,1),g++)}return!this.main&&y[0]&&(this.main=y[0]),g},render:function(c,m){for(var g=this.scene,y=this.cameras,x=0;x<y.length;x++){var C=y[x];if(C.visible&&C.alpha>0){C.preRender();var S=this.getVisibleChildren(m.getChildren(),C);c.render(g,S,C)}}},getVisibleChildren:function(c,m){return c.filter(function(g){return g.willRender(m)})},resetAll:function(){for(var c=0;c<this.cameras.length;c++)this.cameras[c].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(c,m){for(var g=0;g<this.cameras.length;g++)this.cameras[g].update(c,m)},onResize:function(c,m,g,y,x){for(var C=0;C<this.cameras.length;C++){var S=this.cameras[C];S._x===0&&S._y===0&&S._width===y&&S._height===x&&S.setSize(m.width,m.height)}},resize:function(c,m){for(var g=0;g<this.cameras.length;g++)this.cameras[g].setSize(c,m)},shutdown:function(){this.main=void 0;for(var c=0;c<this.cameras.length;c++)this.cameras[c].destroy();this.cameras=[];var m=this.systems.events;m.off(d.UPDATE,this.update,this),m.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(d.START,this.start,this),this.systems.events.off(d.DESTROY,this.destroy,this),this.systems.game.scale.off(l.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});u.register("CameraManager",v,"cameras"),n.exports=v},5020:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(19715),u=new p({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(f,l,d,v,c,m,g,y){if(f===void 0&&(f=!0),l===void 0&&(l=1e3),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene),!m&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=l,this.direction=f,this.progress=0,this.red=d,this.green=v,this.blue=c,this.alpha=f?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y;var x=f?h.FADE_OUT_START:h.FADE_IN_START;return this.camera.emit(x,this.camera,this,l,d,v,c),this.camera},update:function(f,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(f){if(!this.isRunning&&!this.isComplete)return!1;var l=this.camera;return f.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",f.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(f,l){if(!this.isRunning&&!this.isComplete)return!1;var d=this.camera,v=this.red/255,c=this.green/255,m=this.blue/255;return f.drawFillRect(d.x,d.y,d.width,d.height,l(m,c,v,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var f=this.direction?h.FADE_OUT_COMPLETE:h.FADE_IN_COMPLETE;this.camera.emit(f,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});n.exports=u},10662:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(19715),u=new p({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(f,l,d,v,c,m,g){return f===void 0&&(f=250),l===void 0&&(l=255),d===void 0&&(d=255),v===void 0&&(v=255),c===void 0&&(c=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene),!c&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=f,this.progress=0,this.red=l,this.green=d,this.blue=v,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g,this.camera.emit(h.FLASH_START,this.camera,this,f,l,d,v),this.camera)},update:function(f,l){this.isRunning&&(this._elapsed+=l,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(f){if(!this.isRunning)return!1;var l=this.camera;return f.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",f.fillRect(l.x,l.y,l.width,l.height),!0},postRenderWebGL:function(f,l){if(!this.isRunning)return!1;var d=this.camera,v=this.red/255,c=this.green/255,m=this.blue/255;return f.drawFillRect(d.x,d.y,d.width,d.height,l(m,c,v,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});n.exports=u},20359:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(62640),u=r(19715),f=r(26099),l=new p({initialize:function(v){this.camera=v,this.isRunning=!1,this.duration=0,this.source=new f,this.current=new f,this.destination=new f,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(d,v,c,m,g,y,x){c===void 0&&(c=1e3),m===void 0&&(m=h.Linear),g===void 0&&(g=!1),y===void 0&&(y=null),x===void 0&&(x=this.camera.scene);var C=this.camera;return!g&&this.isRunning||(this.isRunning=!0,this.duration=c,this.progress=0,this.source.set(C.scrollX,C.scrollY),this.destination.set(d,v),C.getScroll(d,v,this.current),typeof m=="string"&&h.hasOwnProperty(m)?this.ease=h[m]:typeof m=="function"&&(this.ease=m),this._elapsed=0,this._onUpdate=y,this._onUpdateScope=x,this.camera.emit(u.PAN_START,this.camera,this,c,d,v)),C},update:function(d,v){if(this.isRunning){this._elapsed+=v;var c=a(this._elapsed/this.duration,0,1);this.progress=c;var m=this.camera;if(this._elapsed<this.duration){var g=this.ease(c);m.getScroll(this.destination.x,this.destination.y,this.current);var y=this.source.x+(this.current.x-this.source.x)*g,x=this.source.y+(this.current.y-this.source.y)*g;m.setScroll(y,x),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,m,c,y,x)}else m.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,m,c,m.scrollX,m.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});n.exports=l},34208:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(19715),u=r(62640),f=new p({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(l,d,v,c,m,g,y){v===void 0&&(v=1e3),c===void 0&&(c=u.Linear),m===void 0&&(m=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene),d===void 0&&(d=!1),this.shortestPath=d;var x=l;l<0?(x=-1*l,this.clockwise=!1):this.clockwise=!0;var C=360*Math.PI/180;x=x-Math.floor(x/C)*C;var S=this.camera;if(!m&&this.isRunning)return S;if(this.isRunning=!0,this.duration=v,this.progress=0,this.source=S.rotation,this.destination=x,typeof c=="string"&&u.hasOwnProperty(c)?this.ease=u[c]:typeof c=="function"&&(this.ease=c),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y,this.shortestPath){var E=0,T=0;this.destination>this.source?E=Math.abs(this.destination-this.source):E=Math.abs(this.destination+C)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+C)-this.destination,E<T?this.clockwise=!0:E>T&&(this.clockwise=!1)}return this.camera.emit(h.ROTATE_START,this.camera,this,v,x),S},update:function(l,d){if(this.isRunning){this._elapsed+=d;var v=a(this._elapsed/this.duration,0,1);this.progress=v;var c=this.camera;if(this._elapsed<this.duration){var m=this.ease(v);this.current=c.rotation;var g=0,y=360*Math.PI/180,x=this.destination,C=this.current;this.clockwise===!1&&(x=this.current,C=this.destination),x>=C?g=Math.abs(x-C):g=Math.abs(x+y)-C;var S=0;this.clockwise?S=c.rotation+g*m:S=c.rotation-g*m,c.rotation=S,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,v,S)}else c.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,c,v,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});n.exports=f},30330:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(19715),u=r(26099),f=new p({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(l,d,v,c,m){return l===void 0&&(l=100),d===void 0&&(d=.05),v===void 0&&(v=!1),c===void 0&&(c=null),m===void 0&&(m=this.camera.scene),!v&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=l,this.progress=0,typeof d=="number"?this.intensity.set(d):this.intensity.set(d.x,d.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=c,this._onUpdateScope=m,this.camera.emit(h.SHAKE_START,this.camera,this,l,d),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(l,d){if(this.isRunning)if(this._elapsed+=d,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var v=this.intensity,c=this.camera.width,m=this.camera.height,g=this.camera.zoom;this._offsetX=(Math.random()*v.x*c*2-v.x*c)*g,this._offsetY=(Math.random()*v.y*m*2-v.y*m)*g,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});n.exports=f},45641:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(62640),u=r(19715),f=new p({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,d,v,c,m,g){d===void 0&&(d=1e3),v===void 0&&(v=h.Linear),c===void 0&&(c=!1),m===void 0&&(m=null),g===void 0&&(g=this.camera.scene);var y=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,this.source=y.zoom,this.destination=l,typeof v=="string"&&h.hasOwnProperty(v)?this.ease=h[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=m,this._onUpdateScope=g,this.camera.emit(u.ZOOM_START,this.camera,this,d,l)),y},update:function(l,d){this.isRunning&&(this._elapsed+=d,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});n.exports=f},20052:(n,o,r)=>{n.exports={Fade:r(5020),Flash:r(10662),Pan:r(20359),Shake:r(30330),RotateTo:r(34208),Zoom:r(45641)}},16438:n=>{n.exports="cameradestroy"},32726:n=>{n.exports="camerafadeincomplete"},87807:n=>{n.exports="camerafadeinstart"},45917:n=>{n.exports="camerafadeoutcomplete"},95666:n=>{n.exports="camerafadeoutstart"},47056:n=>{n.exports="cameraflashcomplete"},91261:n=>{n.exports="cameraflashstart"},45047:n=>{n.exports="followupdate"},81927:n=>{n.exports="camerapancomplete"},74264:n=>{n.exports="camerapanstart"},54419:n=>{n.exports="postrender"},79330:n=>{n.exports="prerender"},93183:n=>{n.exports="camerarotatecomplete"},80112:n=>{n.exports="camerarotatestart"},62252:n=>{n.exports="camerashakecomplete"},86017:n=>{n.exports="camerashakestart"},539:n=>{n.exports="camerazoomcomplete"},51892:n=>{n.exports="camerazoomstart"},19715:(n,o,r)=>{n.exports={DESTROY:r(16438),FADE_IN_COMPLETE:r(32726),FADE_IN_START:r(87807),FADE_OUT_COMPLETE:r(45917),FADE_OUT_START:r(95666),FLASH_COMPLETE:r(47056),FLASH_START:r(91261),FOLLOW_UPDATE:r(45047),PAN_COMPLETE:r(81927),PAN_START:r(74264),POST_RENDER:r(54419),PRE_RENDER:r(79330),ROTATE_COMPLETE:r(93183),ROTATE_START:r(80112),SHAKE_COMPLETE:r(62252),SHAKE_START:r(86017),ZOOM_COMPLETE:r(539),ZOOM_START:r(51892)}},87969:(n,o,r)=>{n.exports={Camera:r(38058),BaseCamera:r(71911),CameraManager:r(32743),Effects:r(20052),Events:r(19715)}},63091:(n,o,r)=>{var a=r(83419),p=r(35154),h=new a({initialize:function(f){this.camera=p(f,"camera",null),this.left=p(f,"left",null),this.right=p(f,"right",null),this.up=p(f,"up",null),this.down=p(f,"down",null),this.zoomIn=p(f,"zoomIn",null),this.zoomOut=p(f,"zoomOut",null),this.zoomSpeed=p(f,"zoomSpeed",.01),this.minZoom=p(f,"minZoom",.001),this.maxZoom=p(f,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=p(f,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=p(f,"speed.x",0),this.speedY=p(f,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var f=this.camera;this.up&&this.up.isDown?f.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(f.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?f.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(f.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(f.zoom-=this.zoomSpeed,f.zoom<this.minZoom&&(f.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(f.zoom+=this.zoomSpeed,f.zoom>this.maxZoom&&(f.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});n.exports=h},58818:(n,o,r)=>{var a=r(83419),p=r(35154),h=new a({initialize:function(f){this.camera=p(f,"camera",null),this.left=p(f,"left",null),this.right=p(f,"right",null),this.up=p(f,"up",null),this.down=p(f,"down",null),this.zoomIn=p(f,"zoomIn",null),this.zoomOut=p(f,"zoomOut",null),this.zoomSpeed=p(f,"zoomSpeed",.01),this.minZoom=p(f,"minZoom",.001),this.maxZoom=p(f,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=p(f,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=p(f,"acceleration.x",0),this.accelY=p(f,"acceleration.y",0)),this.dragX=0,this.dragY=0;var d=p(f,"drag",null);typeof d=="number"?(this.dragX=d,this.dragY=d):(this.dragX=p(f,"drag.x",0),this.dragY=p(f,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var v=p(f,"maxSpeed",null);typeof v=="number"?(this.maxSpeedX=v,this.maxSpeedY=v):(this.maxSpeedX=p(f,"maxSpeed.x",0),this.maxSpeedY=p(f,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var f=this.camera;this._speedX>0?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(f.scrollX-=this._speedX*u|0),this._speedY!==0&&(f.scrollY-=this._speedY*u|0),this._zoom!==0&&(f.zoom+=this._zoom,f.zoom<this.minZoom?f.zoom=this.minZoom:f.zoom>this.maxZoom&&(f.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});n.exports=h},38865:(n,o,r)=>{n.exports={FixedKeyControl:r(63091),SmoothedKeyControl:r(58818)}},26638:(n,o,r)=>{n.exports={Controls:r(38865),Scene2D:r(87969)}},8054:(n,o,r)=>{var a={VERSION:"3.90.0",LOG_VERSION:"v390",BlendModes:r(10312),ScaleModes:r(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};n.exports=a},69547:(n,o,r)=>{var a=r(83419),p=r(8054),h=r(42363),u=r(82264),f=r(95540),l=r(35154),d=r(41212),v=r(29747),c=r(75508),m=r(36060),g=r(80333),y=new a({initialize:function(C){C===void 0&&(C={});var S=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],E="#ffffff",T=l(C,"scale",null);this.width=l(T,"width",1024,C),this.height=l(T,"height",768,C),this.zoom=l(T,"zoom",1,C),this.parent=l(T,"parent",void 0,C),this.scaleMode=l(T,T?"mode":"scaleMode",0,C),this.expandParent=l(T,"expandParent",!0,C),this.autoRound=l(T,"autoRound",!1,C),this.autoCenter=l(T,"autoCenter",0,C),this.resizeInterval=l(T,"resizeInterval",500,C),this.fullscreenTarget=l(T,"fullscreenTarget",null,C),this.minWidth=l(T,"min.width",0,C),this.maxWidth=l(T,"max.width",0,C),this.minHeight=l(T,"min.height",0,C),this.maxHeight=l(T,"max.height",0,C),this.snapWidth=l(T,"snap.width",0,C),this.snapHeight=l(T,"snap.height",0,C),this.renderType=l(C,"type",p.AUTO),this.canvas=l(C,"canvas",null),this.context=l(C,"context",null),this.canvasStyle=l(C,"canvasStyle",null),this.customEnvironment=l(C,"customEnvironment",!1),this.sceneConfig=l(C,"scene",null),this.seed=l(C,"seed",[(Date.now()*Math.random()).toString()]),c.RND=new c.RandomDataGenerator(this.seed),this.gameTitle=l(C,"title",""),this.gameURL=l(C,"url","https://phaser.io/"+p.LOG_VERSION),this.gameVersion=l(C,"version",""),this.autoFocus=l(C,"autoFocus",!0),this.stableSort=l(C,"stableSort",-1),this.stableSort===-1&&(this.stableSort=u.browser.es2019?1:0),u.features.stableSort=this.stableSort,this.domCreateContainer=l(C,"dom.createContainer",!1),this.domPointerEvents=l(C,"dom.pointerEvents","none"),this.inputKeyboard=l(C,"input.keyboard",!0),this.inputKeyboardEventTarget=l(C,"input.keyboard.target",window),this.inputKeyboardCapture=l(C,"input.keyboard.capture",[]),this.inputMouse=l(C,"input.mouse",!0),this.inputMouseEventTarget=l(C,"input.mouse.target",null),this.inputMousePreventDefaultDown=l(C,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=l(C,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=l(C,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=l(C,"input.mouse.preventDefaultWheel",!0),this.inputTouch=l(C,"input.touch",u.input.touch),this.inputTouchEventTarget=l(C,"input.touch.target",null),this.inputTouchCapture=l(C,"input.touch.capture",!0),this.inputActivePointers=l(C,"input.activePointers",1),this.inputSmoothFactor=l(C,"input.smoothFactor",0),this.inputWindowEvents=l(C,"input.windowEvents",!0),this.inputGamepad=l(C,"input.gamepad",!1),this.inputGamepadEventTarget=l(C,"input.gamepad.target",window),this.disableContextMenu=l(C,"disableContextMenu",!1),this.audio=l(C,"audio",{}),this.hideBanner=l(C,"banner",null)===!1,this.hidePhaser=l(C,"banner.hidePhaser",!1),this.bannerTextColor=l(C,"banner.text",E),this.bannerBackgroundColor=l(C,"banner.background",S),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=l(C,"fps",null),this.disablePreFX=l(C,"disablePreFX",!1),this.disablePostFX=l(C,"disablePostFX",!1);var P=l(C,"render",null);this.pipeline=l(P,"pipeline",null,C),this.autoMobilePipeline=l(P,"autoMobilePipeline",!0,C),this.defaultPipeline=l(P,"defaultPipeline",m.MULTI_PIPELINE,C),this.antialias=l(P,"antialias",!0,C),this.antialiasGL=l(P,"antialiasGL",!0,C),this.mipmapFilter=l(P,"mipmapFilter","",C),this.desynchronized=l(P,"desynchronized",!1,C),this.roundPixels=l(P,"roundPixels",!1,C),this.pixelArt=l(P,"pixelArt",this.zoom!==1,C),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=l(P,"transparent",!1,C),this.clearBeforeRender=l(P,"clearBeforeRender",!0,C),this.preserveDrawingBuffer=l(P,"preserveDrawingBuffer",!1,C),this.premultipliedAlpha=l(P,"premultipliedAlpha",!0,C),this.failIfMajorPerformanceCaveat=l(P,"failIfMajorPerformanceCaveat",!1,C),this.powerPreference=l(P,"powerPreference","default",C),this.batchSize=l(P,"batchSize",4096,C),this.maxTextures=l(P,"maxTextures",-1,C),this.maxLights=l(P,"maxLights",10,C);var M=l(C,"backgroundColor",0);this.backgroundColor=g(M),this.transparent&&(this.backgroundColor=g(0),this.backgroundColor.alpha=0),this.preBoot=l(C,"callbacks.preBoot",v),this.postBoot=l(C,"callbacks.postBoot",v),this.physics=l(C,"physics",{}),this.defaultPhysicsSystem=l(this.physics,"default",!1),this.loaderBaseURL=l(C,"loader.baseURL",""),this.loaderPath=l(C,"loader.path",""),this.loaderMaxParallelDownloads=l(C,"loader.maxParallelDownloads",u.os.android?6:32),this.loaderCrossOrigin=l(C,"loader.crossOrigin",void 0),this.loaderResponseType=l(C,"loader.responseType",""),this.loaderAsync=l(C,"loader.async",!0),this.loaderUser=l(C,"loader.user",""),this.loaderPassword=l(C,"loader.password",""),this.loaderTimeout=l(C,"loader.timeout",0),this.loaderMaxRetries=l(C,"loader.maxRetries",2),this.loaderWithCredentials=l(C,"loader.withCredentials",!1),this.loaderImageLoadType=l(C,"loader.imageLoadType","XHR"),this.loaderLocalScheme=l(C,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=l(C,"fx.glow.quality",.1),this.glowFXDistance=l(C,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var w=l(C,"plugins",null),b=h.DefaultScene;w&&(Array.isArray(w)?this.defaultPlugins=w:d(w)&&(this.installGlobalPlugins=f(w,"global",[]),this.installScenePlugins=f(w,"scene",[]),Array.isArray(w.default)?b=w.default:Array.isArray(w.defaultMerge)&&(b=b.concat(w.defaultMerge)))),this.defaultPlugins=b;var I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=l(C,"images.default",I+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=l(C,"images.missing",I+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=l(C,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=p.WEBGL:window.FORCE_CANVAS&&(this.renderType=p.CANVAS))}});n.exports=y},86054:(n,o,r)=>{var a=r(20623),p=r(27919),h=r(8054),u=r(89357),f=function(l){var d=l.config;if((d.customEnvironment||d.canvas)&&d.renderType===h.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!d.customEnvironment&&!d.canvas&&d.renderType!==h.HEADLESS)if(d.renderType===h.AUTO&&(d.renderType=u.webGL?h.WEBGL:h.CANVAS),d.renderType===h.WEBGL){if(!u.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(d.renderType===h.CANVAS){if(!u.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+d.renderType);d.antialias||p.disableSmoothing();var v=l.scale.baseSize,c=v.width,m=v.height;if(d.canvas?(l.canvas=d.canvas,l.canvas.width=c,l.canvas.height=m):l.canvas=p.create(l,c,m,d.renderType),d.canvasStyle&&(l.canvas.style=d.canvasStyle),d.antialias||a.setCrisp(l.canvas),d.renderType!==h.HEADLESS){var g,y;g=r(68627),y=r(74797),d.renderType===h.WEBGL?l.renderer=new y(l):(l.renderer=new g(l),l.context=l.renderer.gameContext)}};n.exports=f},96391:(n,o,r)=>{var a=r(8054),p=function(h){var u=h.config;if(!u.hideBanner){var f="WebGL";u.renderType===a.CANVAS?f="Canvas":u.renderType===a.HEADLESS&&(f="Headless");var l=u.audio,d=h.device.audio,v;if(d.webAudio&&!l.disableWebAudio?v="Web Audio":l.noAudio||!d.webAudio&&!d.audioData?v="No Audio":v="HTML5 Audio",h.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var c="",m=[c];if(Array.isArray(u.bannerBackgroundColor)){var g;u.bannerBackgroundColor.forEach(function(x){c=c.concat("%c "),m.push("background: "+x),g=x}),m[m.length-1]="color: "+u.bannerTextColor+"; background: "+g}else c=c.concat("%c "),m.push("color: "+u.bannerTextColor+"; background: "+u.bannerBackgroundColor);m.push("background: transparent"),u.gameTitle&&(c=c.concat(u.gameTitle),u.gameVersion&&(c=c.concat(" v"+u.gameVersion)),u.hidePhaser||(c=c.concat(" / ")));var y="";u.hidePhaser||(c=c.concat("Phaser v"+a.VERSION+y+" ("+f+" | "+v+")")),c=c.concat(" %c "+u.gameURL),m[0]=c,console.log.apply(console,m)}}};n.exports=p},50127:(n,o,r)=>{var a=r(40366),p=r(60848),h=r(24047),u=r(27919),f=r(83419),l=r(69547),d=r(83719),v=r(86054),c=r(45893),m=r(96391),g=r(82264),y=r(57264),x=r(50792),C=r(8443),S=r(7003),E=r(37277),T=r(77332),P=r(76531),M=r(60903),w=r(69442),b=r(17130),I=r(65898),R=r(51085),A=r(14747);if(0)var L;var O=new f({initialize:function(G){this.config=new l(G),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new x,this.anims=new p(this),this.textures=new b(this),this.cache=new h(this),this.registry=new c(this,new x),this.input=new S(this,this.config),this.scene=new M(this,this.config.sceneConfig),this.device=g,this.scale=new P(this,this.config),this.sound=null,this.sound=A.create(this),this.loop=new I(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,y(this.boot.bind(this))},boot:function(){if(!E.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),v(this),d(this),m(this),a(this.canvas,this.config.parent),this.textures.once(w.READY,this.texturesReady,this),this.events.emit(C.BOOT)},texturesReady:function(){this.events.emit(C.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),R(this);var F=this.events;F.on(C.HIDDEN,this.onHidden,this),F.on(C.VISIBLE,this.onVisible,this),F.on(C.BLUR,this.onBlur,this),F.on(C.FOCUS,this.onFocus,this)},step:function(F,G){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(C.PRE_STEP,F,G),U.emit(C.STEP,F,G),this.scene.update(F,G),U.emit(C.POST_STEP,F,G);var z=this.renderer;z.preRender(),U.emit(C.PRE_RENDER,z,F,G),this.scene.render(z),z.postRender(),U.emit(C.POST_RENDER,z,F,G)}},headlessStep:function(F,G){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var U=this.events;U.emit(C.PRE_STEP,F,G),U.emit(C.STEP,F,G),this.scene.update(F,G),U.emit(C.POST_STEP,F,G),this.scene.isProcessing=!1,U.emit(C.PRE_RENDER,null,F,G),U.emit(C.POST_RENDER,null,F,G)}},onHidden:function(){this.loop.pause(),this.events.emit(C.PAUSE)},pause:function(){var F=this.isPaused;this.isPaused=!0,F||this.events.emit(C.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(C.RESUME,this.loop.pauseDuration)},resume:function(){var F=this.isPaused;this.isPaused=!1,F&&this.events.emit(C.RESUME,0)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(F,G){G===void 0&&(G=!1),this.pendingDestroy=!0,this.removeCanvas=F,this.noReturn=G},runDestroy:function(){this.scene.destroy(),this.events.emit(C.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});n.exports=O},65898:(n,o,r)=>{var a=r(83419),p=r(35154),h=r(29747),u=r(43092),f=new a({initialize:function(d,v){this.game=d,this.raf=new u,this.started=!1,this.running=!1,this.minFps=p(v,"min",5),this.targetFps=p(v,"target",60),this.fpsLimit=p(v,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=h,this.forceSetTimeOut=p(v,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this.pauseDuration=0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=p(v,"deltaHistory",10),this.panicMax=p(v,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=p(v,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.pauseDuration=this.time-this._pauseTime,this.startTime+=this.pauseDuration},resetDelta:function(){var l=window.performance.now();this.time=l,this.lastTime=l,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0;for(var d=0;d<this.deltaSmoothingMax;d++)this.deltaHistory[d]=Math.min(this._target,this.deltaHistory[d]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(l){if(this.started)return this;this.started=!0,this.running=!0;for(var d=0;d<this.deltaSmoothingMax;d++)this.deltaHistory[d]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=l;var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target)},smoothDelta:function(l){var d=this.deltaIndex,v=this.deltaHistory,c=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,l=Math.min(l,this._target)),l>this._min&&(l=v[d],l=Math.min(l,this._min)),v[d]=l,this.deltaIndex++,this.deltaIndex>=c&&(this.deltaIndex=0);for(var m=0,g=0;g<c;g++)m+=v[g];return m/=c,m},updateFPS:function(l){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=l+1e3,this.framesThisSecond=0},stepLimitFPS:function(l){this.now=l;var d=Math.max(0,l-this.lastTime);this.rawDelta=d,this.time+=this.rawDelta,this.smoothStep&&(d=this.smoothDelta(d)),this.delta+=d,l>=this.nextFpsUpdate&&this.updateFPS(l),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(l,this.delta),this.delta=0),this.lastTime=l,this.frame++},step:function(l){this.now=l;var d=Math.max(0,l-this.lastTime);this.rawDelta=d,this.time+=this.rawDelta,this.smoothStep&&(d=this.smoothDelta(d)),this.delta=d,l>=this.nextFpsUpdate&&this.updateFPS(l),this.framesThisSecond++,this.callback(l,d),this.lastTime=l,this.frame++},tick:function(){var l=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(l):this.step(l)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(l){l===void 0&&(l=!1);var d=window.performance.now();if(!this.running){l&&(this.startTime+=-this.lastTime+(this.lastTime+d));var v=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(v,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=d+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});n.exports=f},51085:(n,o,r)=>{var a=r(8443),p=function(h){var u,f=h.events;if(document.hidden!==void 0)u="visibilitychange";else{var l=["webkit","moz","ms"];l.forEach(function(v){document[v+"Hidden"]!==void 0&&(document.hidden=function(){return document[v+"Hidden"]},u=v+"visibilitychange")})}var d=function(v){document.hidden||v.type==="pause"?f.emit(a.HIDDEN):f.emit(a.VISIBLE)};u&&document.addEventListener(u,d,!1),window.onblur=function(){f.emit(a.BLUR)},window.onfocus=function(){f.emit(a.FOCUS)},window.focus&&h.config.autoFocus&&window.focus()};n.exports=p},97217:n=>{n.exports="blur"},47548:n=>{n.exports="boot"},19814:n=>{n.exports="contextlost"},68446:n=>{n.exports="destroy"},41700:n=>{n.exports="focus"},25432:n=>{n.exports="hidden"},65942:n=>{n.exports="pause"},59211:n=>{n.exports="postrender"},47789:n=>{n.exports="poststep"},39066:n=>{n.exports="prerender"},460:n=>{n.exports="prestep"},16175:n=>{n.exports="ready"},42331:n=>{n.exports="resume"},11966:n=>{n.exports="step"},32969:n=>{n.exports="systemready"},94830:n=>{n.exports="visible"},8443:(n,o,r)=>{n.exports={BLUR:r(97217),BOOT:r(47548),CONTEXT_LOST:r(19814),DESTROY:r(68446),FOCUS:r(41700),HIDDEN:r(25432),PAUSE:r(65942),POST_RENDER:r(59211),POST_STEP:r(47789),PRE_RENDER:r(39066),PRE_STEP:r(460),READY:r(16175),RESUME:r(42331),STEP:r(11966),SYSTEM_READY:r(32969),VISIBLE:r(94830)}},42857:(n,o,r)=>{n.exports={Config:r(69547),CreateRenderer:r(86054),DebugHeader:r(96391),Events:r(8443),TimeStep:r(65898),VisibilityHandler:r(51085)}},99584:(n,o,r)=>{var a=r(5290),p=r(27919),h=r(35154),u=function(f){var l=h(f,"data",[]),d=h(f,"canvas",null),v=h(f,"palette",a),c=h(f,"pixelWidth",1),m=h(f,"pixelHeight",c),g=h(f,"resizeCanvas",!0),y=h(f,"clearCanvas",!0),x=h(f,"preRender",null),C=h(f,"postRender",null),S=Math.floor(Math.abs(l[0].length*c)),E=Math.floor(Math.abs(l.length*m));d||(d=p.create2D(this,S,E),g=!1,y=!1),g&&(d.width=S,d.height=E);var T=d.getContext("2d",{willReadFrequently:!0});y&&T.clearRect(0,0,S,E),x&&x(d,T);for(var P=0;P<l.length;P++)for(var M=l[P],w=0;w<M.length;w++){var b=M[w];b!=="."&&b!==" "&&(T.fillStyle=v[b],T.fillRect(w*c,P*m,c,m))}return C&&C(d,T),d};n.exports=u},15822:(n,o,r)=>{n.exports={GenerateTexture:r(99584),Palettes:r(57763)}},5290:n=>{n.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:n=>{n.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:n=>{n.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:n=>{n.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:n=>{n.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(n,o,r)=>{n.exports={ARNE16:r(5290),C64:r(23816),CGA:r(9866),JMP:r(77552),MSX:r(92259)}},46728:(n,o,r)=>{var a=r(83419),p=r(36316),h=r(80021),u=r(26099),f=new a({Extends:h,initialize:function(d,v,c,m){h.call(this,"CubicBezierCurve"),Array.isArray(d)&&(m=new u(d[6],d[7]),c=new u(d[4],d[5]),v=new u(d[2],d[3]),d=new u(d[0],d[1])),this.p0=d,this.p1=v,this.p2=c,this.p3=m},getStartPoint:function(l){return l===void 0&&(l=new u),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,d){d===void 0&&(d=new u);var v=this.p0,c=this.p1,m=this.p2,g=this.p3;return d.set(p(l,v.x,c.x,m.x,g.x),p(l,v.y,c.y,m.y,g.y))},draw:function(l,d){d===void 0&&(d=32);var v=this.getPoints(d);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var c=1;c<v.length;c++)l.lineTo(v[c].x,v[c].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});f.fromJSON=function(l){var d=l.points,v=new u(d[0],d[1]),c=new u(d[2],d[3]),m=new u(d[4],d[5]),g=new u(d[6],d[7]);return new f(v,c,m,g)},n.exports=f},80021:(n,o,r)=>{var a=r(83419),p=r(19217),h=r(87841),u=r(26099),f=new a({initialize:function(d){this.type=d,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(l,d){return d===void 0&&(d=32),l.strokePoints(this.getPoints(d))},getBounds:function(l,d){l||(l=new h),d===void 0&&(d=16);var v=this.getLength();d>v&&(d=v/2);var c=Math.max(1,Math.round(v/d));return p(this.getSpacedPoints(c),l)},getDistancePoints:function(l){var d=this.getLength(),v=Math.max(1,d/l);return this.getSpacedPoints(v)},getEndPoint:function(l){return l===void 0&&(l=new u),this.getPointAt(1,l)},getLength:function(){var l=this.getLengths();return l[l.length-1]},getLengths:function(l){if(l===void 0&&(l=this.arcLengthDivisions),this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var d=[],v,c=this.getPoint(0,this._tmpVec2A),m=0;d.push(0);for(var g=1;g<=l;g++)v=this.getPoint(g/l,this._tmpVec2B),m+=v.distance(c),d.push(m),c.copy(v);return this.cacheArcLengths=d,d},getPointAt:function(l,d){var v=this.getUtoTmapping(l);return this.getPoint(v,d)},getPoints:function(l,d,v){v===void 0&&(v=[]),l||(d?l=this.getLength()/d:l=this.defaultDivisions);for(var c=0;c<=l;c++)v.push(this.getPoint(c/l));return v},getRandomPoint:function(l){return l===void 0&&(l=new u),this.getPoint(Math.random(),l)},getSpacedPoints:function(l,d,v){v===void 0&&(v=[]),l||(d?l=this.getLength()/d:l=this.defaultDivisions);for(var c=0;c<=l;c++){var m=this.getUtoTmapping(c/l,null,l);v.push(this.getPoint(m))}return v},getStartPoint:function(l){return l===void 0&&(l=new u),this.getPointAt(0,l)},getTangent:function(l,d){d===void 0&&(d=new u);var v=1e-4,c=l-v,m=l+v;return c<0&&(c=0),m>1&&(m=1),this.getPoint(c,this._tmpVec2A),this.getPoint(m,d),d.subtract(this._tmpVec2A).normalize()},getTangentAt:function(l,d){var v=this.getUtoTmapping(l);return this.getTangent(v,d)},getTFromDistance:function(l,d){return l<=0?0:this.getUtoTmapping(0,l,d)},getUtoTmapping:function(l,d,v){var c=this.getLengths(v),m=0,g=c.length,y;d?y=Math.min(d,c[g-1]):y=l*c[g-1];for(var x=0,C=g-1,S;x<=C;)if(m=Math.floor(x+(C-x)/2),S=c[m]-y,S<0)x=m+1;else if(S>0)C=m-1;else{C=m;break}if(m=C,c[m]===y)return m/(g-1);var E=c[m],T=c[m+1],P=T-E,M=(y-E)/P;return(m+M)/(g-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});n.exports=f},73825:(n,o,r)=>{var a=r(83419),p=r(80021),h=r(39506),u=r(35154),f=r(43396),l=r(26099),d=new a({Extends:p,initialize:function(c,m,g,y,x,C,S,E){if(typeof c=="object"){var T=c;c=u(T,"x",0),m=u(T,"y",0),g=u(T,"xRadius",0),y=u(T,"yRadius",g),x=u(T,"startAngle",0),C=u(T,"endAngle",360),S=u(T,"clockwise",!1),E=u(T,"rotation",0)}else y===void 0&&(y=g),x===void 0&&(x=0),C===void 0&&(C=360),S===void 0&&(S=!1),E===void 0&&(E=0);p.call(this,"EllipseCurve"),this.p0=new l(c,m),this._xRadius=g,this._yRadius=y,this._startAngle=h(x),this._endAngle=h(C),this._clockwise=S,this._rotation=h(E)},getStartPoint:function(v){return v===void 0&&(v=new l),this.getPoint(0,v)},getResolution:function(v){return v*2},getPoint:function(v,c){c===void 0&&(c=new l);for(var m=Math.PI*2,g=this._endAngle-this._startAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=m;for(;g>m;)g-=m;g<Number.EPSILON&&(y?g=0:g=m),this._clockwise&&!y&&(g===m?g=-m:g=g-m);var x=this._startAngle+v*g,C=this.p0.x+this._xRadius*Math.cos(x),S=this.p0.y+this._yRadius*Math.sin(x);if(this._rotation!==0){var E=Math.cos(this._rotation),T=Math.sin(this._rotation),P=C-this.p0.x,M=S-this.p0.y;C=P*E-M*T+this.p0.x,S=P*T+M*E+this.p0.y}return c.set(C,S)},setXRadius:function(v){return this.xRadius=v,this},setYRadius:function(v){return this.yRadius=v,this},setWidth:function(v){return this.xRadius=v/2,this},setHeight:function(v){return this.yRadius=v/2,this},setStartAngle:function(v){return this.startAngle=v,this},setEndAngle:function(v){return this.endAngle=v,this},setClockwise:function(v){return this.clockwise=v,this},setRotation:function(v){return this.rotation=v,this},x:{get:function(){return this.p0.x},set:function(v){this.p0.x=v}},y:{get:function(){return this.p0.y},set:function(v){this.p0.y=v}},xRadius:{get:function(){return this._xRadius},set:function(v){this._xRadius=v}},yRadius:{get:function(){return this._yRadius},set:function(v){this._yRadius=v}},startAngle:{get:function(){return f(this._startAngle)},set:function(v){this._startAngle=h(v)}},endAngle:{get:function(){return f(this._endAngle)},set:function(v){this._endAngle=h(v)}},clockwise:{get:function(){return this._clockwise},set:function(v){this._clockwise=v}},angle:{get:function(){return f(this._rotation)},set:function(v){this._rotation=h(v)}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:f(this._startAngle),endAngle:f(this._endAngle),clockwise:this._clockwise,rotation:f(this._rotation)}}});d.fromJSON=function(v){return new d(v)},n.exports=d},33951:(n,o,r)=>{var a=r(83419),p=r(80021),h=r(19217),u=r(87841),f=r(26099),l=new a({Extends:p,initialize:function(v,c){p.call(this,"LineCurve"),Array.isArray(v)&&(c=new f(v[2],v[3]),v=new f(v[0],v[1])),this.p0=v,this.p1=c,this.arcLengthDivisions=1},getBounds:function(d){return d===void 0&&(d=new u),h([this.p0,this.p1],d)},getStartPoint:function(d){return d===void 0&&(d=new f),d.copy(this.p0)},getResolution:function(d){return d===void 0&&(d=1),d},getPoint:function(d,v){return v===void 0&&(v=new f),d===1?v.copy(this.p1):(v.copy(this.p1).subtract(this.p0).scale(d).add(this.p0),v)},getPointAt:function(d,v){return this.getPoint(d,v)},getTangent:function(d,v){return v===void 0&&(v=new f),v.copy(this.p1).subtract(this.p0).normalize(),v},getUtoTmapping:function(d,v,c){var m;if(v){var g=this.getLengths(c),y=g[g.length-1],x=Math.min(v,y);m=x/y}else m=d;return m},draw:function(d){return d.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),d},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});l.fromJSON=function(d){var v=d.points,c=new f(v[0],v[1]),m=new f(v[2],v[3]);return new l(c,m)},n.exports=l},14744:(n,o,r)=>{var a=r(83419),p=r(80021),h=r(32112),u=r(26099),f=new a({Extends:p,initialize:function(d,v,c){p.call(this,"QuadraticBezierCurve"),Array.isArray(d)&&(c=new u(d[4],d[5]),v=new u(d[2],d[3]),d=new u(d[0],d[1])),this.p0=d,this.p1=v,this.p2=c},getStartPoint:function(l){return l===void 0&&(l=new u),l.copy(this.p0)},getResolution:function(l){return l},getPoint:function(l,d){d===void 0&&(d=new u);var v=this.p0,c=this.p1,m=this.p2;return d.set(h(l,v.x,c.x,m.x),h(l,v.y,c.y,m.y))},draw:function(l,d){d===void 0&&(d=32);var v=this.getPoints(d);l.beginPath(),l.moveTo(this.p0.x,this.p0.y);for(var c=1;c<v.length;c++)l.lineTo(v[c].x,v[c].y);return l.strokePath(),l},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});f.fromJSON=function(l){var d=l.points,v=new u(d[0],d[1]),c=new u(d[2],d[3]),m=new u(d[4],d[5]);return new f(v,c,m)},n.exports=f},42534:(n,o,r)=>{var a=r(87842),p=r(83419),h=r(80021),u=r(26099),f=new p({Extends:h,initialize:function(d){d===void 0&&(d=[]),h.call(this,"SplineCurve"),this.points=[],this.addPoints(d)},addPoints:function(l){for(var d=0;d<l.length;d++){var v=new u;typeof l[d]=="number"?(v.x=l[d],v.y=l[d+1],d++):Array.isArray(l[d])?(v.x=l[d][0],v.y=l[d][1]):(v.x=l[d].x,v.y=l[d].y),this.points.push(v)}return this},addPoint:function(l,d){var v=new u(l,d);return this.points.push(v),v},getStartPoint:function(l){return l===void 0&&(l=new u),l.copy(this.points[0])},getResolution:function(l){return l*this.points.length},getPoint:function(l,d){d===void 0&&(d=new u);var v=this.points,c=(v.length-1)*l,m=Math.floor(c),g=c-m,y=v[m===0?m:m-1],x=v[m],C=v[m>v.length-2?v.length-1:m+1],S=v[m>v.length-3?v.length-1:m+2];return d.set(a(g,y.x,x.x,C.x,S.x),a(g,y.y,x.y,C.y,S.y))},toJSON:function(){for(var l=[],d=0;d<this.points.length;d++)l.push(this.points[d].x),l.push(this.points[d].y);return{type:this.type,points:l}}});f.fromJSON=function(l){return new f(l.points)},n.exports=f},25410:(n,o,r)=>{n.exports={Path:r(46669),MoveTo:r(68618),CubicBezier:r(46728),Curve:r(80021),Ellipse:r(73825),Line:r(33951),QuadraticBezier:r(14744),Spline:r(42534)}},68618:(n,o,r)=>{var a=r(83419),p=r(26099),h=new a({initialize:function(f,l){this.active=!1,this.p0=new p(f,l)},getPoint:function(u,f){return f===void 0&&(f=new p),f.copy(this.p0)},getPointAt:function(u,f){return this.getPoint(u,f)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});n.exports=h},46669:(n,o,r)=>{var a=r(83419),p=r(46728),h=r(73825),u=r(39429),f=r(33951),l=r(68618),d=r(14744),v=r(87841),c=r(42534),m=r(26099),g=r(36383),y=new a({initialize:function(C,S){C===void 0&&(C=0),S===void 0&&(S=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new m,this._tmpVec2A=new m,this._tmpVec2B=new m,typeof C=="object"?this.fromJSON(C):this.startPoint.set(C,S)},add:function(x){return this.curves.push(x),this},circleTo:function(x,C,S){return C===void 0&&(C=!1),this.ellipseTo(x,x,0,360,C,S)},closePath:function(){var x=this.curves[0].getPoint(0),C=this.curves[this.curves.length-1].getPoint(1);return x.equals(C)||this.curves.push(new f(C,x)),this},cubicBezierTo:function(x,C,S,E,T,P){var M=this.getEndPoint(),w,b,I;return x instanceof m?(w=x,b=C,I=S):(w=new m(S,E),b=new m(T,P),I=new m(x,C)),this.add(new p(M,w,b,I))},quadraticBezierTo:function(x,C,S,E){var T=this.getEndPoint(),P,M;return x instanceof m?(P=x,M=C):(P=new m(S,E),M=new m(x,C)),this.add(new d(T,P,M))},draw:function(x,C){for(var S=0;S<this.curves.length;S++){var E=this.curves[S];E.active&&E.draw(x,C)}return x},ellipseTo:function(x,C,S,E,T,P){var M=new h(0,0,x,C,S,E,T,P),w=this.getEndPoint(this._tmpVec2A),b=M.getStartPoint(this._tmpVec2B);return w.subtract(b),M.x=w.x,M.y=w.y,this.add(M)},fromJSON:function(x){this.curves=[],this.cacheLengths=[],this.startPoint.set(x.x,x.y),this.autoClose=x.autoClose;for(var C=0;C<x.curves.length;C++){var S=x.curves[C];switch(S.type){case"LineCurve":this.add(f.fromJSON(S));break;case"EllipseCurve":this.add(h.fromJSON(S));break;case"SplineCurve":this.add(c.fromJSON(S));break;case"CubicBezierCurve":this.add(p.fromJSON(S));break;case"QuadraticBezierCurve":this.add(d.fromJSON(S));break}}return this},getBounds:function(x,C){x===void 0&&(x=new v),C===void 0&&(C=16),x.x=Number.MAX_VALUE,x.y=Number.MAX_VALUE;for(var S=new v,E=g.MIN_SAFE_INTEGER,T=g.MIN_SAFE_INTEGER,P=0;P<this.curves.length;P++){var M=this.curves[P];M.active&&(M.getBounds(S,C),x.x=Math.min(x.x,S.x),x.y=Math.min(x.y,S.y),E=Math.max(E,S.right),T=Math.max(T,S.bottom))}return x.right=E,x.bottom=T,x},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var x=[],C=0,S=0;S<this.curves.length;S++)C+=this.curves[S].getLength(),x.push(C);return this.cacheLengths=x,x},getCurveAt:function(x){for(var C=x*this.getLength(),S=this.getCurveLengths(),E=0;E<S.length;){if(S[E]>=C)return this.curves[E];E++}return null},getEndPoint:function(x){return x===void 0&&(x=new m),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,x):x.copy(this.startPoint),x},getLength:function(){var x=this.getCurveLengths();return x[x.length-1]},getPoint:function(x,C){C===void 0&&(C=new m);for(var S=x*this.getLength(),E=this.getCurveLengths(),T=0;T<E.length;){if(E[T]>=S){var P=E[T]-S,M=this.curves[T],w=M.getLength(),b=w===0?0:1-P/w;return M.getPointAt(b,C)}T++}return null},getPoints:function(x,C){!x&&!C&&(x=this.defaultDivisions);for(var S=[],E,T=0;T<this.curves.length;T++){var P=this.curves[T];if(P.active)for(var M=P.getResolution(x),w=P.getPoints(M,C),b=0;b<w.length;b++){var I=w[b];E&&E.equals(I)||(S.push(I),E=I)}}return this.autoClose&&S.length>1&&!S[S.length-1].equals(S[0])&&S.push(S[0]),S},getRandomPoint:function(x){return x===void 0&&(x=new m),this.getPoint(Math.random(),x)},getSpacedPoints:function(x){x===void 0&&(x=40);for(var C=[],S=0;S<=x;S++)C.push(this.getPoint(S/x));return this.autoClose&&C.push(C[0]),C},getStartPoint:function(x){return x===void 0&&(x=new m),x.copy(this.startPoint)},getTangent:function(x,C){C===void 0&&(C=new m);for(var S=x*this.getLength(),E=this.getCurveLengths(),T=0;T<E.length;){if(E[T]>=S){var P=E[T]-S,M=this.curves[T],w=M.getLength(),b=w===0?0:1-P/w;return M.getTangentAt(b,C)}T++}return null},lineTo:function(x,C){x instanceof m?this._tmpVec2B.copy(x):typeof x=="object"?this._tmpVec2B.setFromObject(x):this._tmpVec2B.set(x,C);var S=this.getEndPoint(this._tmpVec2A);return this.add(new f([S.x,S.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(x){return x.unshift(this.getEndPoint()),this.add(new c(x))},moveTo:function(x,C){return x instanceof m?this.add(new l(x.x,x.y)):this.add(new l(x,C))},toJSON:function(){for(var x=[],C=0;C<this.curves.length;C++)x.push(this.curves[C].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:x}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(x,C){return new y(x,C)}),n.exports=y},45893:(n,o,r)=>{var a=r(83419),p=r(24882),h=new a({initialize:function(f,l){this.parent=f,this.events=l,l||(this.events=f.events?f.events:f),this.list={},this.values={},this._frozen=!1,!f.hasOwnProperty("sys")&&this.events&&this.events.once(p.DESTROY,this.destroy,this)},get:function(u){var f=this.list;if(Array.isArray(u)){for(var l=[],d=0;d<u.length;d++)l.push(f[u[d]]);return l}else return f[u]},getAll:function(){var u={};for(var f in this.list)this.list.hasOwnProperty(f)&&(u[f]=this.list[f]);return u},query:function(u){var f={};for(var l in this.list)this.list.hasOwnProperty(l)&&l.match(u)&&(f[l]=this.list[l]);return f},set:function(u,f){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,f);for(var l in u)this.setValue(l,u[l]);return this},inc:function(u,f){if(this._frozen)return this;f===void 0&&(f=1);var l=this.get(u);return l===void 0&&(l=0),this.set(u,l+f),this},toggle:function(u){return this._frozen?this:(this.set(u,!this.get(u)),this)},setValue:function(u,f){if(this._frozen)return this;if(this.has(u))this.values[u]=f;else{var l=this,d=this.list,v=this.events,c=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return d[u]},set:function(m){if(!l._frozen){var g=d[u];d[u]=m,v.emit(p.CHANGE_DATA,c,u,m,g),v.emit(p.CHANGE_DATA_KEY+u,c,m,g)}}}),d[u]=f,v.emit(p.SET_DATA,c,u,f)}return this},each:function(u,f){for(var l=[this.parent,null,void 0],d=1;d<arguments.length;d++)l.push(arguments[d]);for(var v in this.list)l[1]=v,l[2]=this.list[v],u.apply(f,l);return this},merge:function(u,f){f===void 0&&(f=!0);for(var l in u)u.hasOwnProperty(l)&&(f||!f&&!this.has(l))&&this.setValue(l,u[l]);return this},remove:function(u){if(this._frozen)return this;if(Array.isArray(u))for(var f=0;f<u.length;f++)this.removeValue(u[f]);else return this.removeValue(u);return this},removeValue:function(u){if(this.has(u)){var f=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,f)}return this},pop:function(u){var f=void 0;return!this._frozen&&this.has(u)&&(f=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(p.REMOVE_DATA,this.parent,u,f)),f},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(p.CHANGE_DATA),this.events.off(p.SET_DATA),this.events.off(p.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var f in this.list)this.list[f]!==void 0&&u++;return u}}});n.exports=h},63646:(n,o,r)=>{var a=r(83419),p=r(45893),h=r(37277),u=r(44594),f=new a({Extends:p,initialize:function(d){p.call(this,d,d.sys.events),this.scene=d,this.systems=d.sys,d.sys.events.once(u.BOOT,this.boot,this),d.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){p.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("DataManagerPlugin",f,"data"),n.exports=f},10700:n=>{n.exports="changedata"},93608:n=>{n.exports="changedata-"},60883:n=>{n.exports="destroy"},69780:n=>{n.exports="removedata"},22166:n=>{n.exports="setdata"},24882:(n,o,r)=>{n.exports={CHANGE_DATA:r(10700),CHANGE_DATA_KEY:r(93608),DESTROY:r(60883),REMOVE_DATA:r(69780),SET_DATA:r(22166)}},44965:(n,o,r)=>{n.exports={DataManager:r(45893),DataManagerPlugin:r(63646),Events:r(24882)}},7098:(n,o,r)=>{var a=r(84148),p={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function h(){if(typeof importScripts=="function")return p;p.audioData=!!window.Audio,p.webAudio=!!(window.AudioContext||window.webkitAudioContext);var u=document.createElement("audio"),f=!!u.canPlayType;try{if(f){var l=function(c,m){var g=u.canPlayType("audio/"+c).replace(/^no$/,"");return m?!!(g||u.canPlayType("audio/"+m).replace(/^no$/,"")):!!g};if(p.ogg=l('ogg; codecs="vorbis"'),p.opus=l('ogg; codecs="opus"',"opus"),p.mp3=l("mpeg"),p.wav=l("wav"),p.m4a=l("x-m4a"),p.aac=l("aac"),p.flac=l("flac","x-flac"),p.webm=l('webm; codecs="vorbis"'),u.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(a.edge)p.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var d=parseInt(RegExp.$1,10),v=parseInt(RegExp.$2,10);(d===10&&v>=11||d>10)&&(p.dolby=!0)}}}}catch{}return p}n.exports=h()},84148:(n,o,r)=>{var a=r(25892),p={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function h(){var u=navigator.userAgent;return/Edg\/\d+/.test(u)?(p.edge=!0,p.es2019=!0):/OPR/.test(u)?(p.opera=!0,p.es2019=!0):/Chrome\/(\d+)/.test(u)&&!a.windowsPhone?(p.chrome=!0,p.chromeVersion=parseInt(RegExp.$1,10),p.es2019=p.chromeVersion>69):/Firefox\D+(\d+)/.test(u)?(p.firefox=!0,p.firefoxVersion=parseInt(RegExp.$1,10),p.es2019=p.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(u)&&a.iOS?(p.mobileSafari=!0,p.es2019=!0):/MSIE (\d+\.\d+);/.test(u)?(p.ie=!0,p.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(u)&&!a.windowsPhone?(p.safari=!0,p.safariVersion=parseInt(RegExp.$1,10),p.es2019=p.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(u)&&(p.ie=!0,p.trident=!0,p.tridentVersion=parseInt(RegExp.$1,10),p.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(u)&&(p.silk=!0),p}n.exports=h()},89289:(n,o,r)=>{var a=r(27919),p={supportInverseAlpha:!1,supportNewBlendModes:!1};function h(){var l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",d="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",v=new Image;return v.onload=function(){var c=new Image;c.onload=function(){var m=a.create2D(c,6),g=m.getContext("2d",{willReadFrequently:!0});if(g.globalCompositeOperation="multiply",g.drawImage(v,0,0),g.drawImage(c,2,0),!g.getImageData(2,0,1,1))return!1;var y=g.getImageData(2,0,1,1).data;a.remove(c),p.supportNewBlendModes=y[0]===255&&y[1]===0&&y[2]===0},c.src=l+"/wCKxvRF"+d},v.src=l+"AP804Oa6"+d,!1}function u(){var l=a.create2D(this,2),d=l.getContext("2d",{willReadFrequently:!0});d.fillStyle="rgba(10, 20, 30, 0.5)",d.fillRect(0,0,1,1);var v=d.getImageData(0,0,1,1);if(v===null)return!1;d.putImageData(v,1,0);var c=d.getImageData(1,0,1,1),m=c.data[0]===v.data[0]&&c.data[1]===v.data[1]&&c.data[2]===v.data[2]&&c.data[3]===v.data[3];return a.remove(this),m}function f(){return typeof importScripts!="function"&&document!==void 0&&(p.supportNewBlendModes=h(),p.supportInverseAlpha=u()),p}n.exports=f()},89357:(n,o,r)=>{var a=r(25892),p=r(84148),h=r(27919),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function f(){var d=new ArrayBuffer(4),v=new Uint8Array(d),c=new Uint32Array(d);return v[0]=161,v[1]=178,v[2]=195,v[3]=212,c[0]===3569595041?!0:c[0]===2712847316?!1:null}function l(){if(typeof importScripts=="function")return u;u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch{u.localStorage=!1}u.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,u.fileSystem=!!window.requestFileSystem;var d=!1,v=function(){if(window.WebGLRenderingContext)try{var c=h.createWebGL(this),m=c.getContext("webgl")||c.getContext("experimental-webgl"),g=h.create2D(this),y=g.getContext("2d",{willReadFrequently:!0}),x=y.createImageData(1,1);return d=x.data instanceof Uint8ClampedArray,h.remove(c),h.remove(g),!!m}catch{return!1}return!1};return u.webGL=v(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,p.firefox&&p.firefoxVersion<21&&(u.getUserMedia=!1),!a.iOS&&(p.ie||p.firefox||p.chrome)&&(u.canvasBitBltShift=!0),(p.safari||p.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(u.littleEndian=f()),u.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&u.littleEndian!==null&&d,u}n.exports=l()},91639:n=>{var o={available:!1,cancel:"",keyboard:!1,request:""};function r(){if(typeof importScripts=="function")return o;var a,p="Fullscreen",h="FullScreen",u=["request"+p,"request"+h,"webkitRequest"+p,"webkitRequest"+h,"msRequest"+p,"msRequest"+h,"mozRequest"+h,"mozRequest"+p];for(a=0;a<u.length;a++)if(document.documentElement[u[a]]){o.available=!0,o.request=u[a];break}var f=["cancel"+h,"exit"+p,"webkitCancel"+h,"webkitExit"+p,"msCancel"+h,"msExit"+p,"mozCancel"+h,"mozExit"+p];if(o.available){for(a=0;a<f.length;a++)if(document[f[a]]){o.cancel=f[a];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(o.keyboard=!0),Object.defineProperty(o,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),o}n.exports=r()},31784:(n,o,r)=>{var a=r(84148),p={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function h(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(p.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(p.mspointer=!0),navigator.getGamepads&&(p.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?p.wheelEvent="wheel":"onmousewheel"in window?p.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(p.wheelEvent="DOMMouseScroll")),p}n.exports=h()},25892:n=>{var o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return o;var a=navigator.userAgent;/Windows/.test(a)?o.windows=!0:/Mac OS/.test(a)&&!/like Mac OS/.test(a)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(o.iOS=!0,o.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),o.iOSVersion=parseInt(RegExp.$1,10)):o.macOS=!0:/Android/.test(a)?o.android=!0:/Linux/.test(a)?o.linux=!0:/iP[ao]d|iPhone/i.test(a)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=a.toLowerCase().indexOf("iphone")!==-1,o.iPad=a.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk.*Mobile Safari/.test(a)?o.kindle=!0:/CrOS/.test(a)&&(o.chromeOS=!0),(/Windows Phone/i.test(a)||/IEMobile/i.test(a))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var p=/Silk/.test(a);return(o.windows||o.macOS||o.linux&&!p||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(a)&&/Touch/i.test(a))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(o.cordova=!0),window.ejecta!==void 0&&(o.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(o.node=!0),o.node&&typeof process.versions=="object"&&(o.nodeWebkit=!!process.versions["node-webkit"],o.electron=!!process.versions.electron),/Crosswalk/.test(a)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}n.exports=r()},43267:(n,o,r)=>{var a=r(95540),p={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function h(){if(typeof importScripts=="function")return p;var u=document.createElement("video"),f=!!u.canPlayType,l=/^no$/;try{f&&(u.canPlayType('video/ogg; codecs="theora"').replace(l,"")&&(p.ogg=!0),u.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(l,"")&&(p.h264=!0,p.mp4=!0),u.canPlayType("video/x-m4v").replace(l,"")&&(p.m4v=!0),u.canPlayType('video/webm; codecs="vp8, vorbis"').replace(l,"")&&(p.webm=!0),u.canPlayType('video/webm; codecs="vp9"').replace(l,"")&&(p.vp9=!0),u.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(l,"")&&(p.hls=!0))}catch{}return u.parentNode&&u.parentNode.removeChild(u),p.getVideoURL=function(d){Array.isArray(d)||(d=[d]);for(var v=0;v<d.length;v++){var c=a(d[v],"url",d[v]);if(c.indexOf("blob:")===0)return{url:c,type:""};var m;if(c.indexOf("data:")===0?m=c.split(",")[0].match(/\/(.*?);/):m=c.match(/\.([a-zA-Z0-9]+)($|\?)/),m=a(d[v],"type",m?m[1]:"").toLowerCase(),p[m])return{url:c,type:m}}return null},p}n.exports=h()},82264:(n,o,r)=>{n.exports={os:r(25892),browser:r(84148),features:r(89357),input:r(31784),audio:r(7098),video:r(43267),fullscreen:r(91639),canvasFeatures:r(89289)}},89422:(n,o,r)=>{var a=r(83419),p=new Float32Array(20),h=new a({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(u){return this._matrix.set(u),this._dirty=!0,this},reset:function(){var u=this._matrix;return u.fill(0),u[0]=1,u[6]=1,u[12]=1,u[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var u=this._data;return this._dirty&&(u.set(this._matrix),u[4]/=255,u[9]/=255,u[14]/=255,u[19]/=255,this._dirty=!1),u},brightness:function(u,f){u===void 0&&(u=0),f===void 0&&(f=!1);var l=u;return this.multiply([l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0],f)},saturate:function(u,f){u===void 0&&(u=0),f===void 0&&(f=!1);var l=u*2/3+1,d=(l-1)*-.5;return this.multiply([l,d,d,0,0,d,l,d,0,0,d,d,l,0,0,0,0,0,1,0],f)},desaturate:function(u){return u===void 0&&(u=!1),this.saturate(-1,u)},hue:function(u,f){u===void 0&&(u=0),f===void 0&&(f=!1),u=u/180*Math.PI;var l=Math.cos(u),d=Math.sin(u),v=.213,c=.715,m=.072;return this.multiply([v+l*(1-v)+d*-v,c+l*-c+d*-c,m+l*-m+d*(1-m),0,0,v+l*-v+d*.143,c+l*(1-c)+d*.14,m+l*-m+d*-.283,0,0,v+l*-v+d*-(1-v),c+l*-c+d*c,m+l*(1-m)+d*m,0,0,0,0,0,1,0],f)},grayscale:function(u,f){return u===void 0&&(u=1),f===void 0&&(f=!1),this.saturate(-u,f)},blackWhite:function(u){return u===void 0&&(u=!1),this.multiply(h.BLACK_WHITE,u)},contrast:function(u,f){u===void 0&&(u=0),f===void 0&&(f=!1);var l=u+1,d=-.5*(l-1);return this.multiply([l,0,0,0,d,0,l,0,0,d,0,0,l,0,d,0,0,0,1,0],f)},negative:function(u){return u===void 0&&(u=!1),this.multiply(h.NEGATIVE,u)},desaturateLuminance:function(u){return u===void 0&&(u=!1),this.multiply(h.DESATURATE_LUMINANCE,u)},sepia:function(u){return u===void 0&&(u=!1),this.multiply(h.SEPIA,u)},night:function(u,f){return u===void 0&&(u=.1),f===void 0&&(f=!1),this.multiply([u*-2,-u,0,0,0,-u,0,u,0,0,0,u,u*2,0,0,0,0,0,1,0],f)},lsd:function(u){return u===void 0&&(u=!1),this.multiply(h.LSD,u)},brown:function(u){return u===void 0&&(u=!1),this.multiply(h.BROWN,u)},vintagePinhole:function(u){return u===void 0&&(u=!1),this.multiply(h.VINTAGE,u)},kodachrome:function(u){return u===void 0&&(u=!1),this.multiply(h.KODACHROME,u)},technicolor:function(u){return u===void 0&&(u=!1),this.multiply(h.TECHNICOLOR,u)},polaroid:function(u){return u===void 0&&(u=!1),this.multiply(h.POLAROID,u)},shiftToBGR:function(u){return u===void 0&&(u=!1),this.multiply(h.SHIFT_BGR,u)},multiply:function(u,f){f===void 0&&(f=!1),f||this.reset();var l=this._matrix,d=p;return d.set(l),l.set([d[0]*u[0]+d[1]*u[5]+d[2]*u[10]+d[3]*u[15],d[0]*u[1]+d[1]*u[6]+d[2]*u[11]+d[3]*u[16],d[0]*u[2]+d[1]*u[7]+d[2]*u[12]+d[3]*u[17],d[0]*u[3]+d[1]*u[8]+d[2]*u[13]+d[3]*u[18],d[0]*u[4]+d[1]*u[9]+d[2]*u[14]+d[3]*u[19]+d[4],d[5]*u[0]+d[6]*u[5]+d[7]*u[10]+d[8]*u[15],d[5]*u[1]+d[6]*u[6]+d[7]*u[11]+d[8]*u[16],d[5]*u[2]+d[6]*u[7]+d[7]*u[12]+d[8]*u[17],d[5]*u[3]+d[6]*u[8]+d[7]*u[13]+d[8]*u[18],d[5]*u[4]+d[6]*u[9]+d[7]*u[14]+d[8]*u[19]+d[9],d[10]*u[0]+d[11]*u[5]+d[12]*u[10]+d[13]*u[15],d[10]*u[1]+d[11]*u[6]+d[12]*u[11]+d[13]*u[16],d[10]*u[2]+d[11]*u[7]+d[12]*u[12]+d[13]*u[17],d[10]*u[3]+d[11]*u[8]+d[12]*u[13]+d[13]*u[18],d[10]*u[4]+d[11]*u[9]+d[12]*u[14]+d[13]*u[19]+d[14],d[15]*u[0]+d[16]*u[5]+d[17]*u[10]+d[18]*u[15],d[15]*u[1]+d[16]*u[6]+d[17]*u[11]+d[18]*u[16],d[15]*u[2]+d[16]*u[7]+d[17]*u[12]+d[18]*u[17],d[15]*u[3]+d[16]*u[8]+d[17]*u[13]+d[18]*u[18],d[15]*u[4]+d[16]*u[9]+d[17]*u[14]+d[18]*u[19]+d[19]]),this._dirty=!0,this}});h.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],h.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],h.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],h.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],h.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],h.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],h.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],h.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],h.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],h.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],h.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n.exports=h},51767:(n,o,r)=>{var a=r(83419),p=r(29747),h=new a({initialize:function(f,l,d){this._rgb=[0,0,0],this.onChangeCallback=p,this.dirty=!1,this.set(f,l,d)},set:function(u,f,l){return u===void 0&&(u=0),f===void 0&&(f=0),l===void 0&&(l=0),this._rgb=[u,f,l],this.onChange(),this},equals:function(u,f,l){var d=this._rgb;return d[0]===u&&d[1]===f&&d[2]===l},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});n.exports=h},60461:n=>{var o={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};n.exports=o},54312:(n,o,r)=>{var a=r(62235),p=r(35893),h=r(86327),u=r(88417),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)+v),h(l,a(d)+c),l};n.exports=f},46768:(n,o,r)=>{var a=r(62235),p=r(26541),h=r(86327),u=r(385),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)-v),h(l,a(d)+c),l};n.exports=f},35827:(n,o,r)=>{var a=r(62235),p=r(54380),h=r(86327),u=r(40136),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)+v),h(l,a(d)+c),l};n.exports=f},46871:(n,o,r)=>{var a=r(66786),p=r(35893),h=r(7702),u=function(f,l,d,v){return d===void 0&&(d=0),v===void 0&&(v=0),a(f,p(l)+d,h(l)+v),f};n.exports=u},5198:(n,o,r)=>{var a=r(7702),p=r(26541),h=r(20786),u=r(385),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)-v),h(l,a(d)+c),l};n.exports=f},11879:(n,o,r)=>{var a=r(60461),p=[];p[a.BOTTOM_CENTER]=r(54312),p[a.BOTTOM_LEFT]=r(46768),p[a.BOTTOM_RIGHT]=r(35827),p[a.CENTER]=r(46871),p[a.LEFT_CENTER]=r(5198),p[a.RIGHT_CENTER]=r(80503),p[a.TOP_CENTER]=r(89698),p[a.TOP_LEFT]=r(922),p[a.TOP_RIGHT]=r(21373),p[a.LEFT_BOTTOM]=p[a.BOTTOM_LEFT],p[a.LEFT_TOP]=p[a.TOP_LEFT],p[a.RIGHT_BOTTOM]=p[a.BOTTOM_RIGHT],p[a.RIGHT_TOP]=p[a.TOP_RIGHT];var h=function(u,f,l,d,v){return p[l](u,f,d,v)};n.exports=h},80503:(n,o,r)=>{var a=r(7702),p=r(54380),h=r(20786),u=r(40136),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)+v),h(l,a(d)+c),l};n.exports=f},89698:(n,o,r)=>{var a=r(35893),p=r(17717),h=r(88417),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,a(d)+v),u(l,p(d)-c),l};n.exports=f},922:(n,o,r)=>{var a=r(26541),p=r(17717),h=r(385),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,a(d)-v),u(l,p(d)-c),l};n.exports=f},21373:(n,o,r)=>{var a=r(54380),p=r(17717),h=r(40136),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,a(d)+v),u(l,p(d)-c),l};n.exports=f},91660:(n,o,r)=>{n.exports={BottomCenter:r(54312),BottomLeft:r(46768),BottomRight:r(35827),Center:r(46871),LeftCenter:r(5198),QuickSet:r(11879),RightCenter:r(80503),TopCenter:r(89698),TopLeft:r(922),TopRight:r(21373)}},71926:(n,o,r)=>{var a=r(60461),p=r(79291),h={In:r(91660),To:r(16694)};h=p(!1,h,a),n.exports=h},21578:(n,o,r)=>{var a=r(62235),p=r(35893),h=r(88417),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,p(d)+v),u(l,a(d)+c),l};n.exports=f},10210:(n,o,r)=>{var a=r(62235),p=r(26541),h=r(385),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,p(d)-v),u(l,a(d)+c),l};n.exports=f},82341:(n,o,r)=>{var a=r(62235),p=r(54380),h=r(40136),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,p(d)+v),u(l,a(d)+c),l};n.exports=f},87958:(n,o,r)=>{var a=r(62235),p=r(26541),h=r(86327),u=r(40136),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)-v),h(l,a(d)+c),l};n.exports=f},40080:(n,o,r)=>{var a=r(7702),p=r(26541),h=r(20786),u=r(40136),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)-v),h(l,a(d)+c),l};n.exports=f},88466:(n,o,r)=>{var a=r(26541),p=r(17717),h=r(40136),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,a(d)-v),u(l,p(d)-c),l};n.exports=f},38829:(n,o,r)=>{var a=r(60461),p=[];p[a.BOTTOM_CENTER]=r(21578),p[a.BOTTOM_LEFT]=r(10210),p[a.BOTTOM_RIGHT]=r(82341),p[a.LEFT_BOTTOM]=r(87958),p[a.LEFT_CENTER]=r(40080),p[a.LEFT_TOP]=r(88466),p[a.RIGHT_BOTTOM]=r(19211),p[a.RIGHT_CENTER]=r(34609),p[a.RIGHT_TOP]=r(48741),p[a.TOP_CENTER]=r(49440),p[a.TOP_LEFT]=r(81288),p[a.TOP_RIGHT]=r(61323);var h=function(u,f,l,d,v){return p[l](u,f,d,v)};n.exports=h},19211:(n,o,r)=>{var a=r(62235),p=r(54380),h=r(86327),u=r(385),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)+v),h(l,a(d)+c),l};n.exports=f},34609:(n,o,r)=>{var a=r(7702),p=r(54380),h=r(20786),u=r(385),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,p(d)+v),h(l,a(d)+c),l};n.exports=f},48741:(n,o,r)=>{var a=r(54380),p=r(17717),h=r(385),u=r(66737),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),h(l,a(d)+v),u(l,p(d)-c),l};n.exports=f},49440:(n,o,r)=>{var a=r(35893),p=r(17717),h=r(86327),u=r(88417),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,a(d)+v),h(l,p(d)-c),l};n.exports=f},81288:(n,o,r)=>{var a=r(26541),p=r(17717),h=r(86327),u=r(385),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,a(d)-v),h(l,p(d)-c),l};n.exports=f},61323:(n,o,r)=>{var a=r(54380),p=r(17717),h=r(86327),u=r(40136),f=function(l,d,v,c){return v===void 0&&(v=0),c===void 0&&(c=0),u(l,a(d)+v),h(l,p(d)-c),l};n.exports=f},16694:(n,o,r)=>{n.exports={BottomCenter:r(21578),BottomLeft:r(10210),BottomRight:r(82341),LeftBottom:r(87958),LeftCenter:r(40080),LeftTop:r(88466),QuickSet:r(38829),RightBottom:r(19211),RightCenter:r(34609),RightTop:r(48741),TopCenter:r(49440),TopLeft:r(81288),TopRight:r(61323)}},66786:(n,o,r)=>{var a=r(88417),p=r(20786),h=function(u,f,l){return a(u,f),p(u,l)};n.exports=h},62235:n=>{var o=function(r){return r.y+r.height-r.height*r.originY};n.exports=o},72873:(n,o,r)=>{var a=r(62235),p=r(26541),h=r(54380),u=r(17717),f=r(87841),l=function(d,v){v===void 0&&(v=new f);var c=p(d),m=u(d);return v.x=c,v.y=m,v.width=h(d)-c,v.height=a(d)-m,v};n.exports=l},35893:n=>{var o=function(r){return r.x-r.width*r.originX+r.width*.5};n.exports=o},7702:n=>{var o=function(r){return r.y-r.height*r.originY+r.height*.5};n.exports=o},26541:n=>{var o=function(r){return r.x-r.width*r.originX};n.exports=o},87431:n=>{var o=function(r){return r.width*r.originX};n.exports=o},46928:n=>{var o=function(r){return r.height*r.originY};n.exports=o},54380:n=>{var o=function(r){return r.x+r.width-r.width*r.originX};n.exports=o},17717:n=>{var o=function(r){return r.y-r.height*r.originY};n.exports=o},86327:n=>{var o=function(r,a){return r.y=a-r.height+r.height*r.originY,r};n.exports=o},88417:n=>{var o=function(r,a){var p=r.width*r.originX;return r.x=a+p-r.width*.5,r};n.exports=o},20786:n=>{var o=function(r,a){var p=r.height*r.originY;return r.y=a+p-r.height*.5,r};n.exports=o},385:n=>{var o=function(r,a){return r.x=a+r.width*r.originX,r};n.exports=o},40136:n=>{var o=function(r,a){return r.x=a-r.width+r.width*r.originX,r};n.exports=o},66737:n=>{var o=function(r,a){return r.y=a+r.height*r.originY,r};n.exports=o},58724:(n,o,r)=>{n.exports={CenterOn:r(66786),GetBottom:r(62235),GetBounds:r(72873),GetCenterX:r(35893),GetCenterY:r(7702),GetLeft:r(26541),GetOffsetX:r(87431),GetOffsetY:r(46928),GetRight:r(54380),GetTop:r(17717),SetBottom:r(86327),SetCenterX:r(88417),SetCenterY:r(20786),SetLeft:r(385),SetRight:r(40136),SetTop:r(66737)}},20623:n=>{var o={setCrisp:function(r){var a=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return a.forEach(function(p){r.style["image-rendering"]=p}),r.style.msInterpolationMode="nearest-neighbor",r},setBicubic:function(r){return r.style["image-rendering"]="auto",r.style.msInterpolationMode="bicubic",r}};n.exports=o},27919:(n,o,r)=>{var a=r(8054),p=r(68703),h=[],u=!1,f=function(){var l=function(S,E,T,P,M){E===void 0&&(E=1),T===void 0&&(T=1),P===void 0&&(P=a.CANVAS),M===void 0&&(M=!1);var w,b=c(P);return b===null?(b={parent:S,canvas:document.createElement("canvas"),type:P},P===a.CANVAS&&h.push(b),w=b.canvas):(b.parent=S,w=b.canvas),M&&(b.parent=w),w.width=E,w.height=T,u&&P===a.CANVAS&&p.disable(w.getContext("2d",{willReadFrequently:!1})),w},d=function(S,E,T){return l(S,E,T,a.CANVAS)},v=function(S,E,T){return l(S,E,T,a.WEBGL)},c=function(S){if(S===void 0&&(S=a.CANVAS),S===a.WEBGL)return null;for(var E=0;E<h.length;E++){var T=h[E];if(!T.parent&&T.type===S)return T}return null},m=function(S){var E=S instanceof HTMLCanvasElement;h.forEach(function(T){(E&&T.canvas===S||!E&&T.parent===S)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},g=function(){var S=0;return h.forEach(function(E){E.parent&&S++}),S},y=function(){return h.length-g()},x=function(){u=!0},C=function(){u=!1};return{create2D:d,create:l,createWebGL:v,disableSmoothing:x,enableSmoothing:C,first:c,free:y,pool:h,remove:m,total:g}};n.exports=f()},68703:n=>{var o="",r=function(){var a=function(f){for(var l=["i","webkitI","msI","mozI","oI"],d=0;d<l.length;d++){var v=l[d]+"mageSmoothingEnabled";if(v in f)return v}return null},p=function(f){return o===""&&(o=a(f)),o&&(f[o]=!0),f},h=function(f){return o===""&&(o=a(f)),o&&(f[o]=!1),f},u=function(f){return o!==null?f[o]:null};return{disable:h,enable:p,getPrefix:a,isEnabled:u}};n.exports=r()},65208:n=>{var o=function(r,a){return a===void 0&&(a="none"),r.style.msTouchAction=a,r.style["ms-touch-action"]=a,r.style["touch-action"]=a,r};n.exports=o},91610:n=>{var o=function(r,a){a===void 0&&(a="none");var p=["-webkit-","-khtml-","-moz-","-ms-",""];return p.forEach(function(h){r.style[h+"user-select"]=a}),r.style["-webkit-touch-callout"]=a,r.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",r};n.exports=o},26253:(n,o,r)=>{n.exports={CanvasInterpolation:r(20623),CanvasPool:r(27919),Smoothing:r(68703),TouchAction:r(65208),UserSelect:r(91610)}},40987:(n,o,r)=>{var a=r(83419),p=r(37589),h=r(1e3),u=r(7537),f=r(87837),l=new a({initialize:function(v,c,m,g){v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(v,c,m,g)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(d,v,c,m,g){return m===void 0&&(m=255),g===void 0&&(g=!0),this._locked=!0,this.red=d,this.green=v,this.blue=c,this.alpha=m,this._locked=!1,this.update(g)},setGLTo:function(d,v,c,m){return m===void 0&&(m=1),this._locked=!0,this.redGL=d,this.greenGL=v,this.blueGL=c,this.alphaGL=m,this._locked=!1,this.update(!0)},setFromRGB:function(d){return this._locked=!0,this.red=d.r,this.green=d.g,this.blue=d.b,d.hasOwnProperty("a")&&(this.alpha=d.a),this._locked=!1,this.update(!0)},setFromHSV:function(d,v,c){return u(d,v,c,this)},update:function(d){if(d===void 0&&(d=!1),this._locked)return this;var v=this.r,c=this.g,m=this.b,g=this.a;return this._color=p(v,c,m),this._color32=h(v,c,m,g),this._rgba="rgba("+v+","+c+","+m+","+g/255+")",d&&f(v,c,m,this),this},updateHSV:function(){var d=this.r,v=this.g,c=this.b;return f(d,v,c,this),this},clone:function(){return new l(this.r,this.g,this.b,this.a)},gray:function(d){return this.setTo(d,d,d)},random:function(d,v){d===void 0&&(d=0),v===void 0&&(v=255);var c=Math.floor(d+Math.random()*(v-d)),m=Math.floor(d+Math.random()*(v-d)),g=Math.floor(d+Math.random()*(v-d));return this.setTo(c,m,g)},randomGray:function(d,v){d===void 0&&(d=0),v===void 0&&(v=255);var c=Math.floor(d+Math.random()*(v-d));return this.setTo(c,c,c)},saturate:function(d){return this.s+=d/100,this},desaturate:function(d){return this.s-=d/100,this},lighten:function(d){return this.v+=d/100,this},darken:function(d){return this.v-=d/100,this},brighten:function(d){var v=this.r,c=this.g,m=this.b;return v=Math.max(0,Math.min(255,v-Math.round(255*-(d/100)))),c=Math.max(0,Math.min(255,c-Math.round(255*-(d/100)))),m=Math.max(0,Math.min(255,m-Math.round(255*-(d/100)))),this.setTo(v,c,m)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(d){this.gl[0]=Math.min(Math.abs(d),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(d){this.gl[1]=Math.min(Math.abs(d),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(d){this.gl[2]=Math.min(Math.abs(d),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(d){this.gl[3]=Math.min(Math.abs(d),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(d){d=Math.floor(Math.abs(d)),this.r=Math.min(d,255),this.gl[0]=d/255,this.update(!0)}},green:{get:function(){return this.g},set:function(d){d=Math.floor(Math.abs(d)),this.g=Math.min(d,255),this.gl[1]=d/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(d){d=Math.floor(Math.abs(d)),this.b=Math.min(d,255),this.gl[2]=d/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(d){d=Math.floor(Math.abs(d)),this.a=Math.min(d,255),this.gl[3]=d/255,this.update()}},h:{get:function(){return this._h},set:function(d){this._h=d,u(d,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(d){this._s=d,u(this._h,d,this._v,this)}},v:{get:function(){return this._v},set:function(d){this._v=d,u(this._h,this._s,d,this)}}});n.exports=l},92728:(n,o,r)=>{var a=r(37589),p=function(h){h===void 0&&(h=1024);var u=[],f=255,l,d=255,v=0,c=0;for(l=0;l<=f;l++)u.push({r:d,g:l,b:c,color:a(d,l,c)});for(v=255,l=f;l>=0;l--)u.push({r:l,g:v,b:c,color:a(l,v,c)});for(d=0,l=0;l<=f;l++,v--)u.push({r:d,g:v,b:l,color:a(d,v,l)});for(v=0,c=255,l=0;l<=f;l++,c--,d++)u.push({r:d,g:v,b:c,color:a(d,v,c)});if(h===1024)return u;var m=[],g=0,y=1024/h;for(l=0;l<h;l++)m.push(u[Math.floor(g)]),g+=y;return m};n.exports=p},91588:n=>{var o=function(r){var a={r:r>>16&255,g:r>>8&255,b:r&255,a:255};return r>16777215&&(a.a=r>>>24),a};n.exports=o},62957:n=>{var o=function(r){var a=r.toString(16);return a.length===1?"0"+a:a};n.exports=o},37589:n=>{var o=function(r,a,p){return r<<16|a<<8|p};n.exports=o},1e3:n=>{var o=function(r,a,p,h){return h<<24|r<<16|a<<8|p};n.exports=o},62183:(n,o,r)=>{var a=r(40987),p=r(89528),h=function(u,f,l){var d=l,v=l,c=l;if(f!==0){var m=l<.5?l*(1+f):l+f-l*f,g=2*l-m;d=p(g,m,u+1/3),v=p(g,m,u),c=p(g,m,u-1/3)}var y=new a;return y.setGLTo(d,v,c,1)};n.exports=h},27939:(n,o,r)=>{var a=r(7537),p=function(h,u){h===void 0&&(h=1),u===void 0&&(u=1);for(var f=[],l=0;l<=359;l++)f.push(a(l/359,h,u));return f};n.exports=p},7537:(n,o,r)=>{var a=r(37589);function p(u,f,l,d){var v=(u+f*6)%6,c=Math.min(v,4-v,1);return Math.round(255*(d-d*l*Math.max(0,c)))}var h=function(u,f,l,d){f===void 0&&(f=1),l===void 0&&(l=1);var v=p(5,u,f,l),c=p(3,u,f,l),m=p(1,u,f,l);return d?d.setTo?d.setTo(v,c,m,d.alpha,!0):(d.r=v,d.g=c,d.b=m,d.color=a(v,c,m),d):{r:v,g:c,b:m,color:a(v,c,m)}};n.exports=h},70238:(n,o,r)=>{var a=r(40987),p=function(h){var u=new a;h=h.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(c,m,g,y){return m+m+g+g+y+y});var f=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);if(f){var l=parseInt(f[1],16),d=parseInt(f[2],16),v=parseInt(f[3],16);u.setTo(l,d,v)}return u};n.exports=p},89528:n=>{var o=function(r,a,p){return p<0&&(p+=1),p>1&&(p-=1),p<.16666666666666666?r+(a-r)*6*p:p<.5?a:p<.6666666666666666?r+(a-r)*(.6666666666666666-p)*6:r};n.exports=o},30100:(n,o,r)=>{var a=r(40987),p=r(90664),h=function(u){var f=p(u);return new a(f.r,f.g,f.b,f.a)};n.exports=h},90664:n=>{var o=function(r){return r>16777215?{a:r>>>24,r:r>>16&255,g:r>>8&255,b:r&255}:{a:255,r:r>>16&255,g:r>>8&255,b:r&255}};n.exports=o},13699:(n,o,r)=>{var a=r(28915),p=r(37589),h=function(l,d,v,c,m,g,y,x){y===void 0&&(y=100),x===void 0&&(x=0);var C=x/y,S=a(l,c,C),E=a(d,m,C),T=a(v,g,C);return{r:S,g:E,b:T,a:255,color:p(S,E,T)}},u=function(l,d,v,c){return v===void 0&&(v=100),c===void 0&&(c=0),h(l.r,l.g,l.b,d.r,d.g,d.b,v,c)},f=function(l,d,v,c,m,g){return m===void 0&&(m=100),g===void 0&&(g=0),h(l.r,l.g,l.b,d,v,c,m,g)};n.exports={RGBWithRGB:h,ColorWithRGB:f,ColorWithColor:u}},68957:(n,o,r)=>{var a=r(40987),p=function(h){return new a(h.r,h.g,h.b,h.a)};n.exports=p},87388:(n,o,r)=>{var a=r(40987),p=function(h){var u=new a,f=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(h.toLowerCase());if(f){var l=parseInt(f[1],10),d=parseInt(f[2],10),v=parseInt(f[3],10),c=f[4]!==void 0?parseFloat(f[4]):1;u.setTo(l,d,v,c*255)}return u};n.exports=p},87837:n=>{var o=function(r,a,p,h){h===void 0&&(h={h:0,s:0,v:0}),r/=255,a/=255,p/=255;var u=Math.min(r,a,p),f=Math.max(r,a,p),l=f-u,d=0,v=f===0?0:l/f,c=f;return f!==u&&(f===r?d=(a-p)/l+(a<p?6:0):f===a?d=(p-r)/l+2:f===p&&(d=(r-a)/l+4),d/=6),h.hasOwnProperty("_h")?(h._h=d,h._s=v,h._v=c):(h.h=d,h.s=v,h.v=c),h};n.exports=o},75723:(n,o,r)=>{var a=r(62957),p=function(h,u,f,l,d){return l===void 0&&(l=255),d===void 0&&(d="#"),d==="#"?"#"+((1<<24)+(h<<16)+(u<<8)+f).toString(16).slice(1,7):"0x"+a(l)+a(h)+a(u)+a(f)};n.exports=p},85386:(n,o,r)=>{var a=r(30976),p=r(40987),h=function(u,f){return u===void 0&&(u=0),f===void 0&&(f=255),new p(a(u,f),a(u,f),a(u,f))};n.exports=h},80333:(n,o,r)=>{var a=r(70238),p=r(30100),h=r(68957),u=r(87388),f=function(l){var d=typeof l;switch(d){case"string":return l.substr(0,3).toLowerCase()==="rgb"?u(l):a(l);case"number":return p(l);case"object":return h(l)}};n.exports=f},3956:(n,o,r)=>{var a=r(40987);a.ColorSpectrum=r(92728),a.ColorToRGBA=r(91588),a.ComponentToHex=r(62957),a.GetColor=r(37589),a.GetColor32=r(1e3),a.HexStringToColor=r(70238),a.HSLToColor=r(62183),a.HSVColorWheel=r(27939),a.HSVToRGB=r(7537),a.HueToComponent=r(89528),a.IntegerToColor=r(30100),a.IntegerToRGB=r(90664),a.Interpolate=r(13699),a.ObjectToColor=r(68957),a.RandomRGB=r(85386),a.RGBStringToColor=r(87388),a.RGBToHSV=r(87837),a.RGBToString=r(75723),a.ValueToColor=r(80333),n.exports=a},27460:(n,o,r)=>{n.exports={Align:r(71926),BaseShader:r(73894),Bounds:r(58724),Canvas:r(26253),Color:r(3956),ColorMatrix:r(89422),Masks:r(69781),RGB:r(51767)}},6858:(n,o,r)=>{var a=r(83419),p=r(39429),h=new a({initialize:function(f,l,d,v,c,m){l||(l=f.sys.make.image({x:d,y:v,key:c,frame:m,add:!1})),this.bitmapMask=l,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,f,l){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,f,l)},postRenderWebGL:function(u,f,l){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,f,l)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});p.register("bitmapMask",function(u,f,l,d,v){return new h(this.scene,u,f,l,d,v)}),n.exports=h},80661:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f){this.geometryMask=f,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(h){return this.geometryMask=h,this},setInvertAlpha:function(h){return h===void 0&&(h=!0),this.invertAlpha=h,this},preRenderWebGL:function(h,u,f){var l=h.gl;h.flush(),h.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),h.maskCount=0),h.currentCameraMask.mask!==this&&(h.currentMask.mask=this),h.maskStack.push({mask:this,camera:f}),this.applyStencil(h,f,!0),h.maskCount++},applyStencil:function(h,u,f){var l=h.gl,d=this.geometryMask,v=h.maskCount,c=255;l.colorMask(!1,!1,!1,!1),f?(l.stencilFunc(l.EQUAL,v,c),l.stencilOp(l.KEEP,l.KEEP,l.INCR),v++):(l.stencilFunc(l.EQUAL,v+1,c),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),this.level=v,d.renderWebGL(h,d,u),h.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),this.invertAlpha?l.stencilFunc(l.NOTEQUAL,v,c):l.stencilFunc(l.EQUAL,v,c)},postRenderWebGL:function(h){var u=h.gl;h.maskStack.pop(),h.maskCount--,h.flush();var f=h.currentMask;if(h.maskStack.length===0)f.mask=null,u.disable(u.STENCIL_TEST);else{var l=h.maskStack[h.maskStack.length-1];l.mask.applyStencil(h,l.camera,!1),h.currentCameraMask.mask!==l.mask?(f.mask=l.mask,f.camera=l.camera):f.mask=null}},preRenderCanvas:function(h,u,f){var l=this.geometryMask;h.currentContext.save(),l.renderCanvas(h,l,f,null,null,!0),h.currentContext.clip()},postRenderCanvas:function(h){h.currentContext.restore()},destroy:function(){this.geometryMask=null}});n.exports=p},69781:(n,o,r)=>{n.exports={BitmapMask:r(6858),GeometryMask:r(80661)}},73894:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d){(!f||f==="")&&(f=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!l||l==="")&&(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),d===void 0&&(d=null),this.key=u,this.fragmentSrc=f,this.vertexSrc=l,this.uniforms=d}});n.exports=p},40366:n=>{var o=function(r,a){var p;if(a)typeof a=="string"?p=document.getElementById(a):typeof a=="object"&&a.nodeType===1&&(p=a);else if(r.parentElement||a===null)return r;return p||(p=document.body),p.appendChild(r),r};n.exports=o},83719:(n,o,r)=>{var a=r(40366),p=function(h){var u=h.config;if(!(!u.parent||!u.domCreateContainer)){var f=document.createElement("div");f.style.cssText=["display: block;","width: "+h.scale.width+"px;","height: "+h.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+u.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),h.domContainer=f,a(f,u.parent)}};n.exports=p},57264:(n,o,r)=>{var a=r(25892),p=function(h){if(document.readyState==="complete"||document.readyState==="interactive"){h();return}var u=function(){document.removeEventListener("deviceready",u,!0),document.removeEventListener("DOMContentLoaded",u,!0),window.removeEventListener("load",u,!0),h()};document.body?a.cordova?document.addEventListener("deviceready",u,!1):(document.addEventListener("DOMContentLoaded",u,!0),window.addEventListener("load",u,!0)):window.setTimeout(u,20)};n.exports=p},57811:n=>{var o=function(r){if(!r)return window.innerHeight;var a=Math.abs(window.orientation),p={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),p.w=a===90?h.offsetHeight:window.innerWidth,p.h=a===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?p.h:p.w};n.exports=o},45818:(n,o,r)=>{var a=r(13560),p=function(h,u){var f=window.screen,l=f?f.orientation||f.mozOrientation||f.msOrientation:!1;if(l&&typeof l.type=="string")return l.type;if(typeof l=="string")return l;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return a.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return a.ORIENTATION.LANDSCAPE}else return u>h?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE};n.exports=p},74403:n=>{var o=function(r){var a;return r!==""&&(typeof r=="string"?a=document.getElementById(r):r&&r.nodeType===1&&(a=r)),a||(a=document.body),a};n.exports=o},56836:n=>{var o=function(r){var a="";try{if(window.DOMParser){var p=new DOMParser;a=p.parseFromString(r,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.loadXML(r)}catch{a=null}return!a||!a.documentElement||a.getElementsByTagName("parsererror").length?null:a};n.exports=o},35846:n=>{var o=function(r){r.parentNode&&r.parentNode.removeChild(r)};n.exports=o},43092:(n,o,r)=>{var a=r(83419),p=r(29747),h=new a({initialize:function(){this.isRunning=!1,this.callback=p,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var f=this;this.step=function l(d){f.callback(d),f.isRunning&&(f.timeOutID=window.requestAnimationFrame(l))},this.stepTimeout=function l(){f.isRunning&&(f.timeOutID=window.setTimeout(l,f.delay)),f.callback(window.performance.now())}},start:function(u,f,l){this.isRunning||(this.callback=u,this.isSetTimeOut=f,this.delay=l,this.isRunning=!0,this.timeOutID=f?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=p}});n.exports=h},84902:(n,o,r)=>{var a={AddToDOM:r(40366),DOMContentLoaded:r(57264),GetInnerHeight:r(57811),GetScreenOrientation:r(45818),GetTarget:r(74403),ParseXML:r(56836),RemoveFromDOM:r(35846),RequestAnimationFrame:r(43092)};n.exports=a},47565:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(37277),u=new a({Extends:p,initialize:function(){p.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});h.register("EventEmitter",u,"events"),n.exports=u},93055:(n,o,r)=>{n.exports={EventEmitter:r(47565)}},20122:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d){d===void 0&&(d=1),p.call(this,h.BARREL,l),this.amount=d}});n.exports=u},32251:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m,g,y){v===void 0&&(v=1),c===void 0&&(c=1),m===void 0&&(m=1),g===void 0&&(g=1),y===void 0&&(y=4),p.call(this,h.BLOOM,l),this.steps=y,this.offsetX=v,this.offsetY=c,this.blurStrength=m,this.strength=g,this.glcolor=[1,1,1],d!=null&&(this.color=d)},color:{get:function(){var f=this.glcolor;return(f[0]*255<<16)+(f[1]*255<<8)+(f[2]*255|0)},set:function(f){var l=this.glcolor;l[0]=(f>>16&255)/255,l[1]=(f>>8&255)/255,l[2]=(f&255)/255}}});n.exports=u},9047:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m,g,y){d===void 0&&(d=0),v===void 0&&(v=2),c===void 0&&(c=2),m===void 0&&(m=1),y===void 0&&(y=4),p.call(this,h.BLUR,l),this.quality=d,this.x=v,this.y=c,this.steps=y,this.strength=m,this.glcolor=[1,1,1],g!=null&&(this.color=g)},color:{get:function(){var f=this.glcolor;return(f[0]*255<<16)+(f[1]*255<<8)+(f[2]*255|0)},set:function(f){var l=this.glcolor;l[0]=(f>>16&255)/255,l[1]=(f>>8&255)/255,l[2]=(f&255)/255}}});n.exports=u},27885:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m,g,y,x){d===void 0&&(d=.5),v===void 0&&(v=1),c===void 0&&(c=.2),m===void 0&&(m=!1),g===void 0&&(g=1),y===void 0&&(y=1),x===void 0&&(x=1),p.call(this,h.BOKEH,l),this.radius=d,this.amount=v,this.contrast=c,this.isTiltShift=m,this.strength=x,this.blurX=g,this.blurY=y}});n.exports=u},12578:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m,g){d===void 0&&(d=8),m===void 0&&(m=1),g===void 0&&(g=.005),p.call(this,h.CIRCLE,l),this.scale=m,this.feather=g,this.thickness=d,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],v!=null&&(this.color=v),c!=null&&(this.backgroundColor=c)},color:{get:function(){var f=this.glcolor;return(f[0]*255<<16)+(f[1]*255<<8)+(f[2]*255|0)},set:function(f){var l=this.glcolor;l[0]=(f>>16&255)/255,l[1]=(f>>8&255)/255,l[2]=(f&255)/255}},backgroundColor:{get:function(){var f=this.glcolor2;return(f[0]*255<<16)+(f[1]*255<<8)+(f[2]*255|0)},set:function(f){var l=this.glcolor2;l[0]=(f>>16&255)/255,l[1]=(f>>8&255)/255,l[2]=(f&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(f){this.glcolor2[3]=f}}});n.exports=u},15802:(n,o,r)=>{var a=r(83419),p=r(89422),h=r(14811),u=new a({Extends:p,initialize:function(l){p.call(this),this.type=h.COLOR_MATRIX,this.gameObject=l,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});n.exports=u},72898:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f){this.type=u,this.gameObject=f,this.active=!0},setActive:function(h){return this.active=h,this},destroy:function(){this.gameObject=null,this.active=!1}});n.exports=p},44553:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c){d===void 0&&(d="__WHITE"),v===void 0&&(v=.005),c===void 0&&(c=.005),p.call(this,h.DISPLACEMENT,l),this.x=v,this.y=c,this.glTexture,this.setTexture(d)},setTexture:function(f){var l=this.gameObject.scene.sys.textures.getFrame(f);return l&&(this.glTexture=l.glTexture),this}});n.exports=u},68531:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m){v===void 0&&(v=4),c===void 0&&(c=0),m===void 0&&(m=!1),p.call(this,h.GLOW,l),this.outerStrength=v,this.innerStrength=c,this.knockout=m,this.glcolor=[1,1,1,1],d!==void 0&&(this.color=d)},color:{get:function(){var f=this.glcolor;return(f[0]*255<<16)+(f[1]*255<<8)+(f[2]*255|0)},set:function(f){var l=this.glcolor;l[0]=(f>>16&255)/255,l[1]=(f>>8&255)/255,l[2]=(f&255)/255}}});n.exports=u},37102:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m,g,y,x,C){c===void 0&&(c=.2),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=1),C===void 0&&(C=0),p.call(this,h.GRADIENT,l),this.alpha=c,this.size=C,this.fromX=m,this.fromY=g,this.toX=y,this.toY=x,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],d!=null&&(this.color1=d),v!=null&&(this.color2=v)},color1:{get:function(){var f=this.glcolor1;return(f[0]<<16)+(f[1]<<8)+(f[2]|0)},set:function(f){var l=this.glcolor1;l[0]=f>>16&255,l[1]=f>>8&255,l[2]=f&255}},color2:{get:function(){var f=this.glcolor2;return(f[0]<<16)+(f[1]<<8)+(f[2]|0)},set:function(f){var l=this.glcolor2;l[0]=f>>16&255,l[1]=f>>8&255,l[2]=f&255}}});n.exports=u},86886:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d){d===void 0&&(d=1),p.call(this,h.PIXELATE,l),this.amount=d}});n.exports=u},92322:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m,g,y,x){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=.1),m===void 0&&(m=1),y===void 0&&(y=6),x===void 0&&(x=1),p.call(this,h.SHADOW,l),this.x=d,this.y=v,this.decay=c,this.power=m,this.glcolor=[0,0,0,1],this.samples=y,this.intensity=x,g!==void 0&&(this.color=g)},color:{get:function(){var f=this.glcolor;return(f[0]*255<<16)+(f[1]*255<<8)+(f[2]*255|0)},set:function(f){var l=this.glcolor;l[0]=(f>>16&255)/255,l[1]=(f>>8&255)/255,l[2]=(f&255)/255}}});n.exports=u},39563:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m){d===void 0&&(d=.5),v===void 0&&(v=.5),c===void 0&&(c=3),m===void 0&&(m=!1),p.call(this,h.SHINE,l),this.speed=d,this.lineWidth=v,this.gradient=c,this.reveal=m}});n.exports=u},56448:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m){d===void 0&&(d=.5),v===void 0&&(v=.5),c===void 0&&(c=.5),m===void 0&&(m=.5),p.call(this,h.VIGNETTE,l),this.x=d,this.y=v,this.radius=c,this.strength=m}});n.exports=u},38433:(n,o,r)=>{var a=r(83419),p=r(72898),h=r(14811),u=new a({Extends:p,initialize:function(l,d,v,c,m){d===void 0&&(d=.1),v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=!1),p.call(this,h.WIPE,l),this.progress=0,this.wipeWidth=d,this.direction=v,this.axis=c,this.reveal=m}});n.exports=u},14811:n=>{var o={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};n.exports=o},66064:(n,o,r)=>{var a=r(79291),p=r(14811),h={Barrel:r(20122),Controller:r(72898),Bloom:r(32251),Blur:r(9047),Bokeh:r(27885),Circle:r(12578),ColorMatrix:r(15802),Displacement:r(44553),Glow:r(68531),Gradient:r(37102),Pixelate:r(86886),Shadow:r(92322),Shine:r(39563),Vignette:r(56448),Wipe:r(38433)};h=a(!1,h,p),n.exports=h},25305:(n,o,r)=>{var a=r(10312),p=r(23568),h=function(u,f,l){f.x=p(l,"x",0),f.y=p(l,"y",0),f.depth=p(l,"depth",0),f.flipX=p(l,"flipX",!1),f.flipY=p(l,"flipY",!1);var d=p(l,"scale",null);typeof d=="number"?f.setScale(d):d!==null&&(f.scaleX=p(d,"x",1),f.scaleY=p(d,"y",1));var v=p(l,"scrollFactor",null);typeof v=="number"?f.setScrollFactor(v):v!==null&&(f.scrollFactorX=p(v,"x",1),f.scrollFactorY=p(v,"y",1)),f.rotation=p(l,"rotation",0);var c=p(l,"angle",null);c!==null&&(f.angle=c),f.alpha=p(l,"alpha",1);var m=p(l,"origin",null);if(typeof m=="number")f.setOrigin(m);else if(m!==null){var g=p(m,"x",.5),y=p(m,"y",.5);f.setOrigin(g,y)}f.blendMode=p(l,"blendMode",a.NORMAL),f.visible=p(l,"visible",!0);var x=p(l,"add",!0);return x&&u.sys.displayList.add(f),f.preUpdate&&u.sys.updateList.add(f),f};n.exports=h},13059:(n,o,r)=>{var a=r(23568),p=function(h,u){var f=a(u,"anims",null);if(f===null)return h;if(typeof f=="string")h.anims.play(f);else if(typeof f=="object"){var l=h.anims,d=a(f,"key",void 0);if(d){var v=a(f,"startFrame",void 0),c=a(f,"delay",0),m=a(f,"repeat",0),g=a(f,"repeatDelay",0),y=a(f,"yoyo",!1),x=a(f,"play",!1),C=a(f,"delayedPlay",0),S={key:d,delay:c,repeat:m,repeatDelay:g,yoyo:y,startFrame:v};x?l.play(S):C>0?l.playAfterDelay(S,C):l.load(S)}}return h};n.exports=p},8050:(n,o,r)=>{var a=r(83419),p=r(73162),h=r(37277),u=r(51708),f=r(44594),l=r(19186),d=new a({Extends:p,initialize:function(c){p.call(this,c),this.sortChildrenFlag=!1,this.scene=c,this.systems=c.sys,this.events=c.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.events.once(f.DESTROY,this.destroy,this)},addChildCallback:function(v){v.displayList&&v.displayList!==this&&v.removeFromDisplayList(),v.parentContainer&&v.parentContainer.remove(v),v.displayList||(this.queueDepthSort(),v.displayList=this,v.emit(u.ADDED_TO_SCENE,v,this.scene),this.events.emit(f.ADDED_TO_SCENE,v,this.scene))},removeChildCallback:function(v){this.queueDepthSort(),v.displayList=null,v.emit(u.REMOVED_FROM_SCENE,v,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,v,this.scene)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(l(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(v,c){return v._depth-c._depth},getChildren:function(){return this.list},shutdown:function(){for(var v=this.list,c=v.length;c--;)v[c]&&v[c].destroy(!0);v.length=0,this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});h.register("DisplayList",d,"displayList"),n.exports=d},95643:(n,o,r)=>{var a=r(83419),p=r(53774),h=r(45893),u=r(50792),f=r(51708),l=r(44594),d=new a({Extends:u,initialize:function(c,m){u.call(this),this.scene=c,this.displayList=null,this.type=m,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(f.ADDED_TO_SCENE,this.addedToScene,this),this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this),c.sys.queueDepthSort()},setActive:function(v){return this.active=v,this},setName:function(v){return this.name=v,this},setState:function(v){return this.state=v,this},setDataEnabled:function(){return this.data||(this.data=new h(this)),this},setData:function(v,c){return this.data||(this.data=new h(this)),this.data.set(v,c),this},incData:function(v,c){return this.data||(this.data=new h(this)),this.data.inc(v,c),this},toggleData:function(v){return this.data||(this.data=new h(this)),this.data.toggle(v),this},getData:function(v){return this.data||(this.data=new h(this)),this.data.get(v)},setInteractive:function(v,c,m){return this.scene.sys.input.enable(this,v,c,m),this},disableInteractive:function(v){return v===void 0&&(v=!1),this.scene.sys.input.disable(this,v),this},removeInteractive:function(v){return v===void 0&&(v=!1),this.scene.sys.input.clear(this),v&&this.scene.sys.input.resetCursor(),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return p(this)},willRender:function(v){var c=this.displayList&&this.displayList.active?this.displayList.willRender(v):!0;return!(!c||d.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&v.id)},getIndexList:function(){for(var v=this,c=this.parentContainer,m=[];c&&(m.unshift(c.getIndex(v)),v=c,c.parentContainer);)c=c.parentContainer;return this.displayList?m.unshift(this.displayList.getIndex(v)):m.unshift(this.scene.sys.displayList.getIndex(v)),m},addToDisplayList:function(v){return v===void 0&&(v=this.scene.sys.displayList),this.displayList&&this.displayList!==v&&this.removeFromDisplayList(),v.exists(this)||(this.displayList=v,v.add(this,!0),v.queueDepthSort(),this.emit(f.ADDED_TO_SCENE,this,this.scene),v.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var v=this.displayList||this.scene.sys.displayList;return v&&v.exists(this)&&(v.remove(this,!0),v.queueDepthSort(),this.displayList=null,this.emit(f.REMOVED_FROM_SCENE,this,this.scene),v.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},getDisplayList:function(){var v=null;return this.parentContainer?v=this.parentContainer.list:this.displayList&&(v=this.displayList.list),v},destroy:function(v){!this.scene||this.ignoreDestroy||(v===void 0&&(v=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(f.DESTROY,this,v),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});d.RENDER_MASK=15,n.exports=d},44603:(n,o,r)=>{var a=r(83419),p=r(37277),h=r(44594),u=new a({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(f,l){u.prototype.hasOwnProperty(f)||(u.prototype[f]=l)},u.remove=function(f){u.prototype.hasOwnProperty(f)&&delete u.prototype[f]},p.register("GameObjectCreator",u,"make"),n.exports=u},39429:(n,o,r)=>{var a=r(83419),p=r(37277),h=r(44594),u=new a({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},existing:function(f){return(f.renderCanvas||f.renderWebGL)&&this.displayList.add(f),f.preUpdate&&this.updateList.add(f),f},shutdown:function(){this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(f,l){u.prototype.hasOwnProperty(f)||(u.prototype[f]=l)},u.remove=function(f){u.prototype.hasOwnProperty(f)&&delete u.prototype[f]},p.register("GameObjectFactory",u,"add"),n.exports=u},91296:(n,o,r)=>{var a=r(61340),p=new a,h=new a,u=new a,f={camera:p,sprite:h,calc:u},l=function(d,v,c){var m=p,g=h,y=u;return g.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),m.copyFrom(v.matrix),c?(m.multiplyWithOffset(c,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),g.e=d.x,g.f=d.y):(g.e-=v.scrollX*d.scrollFactorX,g.f-=v.scrollY*d.scrollFactorY),m.multiply(g,y),f};n.exports=l},45027:(n,o,r)=>{var a=r(83419),p=r(25774),h=r(37277),u=r(44594),f=new a({Extends:p,initialize:function(d){p.call(this),this.checkQueue=!0,this.scene=d,this.systems=d.sys,d.sys.events.once(u.BOOT,this.boot,this),d.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var l=this.systems.events;l.on(u.PRE_UPDATE,this.update,this),l.on(u.UPDATE,this.sceneUpdate,this),l.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(l,d){for(var v=this._active,c=v.length,m=0;m<c;m++){var g=v[m];g.active&&g.preUpdate.call(g,l,d)}},shutdown:function(){for(var l=this._active.length;l--;)this._active[l].destroy(!0);for(l=this._pending.length;l--;)this._pending[l].destroy(!0);for(l=this._destroy.length;l--;)this._destroy[l].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var d=this.systems.events;d.off(u.PRE_UPDATE,this.update,this),d.off(u.UPDATE,this.sceneUpdate,this),d.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("UpdateList",f,"updateList"),n.exports=f},3217:n=>{var o=function(r,a,p,h,u,f,l,d,v,c,m,g,y,x,C){var S=p.x-a.displayOriginX+u,E=p.y-a.displayOriginY+f,T=S+p.w,P=E+p.h,M=l.a,w=l.b,b=l.c,I=l.d,R=l.e,A=l.f,L=S*M+E*b+R,O=S*w+E*I+A,F=S*M+P*b+R,G=S*w+P*I+A,U=T*M+P*b+R,z=T*w+P*I+A,N=T*M+E*b+R,k=T*w+E*I+A;d&&(L=Math.round(L),O=Math.round(O),F=Math.round(F),G=Math.round(G),U=Math.round(U),z=Math.round(z),N=Math.round(N),k=Math.round(k)),r.batchQuad(a,L,O,F,G,U,z,N,k,h.u0,h.v0,h.u1,h.v1,v,c,m,g,y,x,C)};n.exports=o},53048:n=>{var o=function(r,a,p,h){if(p===void 0&&(p=!1),h===void 0)return h={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},h;var u=r.text,f=u.length,l=r.maxWidth,d=r.wordWrapCharCode,v=Number.MAX_VALUE,c=Number.MAX_VALUE,m=0,g=0,y=r.fontData.chars,x=r.fontData.lineHeight,C=r.letterSpacing,S=r.lineSpacing,E=0,T=0,P=0,M=null,w=r._align,b=0,I=0,R=r.fontSize/r.fontData.size,A=R*r.scaleX,L=R*r.scaleY,O=null,F=0,G=[],U=Number.MAX_VALUE,z=0,N=0,k=0,D,V,B,W=[],H=[],Y=null,X=function(he,Xe){for(var Jt=0,ye=0;ye<he.length;ye++){var be=he.charCodeAt(ye),pi=Xe.chars[be];pi&&(Jt+=pi.xAdvance)}return Jt*A};if(l>0){B=u.split(`
`);var $=[];for(D=0;D<B.length;D++){var J=B[D],q="",Q="",tt="",rt="";for(V=0;V<J.length;V++)if(P=J.charCodeAt(V),q+=J[V],P===d||V===J.length-1){rt=tt+q;var et=X(rt,r.fontData);et<=l?tt=rt:(Q=Q.slice(0,-1),Q+=(Q?`
`:"")+tt,tt=q),q=""}Q=Q.slice(0,-1),Q+=(Q?`
`:"")+tt,$.push(Q)}u=$.join(`
`),h.wrappedText=u,f=u.length}var ot=0;for(D=0;D<f;D++){if(P=u.charCodeAt(D),P===10){Y!==null&&(W.push({word:Y.word,i:Y.i,x:Y.x*A,y:Y.y*L,w:Y.w*A,h:Y.h*L}),Y=null),O=null,G[N]=k,k>z&&(z=k),k<U&&(U=k),N++,k=0,E=0,T=(x+S)*N;continue}if(M=y[P],!!M){if(b=E,I=T,O!==null){var ut=M.kerning[F];b+=ut!==void 0?ut:0}v>b&&(v=b),c>I&&(c=I);var dt=b+M.xAdvance,it=I+x;m<dt&&(m=dt),g<it&&(g=it);var st=M.xOffset+M.xAdvance+(ut!==void 0?ut:0);P===d?Y!==null&&(W.push({word:Y.word,i:Y.i,x:Y.x*A,y:Y.y*L,w:Y.w*A,h:Y.h*L}),Y=null):(Y===null&&(Y={word:"",i:ot,x:E,y:T,w:0,h:x}),Y.word=Y.word.concat(u[D]),Y.w+=st),H.push({i:ot,idx:D,char:u[D],code:P,x:(M.xOffset+b)*R,y:(M.yOffset+T)*R,w:M.width*R,h:M.height*R,t:T*R,r:dt*R,b:x*R,line:N,glyph:M}),E+=M.xAdvance+C+(ut!==void 0?ut:0),O=M,F=P,k=dt*R,ot++}}if(Y!==null&&W.push({word:Y.word,i:Y.i,x:Y.x*A,y:Y.y*L,w:Y.w*A,h:Y.h*L}),G[N]=k,k>z&&(z=k),k<U&&(U=k),w>0)for(var at=0;at<H.length;at++){var yt=H[at];if(w===1){var Ft=(z-G[yt.line])/2;yt.x+=Ft,yt.r+=Ft}else if(w===2){var ee=z-G[yt.line];yt.x+=ee,yt.r+=ee}}var It=h.local,Dt=h.global;return B=h.lines,It.x=v*R,It.y=c*R,It.width=m*R,It.height=g*R,Dt.x=r.x-r._displayOriginX+v*A,Dt.y=r.y-r._displayOriginY+c*L,Dt.width=m*A,Dt.height=g*L,B.shortest=U,B.longest=z,B.lengths=G,a&&(It.x=Math.ceil(It.x),It.y=Math.ceil(It.y),It.width=Math.ceil(It.width),It.height=Math.ceil(It.height),Dt.x=Math.ceil(Dt.x),Dt.y=Math.ceil(Dt.y),Dt.width=Math.ceil(Dt.width),Dt.height=Math.ceil(Dt.height),B.shortest=Math.ceil(U),B.longest=Math.ceil(z)),p&&(r._displayOriginX=r.originX*It.width,r._displayOriginY=r.originY*It.height,Dt.x=r.x-r._displayOriginX*r.scaleX,Dt.y=r.y-r._displayOriginY*r.scaleY,a&&(Dt.x=Math.ceil(Dt.x),Dt.y=Math.ceil(Dt.y))),h.words=W,h.characters=H,h.lines.height=x,h.scale=R,h.scaleX=r.scaleX,h.scaleY=r.scaleY,h};n.exports=o},61327:(n,o,r)=>{var a=r(21859),p=function(h,u,f,l,d,v,c){var m=h.sys.textures.get(f),g=m.get(l),y=h.sys.cache.xml.get(d);if(g&&y){var x=a(y,g,v,c,m);return h.sys.cache.bitmapFont.add(u,{data:x,texture:f,frame:l,fromAtlas:!0}),!0}else return!1};n.exports=p},6925:(n,o,r)=>{var a=r(35154),p=function(h,u){var f=u.width,l=u.height,d=Math.floor(f/2),v=Math.floor(l/2),c=a(u,"chars","");if(c!==""){var m=a(u,"image",""),g=h.sys.textures.getFrame(m),y=g.cutX,x=g.cutY,C=g.source.width,S=g.source.height,E=a(u,"offset.x",0),T=a(u,"offset.y",0),P=a(u,"spacing.x",0),M=a(u,"spacing.y",0),w=a(u,"lineSpacing",0),b=a(u,"charsPerRow",null);b===null&&(b=C/f,b>c.length&&(b=c.length));for(var I=E,R=T,A={retroFont:!0,font:m,size:f,lineHeight:l+w,chars:{}},L=0,O=0;O<c.length;O++){var F=c.charCodeAt(O),G=(y+I)/C,U=(x+R)/S,z=(y+I+f)/C,N=(x+R+l)/S;A.chars[F]={x:I,y:R,width:f,height:l,centerX:d,centerY:v,xOffset:0,yOffset:0,xAdvance:f,data:{},kerning:{},u0:G,v0:U,u1:z,v1:N},L++,L===b?(L=0,I=E,R+=l+M):I+=f+P}var k={data:A,frame:null,texture:m};return k}};n.exports=p},21859:n=>{function o(a,p){return parseInt(a.getAttribute(p),10)}var r=function(a,p,h,u,f){h===void 0&&(h=0),u===void 0&&(u=0);var l=p.cutX,d=p.cutY,v=p.source.width,c=p.source.height,m=p.sourceIndex,g={},y=a.getElementsByTagName("info")[0],x=a.getElementsByTagName("common")[0];g.font=y.getAttribute("face"),g.size=o(y,"size"),g.lineHeight=o(x,"lineHeight")+u,g.chars={};var C=a.getElementsByTagName("char"),S=p!==void 0&&p.trimmed;if(S)var E=p.height,T=p.width;for(var P=0;P<C.length;P++){var M=C[P],w=o(M,"id"),b=String.fromCharCode(w),I=o(M,"x"),R=o(M,"y"),A=o(M,"width"),L=o(M,"height");S&&(I<T&&(T=I),R<E&&(E=R)),S&&E!==0&&T!==0&&(I-=p.x,R-=p.y);var O=(l+I)/v,F=(d+R)/c,G=(l+I+A)/v,U=(d+R+L)/c;if(g.chars[w]={x:I,y:R,width:A,height:L,centerX:Math.floor(A/2),centerY:Math.floor(L/2),xOffset:o(M,"xoffset"),yOffset:o(M,"yoffset"),xAdvance:o(M,"xadvance")+h,data:{},kerning:{},u0:O,v0:F,u1:G,v1:U},f&&A!==0&&L!==0){var z=f.add(b,m,I,R,A,L);z&&z.setUVs(A,L,O,F,G,U)}}var N=a.getElementsByTagName("kerning");for(P=0;P<N.length;P++){var k=N[P],D=o(k,"first"),V=o(k,"second"),B=o(k,"amount");g.chars[V].kerning[D]=B}return g};n.exports=r},196:(n,o,r)=>{var a=r(87662),p=r(79291),h={Parse:r(6925)};h=p(!1,h,a),n.exports=h},87662:n=>{var o={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};n.exports=o},2638:(n,o,r)=>{var a=r(22186),p=r(83419),h=r(12310),u=new p({Extends:a,Mixins:[h],initialize:function(l,d,v,c,m,g,y){a.call(this,l,d,v,c,m,g,y),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(f,l){return this.cropWidth=f,this.cropHeight=l,this},setDisplayCallback:function(f){return this.displayCallback=f,this},setScrollX:function(f){return this.scrollX=f,this},setScrollY:function(f){return this.scrollY=f,this}});n.exports=u},86741:(n,o,r)=>{var a=r(20926),p=function(h,u,f,l){var d=u._text,v=d.length,c=h.currentContext;if(!(v===0||!a(h,c,u,f,l))){f.addToRenderList(u);var m=u.fromAtlas?u.frame:u.texture.frames.__BASE,g=u.displayCallback,y=u.callbackData,x=u.fontData.chars,C=u.fontData.lineHeight,S=u._letterSpacing,E=0,T=0,P=0,M=null,w=0,b=0,I=0,R=0,A=0,L=0,O=null,F=0,G=u.frame.source.image,U=m.cutX,z=m.cutY,N=0,k=0,D=u._fontSize/u.fontData.size,V=u._align,B=0,W=0;u.getTextBounds(!1);var H=u._bounds.lines;V===1?W=(H.longest-H.lengths[0])/2:V===2&&(W=H.longest-H.lengths[0]),c.translate(-u.displayOriginX,-u.displayOriginY);var Y=f.roundPixels;u.cropWidth>0&&u.cropHeight>0&&(c.beginPath(),c.rect(0,0,u.cropWidth,u.cropHeight),c.clip());for(var X=0;X<v;X++){if(k=D,N=0,P=d.charCodeAt(X),P===10){B++,V===1?W=(H.longest-H.lengths[B])/2:V===2&&(W=H.longest-H.lengths[B]),E=0,T+=C,O=null;continue}if(M=x[P],!!M){if(w=U+M.x,b=z+M.y,I=M.width,R=M.height,A=M.xOffset+E-u.scrollX,L=M.yOffset+T-u.scrollY,O!==null){var $=M.kerning[F];A+=$!==void 0?$:0}if(g){y.index=X,y.charCode=P,y.x=A,y.y=L,y.scale=k,y.rotation=N,y.data=M.data;var J=g(y);A=J.x,L=J.y,k=J.scale,N=J.rotation}A*=k,L*=k,A+=W,E+=M.xAdvance+S+($!==void 0?$:0),O=M,F=P,!(I===0||R===0||P===32)&&(Y&&(A=Math.round(A),L=Math.round(L)),c.save(),c.translate(A,L),c.rotate(N),c.scale(k,k),c.drawImage(G,w,b,I,R,0,0,I,R),c.restore())}}c.restore()}};n.exports=p},11164:(n,o,r)=>{var a=r(2638),p=r(25305),h=r(44603),u=r(23568);h.register("dynamicBitmapText",function(f,l){f===void 0&&(f={});var d=u(f,"font",""),v=u(f,"text",""),c=u(f,"size",!1),m=new a(this.scene,0,0,d,v,c);return l!==void 0&&(f.add=l),p(this.scene,m,f),m})},72566:(n,o,r)=>{var a=r(2638),p=r(39429);p.register("dynamicBitmapText",function(h,u,f,l,d){return this.displayList.add(new a(this.scene,h,u,f,l,d))})},12310:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(73482),h=r(86741),n.exports={renderWebGL:p,renderCanvas:h}},73482:(n,o,r)=>{var a=r(91296),p=r(61340),h=r(70554),u=new p,f=function(l,d,v,c){var m=d.text,g=m.length;if(g!==0){v.addToRenderList(d);var y=l.pipelines.set(d.pipeline,d),x=a(d,v,c);l.pipelines.preBatch(d);var C=x.sprite,S=x.calc,E=u,T=d.cropWidth>0||d.cropHeight>0;T&&(y.flush(),l.pushScissor(S.tx,S.ty,d.cropWidth*S.scaleX,d.cropHeight*S.scaleY));var P=d.frame,M=P.glTexture,w=d.tintFill,b=h.getTintAppendFloatAlpha(d.tintTopLeft,v.alpha*d._alphaTL),I=h.getTintAppendFloatAlpha(d.tintTopRight,v.alpha*d._alphaTR),R=h.getTintAppendFloatAlpha(d.tintBottomLeft,v.alpha*d._alphaBL),A=h.getTintAppendFloatAlpha(d.tintBottomRight,v.alpha*d._alphaBR),L=y.setGameObject(d),O=0,F=0,G=0,U=0,z=d.letterSpacing,N,k=0,D=0,V,B=d.scrollX,W=d.scrollY,H=d.fontData,Y=H.chars,X=H.lineHeight,$=d.fontSize/H.size,J=0,q=d._align,Q=0,tt=0,rt=d.getTextBounds(!1);d.maxWidth>0&&(m=rt.wrappedText,g=m.length);var et=d._bounds.lines;q===1?tt=(et.longest-et.lengths[0])/2:q===2&&(tt=et.longest-et.lengths[0]);for(var ot=v.roundPixels,ut=d.displayCallback,dt=d.callbackData,it=0;it<g;it++){if(G=m.charCodeAt(it),G===10){Q++,q===1?tt=(et.longest-et.lengths[Q])/2:q===2&&(tt=et.longest-et.lengths[Q]),O=0,F+=X,V=null;continue}if(N=Y[G],!!N){k=N.width,D=N.height;var st=N.xOffset+O-B,at=N.yOffset+F-W;if(V!==null){var yt=N.kerning[U]||0;st+=yt,O+=yt}if(O+=N.xAdvance+z,V=N,U=G,!(k===0||D===0||G===32)){if($=d.fontSize/d.fontData.size,J=0,ut){dt.color=0,dt.tint.topLeft=b,dt.tint.topRight=I,dt.tint.bottomLeft=R,dt.tint.bottomRight=A,dt.index=it,dt.charCode=G,dt.x=st,dt.y=at,dt.scale=$,dt.rotation=J,dt.data=N.data;var Ft=ut(dt);st=Ft.x,at=Ft.y,$=Ft.scale,J=Ft.rotation,Ft.color?(b=Ft.color,I=Ft.color,R=Ft.color,A=Ft.color):(b=Ft.tint.topLeft,I=Ft.tint.topRight,R=Ft.tint.bottomLeft,A=Ft.tint.bottomRight),b=h.getTintAppendFloatAlpha(b,v.alpha*d._alphaTL),I=h.getTintAppendFloatAlpha(I,v.alpha*d._alphaTR),R=h.getTintAppendFloatAlpha(R,v.alpha*d._alphaBL),A=h.getTintAppendFloatAlpha(A,v.alpha*d._alphaBR)}st*=$,at*=$,st-=d.displayOriginX,at-=d.displayOriginY,st+=tt,E.applyITRS(st,at,J,$,$),S.multiply(E,C);var ee=N.u0,It=N.v0,Dt=N.u1,he=N.v1,Xe=k,Jt=D,ye=C.e,be=C.f,pi=Jt*C.c+C.e,Va=Jt*C.d+C.f,Ua=Xe*C.a+Jt*C.c+C.e,za=Xe*C.b+Jt*C.d+C.f,Wa=Xe*C.a+C.e,Ha=Xe*C.b+C.f;ot&&(ye=Math.round(ye),be=Math.round(be),pi=Math.round(pi),Va=Math.round(Va),Ua=Math.round(Ua),za=Math.round(za),Wa=Math.round(Wa),Ha=Math.round(Ha)),y.shouldFlush(6)&&(y.flush(),L=y.setGameObject(d)),y.batchQuad(d,ye,be,pi,Va,Ua,za,Wa,Ha,ee,It,Dt,he,b,I,R,A,w,M,L)}}}T&&(y.flush(),l.popScissor()),l.pipelines.postBatch(d)}};n.exports=f},22186:(n,o,r)=>{var a=r(83419),p=r(45319),h=r(31401),u=r(95643),f=r(53048),l=r(61327),d=r(21859),v=r(87841),c=r(18658),m=new a({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Texture,h.Tint,h.Transform,h.Visible,c],initialize:function(y,x,C,S,E,T,P){E===void 0&&(E=""),P===void 0&&(P=0),u.call(this,y,"BitmapText"),this.font=S;var M=this.scene.sys.cache.bitmapFont.get(S);if(!M)throw new Error("Invalid BitmapText key: "+S);this.fontData=M.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=P,this._bounds=f(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=M.fromAtlas,this.setTexture(M.texture,M.frame),this.setPosition(x,C),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(E)},setLeftAlign:function(){return this._align=m.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=m.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=m.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(g){return this._fontSize=g,this._dirty=!0,this},setLetterSpacing:function(g){return g===void 0&&(g=0),this._letterSpacing=g,this._dirty=!0,this},setLineSpacing:function(g){return g===void 0&&(g=0),this.lineSpacing=g,this},setText:function(g){return!g&&g!==0&&(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this.text&&(this._text=g.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(g,y,x,C){return g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=0),C===void 0&&(C=.5),this.dropShadowX=g,this.dropShadowY=y,this.dropShadowColor=x,this.dropShadowAlpha=C,this},setCharacterTint:function(g,y,x,C,S,E,T){g===void 0&&(g=0),y===void 0&&(y=1),x===void 0&&(x=!1),C===void 0&&(C=-1),S===void 0&&(S=C,E=C,T=C);var P=this.text.length;y===-1&&(y=P),g<0&&(g=P+g),g=p(g,0,P-1);for(var M=p(g+y,g,P),w=this.charColors,b=g;b<M;b++){var I=w[b];if(C===-1)w[b]=null;else{var R=x?1:0;I?(I.tintEffect=R,I.tintTL=C,I.tintTR=S,I.tintBL=E,I.tintBR=T):w[b]={tintEffect:R,tintTL:C,tintTR:S,tintBL:E,tintBR:T}}}return this},setWordTint:function(g,y,x,C,S,E,T){y===void 0&&(y=1);for(var P=this.getTextBounds(),M=P.words,w=typeof g=="number",b=0,I=0;I<M.length;I++){var R=M[I];if((w&&I===g||!w&&R.word===g)&&(this.setCharacterTint(R.i,R.word.length,x,C,S,E,T),b++,b===y))return this}return this},getTextBounds:function(g){var y=this._bounds;return(this._dirty||g||this.scaleX!==y.scaleX||this.scaleY!==y.scaleY)&&(f(this,g,!0,y),this._dirty=!1),y},getCharacterAt:function(g,y,x){for(var C=this.getLocalPoint(g,y,null,x),S=this.getTextBounds(),E=S.characters,T=new v,P=0;P<E.length;P++){var M=E[P];if(T.setTo(M.x,M.t,M.r-M.x,M.b),T.contains(C.x,C.y))return M}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(g,y,x){y===void 0&&(y=this._fontSize),x===void 0&&(x=this._align);var C=this.scene.sys.cache.bitmapFont.get(g);return C&&(this.font=g,this.fontData=C.data,this._fontSize=y,this._align=x,this.fromAtlas=C.fromAtlas===!0,this.setTexture(C.texture,C.frame),f(this,!1,!0,this._bounds)),this},setMaxWidth:function(g,y){return this._maxWidth=g,this._dirty=!0,y!==void 0&&(this.wordWrapCharCode=y),this},setDisplaySize:function(g,y){this.setScale(1,1),this.getTextBounds(!1);var x=g/this.width,C=y/this.height;return this.setScale(x,C),this},align:{set:function(g){this._align=g,this._dirty=!0},get:function(){return this._align}},text:{set:function(g){this.setText(g)},get:function(){return this._text}},fontSize:{set:function(g){this._fontSize=g,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(g){this._letterSpacing=g,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(g){this._lineSpacing=g,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(g){this._maxWidth=g,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{set:function(g){this.setScaleX(1),this.getTextBounds(!1);var y=g/this.width;this.setScaleX(y)},get:function(){return this.width}},displayHeight:{set:function(g){this.setScaleY(1),this.getTextBounds(!1);var y=g/this.height;this.setScaleY(y)},get:function(){return this.height}},toJSON:function(){var g=h.ToJSON(this),y={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return g.data=y,g},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});m.ALIGN_LEFT=0,m.ALIGN_CENTER=1,m.ALIGN_RIGHT=2,m.ParseFromAtlas=l,m.ParseXMLBitmapFont=d,n.exports=m},37289:(n,o,r)=>{var a=r(20926),p=function(h,u,f,l){var d=u._text,v=d.length,c=h.currentContext;if(!(v===0||!a(h,c,u,f,l))){f.addToRenderList(u);var m=u.fromAtlas?u.frame:u.texture.frames.__BASE,g=u.fontData.chars,y=u.fontData.lineHeight,x=u._letterSpacing,C=u._lineSpacing,S=0,E=0,T=0,P=null,M=0,w=0,b=0,I=0,R=0,A=0,L=null,O=0,F=m.source.image,G=m.cutX,U=m.cutY,z=u._fontSize/u.fontData.size,N=u._align,k=0,D=0,V=u.getTextBounds(!1);u.maxWidth>0&&(d=V.wrappedText,v=d.length);var B=u._bounds.lines;N===1?D=(B.longest-B.lengths[0])/2:N===2&&(D=B.longest-B.lengths[0]),c.translate(-u.displayOriginX,-u.displayOriginY);for(var W=f.roundPixels,H=0;H<v;H++){if(T=d.charCodeAt(H),T===10){k++,N===1?D=(B.longest-B.lengths[k])/2:N===2&&(D=B.longest-B.lengths[k]),S=0,E+=y+C,L=null;continue}if(P=g[T],!!P){if(M=G+P.x,w=U+P.y,b=P.width,I=P.height,R=P.xOffset+S,A=P.yOffset+E,L!==null){var Y=P.kerning[O];R+=Y!==void 0?Y:0}R*=z,A*=z,R+=D,S+=P.xAdvance+x+(Y!==void 0?Y:0),L=P,O=T,!(b===0||I===0||T===32)&&(W&&(R=Math.round(R),A=Math.round(A)),c.save(),c.translate(R,A),c.scale(z,z),c.drawImage(F,M,w,b,I,0,0,b,I),c.restore())}}c.restore()}};n.exports=p},57336:(n,o,r)=>{var a=r(22186),p=r(25305),h=r(44603),u=r(23568),f=r(35154);h.register("bitmapText",function(l,d){l===void 0&&(l={});var v=f(l,"font",""),c=u(l,"text",""),m=u(l,"size",!1),g=f(l,"align",0),y=new a(this.scene,0,0,v,c,m,g);return d!==void 0&&(l.add=d),p(this.scene,y,l),y})},34914:(n,o,r)=>{var a=r(22186),p=r(39429);p.register("bitmapText",function(h,u,f,l,d,v){return this.displayList.add(new a(this.scene,h,u,f,l,d,v))})},18658:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(33590),h=r(37289),n.exports={renderWebGL:p,renderCanvas:h}},33590:(n,o,r)=>{var a=r(3217),p=r(91296),h=r(70554),u=function(f,l,d,v){var c=l._text,m=c.length;if(m!==0){d.addToRenderList(l);var g=f.pipelines.set(l.pipeline,l),y=p(l,d,v).calc;f.pipelines.preBatch(l);var x=d.roundPixels,C=d.alpha,S=l.charColors,E=l.tintFill,T=h.getTintAppendFloatAlpha,P=T(l.tintTopLeft,C*l._alphaTL),M=T(l.tintTopRight,C*l._alphaTR),w=T(l.tintBottomLeft,C*l._alphaBL),b=T(l.tintBottomRight,C*l._alphaBR),I=l.frame.glTexture,R=g.setGameObject(l),A=l.getTextBounds(!1),L,O,F,G=A.characters,U=l.dropShadowX,z=l.dropShadowY,N=U!==0||z!==0;if(N){var k=l.dropShadowColor,D=l.dropShadowAlpha,V=T(k,C*D*l._alphaTL),B=T(k,C*D*l._alphaTR),W=T(k,C*D*l._alphaBL),H=T(k,C*D*l._alphaBR);for(L=0;L<G.length;L++)O=G[L],F=O.glyph,!(O.code===32||F.width===0||F.height===0)&&a(g,l,O,F,U,z,y,x,V,B,W,H,1,I,R)}for(L=0;L<G.length;L++)if(O=G[L],F=O.glyph,!(O.code===32||F.width===0||F.height===0))if(g.shouldFlush(6)&&(g.flush(),R=g.setGameObject(l)),S[O.i]){var Y=S[O.i],X=Y.tintEffect,$=T(Y.tintTL,C*l._alphaTL),J=T(Y.tintTR,C*l._alphaTR),q=T(Y.tintBL,C*l._alphaBL),Q=T(Y.tintBR,C*l._alphaBR);a(g,l,O,F,0,0,y,x,$,J,q,Q,X,I,R)}else a(g,l,O,F,0,0,y,x,P,M,w,b,E,I,R);f.pipelines.postBatch(l)}};n.exports=u},6107:(n,o,r)=>{var a=r(48011),p=r(46590),h=r(83419),u=r(31401),f=r(4327),l=r(95643),d=r(73162),v=new h({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,a],initialize:function(m,g,y,x,C){l.call(this,m,"Blitter"),this.setTexture(x,C),this.setPosition(g,y),this.initPipeline(),this.initPostPipeline(),this.children=new d,this.renderList=[],this.dirty=!1},create:function(c,m,g,y,x){y===void 0&&(y=!0),x===void 0&&(x=this.children.length),g===void 0?g=this.frame:g instanceof f||(g=this.texture.get(g));var C=new p(this,c,m,g,y);return this.children.addAt(C,x,!1),this.dirty=!0,C},createFromCallback:function(c,m,g,y){for(var x=this.createMultiple(m,g,y),C=0;C<x.length;C++){var S=x[C];c.call(this,S,C)}return x},createMultiple:function(c,m,g){m===void 0&&(m=this.frame.name),g===void 0&&(g=!0),Array.isArray(m)||(m=[m]);var y=[],x=this;return m.forEach(function(C){for(var S=0;S<c;S++)y.push(x.create(0,0,C,g))}),y},childCanRender:function(c){return c.visible&&c.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});n.exports=v},72396:n=>{var o=function(r,a,p,h){var u=a.getRenderList();if(u.length!==0){var f=r.currentContext,l=p.alpha*a.alpha;if(l!==0){p.addToRenderList(a),f.globalCompositeOperation=r.blendModes[a.blendMode],f.imageSmoothingEnabled=!a.frame.source.scaleMode;var d=a.x-p.scrollX*a.scrollFactorX,v=a.y-p.scrollY*a.scrollFactorY;f.save(),h&&h.copyToContext(f);for(var c=p.roundPixels,m=0;m<u.length;m++){var g=u[m],y=g.flipX||g.flipY,x=g.frame,C=x.canvasData,S=x.x,E=x.y,T=1,P=1,M=g.alpha*l;M!==0&&(f.globalAlpha=M,y?(g.flipX&&(T=-1,S-=C.width),g.flipY&&(P=-1,E-=C.height),C.width>0&&C.height>0&&(f.save(),f.translate(g.x+d,g.y+v),f.scale(T,P),f.drawImage(x.source.image,C.x,C.y,C.width,C.height,S,E,C.width,C.height),f.restore())):(c&&(S=Math.round(S),E=Math.round(E)),C.width>0&&C.height>0&&f.drawImage(x.source.image,C.x,C.y,C.width,C.height,S+g.x+d,E+g.y+v,C.width,C.height)))}f.restore()}}};n.exports=o},9403:(n,o,r)=>{var a=r(6107),p=r(25305),h=r(44603),u=r(23568);h.register("blitter",function(f,l){f===void 0&&(f={});var d=u(f,"key",null),v=u(f,"frame",null),c=new a(this.scene,0,0,d,v);return l!==void 0&&(f.add=l),p(this.scene,c,f),c})},12709:(n,o,r)=>{var a=r(6107),p=r(39429);p.register("blitter",function(h,u,f,l){return this.displayList.add(new a(this.scene,h,u,f,l))})},48011:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(99485),h=r(72396),n.exports={renderWebGL:p,renderCanvas:h}},99485:(n,o,r)=>{var a=r(61340),p=r(70554),h=new a,u=function(f,l,d,v){var c=l.getRenderList(),m=d.alpha*l.alpha;if(!(c.length===0||m===0)){d.addToRenderList(l);var g=f.pipelines.set(this.pipeline,l),y=d.scrollX*l.scrollFactorX,x=d.scrollY*l.scrollFactorY,C=h.copyFrom(d.matrix);v&&(C.multiplyWithOffset(v,-y,-x),y=0,x=0);var S=l.x-y,E=l.y-x,T=-1,P=!1,M=d.roundPixels;f.pipelines.preBatch(l);for(var w=0;w<c.length;w++){var b=c[w],I=b.frame,R=b.alpha*m;if(R!==0){var A=I.width,L=I.height,O=S+b.x+I.x,F=E+b.y+I.y;b.flipX&&(A*=-1,O+=I.width),b.flipY&&(L*=-1,F+=I.height);var G=C.setQuad(O,F,O+A,F+L,M),U=p.getTintAppendFloatAlpha(b.tint,R);if(I.sourceIndex!==T){var z=g.setGameObject(l,I);T=I.sourceIndex}g.batchQuad(l,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],I.u0,I.v0,I.u1,I.v1,U,U,U,U,P,I.glTexture,z)&&(T=-1)}}f.pipelines.postBatch(l)}};n.exports=u},46590:(n,o,r)=>{var a=r(83419),p=r(4327),h=new a({initialize:function(f,l,d,v,c){this.parent=f,this.x=l,this.y=d,this.frame=v,this.data={},this.tint=16777215,this._visible=c,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(u){return u===void 0?this.frame=this.parent.frame:u instanceof p&&u.texture===this.parent.texture?this.frame=u:this.frame=this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,f,l){return this.x=u,this.y=f,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,l&&this.setFrame(l),this},setPosition:function(u,f){return this.x=u,this.y=f,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,f){return this.flipX=u,this.flipY=f,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=this._alpha>0!=u>0,this._alpha=u}}});n.exports=h},16005:(n,o,r)=>{var a=r(45319),p=2,h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u,f,l,d){return u===void 0&&(u=1),f===void 0?this.alpha=u:(this._alphaTL=a(u,0,1),this._alphaTR=a(f,0,1),this._alphaBL=a(l,0,1),this._alphaBR=a(d,0,1)),this},alpha:{get:function(){return this._alpha},set:function(u){var f=a(u,0,1);this._alpha=f,this._alphaTL=f,this._alphaTR=f,this._alphaBL=f,this._alphaBR=f,f===0?this.renderFlags&=~p:this.renderFlags|=p}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(u){var f=a(u,0,1);this._alphaTL=f,f!==0&&(this.renderFlags|=p)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(u){var f=a(u,0,1);this._alphaTR=f,f!==0&&(this.renderFlags|=p)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(u){var f=a(u,0,1);this._alphaBL=f,f!==0&&(this.renderFlags|=p)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(u){var f=a(u,0,1);this._alphaBR=f,f!==0&&(this.renderFlags|=p)}}};n.exports=h},88509:(n,o,r)=>{var a=r(45319),p=2,h={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(u){return u===void 0&&(u=1),this.alpha=u,this},alpha:{get:function(){return this._alpha},set:function(u){var f=a(u,0,1);this._alpha=f,f===0?this.renderFlags&=~p:this.renderFlags|=p}}};n.exports=h},90065:(n,o,r)=>{var a=r(10312),p={_blendMode:a.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(h){typeof h=="string"&&(h=a[h]),h|=0,h>=-1&&(this._blendMode=h)}},setBlendMode:function(h){return this.blendMode=h,this}};n.exports=p},94215:n=>{var o={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}},setSize:function(r,a){return this.width=r,this.height=a,this},setDisplaySize:function(r,a){return this.displayWidth=r,this.displayHeight=a,this}};n.exports=o},61683:n=>{var o={texture:null,frame:null,isCropped:!1,setCrop:function(r,a,p,h){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,a,p,h,this.flipX,this.flipY);else{var u=r;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};n.exports=o},89272:(n,o,r)=>{var a=r(37105),p={_depth:0,depth:{get:function(){return this._depth},set:function(h){this.displayList&&this.displayList.queueDepthSort(),this._depth=h}},setDepth:function(h){return h===void 0&&(h=0),this.depth=h,this},setToTop:function(){var h=this.getDisplayList();return h&&a.BringToTop(h,this),this},setToBack:function(){var h=this.getDisplayList();return h&&a.SendToBack(h,this),this},setAbove:function(h){var u=this.getDisplayList();return u&&h&&a.MoveAbove(u,this,h),this},setBelow:function(h){var u=this.getDisplayList();return u&&h&&a.MoveBelow(u,this,h),this}};n.exports=p},47059:(n,o,r)=>{var a=r(83419),p=r(66064),h=r(19133),u=new a({initialize:function(l,d){this.gameObject=l,this.isPost=d,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(f){return f===void 0&&(f=0),this.padding=f,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(f){if(!this.isPost){var l=this.gameObject.scene.sys.renderer;l&&l.pipelines?(this.gameObject.pipeline=l.pipelines.FX_PIPELINE,f!==void 0&&(this.padding=f),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var f=this.list,l=0;l<f.length;l++)f[l].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(f){var l;if(this.isPost){var d=this.gameObject.getPostPipeline(String(f.type));for(Array.isArray(d)||(d=[d]),l=0;l<d.length;l++){var v=d[l];if(v.controller===f){this.gameObject.removePostPipeline(v),f.destroy();break}}}else{var c=this.list;for(l=0;l<c.length;l++)c[l]===f&&(h(c,l),f.destroy())}return this.gameObject},disable:function(f){return f===void 0&&(f=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,f&&this.clear(),this.gameObject},add:function(f,l){if(this.isPost){var d=String(f.type);this.gameObject.setPostPipeline(d,l);var v=this.gameObject.getPostPipeline(d);if(v)return Array.isArray(v)&&(v=v.pop()),v&&(v.controller=f),f}else return this.enabled||this.enable(),this.list.push(f),f},addGlow:function(f,l,d,v,c,m){return this.add(new p.Glow(this.gameObject,f,l,d,v),{quality:c,distance:m})},addShadow:function(f,l,d,v,c,m,g){return this.add(new p.Shadow(this.gameObject,f,l,d,v,c,m,g))},addPixelate:function(f){return this.add(new p.Pixelate(this.gameObject,f))},addVignette:function(f,l,d,v){return this.add(new p.Vignette(this.gameObject,f,l,d,v))},addShine:function(f,l,d,v){return this.add(new p.Shine(this.gameObject,f,l,d,v))},addBlur:function(f,l,d,v,c,m){return this.add(new p.Blur(this.gameObject,f,l,d,v,c,m))},addGradient:function(f,l,d,v,c,m,g,y){return this.add(new p.Gradient(this.gameObject,f,l,d,v,c,m,g,y))},addBloom:function(f,l,d,v,c,m){return this.add(new p.Bloom(this.gameObject,f,l,d,v,c,m))},addColorMatrix:function(){return this.add(new p.ColorMatrix(this.gameObject))},addCircle:function(f,l,d,v,c){return this.add(new p.Circle(this.gameObject,f,l,d,v,c))},addBarrel:function(f){return this.add(new p.Barrel(this.gameObject,f))},addDisplacement:function(f,l,d){return this.add(new p.Displacement(this.gameObject,f,l,d))},addWipe:function(f,l,d){return this.add(new p.Wipe(this.gameObject,f,l,d))},addReveal:function(f,l,d){return this.add(new p.Wipe(this.gameObject,f,l,d,!0))},addBokeh:function(f,l,d){return this.add(new p.Bokeh(this.gameObject,f,l,d))},addTiltShift:function(f,l,d,v,c,m){return this.add(new p.Bokeh(this.gameObject,f,l,d,!0,v,c,m))},destroy:function(){this.clear(),this.gameObject=null}});n.exports=u},54434:n=>{var o={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,a){return this.flipX=r,this.flipY=a,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};n.exports=o},8004:(n,o,r)=>{var a=r(87841),p=r(11520),h=r(26099),u={prepareBoundsOutput:function(f,l){if(l===void 0&&(l=!1),this.rotation!==0&&p(f,this.x,this.y,this.rotation),l&&this.parentContainer){var d=this.parentContainer.getBoundsTransformMatrix();d.transformPoint(f.x,f.y,f)}return f},getCenter:function(f,l){return f===void 0&&(f=new h),f.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,f.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(f,l)},getTopLeft:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX,f.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(f,l)},getTopCenter:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,f.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(f,l)},getTopRight:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX+this.displayWidth,f.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(f,l)},getLeftCenter:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX,f.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(f,l)},getRightCenter:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX+this.displayWidth,f.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(f,l)},getBottomLeft:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX,f.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(f,l)},getBottomCenter:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,f.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(f,l)},getBottomRight:function(f,l){return f||(f=new h),f.x=this.x-this.displayWidth*this.originX+this.displayWidth,f.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(f,l)},getBounds:function(f){f===void 0&&(f=new a);var l,d,v,c,m,g,y,x;if(this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(f),C.transformPoint(f.x,f.y,f),l=f.x,d=f.y,this.getTopRight(f),C.transformPoint(f.x,f.y,f),v=f.x,c=f.y,this.getBottomLeft(f),C.transformPoint(f.x,f.y,f),m=f.x,g=f.y,this.getBottomRight(f),C.transformPoint(f.x,f.y,f),y=f.x,x=f.y}else this.getTopLeft(f),l=f.x,d=f.y,this.getTopRight(f),v=f.x,c=f.y,this.getBottomLeft(f),m=f.x,g=f.y,this.getBottomRight(f),y=f.x,x=f.y;return f.x=Math.min(l,v,m,y),f.y=Math.min(d,c,g,x),f.width=Math.max(l,v,m,y)-f.x,f.height=Math.max(d,c,g,x)-f.y,f}};n.exports=u},8573:(n,o,r)=>{var a=r(6858),p=r(80661),h={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u,f,l,d,v){return u===void 0&&(this.texture||this.shader||this.geom)&&(u=this),new a(this.scene,u,f,l,d,v)},createGeometryMask:function(u){return u===void 0&&(this.type==="Graphics"||this.geom)&&(u=this),new p(this.scene,u)}};n.exports=h},27387:n=>{var o={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(r){this._displayOriginX=r,this.originX=r/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(r){this._displayOriginY=r,this.originY=r/this.height}},setOrigin:function(r,a){return r===void 0&&(r=.5),a===void 0&&(a=r),this.originX=r,this.originY=a,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(r,a){return r===void 0&&(r=0),a===void 0&&(a=r),this.displayOriginX=r,this.displayOriginY=a,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};n.exports=o},37640:(n,o,r)=>{var a=r(39506),p=r(57355),h=r(35154),u=r(86353),f=r(26099),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(d,v){v===void 0&&(v=this.pathConfig);var c=this.pathTween;return c&&c.isPlaying()&&c.stop(),this.path=d,v&&this.startFollow(v),this},setRotateToPath:function(d,v){return v===void 0&&(v=0),this.rotateToPath=d,this.pathRotationOffset=v,this},isFollowing:function(){var d=this.pathTween;return d&&d.isPlaying()},startFollow:function(d,v){d===void 0&&(d={}),v===void 0&&(v=0);var c=this.pathTween;c&&c.isPlaying()&&c.stop(),typeof d=="number"&&(d={duration:d}),d.from=h(d,"from",0),d.to=h(d,"to",1);var m=p(d,"positionOnPath",!1);this.rotateToPath=p(d,"rotateToPath",!1),this.pathRotationOffset=h(d,"rotationOffset",0);var g=h(d,"startAt",v);if(g&&(d.onStart=function(x){var C=x.data[0];C.progress=g,C.elapsed=C.duration*g;var S=C.ease(C.progress);C.current=C.start+(C.end-C.start)*S,C.setTargetValue()}),this.pathOffset||(this.pathOffset=new f(this.x,this.y)),this.pathVector||(this.pathVector=new f),this.pathDelta||(this.pathDelta=new f),this.pathDelta.reset(),d.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(d),this.path.getStartPoint(this.pathOffset),m&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var y=this.path.getPoint(.1);this.rotation=Math.atan2(y.y-this.y,y.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=d,this},pauseFollow:function(){var d=this.pathTween;return d&&d.isPlaying()&&d.pause(),this},resumeFollow:function(){var d=this.pathTween;return d&&d.isPaused()&&d.resume(),this},stopFollow:function(){var d=this.pathTween;return d&&d.isPlaying()&&d.stop(),this},pathUpdate:function(){var d=this.pathTween;if(d&&d.data){var v=d.data[0],c=this.pathDelta,m=this.pathVector;if(c.copy(m).negate(),v.state===u.COMPLETE){this.path.getPoint(v.end,m),c.add(m),m.add(this.pathOffset),this.setPosition(m.x,m.y);return}else if(v.state!==u.PLAYING_FORWARD&&v.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(d.getValue(),m),c.add(m),m.add(this.pathOffset);var g=this.x,y=this.y;this.setPosition(m.x,m.y);var x=this.x-g,C=this.y-y;if(x===0&&C===0)return;if(v.state!==this._prevDirection){this._prevDirection=v.state;return}this.rotateToPath&&(this.rotation=Math.atan2(C,x)+a(this.pathRotationOffset))}}};n.exports=l},72699:(n,o,r)=>{var a=r(62644),p={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(h){this.pipelineData={};var u=this.scene.sys.renderer;if(!u)return!1;var f=u.pipelines;if(f){h===void 0&&(h=f.default);var l=f.get(h);if(l)return this.defaultPipeline=l,this.pipeline=l,!0}return!1},setPipeline:function(h,u,f){var l=this.scene.sys.renderer;if(!l)return this;var d=l.pipelines;if(d){var v=d.get(h);v&&(this.pipeline=v),u&&(this.pipelineData=f?a(u):u)}return this},setPipelineData:function(h,u){var f=this.pipelineData;return u===void 0?delete f[h]:f[h]=u,this},resetPipeline:function(h){return h===void 0&&(h=!1),this.pipeline=this.defaultPipeline,h&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline===null?null:this.pipeline.name}};n.exports=p},17581:(n,o,r)=>{var a=r(62644),p=r(47059),h=r(19133),u={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(f){this.postPipelines=[],this.postPipelineData={},this.postFX=new p(this,!0),f&&(this.preFX=new p(this,!1))},setPostPipeline:function(f,l,d){var v=this.scene.sys.renderer;if(!v)return this;var c=v.pipelines;if(c){Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++){var g=c.getPostPipeline(f[m],this,l);g&&this.postPipelines.push(g)}l&&(this.postPipelineData=d?a(l):l)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(f,l){var d=this.postPipelineData;return l===void 0?delete d[f]:d[f]=l,this},getPostPipeline:function(f){for(var l=typeof f=="string",d=this.postPipelines,v=[],c=0;c<d.length;c++){var m=d[c];(l&&m.name===f||!l&&m instanceof f)&&v.push(m)}return v.length===1?v[0]:v},resetPostPipeline:function(f){f===void 0&&(f=!1);for(var l=this.postPipelines,d=0;d<l.length;d++)l[d].destroy();this.postPipelines=[],this.hasPostPipeline=!1,f&&(this.postPipelineData={})},removePostPipeline:function(f){for(var l=typeof f=="string",d=this.postPipelines,v=d.length-1;v>=0;v--){var c=d[v];(l&&c.name===f||!l&&c===f)&&(c.destroy(),h(d,v))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};n.exports=u},80227:n=>{var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(r,a){return a===void 0&&(a=r),this.scrollFactorX=r,this.scrollFactorY=a,this}};n.exports=o},16736:n=>{var o={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(r){this.scaleX=r/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(r){this.scaleY=r/this.frame.realHeight}},setSizeToFrame:function(r){r||(r=this.frame),this.width=r.realWidth,this.height=r.realHeight;var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=this.width,a.hitArea.height=this.height),this},setSize:function(r,a){return this.width=r,this.height=a,this},setDisplaySize:function(r,a){return this.displayWidth=r,this.displayHeight=a,this}};n.exports=o},37726:(n,o,r)=>{var a=r(4327),p=8,h={texture:null,frame:null,isCropped:!1,setTexture:function(u,f,l,d){return this.texture=this.scene.sys.textures.get(u),this.setFrame(f,l,d)},setFrame:function(u,f,l){return f===void 0&&(f=!0),l===void 0&&(l=!0),u instanceof a?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this._sizeComponent&&f&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};n.exports=h},79812:(n,o,r)=>{var a=r(4327),p=8,h={texture:null,frame:null,isCropped:!1,setCrop:function(u,f,l,d){if(u===void 0)this.isCropped=!1;else if(this.frame){if(typeof u=="number")this.frame.setCropUVs(this._crop,u,f,l,d,this.flipX,this.flipY);else{var v=u;this.frame.setCropUVs(this._crop,v.x,v.y,v.width,v.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(u,f){return this.texture=this.scene.sys.textures.get(u),this.setFrame(f)},setFrame:function(u,f,l){return f===void 0&&(f=!0),l===void 0&&(l=!0),u instanceof a?(this.texture=this.scene.sys.textures.get(u.texture.key),this.frame=u):this.frame=this.texture.get(u),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~p:this.renderFlags|=p,this._sizeComponent&&f&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};n.exports=h},27472:n=>{var o={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(r,a,p,h){return r===void 0&&(r=16777215),a===void 0&&(a=r,p=r,h=r),this.tintTopLeft=r,this.tintTopRight=a,this.tintBottomLeft=p,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(r,a,p,h){return this.setTint(r,a,p,h),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(r){this.setTint(r,r,r,r)}},isTinted:{get:function(){var r=16777215;return this.tintFill||this.tintTopLeft!==r||this.tintTopRight!==r||this.tintBottomLeft!==r||this.tintBottomRight!==r}}};n.exports=o},53774:n=>{var o=function(r){var a={name:r.name,type:r.type,x:r.x,y:r.y,depth:r.depth,scale:{x:r.scaleX,y:r.scaleY},origin:{x:r.originX,y:r.originY},flipX:r.flipX,flipY:r.flipY,rotation:r.rotation,alpha:r.alpha,visible:r.visible,blendMode:r.blendMode,textureKey:"",frameKey:"",data:{}};return r.texture&&(a.textureKey=r.texture.key,a.frameKey=r.frame.name),a};n.exports=o},16901:(n,o,r)=>{var a=r(36383),p=r(61340),h=r(85955),u=r(86554),f=r(30954),l=r(26099),d=4,v={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(c){this._scaleX=c,this._scaleY=c,c===0?this.renderFlags&=~d:this.renderFlags|=d}},scaleX:{get:function(){return this._scaleX},set:function(c){this._scaleX=c,c===0?this.renderFlags&=~d:this._scaleY!==0&&(this.renderFlags|=d)}},scaleY:{get:function(){return this._scaleY},set:function(c){this._scaleY=c,c===0?this.renderFlags&=~d:this._scaleX!==0&&(this.renderFlags|=d)}},angle:{get:function(){return f(this._rotation*a.RAD_TO_DEG)},set:function(c){this.rotation=f(c)*a.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=u(c)}},setPosition:function(c,m,g,y){return c===void 0&&(c=0),m===void 0&&(m=c),g===void 0&&(g=0),y===void 0&&(y=0),this.x=c,this.y=m,this.z=g,this.w=y,this},copyPosition:function(c){return c.x!==void 0&&(this.x=c.x),c.y!==void 0&&(this.y=c.y),c.z!==void 0&&(this.z=c.z),c.w!==void 0&&(this.w=c.w),this},setRandomPosition:function(c,m,g,y){return c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=this.scene.sys.scale.width),y===void 0&&(y=this.scene.sys.scale.height),this.x=c+Math.random()*g,this.y=m+Math.random()*y,this},setRotation:function(c){return c===void 0&&(c=0),this.rotation=c,this},setAngle:function(c){return c===void 0&&(c=0),this.angle=c,this},setScale:function(c,m){return c===void 0&&(c=1),m===void 0&&(m=c),this.scaleX=c,this.scaleY=m,this},setX:function(c){return c===void 0&&(c=0),this.x=c,this},setY:function(c){return c===void 0&&(c=0),this.y=c,this},setZ:function(c){return c===void 0&&(c=0),this.z=c,this},setW:function(c){return c===void 0&&(c=0),this.w=c,this},getLocalTransformMatrix:function(c){return c===void 0&&(c=new p),c.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(c,m){c===void 0&&(c=new p);var g=this.parentContainer;if(!g)return this.getLocalTransformMatrix(c);var y=!1;for(m||(m=new p,y=!0),c.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);g;)m.applyITRS(g.x,g.y,g._rotation,g._scaleX,g._scaleY),m.multiply(c,c),g=g.parentContainer;return y&&m.destroy(),c},getLocalPoint:function(c,m,g,y){g||(g=new l),y||(y=this.scene.sys.cameras.main);var x=y.scrollX,C=y.scrollY,S=c+x*this.scrollFactorX-x,E=m+C*this.scrollFactorY-C;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,E,g):h(S,E,this.x,this.y,this.rotation,this.scaleX,this.scaleY,g),this._originComponent&&(g.x+=this._displayOriginX,g.y+=this._displayOriginY),g},getWorldPoint:function(c,m,g){c===void 0&&(c=new l);var y=this.parentContainer;if(!y)return c.x=this.x,c.y=this.y,c;var x=this.getWorldTransformMatrix(m,g);return c.x=x.tx,c.y=x.ty,c},getParentRotation:function(){for(var c=0,m=this.parentContainer;m;)c+=m.rotation,m=m.parentContainer;return c}};n.exports=v},61340:(n,o,r)=>{var a=r(83419),p=r(36383),h=r(26099),u=new a({initialize:function(l,d,v,c,m,g){l===void 0&&(l=1),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=1),m===void 0&&(m=0),g===void 0&&(g=0),this.matrix=new Float32Array([l,d,v,c,m,g,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(f){this.matrix[0]=f}},b:{get:function(){return this.matrix[1]},set:function(f){this.matrix[1]=f}},c:{get:function(){return this.matrix[2]},set:function(f){this.matrix[2]=f}},d:{get:function(){return this.matrix[3]},set:function(f){this.matrix[3]=f}},e:{get:function(){return this.matrix[4]},set:function(f){this.matrix[4]=f}},f:{get:function(){return this.matrix[5]},set:function(f){this.matrix[5]=f}},tx:{get:function(){return this.matrix[4]},set:function(f){this.matrix[4]=f}},ty:{get:function(){return this.matrix[5]},set:function(f){this.matrix[5]=f}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var f=this.matrix,l=f[0],d=f[1],v=f[2],c=f[3];return l||d?d>0?Math.acos(l/this.scaleX):-Math.acos(l/this.scaleX):v||c?p.TAU-(c>0?Math.acos(-v/this.scaleY):-Math.acos(v/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var f=this.matrix;return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,this},translate:function(f,l){var d=this.matrix;return d[4]=d[0]*f+d[2]*l+d[4],d[5]=d[1]*f+d[3]*l+d[5],this},scale:function(f,l){var d=this.matrix;return d[0]*=f,d[1]*=f,d[2]*=l,d[3]*=l,this},rotate:function(f){var l=Math.sin(f),d=Math.cos(f),v=this.matrix,c=v[0],m=v[1],g=v[2],y=v[3];return v[0]=c*d+g*l,v[1]=m*d+y*l,v[2]=c*-l+g*d,v[3]=m*-l+y*d,this},multiply:function(f,l){var d=this.matrix,v=f.matrix,c=d[0],m=d[1],g=d[2],y=d[3],x=d[4],C=d[5],S=v[0],E=v[1],T=v[2],P=v[3],M=v[4],w=v[5],b=l===void 0?d:l.matrix;return b[0]=S*c+E*g,b[1]=S*m+E*y,b[2]=T*c+P*g,b[3]=T*m+P*y,b[4]=M*c+w*g+x,b[5]=M*m+w*y+C,b},multiplyWithOffset:function(f,l,d){var v=this.matrix,c=f.matrix,m=v[0],g=v[1],y=v[2],x=v[3],C=v[4],S=v[5],E=l*m+d*y+C,T=l*g+d*x+S,P=c[0],M=c[1],w=c[2],b=c[3],I=c[4],R=c[5];return v[0]=P*m+M*y,v[1]=P*g+M*x,v[2]=w*m+b*y,v[3]=w*g+b*x,v[4]=I*m+R*y+E,v[5]=I*g+R*x+T,this},transform:function(f,l,d,v,c,m){var g=this.matrix,y=g[0],x=g[1],C=g[2],S=g[3],E=g[4],T=g[5];return g[0]=f*y+l*C,g[1]=f*x+l*S,g[2]=d*y+v*C,g[3]=d*x+v*S,g[4]=c*y+m*C+E,g[5]=c*x+m*S+T,this},transformPoint:function(f,l,d){d===void 0&&(d={x:0,y:0});var v=this.matrix,c=v[0],m=v[1],g=v[2],y=v[3],x=v[4],C=v[5];return d.x=f*c+l*g+x,d.y=f*m+l*y+C,d},invert:function(){var f=this.matrix,l=f[0],d=f[1],v=f[2],c=f[3],m=f[4],g=f[5],y=l*c-d*v;return f[0]=c/y,f[1]=-d/y,f[2]=-v/y,f[3]=l/y,f[4]=(v*g-c*m)/y,f[5]=-(l*g-d*m)/y,this},copyFrom:function(f){var l=this.matrix;return l[0]=f.a,l[1]=f.b,l[2]=f.c,l[3]=f.d,l[4]=f.e,l[5]=f.f,this},copyFromArray:function(f){var l=this.matrix;return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],this},copyToContext:function(f){var l=this.matrix;return f.transform(l[0],l[1],l[2],l[3],l[4],l[5]),f},setToContext:function(f){return f.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),f},copyToArray:function(f){var l=this.matrix;return f===void 0?f=[l[0],l[1],l[2],l[3],l[4],l[5]]:(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5]),f},setTransform:function(f,l,d,v,c,m){var g=this.matrix;return g[0]=f,g[1]=l,g[2]=d,g[3]=v,g[4]=c,g[5]=m,this},decomposeMatrix:function(){var f=this.decomposedMatrix,l=this.matrix,d=l[0],v=l[1],c=l[2],m=l[3],g=d*m-v*c;if(f.translateX=l[4],f.translateY=l[5],d||v){var y=Math.sqrt(d*d+v*v);f.rotation=v>0?Math.acos(d/y):-Math.acos(d/y),f.scaleX=y,f.scaleY=g/y}else if(c||m){var x=Math.sqrt(c*c+m*m);f.rotation=Math.PI*.5-(m>0?Math.acos(-c/x):-Math.acos(c/x)),f.scaleX=g/x,f.scaleY=x}else f.rotation=0,f.scaleX=0,f.scaleY=0;return f},applyITRS:function(f,l,d,v,c){var m=this.matrix,g=Math.sin(d),y=Math.cos(d);return m[4]=f,m[5]=l,m[0]=y*v,m[1]=g*v,m[2]=-g*c,m[3]=y*c,this},applyInverse:function(f,l,d){d===void 0&&(d=new h);var v=this.matrix,c=v[0],m=v[1],g=v[2],y=v[3],x=v[4],C=v[5],S=1/(c*y+g*-m);return d.x=y*S*f+-g*S*l+(C*g-x*y)*S,d.y=c*S*l+-m*S*f+(-C*c+x*m)*S,d},setQuad:function(f,l,d,v,c,m){c===void 0&&(c=!1),m===void 0&&(m=this.quad);var g=this.matrix,y=g[0],x=g[1],C=g[2],S=g[3],E=g[4],T=g[5],P=f*y+l*C+E,M=f*x+l*S+T,w=f*y+v*C+E,b=f*x+v*S+T,I=d*y+v*C+E,R=d*x+v*S+T,A=d*y+l*C+E,L=d*x+l*S+T;if(c){var O=Math.floor(P+.5),F=Math.floor(M+.5),G=O-P,U=F-M;m[0]=O,m[1]=F,m[2]=w+G,m[3]=b+U,m[4]=I+G,m[5]=R+U,m[6]=A+G,m[7]=L+U}else m[0]=P,m[1]=M,m[2]=w,m[3]=b,m[4]=I,m[5]=R,m[6]=A,m[7]=L;return m},getX:function(f,l){return f*this.a+l*this.c+this.e},getY:function(f,l){return f*this.b+l*this.d+this.f},getXRound:function(f,l,d){var v=this.getX(f,l);return d&&(v=Math.floor(v+.5)),v},getYRound:function(f,l,d){var v=this.getY(f,l);return d&&(v=Math.floor(v+.5)),v},getCSSMatrix:function(){var f=this.matrix;return"matrix("+f[0]+","+f[1]+","+f[2]+","+f[3]+","+f[4]+","+f[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});n.exports=u},59715:n=>{var o=1,r={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=o):(this._visible=!1,this.renderFlags&=~o)}},setVisible:function(a){return this.visible=a,this}};n.exports=r},31401:(n,o,r)=>{n.exports={Alpha:r(16005),AlphaSingle:r(88509),BlendMode:r(90065),ComputedSize:r(94215),Crop:r(61683),Depth:r(89272),Flip:r(54434),FX:r(47059),GetBounds:r(8004),Mask:r(8573),Origin:r(27387),PathFollower:r(37640),Pipeline:r(72699),PostPipeline:r(17581),ScrollFactor:r(80227),Size:r(16736),Texture:r(37726),TextureCrop:r(79812),Tint:r(27472),ToJSON:r(53774),Transform:r(16901),TransformMatrix:r(61340),Visible:r(59715)}},31559:(n,o,r)=>{var a=r(37105),p=r(10312),h=r(83419),u=r(31401),f=r(51708),l=r(95643),d=r(87841),v=r(29959),c=r(36899),m=r(26099),g=new u.TransformMatrix,y=new h({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.PostPipeline,u.Transform,u.Visible,v],initialize:function(C,S,E,T){l.call(this,C,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this._sortKey="",this._sysEvents=C.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(S,E),this.setBlendMode(p.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(x){return x===void 0&&(x=!0),this.exclusive=x,this},getBounds:function(x){if(x===void 0&&(x=new d),x.setTo(this.x,this.y,0,0),this.parentContainer){var C=this.parentContainer.getBoundsTransformMatrix(),S=C.transformPoint(this.x,this.y);x.setTo(S.x,S.y,0,0)}if(this.list.length>0){var E=this.list,T=new d,P=!1;x.setEmpty();for(var M=0;M<E.length;M++){var w=E[M];w.getBounds&&(w.getBounds(T),P?c(T,x,x):(x.setTo(T.x,T.y,T.width,T.height),P=!0))}}return x},addHandler:function(x){x.once(f.DESTROY,this.onChildDestroyed,this),this.exclusive&&(x.parentContainer&&x.parentContainer.remove(x),x.parentContainer=this,x.removeFromDisplayList(),x.addedToScene())},removeHandler:function(x){x.off(f.DESTROY,this.remove,this),this.exclusive&&(x.parentContainer=null,x.removedFromScene(),x.addToDisplayList())},pointToContainer:function(x,C){C===void 0&&(C=new m),this.parentContainer?this.parentContainer.pointToContainer(x,C):(C.x=x.x,C.y=x.y);var S=g;return S.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),S.invert(),S.transformPoint(x.x,x.y,C),C},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(g,this.localTransform)},add:function(x){return a.Add(this.list,x,this.maxSize,this.addHandler,this),this},addAt:function(x,C){return a.AddAt(this.list,x,C,this.maxSize,this.addHandler,this),this},getAt:function(x){return this.list[x]},getIndex:function(x){return this.list.indexOf(x)},sort:function(x,C){return x?(C===void 0&&(C=function(S,E){return S[x]-E[x]}),a.StableSort(this.list,C),this):this},getByName:function(x){return a.GetFirst(this.list,"name",x)},getRandom:function(x,C){return a.GetRandom(this.list,x,C)},getFirst:function(x,C,S,E){return a.GetFirst(this.list,x,C,S,E)},getAll:function(x,C,S,E){return a.GetAll(this.list,x,C,S,E)},count:function(x,C,S,E){return a.CountAllMatching(this.list,x,C,S,E)},swap:function(x,C){return a.Swap(this.list,x,C),this},moveTo:function(x,C){return a.MoveTo(this.list,x,C),this},moveAbove:function(x,C){return a.MoveAbove(this.list,x,C),this},moveBelow:function(x,C){return a.MoveBelow(this.list,x,C),this},remove:function(x,C){var S=a.Remove(this.list,x,this.removeHandler,this);if(C&&S){Array.isArray(S)||(S=[S]);for(var E=0;E<S.length;E++)S[E].destroy()}return this},removeAt:function(x,C){var S=a.RemoveAt(this.list,x,this.removeHandler,this);return C&&S&&S.destroy(),this},removeBetween:function(x,C,S){var E=a.RemoveBetween(this.list,x,C,this.removeHandler,this);if(S)for(var T=0;T<E.length;T++)E[T].destroy();return this},removeAll:function(x){var C=this.list;if(x){for(var S=0;S<C.length;S++)C[S]&&C[S].scene&&(C[S].off(f.DESTROY,this.onChildDestroyed,this),C[S].destroy());this.list=[]}else a.RemoveBetween(C,0,C.length,this.removeHandler,this);return this},bringToTop:function(x){return a.BringToTop(this.list,x),this},sendToBack:function(x){return a.SendToBack(this.list,x),this},moveUp:function(x){return a.MoveUp(this.list,x),this},moveDown:function(x){return a.MoveDown(this.list,x),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(x,C,S){var E=a.Replace(this.list,x,C);return E&&(this.addHandler(C),this.removeHandler(x),S&&x.destroy()),this},exists:function(x){return this.list.indexOf(x)>-1},setAll:function(x,C,S,E){return a.SetAll(this.list,x,C,S,E),this},each:function(x,C){var S=[null],E,T=this.list.slice(),P=T.length;for(E=2;E<arguments.length;E++)S.push(arguments[E]);for(E=0;E<P;E++)S[0]=T[E],x.apply(C,S);return this},iterate:function(x,C){var S=[null],E;for(E=2;E<arguments.length;E++)S.push(arguments[E]);for(E=0;E<this.list.length;E++)S[0]=this.list[E],x.apply(C,S);return this},setScrollFactor:function(x,C,S){return C===void 0&&(C=x),S===void 0&&(S=!1),this.scrollFactorX=x,this.scrollFactorY=C,S&&(a.SetAll(this.list,"scrollFactorX",x),a.SetAll(this.list,"scrollFactorY",C)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.list=[]},onChildDestroyed:function(x){a.Remove(this.list,x),this.exclusive&&(x.parentContainer=null,x.removedFromScene())}});n.exports=y},53584:n=>{var o=function(r,a,p,h){p.addToRenderList(a);var u=a.list;if(u.length!==0){var f=a.localTransform;h?(f.loadIdentity(),f.multiply(h),f.translate(a.x,a.y),f.rotate(a.rotation),f.scale(a.scaleX,a.scaleY)):f.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var l=a.blendMode!==-1;l||r.setBlendMode(0);var d=a._alpha,v=a.scrollFactorX,c=a.scrollFactorY;a.mask&&a.mask.preRenderCanvas(r,null,p);for(var m=0;m<u.length;m++){var g=u[m];if(g.willRender(p)){var y=g.alpha,x=g.scrollFactorX,C=g.scrollFactorY;!l&&g.blendMode!==r.currentBlendMode&&r.setBlendMode(g.blendMode),g.setScrollFactor(x*v,C*c),g.setAlpha(y*d),g.renderCanvas(r,g,p,f),g.setAlpha(y),g.setScrollFactor(x,C)}}a.mask&&a.mask.postRenderCanvas(r)}};n.exports=o},77143:(n,o,r)=>{var a=r(25305),p=r(31559),h=r(44603),u=r(23568),f=r(95540);h.register("container",function(l,d){l===void 0&&(l={});var v=u(l,"x",0),c=u(l,"y",0),m=f(l,"children",null),g=new p(this.scene,v,c,m);return d!==void 0&&(l.add=d),a(this.scene,g,l),g})},24961:(n,o,r)=>{var a=r(31559),p=r(39429);p.register("container",function(h,u,f){return this.displayList.add(new a(this.scene,h,u,f))})},29959:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(72249),h=r(53584),n.exports={renderWebGL:p,renderCanvas:h}},72249:n=>{var o=function(r,a,p,h){p.addToRenderList(a);var u=a.list,f=u.length;if(f!==0){var l=a.localTransform;h?(l.loadIdentity(),l.multiply(h),l.translate(a.x,a.y),l.rotate(a.rotation),l.scale(a.scaleX,a.scaleY)):l.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY),r.pipelines.preBatch(a);var d=a.blendMode!==-1;d||r.setBlendMode(0);for(var v=a.alpha,c=a.scrollFactorX,m=a.scrollFactorY,g=0;g<f;g++){var y=u[g];if(y.willRender(p)){var x,C,S,E;if(y.alphaTopLeft!==void 0)x=y.alphaTopLeft,C=y.alphaTopRight,S=y.alphaBottomLeft,E=y.alphaBottomRight;else{var T=y.alpha;x=T,C=T,S=T,E=T}var P=y.scrollFactorX,M=y.scrollFactorY;!d&&y.blendMode!==r.currentBlendMode&&r.setBlendMode(y.blendMode);var w=y.mask;w&&w.preRenderWebGL(r,y,p);var b=y.type;b!==r.currentType&&(r.newType=!0,r.currentType=b),r.nextTypeMatch=g<f-1?u[g+1].type===r.currentType:!1,y.setScrollFactor(P*c,M*m),y.setAlpha(x*v,C*v,S*v,E*v),y.renderWebGL(r,y,p,l,a),y.setAlpha(x,C,S,E),y.setScrollFactor(P,M),w&&w.postRenderWebGL(r,p),r.newType=!1}}r.pipelines.postBatch(a)}};n.exports=o},47407:n=>{n.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(441),u=r(95643),f=r(41212),l=r(35846),d=r(44594),v=r(61369),c=new a({Extends:u,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Origin,p.ScrollFactor,p.Transform,p.Visible,h],initialize:function(g,y,x,C,S,E){if(u.call(this,g,"DOMElement"),this.parent=g.sys.game.domContainer,!this.parent)throw new Error("No DOM Container set in game config");this.cache=g.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new v,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(y,x),typeof C=="string"?C[0]==="#"?this.setElement(C.substr(1),S,E):this.createElement(C,S,E):C&&this.setElement(C,S,E),g.sys.events.on(d.SLEEP,this.handleSceneEvent,this),g.sys.events.on(d.WAKE,this.handleSceneEvent,this),g.sys.events.on(d.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(m){var g=this.node,y=g.style;g&&(y.display=m.settings.visible?"block":"none")},setSkew:function(m,g){return m===void 0&&(m=0),g===void 0&&(g=m),this.skewX=m,this.skewY=g,this},setPerspective:function(m){return this.parent.style.perspective=m+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(m){this.parent.style.perspective=m+"px"}},addListener:function(m){if(this.node){m=m.split(" ");for(var g=0;g<m.length;g++)this.node.addEventListener(m[g],this.handler,!1)}return this},removeListener:function(m){if(this.node){m=m.split(" ");for(var g=0;g<m.length;g++)this.node.removeEventListener(m[g],this.handler)}return this},dispatchNativeEvent:function(m){this.emit(m.type,m)},createElement:function(m,g,y){return this.setElement(document.createElement(m),g,y)},setElement:function(m,g,y){this.removeElement();var x;if(typeof m=="string"?(m[0]==="#"&&(m=m.substr(1)),x=document.getElementById(m)):typeof m=="object"&&m.nodeType===1&&(x=m),!x)return this;if(this.node=x,g&&f(g))for(var C in g)x.style[C]=g[C];else typeof g=="string"&&(x.style=g);return x.style.zIndex="0",x.style.display="inline",x.style.position="absolute",x.phaser=this,this.parent.appendChild(x),y&&(x.innerText=y),this.updateSize()},createFromCache:function(m,g){var y=this.cache.get(m);return y&&this.createFromHTML(y,g),this},createFromHTML:function(m,g){g===void 0&&(g="div"),this.removeElement();var y=document.createElement(g);return this.node=y,y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent.appendChild(y),y.innerHTML=m,this.updateSize()},removeElement:function(){return this.node&&(l(this.node),this.node=null),this},updateSize:function(){var m=this.node;return this.width=m.clientWidth,this.height=m.clientHeight,this.displayWidth=this.width*this.scaleX,this.displayHeight=this.height*this.scaleY,this},getChildByProperty:function(m,g){if(this.node){for(var y=this.node.querySelectorAll("*"),x=0;x<y.length;x++)if(y[x][m]===g)return y[x]}return null},getChildByID:function(m){return this.getChildByProperty("id",m)},getChildByName:function(m){return this.getChildByProperty("name",m)},setClassName:function(m){return this.node&&(this.node.className=m,this.updateSize()),this},setText:function(m){return this.node&&(this.node.innerText=m,this.updateSize()),this},setHTML:function(m){return this.node&&(this.node.innerHTML=m,this.updateSize()),this},preRender:function(){var m=this.parentContainer,g=this.node;g&&m&&!m.willRender()&&(g.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(d.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(d.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(d.PRE_RENDER,this.preRender,this)}});n.exports=c},49381:(n,o,r)=>{var a=r(47407),p=r(95643),h=r(61340),u=new h,f=new h,l=new h,d=function(v,c,m,g){if(c.node){var y=c.node.style,x=c.scene.sys.settings;if(!y||!x.visible||p.RENDER_MASK!==c.renderFlags||c.cameraFilter!==0&&c.cameraFilter&m.id||c.parentContainer&&!c.parentContainer.willRender()){y.display="none";return}var C=c.parentContainer,S=m.alpha*c.alpha;C&&(S*=C.alpha);var E=u,T=f,P=l,M=0,w=0,b="0%",I="0%";g?(M=c.width*c.scaleX*c.originX,w=c.height*c.scaleY*c.originY,T.applyITRS(c.x-M,c.y-w,c.rotation,c.scaleX,c.scaleY),E.copyFrom(m.matrix),E.multiplyWithOffset(g,-m.scrollX*c.scrollFactorX,-m.scrollY*c.scrollFactorY),T.e=c.x-M,T.f=c.y-w,E.multiply(T,P)):(M=c.width*c.originX,w=c.height*c.originY,T.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),E.copyFrom(m.matrix),b=100*c.originX+"%",I=100*c.originY+"%",T.e-=m.scrollX*c.scrollFactorX,T.f-=m.scrollY*c.scrollFactorY,E.multiply(T,P),P.e-=M,P.f-=w),c.transformOnly||(y.display="block",y.opacity=S,y.zIndex=c._depth,y.pointerEvents=c.pointerEvents,y.mixBlendMode=a[c._blendMode]),y.transform=P.getCSSMatrix()+" skew("+c.skewX+"rad, "+c.skewY+"rad) rotate3d("+c.rotate3d.x+","+c.rotate3d.y+","+c.rotate3d.z+","+c.rotate3d.w+c.rotate3dAngle+")",y.transformOrigin=b+" "+I}};n.exports=d},2611:(n,o,r)=>{var a=r(3069),p=r(39429);p.register("dom",function(h,u,f,l,d){var v=new a(this.scene,h,u,f,l,d);return this.displayList.add(v),v})},441:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(49381),h=r(49381),n.exports={renderWebGL:p,renderCanvas:h}},62980:n=>{n.exports="addedtoscene"},41337:n=>{n.exports="destroy"},44947:n=>{n.exports="removedfromscene"},49358:n=>{n.exports="complete"},35163:n=>{n.exports="created"},97249:n=>{n.exports="error"},19483:n=>{n.exports="locked"},56059:n=>{n.exports="loop"},26772:n=>{n.exports="metadata"},64437:n=>{n.exports="playing"},83411:n=>{n.exports="play"},75780:n=>{n.exports="seeked"},67799:n=>{n.exports="seeking"},63500:n=>{n.exports="stalled"},55541:n=>{n.exports="stop"},53208:n=>{n.exports="textureready"},4992:n=>{n.exports="unlocked"},12:n=>{n.exports="unsupported"},51708:(n,o,r)=>{n.exports={ADDED_TO_SCENE:r(62980),DESTROY:r(41337),REMOVED_FROM_SCENE:r(44947),VIDEO_COMPLETE:r(49358),VIDEO_CREATED:r(35163),VIDEO_ERROR:r(97249),VIDEO_LOCKED:r(19483),VIDEO_LOOP:r(56059),VIDEO_METADATA:r(26772),VIDEO_PLAY:r(83411),VIDEO_PLAYING:r(64437),VIDEO_SEEKED:r(75780),VIDEO_SEEKING:r(67799),VIDEO_STALLED:r(63500),VIDEO_STOP:r(55541),VIDEO_TEXTURE:r(53208),VIDEO_UNLOCKED:r(4992),VIDEO_UNSUPPORTED:r(12)}},42421:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(95643),u=r(64993),f=new a({Extends:h,Mixins:[p.Alpha,p.BlendMode,p.Depth,p.Flip,p.Origin,p.ScrollFactor,p.Size,p.Texture,p.Tint,p.Transform,p.Visible,u],initialize:function(d){h.call(this,d,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});n.exports=f},70217:()=>{},56315:(n,o,r)=>{var a=r(42421),p=r(39429);p.register("extern",function(){var h=new a(this.scene);return this.displayList.add(h),h})},64993:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(80287),h=r(70217),n.exports={renderWebGL:p,renderCanvas:h}},80287:(n,o,r)=>{var a=r(91296),p=function(h,u,f,l){h.pipelines.clear();var d=a(u,f,l).calc;u.render.call(u,h,f,d),h.pipelines.rebind()};n.exports=p},85592:n=>{n.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(n,o,r)=>{var a=r(71911),p=r(83419),h=r(85592),u=r(31401),f=r(8497),l=r(95643),d=r(95540),v=r(35154),c=r(36383),m=r(84503),g=new p({Extends:l,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,m],initialize:function(x,C){var S=v(C,"x",0),E=v(C,"y",0);l.call(this,x,"Graphics"),this.setPosition(S,E),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(C)},setDefaultStyles:function(y){return v(y,"lineStyle",null)&&(this.defaultStrokeWidth=v(y,"lineStyle.width",1),this.defaultStrokeColor=v(y,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(y,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(y,"fillStyle",null)&&(this.defaultFillColor=v(y,"fillStyle.color",16777215),this.defaultFillAlpha=v(y,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(y,x,C){return C===void 0&&(C=1),this.commandBuffer.push(h.LINE_STYLE,y,x,C),this._lineWidth=y,this},fillStyle:function(y,x){return x===void 0&&(x=1),this.commandBuffer.push(h.FILL_STYLE,y,x),this},fillGradientStyle:function(y,x,C,S,E,T,P,M){return E===void 0&&(E=1),T===void 0&&(T=E),P===void 0&&(P=E),M===void 0&&(M=E),this.commandBuffer.push(h.GRADIENT_FILL_STYLE,E,T,P,M,y,x,C,S),this},lineGradientStyle:function(y,x,C,S,E,T){return T===void 0&&(T=1),this.commandBuffer.push(h.GRADIENT_LINE_STYLE,y,T,x,C,S,E),this},beginPath:function(){return this.commandBuffer.push(h.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(h.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(h.FILL_PATH),this},fill:function(){return this.commandBuffer.push(h.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(h.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(h.STROKE_PATH),this},fillCircleShape:function(y){return this.fillCircle(y.x,y.y,y.radius)},strokeCircleShape:function(y){return this.strokeCircle(y.x,y.y,y.radius)},fillCircle:function(y,x,C){return this.beginPath(),this.arc(y,x,C,0,c.PI2),this.fillPath(),this},strokeCircle:function(y,x,C){return this.beginPath(),this.arc(y,x,C,0,c.PI2),this.strokePath(),this},fillRectShape:function(y){return this.fillRect(y.x,y.y,y.width,y.height)},strokeRectShape:function(y){return this.strokeRect(y.x,y.y,y.width,y.height)},fillRect:function(y,x,C,S){return this.commandBuffer.push(h.FILL_RECT,y,x,C,S),this},strokeRect:function(y,x,C,S){var E=this._lineWidth/2,T=y-E,P=y+E;return this.beginPath(),this.moveTo(y,x),this.lineTo(y,x+S),this.strokePath(),this.beginPath(),this.moveTo(y+C,x),this.lineTo(y+C,x+S),this.strokePath(),this.beginPath(),this.moveTo(T,x),this.lineTo(P+C,x),this.strokePath(),this.beginPath(),this.moveTo(T,x+S),this.lineTo(P+C,x+S),this.strokePath(),this},fillRoundedRect:function(y,x,C,S,E){E===void 0&&(E=20);var T=E,P=E,M=E,w=E;typeof E!="number"&&(T=d(E,"tl",20),P=d(E,"tr",20),M=d(E,"bl",20),w=d(E,"br",20));var b=T>=0,I=P>=0,R=M>=0,A=w>=0;return T=Math.abs(T),P=Math.abs(P),M=Math.abs(M),w=Math.abs(w),this.beginPath(),this.moveTo(y+T,x),this.lineTo(y+C-P,x),I?this.arc(y+C-P,x+P,P,-c.TAU,0):this.arc(y+C,x,P,Math.PI,c.TAU,!0),this.lineTo(y+C,x+S-w),A?this.arc(y+C-w,x+S-w,w,0,c.TAU):this.arc(y+C,x+S,w,-c.TAU,Math.PI,!0),this.lineTo(y+M,x+S),R?this.arc(y+M,x+S-M,M,c.TAU,Math.PI):this.arc(y,x+S,M,0,-c.TAU,!0),this.lineTo(y,x+T),b?this.arc(y+T,x+T,T,-Math.PI,-c.TAU):this.arc(y,x,T,c.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(y,x,C,S,E){E===void 0&&(E=20);var T=E,P=E,M=E,w=E,b=Math.min(C,S)/2;typeof E!="number"&&(T=d(E,"tl",20),P=d(E,"tr",20),M=d(E,"bl",20),w=d(E,"br",20));var I=T>=0,R=P>=0,A=M>=0,L=w>=0;return T=Math.min(Math.abs(T),b),P=Math.min(Math.abs(P),b),M=Math.min(Math.abs(M),b),w=Math.min(Math.abs(w),b),this.beginPath(),this.moveTo(y+T,x),this.lineTo(y+C-P,x),this.moveTo(y+C-P,x),R?this.arc(y+C-P,x+P,P,-c.TAU,0):this.arc(y+C,x,P,Math.PI,c.TAU,!0),this.lineTo(y+C,x+S-w),this.moveTo(y+C,x+S-w),L?this.arc(y+C-w,x+S-w,w,0,c.TAU):this.arc(y+C,x+S,w,-c.TAU,Math.PI,!0),this.lineTo(y+M,x+S),this.moveTo(y+M,x+S),A?this.arc(y+M,x+S-M,M,c.TAU,Math.PI):this.arc(y,x+S,M,0,-c.TAU,!0),this.lineTo(y,x+T),this.moveTo(y,x+T),I?this.arc(y+T,x+T,T,-Math.PI,-c.TAU):this.arc(y,x,T,c.TAU,0,!0),this.strokePath(),this},fillPointShape:function(y,x){return this.fillPoint(y.x,y.y,x)},fillPoint:function(y,x,C){return!C||C<1?C=1:(y-=C/2,x-=C/2),this.commandBuffer.push(h.FILL_RECT,y,x,C,C),this},fillTriangleShape:function(y){return this.fillTriangle(y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)},strokeTriangleShape:function(y){return this.strokeTriangle(y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)},fillTriangle:function(y,x,C,S,E,T){return this.commandBuffer.push(h.FILL_TRIANGLE,y,x,C,S,E,T),this},strokeTriangle:function(y,x,C,S,E,T){return this.commandBuffer.push(h.STROKE_TRIANGLE,y,x,C,S,E,T),this},strokeLineShape:function(y){return this.lineBetween(y.x1,y.y1,y.x2,y.y2)},lineBetween:function(y,x,C,S){return this.beginPath(),this.moveTo(y,x),this.lineTo(C,S),this.strokePath(),this},lineTo:function(y,x){return this.commandBuffer.push(h.LINE_TO,y,x),this},moveTo:function(y,x){return this.commandBuffer.push(h.MOVE_TO,y,x),this},strokePoints:function(y,x,C,S){x===void 0&&(x=!1),C===void 0&&(C=!1),S===void 0&&(S=y.length),this.beginPath(),this.moveTo(y[0].x,y[0].y);for(var E=1;E<S;E++)this.lineTo(y[E].x,y[E].y);return x&&this.lineTo(y[0].x,y[0].y),C&&this.closePath(),this.strokePath(),this},fillPoints:function(y,x,C,S){x===void 0&&(x=!1),C===void 0&&(C=!1),S===void 0&&(S=y.length),this.beginPath(),this.moveTo(y[0].x,y[0].y);for(var E=1;E<S;E++)this.lineTo(y[E].x,y[E].y);return x&&this.lineTo(y[0].x,y[0].y),C&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(y,x){x===void 0&&(x=32);var C=y.getPoints(x);return this.strokePoints(C,!0)},strokeEllipse:function(y,x,C,S,E){E===void 0&&(E=32);var T=new f(y,x,C,S),P=T.getPoints(E);return this.strokePoints(P,!0)},fillEllipseShape:function(y,x){x===void 0&&(x=32);var C=y.getPoints(x);return this.fillPoints(C,!0)},fillEllipse:function(y,x,C,S,E){E===void 0&&(E=32);var T=new f(y,x,C,S),P=T.getPoints(E);return this.fillPoints(P,!0)},arc:function(y,x,C,S,E,T,P){return T===void 0&&(T=!1),P===void 0&&(P=0),this.commandBuffer.push(h.ARC,y,x,C,S,E,T,P),this},slice:function(y,x,C,S,E,T,P){return T===void 0&&(T=!1),P===void 0&&(P=0),this.commandBuffer.push(h.BEGIN_PATH),this.commandBuffer.push(h.MOVE_TO,y,x),this.commandBuffer.push(h.ARC,y,x,C,S,E,T,P),this.commandBuffer.push(h.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(h.SAVE),this},restore:function(){return this.commandBuffer.push(h.RESTORE),this},translateCanvas:function(y,x){return this.commandBuffer.push(h.TRANSLATE,y,x),this},scaleCanvas:function(y,x){return this.commandBuffer.push(h.SCALE,y,x),this},rotateCanvas:function(y){return this.commandBuffer.push(h.ROTATE,y),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(y,x,C){var S=this.scene.sys,E=S.game.renderer;x===void 0&&(x=S.scale.width),C===void 0&&(C=S.scale.height),g.TargetCamera.setScene(this.scene),g.TargetCamera.setViewport(0,0,x,C),g.TargetCamera.scrollX=this.x,g.TargetCamera.scrollY=this.y;var T,P,M={willReadFrequently:!0};if(typeof y=="string")if(S.textures.exists(y)){T=S.textures.get(y);var w=T.getSourceImage();w instanceof HTMLCanvasElement&&(P=w.getContext("2d",M))}else T=S.textures.createCanvas(y,x,C),P=T.getSourceImage().getContext("2d",M);else y instanceof HTMLCanvasElement&&(P=y.getContext("2d",M));return P&&(this.renderCanvas(E,this,g.TargetCamera,null,P,!1),T&&T.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});g.TargetCamera=new a,n.exports=g},32768:(n,o,r)=>{var a=r(85592),p=r(20926),h=function(u,f,l,d,v,c){var m=f.commandBuffer,g=m.length,y=v||u.currentContext;if(!(g===0||!p(u,y,f,l,d))){l.addToRenderList(f);var x=1,C=1,S=0,E=0,T=1,P=0,M=0,w=0;y.beginPath();for(var b=0;b<g;++b){var I=m[b];switch(I){case a.ARC:y.arc(m[b+1],m[b+2],m[b+3],m[b+4],m[b+5],m[b+6]),b+=7;break;case a.LINE_STYLE:T=m[b+1],S=m[b+2],x=m[b+3],P=(S&16711680)>>>16,M=(S&65280)>>>8,w=S&255,y.strokeStyle="rgba("+P+","+M+","+w+","+x+")",y.lineWidth=T,b+=3;break;case a.FILL_STYLE:E=m[b+1],C=m[b+2],P=(E&16711680)>>>16,M=(E&65280)>>>8,w=E&255,y.fillStyle="rgba("+P+","+M+","+w+","+C+")",b+=2;break;case a.BEGIN_PATH:y.beginPath();break;case a.CLOSE_PATH:y.closePath();break;case a.FILL_PATH:c||y.fill();break;case a.STROKE_PATH:c||y.stroke();break;case a.FILL_RECT:c?y.rect(m[b+1],m[b+2],m[b+3],m[b+4]):y.fillRect(m[b+1],m[b+2],m[b+3],m[b+4]),b+=4;break;case a.FILL_TRIANGLE:y.beginPath(),y.moveTo(m[b+1],m[b+2]),y.lineTo(m[b+3],m[b+4]),y.lineTo(m[b+5],m[b+6]),y.closePath(),c||y.fill(),b+=6;break;case a.STROKE_TRIANGLE:y.beginPath(),y.moveTo(m[b+1],m[b+2]),y.lineTo(m[b+3],m[b+4]),y.lineTo(m[b+5],m[b+6]),y.closePath(),c||y.stroke(),b+=6;break;case a.LINE_TO:y.lineTo(m[b+1],m[b+2]),b+=2;break;case a.MOVE_TO:y.moveTo(m[b+1],m[b+2]),b+=2;break;case a.LINE_FX_TO:y.lineTo(m[b+1],m[b+2]),b+=5;break;case a.MOVE_FX_TO:y.moveTo(m[b+1],m[b+2]),b+=5;break;case a.SAVE:y.save();break;case a.RESTORE:y.restore();break;case a.TRANSLATE:y.translate(m[b+1],m[b+2]),b+=2;break;case a.SCALE:y.scale(m[b+1],m[b+2]),b+=2;break;case a.ROTATE:y.rotate(m[b+1]),b+=1;break;case a.GRADIENT_FILL_STYLE:b+=5;break;case a.GRADIENT_LINE_STYLE:b+=6;break}}y.restore()}};n.exports=h},87079:(n,o,r)=>{var a=r(44603),p=r(43831);a.register("graphics",function(h,u){h===void 0&&(h={}),u!==void 0&&(h.add=u);var f=new p(this.scene,h);return h.add&&this.scene.sys.displayList.add(f),f})},1201:(n,o,r)=>{var a=r(43831),p=r(39429);p.register("graphics",function(h){return this.displayList.add(new a(this.scene,h))})},84503:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(77545),h=r(32768),h=r(32768),n.exports={renderWebGL:p,renderCanvas:h}},77545:(n,o,r)=>{var a=r(85592),p=r(91296),h=r(61340),u=r(70554),f=function(m,g,y){this.x=m,this.y=g,this.width=y},l=function(m,g,y){this.points=[],this.pointsLength=1,this.points[0]=new f(m,g,y)},d=[],v=new h,c=function(m,g,y,x){if(g.commandBuffer.length!==0){y.addToRenderList(g);var C=m.pipelines.set(g.pipeline,g);m.pipelines.preBatch(g);for(var S=p(g,y,x).calc,E=v.loadIdentity(),T=g.commandBuffer,P=y.alpha*g.alpha,M=1,w=C.fillTint,b=C.strokeTint,I=0,R=0,A=0,L=.01,O=Math.PI*2,F,G=[],U=0,z=!0,N=null,k=u.getTintAppendFloatAlpha,D=0;D<T.length;D++)switch(F=T[D],F){case a.BEGIN_PATH:{G.length=0,N=null,z=!0;break}case a.CLOSE_PATH:{z=!1,N&&N.points.length&&N.points.push(N.points[0]);break}case a.FILL_PATH:{for(U=0;U<G.length;U++)C.batchFillPath(G[U].points,E,S);break}case a.STROKE_PATH:{for(U=0;U<G.length;U++)C.batchStrokePath(G[U].points,M,z,E,S);break}case a.LINE_STYLE:{M=T[++D];var V=T[++D],B=T[++D]*P,W=k(V,B);b.TL=W,b.TR=W,b.BL=W,b.BR=W;break}case a.FILL_STYLE:{var H=T[++D],Y=T[++D]*P,X=k(H,Y);w.TL=X,w.TR=X,w.BL=X,w.BR=X;break}case a.GRADIENT_FILL_STYLE:{var $=T[++D]*P,J=T[++D]*P,q=T[++D]*P,Q=T[++D]*P;w.TL=k(T[++D],$),w.TR=k(T[++D],J),w.BL=k(T[++D],q),w.BR=k(T[++D],Q);break}case a.GRADIENT_LINE_STYLE:{M=T[++D];var tt=T[++D]*P;b.TL=k(T[++D],tt),b.TR=k(T[++D],tt),b.BL=k(T[++D],tt),b.BR=k(T[++D],tt);break}case a.ARC:{var rt=0,et=T[++D],ot=T[++D],ut=T[++D],dt=T[++D],it=T[++D],st=T[++D],at=T[++D];for(it-=dt,st?it<-O?it=-O:it>0&&(it=-O+it%O):it>O?it=O:it<0&&(it=O+it%O),N===null&&(N=new l(et+Math.cos(dt)*ut,ot+Math.sin(dt)*ut,M),G.push(N),rt+=L);rt<1+at;)A=it*rt+dt,I=et+Math.cos(A)*ut,R=ot+Math.sin(A)*ut,N.points.push(new f(I,R,M)),rt+=L;A=it+dt,I=et+Math.cos(A)*ut,R=ot+Math.sin(A)*ut,N.points.push(new f(I,R,M));break}case a.FILL_RECT:{C.batchFillRect(T[++D],T[++D],T[++D],T[++D],E,S);break}case a.FILL_TRIANGLE:{C.batchFillTriangle(T[++D],T[++D],T[++D],T[++D],T[++D],T[++D],E,S);break}case a.STROKE_TRIANGLE:{C.batchStrokeTriangle(T[++D],T[++D],T[++D],T[++D],T[++D],T[++D],M,E,S);break}case a.LINE_TO:{N!==null?N.points.push(new f(T[++D],T[++D],M)):(N=new l(T[++D],T[++D],M),G.push(N));break}case a.MOVE_TO:{N=new l(T[++D],T[++D],M),G.push(N);break}case a.SAVE:{d.push(E.copyToArray());break}case a.RESTORE:{E.copyFromArray(d.pop());break}case a.TRANSLATE:{et=T[++D],ot=T[++D],E.translate(et,ot);break}case a.SCALE:{et=T[++D],ot=T[++D],E.scale(et,ot);break}case a.ROTATE:{E.rotate(T[++D]);break}}m.pipelines.postBatch(g)}};n.exports=c},26479:(n,o,r)=>{var a=r(61061),p=r(83419),h=r(51708),u=r(50792),f=r(46710),l=r(95540),d=r(35154),v=r(97022),c=r(41212),m=r(88492),g=r(35072),y=r(68287),x=new p({Extends:u,initialize:function(S,E,T){u.call(this),T?E&&!Array.isArray(E)&&(E=[E]):Array.isArray(E)?c(E[0])&&(T=E,E=null):c(E)&&(T=E,E=null),this.scene=S,this.children=new g,this.isParent=!0,this.type="Group",this.classType=l(T,"classType",y),this.name=l(T,"name",""),this.active=l(T,"active",!0),this.maxSize=l(T,"maxSize",-1),this.defaultKey=l(T,"defaultKey",null),this.defaultFrame=l(T,"defaultFrame",null),this.runChildUpdate=l(T,"runChildUpdate",!1),this.createCallback=l(T,"createCallback",null),this.removeCallback=l(T,"removeCallback",null),this.createMultipleCallback=l(T,"createMultipleCallback",null),this.internalCreateCallback=l(T,"internalCreateCallback",null),this.internalRemoveCallback=l(T,"internalRemoveCallback",null),E&&this.addMultiple(E),T&&this.createMultiple(T),this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(C,S,E,T,P,M){if(C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=this.defaultKey),T===void 0&&(T=this.defaultFrame),P===void 0&&(P=!0),M===void 0&&(M=!0),this.isFull())return null;var w=new this.classType(this.scene,C,S,E,T);return w.addToDisplayList(this.scene.sys.displayList),w.addToUpdateList(),w.visible=P,w.setActive(M),this.add(w),w},createMultiple:function(C){if(this.isFull())return[];Array.isArray(C)||(C=[C]);var S=[];if(C[0].key)for(var E=0;E<C.length;E++){var T=this.createFromConfig(C[E]);S=S.concat(T)}return S},createFromConfig:function(C){if(this.isFull())return[];this.classType=l(C,"classType",this.classType);var S=l(C,"key",void 0),E=l(C,"frame",null),T=l(C,"visible",!0),P=l(C,"active",!0),M=[];if(S===void 0)return M;Array.isArray(S)||(S=[S]),Array.isArray(E)||(E=[E]);var w=l(C,"repeat",0),b=l(C,"randomKey",!1),I=l(C,"randomFrame",!1),R=l(C,"yoyo",!1),A=l(C,"quantity",!1),L=l(C,"frameQuantity",1),O=l(C,"max",0),F=m(S,E,{max:O,qty:A||L,random:b,randomB:I,repeat:w,yoyo:R});C.createCallback&&(this.createCallback=C.createCallback),C.removeCallback&&(this.removeCallback=C.removeCallback),C.internalCreateCallback&&(this.internalCreateCallback=C.internalCreateCallback),C.internalRemoveCallback&&(this.internalRemoveCallback=C.internalRemoveCallback);for(var G=0;G<F.length;G++){var U=this.create(0,0,F[G].a,F[G].b,T,P);if(!U)break;M.push(U)}if(v(C,"setXY")){var z=d(C,"setXY.x",0),N=d(C,"setXY.y",0),k=d(C,"setXY.stepX",0),D=d(C,"setXY.stepY",0);a.SetXY(M,z,N,k,D)}if(v(C,"setRotation")){var V=d(C,"setRotation.value",0),B=d(C,"setRotation.step",0);a.SetRotation(M,V,B)}if(v(C,"setScale")){var W=d(C,"setScale.x",1),H=d(C,"setScale.y",W),Y=d(C,"setScale.stepX",0),X=d(C,"setScale.stepY",0);a.SetScale(M,W,H,Y,X)}if(v(C,"setOrigin")){var $=d(C,"setOrigin.x",.5),J=d(C,"setOrigin.y",$),q=d(C,"setOrigin.stepX",0),Q=d(C,"setOrigin.stepY",0);a.SetOrigin(M,$,J,q,Q)}if(v(C,"setAlpha")){var tt=d(C,"setAlpha.value",1),rt=d(C,"setAlpha.step",0);a.SetAlpha(M,tt,rt)}if(v(C,"setDepth")){var et=d(C,"setDepth.value",0),ot=d(C,"setDepth.step",0);a.SetDepth(M,et,ot)}if(v(C,"setScrollFactor")){var ut=d(C,"setScrollFactor.x",1),dt=d(C,"setScrollFactor.y",ut),it=d(C,"setScrollFactor.stepX",0),st=d(C,"setScrollFactor.stepY",0);a.SetScrollFactor(M,ut,dt,it,st)}var at=l(C,"hitArea",null),yt=l(C,"hitAreaCallback",null);at&&a.SetHitArea(M,at,yt);var Ft=l(C,"gridAlign",!1);return Ft&&a.GridAlign(M,Ft),this.createMultipleCallback&&this.createMultipleCallback.call(this,M),M},preUpdate:function(C,S){if(!(!this.runChildUpdate||this.children.size===0))for(var E=this.children.entries.slice(),T=0;T<E.length;T++){var P=E[T];P.active&&P.update(C,S)}},add:function(C,S){return S===void 0&&(S=!1),this.isFull()?this:(this.children.set(C),this.internalCreateCallback&&this.internalCreateCallback.call(this,C),this.createCallback&&this.createCallback.call(this,C),S&&(C.addToDisplayList(this.scene.sys.displayList),C.addToUpdateList()),C.on(h.DESTROY,this.remove,this),this)},addMultiple:function(C,S){if(S===void 0&&(S=!1),Array.isArray(C))for(var E=0;E<C.length;E++)this.add(C[E],S);return this},remove:function(C,S,E){return S===void 0&&(S=!1),E===void 0&&(E=!1),this.children.contains(C)?(this.children.delete(C),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,C),this.removeCallback&&this.removeCallback.call(this,C),C.off(h.DESTROY,this.remove,this),E?C.destroy():S&&(C.removeFromDisplayList(),C.removeFromUpdateList()),this):this},clear:function(C,S){C===void 0&&(C=!1),S===void 0&&(S=!1);for(var E=this.children,T=0;T<E.size;T++){var P=E.entries[T];P.off(h.DESTROY,this.remove,this),S?P.destroy():C&&(P.removeFromDisplayList(),P.removeFromUpdateList())}return this.children.clear(),this},contains:function(C){return this.children.contains(C)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(C,S,E,T){return f(this.children.entries,C,S,E,T)},getFirst:function(C,S,E,T,P,M,w){return this.getHandler(!0,1,C,S,E,T,P,M,w)},getFirstNth:function(C,S,E,T,P,M,w,b){return this.getHandler(!0,C,S,E,T,P,M,w,b)},getLast:function(C,S,E,T,P,M,w){return this.getHandler(!1,1,C,S,E,T,P,M,w)},getLastNth:function(C,S,E,T,P,M,w,b){return this.getHandler(!1,C,S,E,T,P,M,w,b)},getHandler:function(C,S,E,T,P,M,w,b,I){E===void 0&&(E=!1),T===void 0&&(T=!1);var R,A,L=0,O=this.children.entries;if(C)for(A=0;A<O.length;A++)if(R=O[A],R.active===E){if(L++,L===S)break}else R=null;else for(A=O.length-1;A>=0;A--)if(R=O[A],R.active===E){if(L++,L===S)break}else R=null;return R?(typeof P=="number"&&(R.x=P),typeof M=="number"&&(R.y=M),R):T?this.create(P,M,w,b,I):null},get:function(C,S,E,T,P){return this.getFirst(!1,!0,C,S,E,T,P)},getFirstAlive:function(C,S,E,T,P,M){return this.getFirst(!0,C,S,E,T,P,M)},getFirstDead:function(C,S,E,T,P,M){return this.getFirst(!1,C,S,E,T,P,M)},playAnimation:function(C,S){return a.PlayAnimation(this.children.entries,C,S),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(C){C===void 0&&(C=!0);for(var S=0,E=0;E<this.children.size;E++)this.children.entries[E].active===C&&S++;return S},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var C=this.getTotalUsed(),S=this.maxSize===-1?999999999999:this.maxSize;return S-C},setActive:function(C){return this.active=C,this},setName:function(C){return this.name=C,this},propertyValueSet:function(C,S,E,T,P){return a.PropertyValueSet(this.children.entries,C,S,E,T,P),this},propertyValueInc:function(C,S,E,T,P){return a.PropertyValueInc(this.children.entries,C,S,E,T,P),this},setX:function(C,S){return a.SetX(this.children.entries,C,S),this},setY:function(C,S){return a.SetY(this.children.entries,C,S),this},setXY:function(C,S,E,T){return a.SetXY(this.children.entries,C,S,E,T),this},incX:function(C,S){return a.IncX(this.children.entries,C,S),this},incY:function(C,S){return a.IncY(this.children.entries,C,S),this},incXY:function(C,S,E,T){return a.IncXY(this.children.entries,C,S,E,T),this},shiftPosition:function(C,S,E){return a.ShiftPosition(this.children.entries,C,S,E),this},angle:function(C,S){return a.Angle(this.children.entries,C,S),this},rotate:function(C,S){return a.Rotate(this.children.entries,C,S),this},rotateAround:function(C,S){return a.RotateAround(this.children.entries,C,S),this},rotateAroundDistance:function(C,S,E){return a.RotateAroundDistance(this.children.entries,C,S,E),this},setAlpha:function(C,S){return a.SetAlpha(this.children.entries,C,S),this},setTint:function(C,S,E,T){return a.SetTint(this.children.entries,C,S,E,T),this},setOrigin:function(C,S,E,T){return a.SetOrigin(this.children.entries,C,S,E,T),this},scaleX:function(C,S){return a.ScaleX(this.children.entries,C,S),this},scaleY:function(C,S){return a.ScaleY(this.children.entries,C,S),this},scaleXY:function(C,S,E,T){return a.ScaleXY(this.children.entries,C,S,E,T),this},setDepth:function(C,S){return a.SetDepth(this.children.entries,C,S),this},setBlendMode:function(C){return a.SetBlendMode(this.children.entries,C),this},setHitArea:function(C,S){return a.SetHitArea(this.children.entries,C,S),this},shuffle:function(){return a.Shuffle(this.children.entries),this},kill:function(C){this.children.contains(C)&&C.setActive(!1)},killAndHide:function(C){this.children.contains(C)&&(C.setActive(!1),C.setVisible(!1))},setVisible:function(C,S,E){return a.SetVisible(this.children.entries,C,S,E),this},toggleVisible:function(){return a.ToggleVisible(this.children.entries),this},destroy:function(C,S){C===void 0&&(C=!1),S===void 0&&(S=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(h.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(S,C),this.scene=void 0,this.children=void 0)}});n.exports=x},94975:(n,o,r)=>{var a=r(44603),p=r(26479);a.register("group",function(h){return new p(this.scene,null,h)})},3385:(n,o,r)=>{var a=r(26479),p=r(39429);p.register("group",function(h,u){return this.updateList.add(new a(this.scene,h,u))})},88571:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(95643),u=r(59819),f=new a({Extends:h,Mixins:[p.Alpha,p.BlendMode,p.Depth,p.Flip,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Size,p.TextureCrop,p.Tint,p.Transform,p.Visible,u],initialize:function(d,v,c,m,g){h.call(this,d,"Image"),this._crop=this.resetCropObject(),this.setTexture(m,g),this.setPosition(v,c),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});n.exports=f},40652:n=>{var o=function(r,a,p,h){p.addToRenderList(a),r.batchSprite(a,a.frame,p,h)};n.exports=o},82459:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(88571);p.register("image",function(f,l){f===void 0&&(f={});var d=h(f,"key",null),v=h(f,"frame",null),c=new u(this.scene,0,0,d,v);return l!==void 0&&(f.add=l),a(this.scene,c,f),c})},2117:(n,o,r)=>{var a=r(88571),p=r(39429);p.register("image",function(h,u,f,l){return this.displayList.add(new a(this.scene,h,u,f,l))})},59819:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(99517),h=r(40652),n.exports={renderWebGL:p,renderCanvas:h}},99517:n=>{var o=function(r,a,p,h){p.addToRenderList(a),this.pipeline.batchSprite(a,p,h)};n.exports=o},77856:(n,o,r)=>{var a={Events:r(51708),DisplayList:r(8050),GameObjectCreator:r(44603),GameObjectFactory:r(39429),UpdateList:r(45027),Components:r(31401),GetCalcMatrix:r(91296),BuildGameObject:r(25305),BuildGameObjectAnimation:r(13059),GameObject:r(95643),BitmapText:r(22186),Blitter:r(6107),Bob:r(46590),Container:r(31559),DOMElement:r(3069),DynamicBitmapText:r(2638),Extern:r(42421),Graphics:r(43831),Group:r(26479),Image:r(88571),Layer:r(93595),Particles:r(18404),PathFollower:r(1159),RenderTexture:r(591),RetroFont:r(196),Rope:r(77757),Sprite:r(68287),Text:r(50171),GetTextSize:r(14220),MeasureText:r(79557),TextStyle:r(35762),TileSprite:r(20839),Zone:r(41481),Video:r(18471),Shape:r(17803),Arc:r(23629),Curve:r(89),Ellipse:r(19921),Grid:r(30479),IsoBox:r(61475),IsoTriangle:r(16933),Line:r(57847),Polygon:r(24949),Rectangle:r(74561),Star:r(55911),Triangle:r(36931),Factories:{Blitter:r(12709),Container:r(24961),DOMElement:r(2611),DynamicBitmapText:r(72566),Extern:r(56315),Graphics:r(1201),Group:r(3385),Image:r(2117),Layer:r(20005),Particles:r(676),PathFollower:r(90145),RenderTexture:r(60505),Rope:r(96819),Sprite:r(46409),StaticBitmapText:r(34914),Text:r(68005),TileSprite:r(91681),Zone:r(84175),Video:r(89025),Arc:r(42563),Curve:r(40511),Ellipse:r(1543),Grid:r(34137),IsoBox:r(3933),IsoTriangle:r(49803),Line:r(2481),Polygon:r(64827),Rectangle:r(87959),Star:r(93697),Triangle:r(45245)},Creators:{Blitter:r(9403),Container:r(77143),DynamicBitmapText:r(11164),Graphics:r(87079),Group:r(94975),Image:r(82459),Layer:r(25179),Particles:r(92730),RenderTexture:r(34495),Rope:r(26209),Sprite:r(15567),StaticBitmapText:r(57336),Text:r(71259),TileSprite:r(14167),Zone:r(95261),Video:r(11511)}};a.Shader=r(20071),a.Mesh=r(4703),a.NineSlice=r(28103),a.PointLight=r(80321),a.Plane=r(33663),a.Factories.Shader=r(74177),a.Factories.Mesh=r(9225),a.Factories.NineSlice=r(47521),a.Factories.PointLight=r(71255),a.Factories.Plane=r(30985),a.Creators.Shader=r(54935),a.Creators.Mesh=r(20527),a.Creators.NineSlice=r(28279),a.Creators.PointLight=r(39829),a.Creators.Plane=r(56015),a.Light=r(41432),a.LightsManager=r(61356),a.LightsPlugin=r(88992),n.exports=a},93595:(n,o,r)=>{var a=r(10312),p=r(83419),h=r(31401),u=r(53774),f=r(45893),l=r(50792),d=r(51708),v=r(73162),c=r(33963),m=r(44594),g=r(19186),y=new p({Extends:v,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.PostPipeline,h.Visible,l,c],initialize:function(C,S){v.call(this,C),l.call(this),this.scene=C,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=C.sys,this.events=C.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),S&&this.add(S),C.sys.queueDepthSort()},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},setState:function(x){return this.state=x,this},setDataEnabled:function(){return this.data||(this.data=new f(this)),this},setData:function(x,C){return this.data||(this.data=new f(this)),this.data.set(x,C),this},incData:function(x,C){return this.data||(this.data=new f(this)),this.data.inc(x,C),this},toggleData:function(x){return this.data||(this.data=new f(this)),this.data.toggle(x),this},getData:function(x){return this.data||(this.data=new f(this)),this.data.get(x)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(x){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&x.id)},getIndexList:function(){for(var x=this,C=this.parentContainer,S=[];C&&(S.unshift(C.getIndex(x)),x=C,C.parentContainer);)C=C.parentContainer;return S.unshift(this.displayList.getIndex(x)),S},addChildCallback:function(x){var C=x.displayList;C&&C!==this&&x.removeFromDisplayList(),x.displayList||(this.queueDepthSort(),x.displayList=this,x.emit(d.ADDED_TO_SCENE,x,this.scene),this.events.emit(m.ADDED_TO_SCENE,x,this.scene))},removeChildCallback:function(x){this.queueDepthSort(),x.displayList=null,x.emit(d.REMOVED_FROM_SCENE,x,this.scene),this.events.emit(m.REMOVED_FROM_SCENE,x,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(g(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(x,C){return x._depth-C._depth},getChildren:function(){return this.list},addToDisplayList:function(x){return x===void 0&&(x=this.scene.sys.displayList),this.displayList&&this.displayList!==x&&this.removeFromDisplayList(),x.exists(this)||(this.displayList=x,x.add(this,!0),x.queueDepthSort(),this.emit(d.ADDED_TO_SCENE,this,this.scene),x.events.emit(m.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var x=this.displayList||this.scene.sys.displayList;return x.exists(this)&&(x.remove(this,!0),x.queueDepthSort(),this.displayList=null,this.emit(d.REMOVED_FROM_SCENE,this,this.scene),x.events.emit(m.REMOVED_FROM_SCENE,this,this.scene)),this},getDisplayList:function(){var x=null;return this.parentContainer?x=this.parentContainer.list:this.displayList&&(x=this.displayList.list),x},destroy:function(x){if(!(!this.scene||this.ignoreDestroy)){this.emit(d.DESTROY,this);for(var C=this.list;C.length;)C[0].destroy(x);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});n.exports=y},2956:n=>{var o=function(r,a,p){var h=a.list;if(h.length!==0){a.depthSort();var u=a.blendMode!==-1;u||r.setBlendMode(0);var f=a._alpha;a.mask&&a.mask.preRenderCanvas(r,null,p);for(var l=0;l<h.length;l++){var d=h[l];if(d.willRender(p)){var v=d.alpha;!u&&d.blendMode!==r.currentBlendMode&&r.setBlendMode(d.blendMode),d.setAlpha(v*f),d.renderCanvas(r,d,p),d.setAlpha(v)}}a.mask&&a.mask.postRenderCanvas(r)}};n.exports=o},25179:(n,o,r)=>{var a=r(25305),p=r(93595),h=r(44603),u=r(23568);h.register("layer",function(f,l){f===void 0&&(f={});var d=u(f,"children",null),v=new p(this.scene,d);return l!==void 0&&(f.add=l),a(this.scene,v,f),v})},20005:(n,o,r)=>{var a=r(93595),p=r(39429);p.register("layer",function(h){return this.displayList.add(new a(this.scene,h))})},33963:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(15869),h=r(2956),n.exports={renderWebGL:p,renderCanvas:h}},15869:n=>{var o=function(r,a,p){var h=a.list,u=h.length;if(u!==0){a.depthSort(),r.pipelines.preBatch(a);var f=a.blendMode!==-1;f||r.setBlendMode(0);for(var l=a.alpha,d=0;d<u;d++){var v=h[d];if(v.willRender(p)){var c,m,g,y;if(v.alphaTopLeft!==void 0)c=v.alphaTopLeft,m=v.alphaTopRight,g=v.alphaBottomLeft,y=v.alphaBottomRight;else{var x=v.alpha;c=x,m=x,g=x,y=x}!f&&v.blendMode!==r.currentBlendMode&&r.setBlendMode(v.blendMode);var C=v.mask;C&&C.preRenderWebGL(r,v,p);var S=v.type;S!==r.currentType&&(r.newType=!0,r.currentType=S),r.nextTypeMatch=d<u-1?h[d+1].type===r.currentType:!1,v.setAlpha(c*l,m*l,g*l,y*l),v.renderWebGL(r,v,p),v.setAlpha(c,m,g,y),C&&C.postRenderWebGL(r,p),r.newType=!1}}r.pipelines.postBatch(a)}};n.exports=o},41432:(n,o,r)=>{var a=r(96503),p=r(83419),h=r(31401),u=r(51767),f=r(70554),l=new p({Extends:a,Mixins:[h.Origin,h.ScrollFactor,h.Visible],initialize:function(v,c,m,g,y,x,C){a.call(this,v,c,m),this.color=new u(g,y,x),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(m)},displayWidth:{get:function(){return this.diameter},set:function(d){this.diameter=d}},displayHeight:{get:function(){return this.diameter},set:function(d){this.diameter=d}},width:{get:function(){return this.diameter},set:function(d){this.diameter=d}},height:{get:function(){return this.diameter},set:function(d){this.diameter=d}},willRender:function(d){return!(l.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&d.id)},setColor:function(d){var v=f.getFloatsFromUintRGB(d);return this.color.set(v[0],v[1],v[2]),this},setIntensity:function(d){return this.intensity=d,this},setRadius:function(d){return this.radius=d,this}});l.RENDER_MASK=15,n.exports=l},61356:(n,o,r)=>{var a=r(81491),p=r(83419),h=r(20339),u=r(41432),f=r(80321),l=r(51767),d=r(19133),v=r(19186),c=r(70554),m=new p({initialize:function(){this.lights=[],this.ambientColor=new l(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(g,y,x,C,S,E){return this.systems.displayList.add(new f(this.scene,g,y,x,C,S,E))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(g){for(var y=this.lights,x=g.worldView,C=[],S=0;S<y.length;S++){var E=y[S];E.willRender(g)&&a(E,x)&&C.push({light:E,distance:h(E.x,E.y,x.centerX,x.centerY)})}return C.length>this.maxLights&&(v(C,this.sortByDistance),C=C.slice(0,this.maxLights)),this.visibleLights=C.length,C},sortByDistance:function(g,y){return g.distance>=y.distance},setAmbientColor:function(g){var y=c.getFloatsFromUintRGB(g);return this.ambientColor.set(y[0],y[1],y[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(g,y,x,C,S){g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=128),C===void 0&&(C=16777215),S===void 0&&(S=1);var E=c.getFloatsFromUintRGB(C),T=new u(g,y,x,E[0],E[1],E[2],S);return this.lights.push(T),T},removeLight:function(g){var y=this.lights.indexOf(g);return y>=0&&d(this.lights,y),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});n.exports=m},88992:(n,o,r)=>{var a=r(83419),p=r(61356),h=r(37277),u=r(44594),f=new a({Extends:p,initialize:function(d){this.scene=d,this.systems=d.sys,d.sys.settings.isBooted||d.sys.events.once(u.BOOT,this.boot,this),p.call(this)},boot:function(){var l=this.systems.events;l.on(u.SHUTDOWN,this.shutdown,this),l.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});h.register("LightsPlugin",f,"lights"),n.exports=f},4703:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(39506),u=r(83997),f=r(95643),l=r(34684),d=r(92515),v=r(91296),c=r(37867),m=r(29807),g=r(43396),y=r(19186),x=r(25836),C=r(39318),S=new a({Extends:f,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Size,p.Texture,p.Transform,p.Visible,m],initialize:function(T,P,M,w,b,I,R,A,L,O,F,G){P===void 0&&(P=0),M===void 0&&(M=0),w===void 0&&(w="__WHITE"),f.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new x,this.modelScale=new x(1,1,1),this.modelRotation=new x,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new c,this.viewPosition=new x,this.viewMatrix=new c,this.projectionMatrix=new c,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var U=T.sys.renderer;this.setPosition(P,M),this.setTexture(w,b),this.setSize(U.width,U.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(U.width,U.height),I&&this.addVertices(I,R,A,L,O,F,G)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(E){return this.viewPosition.addScale(x.LEFT,E),this.dirtyCache[10]=1,this},panY:function(E){return this.viewPosition.y+=x.DOWN.y*E,this.dirtyCache[10]=1,this},panZ:function(E){return this.viewPosition.z+=E,this.dirtyCache[10]=1,this},setPerspective:function(E,T,P,M,w){return P===void 0&&(P=45),M===void 0&&(M=.01),w===void 0&&(w=1e3),this.fov=P,this.projectionMatrix.perspective(h(P),E/T,M,w),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(E,T,P,M){return E===void 0&&(E=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),P===void 0&&(P=-1e3),M===void 0&&(M=1e3),this.fov=0,this.projectionMatrix.ortho(-E,E,-T,T,P,M),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(E){E.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(E,T,P,M,w,b,I,R,A){var L=this.scene.sys.cache.obj.get(E),O;return L&&(O=l(L,this,T,P,M,w,b,I,R,A)),(!O||O.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",E),this},sortByDepth:function(E,T){return E.depth-T.depth},depthSort:function(){return y(this.faces,this.sortByDepth),this},addVertex:function(E,T,P,M,w,b,I){var R=new C(E,T,P,M,w,b,I);return this.vertices.push(R),R},addFace:function(E,T,P){var M=new u(E,T,P);return this.faces.push(M),this.dirtyCache[9]=-1,M},addVertices:function(E,T,P,M,w,b,I){var R=d(E,T,P,M,w,b,I);return R?(this.faces=this.faces.concat(R.faces),this.vertices=this.vertices.concat(R.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(E){return this.faces[E]},hasFaceAt:function(E,T,P){P===void 0&&(P=this.scene.sys.cameras.main);for(var M=v(this,P).calc,w=this.faces,b=0;b<w.length;b++){var I=w[b];if(I.contains(E,T,M))return!0}return!1},getFaceAt:function(E,T,P){P===void 0&&(P=this.scene.sys.cameras.main);for(var M=v(this,P).calc,w=this.faces,b=[],I=0;I<w.length;I++){var R=w[I];R.contains(E,T,M)&&b.push(R)}return y(b,this.sortByDepth)},setDebug:function(E,T){return this.debugGraphic=E,!E&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var E=this.modelPosition,T=this.modelRotation,P=this.modelScale,M=this.dirtyCache,w=E.x,b=E.y,I=E.z,R=T.x,A=T.y,L=T.z,O=P.x,F=P.y,G=P.z,U=this.getFaceCount(),z=M[0],N=M[1],k=M[2],D=M[3],V=M[4],B=M[5],W=M[6],H=M[7],Y=M[8],X=M[9];return M[0]=w,M[1]=b,M[2]=I,M[3]=R,M[4]=A,M[5]=L,M[6]=O,M[7]=F,M[8]=G,M[9]=U,z!==w||N!==b||k!==I||D!==R||V!==A||B!==L||W!==O||H!==F||Y!==G||X!==U},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var E=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!E[10]&&!this.isDirty())){var T=this.width,P=this.height,M=this.viewMatrix,w=this.viewPosition;E[10]&&(M.identity(),M.translate(w),M.invert(),E[10]=0);var b=this.transformMatrix;b.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var I=w.z,R=this.faces,A=0;A<R.length;A++)R[A].transformCoordinatesLocal(b,T,P,I);this.depthSort()}},renderDebug:function(E,T){for(var P=E.debugGraphic,M=0;M<T.length;M++){var w=T[M],b=w.vertex1.tx,I=w.vertex1.ty,R=w.vertex2.tx,A=w.vertex2.ty,L=w.vertex3.tx,O=w.vertex3.ty;P.strokeTriangle(b,I,R,A,L,O)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(E){E===void 0&&(E={});var T=function(P,M,w){for(var b=this.faces,I=0;I<b.length;I++){var R=b[I];if(R.contains(M,w))return!0}return!1}.bind(this);return this.scene.sys.input.enable(this,E,T),this},setTint:function(E){E===void 0&&(E=16777215);for(var T=this.vertices,P=0;P<T.length;P++)T[P].color=E;return this},uvScroll:function(E,T){for(var P=this.faces,M=0;M<P.length;M++)P[M].scrollUV(E,T);return this},uvScale:function(E,T){for(var P=this.faces,M=0;M<P.length;M++)P[M].scaleUV(E,T);return this},tint:{set:function(E){this.setTint(E)}},rotateX:{get:function(){return g(this.modelRotation.x)},set:function(E){this.modelRotation.x=h(E)}},rotateY:{get:function(){return g(this.modelRotation.y)},set:function(E){this.modelRotation.y=h(E)}},rotateZ:{get:function(){return g(this.modelRotation.z)},set:function(E){this.modelRotation.z=h(E)}}});n.exports=S},36488:n=>{var o=function(){};n.exports=o},20527:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(35154),f=r(4703);p.register("mesh",function(l,d){l===void 0&&(l={});var v=h(l,"key",null),c=h(l,"frame",null),m=u(l,"vertices",[]),g=u(l,"uvs",[]),y=u(l,"indicies",[]),x=u(l,"containsZ",!1),C=u(l,"normals",[]),S=u(l,"colors",16777215),E=u(l,"alphas",1),T=new f(this.scene,0,0,v,c,m,g,y,x,C,S,E);return d!==void 0&&(l.add=d),a(this.scene,T,l),T})},9225:(n,o,r)=>{var a=r(4703),p=r(39429);p.register("mesh",function(h,u,f,l,d,v,c,m,g,y,x){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c,m,g,y,x))})},29807:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(48833),h=r(36488),n.exports={renderWebGL:p,renderCanvas:h}},48833:(n,o,r)=>{var a=r(91296),p=function(h,u,f,l){var d=u.faces,v=d.length;if(v!==0){f.addToRenderList(u);var c=h.pipelines.set(u.pipeline,u),m=a(u,f,l).calc;h.pipelines.preBatch(u);for(var g=c.setGameObject(u),y=c.vertexViewF32,x=c.vertexViewU32,C=c.vertexCount*c.currentShader.vertexComponentCount-1,S=u.tintFill,E=[],T=u.debugCallback,P=m.a,M=m.b,w=m.c,b=m.d,I=m.e,R=m.f,A=u.viewPosition.z,L=u.hideCCW,O=f.roundPixels,F=f.alpha*u.alpha,G=0,U=0;U<v;U++){var z=d[U];z.isInView(f,L,A,F,P,M,w,b,I,R,O)&&(c.shouldFlush(3)&&(c.flush(),g=c.setGameObject(u),C=c.vertexCount*c.currentShader.vertexComponentCount-1),C=z.load(y,x,C,g,S),G++,c.vertexCount+=3,c.currentBatch.count=c.vertexCount-c.currentBatch.start,T&&E.push(z))}u.totalFrame+=G,T&&T.call(u,u,E),h.pipelines.postBatch(u)}};n.exports=p},28103:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(95643),u=r(78023),f=r(39318),l=new a({Extends:h,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Texture,p.Transform,p.Visible,u],initialize:function(v,c,m,g,y,x,C,S,E,T,P){h.call(this,v,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var M=v.textures.getFrame(g,y);this.is3Slice=!T&&!P,M&&M.scale9&&(this.is3Slice=M.is3Slice);for(var w=this.is3Slice?18:54,b=0;b<w;b++)this.vertices.push(new f);this.setPosition(c,m),this.setTexture(g,y),this.setSlices(x,C,S,E,T,P,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(d,v,c,m,g,y,x){c===void 0&&(c=10),m===void 0&&(m=10),g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=!1);var C=this.frame,S=!1;if(this.is3Slice&&x&&g!==0&&y!==0&&(S=!0),S)console.warn("Cannot change 9 slice to 3 slice");else{if(C&&C.scale9&&!x){var E=C.data.scale9Borders,T=E.x,P=E.y;c=T,m=C.width-E.w-T,g=P,y=C.height-E.h-P,d===void 0&&(d=C.width),v===void 0&&(v=C.height)}else d===void 0&&(d=256),v===void 0&&(v=256);this._width=d,this._height=v,this.leftWidth=c,this.rightWidth=m,this.topHeight=g,this.bottomHeight=y,this.is3Slice&&(v=C.height,this._height=v,this.topHeight=v,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var d=this.leftWidth,v=this.rightWidth,c=this.topHeight,m=this.bottomHeight,g=this.frame.width,y=this.frame.height;this.updateQuadUVs(0,0,0,d/g,c/y),this.updateQuadUVs(6,d/g,0,1-v/g,c/y),this.updateQuadUVs(12,1-v/g,0,1,c/y),this.is3Slice||(this.updateQuadUVs(18,0,c/y,d/g,1-m/y),this.updateQuadUVs(24,d/g,c/y,1-v/g,1-m/y),this.updateQuadUVs(30,1-v/g,c/y,1,1-m/y),this.updateQuadUVs(36,0,1-m/y,d/g,1),this.updateQuadUVs(42,d/g,1-m/y,1-v/g,1),this.updateQuadUVs(48,1-v/g,1-m/y,1,1))},updateVertices:function(){var d=this.leftWidth,v=this.rightWidth,c=this.topHeight,m=this.bottomHeight,g=this.width,y=this.height;this.updateQuad(0,-.5,.5,-.5+d/g,.5-c/y),this.updateQuad(6,-.5+d/g,.5,.5-v/g,.5-c/y),this.updateQuad(12,.5-v/g,.5,.5,.5-c/y),this.is3Slice||(this.updateQuad(18,-.5,.5-c/y,-.5+d/g,-.5+m/y),this.updateQuad(24,-.5+d/g,.5-c/y,.5-v/g,-.5+m/y),this.updateQuad(30,.5-v/g,.5-c/y,.5,-.5+m/y),this.updateQuad(36,-.5,-.5+m/y,-.5+d/g,-.5),this.updateQuad(42,-.5+d/g,-.5+m/y,.5-v/g,-.5),this.updateQuad(48,.5-v/g,-.5+m/y,.5,-.5))},updateQuad:function(d,v,c,m,g){var y=this.width,x=this.height,C=this.originX,S=this.originY,E=this.vertices;E[d+0].resize(v,c,y,x,C,S),E[d+1].resize(v,g,y,x,C,S),E[d+2].resize(m,c,y,x,C,S),E[d+3].resize(v,g,y,x,C,S),E[d+4].resize(m,g,y,x,C,S),E[d+5].resize(m,c,y,x,C,S)},updateQuadUVs:function(d,v,c,m,g){var y=this.vertices,x=this.frame,C=x.u0,S=x.v0,E=x.u1,T=x.v1;if(C!==0||E!==1){var P=E-C;v=C+v*P,m=C+m*P}if(S!==0||T!==1){var M=T-S;c=S+c*M,g=S+g*M}y[d+0].setUVs(v,c),y[d+1].setUVs(v,g),y[d+2].setUVs(m,c),y[d+3].setUVs(v,g),y[d+4].setUVs(m,g),y[d+5].setUVs(m,c)},clearTint:function(){return this.setTint(16777215),this},setTint:function(d){return d===void 0&&(d=16777215),this.tint=d,this.tintFill=!1,this},setTintFill:function(d){return this.setTint(d),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(d){this._width=Math.max(d,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(d){this.is3Slice||(this._height=Math.max(d,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(d){this.scaleX=d/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(d){this.scaleY=d/this.height}},setSize:function(d,v){this.width=d,this.height=v,this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=this.width,c.hitArea.height=this.height),this},setDisplaySize:function(d,v){return this.displayWidth=d,this.displayHeight=v,this},originX:{get:function(){return this._originX},set:function(d){this._originX=d,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(d){this._originY=d,this.updateVertices()}},setOrigin:function(d,v){return d===void 0&&(d=.5),v===void 0&&(v=d),this._originX=d,this._originY=v,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var d=this.frame.height;this._height=d,this.topHeight=d,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});n.exports=l},28279:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(35154),f=r(28103);p.register("nineslice",function(l,d){l===void 0&&(l={});var v=h(l,"key",null),c=h(l,"frame",null),m=u(l,"width",256),g=u(l,"height",256),y=u(l,"leftWidth",10),x=u(l,"rightWidth",10),C=u(l,"topHeight",0),S=u(l,"bottomHeight",0),E=new f(this.scene,0,0,v,c,m,g,y,x,C,S);return d!==void 0&&(l.add=d),a(this.scene,E,l),E})},47521:(n,o,r)=>{var a=r(28103),p=r(39429);p.register("nineslice",function(h,u,f,l,d,v,c,m,g,y){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c,m,g,y))})},78023:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(52230),n.exports={renderWebGL:p,renderCanvas:h}},52230:(n,o,r)=>{var a=r(91296),p=r(70554),h=function(u,f,l,d){var v=f.vertices,c=v.length;if(c!==0){l.addToRenderList(f);var m=u.pipelines.set(f.pipeline,f),g=a(f,l,d,!1).calc;u.pipelines.preBatch(f);var y=m.setGameObject(f),x=m.vertexViewF32,C=m.vertexViewU32,S=m.vertexCount*m.currentShader.vertexComponentCount-1,E=l.roundPixels,T=f.tintFill,P=l.alpha*f.alpha,M=p.getTintAppendFloatAlpha(f.tint,P),w=m.vertexAvailable(),b=-1;w<c&&(b=w);for(var I=0;I<c;I++){var R=v[I];I===b&&(m.flush(),y=m.setGameObject(f),S=0),x[++S]=g.getXRound(R.vx,R.vy,E),x[++S]=g.getYRound(R.vx,R.vy,E),x[++S]=R.u,x[++S]=R.v,x[++S]=y,x[++S]=T,C[++S]=M,m.vertexCount++,m.currentBatch.count=m.vertexCount-m.currentBatch.start}u.pipelines.postBatch(f)}};n.exports=h},76472:(n,o,r)=>{var a=r(83419),p=r(44777),h=r(37589),u=r(6113),f=r(91389),l=r(90664),d=new a({Extends:p,initialize:function(c){p.call(this,c,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var v=this.propertyValue,c=v,m=this.defaultEmit,g=this.defaultUpdate;if(this.method===9){this.start=v[0],this.ease=u("Linear"),this.interpolation=f("linear"),m=this.easedValueEmit,g=this.easeValueUpdate,c=v[0],this.active=!0,this.r.length=0,this.g.length=0,this.b.length=0;for(var y=0;y<v.length;y++){var x=l(v[y]);this.r.push(x.r),this.g.push(x.g),this.b.push(x.b)}}return this.onEmit=m,this.onUpdate=g,this.current=c,this},setEase:function(v){this.easeName=v,this.ease=u(v)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(v,c,m){var g=this.ease(m),y=this.interpolation(this.r,g),x=this.interpolation(this.g,g),C=this.interpolation(this.b,g),S=h(y,x,C);return this.current=S,S}});n.exports=d},44777:(n,o,r)=>{var a=r(30976),p=r(45319),h=r(83419),u=r(99472),f=r(6113),l=r(95540),d=r(91389),v=r(77720),c=r(15994),m=new h({initialize:function(y,x,C){C===void 0&&(C=!1),this.propertyKey=y,this.propertyValue=x,this.defaultValue=x,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=C,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(g,y){g===void 0&&(g={}),y&&(this.propertyKey=y),this.propertyValue=l(g,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(g){var y;switch(this.method){case 1:case 3:case 8:y=g;break;case 2:this.propertyValue.indexOf(g)>=0&&(y=g);break;case 4:var x=(this.end-this.start)/this.steps;y=v(g,x),this.counter=y;break;case 5:case 6:case 7:y=p(g,this.start,this.end);break;case 9:y=this.start[0];break}return this.current=y,this},getMethod:function(){var g=this.propertyValue;if(g===null)return 0;var y=typeof g;if(y==="number")return 1;if(Array.isArray(g))return 2;if(y==="function")return 3;if(y==="object"){if(this.hasBoth(g,"start","end"))return this.has(g,"steps")?4:5;if(this.hasBoth(g,"min","max"))return 6;if(this.has(g,"random"))return 7;if(this.hasEither(g,"onEmit","onUpdate"))return 8;if(this.hasEither(g,"values","interpolation"))return 9}return 0},setMethods:function(){var g=this.propertyValue,y=g,x=this.defaultEmit,C=this.defaultUpdate;switch(this.method){case 1:x=this.staticValueEmit;break;case 2:x=this.randomStaticValueEmit,y=g[0];break;case 3:this._onEmit=g,x=this.proxyEmit,y=this.defaultValue;break;case 4:this.start=g.start,this.end=g.end,this.steps=g.steps,this.counter=this.start,this.yoyo=this.has(g,"yoyo")?g.yoyo:!1,this.direction=0,x=this.steppedEmit,y=this.start;break;case 5:this.start=g.start,this.end=g.end;var S=this.has(g,"ease")?g.ease:"Linear";this.ease=f(S,g.easeParams),x=this.has(g,"random")&&g.random?this.randomRangedValueEmit:this.easedValueEmit,C=this.easeValueUpdate,y=this.start;break;case 6:this.start=g.min,this.end=g.max,x=this.has(g,"int")&&g.int?this.randomRangedIntEmit:this.randomRangedValueEmit,y=this.start;break;case 7:var E=g.random;Array.isArray(E)&&(this.start=E[0],this.end=E[1]),x=this.randomRangedIntEmit,y=this.start;break;case 8:this._onEmit=this.has(g,"onEmit")?g.onEmit:this.defaultEmit,this._onUpdate=this.has(g,"onUpdate")?g.onUpdate:this.defaultUpdate,x=this.proxyEmit,C=this.proxyUpdate,y=this.defaultValue;break;case 9:this.start=g.values;var T=this.has(g,"ease")?g.ease:"Linear";this.ease=f(T,g.easeParams),this.interpolation=d(g.interpolation),x=this.easedValueEmit,C=this.easeValueUpdate,y=this.start[0];break}return this.onEmit=x,this.onUpdate=C,this.current=y,this},has:function(g,y){return g.hasOwnProperty(y)},hasBoth:function(g,y,x){return g.hasOwnProperty(y)&&g.hasOwnProperty(x)},hasEither:function(g,y,x){return g.hasOwnProperty(y)||g.hasOwnProperty(x)},defaultEmit:function(){return this.defaultValue},defaultUpdate:function(g,y,x,C){return C},proxyEmit:function(g,y,x){var C=this._onEmit(g,y,x);return this.current=C,C},proxyUpdate:function(g,y,x,C){var S=this._onUpdate(g,y,x,C);return this.current=S,S},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var g=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[g],this.current},randomRangedValueEmit:function(g,y){var x=u(this.start,this.end);return g&&g.data[y]&&(g.data[y].min=x,g.data[y].max=this.end),this.current=x,x},randomRangedIntEmit:function(g,y){var x=a(this.start,this.end);return g&&g.data[y]&&(g.data[y].min=x,g.data[y].max=this.end),this.current=x,x},steppedEmit:function(){var g=this.counter,y=g,x=(this.end-this.start)/this.steps;if(this.yoyo){var C;this.direction===0?(y+=x,y>=this.end&&(C=y-this.end,y=this.end-C,this.direction=1)):(y-=x,y<=this.start&&(C=this.start-y,y=this.start+C,this.direction=0)),this.counter=y}else this.counter=c(y+x,this.start,this.end);return this.current=g,g},easedValueEmit:function(g,y){if(g&&g.data[y]){var x=g.data[y];x.min=this.start,x.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(g,y,x){var C=g.data[y],S,E=this.ease(x);return this.interpolation?S=this.interpolation(this.start,E):S=(C.max-C.min)*E+C.min,this.current=S,S},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});n.exports=m},24502:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(20286),u=new a({Extends:h,initialize:function(l,d,v,c,m){if(typeof l=="object"){var g=l;l=p(g,"x",0),d=p(g,"y",0),v=p(g,"power",0),c=p(g,"epsilon",100),m=p(g,"gravity",50)}else l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=100),m===void 0&&(m=50);h.call(this,l,d,!0),this._gravity=m,this._power=v*m,this._epsilon=c*c},update:function(f,l){var d=this.x-f.x,v=this.y-f.y,c=d*d+v*v;if(c!==0){var m=Math.sqrt(c);c<this._epsilon&&(c=this._epsilon);var g=this._power*l/(c*m)*100;f.velocityX+=d*g,f.velocityY+=v*g}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(f){this._epsilon=f*f}},power:{get:function(){return this._power/this._gravity},set:function(f){this._power=f*this._gravity}},gravity:{get:function(){return this._gravity},set:function(f){var l=this.power;this._gravity=f,this.power=l}}});n.exports=u},56480:(n,o,r)=>{var a=r(9674),p=r(45319),h=r(83419),u=r(39506),f=r(87841),l=r(11520),d=r(26099),v=new h({initialize:function(m){this.emitter=m,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new d,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=m.scene,this.anims=null,this.emitter.anims.length>0&&(this.anims=new a(this)),this.bounds=new f},emit:function(c,m,g,y,x,C){return this.emitter.emit(c,m,g,y,x,C)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(c,m){c===void 0&&(c=0),m===void 0&&(m=0),this.x=c,this.y=m},fire:function(c,m){var g=this.emitter,y=g.ops,x=g.getAnim();if(x?this.anims.play(x):(this.frame=g.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(g.getEmitZone(this),c===void 0?this.x+=y.x.onEmit(this,"x"):y.x.steps>0?this.x+=c+y.x.onEmit(this,"x"):this.x+=c,m===void 0?this.y+=y.y.onEmit(this,"y"):y.y.steps>0?this.y+=m+y.y.onEmit(this,"y"):this.y+=m,this.life=y.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=y.delay.onEmit(this,"delay"),this.holdCurrent=y.hold.onEmit(this,"hold"),this.scaleX=y.scaleX.onEmit(this,"scaleX"),this.scaleY=y.scaleY.active?y.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=y.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),g.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&g.getDeathZone(this))return this.lifeCurrent=0,!1;var C=y.speedX.onEmit(this,"speedX"),S=y.speedY.active?y.speedY.onEmit(this,"speedY"):C;if(g.radial){var E=u(y.angle.onEmit(this,"angle"));this.velocityX=Math.cos(E)*Math.abs(C),this.velocityY=Math.sin(E)*Math.abs(S)}else if(g.moveTo){var T=y.moveToX.onEmit(this,"moveToX"),P=y.moveToY.onEmit(this,"moveToY"),M=this.life/1e3;this.velocityX=(T-this.x)/M,this.velocityY=(P-this.y)/M}else this.velocityX=C,this.velocityY=S;return g.acceleration&&(this.accelerationX=y.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=y.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=y.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=y.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=y.bounce.onEmit(this,"bounce"),this.alpha=y.alpha.onEmit(this,"alpha"),y.color.active?this.tint=y.color.onEmit(this,"tint"):this.tint=y.tint.onEmit(this,"tint"),!0},update:function(c,m,g){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=c,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=c,!1;this.anims&&this.anims.update(0,c);var y=this.emitter,x=y.ops,C=1-this.lifeCurrent/this.life;if(this.lifeT=C,this.x=x.x.onUpdate(this,"x",C,this.x),this.y=x.y.onUpdate(this,"y",C,this.y),y.moveTo){var S=x.moveToX.onUpdate(this,"moveToX",C,y.moveToX),E=x.moveToY.onUpdate(this,"moveToY",C,y.moveToY),T=this.lifeCurrent/1e3;this.velocityX=(S-this.x)/T,this.velocityY=(E-this.y)/T}return this.computeVelocity(y,c,m,g,C),this.scaleX=x.scaleX.onUpdate(this,"scaleX",C,this.scaleX),x.scaleY.active?this.scaleY=x.scaleY.onUpdate(this,"scaleY",C,this.scaleY):this.scaleY=this.scaleX,this.angle=x.rotate.onUpdate(this,"rotate",C,this.angle),this.rotation=u(this.angle),y.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=p(x.alpha.onUpdate(this,"alpha",C,this.alpha),0,1),x.color.active?this.tint=x.color.onUpdate(this,"color",C,this.tint):this.tint=x.tint.onUpdate(this,"tint",C,this.tint),this.lifeCurrent-=c,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(c,m,g,y,x){var C=c.ops,S=this.velocityX,E=this.velocityY,T=C.accelerationX.onUpdate(this,"accelerationX",x,this.accelerationX),P=C.accelerationY.onUpdate(this,"accelerationY",x,this.accelerationY),M=C.maxVelocityX.onUpdate(this,"maxVelocityX",x,this.maxVelocityX),w=C.maxVelocityY.onUpdate(this,"maxVelocityY",x,this.maxVelocityY);this.bounce=C.bounce.onUpdate(this,"bounce",x,this.bounce),S+=c.gravityX*g+T*g,E+=c.gravityY*g+P*g,S=p(S,-M,M),E=p(E,-w,w),this.velocityX=S,this.velocityY=E,this.x+=S*g,this.y+=E*g,c.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var b=0;b<y.length;b++){var I=y[b];I.active&&I.update(this,m,g,x)}},setSizeToFrame:function(){},getBounds:function(c){c===void 0&&(c=this.emitter.getWorldTransformMatrix());var m=Math.abs(c.scaleX)*this.scaleX,g=Math.abs(c.scaleY)*this.scaleY,y=this.x,x=this.y,C=this.rotation,S=this.frame.width*m/2,E=this.frame.height*g/2,T=this.bounds,P=new d(y-S,x-E),M=new d(y+S,x-E),w=new d(y-S,x+E),b=new d(y+S,x+E);return C!==0&&(l(P,y,x,C),l(M,y,x,C),l(w,y,x,C),l(b,y,x,C)),c.transformPoint(P.x,P.y,P),c.transformPoint(M.x,M.y,M),c.transformPoint(w.x,w.y,w),c.transformPoint(b.x,b.y,b),T.x=Math.min(P.x,M.x,w.x,b.x),T.y=Math.min(P.y,M.y,w.y,b.y),T.width=Math.max(P.x,M.x,w.x,b.x)-T.x,T.height=Math.max(P.y,M.y,w.y,b.y)-T.y,T},destroy:function(){this.anims&&this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});n.exports=v},69601:(n,o,r)=>{var a=r(83419),p=r(20286),h=r(87841),u=new a({Extends:p,initialize:function(l,d,v,c,m,g,y,x){m===void 0&&(m=!0),g===void 0&&(g=!0),y===void 0&&(y=!0),x===void 0&&(x=!0),p.call(this,l,d,!0),this.bounds=new h(l,d,v,c),this.collideLeft=m,this.collideRight=g,this.collideTop=y,this.collideBottom=x},update:function(f){var l=this.bounds,d=-f.bounce,v=f.worldPosition;v.x<l.x&&this.collideLeft?(f.x+=l.x-v.x,f.velocityX*=d):v.x>l.right&&this.collideRight&&(f.x-=v.x-l.right,f.velocityX*=d),v.y<l.y&&this.collideTop?(f.y+=l.y-v.y,f.velocityY*=d):v.y>l.bottom&&this.collideBottom&&(f.y-=v.y-l.bottom,f.velocityY*=d)}});n.exports=u},31600:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(53774),u=r(43459),f=r(26388),l=r(19909),d=r(76472),v=r(44777),c=r(20696),m=r(95643),g=r(95540),y=r(26546),x=r(24502),C=r(69036),S=r(1985),E=r(97022),T=r(86091),P=r(73162),M=r(20074),w=r(269),b=r(56480),I=r(69601),R=r(68875),A=r(87841),L=r(59996),O=r(72905),F=r(90668),G=r(19186),U=r(61340),z=r(26099),N=r(15994),k=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],D=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],V=new a({Extends:m,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Texture,p.Transform,p.Visible,F],initialize:function(W,H,Y,X,$){m.call(this,W,"ParticleEmitter"),this.particleClass=b,this.config=null,this.ops={accelerationX:new v("accelerationX",0),accelerationY:new v("accelerationY",0),alpha:new v("alpha",1),angle:new v("angle",{min:0,max:360},!0),bounce:new v("bounce",0),color:new d("color"),delay:new v("delay",0,!0),hold:new v("hold",0,!0),lifespan:new v("lifespan",1e3,!0),maxVelocityX:new v("maxVelocityX",1e4),maxVelocityY:new v("maxVelocityY",1e4),moveToX:new v("moveToX",0),moveToY:new v("moveToY",0),quantity:new v("quantity",1,!0),rotate:new v("rotate",0),scaleX:new v("scaleX",1),scaleY:new v("scaleY",1),speedX:new v("speedX",0,!0),speedY:new v("speedY",0,!0),tint:new v("tint",16777215),x:new v("x",0),y:new v("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new z,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new U,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new P(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(H,Y),this.setTexture(X),$&&this.setConfig($)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(B){if(!B)return this;this.config=B;var W=0,H="",Y=this.ops;for(W=0;W<D.length;W++)H=D[W],Y[H].loadConfig(B);for(W=0;W<k.length;W++)H=k[W],E(B,H)&&(this[H]=g(B,H));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=C(B,["moveToX","moveToY"]),E(B,"speed")&&(Y.speedX.loadConfig(B,"speed"),Y.speedY.active=!1),(S(B,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),E(B,"scale")&&(Y.scaleX.loadConfig(B,"scale"),Y.scaleY.active=!1),E(B,"callbackScope")){var X=g(B,"callbackScope",null);this.emitCallbackScope=X,this.deathCallbackScope=X}if(E(B,"emitZone")&&this.addEmitZone(B.emitZone),E(B,"deathZone")&&this.addDeathZone(B.deathZone),E(B,"bounds")){var $=this.addParticleBounds(B.bounds);$.collideLeft=g(B,"collideLeft",!0),$.collideRight=g(B,"collideRight",!0),$.collideTop=g(B,"collideTop",!0),$.collideBottom=g(B,"collideBottom",!0)}return E(B,"followOffset")&&this.followOffset.setFromObject(g(B,"followOffset",0)),E(B,"texture")&&this.setTexture(B.texture),E(B,"frame")?this.setEmitterFrame(B.frame):E(B,"anim")&&this.setAnim(B.anim),E(B,"reserve")&&this.reserve(B.reserve),E(B,"advance")&&this.fastForward(B.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(c.START,this),this},updateConfig:function(B){return B&&(this.config?this.setConfig(w(this.config,B)):this.setConfig(B)),this},toJSON:function(){var B=h(this),W=0,H="";for(W=0;W<k.length;W++)H=k[W],B[H]=this[H];var Y=this.ops;for(W=0;W<D.length;W++)H=D[W],Y[H]&&(B[H]=Y[H].toJSON());return Y.speedY.active||(delete B.speedX,B.speed=Y.speedX.toJSON()),this.scaleX===this.scaleY&&(delete B.scaleX,delete B.scaleY,B.scale=Y.scaleX.toJSON()),B},resetCounters:function(B,W){var H=this.counters;H.fill(0),H[0]=B,W&&(H[5]=1)},startFollow:function(B,W,H,Y){return W===void 0&&(W=0),H===void 0&&(H=0),Y===void 0&&(Y=!1),this.follow=B,this.followOffset.set(W,H),this.trackVisible=Y,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var B=this.frames,W=B.length,H;return W===1?H=B[0]:this.randomFrame?H=y(B):(H=B[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===W&&(this.currentFrame=0))),this.texture.get(H)},setEmitterFrame:function(B,W,H){W===void 0&&(W=!0),H===void 0&&(H=1),this.randomFrame=W,this.frameQuantity=H,this.currentFrame=0;var Y=typeof B;if(this.frames.length=0,Array.isArray(B))this.frames=this.frames.concat(B);else if(Y==="string"||Y==="number")this.frames.push(B);else if(Y==="object"){var X=B;B=g(X,"frames",null),B&&(this.frames=this.frames.concat(B));var $=g(X,"cycle",!1);this.randomFrame=!$,this.frameQuantity=g(X,"quantity",H)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var B=this.anims,W=B.length;if(W===0)return null;if(W===1)return B[0];if(this.randomAnim)return y(B);var H=B[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=N(this.currentAnim+1,0,W)),H},setAnim:function(B,W,H){W===void 0&&(W=!0),H===void 0&&(H=1),this.randomAnim=W,this.animQuantity=H,this.currentAnim=0;var Y=typeof B;if(this.anims.length=0,Array.isArray(B))this.anims=this.anims.concat(B);else if(Y==="string")this.anims.push(B);else if(Y==="object"){var X=B;B=g(X,"anims",null),B&&(this.anims=this.anims.concat(B));var $=g(X,"cycle",!1);this.randomAnim=!$,this.animQuantity=g(X,"quantity",H)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(B){return B===void 0&&(B=!0),this.radial=B,this},addParticleBounds:function(B,W,H,Y,X,$,J,q){if(typeof B=="object"){var Q=B;B=Q.x,W=Q.y,H=E(Q,"w")?Q.w:Q.width,Y=E(Q,"h")?Q.h:Q.height}return this.addParticleProcessor(new I(B,W,H,Y,X,$,J,q))},setParticleSpeed:function(B,W){return W===void 0&&(W=B),this.ops.speedX.onChange(B),B===W?this.ops.speedY.active=!1:this.ops.speedY.onChange(W),this.radial=!0,this},setParticleScale:function(B,W){return B===void 0&&(B=1),W===void 0&&(W=B),this.ops.scaleX.onChange(B),this.ops.scaleY.onChange(W),this},setParticleGravity:function(B,W){return this.gravityX=B,this.gravityY=W,this},setParticleAlpha:function(B){return this.ops.alpha.onChange(B),this},setParticleTint:function(B){return this.ops.tint.onChange(B),this},setEmitterAngle:function(B){return this.ops.angle.onChange(B),this},setParticleLifespan:function(B){return this.ops.lifespan.onChange(B),this},setQuantity:function(B){return this.quantity=B,this},setFrequency:function(B,W){return this.frequency=B,this.flowCounter=B>0?B:0,W&&(this.quantity=W),this},addDeathZone:function(B){Array.isArray(B)||(B=[B]);for(var W,H=[],Y=0;Y<B.length;Y++)if(W=B[Y],W instanceof f)H.push(W);else if(typeof W.contains=="function")W=new f(W,!0),H.push(W);else{var X=g(W,"type","onEnter"),$=g(W,"source",null);if($&&typeof $.contains=="function"){var J=X==="onEnter";W=new f($,J),H.push(W)}}return this.deathZones=this.deathZones.concat(H),H},removeDeathZone:function(B){return O(this.deathZones,B),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(B){Array.isArray(B)||(B=[B]);for(var W,H=[],Y=0;Y<B.length;Y++)if(W=B[Y],W instanceof R||W instanceof l)H.push(W);else{var X=g(W,"source",null);if(X){var $=g(W,"type","random");if($==="random"&&typeof X.getRandomPoint=="function")W=new R(X),H.push(W);else if($==="edge"&&typeof X.getPoints=="function"){var J=g(W,"quantity",1),q=g(W,"stepRate",0),Q=g(W,"yoyo",!1),tt=g(W,"seamless",!0),rt=g(W,"total",-1);W=new l(X,J,q,Q,tt,rt),H.push(W)}}}return this.emitZones=this.emitZones.concat(H),H},removeEmitZone:function(B){return O(this.emitZones,B),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(B){var W=this.emitZones,H=W.length;if(H!==0){var Y=W[this.zoneIndex];Y.getPoint(B),Y.total>-1&&(this.zoneTotal++,this.zoneTotal===Y.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===H&&(this.zoneIndex=0)))}},getDeathZone:function(B){for(var W=this.deathZones,H=0;H<W.length;H++){var Y=W[H];if(Y.willKill(B))return this.emit(c.DEATH_ZONE,this,B,Y),!0}return!1},setEmitZone:function(B){var W;return isFinite(B)?W=B:W=this.emitZones.indexOf(B),W>=0&&(this.zoneIndex=W),this},addParticleProcessor:function(B){return this.processors.exists(B)||(B.emitter&&B.emitter.removeParticleProcessor(B),this.processors.add(B),B.emitter=this),B},removeParticleProcessor:function(B){return this.processors.exists(B)&&(this.processors.remove(B,!0),B.emitter=null),B},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(B){return this.addParticleProcessor(new x(B))},reserve:function(B){var W=this.dead;if(this.maxParticles>0){var H=this.getParticleCount();H+B>this.maxParticles&&(B=this.maxParticles-(H+B))}for(var Y=0;Y<B;Y++)W.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(B,W){return B===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof B=="function"&&(this.emitCallback=B,W&&(this.emitCallbackScope=W)),this},onParticleDeath:function(B,W){return B===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof B=="function"&&(this.deathCallback=B,W&&(this.deathCallbackScope=W)),this},killAll:function(){for(var B=this.dead,W=this.alive;W.length>0;)B.push(W.pop());return this},forEachAlive:function(B,W){for(var H=this.alive,Y=H.length,X=0;X<Y;X++)B.call(W,H[X],this);return this},forEachDead:function(B,W){for(var H=this.dead,Y=H.length,X=0;X<Y;X++)B.call(W,H[X],this);return this},start:function(B,W){return B===void 0&&(B=0),this.emitting||(B>0&&this.fastForward(B),this.emitting=!0,this.resetCounters(this.frequency,!0),W!==void 0&&(this.duration=Math.abs(W)),this.emit(c.START,this)),this},stop:function(B){return B===void 0&&(B=!1),this.emitting&&(this.emitting=!1,B&&this.killAll(),this.emit(c.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(B,W){return B===void 0&&(B=""),W===void 0&&(W=this.true),this.sortProperty=B,this.sortOrderAsc=W,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(B){return this.sortProperty!==""?B=this.depthSortCallback:B=null,this.sortCallback=B,this},depthSort:function(){return G(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(B,W){var H=this.sortProperty;return this.sortOrderAsc?B[H]-W[H]:W[H]-B[H]},flow:function(B,W,H){return W===void 0&&(W=1),this.emitting=!1,this.frequency=B,this.quantity=W,H!==void 0&&(this.stopAfter=H),this.start()},explode:function(B,W,H){this.frequency=-1,this.resetCounters(-1,!0);var Y=this.emitParticle(B,W,H);return this.emit(c.EXPLODE,this,Y),Y},emitParticleAt:function(B,W,H){return this.emitParticle(H,B,W)},emitParticle:function(B,W,H){if(!this.atLimit()){B===void 0&&(B=this.ops.quantity.onEmit());for(var Y=this.dead,X=this.stopAfter,$=this.follow?this.follow.x+this.followOffset.x:W,J=this.follow?this.follow.y+this.followOffset.y:H,q=0;q<B;q++){var Q=Y.pop();if(Q||(Q=new this.particleClass(this)),Q.fire($,J)?(this.particleBringToTop?this.alive.push(Q):this.alive.unshift(Q),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,Q,this)):this.dead.push(Q),X>0&&(this.stopCounter++,this.stopCounter>=X)||this.atLimit())break}return Q}},fastForward:function(B,W){W===void 0&&(W=1e3/60);var H=0;for(this.skipping=!0;H<Math.abs(B);)this.preUpdate(0,W),H+=W;return this.skipping=!1,this},preUpdate:function(B,W){W*=this.timeScale;var H=W/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var Y=this.getProcessors(),X=this.alive,$=this.dead,J=0,q=[],Q=X.length;for(J=0;J<Q;J++){var tt=X[J];tt.update(W,H,Y)&&q.push({index:J,particle:tt})}if(Q=q.length,Q>0){var rt=this.deathCallback,et=this.deathCallbackScope;for(J=Q-1;J>=0;J--){var ot=q[J];X.splice(ot.index,1),$.push(ot.particle),rt&&rt.call(et,ot.particle),ot.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&X.length===0&&(this.completeFlag=0,this.emit(c.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=W;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=W,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(B){for(var W=this.getWorldTransformMatrix(),H=this.alive,Y=H.length,X=[],$=0;$<Y;$++){var J=H[$];L(B,J.getBounds(W))&&X.push(J)}return X},getBounds:function(B,W,H,Y){B===void 0&&(B=0),W===void 0&&(W=0),H===void 0&&(H=1e3/60),Y===void 0&&(Y=new A);var X=this.getWorldTransformMatrix(),$,J,q=this.alive,Q=!1;if(Y.setTo(0,0,0,0),W>0){var tt=0;for(this.skipping=!0;tt<Math.abs(W);){for(this.preUpdate(0,H),$=0;$<q.length;$++)J=q[$].getBounds(X),Q?M(Y,J):(Q=!0,u(J,Y));tt+=H}this.skipping=!1}else for($=0;$<q.length;$++)J=q[$].getBounds(X),Q?M(Y,J):(Q=!0,u(J,Y));return B>0&&T(Y,B,B),Y},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(B){this.ops.x.onChange(B)}},particleY:{get:function(){return this.ops.y.current},set:function(B){this.ops.y.onChange(B)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(B){this.ops.accelerationX.onChange(B)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(B){this.ops.accelerationY.onChange(B)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(B){this.ops.maxVelocityX.onChange(B)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(B){this.ops.maxVelocityY.onChange(B)}},speed:{get:function(){return this.ops.speedX.current},set:function(B){this.ops.speedX.onChange(B),this.ops.speedY.onChange(B)}},speedX:{get:function(){return this.ops.speedX.current},set:function(B){this.ops.speedX.onChange(B)}},speedY:{get:function(){return this.ops.speedY.current},set:function(B){this.ops.speedY.onChange(B)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(B){this.ops.moveToX.onChange(B)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(B){this.ops.moveToY.onChange(B)}},bounce:{get:function(){return this.ops.bounce.current},set:function(B){this.ops.bounce.onChange(B)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(B){this.ops.scaleX.onChange(B)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(B){this.ops.scaleY.onChange(B)}},particleColor:{get:function(){return this.ops.color.current},set:function(B){this.ops.color.onChange(B)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(B){this.ops.color.setEase(B)}},particleTint:{get:function(){return this.ops.tint.current},set:function(B){this.ops.tint.onChange(B)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(B){this.ops.alpha.onChange(B)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(B){this.ops.lifespan.onChange(B)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(B){this.ops.angle.onChange(B)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(B){this.ops.rotate.onChange(B)}},quantity:{get:function(){return this.ops.quantity.current},set:function(B){this.ops.quantity.onChange(B)}},delay:{get:function(){return this.ops.delay.current},set:function(B){this.ops.delay.onChange(B)}},hold:{get:function(){return this.ops.hold.current},set:function(B){this.ops.hold.onChange(B)}},flowCounter:{get:function(){return this.counters[0]},set:function(B){this.counters[0]=B}},frameCounter:{get:function(){return this.counters[1]},set:function(B){this.counters[1]=B}},animCounter:{get:function(){return this.counters[2]},set:function(B){this.counters[2]=B}},elapsed:{get:function(){return this.counters[3]},set:function(B){this.counters[3]=B}},stopCounter:{get:function(){return this.counters[4]},set:function(B){this.counters[4]=B}},completeFlag:{get:function(){return this.counters[5]},set:function(B){this.counters[5]=B}},zoneIndex:{get:function(){return this.counters[6]},set:function(B){this.counters[6]=B}},zoneTotal:{get:function(){return this.counters[7]},set:function(B){this.counters[7]=B}},currentFrame:{get:function(){return this.counters[8]},set:function(B){this.counters[8]=B}},currentAnim:{get:function(){return this.counters[9]},set:function(B){this.counters[9]=B}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var B,W=this.ops;for(B=0;B<D.length;B++){var H=D[B];W[H].destroy()}for(B=0;B<this.alive.length;B++)this.alive[B].destroy();for(B=0;B<this.dead.length;B++)this.dead[B].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});n.exports=V},9871:(n,o,r)=>{var a=r(59996),p=r(61340),h=new p,u=new p,f=new p,l=new p,d=function(v,c,m,g){var y=h,x=u,C=f,S=l;g?(S.loadIdentity(),S.multiply(g),S.translate(c.x,c.y),S.rotate(c.rotation),S.scale(c.scaleX,c.scaleY)):S.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY);var E=v.currentContext,T=m.roundPixels,P=m.alpha,M=c.alpha,w=c.alive,b=w.length,I=c.viewBounds;if(!(!c.visible||b===0||I&&!a(I,m.worldView))){c.sortCallback&&c.depthSort(),m.addToRenderList(c);var R=c.scrollFactorX,A=c.scrollFactorY;E.save(),E.globalCompositeOperation=v.blendModes[c.blendMode];for(var L=0;L<b;L++){var O=w[L],F=O.alpha*M*P;if(!(F<=0||O.scaleX===0||O.scaleY===0)){C.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),y.copyFrom(m.matrix),y.multiplyWithOffset(S,-m.scrollX*R,-m.scrollY*A),C.e=O.x,C.f=O.y,y.multiply(C,x);var G=O.frame,U=G.canvasData;if(U.width>0&&U.height>0){var z=-G.halfWidth,N=-G.halfHeight;E.globalAlpha=F,E.save(),x.setToContext(E),T&&(z=Math.round(z),N=Math.round(N)),E.imageSmoothingEnabled=!G.source.scaleMode,E.drawImage(G.source.image,U.x,U.y,U.width,U.height,z,N,U.width,U.height),E.restore()}}}E.restore()}};n.exports=d},92730:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(95540),f=r(31600);p.register("particles",function(l,d){l===void 0&&(l={});var v=h(l,"key",null),c=u(l,"config",null),m=new f(this.scene,0,0,v);return d!==void 0&&(l.add=d),a(this.scene,m,l),c&&m.setConfig(c),m})},676:(n,o,r)=>{var a=r(39429),p=r(31600);a.register("particles",function(h,u,f,l){return h!==void 0&&typeof h=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new p(this.scene,h,u,f,l))})},90668:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(21188),h=r(9871),n.exports={renderWebGL:p,renderCanvas:h}},21188:(n,o,r)=>{var a=r(59996),p=r(61340),h=r(70554),u=new p,f=new p,l=new p,d=new p,v=function(c,m,g,y){var x=c.pipelines.set(m.pipeline),C=u,S=f,E=l,T=d;y?(T.loadIdentity(),T.multiply(y),T.translate(m.x,m.y),T.rotate(m.rotation),T.scale(m.scaleX,m.scaleY)):T.applyITRS(m.x,m.y,m.rotation,m.scaleX,m.scaleY);var P=h.getTintAppendFloatAlpha,M=g.alpha,w=m.alpha;c.pipelines.preBatch(m);var b=m.alive,I=b.length,R=m.viewBounds;if(!(I===0||R&&!a(R,g.worldView))){m.sortCallback&&m.depthSort(),g.addToRenderList(m),C.copyFrom(g.matrix),C.multiplyWithOffset(T,-g.scrollX*m.scrollFactorX,-g.scrollY*m.scrollFactorY),c.setBlendMode(m.blendMode),m.mask&&(m.mask.preRenderWebGL(c,m,g),c.pipelines.set(m.pipeline));for(var A=m.tintFill,L,O,F=0;F<I;F++){var G=b[F],U=G.alpha*w*M;if(!(U<=0||G.scaleX===0||G.scaleY===0)){E.applyITRS(G.x,G.y,G.rotation,G.scaleX,G.scaleY),E.e=G.x,E.f=G.y,C.multiply(E,S);var z=G.frame;z.glTexture!==O&&(O=z.glTexture,L=x.setGameObject(m,z));var N=-z.halfWidth,k=-z.halfHeight,D=S.setQuad(N,k,N+z.width,k+z.height),V=P(G.tint,U);x.shouldFlush(6)&&(x.flush(),L=x.setGameObject(m,z)),x.batchQuad(m,D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7],z.u0,z.v0,z.u1,z.v1,V,V,V,V,A,O,L)}}m.mask&&m.mask.postRenderWebGL(c,g),c.pipelines.postBatch(m)}};n.exports=v},20286:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l){u===void 0&&(u=0),f===void 0&&(f=0),l===void 0&&(l=!0),this.emitter,this.x=u,this.y=f,this.active=l},update:function(){},destroy:function(){this.emitter=null}});n.exports=p},9774:n=>{n.exports="complete"},812:n=>{n.exports="deathzone"},30522:n=>{n.exports="explode"},96695:n=>{n.exports="start"},18677:n=>{n.exports="stop"},20696:(n,o,r)=>{n.exports={COMPLETE:r(9774),DEATH_ZONE:r(812),EXPLODE:r(30522),START:r(96695),STOP:r(18677)}},18404:(n,o,r)=>{n.exports={EmitterColorOp:r(76472),EmitterOp:r(44777),Events:r(20696),GravityWell:r(24502),Particle:r(56480),ParticleBounds:r(69601),ParticleEmitter:r(31600),ParticleProcessor:r(20286),Zones:r(21024)}},26388:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f){this.source=u,this.killOnEnter=f},willKill:function(h){var u=h.worldPosition,f=this.source.contains(u.x,u.y);return f&&this.killOnEnter||!f&&!this.killOnEnter}});n.exports=p},19909:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d,v,c){d===void 0&&(d=!1),v===void 0&&(v=!0),c===void 0&&(c=-1),this.source=u,this.points=[],this.quantity=f,this.stepRate=l,this.yoyo=d,this.counter=-1,this.seamless=v,this._length=0,this._direction=0,this.total=c,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var h=this.points[0],u=this.points[this.points.length-1];h.x===u.x&&h.y===u.y&&this.points.pop()}var f=this._length;return this._length=this.points.length,this._length<f&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(h){return this.source=h,this.updateSource()},getPoint:function(h){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var u=this.points[this.counter];u&&(h.x=u.x,h.y=u.y)}});n.exports=p},68875:(n,o,r)=>{var a=r(83419),p=r(26099),h=new a({initialize:function(f){this.source=f,this._tempVec=new p,this.total=-1},getPoint:function(u){var f=this._tempVec;this.source.getRandomPoint(f),u.x=f.x,u.y=f.y}});n.exports=h},21024:(n,o,r)=>{n.exports={DeathZone:r(26388),EdgeZone:r(19909),RandomZone:r(68875)}},1159:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(68287),u=new a({Extends:h,Mixins:[p.PathFollower],initialize:function(l,d,v,c,m,g){h.call(this,l,v,c,m,g),this.path=d},preUpdate:function(f,l){this.anims.update(f,l),this.pathUpdate(f)}});n.exports=u},90145:(n,o,r)=>{var a=r(39429),p=r(1159);a.register("follower",function(h,u,f,l,d){var v=new p(this.scene,h,u,f,l,d);return this.displayList.add(v),this.updateList.add(v),v})},33663:(n,o,r)=>{var a=r(9674),p=r(83419),h=r(48803),u=r(90664),f=r(4703),l=r(45650),d=new p({Extends:f,initialize:function(c,m,g,y,x,C,S,E){y||(y="__DEFAULT"),f.call(this,c,m,g,y,x),this.type="Plane",this.anims=new a(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(C,S,E),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(v,c,m){v===void 0&&(v=8),c===void 0&&(c=8),m===void 0&&(m=!1);var g=!1;return m&&(g=!0),this.gridWidth=v,this.gridHeight=c,this.isTiled=m,this.clear(),h({mesh:this,widthSegments:v,heightSegments:c,isOrtho:!1,tile:m,flipY:g}),this},setSizeToFrame:function(v){v===void 0&&(v=!0);var c=this.frame;if(this.setPerspective(this.width/c.width,this.height/c.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!v)return this;var m=this.gridWidth,g=this.gridHeight,y=this.vertices,x=c.u0,C=c.u1,S=c.v0,E=c.v1,T,P,M=0;if(this.isTiled)for(S=c.v1,E=c.v0,P=0;P<g;P++)for(T=0;T<m;T++)y[M++].setUVs(x,E),y[M++].setUVs(x,S),y[M++].setUVs(C,E),y[M++].setUVs(x,S),y[M++].setUVs(C,S),y[M++].setUVs(C,E);else{var w=m+1,b=g+1,I=C-x,R=E-S,A=[];for(P=0;P<b;P++)for(T=0;T<w;T++){var L=x+I*(T/m),O=S+R*(P/g);A.push(L,O)}for(P=0;P<g;P++)for(T=0;T<m;T++){var F=(T+w*P)*2,G=(T+w*(P+1))*2,U=(T+1+w*(P+1))*2,z=(T+1+w*P)*2;y[M++].setUVs(A[F],A[F+1]),y[M++].setUVs(A[G],A[G+1]),y[M++].setUVs(A[z],A[z+1]),y[M++].setUVs(A[G],A[G+1]),y[M++].setUVs(A[U],A[U+1]),y[M++].setUVs(A[z],A[z+1])}}return this},setViewHeight:function(v){v===void 0&&(v=this.frame.height);var c=this.fov*(Math.PI/180);this.viewPosition.z=this.height/v/Math.tan(c/2),this.dirtyCache[10]=1},createCheckerboard:function(v,c,m,g,y){v===void 0&&(v=16777215),c===void 0&&(c=255),m===void 0&&(m=255),g===void 0&&(g=255),y===void 0&&(y=128);for(var x=u(v),C=u(c),S=[],E=0;E<16;E++)for(var T=0;T<16;T++)E<8&&T<8||E>7&&T>7?S.push(x.r,x.g,x.b,m):S.push(C.r,C.g,C.b,g);var P=this.scene.sys.textures.addUint8Array(l(),new Uint8Array(S),16,16);return this.removeCheckerboard(),this.setTexture(P),this.setSizeToFrame(),this.setViewHeight(y),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(v,c){return this.anims.play(v,c)},playReverse:function(v,c){return this.anims.playReverse(v,c)},playAfterDelay:function(v,c){return this.anims.playAfterDelay(v,c)},playAfterRepeat:function(v,c){return this.anims.playAfterRepeat(v,c)},stop:function(){return this.anims.stop()},stopAfterDelay:function(v){return this.anims.stopAfterDelay(v)},stopAfterRepeat:function(v){return this.anims.stopAfterRepeat(v)},stopOnFrame:function(v){return this.anims.stopOnFrame(v)},preUpdate:function(v,c){f.prototype.preUpdate.call(this,v,c),this.anims.update(v,c)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});n.exports=d},56015:(n,o,r)=>{var a=r(25305),p=r(13059),h=r(44603),u=r(23568),f=r(35154),l=r(33663);h.register("plane",function(d,v){d===void 0&&(d={});var c=u(d,"key",null),m=u(d,"frame",null),g=f(d,"width",8),y=f(d,"height",8),x=f(d,"tile",!1),C=new l(this.scene,0,0,c,m,g,y,x);v!==void 0&&(d.add=v);var S=f(d,"checkerboard",null);if(S){var E=f(S,"color1",16777215),T=f(S,"color2",255),P=f(S,"alpha1",255),M=f(S,"alpha2",255),w=f(S,"height",128);C.createCheckerboard(E,T,P,M,w)}return a(this.scene,C,d),p(C,d),C})},30985:(n,o,r)=>{var a=r(33663),p=r(39429);p.register("plane",function(h,u,f,l,d,v,c){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c))})},80321:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(95643),u=r(30100),f=r(36060),l=r(67277),d=new a({Extends:h,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.Mask,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Transform,p.Visible,l],initialize:function(c,m,g,y,x,C,S){y===void 0&&(y=16777215),x===void 0&&(x=128),C===void 0&&(C=1),S===void 0&&(S=.1),h.call(this,c,"PointLight"),this.initPipeline(f.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(m,g),this.color=u(y),this.intensity=C,this.attenuation=S,this.width=x*2,this.height=x*2,this._radius=x},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this.width=v*2,this.height=v*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});n.exports=d},39829:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(80321);p.register("pointlight",function(f,l){f===void 0&&(f={});var d=h(f,"color",16777215),v=h(f,"radius",128),c=h(f,"intensity",1),m=h(f,"attenuation",.1),g=new u(this.scene,0,0,d,v,c,m);return l!==void 0&&(f.add=l),a(this.scene,g,f),g})},71255:(n,o,r)=>{var a=r(39429),p=r(80321);a.register("pointlight",function(h,u,f,l,d,v){return this.displayList.add(new p(this.scene,h,u,f,l,d,v))})},67277:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(57787),n.exports={renderWebGL:p,renderCanvas:h}},57787:(n,o,r)=>{var a=r(91296),p=function(h,u,f,l){f.addToRenderList(u);var d=h.pipelines.set(u.pipeline),v=a(u,f,l).calc,c=u.width,m=u.height,g=-u._radius,y=-u._radius,x=g+c,C=y+m,S=v.getX(0,0),E=v.getY(0,0),T=v.getX(g,y),P=v.getY(g,y),M=v.getX(g,C),w=v.getY(g,C),b=v.getX(x,C),I=v.getY(x,C),R=v.getX(x,y),A=v.getY(x,y);h.pipelines.preBatch(u),d.batchPointLight(u,f,T,P,M,w,b,I,R,A,S,E),h.pipelines.postBatch(u)};n.exports=p},591:(n,o,r)=>{var a=r(83419),p=r(81320),h=r(88571),u=new a({Extends:h,initialize:function(l,d,v,c,m,g){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=32),m===void 0&&(m=32),g===void 0&&(g=!0);var y=new p(l.sys.textures,"",c,m,g);h.call(this,l,d,v,y),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(f,l){this.width=f,this.height=l,this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=f,d.hitArea.height=l),this},resize:function(f,l,d){return this.texture.setSize(f,l,d),this.setSize(this.texture.width,this.texture.height),this},saveTexture:function(f){var l=this.texture;return l.key=f,l.manager.addDynamicTexture(l)&&(this._saved=!0),l},fill:function(f,l,d,v,c,m){return this.texture.fill(f,l,d,v,c,m),this},clear:function(){return this.texture.clear(),this},stamp:function(f,l,d,v,c){return this.texture.stamp(f,l,d,v,c),this},erase:function(f,l,d){return this.texture.erase(f,l,d),this},draw:function(f,l,d,v,c){return this.texture.draw(f,l,d,v,c),this},drawFrame:function(f,l,d,v,c,m){return this.texture.drawFrame(f,l,d,v,c,m),this},repeat:function(f,l,d,v,c,m,g,y,x){return this.texture.repeat(f,l,d,v,c,m,g,y,x),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(f,l,d,v,c){return this.texture.batchDraw(f,l,d,v,c),this},batchDrawFrame:function(f,l,d,v,c,m){return this.texture.batchDrawFrame(f,l,d,v,c,m),this},endDraw:function(f){return this.texture.endDraw(f),this},snapshotArea:function(f,l,d,v,c,m,g){return this.texture.snapshotArea(f,l,d,v,c,m,g),this},snapshot:function(f,l,d){return this.snapshotArea(0,0,this.width,this.height,f,l,d)},snapshotPixel:function(f,l,d){return this.snapshotArea(f,l,1,1,d,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});n.exports=u},34495:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(591);p.register("renderTexture",function(f,l){f===void 0&&(f={});var d=h(f,"x",0),v=h(f,"y",0),c=h(f,"width",32),m=h(f,"height",32),g=new u(this.scene,d,v,c,m);return l!==void 0&&(f.add=l),a(this.scene,g,f),g})},60505:(n,o,r)=>{var a=r(39429),p=r(591);a.register("renderTexture",function(h,u,f,l){return this.displayList.add(new p(this.scene,h,u,f,l))})},77757:(n,o,r)=>{var a=r(9674),p=r(83419),h=r(31401),u=r(95643),f=r(36060),l=r(38745),d=r(26099),v=new p({Extends:u,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Flip,h.Mask,h.Pipeline,h.PostPipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,l],initialize:function(m,g,y,x,C,S,E,T,P){x===void 0&&(x="__DEFAULT"),S===void 0&&(S=2),E===void 0&&(E=!0),u.call(this,m,"Rope"),this.anims=new a(this),this.points=S,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=x==="__DEFAULT",this.dirty=!1,this.horizontal=E,this._flipX=!1,this._flipY=!1,this._perp=new d,this.debugCallback=null,this.debugGraphic=null,this.setTexture(x,C),this.setPosition(g,y),this.setSizeToFrame(),this.initPipeline(f.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(S)&&this.resizeArrays(S.length),this.setPoints(S,T,P),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(c,m){var g=this.anims.currentFrame;this.anims.update(c,m),this.anims.currentFrame!==g&&(this.updateUVs(),this.updateVertices())},play:function(c,m,g){return this.anims.play(c,m,g),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(c,m,g){return c===void 0&&(c=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(c,m,g))},setVertical:function(c,m,g){return c===void 0&&(c=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(c,m,g)):this},setTintFill:function(c){return c===void 0&&(c=!1),this.tintFill=c,this},setAlphas:function(c,m){var g=this.points.length;if(g<1)return this;var y=this.alphas;c===void 0?c=[1]:!Array.isArray(c)&&m===void 0&&(c=[c]);var x,C=0;if(m!==void 0)for(x=0;x<g;x++)C=x*2,y[C]=c,y[C+1]=m;else if(c.length===g)for(x=0;x<g;x++)C=x*2,y[C]=c[x],y[C+1]=c[x];else{var S=c[0];for(x=0;x<g;x++)C=x*2,c.length>C&&(S=c[C]),y[C]=S,c.length>C+1&&(S=c[C+1]),y[C+1]=S}return this},setColors:function(c){var m=this.points.length;if(m<1)return this;var g=this.colors;c===void 0?c=[16777215]:Array.isArray(c)||(c=[c]);var y,x=0;if(c.length===m)for(y=0;y<m;y++)x=y*2,g[x]=c[y],g[x+1]=c[y];else{var C=c[0];for(y=0;y<m;y++)x=y*2,c.length>x&&(C=c[x]),g[x]=C,c.length>x+1&&(C=c[x+1]),g[x+1]=C}return this},setPoints:function(c,m,g){if(c===void 0&&(c=2),typeof c=="number"){var y=c;y<2&&(y=2),c=[];var x,C,S;if(this.horizontal)for(S=-this.frame.halfWidth,C=this.frame.width/(y-1),x=0;x<y;x++)c.push({x:S+x*C,y:0});else for(S=-this.frame.halfHeight,C=this.frame.height/(y-1),x=0;x<y;x++)c.push({x:0,y:S+x*C})}var E=c.length,T=this.points.length;return E<1?(console.warn("Rope: Not enough points given"),this):(E===1&&(c.unshift({x:0,y:0}),E++),T!==E&&this.resizeArrays(E),this.dirty=!0,this.points=c,this.updateUVs(),m!=null&&this.setColors(m),g!=null&&this.setAlphas(g),this)},updateUVs:function(){for(var c=this.uv,m=this.points.length,g=this.frame.u0,y=this.frame.v0,x=this.frame.u1,C=this.frame.v1,S=(x-g)/(m-1),E=(C-y)/(m-1),T=0;T<m;T++){var P=T*4,M,w,b,I;this.horizontal?(this._flipX?(M=x-T*S,b=x-T*S):(M=g+T*S,b=g+T*S),this._flipY?(w=C,I=y):(w=y,I=C)):(this._flipX?(M=g,b=x):(M=x,b=g),this._flipY?(w=C-T*E,I=C-T*E):(w=y+T*E,I=y+T*E)),c[P+0]=M,c[P+1]=w,c[P+2]=b,c[P+3]=I}return this},resizeArrays:function(c){var m=this.colors,g=this.alphas;this.vertices=new Float32Array(c*4),this.uv=new Float32Array(c*4),m=new Uint32Array(c*2),g=new Float32Array(c*2);for(var y=0;y<c*2;y++)m[y]=16777215,g[y]=1;return this.colors=m,this.alphas=g,this.dirty=!0,this},updateVertices:function(){var c=this._perp,m=this.points,g=this.vertices,y=m.length;if(this.dirty=!1,!(y<1)){for(var x,C=m[0],S=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,E=0;E<y;E++){var T=m[E],P=E*4;E<y-1?x=m[E+1]:x=T,c.x=x.y-C.y,c.y=-(x.x-C.x);var M=c.length();c.x/=M,c.y/=M,c.x*=S,c.y*=S,g[P]=T.x+c.x,g[P+1]=T.y+c.y,g[P+2]=T.x-c.x,g[P+3]=T.y-c.y,C=T}return this}},setDebug:function(c,m){return this.debugGraphic=c,!c&&!m?this.debugCallback=null:m?this.debugCallback=m:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(c,m,g){var y=c.debugGraphic,x=g[0],C=g[1],S=g[2],E=g[3];y.lineBetween(x,C,S,E);for(var T=4;T<m;T+=4){var P=g[T+0],M=g[T+1],w=g[T+2],b=g[T+3];y.lineBetween(x,C,P,M),y.lineBetween(S,E,w,b),y.lineBetween(S,E,P,M),y.lineBetween(P,M,w,b),x=P,C=M,S=w,E=b}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(c){return this._flipX=c,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(c){return this._flipY=c,this.updateUVs()}}});n.exports=v},95262:n=>{var o=function(){};n.exports=o},26209:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(35154),f=r(77757);p.register("rope",function(l,d){l===void 0&&(l={});var v=h(l,"key",null),c=h(l,"frame",null),m=h(l,"horizontal",!0),g=u(l,"points",void 0),y=u(l,"colors",void 0),x=u(l,"alphas",void 0),C=new f(this.scene,0,0,v,c,g,m,y,x);return d!==void 0&&(l.add=d),a(this.scene,C,l),C})},96819:(n,o,r)=>{var a=r(77757),p=r(39429);p.register("rope",function(h,u,f,l,d,v,c,m){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c,m))})},38745:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(20439),h=r(95262),n.exports={renderWebGL:p,renderCanvas:h}},20439:(n,o,r)=>{var a=r(91296),p=r(70554),h=function(u,f,l,d){l.addToRenderList(f);var v=u.pipelines.set(f.pipeline,f),c=a(f,l,d).calc,m=f.vertices,g=f.uv,y=f.colors,x=f.alphas,C=f.alpha,S=p.getTintAppendFloatAlpha,E=l.roundPixels,T=m.length,P=Math.floor(T*.5);v.flush(),u.pipelines.preBatch(f);var M=v.setGameObject(f),w=v.vertexViewF32,b=v.vertexViewU32,I=v.vertexCount*v.currentShader.vertexComponentCount-1,R=0,A=f.tintFill;f.dirty&&f.updateVertices();for(var L=f.debugCallback,O=[],F=0;F<T;F+=2){var G=m[F+0],U=m[F+1],z=G*c.a+U*c.c+c.e,N=G*c.b+U*c.d+c.f;E&&(z=Math.round(z),N=Math.round(N)),w[++I]=z,w[++I]=N,w[++I]=g[F+0],w[++I]=g[F+1],w[++I]=M,w[++I]=A,b[++I]=S(y[R],l.alpha*(x[R]*C)),R++,L&&(O[F+0]=z,O[F+1]=N)}L&&L.call(f,f,T,O),v.vertexCount+=P,v.currentBatch.count=v.vertexCount-v.currentBatch.start,u.pipelines.postBatch(f)};n.exports=h},20071:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(95643),u=r(95540),f=r(79291),l=r(61622),d=r(25479),v=r(61340),c=r(95428),m=r(92503),g=new a({Extends:h,Mixins:[p.ComputedSize,p.Depth,p.GetBounds,p.Mask,p.Origin,p.ScrollFactor,p.Transform,p.Visible,d],initialize:function(x,C,S,E,T,P,M,w){S===void 0&&(S=0),E===void 0&&(E=0),T===void 0&&(T=128),P===void 0&&(P=128),h.call(this,x,"Shader"),this.blendMode=-1,this.shader;var b=x.sys.renderer;this.renderer=b,this.gl=b.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=b.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=b.width,this._rendererHeight=b.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(S,E),this.setSize(T,P),this.setOrigin(.5,.5),this.setShader(C,M,w),this.renderer.on(m.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(y){return this.renderToTexture?!0:!(h.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&y.id)},setRenderToTexture:function(y,x){if(x===void 0&&(x=!1),!this.renderToTexture){var C=this.width,S=this.height,E=this.renderer;this.glTexture=E.createTextureFromSource(null,C,S,0),this.framebuffer=E.createFramebuffer(C,S,this.glTexture,!1),this._rendererWidth=C,this._rendererHeight=S,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),y&&(this.texture=this.scene.sys.textures.addGLTexture(y,this.glTexture))}return this.shader&&(E.pipelines.clear(),this.load(),this.flush(),E.pipelines.rebind()),this},setShader:function(y,x,C){if(this.renderer.contextLost)return this._deferSetShader={key:y,textures:x,textureData:C},this;if(x===void 0&&(x=[]),typeof y=="string"){var S=this.scene.sys.cache.shader;if(!S.has(y))return console.warn("Shader missing: "+y),this;this.shader=S.get(y)}else this.shader=y;var E=this.gl,T=this.renderer;this.program&&T.deleteProgram(this.program);var P=T.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);E.uniformMatrix4fv(E.getUniformLocation(P.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),E.uniformMatrix4fv(E.getUniformLocation(P.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),E.uniform2f(E.getUniformLocation(P.webGLProgram,"uResolution"),this.width,this.height),this.program=P;var M=new Date,w={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[M.getFullYear(),M.getMonth(),M.getDate(),M.getHours()*60*60+M.getMinutes()*60+M.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=f(!0,{},this.shader.uniforms,w):this.uniforms=w;for(var b=0;b<4;b++)x[b]&&this.setSampler2D("iChannel"+b,x[b],b,C);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(y){return this.pointer=y,this},projOrtho:function(y,x,C,S){if(this.renderer.contextLost){this._deferProjOrtho={left:y,right:x,bottom:C,top:S};return}var E=-1e3,T=1e3,P=1/(y-x),M=1/(C-S),w=1/(E-T),b=this.projectionMatrix;b[0]=-2*P,b[5]=-2*M,b[10]=2*w,b[12]=(y+x)*P,b[13]=(S+C)*M,b[14]=(T+E)*w;var I=this.program,R=this.gl,A=this.renderer;A.setProgram(I),R.uniformMatrix4fv(R.getUniformLocation(I.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=x,this._rendererHeight=C},initUniforms:function(){var y=this.renderer.glFuncMap,x=this.program;this._textureCount=0;for(var C in this.uniforms){var S=this.uniforms[C],E=S.type,T=y[E];S.uniformLocation=this.renderer.createUniformLocation(x,C),E!=="sampler2D"&&(S.glMatrix=T.matrix,S.glValueLength=T.length,S.glFunc=T.func)}},setSampler2DBuffer:function(y,x,C,S,E,T){E===void 0&&(E=0),T===void 0&&(T={});var P=this.uniforms[y];return P.value=x,T.width=C,T.height=S,P.textureData=T,this._textureCount=E,this.initSampler2D(P),this},setSampler2D:function(y,x,C,S){C===void 0&&(C=0);var E=this.scene.sys.textures;if(E.exists(x)){var T=E.getFrame(x);if(T.glTexture&&T.glTexture.isRenderTexture)return this.setSampler2DBuffer(y,T.glTexture,T.width,T.height,C,S);var P=this.uniforms[y],M=T.source;P.textureKey=x,P.source=M.image,P.value=T.glTexture,M.isGLTexture&&(S||(S={}),S.width=M.width,S.height=M.height),S&&(P.textureData=S),this._textureCount=C,this.initSampler2D(P)}return this},setUniform:function(y,x){return l(this.uniforms,y,x),this},getUniform:function(y){return u(this.uniforms,y,null)},setChannel0:function(y,x){return this.setSampler2D("iChannel0",y,0,x)},setChannel1:function(y,x){return this.setSampler2D("iChannel1",y,1,x)},setChannel2:function(y,x){return this.setSampler2D("iChannel2",y,2,x)},setChannel3:function(y,x){return this.setSampler2D("iChannel3",y,3,x)},initSampler2D:function(y){if(y.value){var x=y.textureData;if(x&&!y.value.isRenderTexture){var C=this.gl,S=y.value,E=C[u(x,"magFilter","linear").toUpperCase()],T=C[u(x,"minFilter","linear").toUpperCase()],P=C[u(x,"wrapS","repeat").toUpperCase()],M=C[u(x,"wrapT","repeat").toUpperCase()],w=C[u(x,"format","rgba").toUpperCase()],b=u(x,"flipY",!1),I=u(x,"width",S.width),R=u(x,"height",S.height),A=u(x,"source",S.pixels);x.repeat&&(P=C.REPEAT,M=C.REPEAT),x.width&&(A=null),S.update(A,I,R,b,P,M,T,E,w)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var y=this.gl,x=this.uniforms,C,S,E,T,P,M=0;for(var w in x)C=x[w],E=C.glFunc,S=C.glValueLength,T=C.uniformLocation,P=C.value,P!==null&&(S===1?C.glMatrix?E.call(y,T.webGLUniformLocation,C.transpose,P):E.call(y,T.webGLUniformLocation,P):S===2?E.call(y,T.webGLUniformLocation,P.x,P.y):S===3?E.call(y,T.webGLUniformLocation,P.x,P.y,P.z):S===4?E.call(y,T.webGLUniformLocation,P.x,P.y,P.z,P.w):C.type==="sampler2D"&&(y.activeTexture(y.TEXTURE0+M),y.bindTexture(y.TEXTURE_2D,P.webGLTexture),y.uniform1i(T.webGLUniformLocation,M),M++))},load:function(y){var x=this.gl,C=this.width,S=this.height,E=this.renderer,T=this.program,P=this.viewMatrix;if(!this.renderToTexture){var M=-this._displayOriginX,w=-this._displayOriginY;P[0]=y[0],P[1]=y[1],P[4]=y[2],P[5]=y[3],P[8]=y[4],P[9]=y[5],P[12]=P[0]*M+P[4]*w,P[13]=P[1]*M+P[5]*w}x.useProgram(T.webGLProgram),x.uniformMatrix4fv(x.getUniformLocation(T.webGLProgram,"uViewMatrix"),!1,P),x.uniformMatrix4fv(x.getUniformLocation(T.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),x.uniform2f(x.getUniformLocation(T.webGLProgram,"uResolution"),this.width,this.height);var b=this.uniforms,I=b.resolution;I.value.x=C,I.value.y=S,b.time.value=E.game.loop.getDuration();var R=this.pointer;if(R){var A=b.mouse,L=R.x/C,O=1-R.y/S;A.value.x=L.toFixed(2),A.value.y=O.toFixed(2)}this.syncUniforms()},flush:function(){var y=this.width,x=this.height,C=this.program,S=this.gl,E=this.vertexBuffer,T=this.renderer,P=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(T.setFramebuffer(this.framebuffer),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT)),S.bindBuffer(S.ARRAY_BUFFER,E.webGLBuffer);var M=S.getAttribLocation(C.webGLProgram,"inPosition");M!==-1&&(S.enableVertexAttribArray(M),S.vertexAttribPointer(M,2,S.FLOAT,!1,P,0));var w=this.vertexViewF32;w[3]=x,w[4]=y,w[5]=x,w[8]=y,w[9]=x,w[10]=y;var b=6;S.bufferSubData(S.ARRAY_BUFFER,0,this.bytes.subarray(0,b*P)),S.drawArrays(S.TRIANGLES,0,b),this.renderToTexture&&T.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var y=this._deferSetShader.key,x=this._deferSetShader.textures,C=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(y,x,C)}if(this._deferProjOrtho!==null){var S=this._deferProjOrtho.left,E=this._deferProjOrtho.right,T=this._deferProjOrtho.bottom,P=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(S,E,T,P)}},preDestroy:function(){var y=this.renderer;y.off(m.RESTORE_WEBGL,this.onContextRestored,this),y.deleteProgram(this.program),y.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(y.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),c(this.uniforms,function(x){y.deleteUniformLocation(x.uniformLocation),x.uniformLocation=null})}});n.exports=g},80464:n=>{var o=function(){};n.exports=o},54935:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(20071);p.register("shader",function(f,l){f===void 0&&(f={});var d=h(f,"key",null),v=h(f,"x",0),c=h(f,"y",0),m=h(f,"width",128),g=h(f,"height",128),y=new u(this.scene,d,v,c,m,g);return l!==void 0&&(f.add=l),a(this.scene,y,f),y})},74177:(n,o,r)=>{var a=r(20071),p=r(39429);p.register("shader",function(h,u,f,l,d,v,c){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c))})},25479:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(19257),h=r(80464),n.exports={renderWebGL:p,renderCanvas:h}},19257:(n,o,r)=>{var a=r(91296),p=function(h,u,f,l){if(u.shader){if(f.addToRenderList(u),h.pipelines.clear(),u.renderToTexture)u.load(),u.flush();else{var d=a(u,f,l).calc;(h.width!==u._rendererWidth||h.height!==u._rendererHeight)&&u.projOrtho(0,h.width,h.height,0),u.load(d.matrix),u.flush()}h.pipelines.rebind()}};n.exports=p},10441:(n,o,r)=>{var a=r(70554),p=function(h,u,f,l,d,v){for(var c=a.getTintAppendFloatAlpha(f.fillColor,f.fillAlpha*l),m=f.pathData,g=f.pathIndexes,y=0;y<g.length;y+=3){var x=g[y]*2,C=g[y+1]*2,S=g[y+2]*2,E=m[x+0]-d,T=m[x+1]-v,P=m[C+0]-d,M=m[C+1]-v,w=m[S+0]-d,b=m[S+1]-v,I=u.getX(E,T),R=u.getY(E,T),A=u.getX(P,M),L=u.getY(P,M),O=u.getX(w,b),F=u.getY(w,b);h.batchTri(f,I,R,A,L,O,F,0,0,1,1,c,c,c,2)}};n.exports=p},65960:n=>{var o=function(r,a,p,h){var u=p||a.fillColor,f=h||a.fillAlpha,l=(u&16711680)>>>16,d=(u&65280)>>>8,v=u&255;r.fillStyle="rgba("+l+","+d+","+v+","+f+")"};n.exports=o},75177:n=>{var o=function(r,a,p,h){var u=p||a.strokeColor,f=h||a.strokeAlpha,l=(u&16711680)>>>16,d=(u&65280)>>>8,v=u&255;r.strokeStyle="rgba("+l+","+d+","+v+","+f+")",r.lineWidth=a.lineWidth};n.exports=o},17803:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(95643),u=r(23031),f=new a({Extends:h,Mixins:[p.AlphaSingle,p.BlendMode,p.Depth,p.GetBounds,p.Mask,p.Origin,p.Pipeline,p.PostPipeline,p.ScrollFactor,p.Transform,p.Visible],initialize:function(d,v,c){v===void 0&&(v="Shape"),h.call(this,d,v),this.geom=c,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(l,d){return d===void 0&&(d=1),l===void 0?this.isFilled=!1:(this.fillColor=l,this.fillAlpha=d,this.isFilled=!0),this},setStrokeStyle:function(l,d,v){return v===void 0&&(v=1),l===void 0?this.isStroked=!1:(this.lineWidth=l,this.strokeColor=d,this.strokeAlpha=v,this.isStroked=!0),this},setClosePath:function(l){return this.closePath=l,this},setSize:function(l,d){return this.width=l,this.height=d,this},setDisplaySize:function(l,d){return this.displayWidth=l,this.displayHeight=d,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}}});n.exports=f},34682:(n,o,r)=>{var a=r(70554),p=function(h,u,f,l,d){var v=h.strokeTint,c=a.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*f);v.TL=c,v.TR=c,v.BL=c,v.BR=c;var m=u.pathData,g=m.length-1,y=u.lineWidth,x=y/2,C=m[0]-l,S=m[1]-d;u.closePath||(g-=2);for(var E=2;E<g;E+=2){var T=m[E]-l,P=m[E+1]-d;h.batchLine(C,S,T,P,x,x,y,E-2,u.closePath?E===g-1:!1),C=T,S=P}};n.exports=p},23629:(n,o,r)=>{var a=r(13609),p=r(83419),h=r(39506),u=r(94811),f=r(96503),l=r(36383),d=r(17803),v=new p({Extends:d,Mixins:[a],initialize:function(m,g,y,x,C,S,E,T,P){g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=128),C===void 0&&(C=0),S===void 0&&(S=360),E===void 0&&(E=!1),d.call(this,m,"Arc",new f(0,0,x)),this._startAngle=C,this._endAngle=S,this._anticlockwise=E,this._iterations=.01,this.setPosition(g,y);var M=this.geom.radius*2;this.setSize(M,M),T!==void 0&&this.setFillStyle(T,P),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(c){this._iterations=c,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(c){this.geom.radius=c;var m=c*2;this.setSize(m,m),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(c){this._startAngle=c,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(c){this._endAngle=c,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(c){this._anticlockwise=c,this.updateData()}},setRadius:function(c){return this.radius=c,this},setIterations:function(c){return c===void 0&&(c=.01),this.iterations=c,this},setStartAngle:function(c,m){return this._startAngle=c,m!==void 0&&(this._anticlockwise=m),this.updateData()},setEndAngle:function(c,m){return this._endAngle=c,m!==void 0&&(this._anticlockwise=m),this.updateData()},updateData:function(){var c=this._iterations,m=c,g=this.geom.radius,y=h(this._startAngle),x=h(this._endAngle),C=this._anticlockwise,S=g,E=g;x-=y,C?x<-l.PI2?x=-l.PI2:x>0&&(x=-l.PI2+x%l.PI2):x>l.PI2?x=l.PI2:x<0&&(x=l.PI2+x%l.PI2);for(var T=[S+Math.cos(y)*g,E+Math.sin(y)*g],P;m<1;)P=x*m+y,T.push(S+Math.cos(P)*g,E+Math.sin(P)*g),m+=c;return P=x+y,T.push(S+Math.cos(P)*g,E+Math.sin(P)*g),T.push(S+Math.cos(y)*g,E+Math.sin(y)*g),this.pathIndexes=u(T),this.pathData=T,this}});n.exports=v},42542:(n,o,r)=>{var a=r(39506),p=r(65960),h=r(75177),u=r(20926),f=function(l,d,v,c){v.addToRenderList(d);var m=l.currentContext;if(u(l,m,d,v,c)){var g=d.radius;m.beginPath(),m.arc(g-d.originX*(g*2),g-d.originY*(g*2),g,a(d._startAngle),a(d._endAngle),d.anticlockwise),d.closePath&&m.closePath(),d.isFilled&&(p(m,d),m.fill()),d.isStroked&&(h(m,d),m.stroke()),m.restore()}};n.exports=f},42563:(n,o,r)=>{var a=r(23629),p=r(39429);p.register("arc",function(h,u,f,l,d,v,c,m){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c,m))}),p.register("circle",function(h,u,f,l,d){return this.displayList.add(new a(this.scene,h,u,f,0,360,!1,l,d))})},13609:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(41447),h=r(42542),n.exports={renderWebGL:p,renderCanvas:h}},41447:(n,o,r)=>{var a=r(91296),p=r(10441),h=r(34682),u=function(f,l,d,v){d.addToRenderList(l);var c=f.pipelines.set(l.pipeline),m=a(l,d,v),g=c.calcMatrix.copyFrom(m.calc),y=l._displayOriginX,x=l._displayOriginY,C=d.alpha*l.alpha;f.pipelines.preBatch(l),l.isFilled&&p(c,g,l,C,y,x),l.isStroked&&h(c,l,C,y,x),f.pipelines.postBatch(l)};n.exports=u},89:(n,o,r)=>{var a=r(83419),p=r(33141),h=r(94811),u=r(87841),f=r(17803),l=new a({Extends:f,Mixins:[p],initialize:function(v,c,m,g,y,x){c===void 0&&(c=0),m===void 0&&(m=0),f.call(this,v,"Curve",g),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(c,m),y!==void 0&&this.setFillStyle(y,x),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(d){this._smoothness=d,this.updateData()}},setSmoothness:function(d){return this._smoothness=d,this.updateData()},updateData:function(){var d=this._curveBounds,v=this._smoothness;this.geom.getBounds(d,v),this.setSize(d.width,d.height),this.updateDisplayOrigin();for(var c=[],m=this.geom.getPoints(v),g=0;g<m.length;g++)c.push(m[g].x,m[g].y);return c.push(m[0].x,m[0].y),this.pathIndexes=h(c),this.pathData=c,this}});n.exports=l},3170:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(f,l,d,v){d.addToRenderList(l);var c=f.currentContext;if(h(f,c,l,d,v)){var m=l._displayOriginX+l._curveBounds.x,g=l._displayOriginY+l._curveBounds.y,y=l.pathData,x=y.length-1,C=y[0]-m,S=y[1]-g;c.beginPath(),c.moveTo(C,S),l.closePath||(x-=2);for(var E=2;E<x;E+=2){var T=y[E]-m,P=y[E+1]-g;c.lineTo(T,P)}l.closePath&&c.closePath(),l.isFilled&&(a(c,l),c.fill()),l.isStroked&&(p(c,l),c.stroke()),c.restore()}};n.exports=u},40511:(n,o,r)=>{var a=r(39429),p=r(89);a.register("curve",function(h,u,f,l,d){return this.displayList.add(new p(this.scene,h,u,f,l,d))})},33141:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(53987),h=r(3170),n.exports={renderWebGL:p,renderCanvas:h}},53987:(n,o,r)=>{var a=r(10441),p=r(91296),h=r(34682),u=function(f,l,d,v){d.addToRenderList(l);var c=f.pipelines.set(l.pipeline),m=p(l,d,v),g=c.calcMatrix.copyFrom(m.calc),y=l._displayOriginX+l._curveBounds.x,x=l._displayOriginY+l._curveBounds.y,C=d.alpha*l.alpha;f.pipelines.preBatch(l),l.isFilled&&a(c,g,l,C,y,x),l.isStroked&&h(c,l,C,y,x),f.pipelines.postBatch(l)};n.exports=u},19921:(n,o,r)=>{var a=r(83419),p=r(94811),h=r(54205),u=r(8497),f=r(17803),l=new a({Extends:f,Mixins:[h],initialize:function(v,c,m,g,y,x,C){c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=128),y===void 0&&(y=128),f.call(this,v,"Ellipse",new u(g/2,y/2,g,y)),this._smoothness=64,this.setPosition(c,m),this.width=g,this.height=y,x!==void 0&&this.setFillStyle(x,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(d){this._smoothness=d,this.updateData()}},setSize:function(d,v){return this.width=d,this.height=v,this.geom.setPosition(d/2,v/2),this.geom.setSize(d,v),this.updateDisplayOrigin(),this.updateData()},setSmoothness:function(d){return this._smoothness=d,this.updateData()},updateData:function(){for(var d=[],v=this.geom.getPoints(this._smoothness),c=0;c<v.length;c++)d.push(v[c].x,v[c].y);return d.push(v[0].x,v[0].y),this.pathIndexes=p(d),this.pathData=d,this}});n.exports=l},7930:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(f,l,d,v){d.addToRenderList(l);var c=f.currentContext;if(h(f,c,l,d,v)){var m=l._displayOriginX,g=l._displayOriginY,y=l.pathData,x=y.length-1,C=y[0]-m,S=y[1]-g;c.beginPath(),c.moveTo(C,S),l.closePath||(x-=2);for(var E=2;E<x;E+=2){var T=y[E]-m,P=y[E+1]-g;c.lineTo(T,P)}c.closePath(),l.isFilled&&(a(c,l),c.fill()),l.isStroked&&(p(c,l),c.stroke()),c.restore()}};n.exports=u},1543:(n,o,r)=>{var a=r(19921),p=r(39429);p.register("ellipse",function(h,u,f,l,d,v){return this.displayList.add(new a(this.scene,h,u,f,l,d,v))})},54205:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(19467),h=r(7930),n.exports={renderWebGL:p,renderCanvas:h}},19467:(n,o,r)=>{var a=r(10441),p=r(91296),h=r(34682),u=function(f,l,d,v){d.addToRenderList(l);var c=f.pipelines.set(l.pipeline),m=p(l,d,v),g=c.calcMatrix.copyFrom(m.calc),y=l._displayOriginX,x=l._displayOriginY,C=d.alpha*l.alpha;f.pipelines.preBatch(l),l.isFilled&&a(c,g,l,C,y,x),l.isStroked&&h(c,l,C,y,x),f.pipelines.postBatch(l)};n.exports=u},30479:(n,o,r)=>{var a=r(83419),p=r(17803),h=r(26015),u=new a({Extends:p,Mixins:[h],initialize:function(l,d,v,c,m,g,y,x,C,S,E){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=128),m===void 0&&(m=128),g===void 0&&(g=32),y===void 0&&(y=32),p.call(this,l,"Grid",null),this.cellWidth=g,this.cellHeight=y,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(d,v),this.setSize(c,m),this.setFillStyle(x,C),S!==void 0&&this.setOutlineStyle(S,E),this.updateDisplayOrigin()},setFillStyle:function(f,l){return l===void 0&&(l=1),f===void 0?this.showCells=!1:(this.fillColor=f,this.fillAlpha=l,this.showCells=!0),this},setAltFillStyle:function(f,l){return l===void 0&&(l=1),f===void 0?this.showAltCells=!1:(this.altFillColor=f,this.altFillAlpha=l,this.showAltCells=!0),this},setOutlineStyle:function(f,l){return l===void 0&&(l=1),f===void 0?this.showOutline=!1:(this.outlineFillColor=f,this.outlineFillAlpha=l,this.showOutline=!0),this}});n.exports=u},49912:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(f,l,d,v){d.addToRenderList(l);var c=f.currentContext;if(h(f,c,l,d,v)){var m=-l._displayOriginX,g=-l._displayOriginY,y=d.alpha*l.alpha,x=l.width,C=l.height,S=l.cellWidth,E=l.cellHeight,T=Math.ceil(x/S),P=Math.ceil(C/E),M=S,w=E,b=S-(T*S-x),I=E-(P*E-C),R=l.showCells,A=l.showAltCells,L=l.showOutline,O=0,F=0,G=0,U=0,z=0;if(L&&(M--,w--,b===S&&b--,I===E&&I--),R&&l.fillAlpha>0)for(a(c,l),F=0;F<P;F++)for(A&&(G=F%2),O=0;O<T;O++){if(A&&G){G=0;continue}G++,U=O<T-1?M:b,z=F<P-1?w:I,c.fillRect(m+O*S,g+F*E,U,z)}if(A&&l.altFillAlpha>0)for(a(c,l,l.altFillColor,l.altFillAlpha*y),F=0;F<P;F++)for(A&&(G=F%2),O=0;O<T;O++){if(A&&!G){G=1;continue}G=0,U=O<T-1?M:b,z=F<P-1?w:I,c.fillRect(m+O*S,g+F*E,U,z)}if(L&&l.outlineFillAlpha>0){for(p(c,l,l.outlineFillColor,l.outlineFillAlpha*y),O=1;O<T;O++){var N=O*S;c.beginPath(),c.moveTo(N+m,g),c.lineTo(N+m,C+g),c.stroke()}for(F=1;F<P;F++){var k=F*E;c.beginPath(),c.moveTo(m,k+g),c.lineTo(m+x,k+g),c.stroke()}}c.restore()}};n.exports=u},34137:(n,o,r)=>{var a=r(39429),p=r(30479);a.register("grid",function(h,u,f,l,d,v,c,m,g,y){return this.displayList.add(new p(this.scene,h,u,f,l,d,v,c,m,g,y))})},26015:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(46161),h=r(49912),n.exports={renderWebGL:p,renderCanvas:h}},46161:(n,o,r)=>{var a=r(91296),p=r(70554),h=function(u,f,l,d){l.addToRenderList(f);var v=u.pipelines.set(f.pipeline),c=a(f,l,d),m=v.calcMatrix.copyFrom(c.calc);m.translate(-f._displayOriginX,-f._displayOriginY);var g=l.alpha*f.alpha,y=f.width,x=f.height,C=f.cellWidth,S=f.cellHeight,E=Math.ceil(y/C),T=Math.ceil(x/S),P=C,M=S,w=C-(E*C-y),b=S-(T*S-x),I,R,A=f.showCells,L=f.showAltCells,O=f.showOutline,F=0,G=0,U=0,z=0,N=0;if(O&&(P--,M--,w===C&&w--,b===S&&b--),u.pipelines.preBatch(f),A&&f.fillAlpha>0)for(I=v.fillTint,R=p.getTintAppendFloatAlpha(f.fillColor,f.fillAlpha*g),I.TL=R,I.TR=R,I.BL=R,I.BR=R,G=0;G<T;G++)for(L&&(U=G%2),F=0;F<E;F++){if(L&&U){U=0;continue}U++,z=F<E-1?P:w,N=G<T-1?M:b,v.batchFillRect(F*C,G*S,z,N)}if(L&&f.altFillAlpha>0)for(I=v.fillTint,R=p.getTintAppendFloatAlpha(f.altFillColor,f.altFillAlpha*g),I.TL=R,I.TR=R,I.BL=R,I.BR=R,G=0;G<T;G++)for(L&&(U=G%2),F=0;F<E;F++){if(L&&!U){U=1;continue}U=0,z=F<E-1?P:w,N=G<T-1?M:b,v.batchFillRect(F*C,G*S,z,N)}if(O&&f.outlineFillAlpha>0){var k=v.strokeTint,D=p.getTintAppendFloatAlpha(f.outlineFillColor,f.outlineFillAlpha*g);for(k.TL=D,k.TR=D,k.BL=D,k.BR=D,F=1;F<E;F++){var V=F*C;v.batchLine(V,0,V,x,f.lineWidth,f.lineWidth,1,0,!1)}for(G=1;G<T;G++){var B=G*S;v.batchLine(0,B,y,B,f.lineWidth,f.lineWidth,1,0,!1)}}u.pipelines.postBatch(f)};n.exports=h},61475:(n,o,r)=>{var a=r(99651),p=r(83419),h=r(17803),u=new p({Extends:h,Mixins:[a],initialize:function(l,d,v,c,m,g,y,x){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=48),m===void 0&&(m=32),g===void 0&&(g=15658734),y===void 0&&(y=10066329),x===void 0&&(x=13421772),h.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=g,this.fillLeft=y,this.fillRight=x,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(d,v),this.setSize(c,m),this.updateDisplayOrigin()},setProjection:function(f){return this.projection=f,this},setFaces:function(f,l,d){return f===void 0&&(f=!0),l===void 0&&(l=!0),d===void 0&&(d=!0),this.showTop=f,this.showLeft=l,this.showRight=d,this},setFillStyle:function(f,l,d){return this.fillTop=f,this.fillLeft=l,this.fillRight=d,this.isFilled=!0,this}});n.exports=u},11508:(n,o,r)=>{var a=r(65960),p=r(20926),h=function(u,f,l,d){l.addToRenderList(f);var v=u.currentContext;if(p(u,v,f,l,d)&&f.isFilled){var c=f.width,m=f.height,g=c/2,y=c/f.projection;f.showTop&&(a(v,f,f.fillTop),v.beginPath(),v.moveTo(-g,-m),v.lineTo(0,-y-m),v.lineTo(g,-m),v.lineTo(g,-1),v.lineTo(0,y-1),v.lineTo(-g,-1),v.lineTo(-g,-m),v.fill()),f.showLeft&&(a(v,f,f.fillLeft),v.beginPath(),v.moveTo(-g,0),v.lineTo(0,y),v.lineTo(0,y-m),v.lineTo(-g,-m),v.lineTo(-g,0),v.fill()),f.showRight&&(a(v,f,f.fillRight),v.beginPath(),v.moveTo(g,0),v.lineTo(0,y),v.lineTo(0,y-m),v.lineTo(g,-m),v.lineTo(g,0),v.fill()),v.restore()}};n.exports=h},3933:(n,o,r)=>{var a=r(39429),p=r(61475);a.register("isobox",function(h,u,f,l,d,v,c){return this.displayList.add(new p(this.scene,h,u,f,l,d,v,c))})},99651:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(68149),h=r(11508),n.exports={renderWebGL:p,renderCanvas:h}},68149:(n,o,r)=>{var a=r(91296),p=r(70554),h=function(u,f,l,d){l.addToRenderList(f);var v=u.pipelines.set(f.pipeline),c=a(f,l,d),m=v.calcMatrix.copyFrom(c.calc),g=f.width,y=f.height,x=g/2,C=g/f.projection,S=l.alpha*f.alpha;if(f.isFilled){var E,T,P,M,w,b,I,R,A;u.pipelines.preBatch(f),f.showTop&&(E=p.getTintAppendFloatAlpha(f.fillTop,S),T=m.getX(-x,-y),P=m.getY(-x,-y),M=m.getX(0,-C-y),w=m.getY(0,-C-y),b=m.getX(x,-y),I=m.getY(x,-y),R=m.getX(0,C-y),A=m.getY(0,C-y),v.batchQuad(f,T,P,M,w,b,I,R,A,0,0,1,1,E,E,E,E,2)),f.showLeft&&(E=p.getTintAppendFloatAlpha(f.fillLeft,S),T=m.getX(-x,0),P=m.getY(-x,0),M=m.getX(0,C),w=m.getY(0,C),b=m.getX(0,C-y),I=m.getY(0,C-y),R=m.getX(-x,-y),A=m.getY(-x,-y),v.batchQuad(f,T,P,M,w,b,I,R,A,0,0,1,1,E,E,E,E,2)),f.showRight&&(E=p.getTintAppendFloatAlpha(f.fillRight,S),T=m.getX(x,0),P=m.getY(x,0),M=m.getX(0,C),w=m.getY(0,C),b=m.getX(0,C-y),I=m.getY(0,C-y),R=m.getX(x,-y),A=m.getY(x,-y),v.batchQuad(f,T,P,M,w,b,I,R,A,0,0,1,1,E,E,E,E,2)),u.pipelines.postBatch(f)}};n.exports=h},16933:(n,o,r)=>{var a=r(83419),p=r(60561),h=r(17803),u=new a({Extends:h,Mixins:[p],initialize:function(l,d,v,c,m,g,y,x,C){d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=48),m===void 0&&(m=32),g===void 0&&(g=!1),y===void 0&&(y=15658734),x===void 0&&(x=10066329),C===void 0&&(C=13421772),h.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=y,this.fillLeft=x,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=g,this.isFilled=!0,this.setPosition(d,v),this.setSize(c,m),this.updateDisplayOrigin()},setProjection:function(f){return this.projection=f,this},setReversed:function(f){return this.isReversed=f,this},setFaces:function(f,l,d){return f===void 0&&(f=!0),l===void 0&&(l=!0),d===void 0&&(d=!0),this.showTop=f,this.showLeft=l,this.showRight=d,this},setFillStyle:function(f,l,d){return this.fillTop=f,this.fillLeft=l,this.fillRight=d,this.isFilled=!0,this}});n.exports=u},79590:(n,o,r)=>{var a=r(65960),p=r(20926),h=function(u,f,l,d){l.addToRenderList(f);var v=u.currentContext;if(p(u,v,f,l,d)&&f.isFilled){var c=f.width,m=f.height,g=c/2,y=c/f.projection,x=f.isReversed;f.showTop&&x&&(a(v,f,f.fillTop),v.beginPath(),v.moveTo(-g,-m),v.lineTo(0,-y-m),v.lineTo(g,-m),v.lineTo(0,y-m),v.fill()),f.showLeft&&(a(v,f,f.fillLeft),v.beginPath(),x?(v.moveTo(-g,-m),v.lineTo(0,y),v.lineTo(0,y-m)):(v.moveTo(-g,0),v.lineTo(0,y),v.lineTo(0,y-m)),v.fill()),f.showRight&&(a(v,f,f.fillRight),v.beginPath(),x?(v.moveTo(g,-m),v.lineTo(0,y),v.lineTo(0,y-m)):(v.moveTo(g,0),v.lineTo(0,y),v.lineTo(0,y-m)),v.fill()),v.restore()}};n.exports=h},49803:(n,o,r)=>{var a=r(39429),p=r(16933);a.register("isotriangle",function(h,u,f,l,d,v,c,m){return this.displayList.add(new p(this.scene,h,u,f,l,d,v,c,m))})},60561:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(51503),h=r(79590),n.exports={renderWebGL:p,renderCanvas:h}},51503:(n,o,r)=>{var a=r(91296),p=r(70554),h=function(u,f,l,d){l.addToRenderList(f);var v=u.pipelines.set(f.pipeline),c=a(f,l,d),m=v.calcMatrix.copyFrom(c.calc),g=f.width,y=f.height,x=g/2,C=g/f.projection,S=f.isReversed,E=l.alpha*f.alpha;if(f.isFilled){u.pipelines.preBatch(f);var T,P,M,w,b,I,R;if(f.showTop&&S){T=p.getTintAppendFloatAlpha(f.fillTop,E),P=m.getX(-x,-y),M=m.getY(-x,-y),w=m.getX(0,-C-y),b=m.getY(0,-C-y),I=m.getX(x,-y),R=m.getY(x,-y);var A=m.getX(0,C-y),L=m.getY(0,C-y);v.batchQuad(f,P,M,w,b,I,R,A,L,0,0,1,1,T,T,T,T,2)}f.showLeft&&(T=p.getTintAppendFloatAlpha(f.fillLeft,E),S?(P=m.getX(-x,-y),M=m.getY(-x,-y),w=m.getX(0,C),b=m.getY(0,C),I=m.getX(0,C-y),R=m.getY(0,C-y)):(P=m.getX(-x,0),M=m.getY(-x,0),w=m.getX(0,C),b=m.getY(0,C),I=m.getX(0,C-y),R=m.getY(0,C-y)),v.batchTri(f,P,M,w,b,I,R,0,0,1,1,T,T,T,2)),f.showRight&&(T=p.getTintAppendFloatAlpha(f.fillRight,E),S?(P=m.getX(x,-y),M=m.getY(x,-y),w=m.getX(0,C),b=m.getY(0,C),I=m.getX(0,C-y),R=m.getY(0,C-y)):(P=m.getX(x,0),M=m.getY(x,0),w=m.getX(0,C),b=m.getY(0,C),I=m.getX(0,C-y),R=m.getY(0,C-y)),v.batchTri(f,P,M,w,b,I,R,0,0,1,1,T,T,T,2)),u.pipelines.postBatch(f)}};n.exports=h},57847:(n,o,r)=>{var a=r(83419),p=r(17803),h=r(23031),u=r(36823),f=new a({Extends:p,Mixins:[u],initialize:function(d,v,c,m,g,y,x,C,S){v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=128),x===void 0&&(x=0),p.call(this,d,"Line",new h(m,g,y,x));var E=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(v,c),this.setSize(E,T),C!==void 0&&this.setStrokeStyle(1,C,S),this.updateDisplayOrigin()},setLineWidth:function(l,d){return d===void 0&&(d=l),this._startWidth=l,this._endWidth=d,this.lineWidth=l,this},setTo:function(l,d,v,c){return this.geom.setTo(l,d,v,c),this}});n.exports=f},17440:(n,o,r)=>{var a=r(75177),p=r(20926),h=function(u,f,l,d){l.addToRenderList(f);var v=u.currentContext;if(p(u,v,f,l,d)){var c=f._displayOriginX,m=f._displayOriginY;f.isStroked&&(a(v,f),v.beginPath(),v.moveTo(f.geom.x1-c,f.geom.y1-m),v.lineTo(f.geom.x2-c,f.geom.y2-m),v.stroke()),v.restore()}};n.exports=h},2481:(n,o,r)=>{var a=r(39429),p=r(57847);a.register("line",function(h,u,f,l,d,v,c,m){return this.displayList.add(new p(this.scene,h,u,f,l,d,v,c,m))})},36823:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(77385),h=r(17440),n.exports={renderWebGL:p,renderCanvas:h}},77385:(n,o,r)=>{var a=r(91296),p=r(70554),h=function(u,f,l,d){l.addToRenderList(f);var v=u.pipelines.set(f.pipeline),c=a(f,l,d);v.calcMatrix.copyFrom(c.calc);var m=f._displayOriginX,g=f._displayOriginY,y=l.alpha*f.alpha;if(u.pipelines.preBatch(f),f.isStroked){var x=v.strokeTint,C=p.getTintAppendFloatAlpha(f.strokeColor,f.strokeAlpha*y);x.TL=C,x.TR=C,x.BL=C,x.BR=C,v.batchLine(f.geom.x1-m,f.geom.y1-g,f.geom.x2-m,f.geom.y2-g,f._startWidth/2,f._endWidth/2,1,0,!1,c.sprite,c.camera)}u.pipelines.postBatch(f)};n.exports=h},24949:(n,o,r)=>{var a=r(90273),p=r(83419),h=r(94811),u=r(13829),f=r(25717),l=r(17803),d=r(5469),v=new p({Extends:l,Mixins:[a],initialize:function(m,g,y,x,C,S){g===void 0&&(g=0),y===void 0&&(y=0),l.call(this,m,"Polygon",new f(x));var E=u(this.geom);this.setPosition(g,y),this.setSize(E.width,E.height),C!==void 0&&this.setFillStyle(C,S),this.updateDisplayOrigin(),this.updateData()},smooth:function(c){c===void 0&&(c=1);for(var m=0;m<c;m++)d(this.geom);return this.updateData()},setTo:function(c){this.geom.setTo(c);var m=u(this.geom);return this.setSize(m.width,m.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var c=[],m=this.geom.points,g=0;g<m.length;g++)c.push(m[g].x,m[g].y);return c.push(m[0].x,m[0].y),this.pathIndexes=h(c),this.pathData=c,this}});n.exports=v},38710:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(f,l,d,v){d.addToRenderList(l);var c=f.currentContext;if(h(f,c,l,d,v)){var m=l._displayOriginX,g=l._displayOriginY,y=l.pathData,x=y.length-1,C=y[0]-m,S=y[1]-g;c.beginPath(),c.moveTo(C,S),l.closePath||(x-=2);for(var E=2;E<x;E+=2){var T=y[E]-m,P=y[E+1]-g;c.lineTo(T,P)}l.closePath&&c.closePath(),l.isFilled&&(a(c,l),c.fill()),l.isStroked&&(p(c,l),c.stroke()),c.restore()}};n.exports=u},64827:(n,o,r)=>{var a=r(39429),p=r(24949);a.register("polygon",function(h,u,f,l,d){return this.displayList.add(new p(this.scene,h,u,f,l,d))})},90273:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(73695),h=r(38710),n.exports={renderWebGL:p,renderCanvas:h}},73695:(n,o,r)=>{var a=r(10441),p=r(91296),h=r(34682),u=function(f,l,d,v){d.addToRenderList(l);var c=f.pipelines.set(l.pipeline),m=p(l,d,v),g=c.calcMatrix.copyFrom(m.calc),y=l._displayOriginX,x=l._displayOriginY,C=d.alpha*l.alpha;f.pipelines.preBatch(l),l.isFilled&&a(c,g,l,C,y,x),l.isStroked&&h(c,l,C,y,x),f.pipelines.postBatch(l)};n.exports=u},74561:(n,o,r)=>{var a=r(83419),p=r(94811),h=r(87841),u=r(17803),f=r(95597),l=new a({Extends:u,Mixins:[f],initialize:function(v,c,m,g,y,x,C){c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=128),y===void 0&&(y=128),u.call(this,v,"Rectangle",new h(0,0,g,y)),this.radius=20,this.isRounded=!1,this.setPosition(c,m),this.setSize(g,y),x!==void 0&&this.setFillStyle(x,C),this.updateDisplayOrigin(),this.updateData()},setRounded:function(d){return d===void 0&&(d=16),this.radius=d,this.isRounded=d>0,this.updateRoundedData()},setSize:function(d,v){this.width=d,this.height=v,this.geom.setSize(d,v),this.updateData(),this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=d,c.hitArea.height=v),this},updateData:function(){if(this.isRounded)return this.updateRoundedData();var d=[],v=this.geom,c=this._tempLine;return v.getLineA(c),d.push(c.x1,c.y1,c.x2,c.y2),v.getLineB(c),d.push(c.x2,c.y2),v.getLineC(c),d.push(c.x2,c.y2),v.getLineD(c),d.push(c.x2,c.y2),this.pathData=d,this},updateRoundedData:function(){var d=[],v=this.width/2,c=this.height/2,m=Math.min(v,c),g=Math.min(this.radius,m),y=v,x=c,C=Math.max(1,Math.floor(g/5));return this.arcTo(d,y-v+g,x-c+g,g,Math.PI,Math.PI*1.5,C),d.push(y+v-g,x-c),this.arcTo(d,y+v-g,x-c+g,g,Math.PI*1.5,Math.PI*2,C),d.push(y+v,x+c-g),this.arcTo(d,y+v-g,x+c-g,g,0,Math.PI*.5,C),d.push(y-v+g,x+c),this.arcTo(d,y-v+g,x+c-g,g,Math.PI*.5,Math.PI,C),d.push(y-v,x-c+g),this.pathIndexes=p(d),this.pathData=d,this},arcTo:function(d,v,c,m,g,y,x){for(var C=(y-g)/x,S=0;S<=x;S++){var E=g+C*S;d.push(v+Math.cos(E)*m,c+Math.sin(E)*m)}}});n.exports=l},48682:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(l,d,v,c,m,g){var y=Math.min(c/2,m/2),x=Math.min(g,y);if(x===0){l.rect(d,v,c,m);return}l.moveTo(d+x,v),l.lineTo(d+c-x,v),l.arcTo(d+c,v,d+c,v+x,x),l.lineTo(d+c,v+m-x),l.arcTo(d+c,v+m,d+c-x,v+m,x),l.lineTo(d+x,v+m),l.arcTo(d,v+m,d,v+m-x,x),l.lineTo(d,v+x),l.arcTo(d,v,d+x,v,x),l.closePath()},f=function(l,d,v,c){v.addToRenderList(d);var m=l.currentContext;if(h(l,m,d,v,c)){var g=d._displayOriginX,y=d._displayOriginY;d.isFilled&&(a(m,d),d.isRounded?(m.beginPath(),u(m,-g,-y,d.width,d.height,d.radius),m.fill()):m.fillRect(-g,-y,d.width,d.height)),d.isStroked&&(p(m,d),m.beginPath(),d.isRounded?u(m,-g,-y,d.width,d.height,d.radius):m.rect(-g,-y,d.width,d.height),m.stroke()),m.restore()}};n.exports=f},87959:(n,o,r)=>{var a=r(39429),p=r(74561);a.register("rectangle",function(h,u,f,l,d,v){return this.displayList.add(new p(this.scene,h,u,f,l,d,v))})},95597:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(52059),h=r(48682),n.exports={renderWebGL:p,renderCanvas:h}},52059:(n,o,r)=>{var a=r(10441),p=r(91296),h=r(34682),u=r(70554),f=function(l,d,v,c){v.addToRenderList(d);var m=l.pipelines.set(d.pipeline),g=p(d,v,c);m.calcMatrix.copyFrom(g.calc);var y=d._displayOriginX,x=d._displayOriginY,C=v.alpha*d.alpha;if(l.pipelines.preBatch(d),d.isRounded&&d.isFilled)a(m,g.calc,d,C,y,x);else if(d.isFilled){var S=m.fillTint,E=u.getTintAppendFloatAlpha(d.fillColor,d.fillAlpha*C);S.TL=E,S.TR=E,S.BL=E,S.BR=E,m.batchFillRect(-y,-x,d.width,d.height)}d.isStroked&&h(m,d,C,y,x),l.pipelines.postBatch(d)};n.exports=f},55911:(n,o,r)=>{var a=r(81991),p=r(83419),h=r(94811),u=r(17803),f=new p({Extends:u,Mixins:[a],initialize:function(d,v,c,m,g,y,x,C){v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=5),g===void 0&&(g=32),y===void 0&&(y=64),u.call(this,d,"Star",null),this._points=m,this._innerRadius=g,this._outerRadius=y,this.setPosition(v,c),this.setSize(y*2,y*2),x!==void 0&&this.setFillStyle(x,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function(l){return this._points=l,this.updateData()},setInnerRadius:function(l){return this._innerRadius=l,this.updateData()},setOuterRadius:function(l){return this._outerRadius=l,this.updateData()},points:{get:function(){return this._points},set:function(l){this._points=l,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(l){this._innerRadius=l,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(l){this._outerRadius=l,this.updateData()}},updateData:function(){var l=[],d=this._points,v=this._innerRadius,c=this._outerRadius,m=Math.PI/2*3,g=Math.PI/d,y=c,x=c;l.push(y,x+-c);for(var C=0;C<d;C++)l.push(y+Math.cos(m)*c,x+Math.sin(m)*c),m+=g,l.push(y+Math.cos(m)*v,x+Math.sin(m)*v),m+=g;return l.push(y,x+-c),this.pathIndexes=h(l),this.pathData=l,this}});n.exports=f},64272:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(f,l,d,v){d.addToRenderList(l);var c=f.currentContext;if(h(f,c,l,d,v)){var m=l._displayOriginX,g=l._displayOriginY,y=l.pathData,x=y.length-1,C=y[0]-m,S=y[1]-g;c.beginPath(),c.moveTo(C,S),l.closePath||(x-=2);for(var E=2;E<x;E+=2){var T=y[E]-m,P=y[E+1]-g;c.lineTo(T,P)}c.closePath(),l.isFilled&&(a(c,l),c.fill()),l.isStroked&&(p(c,l),c.stroke()),c.restore()}};n.exports=u},93697:(n,o,r)=>{var a=r(55911),p=r(39429);p.register("star",function(h,u,f,l,d,v,c){return this.displayList.add(new a(this.scene,h,u,f,l,d,v,c))})},81991:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(57017),h=r(64272),n.exports={renderWebGL:p,renderCanvas:h}},57017:(n,o,r)=>{var a=r(10441),p=r(91296),h=r(34682),u=function(f,l,d,v){d.addToRenderList(l);var c=f.pipelines.set(l.pipeline),m=p(l,d,v),g=c.calcMatrix.copyFrom(m.calc),y=l._displayOriginX,x=l._displayOriginY,C=d.alpha*l.alpha;f.pipelines.preBatch(l),l.isFilled&&a(c,g,l,C,y,x),l.isStroked&&h(c,l,C,y,x),f.pipelines.postBatch(l)};n.exports=u},36931:(n,o,r)=>{var a=r(83419),p=r(17803),h=r(16483),u=r(96195),f=new a({Extends:p,Mixins:[u],initialize:function(d,v,c,m,g,y,x,C,S,E,T){v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=128),y===void 0&&(y=64),x===void 0&&(x=0),C===void 0&&(C=128),S===void 0&&(S=128),p.call(this,d,"Triangle",new h(m,g,y,x,C,S));var P=this.geom.right-this.geom.left,M=this.geom.bottom-this.geom.top;this.setPosition(v,c),this.setSize(P,M),E!==void 0&&this.setFillStyle(E,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(l,d,v,c,m,g){return this.geom.setTo(l,d,v,c,m,g),this.updateData()},updateData:function(){var l=[],d=this.geom,v=this._tempLine;return d.getLineA(v),l.push(v.x1,v.y1,v.x2,v.y2),d.getLineB(v),l.push(v.x2,v.y2),d.getLineC(v),l.push(v.x2,v.y2),this.pathData=l,this}});n.exports=f},85172:(n,o,r)=>{var a=r(65960),p=r(75177),h=r(20926),u=function(f,l,d,v){d.addToRenderList(l);var c=f.currentContext;if(h(f,c,l,d,v)){var m=l._displayOriginX,g=l._displayOriginY,y=l.geom.x1-m,x=l.geom.y1-g,C=l.geom.x2-m,S=l.geom.y2-g,E=l.geom.x3-m,T=l.geom.y3-g;c.beginPath(),c.moveTo(y,x),c.lineTo(C,S),c.lineTo(E,T),c.closePath(),l.isFilled&&(a(c,l),c.fill()),l.isStroked&&(p(c,l),c.stroke()),c.restore()}};n.exports=u},45245:(n,o,r)=>{var a=r(39429),p=r(36931);a.register("triangle",function(h,u,f,l,d,v,c,m,g,y){return this.displayList.add(new p(this.scene,h,u,f,l,d,v,c,m,g,y))})},96195:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(83253),h=r(85172),n.exports={renderWebGL:p,renderCanvas:h}},83253:(n,o,r)=>{var a=r(91296),p=r(34682),h=r(70554),u=function(f,l,d,v){d.addToRenderList(l);var c=f.pipelines.set(l.pipeline),m=a(l,d,v);c.calcMatrix.copyFrom(m.calc);var g=l._displayOriginX,y=l._displayOriginY,x=d.alpha*l.alpha;if(f.pipelines.preBatch(l),l.isFilled){var C=c.fillTint,S=h.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*x);C.TL=S,C.TR=S,C.BL=S,C.BR=S;var E=l.geom.x1-g,T=l.geom.y1-y,P=l.geom.x2-g,M=l.geom.y2-y,w=l.geom.x3-g,b=l.geom.y3-y;c.batchFillTriangle(E,T,P,M,w,b,m.sprite,m.camera)}l.isStroked&&p(c,l,x,g,y),f.pipelines.postBatch(l)};n.exports=u},68287:(n,o,r)=>{var a=r(9674),p=r(83419),h=r(31401),u=r(95643),f=r(92751),l=new p({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,f],initialize:function(v,c,m,g,y){u.call(this,v,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(g,y),this.setPosition(c,m),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(d,v){this.anims.update(d,v)},play:function(d,v){return this.anims.play(d,v)},playReverse:function(d,v){return this.anims.playReverse(d,v)},playAfterDelay:function(d,v){return this.anims.playAfterDelay(d,v)},playAfterRepeat:function(d,v){return this.anims.playAfterRepeat(d,v)},chain:function(d){return this.anims.chain(d)},stop:function(){return this.anims.stop()},stopAfterDelay:function(d){return this.anims.stopAfterDelay(d)},stopAfterRepeat:function(d){return this.anims.stopAfterRepeat(d)},stopOnFrame:function(d){return this.anims.stopOnFrame(d)},toJSON:function(){return h.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});n.exports=l},76552:n=>{var o=function(r,a,p,h){p.addToRenderList(a),r.batchSprite(a,a.frame,p,h)};n.exports=o},15567:(n,o,r)=>{var a=r(25305),p=r(13059),h=r(44603),u=r(23568),f=r(68287);h.register("sprite",function(l,d){l===void 0&&(l={});var v=u(l,"key",null),c=u(l,"frame",null),m=new f(this.scene,0,0,v,c);return d!==void 0&&(l.add=d),a(this.scene,m,l),p(m,l),m})},46409:(n,o,r)=>{var a=r(39429),p=r(68287);a.register("sprite",function(h,u,f,l){return this.displayList.add(new p(this.scene,h,u,f,l))})},92751:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(9409),h=r(76552),n.exports={renderWebGL:p,renderCanvas:h}},9409:n=>{var o=function(r,a,p,h){p.addToRenderList(a),a.pipeline.batchSprite(a,p,h)};n.exports=o},14220:n=>{var o=function(r,a,p){var h=r.canvas,u=r.context,f=r.style,l=[],d=0,v=p.length;f.maxLines>0&&f.maxLines<p.length&&(v=f.maxLines),f.syncFont(h,u);for(var c=r.letterSpacing,m=0;m<v;m++){var g=f.strokeThickness;if(c===0)g+=u.measureText(p[m]).width;else{for(var y=p[m],x=0;x<y.length;x++)g+=u.measureText(y[x]).width;y.length>1&&(g+=c*(y.length-1))}f.wordWrap&&(g-=u.measureText(" ").width),l[m]=Math.ceil(g),d=Math.max(d,l[m])}var C=a.fontSize+f.strokeThickness,S=C*v,E=r.lineSpacing;return v>1&&(S+=E*(v-1)),{width:d,height:S,lines:v,lineWidths:l,lineSpacing:E,lineHeight:C}};n.exports=o},79557:(n,o,r)=>{var a=r(27919),p=function(h){var u=a.create(this),f=u.getContext("2d",{willReadFrequently:!0});h.syncFont(u,f);var l=f.measureText(h.testString);if("actualBoundingBoxAscent"in l){var d=l.actualBoundingBoxAscent,v=l.actualBoundingBoxDescent;return a.remove(u),{ascent:d,descent:v,fontSize:d+v}}var c=Math.ceil(l.width*h.baselineX),m=c,g=2*m;m=m*h.baselineY|0,u.width=c,u.height=g,f.fillStyle="#f00",f.fillRect(0,0,c,g),f.font=h._font,f.textBaseline="alphabetic",f.fillStyle="#000",f.fillText(h.testString,0,m);var y={ascent:0,descent:0,fontSize:0},x=f.getImageData(0,0,c,g);if(!x)return y.ascent=m,y.descent=m+6,y.fontSize=y.ascent+y.descent,a.remove(u),y;var C=x.data,S=C.length,E=c*4,T,P,M=0,w=!1;for(T=0;T<m;T++){for(P=0;P<E;P+=4)if(C[M+P]!==255){w=!0;break}if(!w)M+=E;else break}for(y.ascent=m-T,M=S-E,w=!1,T=g;T>m;T--){for(P=0;P<E;P+=4)if(C[M+P]!==255){w=!0;break}if(!w)M-=E;else break}return y.descent=T-m,y.fontSize=y.ascent+y.descent,a.remove(u),y};n.exports=p},50171:(n,o,r)=>{var a=r(40366),p=r(27919),h=r(83419),u=r(31401),f=r(95643),l=r(14220),d=r(35154),v=r(35846),c=r(61771),m=r(35762),g=r(45650),y=new h({Extends:f,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,c],initialize:function(C,S,E,T,P){S===void 0&&(S=0),E===void 0&&(E=0),f.call(this,C,"Text"),this.renderer=C.sys.renderer,this.setPosition(S,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=p.create(this),this.context,this.style=new m(this,P),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=g(),this.texture=C.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(T),P&&P.padding&&this.setPadding(P.padding),P&&P.lineSpacing&&this.setLineSpacing(P.lineSpacing),P&&P.letterSpacing&&this.setLetterSpacing(P.letterSpacing)},initRTL:function(){if(!this.style.rtl){this.canvas.dir="ltr",this.context.direction="ltr";return}this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1},runWordWrap:function(x){var C=this.style;if(C.wordWrapCallback){var S=C.wordWrapCallback.call(C.wordWrapCallbackScope,x,this);return Array.isArray(S)&&(S=S.join(`
`)),S}else return C.wordWrapWidth?C.wordWrapUseAdvanced?this.advancedWordWrap(x,this.context,this.style.wordWrapWidth):this.basicWordWrap(x,this.context,this.style.wordWrapWidth):x},advancedWordWrap:function(x,C,S){for(var E="",T=x.replace(/ +/gi," ").split(this.splitRegExp),P=T.length,M=0;M<P;M++){var w=T[M],b="";w=w.replace(/^ *|\s*$/gi,"");var I=w.length*this.letterSpacing,R=C.measureText(w).width+I;if(R<S){E+=w+`
`;continue}for(var A=S,L=w.split(" "),O=0;O<L.length;O++){var F=L[O],G=F+" ",U=G.length*this.letterSpacing,z=C.measureText(G).width+U;if(z>A){if(O===0){for(var N=G;N.length;){N=N.slice(0,-1);var k=N.length*this.letterSpacing;if(z=C.measureText(N).width+k,z<=A)break}if(!N.length)throw new Error("wordWrapWidth < a single character");var D=F.substr(N.length);L[O]=D,b+=N}var V=L[O].length?O:O+1,B=L.slice(V).join(" ").replace(/[ \n]*$/gi,"");T.splice(M+1,0,B),P=T.length;break}else b+=G,A-=z}E+=b.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(x,C,S){for(var E="",T=x.split(this.splitRegExp),P=T.length-1,M=C.measureText(" ").width,w=0;w<=P;w++){for(var b=S,I=T[w].split(" "),R=I.length-1,A=0;A<=R;A++){var L=I[A],O=L.length*this.letterSpacing,F=C.measureText(L).width+O,G=F;A<R&&(G+=M),G>b&&A>0&&(E+=`
`,b=S),E+=L,A<R?(E+=" ",b-=G):b-=F}w<P&&(E+=`
`)}return E},getWrappedText:function(x){x===void 0&&(x=this._text),this.style.syncFont(this.canvas,this.context);var C=this.runWordWrap(x);return C.split(this.splitRegExp)},setText:function(x){return!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x!==this._text&&(this._text=x.toString(),this.updateText()),this},appendText:function(x,C){C===void 0&&(C=!0),!x&&x!==0&&(x=""),Array.isArray(x)&&(x=x.join(`
`)),x=x.toString();var S=this._text.concat(C?`
`+x:x);return S!==this._text&&(this._text=S,this.updateText()),this},setStyle:function(x){return this.style.setStyle(x)},setFont:function(x){return this.style.setFont(x)},setFontFamily:function(x){return this.style.setFontFamily(x)},setFontSize:function(x){return this.style.setFontSize(x)},setFontStyle:function(x){return this.style.setFontStyle(x)},setFixedSize:function(x,C){return this.style.setFixedSize(x,C)},setBackgroundColor:function(x){return this.style.setBackgroundColor(x)},setFill:function(x){return this.style.setFill(x)},setColor:function(x){return this.style.setColor(x)},setStroke:function(x,C){return this.style.setStroke(x,C)},setShadow:function(x,C,S,E,T,P){return this.style.setShadow(x,C,S,E,T,P)},setShadowOffset:function(x,C){return this.style.setShadowOffset(x,C)},setShadowColor:function(x){return this.style.setShadowColor(x)},setShadowBlur:function(x){return this.style.setShadowBlur(x)},setShadowStroke:function(x){return this.style.setShadowStroke(x)},setShadowFill:function(x){return this.style.setShadowFill(x)},setWordWrapWidth:function(x,C){return this.style.setWordWrapWidth(x,C)},setWordWrapCallback:function(x,C){return this.style.setWordWrapCallback(x,C)},setAlign:function(x){return this.style.setAlign(x)},setResolution:function(x){return this.style.setResolution(x)},setLineSpacing:function(x){return this.lineSpacing=x,this.updateText()},setLetterSpacing:function(x){return this.letterSpacing=x,this.updateText()},setPadding:function(x,C,S,E){if(typeof x=="object"){var T=x,P=d(T,"x",null);P!==null?(x=P,S=P):(x=d(T,"left",0),S=d(T,"right",x));var M=d(T,"y",null);M!==null?(C=M,E=M):(C=d(T,"top",0),E=d(T,"bottom",C))}else x===void 0&&(x=0),C===void 0&&(C=x),S===void 0&&(S=x),E===void 0&&(E=C);return this.padding.left=x,this.padding.top=C,this.padding.right=S,this.padding.bottom=E,this.updateText()},setMaxLines:function(x){return this.style.setMaxLines(x)},setRTL:function(x){x===void 0&&(x=!0);var C=this.style;return C.rtl===x?this:(C.rtl=x,x?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),C.align==="left"?C.align="right":C.align==="right"&&(C.align="left"),this)},updateText:function(){var x=this.canvas,C=this.context,S=this.style,E=S.resolution,T=S.metrics;S.syncFont(x,C);var P=this._text;(S.wordWrapWidth||S.wordWrapCallback)&&(P=this.runWordWrap(this._text));var M=P.split(this.splitRegExp),w=l(this,T,M),b=this.padding,I;S.fixedWidth===0?(this.width=w.width+b.left+b.right,I=w.width):(this.width=S.fixedWidth,I=this.width-b.left-b.right,I<w.width&&(I=w.width)),S.fixedHeight===0?this.height=w.height+b.top+b.bottom:this.height=S.fixedHeight;var R=this.width,A=this.height;this.updateDisplayOrigin(),R*=E,A*=E,R=Math.max(R,1),A=Math.max(A,1),x.width!==R||x.height!==A?(x.width=R,x.height=A,this.frame.setSize(R,A),S.syncFont(x,C),S.rtl&&(C.direction="rtl")):C.clearRect(0,0,R,A),C.save(),C.scale(E,E),S.backgroundColor&&(C.fillStyle=S.backgroundColor,C.fillRect(0,0,R,A)),S.syncStyle(x,C),C.translate(b.left,b.top);for(var L,O,F=0;F<w.lines;F++){if(L=S.strokeThickness/2,O=S.strokeThickness/2+F*w.lineHeight+T.ascent,F>0&&(O+=w.lineSpacing*F),S.rtl)L=R-L-b.left-b.right;else if(S.align==="right")L+=I-w.lineWidths[F];else if(S.align==="center")L+=(I-w.lineWidths[F])/2;else if(S.align==="justify"){var G=.85;if(w.lineWidths[F]/w.width>=G){var U=w.width-w.lineWidths[F],z=C.measureText(" ").width,N=M[F].trim(),k=N.split(" ");U+=(M[F].length-N.length)*z;for(var D=Math.floor(U/z),V=0;D>0;)k[V]+=" ",V=(V+1)%(k.length-1||1),--D;M[F]=k.join(" ")}}this.autoRound&&(L=Math.round(L),O=Math.round(O));var B=this.letterSpacing;if(S.strokeThickness&&B===0&&(S.syncShadow(C,S.shadowStroke),C.strokeText(M[F],L,O)),S.color)if(S.syncShadow(C,S.shadowFill),B!==0)for(var W=0,H=M[F].split(""),Y=0;Y<H.length;Y++)S.strokeThickness&&(S.syncShadow(C,S.shadowStroke),C.strokeText(H[Y],L+W,O),S.syncShadow(C,S.shadowFill)),C.fillText(H[Y],L+W,O),W+=C.measureText(H[Y]).width+B;else C.fillText(M[F],L,O)}C.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(x,this.frame.source.glTexture,!0));var X=this.input;return X&&!X.customHitArea&&(X.hitArea.width=this.width,X.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(x){this.setText(x)}},toJSON:function(){var x=u.ToJSON(this),C={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return x.data=C,x},preDestroy:function(){v(this.canvas),p.remove(this.canvas);var x=this.texture;x&&x.destroy()}});n.exports=y},79724:n=>{var o=function(r,a,p,h){a.width===0||a.height===0||(p.addToRenderList(a),r.batchSprite(a,a.frame,p,h))};n.exports=o},71259:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(50171);p.register("text",function(f,l){f===void 0&&(f={});var d=h(f,"text",""),v=h(f,"style",null),c=h(f,"padding",null);c!==null&&(v.padding=c);var m=new u(this.scene,0,0,d,v);return l!==void 0&&(f.add=l),a(this.scene,m,f),m.autoRound=h(f,"autoRound",!0),m.resolution=h(f,"resolution",1),m})},68005:(n,o,r)=>{var a=r(50171),p=r(39429);p.register("text",function(h,u,f,l){return this.displayList.add(new a(this.scene,h,u,f,l))})},61771:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(34397),h=r(79724),n.exports={renderWebGL:p,renderCanvas:h}},35762:(n,o,r)=>{var a=r(83419),p=r(23568),h=r(35154),u=r(79557),f={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new a({initialize:function(v,c){this.parent=v,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(c,!1,!0)},setStyle:function(d,v,c){v===void 0&&(v=!0),c===void 0&&(c=!1);for(var m in f){var g=c?f[m][1]:this[m];m==="wordWrapCallback"||m==="wordWrapCallbackScope"?this[m]=h(d,f[m][0],g):d&&m==="fontSize"&&typeof d.fontSize=="number"?this[m]=d.fontSize.toString()+"px":this[m]=p(d,f[m][0],g)}var y=h(d,"font",null);y!==null&&this.setFont(y,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var x=h(d,"fill",null);x!==null&&(this.color=x);var C=h(d,"metrics",!1);return C?this.metrics={ascent:h(C,"ascent",0),descent:h(C,"descent",0),fontSize:h(C,"fontSize",0)}:(v||!this.metrics)&&(this.metrics=u(this)),v?this.parent.updateText():this.parent},syncFont:function(d,v){v.font=this._font},syncStyle:function(d,v){v.textBaseline="alphabetic",v.fillStyle=this.color,v.strokeStyle=this.stroke,v.lineWidth=this.strokeThickness,v.lineCap="round",v.lineJoin="round"},syncShadow:function(d,v){v?(d.shadowOffsetX=this.shadowOffsetX,d.shadowOffsetY=this.shadowOffsetY,d.shadowColor=this.shadowColor,d.shadowBlur=this.shadowBlur):(d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowColor=0,d.shadowBlur=0)},update:function(d){return d&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(d,v){v===void 0&&(v=!0);var c=d,m="",g="";if(typeof d!="string")c=h(d,"fontFamily","Courier"),m=h(d,"fontSize","16px"),g=h(d,"fontStyle","");else{var y=d.split(" "),x=0;g=y.length>2?y[x++]:"",m=y[x++]||"16px",c=y[x++]||"Courier"}return(c!==this.fontFamily||m!==this.fontSize||g!==this.fontStyle)&&(this.fontFamily=c,this.fontSize=m,this.fontStyle=g,v&&this.update(!0)),this.parent},setFontFamily:function(d){return this.fontFamily!==d&&(this.fontFamily=d,this.update(!0)),this.parent},setFontStyle:function(d){return this.fontStyle!==d&&(this.fontStyle=d,this.update(!0)),this.parent},setFontSize:function(d){return typeof d=="number"&&(d=d.toString()+"px"),this.fontSize!==d&&(this.fontSize=d,this.update(!0)),this.parent},setTestString:function(d){return this.testString=d,this.update(!0)},setFixedSize:function(d,v){return this.fixedWidth=d,this.fixedHeight=v,d&&(this.parent.width=d),v&&(this.parent.height=v),this.update(!1)},setBackgroundColor:function(d){return this.backgroundColor=d,this.update(!1)},setFill:function(d){return this.color=d,this.update(!1)},setColor:function(d){return this.color=d,this.update(!1)},setResolution:function(d){return this.resolution=d,this.update(!1)},setStroke:function(d,v){return v===void 0&&(v=this.strokeThickness),d===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==d||this.strokeThickness!==v)&&(this.stroke=d,this.strokeThickness=v,this.update(!0)),this.parent},setShadow:function(d,v,c,m,g,y){return d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c="#000"),m===void 0&&(m=0),g===void 0&&(g=!1),y===void 0&&(y=!0),this.shadowOffsetX=d,this.shadowOffsetY=v,this.shadowColor=c,this.shadowBlur=m,this.shadowStroke=g,this.shadowFill=y,this.update(!1)},setShadowOffset:function(d,v){return d===void 0&&(d=0),v===void 0&&(v=d),this.shadowOffsetX=d,this.shadowOffsetY=v,this.update(!1)},setShadowColor:function(d){return d===void 0&&(d="#000"),this.shadowColor=d,this.update(!1)},setShadowBlur:function(d){return d===void 0&&(d=0),this.shadowBlur=d,this.update(!1)},setShadowStroke:function(d){return this.shadowStroke=d,this.update(!1)},setShadowFill:function(d){return this.shadowFill=d,this.update(!1)},setWordWrapWidth:function(d,v){return v===void 0&&(v=!1),this.wordWrapWidth=d,this.wordWrapUseAdvanced=v,this.update(!1)},setWordWrapCallback:function(d,v){return v===void 0&&(v=null),this.wordWrapCallback=d,this.wordWrapCallbackScope=v,this.update(!1)},setAlign:function(d){return d===void 0&&(d="left"),this.align=d,this.update(!1)},setMaxLines:function(d){return d===void 0&&(d=0),this.maxLines=d,this.update(!1)},getTextMetrics:function(){var d=this.metrics;return{ascent:d.ascent,descent:d.descent,fontSize:d.fontSize}},toJSON:function(){var d={};for(var v in f)d[v]=this[v];return d.metrics=this.getTextMetrics(),d},destroy:function(){this.parent=void 0}});n.exports=l},34397:(n,o,r)=>{var a=r(70554),p=function(h,u,f,l){if(!(u.width===0||u.height===0)){f.addToRenderList(u);var d=u.frame,v=d.width,c=d.height,m=a.getTintAppendFloatAlpha,g=h.pipelines.set(u.pipeline,u),y=g.setTexture2D(d.glTexture,u);g.batchTexture(u,d.glTexture,v,c,u.x,u.y,v/u.style.resolution,c/u.style.resolution,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.displayOriginX,u.displayOriginY,0,0,v,c,m(u.tintTopLeft,f.alpha*u._alphaTL),m(u.tintTopRight,f.alpha*u._alphaTR),m(u.tintBottomLeft,f.alpha*u._alphaBL),m(u.tintBottomRight,f.alpha*u._alphaBR),u.tintFill,0,0,f,l,!1,y)}};n.exports=p},20839:(n,o,r)=>{var a=r(27919),p=r(83419),h=r(31401),u=r(95643),f=r(98439),l=r(68703),d=r(56295),v=r(45650),c=r(26099),m=8,g=new p({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,d],initialize:function(x,C,S,E,T,P,M){var w=x.sys.renderer;u.call(this,x,"TileSprite");var b=x.sys.textures.get(P),I=b.get(M);I.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),b=x.sys.textures.get("__MISSING"),I=b.get()),b.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),b=x.sys.textures.get("__MISSING"),I=b.get()),!E||!T?(E=E||I.width,T=T||I.height):(E=Math.floor(E),T=Math.floor(T)),this._tilePosition=new c,this._tileScale=new c(1,1),this.dirty=!1,this.renderer=w,this.canvas=a.create(this,E,T),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=b,this.displayFrame=I,this._crop=this.resetCropObject(),this._textureKey=v(),this.texture=x.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=f(I.width),this.potHeight=f(I.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(C,S),this.setSize(E,T),this.setFrame(M),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(y,x){return this.displayTexture=this.scene.sys.textures.get(y),this.setFrame(x)},setFrame:function(y){var x=this.displayTexture.get(y);return this.potWidth=f(x.width),this.potHeight=f(x.height),this.canvas.width=0,!x.cutWidth||!x.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this.displayFrame=x,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(y,x){return y!==void 0&&(this.tilePositionX=y),x!==void 0&&(this.tilePositionY=x),this},setTileScale:function(y,x){return y===void 0&&(y=this.tileScaleX),x===void 0&&(x=y),this.tileScaleX=y,this.tileScaleY=x,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var y=this.displayFrame;if(y.source.isRenderTexture||y.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var x=this.fillContext,C=this.fillCanvas,S=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(S=y.cutWidth,E=y.cutHeight),x.clearRect(0,0,S,E),C.width=S,C.height=E,x.drawImage(y.source.image,y.cutX,y.cutY,y.cutWidth,y.cutHeight,0,0,S,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(C,this.fillPattern):this.fillPattern=x.createPattern(C,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var y=this.canvas;if((y.width!==this.width||y.height!==this.height)&&(y.width=this.width,y.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var x=this.context;this.scene.sys.game.config.antialias||l.disable(x);var C=this._tileScale.x,S=this._tileScale.y,E=this._tilePosition.x,T=this._tilePosition.y;x.clearRect(0,0,this.width,this.height),x.save(),x.scale(C,S),x.translate(-E,-T),x.fillStyle=this.fillPattern,x.fillRect(E,T,this.width/C,this.height/S),x.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var y=this.texture;y&&y.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(y){this._tilePosition.x=y,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(y){this._tilePosition.y=y,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(y){this._tileScale.x=y,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(y){this._tileScale.y=y,this.dirty=!0}}});n.exports=g},46992:n=>{var o=function(r,a,p,h){a.updateCanvas(),p.addToRenderList(a),r.batchSprite(a,a.frame,p,h)};n.exports=o},14167:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(20839);p.register("tileSprite",function(f,l){f===void 0&&(f={});var d=h(f,"x",0),v=h(f,"y",0),c=h(f,"width",512),m=h(f,"height",512),g=h(f,"key",""),y=h(f,"frame",""),x=new u(this.scene,d,v,c,m,g,y);return l!==void 0&&(f.add=l),a(this.scene,x,f),x})},91681:(n,o,r)=>{var a=r(20839),p=r(39429);p.register("tileSprite",function(h,u,f,l,d,v){return this.displayList.add(new a(this.scene,h,u,f,l,d,v))})},56295:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(18553),h=r(46992),n.exports={renderWebGL:p,renderCanvas:h}},18553:(n,o,r)=>{var a=r(70554),p=function(h,u,f,l){u.updateCanvas();var d=u.width,v=u.height;if(!(d===0||v===0)){f.addToRenderList(u);var c=a.getTintAppendFloatAlpha,m=h.pipelines.set(u.pipeline,u),g=m.setTexture2D(u.fillPattern,u);m.batchTexture(u,u.fillPattern,u.displayFrame.width*u.tileScaleX,u.displayFrame.height*u.tileScaleY,u.x,u.y,d,v,u.scaleX,u.scaleY,u.rotation,u.flipX,u.flipY,u.scrollFactorX,u.scrollFactorY,u.originX*d,u.originY*v,0,0,d,v,c(u.tintTopLeft,f.alpha*u._alphaTL),c(u.tintTopRight,f.alpha*u._alphaTR),c(u.tintBottomLeft,f.alpha*u._alphaBL),c(u.tintBottomRight,f.alpha*u._alphaBR),u.tintFill,u.tilePositionX%u.displayFrame.width/u.displayFrame.width,u.tilePositionY%u.displayFrame.height/u.displayFrame.height,f,l,!1,g)}};n.exports=p},18471:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(31401),u=r(51708),f=r(8443),l=r(95643),d=r(36383),v=r(14463),c=r(45650),m=r(10247),g=new p({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.TextureCrop,h.Tint,h.Transform,h.Visible,m],initialize:function(x,C,S,E){l.call(this,x,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=c(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._getFrame=!1,this._rfvCallbackId=0;var T=x.sys.game;this._device=T.device.video,this.setPosition(C,S),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),T.events.on(f.PAUSE,this.globalPause,this),T.events.on(f.RESUME,this.globalResume,this);var P=x.sys.sound;P&&P.on(v.GLOBAL_MUTE,this.globalMute,this),E&&this.load(E)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(y){var x=this.scene.sys.cache.video.get(y);return x?(this.cacheKey=y,this.loadHandler(x.url,x.noAudio,x.crossOrigin)):console.warn("No video in cache for key: "+y),this},changeSource:function(y,x,C,S,E){x===void 0&&(x=!0),C===void 0&&(C=!1),this.cacheKey!==y&&(this.load(y),x&&this.play(C,S,E))},getVideoKey:function(){return this.cacheKey},loadURL:function(y,x,C){x===void 0&&(x=!1);var S=this._device.getVideoURL(y);return S?(this.cacheKey="",this.loadHandler(S.url,x,C)):console.warn("No supported video format found for "+y),this},loadMediaStream:function(y,x,C){return this.loadHandler(null,x,C,y)},loadHandler:function(y,x,C,S){x||(x=!1);var E=this.video;if(E?(this.removeLoadEventHandlers(),this.stop()):(E=document.createElement("video"),E.controls=!1,E.setAttribute("playsinline","playsinline"),E.setAttribute("preload","auto"),E.setAttribute("disablePictureInPicture","true")),x?(E.muted=!0,E.defaultMuted=!0,E.setAttribute("autoplay","autoplay")):(E.muted=!1,E.defaultMuted=!1,E.removeAttribute("autoplay")),C?E.setAttribute("crossorigin",C):E.removeAttribute("crossorigin"),S)if("srcObject"in E)try{E.srcObject=S}catch(P){if(P.name!=="TypeError")throw P;E.src=URL.createObjectURL(S)}else E.src=URL.createObjectURL(S);else E.src=y;this.retry=0,this.video=E,this._playCalled=!1,E.load(),this.addLoadEventHandlers();var T=this.scene.sys.textures.get(this._key);return this.setTexture(T),this},requestVideoFrame:function(y,x){var C=this.video;if(C){var S=x.width,E=x.height,T=this.videoTexture,P=this.videoTextureSource,M=!T||P.source!==C;M?(this._codePaused=C.paused,this._codeMuted=C.muted,T?(P.source=C,P.width=S,P.height=E,T.get().setSize(S,E)):(T=this.scene.sys.textures.create(this._key,C,S,E),T.add("__BASE",0,0,0,S,E),this.setTexture(T),this.videoTexture=T,this.videoTextureSource=T.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(u.VIDEO_TEXTURE,this,T)),this.setSizeToFrame(),this.updateDisplayOrigin()):P.update(),this.isStalled=!1,this.metadata=x;var w=x.mediaTime;M&&(this._lastUpdate=w,this.emit(u.VIDEO_CREATED,this,S,E),this.frameReady||(this.frameReady=!0,this.emit(u.VIDEO_PLAY,this))),this._playingMarker?w>=this._markerOut&&(C.loop?(C.currentTime=this._markerIn,this.emit(u.VIDEO_LOOP,this)):(this.stop(!1),this.emit(u.VIDEO_COMPLETE,this))):w<this._lastUpdate&&this.emit(u.VIDEO_LOOP,this),this._lastUpdate=w,this._getFrame?(this.removeEventHandlers(),C.pause(),this._getFrame=!1):this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(y,x,C){x===void 0&&(x=-1),C===void 0&&(C=d.MAX_SAFE_INTEGER);var S=this.video;return!S||this.isPlaying()?(S||console.warn("Video not loaded"),this):(y===void 0&&(y=S.loop),S.loop=y,this._markerIn=x,this._markerOut=C,this._playingMarker=x>-1&&C>x&&C<d.MAX_SAFE_INTEGER,this._playCalled||(this._getFrame=!1,this._rfvCallbackId=S.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},getFirstFrame:function(){var y=this.video;return!y||this.isPlaying()?(y||console.warn("Video not loaded"),this):(this._playCalled||(this._getFrame=!0,this._rfvCallbackId=y.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this.createPlayPromise()),this)},addLoadEventHandlers:function(){var y=this.video;y&&(y.addEventListener("error",this._loadCallbackHandler),y.addEventListener("abort",this._loadCallbackHandler),y.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var y=this.video;y&&(y.removeEventListener("error",this._loadCallbackHandler),y.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var y=this.video;if(y){var x=this._callbacks;for(var C in x)y.addEventListener(C,x[C])}},removeEventHandlers:function(){var y=this.video;if(y){var x=this._callbacks;for(var C in x)y.removeEventListener(C,x[C])}},createPlayPromise:function(y){y===void 0&&(y=!0);var x=this.video,C=x.play();if(C!==void 0){var S=this.playSuccess.bind(this),E=this.playError.bind(this);if(!y){var T=this;E=function(){T.failedPlayAttempts++}}C.then(S).catch(E)}else x.addEventListener("playing",this._callbacks.legacy),y||this.failedPlayAttempts++},addMarker:function(y,x,C){return!isNaN(x)&&x>=0&&!isNaN(C)&&C>x&&(this.markers[y]=[x,C]),this},playMarker:function(y,x){var C=this.markers[y];return C&&this.play(x,C[0],C[1]),this},removeMarker:function(y){return delete this.markers[y],this},snapshot:function(y,x){return y===void 0&&(y=this.width),x===void 0&&(x=this.height),this.snapshotArea(0,0,this.width,this.height,y,x)},snapshotArea:function(y,x,C,S,E,T){y===void 0&&(y=0),x===void 0&&(x=0),C===void 0&&(C=this.width),S===void 0&&(S=this.height),E===void 0&&(E=C),T===void 0&&(T=S);var P=this.video,M=this.snapshotTexture;return M?(M.setSize(E,T),P&&M.context.drawImage(P,y,x,C,S,0,0,E,T)):(M=this.scene.sys.textures.createCanvas(c(),E,T),this.snapshotTexture=M,P&&M.context.drawImage(P,y,x,C,S,0,0,E,T)),M.update()},saveSnapshotTexture:function(y){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,y):this.snapshotTexture=this.scene.sys.textures.createCanvas(y,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(u.VIDEO_UNLOCKED,this));var y=this.scene.sys.sound;y&&y.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(y){var x=y.name;x==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(u.VIDEO_LOCKED,this)):x==="NotSupportedError"?(this.stop(!1),this.emit(u.VIDEO_UNSUPPORTED,this,y)):(this.stop(!1),this.emit(u.VIDEO_ERROR,this,y))},legacyPlayHandler:function(){var y=this.video;y&&(this.playSuccess(),y.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(u.VIDEO_PLAYING,this)},loadErrorHandler:function(y){this.stop(!1),this.emit(u.VIDEO_ERROR,this,y)},metadataHandler:function(y){this.emit(u.VIDEO_METADATA,this,y)},setSizeToFrame:function(y){y||(y=this.frame),this.width=y.realWidth,this.height=y.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var x=this.input;return x&&!x.customHitArea&&(x.hitArea.width=this.width,x.hitArea.height=this.height),this},stalledHandler:function(y){this.isStalled=!0,this.emit(u.VIDEO_STALLED,this,y)},completeHandler:function(){this._playCalled=!1,this.emit(u.VIDEO_COMPLETE,this)},preUpdate:function(y,x){var C=this.video;!C||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=x,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(y){var x=this.video;if(x){var C=x.duration;if(C!==1/0&&!isNaN(C)){var S=C*y;this.setCurrentTime(S)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(y){var x=this.video;if(x){if(typeof y=="string"){var C=y[0],S=parseFloat(y.substr(1));C==="+"?y=x.currentTime+S:C==="-"&&(y=x.currentTime-S)}x.currentTime=y}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(u.VIDEO_SEEKED,this)},getProgress:function(){var y=this.video;if(y){var x=y.duration;if(x!==1/0&&!isNaN(x))return y.currentTime/x}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(y){y===void 0&&(y=!0),this._codeMuted=y;var x=this.video;return x&&(x.muted=this._systemMuted?!0:y),this},isMuted:function(){return this._codeMuted},globalMute:function(y,x){this._systemMuted=x;var C=this.video;C&&(C.muted=this._codeMuted?!0:x)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(y){y===void 0&&(y=!0);var x=this.video;return this._codePaused=y,x&&!x.ended&&(y?x.paused||(this.removeEventHandlers(),x.pause()):y||(this._playCalled?x.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(y){return y===void 0&&(y=1),this.video&&(this.video.volume=a(y,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(y){return this.video&&(this.video.playbackRate=y),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(y){return y===void 0&&(y=!0),this.video&&(this.video.loop=y),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(y,x){return x===void 0&&(x=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,y),this.videoTextureSource.setFlipY(x)),this._key=y,this.flipY=x,!!this.videoTexture},stop:function(y){y===void 0&&(y=!0);var x=this.video;return x&&(this.removeEventHandlers(),x.cancelVideoFrameCallback(this._rfvCallbackId),x.pause()),this.retry=0,this._playCalled=!1,y&&this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var y=this.video;if(y){for(y.parentNode&&y.parentNode.removeChild(y);y.hasChildNodes();)y.removeChild(y.firstChild);y.removeAttribute("autoplay"),y.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var y=this.scene.sys.game.events;y.off(f.PAUSE,this.globalPause,this),y.off(f.RESUME,this.globalResume,this);var x=this.scene.sys.sound;x&&x.off(v.GLOBAL_MUTE,this.globalMute,this)}});n.exports=g},58352:n=>{var o=function(r,a,p,h){a.videoTexture&&(p.addToRenderList(a),r.batchSprite(a,a.frame,p,h))};n.exports=o},11511:(n,o,r)=>{var a=r(25305),p=r(44603),h=r(23568),u=r(18471);p.register("video",function(f,l){f===void 0&&(f={});var d=h(f,"key",null),v=new u(this.scene,0,0,d);return l!==void 0&&(f.add=l),a(this.scene,v,f),v})},89025:(n,o,r)=>{var a=r(18471),p=r(39429);p.register("video",function(h,u,f){return this.displayList.add(new a(this.scene,h,u,f))})},10247:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(29849),h=r(58352),n.exports={renderWebGL:p,renderCanvas:h}},29849:n=>{var o=function(r,a,p,h){a.videoTexture&&(p.addToRenderList(a),a.pipeline.batchSprite(a,p,h))};n.exports=o},41481:(n,o,r)=>{var a=r(10312),p=r(96503),h=r(87902),u=r(83419),f=r(31401),l=r(95643),d=r(87841),v=r(37303),c=new u({Extends:l,Mixins:[f.Depth,f.GetBounds,f.Origin,f.Transform,f.ScrollFactor,f.Visible],initialize:function(g,y,x,C,S){C===void 0&&(C=1),S===void 0&&(S=C),l.call(this,g,"Zone"),this.setPosition(y,x),this.width=C,this.height=S,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(m){this.scaleX=m/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(m){this.scaleY=m/this.height}},setSize:function(m,g,y){y===void 0&&(y=!0),this.width=m,this.height=g,this.updateDisplayOrigin();var x=this.input;return y&&x&&!x.customHitArea&&(x.hitArea.width=m,x.hitArea.height=g),this},setDisplaySize:function(m,g){return this.displayWidth=m,this.displayHeight=g,this},setCircleDropZone:function(m){return this.setDropZone(new p(0,0,m),h)},setRectangleDropZone:function(m,g){return this.setDropZone(new d(0,0,m,g),v)},setDropZone:function(m,g){return this.input||this.setInteractive(m,g,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(m,g,y){y.addToRenderList(g)},renderWebGL:function(m,g,y){y.addToRenderList(g)}});n.exports=c},95261:(n,o,r)=>{var a=r(44603),p=r(23568),h=r(41481);a.register("zone",function(u){var f=p(u,"x",0),l=p(u,"y",0),d=p(u,"width",1),v=p(u,"height",d);return new h(this.scene,f,l,d,v)})},84175:(n,o,r)=>{var a=r(41481),p=r(39429);p.register("zone",function(h,u,f,l){return this.displayList.add(new a(this.scene,h,u,f,l))})},95166:n=>{var o=function(r){return r.radius>0?Math.PI*r.radius*r.radius:0};n.exports=o},96503:(n,o,r)=>{var a=r(83419),p=r(87902),h=r(26241),u=r(79124),f=r(23777),l=r(28176),d=new a({initialize:function(c,m,g){c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=0),this.type=f.CIRCLE,this.x=c,this.y=m,this._radius=g,this._diameter=g*2},contains:function(v,c){return p(this,v,c)},getPoint:function(v,c){return h(this,v,c)},getPoints:function(v,c,m){return u(this,v,c,m)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,c,m){return this.x=v,this.y=c,this._radius=m,this._diameter=m*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(v,c){return c===void 0&&(c=v),this.x=v,this.y=c,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(v){this._radius=v,this._diameter=v*2}},diameter:{get:function(){return this._diameter},set:function(v){this._diameter=v,this._radius=v*.5}},left:{get:function(){return this.x-this._radius},set:function(v){this.x=v+this._radius}},right:{get:function(){return this.x+this._radius},set:function(v){this.x=v-this._radius}},top:{get:function(){return this.y-this._radius},set:function(v){this.y=v+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(v){this.y=v-this._radius}}});n.exports=d},71562:n=>{var o=function(r){return 2*(Math.PI*r.radius)};n.exports=o},92110:(n,o,r)=>{var a=r(2141),p=function(h,u,f){return f===void 0&&(f=new a),f.x=h.x+h.radius*Math.cos(u),f.y=h.y+h.radius*Math.sin(u),f};n.exports=p},42250:(n,o,r)=>{var a=r(96503),p=function(h){return new a(h.x,h.y,h.radius)};n.exports=p},87902:n=>{var o=function(r,a,p){if(r.radius>0&&a>=r.left&&a<=r.right&&p>=r.top&&p<=r.bottom){var h=(r.x-a)*(r.x-a),u=(r.y-p)*(r.y-p);return h+u<=r.radius*r.radius}else return!1};n.exports=o},5698:(n,o,r)=>{var a=r(87902),p=function(h,u){return a(h,u.x,u.y)};n.exports=p},70588:(n,o,r)=>{var a=r(87902),p=function(h,u){return a(h,u.x,u.y)&&a(h,u.right,u.y)&&a(h,u.x,u.bottom)&&a(h,u.right,u.bottom)};n.exports=p},26394:n=>{var o=function(r,a){return a.setTo(r.x,r.y,r.radius)};n.exports=o},76278:n=>{var o=function(r,a){return r.x===a.x&&r.y===a.y&&r.radius===a.radius};n.exports=o},2074:(n,o,r)=>{var a=r(87841),p=function(h,u){return u===void 0&&(u=new a),u.x=h.left,u.y=h.top,u.width=h.diameter,u.height=h.diameter,u};n.exports=p},26241:(n,o,r)=>{var a=r(92110),p=r(62945),h=r(36383),u=r(2141),f=function(l,d,v){v===void 0&&(v=new u);var c=p(d,0,h.PI2);return a(l,c,v)};n.exports=f},79124:(n,o,r)=>{var a=r(71562),p=r(92110),h=r(62945),u=r(36383),f=function(l,d,v,c){c===void 0&&(c=[]),!d&&v>0&&(d=a(l)/v);for(var m=0;m<d;m++){var g=h(m/d,0,u.PI2);c.push(p(l,g))}return c};n.exports=f},50884:n=>{var o=function(r,a,p){return r.x+=a,r.y+=p,r};n.exports=o},39212:n=>{var o=function(r,a){return r.x+=a.x,r.y+=a.y,r};n.exports=o},28176:(n,o,r)=>{var a=r(2141),p=function(h,u){u===void 0&&(u=new a);var f=2*Math.PI*Math.random(),l=Math.random()+Math.random(),d=l>1?2-l:l,v=d*Math.cos(f),c=d*Math.sin(f);return u.x=h.x+v*h.radius,u.y=h.y+c*h.radius,u};n.exports=p},88911:(n,o,r)=>{var a=r(96503);a.Area=r(95166),a.Circumference=r(71562),a.CircumferencePoint=r(92110),a.Clone=r(42250),a.Contains=r(87902),a.ContainsPoint=r(5698),a.ContainsRect=r(70588),a.CopyFrom=r(26394),a.Equals=r(76278),a.GetBounds=r(2074),a.GetPoint=r(26241),a.GetPoints=r(79124),a.Offset=r(50884),a.OffsetPoint=r(39212),a.Random=r(28176),n.exports=a},23777:n=>{var o={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};n.exports=o},78874:n=>{var o=function(r){return r.isEmpty()?0:r.getMajorRadius()*r.getMinorRadius()*Math.PI};n.exports=o},92990:n=>{var o=function(r){var a=r.width/2,p=r.height/2,h=Math.pow(a-p,2)/Math.pow(a+p,2);return Math.PI*(a+p)*(1+3*h/(10+Math.sqrt(4-3*h)))};n.exports=o},79522:(n,o,r)=>{var a=r(2141),p=function(h,u,f){f===void 0&&(f=new a);var l=h.width/2,d=h.height/2;return f.x=h.x+l*Math.cos(u),f.y=h.y+d*Math.sin(u),f};n.exports=p},58102:(n,o,r)=>{var a=r(8497),p=function(h){return new a(h.x,h.y,h.width,h.height)};n.exports=p},81154:n=>{var o=function(r,a,p){if(r.width<=0||r.height<=0)return!1;var h=(a-r.x)/r.width,u=(p-r.y)/r.height;return h*=h,u*=u,h+u<.25};n.exports=o},46662:(n,o,r)=>{var a=r(81154),p=function(h,u){return a(h,u.x,u.y)};n.exports=p},1632:(n,o,r)=>{var a=r(81154),p=function(h,u){return a(h,u.x,u.y)&&a(h,u.right,u.y)&&a(h,u.x,u.bottom)&&a(h,u.right,u.bottom)};n.exports=p},65534:n=>{var o=function(r,a){return a.setTo(r.x,r.y,r.width,r.height)};n.exports=o},8497:(n,o,r)=>{var a=r(83419),p=r(81154),h=r(90549),u=r(48320),f=r(23777),l=r(24820),d=new a({initialize:function(c,m,g,y){c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),this.type=f.ELLIPSE,this.x=c,this.y=m,this.width=g,this.height=y},contains:function(v,c){return p(this,v,c)},getPoint:function(v,c){return h(this,v,c)},getPoints:function(v,c,m){return u(this,v,c,m)},getRandomPoint:function(v){return l(this,v)},setTo:function(v,c,m,g){return this.x=v,this.y=c,this.width=m,this.height=g,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(v,c){return c===void 0&&(c=v),this.x=v,this.y=c,this},setSize:function(v,c){return c===void 0&&(c=v),this.width=v,this.height=c,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(v){this.x=v+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(v){this.x=v-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(v){this.y=v+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(v){this.y=v-this.height/2}}});n.exports=d},36146:n=>{var o=function(r,a){return r.x===a.x&&r.y===a.y&&r.width===a.width&&r.height===a.height};n.exports=o},23694:(n,o,r)=>{var a=r(87841),p=function(h,u){return u===void 0&&(u=new a),u.x=h.left,u.y=h.top,u.width=h.width,u.height=h.height,u};n.exports=p},90549:(n,o,r)=>{var a=r(79522),p=r(62945),h=r(36383),u=r(2141),f=function(l,d,v){v===void 0&&(v=new u);var c=p(d,0,h.PI2);return a(l,c,v)};n.exports=f},48320:(n,o,r)=>{var a=r(92990),p=r(79522),h=r(62945),u=r(36383),f=function(l,d,v,c){c===void 0&&(c=[]),!d&&v>0&&(d=a(l)/v);for(var m=0;m<d;m++){var g=h(m/d,0,u.PI2);c.push(p(l,g))}return c};n.exports=f},73424:n=>{var o=function(r,a,p){return r.x+=a,r.y+=p,r};n.exports=o},44808:n=>{var o=function(r,a){return r.x+=a.x,r.y+=a.y,r};n.exports=o},24820:(n,o,r)=>{var a=r(2141),p=function(h,u){u===void 0&&(u=new a);var f=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return u.x=h.x+l*Math.cos(f)*h.width/2,u.y=h.y+l*Math.sin(f)*h.height/2,u};n.exports=p},49203:(n,o,r)=>{var a=r(8497);a.Area=r(78874),a.Circumference=r(92990),a.CircumferencePoint=r(79522),a.Clone=r(58102),a.Contains=r(81154),a.ContainsPoint=r(46662),a.ContainsRect=r(1632),a.CopyFrom=r(65534),a.Equals=r(36146),a.GetBounds=r(23694),a.GetPoint=r(90549),a.GetPoints=r(48320),a.Offset=r(73424),a.OffsetPoint=r(44808),a.Random=r(24820),n.exports=a},55738:(n,o,r)=>{var a=r(23777),p=r(79291),h={Circle:r(88911),Ellipse:r(49203),Intersects:r(91865),Line:r(2529),Mesh:r(73090),Point:r(43711),Polygon:r(58423),Rectangle:r(93232),Triangle:r(84435)};h=p(!1,h,a),n.exports=h},2044:(n,o,r)=>{var a=r(20339),p=function(h,u){return a(h.x,h.y,u.x,u.y)<=h.radius+u.radius};n.exports=p},81491:n=>{var o=function(r,a){var p=a.width/2,h=a.height/2,u=Math.abs(r.x-a.x-p),f=Math.abs(r.y-a.y-h),l=p+r.radius,d=h+r.radius;if(u>l||f>d)return!1;if(u<=p||f<=h)return!0;var v=u-p,c=f-h,m=v*v,g=c*c,y=r.radius*r.radius;return m+g<=y};n.exports=o},63376:(n,o,r)=>{var a=r(2141),p=r(2044),h=function(u,f,l){if(l===void 0&&(l=[]),p(u,f)){var d=u.x,v=u.y,c=u.radius,m=f.x,g=f.y,y=f.radius,x,C,S,E,T;if(v===g)T=(y*y-c*c-m*m+d*d)/(2*(d-m)),x=1,C=-2*g,S=m*m+T*T-2*m*T+g*g-y*y,E=C*C-4*x*S,E===0?l.push(new a(T,-C/(2*x))):E>0&&(l.push(new a(T,(-C+Math.sqrt(E))/(2*x))),l.push(new a(T,(-C-Math.sqrt(E))/(2*x))));else{var P=(d-m)/(v-g),M=(y*y-c*c-m*m+d*d-g*g+v*v)/(2*(v-g));x=P*P+1,C=2*v*P-2*M*P-2*d,S=d*d+v*v+M*M-c*c-2*v*M,E=C*C-4*x*S,E===0?(T=-C/(2*x),l.push(new a(T,M-T*P))):E>0&&(T=(-C+Math.sqrt(E))/(2*x),l.push(new a(T,M-T*P)),T=(-C-Math.sqrt(E))/(2*x),l.push(new a(T,M-T*P)))}}return l};n.exports=h},97439:(n,o,r)=>{var a=r(4042),p=r(81491),h=function(u,f,l){if(l===void 0&&(l=[]),p(u,f)){var d=f.getLineA(),v=f.getLineB(),c=f.getLineC(),m=f.getLineD();a(d,u,l),a(v,u,l),a(c,u,l),a(m,u,l)}return l};n.exports=h},4042:(n,o,r)=>{var a=r(2141),p=r(80462),h=function(u,f,l){if(l===void 0&&(l=[]),p(u,f)){var d=u.x1,v=u.y1,c=u.x2,m=u.y2,g=f.x,y=f.y,x=f.radius,C=c-d,S=m-v,E=d-g,T=v-y,P=C*C+S*S,M=2*(C*E+S*T),w=E*E+T*T-x*x,b=M*M-4*P*w,I,R;if(b===0){var A=-M/(2*P);I=d+A*C,R=v+A*S,A>=0&&A<=1&&l.push(new a(I,R))}else if(b>0){var L=(-M-Math.sqrt(b))/(2*P);I=d+L*C,R=v+L*S,L>=0&&L<=1&&l.push(new a(I,R));var O=(-M+Math.sqrt(b))/(2*P);I=d+O*C,R=v+O*S,O>=0&&O<=1&&l.push(new a(I,R))}}return l};n.exports=h},36100:(n,o,r)=>{var a=r(25836),p=function(h,u,f,l){f===void 0&&(f=!1);var d=h.x1,v=h.y1,c=h.x2,m=h.y2,g=u.x1,y=u.y1,x=u.x2,C=u.y2,S=c-d,E=m-v,T=x-g,P=C-y,M=S*P-E*T;if(M===0)return null;var w,b,I;if(f){if(w=(S*(y-v)+E*(d-g))/(T*E-P*S),S!==0)b=(g+T*w-d)/S;else if(E!==0)b=(y+P*w-v)/E;else return null;if(b<0||w<0||w>1)return null;I=b}else{if(w=((g-d)*P-(y-v)*T)/M,b=((v-y)*S-(d-g)*E)/M,w<0||w>1||b<0||b>1)return null;I=w}return l===void 0&&(l=new a),l.set(d+S*I,v+E*I,I)};n.exports=p},3073:(n,o,r)=>{var a=r(36100),p=r(23031),h=r(25836),u=new p,f=new h,l=function(d,v,c,m){c===void 0&&(c=!1),m===void 0&&(m=new h);var g=!1;m.set(),f.set();for(var y=v[v.length-1],x=0;x<v.length;x++){var C=v[x];u.setTo(y.x,y.y,C.x,C.y),y=C,a(d,u,c,f)&&(!g||f.z<m.z)&&(m.copy(f),g=!0)}return g?m:null};n.exports=l},56362:(n,o,r)=>{var a=r(25836),p=r(61369),h=r(3073),u=new a,f=function(l,d,v,c){c===void 0&&(c=new p),Array.isArray(d)||(d=[d]);var m=!1;c.set(),u.set();for(var g=0;g<d.length;g++)h(l,d[g].points,v,u)&&(!m||u.z<c.z)&&(c.set(u.x,u.y,u.z,g),m=!0);return m?c:null};n.exports=f},60646:(n,o,r)=>{var a=r(2141),p=r(76112),h=r(92773),u=function(f,l,d){if(d===void 0&&(d=[]),h(f,l))for(var v=l.getLineA(),c=l.getLineB(),m=l.getLineC(),g=l.getLineD(),y=[new a,new a,new a,new a],x=[p(v,f,y[0]),p(c,f,y[1]),p(m,f,y[2]),p(g,f,y[3])],C=0;C<4;C++)x[C]&&d.push(y[C]);return d};n.exports=u},71147:(n,o,r)=>{var a=r(61369),p=r(56362),h=r(23031),u=new h;function f(v,c,m,g,y){var x=Math.cos(v),C=Math.sin(v);u.setTo(c,m,c+x,m+C);var S=p(u,g,!0);S&&y.push(new a(S.x,S.y,v,S.w))}function l(v,c){return v.z-c.z}var d=function(v,c,m){Array.isArray(m)||(m=[m]);for(var g=[],y=[],x=0;x<m.length;x++)for(var C=m[x].points,S=0;S<C.length;S++){var E=Math.atan2(C[S].y-c,C[S].x-v);y.indexOf(E)===-1&&(f(E,v,c,m,g),f(E-1e-5,v,c,m,g),f(E+1e-5,v,c,m,g),y.push(E))}return g.sort(l)};n.exports=d},68389:(n,o,r)=>{var a=r(87841),p=r(59996),h=function(u,f,l){return l===void 0&&(l=new a),p(u,f)&&(l.x=Math.max(u.x,f.x),l.y=Math.max(u.y,f.y),l.width=Math.min(u.right,f.right)-l.x,l.height=Math.min(u.bottom,f.bottom)-l.y),l};n.exports=h},52784:(n,o,r)=>{var a=r(60646),p=r(59996),h=function(u,f,l){if(l===void 0&&(l=[]),p(u,f)){var d=u.getLineA(),v=u.getLineB(),c=u.getLineC(),m=u.getLineD();a(d,f,l),a(v,f,l),a(c,f,l),a(m,f,l)}return l};n.exports=h},26341:(n,o,r)=>{var a=r(89265),p=r(60646),h=function(u,f,l){if(l===void 0&&(l=[]),a(u,f)){var d=f.getLineA(),v=f.getLineB(),c=f.getLineC();p(d,u,l),p(v,u,l),p(c,u,l)}return l};n.exports=h},38720:(n,o,r)=>{var a=r(4042),p=r(67636),h=function(u,f,l){if(l===void 0&&(l=[]),p(u,f)){var d=u.getLineA(),v=u.getLineB(),c=u.getLineC();a(d,f,l),a(v,f,l),a(c,f,l)}return l};n.exports=h},13882:(n,o,r)=>{var a=r(2141),p=r(2822),h=r(76112),u=function(f,l,d){if(d===void 0&&(d=[]),p(f,l))for(var v=f.getLineA(),c=f.getLineB(),m=f.getLineC(),g=[new a,new a,new a],y=[h(v,l,g[0]),h(c,l,g[1]),h(m,l,g[2])],x=0;x<3;x++)y[x]&&d.push(g[x]);return d};n.exports=u},75636:(n,o,r)=>{var a=r(82944),p=r(13882),h=function(u,f,l){if(l===void 0&&(l=[]),a(u,f)){var d=f.getLineA(),v=f.getLineB(),c=f.getLineC();p(u,d,l),p(u,v,l),p(u,c,l)}return l};n.exports=h},80462:(n,o,r)=>{var a=r(87902),p=r(2141),h=new p,u=function(f,l,d){if(d===void 0&&(d=h),a(l,f.x1,f.y1))return d.x=f.x1,d.y=f.y1,!0;if(a(l,f.x2,f.y2))return d.x=f.x2,d.y=f.y2,!0;var v=f.x2-f.x1,c=f.y2-f.y1,m=l.x-f.x1,g=l.y-f.y1,y=v*v+c*c,x=v,C=c;if(y>0){var S=(m*v+g*c)/y;x*=S,C*=S}d.x=f.x1+x,d.y=f.y1+C;var E=x*x+C*C;return E<=y&&x*v+C*c>=0&&a(l,d.x,d.y)};n.exports=u},76112:n=>{var o=function(r,a,p){var h=r.x1,u=r.y1,f=r.x2,l=r.y2,d=a.x1,v=a.y1,c=a.x2,m=a.y2;if(h===f&&u===l||d===c&&v===m)return!1;var g=(m-v)*(f-h)-(c-d)*(l-u);if(g===0)return!1;var y=((c-d)*(u-v)-(m-v)*(h-d))/g,x=((f-h)*(u-v)-(l-u)*(h-d))/g;return y<0||y>1||x<0||x>1?!1:(p&&(p.x=h+y*(f-h),p.y=u+y*(l-u)),!0)};n.exports=o},92773:n=>{var o=function(r,a){var p=r.x1,h=r.y1,u=r.x2,f=r.y2,l=a.x,d=a.y,v=a.right,c=a.bottom,m=0;if(p>=l&&p<=v&&h>=d&&h<=c||u>=l&&u<=v&&f>=d&&f<=c)return!0;if(p<l&&u>=l){if(m=h+(f-h)*(l-p)/(u-p),m>d&&m<=c)return!0}else if(p>v&&u<=v&&(m=h+(f-h)*(v-p)/(u-p),m>=d&&m<=c))return!0;if(h<d&&f>=d){if(m=p+(u-p)*(d-h)/(f-h),m>=l&&m<=v)return!0}else if(h>c&&f<=c&&(m=p+(u-p)*(c-h)/(f-h),m>=l&&m<=v))return!0;return!1};n.exports=o},16204:n=>{var o=function(r,a,p){p===void 0&&(p=1);var h=a.x1,u=a.y1,f=a.x2,l=a.y2,d=r.x,v=r.y,c=(f-h)*(f-h)+(l-u)*(l-u);if(c===0)return!1;var m=((d-h)*(f-h)+(v-u)*(l-u))/c;if(m<0)return Math.sqrt((h-d)*(h-d)+(u-v)*(u-v))<=p;if(m>=0&&m<=1){var g=((u-v)*(f-h)-(h-d)*(l-u))/c;return Math.abs(g)*Math.sqrt(c)<=p}else return Math.sqrt((f-d)*(f-d)+(l-v)*(l-v))<=p};n.exports=o},14199:(n,o,r)=>{var a=r(16204),p=function(h,u){if(!a(h,u))return!1;var f=Math.min(u.x1,u.x2),l=Math.max(u.x1,u.x2),d=Math.min(u.y1,u.y2),v=Math.max(u.y1,u.y2);return h.x>=f&&h.x<=l&&h.y>=d&&h.y<=v};n.exports=p},59996:n=>{var o=function(r,a){return r.width<=0||r.height<=0||a.width<=0||a.height<=0?!1:!(r.right<a.x||r.bottom<a.y||r.x>a.right||r.y>a.bottom)};n.exports=o},89265:(n,o,r)=>{var a=r(76112),p=r(37303),h=r(48653),u=r(77493),f=function(l,d){if(d.left>l.right||d.right<l.left||d.top>l.bottom||d.bottom<l.top)return!1;var v=d.getLineA(),c=d.getLineB(),m=d.getLineC();if(p(l,v.x1,v.y1)||p(l,v.x2,v.y2)||p(l,c.x1,c.y1)||p(l,c.x2,c.y2)||p(l,m.x1,m.y1)||p(l,m.x2,m.y2))return!0;var g=l.getLineA(),y=l.getLineB(),x=l.getLineC(),C=l.getLineD();if(a(v,g)||a(v,y)||a(v,x)||a(v,C)||a(c,g)||a(c,y)||a(c,x)||a(c,C)||a(m,g)||a(m,y)||a(m,x)||a(m,C))return!0;var S=u(l),E=h(d,S,!0);return E.length>0};n.exports=f},84411:n=>{var o=function(r,a,p,h,u,f){return f===void 0&&(f=0),!(a>r.right+f||p<r.left-f||h>r.bottom+f||u<r.top-f)};n.exports=o},67636:(n,o,r)=>{var a=r(80462),p=r(10690),h=function(u,f){return u.left>f.right||u.right<f.left||u.top>f.bottom||u.bottom<f.top?!1:!!(p(u,f.x,f.y)||a(u.getLineA(),f)||a(u.getLineB(),f)||a(u.getLineC(),f))};n.exports=h},2822:(n,o,r)=>{var a=r(76112),p=function(h,u){return!!(h.contains(u.x1,u.y1)||h.contains(u.x2,u.y2)||a(h.getLineA(),u)||a(h.getLineB(),u)||a(h.getLineC(),u))};n.exports=p},82944:(n,o,r)=>{var a=r(48653),p=r(71694),h=r(76112),u=function(f,l){if(f.left>l.right||f.right<l.left||f.top>l.bottom||f.bottom<l.top)return!1;var d=f.getLineA(),v=f.getLineB(),c=f.getLineC(),m=l.getLineA(),g=l.getLineB(),y=l.getLineC();if(h(d,m)||h(d,g)||h(d,y)||h(v,m)||h(v,g)||h(v,y)||h(c,m)||h(c,g)||h(c,y))return!0;var x=p(f),C=a(l,x,!0);return C.length>0||(x=p(l),C=a(f,x,!0),C.length>0)};n.exports=u},91865:(n,o,r)=>{n.exports={CircleToCircle:r(2044),CircleToRectangle:r(81491),GetCircleToCircle:r(63376),GetCircleToRectangle:r(97439),GetLineToCircle:r(4042),GetLineToLine:r(36100),GetLineToPoints:r(3073),GetLineToPolygon:r(56362),GetLineToRectangle:r(60646),GetRaysFromPointToPolygon:r(71147),GetRectangleIntersection:r(68389),GetRectangleToRectangle:r(52784),GetRectangleToTriangle:r(26341),GetTriangleToCircle:r(38720),GetTriangleToLine:r(13882),GetTriangleToTriangle:r(75636),LineToCircle:r(80462),LineToLine:r(76112),LineToRectangle:r(92773),PointToLine:r(16204),PointToLineSegment:r(14199),RectangleToRectangle:r(59996),RectangleToTriangle:r(89265),RectangleToValues:r(84411),TriangleToCircle:r(67636),TriangleToLine:r(2822),TriangleToTriangle:r(82944)}},91938:n=>{var o=function(r){return Math.atan2(r.y2-r.y1,r.x2-r.x1)};n.exports=o},84993:n=>{var o=function(r,a,p){a===void 0&&(a=1),p===void 0&&(p=[]);var h=Math.round(r.x1),u=Math.round(r.y1),f=Math.round(r.x2),l=Math.round(r.y2),d=Math.abs(f-h),v=Math.abs(l-u),c=h<f?1:-1,m=u<l?1:-1,g=d-v;p.push({x:h,y:u});for(var y=1;!(h===f&&u===l);){var x=g<<1;x>-v&&(g-=v,h+=c),x<d&&(g+=d,u+=m),y%a===0&&p.push({x:h,y:u}),y++}return p};n.exports=o},36469:n=>{var o=function(r,a,p){var h=a-(r.x1+r.x2)/2,u=p-(r.y1+r.y2)/2;return r.x1+=h,r.y1+=u,r.x2+=h,r.y2+=u,r};n.exports=o},31116:(n,o,r)=>{var a=r(23031),p=function(h){return new a(h.x1,h.y1,h.x2,h.y2)};n.exports=p},59944:n=>{var o=function(r,a){return a.setTo(r.x1,r.y1,r.x2,r.y2)};n.exports=o},59220:n=>{var o=function(r,a){return r.x1===a.x1&&r.y1===a.y1&&r.x2===a.x2&&r.y2===a.y2};n.exports=o},78177:(n,o,r)=>{var a=r(35001),p=function(h,u,f){f===void 0&&(f=u);var l=a(h),d=h.x2-h.x1,v=h.y2-h.y1;return u&&(h.x1=h.x1-d/l*u,h.y1=h.y1-v/l*u),f&&(h.x2=h.x2+d/l*f,h.y2=h.y2+v/l*f),h};n.exports=p},26708:(n,o,r)=>{var a=r(52816),p=r(6113),h=r(2141),u=function(f,l,d,v,c){v===void 0&&(v=0),c===void 0&&(c=[]);var m=[],g=f.x1,y=f.y1,x=f.x2-g,C=f.y2-y,S=p(l,c),E,T,P=d-1;for(E=0;E<P;E++)T=S(E/P),m.push(new h(g+x*T,y+C*T));if(T=S(1),m.push(new h(g+x*T,y+C*T)),v>0){var M=m[0],w=[M];for(E=1;E<m.length-1;E++){var b=m[E];a(M,b)>=v&&(w.push(b),M=b)}var I=m[m.length-1];return a(M,I)<v&&w.pop(),w.push(I),w}else return m};n.exports=u},32125:(n,o,r)=>{var a=r(2141),p=function(h,u){return u===void 0&&(u=new a),u.x=(h.x1+h.x2)/2,u.y=(h.y1+h.y2)/2,u};n.exports=p},99569:(n,o,r)=>{var a=r(2141),p=function(h,u,f){f===void 0&&(f=new a);var l=h.x1,d=h.y1,v=h.x2,c=h.y2,m=(v-l)*(v-l)+(c-d)*(c-d);if(m===0)return f;var g=((u.x-l)*(v-l)+(u.y-d)*(c-d))/m;return f.x=l+g*(v-l),f.y=d+g*(c-d),f};n.exports=p},34638:(n,o,r)=>{var a=r(36383),p=r(91938),h=r(2141),u=function(f,l){l===void 0&&(l=new h);var d=p(f)-a.TAU;return l.x=Math.cos(d),l.y=Math.sin(d),l};n.exports=u},13151:(n,o,r)=>{var a=r(2141),p=function(h,u,f){return f===void 0&&(f=new a),f.x=h.x1+(h.x2-h.x1)*u,f.y=h.y1+(h.y2-h.y1)*u,f};n.exports=p},15258:(n,o,r)=>{var a=r(35001),p=r(2141),h=function(u,f,l,d){d===void 0&&(d=[]),!f&&l>0&&(f=a(u)/l);for(var v=u.x1,c=u.y1,m=u.x2,g=u.y2,y=0;y<f;y++){var x=y/f,C=v+(m-v)*x,S=c+(g-c)*x;d.push(new p(C,S))}return d};n.exports=h},26408:n=>{var o=function(r,a){var p=r.x1,h=r.y1,u=r.x2,f=r.y2,l=(u-p)*(u-p)+(f-h)*(f-h);if(l===0)return!1;var d=((h-a.y)*(u-p)-(p-a.x)*(f-h))/l;return Math.abs(d)*Math.sqrt(l)};n.exports=o},98770:n=>{var o=function(r){return Math.abs(r.y1-r.y2)};n.exports=o},35001:n=>{var o=function(r){return Math.sqrt((r.x2-r.x1)*(r.x2-r.x1)+(r.y2-r.y1)*(r.y2-r.y1))};n.exports=o},23031:(n,o,r)=>{var a=r(83419),p=r(13151),h=r(15258),u=r(23777),f=r(65822),l=r(26099),d=new a({initialize:function(c,m,g,y){c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),this.type=u.LINE,this.x1=c,this.y1=m,this.x2=g,this.y2=y},getPoint:function(v,c){return p(this,v,c)},getPoints:function(v,c,m){return h(this,v,c,m)},getRandomPoint:function(v){return f(this,v)},setTo:function(v,c,m,g){return v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=0),this.x1=v,this.y1=c,this.x2=m,this.y2=g,this},setFromObjects:function(v,c){return this.x1=v.x,this.y1=v.y,this.x2=c.x,this.y2=c.y,this},getPointA:function(v){return v===void 0&&(v=new l),v.set(this.x1,this.y1),v},getPointB:function(v){return v===void 0&&(v=new l),v.set(this.x2,this.y2),v},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(v){this.x1<=this.x2?this.x1=v:this.x2=v}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(v){this.x1>this.x2?this.x1=v:this.x2=v}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(v){this.y1<=this.y2?this.y1=v:this.y2=v}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(v){this.y1>this.y2?this.y1=v:this.y2=v}}});n.exports=d},64795:(n,o,r)=>{var a=r(36383),p=r(15994),h=r(91938),u=function(f){var l=h(f)-a.TAU;return p(l,-Math.PI,Math.PI)};n.exports=u},52616:(n,o,r)=>{var a=r(36383),p=r(91938),h=function(u){return Math.cos(p(u)-a.TAU)};n.exports=h},87231:(n,o,r)=>{var a=r(36383),p=r(91938),h=function(u){return Math.sin(p(u)-a.TAU)};n.exports=h},89662:n=>{var o=function(r,a,p){return r.x1+=a,r.y1+=p,r.x2+=a,r.y2+=p,r};n.exports=o},71165:n=>{var o=function(r){return-((r.x2-r.x1)/(r.y2-r.y1))};n.exports=o},65822:(n,o,r)=>{var a=r(2141),p=function(h,u){u===void 0&&(u=new a);var f=Math.random();return u.x=h.x1+f*(h.x2-h.x1),u.y=h.y1+f*(h.y2-h.y1),u};n.exports=p},69777:(n,o,r)=>{var a=r(91938),p=r(64795),h=function(u,f){return 2*p(f)-Math.PI-a(u)};n.exports=h},39706:(n,o,r)=>{var a=r(64400),p=function(h,u){var f=(h.x1+h.x2)/2,l=(h.y1+h.y2)/2;return a(h,f,l,u)};n.exports=p},82585:(n,o,r)=>{var a=r(64400),p=function(h,u,f){return a(h,u.x,u.y,f)};n.exports=p},64400:n=>{var o=function(r,a,p,h){var u=Math.cos(h),f=Math.sin(h),l=r.x1-a,d=r.y1-p;return r.x1=l*u-d*f+a,r.y1=l*f+d*u+p,l=r.x2-a,d=r.y2-p,r.x2=l*u-d*f+a,r.y2=l*f+d*u+p,r};n.exports=o},62377:n=>{var o=function(r,a,p,h,u){return r.x1=a,r.y1=p,r.x2=a+Math.cos(h)*u,r.y2=p+Math.sin(h)*u,r};n.exports=o},71366:n=>{var o=function(r){return(r.y2-r.y1)/(r.x2-r.x1)};n.exports=o},10809:n=>{var o=function(r){return Math.abs(r.x1-r.x2)};n.exports=o},2529:(n,o,r)=>{var a=r(23031);a.Angle=r(91938),a.BresenhamPoints=r(84993),a.CenterOn=r(36469),a.Clone=r(31116),a.CopyFrom=r(59944),a.Equals=r(59220),a.Extend=r(78177),a.GetEasedPoints=r(26708),a.GetMidPoint=r(32125),a.GetNearestPoint=r(99569),a.GetNormal=r(34638),a.GetPoint=r(13151),a.GetPoints=r(15258),a.GetShortestDistance=r(26408),a.Height=r(98770),a.Length=r(35001),a.NormalAngle=r(64795),a.NormalX=r(52616),a.NormalY=r(87231),a.Offset=r(89662),a.PerpSlope=r(71165),a.Random=r(65822),a.ReflectAngle=r(69777),a.Rotate=r(39706),a.RotateAroundPoint=r(82585),a.RotateAroundXY=r(64400),a.SetToAngle=r(62377),a.Slope=r(71366),a.Width=r(10809),n.exports=a},83997:(n,o,r)=>{var a=r(83419),p=r(87841),h=r(26099);function u(l,d,v,c){var m=l-v,g=d-c,y=m*m+g*g;return Math.sqrt(y)}var f=new a({initialize:function(d,v,c){this.vertex1=d,this.vertex2=v,this.vertex3=c,this.bounds=new p,this._inCenter=new h},getInCenter:function(l){l===void 0&&(l=!0);var d=this.vertex1,v=this.vertex2,c=this.vertex3,m,g,y,x,C,S;l?(m=d.x,g=d.y,y=v.x,x=v.y,C=c.x,S=c.y):(m=d.vx,g=d.vy,y=v.vx,x=v.vy,C=c.vx,S=c.vy);var E=u(C,S,y,x),T=u(m,g,C,S),P=u(y,x,m,g),M=E+T+P;return this._inCenter.set((m*E+y*T+C*P)/M,(g*E+x*T+S*P)/M)},contains:function(l,d,v){var c=this.vertex1,m=this.vertex2,g=this.vertex3,y=c.vx,x=c.vy,C=m.vx,S=m.vy,E=g.vx,T=g.vy;if(v){var P=v.a,M=v.b,w=v.c,b=v.d,I=v.e,R=v.f;y=c.vx*P+c.vy*w+I,x=c.vx*M+c.vy*b+R,C=m.vx*P+m.vy*w+I,S=m.vx*M+m.vy*b+R,E=g.vx*P+g.vy*w+I,T=g.vx*M+g.vy*b+R}var A=E-y,L=T-x,O=C-y,F=S-x,G=l-y,U=d-x,z=A*A+L*L,N=A*O+L*F,k=A*G+L*U,D=O*O+F*F,V=O*G+F*U,B=z*D-N*N,W=B===0?0:1/B,H=(D*k-N*V)*W,Y=(z*V-N*k)*W;return H>=0&&Y>=0&&H+Y<1},isCounterClockwise:function(l){var d=this.vertex1,v=this.vertex2,c=this.vertex3,m=(v.vx-d.vx)*(c.vy-d.vy)-(v.vy-d.vy)*(c.vx-d.vx);return l<=0?m>=0:m<0},load:function(l,d,v,c,m){return v=this.vertex1.load(l,d,v,c,m),v=this.vertex2.load(l,d,v,c,m),v=this.vertex3.load(l,d,v,c,m),v},transformCoordinatesLocal:function(l,d,v,c){return this.vertex1.transformCoordinatesLocal(l,d,v,c),this.vertex2.transformCoordinatesLocal(l,d,v,c),this.vertex3.transformCoordinatesLocal(l,d,v,c),this},updateBounds:function(){var l=this.vertex1,d=this.vertex2,v=this.vertex3,c=this.bounds;return c.x=Math.min(l.vx,d.vx,v.vx),c.y=Math.min(l.vy,d.vy,v.vy),c.width=Math.max(l.vx,d.vx,v.vx)-c.x,c.height=Math.max(l.vy,d.vy,v.vy)-c.y,this},isInView:function(l,d,v,c,m,g,y,x,C,S,E){this.update(c,m,g,y,x,C,S,E);var T=this.vertex1,P=this.vertex2,M=this.vertex3;if(T.ta<=0&&P.ta<=0&&M.ta<=0||d&&!this.isCounterClockwise(v))return!1;var w=this.bounds;w.x=Math.min(T.tx,P.tx,M.tx),w.y=Math.min(T.ty,P.ty,M.ty),w.width=Math.max(T.tx,P.tx,M.tx)-w.x,w.height=Math.max(T.ty,P.ty,M.ty)-w.y;var b=l.x+l.width,I=l.y+l.height;return w.width<=0||w.height<=0||l.width<=0||l.height<=0?!1:!(w.right<l.x||w.bottom<l.y||w.x>b||w.y>I)},scrollUV:function(l,d){return this.vertex1.scrollUV(l,d),this.vertex2.scrollUV(l,d),this.vertex3.scrollUV(l,d),this},scaleUV:function(l,d){return this.vertex1.scaleUV(l,d),this.vertex2.scaleUV(l,d),this.vertex3.scaleUV(l,d),this},setColor:function(l){return this.vertex1.color=l,this.vertex2.color=l,this.vertex3.color=l,this},update:function(l,d,v,c,m,g,y,x){return this.vertex1.update(d,v,c,m,g,y,x,l),this.vertex2.update(d,v,c,m,g,y,x,l),this.vertex3.update(d,v,c,m,g,y,x,l),this},translate:function(l,d){d===void 0&&(d=0);var v=this.vertex1,c=this.vertex2,m=this.vertex3;return v.x+=l,v.y+=d,c.x+=l,c.y+=d,m.x+=l,m.y+=d,this},x:{get:function(){return this.getInCenter().x},set:function(l){var d=this.getInCenter();this.translate(l-d.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(l){var d=this.getInCenter();this.translate(0,l-d.y)}},alpha:{get:function(){var l=this.vertex1,d=this.vertex2,v=this.vertex3;return(l.alpha+d.alpha+v.alpha)/3},set:function(l){this.vertex1.alpha=l,this.vertex2.alpha=l,this.vertex3.alpha=l}},depth:{get:function(){var l=this.vertex1,d=this.vertex2,v=this.vertex3;return(l.vz+d.vz+v.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});n.exports=f},48803:(n,o,r)=>{var a=r(83997),p=r(95540),h=r(37867),u=r(25836),f=r(39318),l=new u,d=new u,v=new h,c=function(m){var g=p(m,"mesh"),y=p(m,"texture",null),x=p(m,"frame"),C=p(m,"width",1),S=p(m,"height",C),E=p(m,"widthSegments",1),T=p(m,"heightSegments",E),P=p(m,"x",0),M=p(m,"y",0),w=p(m,"z",0),b=p(m,"rotateX",0),I=p(m,"rotateY",0),R=p(m,"rotateZ",0),A=p(m,"zIsUp",!0),L=p(m,"isOrtho",g?g.dirtyCache[11]:!1),O=p(m,"colors",[16777215]),F=p(m,"alphas",[1]),G=p(m,"tile",!1),U=p(m,"flipY",!1),z=p(m,"width",null),N={faces:[],verts:[]};l.set(P,M,w),d.set(b,I,R),v.fromRotationXYTranslation(d,l,A);var k;if(!y&&g)y=g.texture,x||(k=g.frame);else if(g&&typeof y=="string")y=g.scene.sys.textures.get(y);else if(!y)return N;k||(k=y.get(x)),!z&&L&&y&&g&&(C=k.width/g.height,S=k.height/g.height);var D=C/2,V=S/2,B=Math.floor(E),W=Math.floor(T),H=B+1,Y=W+1,X=C/B,$=S/W,J=[],q=[],Q,tt,rt=0,et=1,ot=0,ut=1;k&&(rt=k.u0,et=k.u1,U?(ot=k.v1,ut=k.v0):(ot=k.v0,ut=k.v1));var dt=et-rt,it=ut-ot;for(tt=0;tt<Y;tt++){var st=tt*$-V;for(Q=0;Q<H;Q++){var at=Q*X-D;q.push(at,-st);var yt=rt+dt*(Q/B),Ft=ot+it*(tt/W);J.push(yt,Ft)}}Array.isArray(O)||(O=[O]),Array.isArray(F)||(F=[F]);var ee=0,It=0;for(tt=0;tt<W;tt++)for(Q=0;Q<B;Q++){var Dt=(Q+H*tt)*2,he=(Q+H*(tt+1))*2,Xe=(Q+1+H*(tt+1))*2,Jt=(Q+1+H*tt)*2,ye=O[It],be=F[ee],pi=new f(q[Dt],q[Dt+1],0,J[Dt],J[Dt+1],ye,be).transformMat4(v),Va=new f(q[he],q[he+1],0,J[he],J[he+1],ye,be).transformMat4(v),Ua=new f(q[Jt],q[Jt+1],0,J[Jt],J[Jt+1],ye,be).transformMat4(v),za=new f(q[he],q[he+1],0,J[he],J[he+1],ye,be).transformMat4(v),Wa=new f(q[Xe],q[Xe+1],0,J[Xe],J[Xe+1],ye,be).transformMat4(v),Ha=new f(q[Jt],q[Jt+1],0,J[Jt],J[Jt+1],ye,be).transformMat4(v);G&&(pi.setUVs(rt,ut),Va.setUVs(rt,ot),Ua.setUVs(et,ut),za.setUVs(rt,ot),Wa.setUVs(et,ot),Ha.setUVs(et,ut)),It++,It===O.length&&(It=0),ee++,ee===F.length&&(ee=0),N.verts.push(pi,Va,Ua,za,Wa,Ha),N.faces.push(new a(pi,Va,Ua),new a(za,Wa,Ha))}return g&&(g.faces=g.faces.concat(N.faces),g.vertices=g.vertices.concat(N.verts)),N};n.exports=c},34684:(n,o,r)=>{var a=r(83997),p=r(37867),h=r(25836),u=r(39318),f=new h,l=new h,d=new p,v=function(c,m,g,y,x,C,S,E,T,P){g===void 0&&(g=1),y===void 0&&(y=0),x===void 0&&(x=0),C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=0),T===void 0&&(T=0),P===void 0&&(P=!0);var M={faces:[],verts:[]},w=c.materials;f.set(y,x,C),l.set(S,E,T),d.fromRotationXYTranslation(l,f,P);for(var b=0;b<c.models.length;b++)for(var I=c.models[b],R=I.vertices,A=I.textureCoords,L=I.faces,O=0;O<L.length;O++){var F=L[O],G=F.vertices[0],U=F.vertices[1],z=F.vertices[2],N=R[G.vertexIndex],k=R[U.vertexIndex],D=R[z.vertexIndex],V=G.textureCoordsIndex,B=U.textureCoordsIndex,W=z.textureCoordsIndex,H=V===-1?{u:0,v:1}:A[V],Y=B===-1?{u:0,v:0}:A[B],X=W===-1?{u:1,v:1}:A[W],$=16777215;F.material!==""&&w[F.material]&&($=w[F.material]);var J=new u(N.x*g,N.y*g,N.z*g,H.u,H.v,$).transformMat4(d),q=new u(k.x*g,k.y*g,k.z*g,Y.u,Y.v,$).transformMat4(d),Q=new u(D.x*g,D.y*g,D.z*g,X.u,X.v,$).transformMat4(d);M.verts.push(J,q,Q),M.faces.push(new a(J,q,Q))}return m&&(m.faces=m.faces.concat(M.faces),m.vertices=m.vertices.concat(M.verts)),M};n.exports=v},92515:(n,o,r)=>{var a=r(83997),p=r(39318),h=function(u,f,l,d,v,c,m,g){if(d===void 0&&(d=!1),c===void 0&&(c=16777215),m===void 0&&(m=1),g===void 0&&(g=!1),u.length!==f.length&&!d){console.warn("GenerateVerts: vertices and uvs count not equal");return}var y={faces:[],vertices:[]},x,C,S,E,T,P,M,w,b,I,R,A=d?3:2,L=Array.isArray(c),O=Array.isArray(m);if(Array.isArray(l)&&l.length>0)for(x=0;x<l.length;x++){var F=l[x],G=l[x]*2,U=l[x]*A;C=u[U],S=u[U+1],E=d?u[U+2]:0,T=f[G],P=f[G+1],g&&(P=1-P),M=L?c[F]:c,w=O?m[F]:m,b=0,I=0,R=0,v&&(b=v[U],I=v[U+1],R=d?v[U+2]:0),y.vertices.push(new p(C,S,E,T,P,M,w,b,I,R))}else{var z=0,N=0;for(x=0;x<u.length;x+=A)C=u[x],S=u[x+1],E=d?u[x+2]:0,T=f[z],P=f[z+1],M=L?c[N]:c,w=O?m[N]:m,b=0,I=0,R=0,v&&(b=v[x],I=v[x+1],R=d?v[x+2]:0),y.vertices.push(new p(C,S,E,T,P,M,w,b,I,R)),z+=2,N++}for(x=0;x<y.vertices.length;x+=3){var k=y.vertices[x],D=y.vertices[x+1],V=y.vertices[x+2];y.faces.push(new a(k,D,V))}return y};n.exports=h},85048:n=>{var o=!0,r="untitled",a="",p="";function h(C){var S=C.indexOf("#");return S>-1?C.substring(0,S):C}function u(C){return C.models.length===0&&C.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),a="",C.models[C.models.length-1]}function f(C,S){var E=C.length>=2?C[1]:r;S.models.push({faces:[],name:E,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function l(C){C.length===2&&(a=C[1])}function d(C,S){var E=C.length,T=E>=2?parseFloat(C[1]):0,P=E>=3?parseFloat(C[2]):0,M=E>=4?parseFloat(C[3]):0;u(S).vertices.push({x:T,y:P,z:M})}function v(C,S){var E=C.length,T=E>=2?parseFloat(C[1]):0,P=E>=3?parseFloat(C[2]):0,M=E>=4?parseFloat(C[3]):0;isNaN(T)&&(T=0),isNaN(P)&&(P=0),isNaN(M)&&(M=0),o&&(P=1-P),u(S).textureCoords.push({u:T,v:P,w:M})}function c(C,S){var E=C.length,T=E>=2?parseFloat(C[1]):0,P=E>=3?parseFloat(C[2]):0,M=E>=4?parseFloat(C[3]):0;u(S).vertexNormals.push({x:T,y:P,z:M})}function m(C,S){var E=C.length-1;if(!(E<3)){for(var T={group:a,material:p,vertices:[]},P=0;P<E;P++){var M=C[P+1],w=M.split("/"),b=w.length;if(!(b<1||b>3)){var I=0,R=0,A=0;I=parseInt(w[0],10),b>1&&w[1]!==""&&(R=parseInt(w[1],10)),b>2&&(A=parseInt(w[2],10)),I!==0&&(I<0&&(I=u(S).vertices.length+1+I),R-=1,I-=1,A-=1,T.vertices.push({textureCoordsIndex:R,vertexIndex:I,vertexNormalIndex:A}))}}u(S).faces.push(T)}}function g(C,S){C.length>=2&&S.materialLibraries.push(C[1])}function y(C){C.length>=2&&(p=C[1])}var x=function(C,S){S===void 0&&(S=!0),o=S;var E={materials:{},materialLibraries:[],models:[]};a="",p="";for(var T=C.split(`
`),P=0;P<T.length;P++){var M=h(T[P]),w=M.replace(/\s\s+/g," ").trim().split(" ");switch(w[0].toLowerCase()){case"o":f(w,E);break;case"g":l(w);break;case"v":d(w,E);break;case"vt":v(w,E);break;case"vn":c(w,E);break;case"f":m(w,E);break;case"mtllib":g(w,E);break;case"usemtl":y(w);break}}return E};n.exports=x},61485:(n,o,r)=>{var a=r(37589),p=function(h){for(var u={},f=h.split(`
`),l="",d=0;d<f.length;d++){var v=f[d].trim();if(!(v.indexOf("#")===0||v==="")){var c=v.replace(/\s\s+/g," ").trim().split(" ");switch(c[0].toLowerCase()){case"newmtl":{l=c[1];break}case"kd":{var m=Math.floor(c[1]*255),g=c.length>=2?Math.floor(c[2]*255):m,y=c.length>=3?Math.floor(c[3]*255):m;u[l]=a(m,g,y);break}}}}return u};n.exports=p},92570:n=>{var o=function(r,a,p,h){var u,f;if(p===void 0&&h===void 0){var l=r.getInCenter();u=l.x,f=l.y}var d=Math.cos(a),v=Math.sin(a),c=r.vertex1,m=r.vertex2,g=r.vertex3,y=c.x-u,x=c.y-f;c.set(y*d-x*v+u,y*v+x*d+f),y=m.x-u,x=m.y-f,m.set(y*d-x*v+u,y*v+x*d+f),y=g.x-u,x=g.y-f,g.set(y*d-x*v+u,y*v+x*d+f)};n.exports=o},39318:(n,o,r)=>{var a=r(83419),p=r(70554),h=r(25836),u=new a({Extends:h,initialize:function(l,d,v,c,m,g,y,x,C,S){g===void 0&&(g=16777215),y===void 0&&(y=1),x===void 0&&(x=0),C===void 0&&(C=0),S===void 0&&(S=0),h.call(this,l,d,v),this.vx=0,this.vy=0,this.vz=0,this.nx=x,this.ny=C,this.nz=S,this.u=c,this.v=m,this.color=g,this.alpha=y,this.tx=0,this.ty=0,this.ta=0,this.tu=c,this.tv=m},setUVs:function(f,l){return this.u=f,this.v=l,this.tu=f,this.tv=l,this},scrollUV:function(f,l){return this.tu+=f,this.tv+=l,this},scaleUV:function(f,l){return this.tu=this.u*f,this.tv=this.v*l,this},transformCoordinatesLocal:function(f,l,d,v){var c=this.x,m=this.y,g=this.z,y=f.val,x=c*y[0]+m*y[4]+g*y[8]+y[12],C=c*y[1]+m*y[5]+g*y[9]+y[13],S=c*y[2]+m*y[6]+g*y[10]+y[14],E=c*y[3]+m*y[7]+g*y[11]+y[15];this.vx=x/E*l,this.vy=-(C/E)*d,v<=0?this.vz=S/E:this.vz=-(S/E)},resize:function(f,l,d,v,c,m){return this.x=f,this.y=l,this.vx=this.x*d,this.vy=-this.y*v,this.vz=0,c<.5?this.vx+=d*(.5-c):c>.5&&(this.vx-=d*(c-.5)),m<.5?this.vy+=v*(.5-m):m>.5&&(this.vy-=v*(m-.5)),this},update:function(f,l,d,v,c,m,g,y){var x=this.vx*f+this.vy*d+c,C=this.vx*l+this.vy*v+m;return g&&(x=Math.round(x),C=Math.round(C)),this.tx=x,this.ty=C,this.ta=this.alpha*y,this},load:function(f,l,d,v,c){return f[++d]=this.tx,f[++d]=this.ty,f[++d]=this.tu,f[++d]=this.tv,f[++d]=v,f[++d]=c,l[++d]=p.getTintAppendFloatAlpha(this.color,this.ta),d}});n.exports=u},73090:(n,o,r)=>{var a={Face:r(83997),GenerateGridVerts:r(48803),GenerateObjVerts:r(34684),GenerateVerts:r(92515),ParseObj:r(85048),ParseObjMaterial:r(61485),RotateFace:r(92570),Vertex:r(39318)};n.exports=a},96550:n=>{var o=function(r){return r.setTo(Math.ceil(r.x),Math.ceil(r.y))};n.exports=o},99706:(n,o,r)=>{var a=r(2141),p=function(h){return new a(h.x,h.y)};n.exports=p},68010:n=>{var o=function(r,a){return a.setTo(r.x,r.y)};n.exports=o},27814:n=>{var o=function(r,a){return r.x===a.x&&r.y===a.y};n.exports=o},73565:n=>{var o=function(r){return r.setTo(Math.floor(r.x),Math.floor(r.y))};n.exports=o},87555:(n,o,r)=>{var a=r(2141),p=function(h,u){if(u===void 0&&(u=new a),!Array.isArray(h))throw new Error("GetCentroid points argument must be an array");var f=h.length;if(f<1)throw new Error("GetCentroid points array must not be empty");if(f===1)u.x=h[0].x,u.y=h[0].y;else{for(var l=0;l<f;l++)u.x+=h[l].x,u.y+=h[l].y;u.x/=f,u.y/=f}return u};n.exports=p},28793:n=>{var o=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)};n.exports=o},44405:n=>{var o=function(r){return r.x*r.x+r.y*r.y};n.exports=o},20873:(n,o,r)=>{var a=r(87841),p=function(h,u){u===void 0&&(u=new a);for(var f=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY,c=0;c<h.length;c++){var m=h[c];m.x>f&&(f=m.x),m.x<l&&(l=m.x),m.y>d&&(d=m.y),m.y<v&&(v=m.y)}return u.x=l,u.y=v,u.width=f-l,u.height=d-v,u};n.exports=p},26152:(n,o,r)=>{var a=r(2141),p=function(h,u,f,l){return f===void 0&&(f=0),l===void 0&&(l=new a),l.x=h.x+(u.x-h.x)*f,l.y=h.y+(u.y-h.y)*f,l};n.exports=p},55767:n=>{var o=function(r){return r.setTo(r.y,r.x)};n.exports=o},79432:(n,o,r)=>{var a=r(2141),p=function(h,u){return u===void 0&&(u=new a),u.setTo(-h.x,-h.y)};n.exports=p},2141:(n,o,r)=>{var a=r(83419),p=r(23777),h=new a({initialize:function(f,l){f===void 0&&(f=0),l===void 0&&(l=f),this.type=p.POINT,this.x=f,this.y=l},setTo:function(u,f){return u===void 0&&(u=0),f===void 0&&(f=u),this.x=u,this.y=f,this}});n.exports=h},72930:(n,o,r)=>{var a=r(2141),p=r(44405),h=function(u,f,l){l===void 0&&(l=new a);var d=u.x*f.x+u.y*f.y,v=d/p(f);return v!==0&&(l.x=v*f.x,l.y=v*f.y),l};n.exports=h},62880:(n,o,r)=>{var a=r(2141),p=function(h,u,f){f===void 0&&(f=new a);var l=h.x*u.x+h.y*u.y;return l!==0&&(f.x=l*u.x,f.y=l*u.y),f};n.exports=p},15093:(n,o,r)=>{var a=r(28793),p=function(h,u){if(h.x!==0||h.y!==0){var f=a(h);h.x/=f,h.y/=f}return h.x*=u,h.y*=u,h};n.exports=p},43711:(n,o,r)=>{var a=r(2141);a.Ceil=r(96550),a.Clone=r(99706),a.CopyFrom=r(68010),a.Equals=r(27814),a.Floor=r(73565),a.GetCentroid=r(87555),a.GetMagnitude=r(28793),a.GetMagnitudeSq=r(44405),a.GetRectangleFromPoints=r(20873),a.Interpolate=r(26152),a.Invert=r(55767),a.Negative=r(79432),a.Project=r(72930),a.ProjectUnit=r(62880),a.SetMagnitude=r(15093),n.exports=a},12306:(n,o,r)=>{var a=r(25717),p=function(h){return new a(h.points)};n.exports=p},63814:n=>{var o=function(r,a,p){for(var h=!1,u=-1,f=r.points.length-1;++u<r.points.length;f=u){var l=r.points[u].x,d=r.points[u].y,v=r.points[f].x,c=r.points[f].y;(d<=p&&p<c||c<=p&&p<d)&&a<(v-l)*(p-d)/(c-d)+l&&(h=!h)}return h};n.exports=o},99338:(n,o,r)=>{var a=r(63814),p=function(h,u){return a(h,u.x,u.y)};n.exports=p},94811:n=>{"use strict";function o(N,k,D){D=D||2;var V=k&&k.length,B=V?k[0]*D:N.length,W=r(N,0,B,D,!0),H=[];if(!W||W.next===W.prev)return H;var Y,X,$,J,q,Q,tt;if(V&&(W=d(N,k,W,D)),N.length>80*D){Y=$=N[0],X=J=N[1];for(var rt=D;rt<B;rt+=D)q=N[rt],Q=N[rt+1],q<Y&&(Y=q),Q<X&&(X=Q),q>$&&($=q),Q>J&&(J=Q);tt=Math.max($-Y,J-X),tt=tt!==0?32767/tt:0}return p(W,H,D,Y,X,tt,0),H}function r(N,k,D,V,B){var W,H;if(B===z(N,k,D,V)>0)for(W=k;W<D;W+=V)H=F(W,N[W],N[W+1],H);else for(W=D-V;W>=k;W-=V)H=F(W,N[W],N[W+1],H);return H&&M(H,H.next)&&(G(H),H=H.next),H}function a(N,k){if(!N)return N;k||(k=N);var D=N,V;do if(V=!1,!D.steiner&&(M(D,D.next)||P(D.prev,D,D.next)===0)){if(G(D),D=k=D.prev,D===D.next)break;V=!0}else D=D.next;while(V||D!==k);return k}function p(N,k,D,V,B,W,H){if(N){!H&&W&&y(N,V,B,W);for(var Y=N,X,$;N.prev!==N.next;){if(X=N.prev,$=N.next,W?u(N,V,B,W):h(N)){k.push(X.i/D|0),k.push(N.i/D|0),k.push($.i/D|0),G(N),N=$.next,Y=$.next;continue}if(N=$,N===Y){H?H===1?(N=f(a(N),k,D),p(N,k,D,V,B,W,2)):H===2&&l(N,k,D,V,B,W):p(a(N),k,D,V,B,W,1);break}}}}function h(N){var k=N.prev,D=N,V=N.next;if(P(k,D,V)>=0)return!1;for(var B=k.x,W=D.x,H=V.x,Y=k.y,X=D.y,$=V.y,J=B<W?B<H?B:H:W<H?W:H,q=Y<X?Y<$?Y:$:X<$?X:$,Q=B>W?B>H?B:H:W>H?W:H,tt=Y>X?Y>$?Y:$:X>$?X:$,rt=V.next;rt!==k;){if(rt.x>=J&&rt.x<=Q&&rt.y>=q&&rt.y<=tt&&E(B,Y,W,X,H,$,rt.x,rt.y)&&P(rt.prev,rt,rt.next)>=0)return!1;rt=rt.next}return!0}function u(N,k,D,V){var B=N.prev,W=N,H=N.next;if(P(B,W,H)>=0)return!1;for(var Y=B.x,X=W.x,$=H.x,J=B.y,q=W.y,Q=H.y,tt=Y<X?Y<$?Y:$:X<$?X:$,rt=J<q?J<Q?J:Q:q<Q?q:Q,et=Y>X?Y>$?Y:$:X>$?X:$,ot=J>q?J>Q?J:Q:q>Q?q:Q,ut=C(tt,rt,k,D,V),dt=C(et,ot,k,D,V),it=N.prevZ,st=N.nextZ;it&&it.z>=ut&&st&&st.z<=dt;){if(it.x>=tt&&it.x<=et&&it.y>=rt&&it.y<=ot&&it!==B&&it!==H&&E(Y,J,X,q,$,Q,it.x,it.y)&&P(it.prev,it,it.next)>=0||(it=it.prevZ,st.x>=tt&&st.x<=et&&st.y>=rt&&st.y<=ot&&st!==B&&st!==H&&E(Y,J,X,q,$,Q,st.x,st.y)&&P(st.prev,st,st.next)>=0))return!1;st=st.nextZ}for(;it&&it.z>=ut;){if(it.x>=tt&&it.x<=et&&it.y>=rt&&it.y<=ot&&it!==B&&it!==H&&E(Y,J,X,q,$,Q,it.x,it.y)&&P(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;st&&st.z<=dt;){if(st.x>=tt&&st.x<=et&&st.y>=rt&&st.y<=ot&&st!==B&&st!==H&&E(Y,J,X,q,$,Q,st.x,st.y)&&P(st.prev,st,st.next)>=0)return!1;st=st.nextZ}return!0}function f(N,k,D){var V=N;do{var B=V.prev,W=V.next.next;!M(B,W)&&w(B,V,V.next,W)&&A(B,W)&&A(W,B)&&(k.push(B.i/D|0),k.push(V.i/D|0),k.push(W.i/D|0),G(V),G(V.next),V=N=W),V=V.next}while(V!==N);return a(V)}function l(N,k,D,V,B,W){var H=N;do{for(var Y=H.next.next;Y!==H.prev;){if(H.i!==Y.i&&T(H,Y)){var X=O(H,Y);H=a(H,H.next),X=a(X,X.next),p(H,k,D,V,B,W,0),p(X,k,D,V,B,W,0);return}Y=Y.next}H=H.next}while(H!==N)}function d(N,k,D,V){var B=[],W,H,Y,X,$;for(W=0,H=k.length;W<H;W++)Y=k[W]*V,X=W<H-1?k[W+1]*V:N.length,$=r(N,Y,X,V,!1),$===$.next&&($.steiner=!0),B.push(S($));for(B.sort(v),W=0;W<B.length;W++)D=c(B[W],D);return D}function v(N,k){return N.x-k.x}function c(N,k){var D=m(N,k);if(!D)return k;var V=O(D,N);return a(V,V.next),a(D,D.next)}function m(N,k){var D=k,V=N.x,B=N.y,W=-1/0,H;do{if(B<=D.y&&B>=D.next.y&&D.next.y!==D.y){var Y=D.x+(B-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(Y<=V&&Y>W&&(W=Y,H=D.x<D.next.x?D:D.next,Y===V))return H}D=D.next}while(D!==k);if(!H)return null;var X=H,$=H.x,J=H.y,q=1/0,Q;D=H;do V>=D.x&&D.x>=$&&V!==D.x&&E(B<J?V:W,B,$,J,B<J?W:V,B,D.x,D.y)&&(Q=Math.abs(B-D.y)/(V-D.x),A(D,N)&&(Q<q||Q===q&&(D.x>H.x||D.x===H.x&&g(H,D)))&&(H=D,q=Q)),D=D.next;while(D!==X);return H}function g(N,k){return P(N.prev,N,k.prev)<0&&P(k.next,N,N.next)<0}function y(N,k,D,V){var B=N;do B.z===0&&(B.z=C(B.x,B.y,k,D,V)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==N);B.prevZ.nextZ=null,B.prevZ=null,x(B)}function x(N){var k,D,V,B,W,H,Y,X,$=1;do{for(D=N,N=null,W=null,H=0;D;){for(H++,V=D,Y=0,k=0;k<$&&(Y++,V=V.nextZ,!!V);k++);for(X=$;Y>0||X>0&&V;)Y!==0&&(X===0||!V||D.z<=V.z)?(B=D,D=D.nextZ,Y--):(B=V,V=V.nextZ,X--),W?W.nextZ=B:N=B,B.prevZ=W,W=B;D=V}W.nextZ=null,$*=2}while(H>1);return N}function C(N,k,D,V,B){return N=(N-D)*B|0,k=(k-V)*B|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,N|k<<1}function S(N){var k=N,D=N;do(k.x<D.x||k.x===D.x&&k.y<D.y)&&(D=k),k=k.next;while(k!==N);return D}function E(N,k,D,V,B,W,H,Y){return(B-H)*(k-Y)>=(N-H)*(W-Y)&&(N-H)*(V-Y)>=(D-H)*(k-Y)&&(D-H)*(W-Y)>=(B-H)*(V-Y)}function T(N,k){return N.next.i!==k.i&&N.prev.i!==k.i&&!R(N,k)&&(A(N,k)&&A(k,N)&&L(N,k)&&(P(N.prev,N,k.prev)||P(N,k.prev,k))||M(N,k)&&P(N.prev,N,N.next)>0&&P(k.prev,k,k.next)>0)}function P(N,k,D){return(k.y-N.y)*(D.x-k.x)-(k.x-N.x)*(D.y-k.y)}function M(N,k){return N.x===k.x&&N.y===k.y}function w(N,k,D,V){var B=I(P(N,k,D)),W=I(P(N,k,V)),H=I(P(D,V,N)),Y=I(P(D,V,k));return!!(B!==W&&H!==Y||B===0&&b(N,D,k)||W===0&&b(N,V,k)||H===0&&b(D,N,V)||Y===0&&b(D,k,V))}function b(N,k,D){return k.x<=Math.max(N.x,D.x)&&k.x>=Math.min(N.x,D.x)&&k.y<=Math.max(N.y,D.y)&&k.y>=Math.min(N.y,D.y)}function I(N){return N>0?1:N<0?-1:0}function R(N,k){var D=N;do{if(D.i!==N.i&&D.next.i!==N.i&&D.i!==k.i&&D.next.i!==k.i&&w(D,D.next,N,k))return!0;D=D.next}while(D!==N);return!1}function A(N,k){return P(N.prev,N,N.next)<0?P(N,k,N.next)>=0&&P(N,N.prev,k)>=0:P(N,k,N.prev)<0||P(N,N.next,k)<0}function L(N,k){var D=N,V=!1,B=(N.x+k.x)/2,W=(N.y+k.y)/2;do D.y>W!=D.next.y>W&&D.next.y!==D.y&&B<(D.next.x-D.x)*(W-D.y)/(D.next.y-D.y)+D.x&&(V=!V),D=D.next;while(D!==N);return V}function O(N,k){var D=new U(N.i,N.x,N.y),V=new U(k.i,k.x,k.y),B=N.next,W=k.prev;return N.next=k,k.prev=N,D.next=B,B.prev=D,V.next=D,D.prev=V,W.next=V,V.prev=W,V}function F(N,k,D,V){var B=new U(N,k,D);return V?(B.next=V.next,B.prev=V,V.next.prev=B,V.next=B):(B.prev=B,B.next=B),B}function G(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function U(N,k,D){this.i=N,this.x=k,this.y=D,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}o.deviation=function(N,k,D,V){var B=k&&k.length,W=B?k[0]*D:N.length,H=Math.abs(z(N,0,W,D));if(B)for(var Y=0,X=k.length;Y<X;Y++){var $=k[Y]*D,J=Y<X-1?k[Y+1]*D:N.length;H-=Math.abs(z(N,$,J,D))}var q=0;for(Y=0;Y<V.length;Y+=3){var Q=V[Y]*D,tt=V[Y+1]*D,rt=V[Y+2]*D;q+=Math.abs((N[Q]-N[rt])*(N[tt+1]-N[Q+1])-(N[Q]-N[tt])*(N[rt+1]-N[Q+1]))}return H===0&&q===0?0:Math.abs((q-H)/H)};function z(N,k,D,V){for(var B=0,W=k,H=D-V;W<D;W+=V)B+=(N[H]-N[W])*(N[W+1]+N[H+1]),H=W;return B}o.flatten=function(N){for(var k=N[0][0].length,D={vertices:[],holes:[],dimensions:k},V=0,B=0;B<N.length;B++){for(var W=0;W<N[B].length;W++)for(var H=0;H<k;H++)D.vertices.push(N[B][W][H]);B>0&&(V+=N[B-1].length,D.holes.push(V))}return D},n.exports=o},13829:(n,o,r)=>{var a=r(87841),p=function(h,u){u===void 0&&(u=new a);for(var f=1/0,l=1/0,d=-f,v=-l,c,m=0;m<h.points.length;m++)c=h.points[m],f=Math.min(f,c.x),l=Math.min(l,c.y),d=Math.max(d,c.x),v=Math.max(v,c.y);return u.x=f,u.y=l,u.width=d-f,u.height=v-l,u};n.exports=p},26173:n=>{var o=function(r,a){a===void 0&&(a=[]);for(var p=0;p<r.points.length;p++)a.push(r.points[p].x),a.push(r.points[p].y);return a};n.exports=o},9564:(n,o,r)=>{var a=r(35001),p=r(23031),h=r(30052),u=function(f,l,d,v){v===void 0&&(v=[]);var c=f.points,m=h(f);!l&&d>0&&(l=m/d);for(var g=0;g<l;g++)for(var y=m*(g/l),x=0,C=0;C<c.length;C++){var S=c[C],E=c[(C+1)%c.length],T=new p(S.x,S.y,E.x,E.y),P=a(T);if(y<x||y>x+P){x+=P;continue}var M=T.getPoint((y-x)/P);v.push(M);break}return v};n.exports=u},30052:(n,o,r)=>{var a=r(35001),p=r(23031),h=function(u){for(var f=u.points,l=0,d=0;d<f.length;d++){var v=f[d],c=f[(d+1)%f.length],m=new p(v.x,v.y,c.x,c.y);l+=a(m)}return l};n.exports=h},25717:(n,o,r)=>{var a=r(83419),p=r(63814),h=r(9564),u=r(23777),f=new a({initialize:function(d){this.type=u.POLYGON,this.area=0,this.points=[],d&&this.setTo(d)},contains:function(l,d){return p(this,l,d)},setTo:function(l){if(this.area=0,this.points=[],typeof l=="string"&&(l=l.split(" ")),!Array.isArray(l))return this;for(var d,v=0;v<l.length;v++)d={x:0,y:0},typeof l[v]=="number"||typeof l[v]=="string"?(d.x=parseFloat(l[v]),d.y=parseFloat(l[v+1]),v++):Array.isArray(l[v])?(d.x=l[v][0],d.y=l[v][1]):(d.x=l[v].x,d.y=l[v].y),this.points.push(d);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var l=0,d,v,c=0;c<this.points.length-1;c++)d=this.points[c],v=this.points[c+1],l+=(v.x-d.x)*(d.y+v.y);return d=this.points[0],v=this.points[this.points.length-1],l+=(d.x-v.x)*(v.y+d.y),this.area=-l*.5,this.area},getPoints:function(l,d,v){return h(this,l,d,v)}});n.exports=f},8133:n=>{var o=function(r){return r.points.reverse(),r};n.exports=o},29524:n=>{function o(f,l){var d=f.x-l.x,v=f.y-l.y;return d*d+v*v}function r(f,l,d){var v=l.x,c=l.y,m=d.x-v,g=d.y-c;if(m!==0||g!==0){var y=((f.x-v)*m+(f.y-c)*g)/(m*m+g*g);y>1?(v=d.x,c=d.y):y>0&&(v+=m*y,c+=g*y)}return m=f.x-v,g=f.y-c,m*m+g*g}function a(f,l){for(var d=f[0],v=[d],c,m=1,g=f.length;m<g;m++)c=f[m],o(c,d)>l&&(v.push(c),d=c);return d!==c&&v.push(c),v}function p(f,l,d,v,c){for(var m=v,g,y=l+1;y<d;y++){var x=r(f[y],f[l],f[d]);x>m&&(g=y,m=x)}m>v&&(g-l>1&&p(f,l,g,v,c),c.push(f[g]),d-g>1&&p(f,g,d,v,c))}function h(f,l){var d=f.length-1,v=[f[0]];return p(f,0,d,l,v),v.push(f[d]),v}var u=function(f,l,d){l===void 0&&(l=1),d===void 0&&(d=!1);var v=f.points;if(v.length>2){var c=l*l;d||(v=a(v,c)),f.setTo(h(v,c))}return f};n.exports=u},5469:n=>{var o=function(a,p){return a[0]=p[0],a[1]=p[1],a},r=function(a){var p,h=[],u=a.points;for(p=0;p<u.length;p++)h.push([u[p].x,u[p].y]);var f=[];for(h.length>0&&f.push(o([0,0],h[0])),p=0;p<h.length-1;p++){var l=h[p],d=h[p+1],v=l[0],c=l[1],m=d[0],g=d[1];f.push([.85*v+.15*m,.85*c+.15*g]),f.push([.15*v+.85*m,.15*c+.85*g])}return h.length>1&&f.push(o([0,0],h[h.length-1])),a.setTo(f)};n.exports=r},24709:n=>{var o=function(r,a,p){for(var h=r.points,u=0;u<h.length;u++)h[u].x+=a,h[u].y+=p;return r};n.exports=o},58423:(n,o,r)=>{var a=r(25717);a.Clone=r(12306),a.Contains=r(63814),a.ContainsPoint=r(99338),a.Earcut=r(94811),a.GetAABB=r(13829),a.GetNumberArray=r(26173),a.GetPoints=r(9564),a.Perimeter=r(30052),a.Reverse=r(8133),a.Simplify=r(29524),a.Smooth=r(5469),a.Translate=r(24709),n.exports=a},62224:n=>{var o=function(r){return r.width*r.height};n.exports=o},98615:n=>{var o=function(r){return r.x=Math.ceil(r.x),r.y=Math.ceil(r.y),r};n.exports=o},31688:n=>{var o=function(r){return r.x=Math.ceil(r.x),r.y=Math.ceil(r.y),r.width=Math.ceil(r.width),r.height=Math.ceil(r.height),r};n.exports=o},67502:n=>{var o=function(r,a,p){return r.x=a-r.width/2,r.y=p-r.height/2,r};n.exports=o},65085:(n,o,r)=>{var a=r(87841),p=function(h){return new a(h.x,h.y,h.width,h.height)};n.exports=p},37303:n=>{var o=function(r,a,p){return r.width<=0||r.height<=0?!1:r.x<=a&&r.x+r.width>=a&&r.y<=p&&r.y+r.height>=p};n.exports=o},96553:(n,o,r)=>{var a=r(37303),p=function(h,u){return a(h,u.x,u.y)};n.exports=p},70273:n=>{var o=function(r,a){return a.width*a.height>r.width*r.height?!1:a.x>r.x&&a.x<r.right&&a.right>r.x&&a.right<r.right&&a.y>r.y&&a.y<r.bottom&&a.bottom>r.y&&a.bottom<r.bottom};n.exports=o},43459:n=>{var o=function(r,a){return a.setTo(r.x,r.y,r.width,r.height)};n.exports=o},77493:n=>{var o=function(r,a){return a===void 0&&(a=[]),a.push({x:r.x,y:r.y}),a.push({x:r.right,y:r.y}),a.push({x:r.right,y:r.bottom}),a.push({x:r.x,y:r.bottom}),a};n.exports=o},9219:n=>{var o=function(r,a){return r.x===a.x&&r.y===a.y&&r.width===a.width&&r.height===a.height};n.exports=o},53751:(n,o,r)=>{var a=r(8249),p=function(h,u){var f=a(h);return f<a(u)?h.setSize(u.height*f,u.height):h.setSize(u.width,u.width/f),h.setPosition(u.centerX-h.width/2,u.centerY-h.height/2)};n.exports=p},16088:(n,o,r)=>{var a=r(8249),p=function(h,u){var f=a(h);return f>a(u)?h.setSize(u.height*f,u.height):h.setSize(u.width,u.width/f),h.setPosition(u.centerX-h.width/2,u.centerY-h.height/2)};n.exports=p},80774:n=>{var o=function(r){return r.x=Math.floor(r.x),r.y=Math.floor(r.y),r};n.exports=o},83859:n=>{var o=function(r){return r.x=Math.floor(r.x),r.y=Math.floor(r.y),r.width=Math.floor(r.width),r.height=Math.floor(r.height),r};n.exports=o},19217:(n,o,r)=>{var a=r(87841),p=r(36383),h=function(u,f){if(f===void 0&&(f=new a),u.length===0)return f;for(var l=Number.MAX_VALUE,d=Number.MAX_VALUE,v=p.MIN_SAFE_INTEGER,c=p.MIN_SAFE_INTEGER,m,g,y,x=0;x<u.length;x++)m=u[x],Array.isArray(m)?(g=m[0],y=m[1]):(g=m.x,y=m.y),l=Math.min(l,g),d=Math.min(d,y),v=Math.max(v,g),c=Math.max(c,y);return f.x=l,f.y=d,f.width=v-l,f.height=c-d,f};n.exports=h},9477:(n,o,r)=>{var a=r(87841),p=function(h,u,f,l,d){return d===void 0&&(d=new a),d.setTo(Math.min(h,f),Math.min(u,l),Math.abs(h-f),Math.abs(u-l))};n.exports=p},8249:n=>{var o=function(r){return r.height===0?NaN:r.width/r.height};n.exports=o},27165:(n,o,r)=>{var a=r(2141),p=function(h,u){return u===void 0&&(u=new a),u.x=h.centerX,u.y=h.centerY,u};n.exports=p},20812:(n,o,r)=>{var a=r(13019),p=r(2141),h=function(u,f,l){if(l===void 0&&(l=new p),f<=0||f>=1)return l.x=u.x,l.y=u.y,l;var d=a(u)*f;return f>.5?(d-=u.width+u.height,d<=u.width?(l.x=u.right-d,l.y=u.bottom):(l.x=u.x,l.y=u.bottom-(d-u.width))):d<=u.width?(l.x=u.x+d,l.y=u.y):(l.x=u.right,l.y=u.y+(d-u.width)),l};n.exports=h},34819:(n,o,r)=>{var a=r(20812),p=r(13019),h=function(u,f,l,d){d===void 0&&(d=[]),!f&&l>0&&(f=p(u)/l);for(var v=0;v<f;v++){var c=v/f;d.push(a(u,c))}return d};n.exports=h},51313:(n,o,r)=>{var a=r(2141),p=function(h,u){return u===void 0&&(u=new a),u.x=h.width,u.y=h.height,u};n.exports=p},86091:(n,o,r)=>{var a=r(67502),p=function(h,u,f){var l=h.centerX,d=h.centerY;return h.setSize(h.width+u*2,h.height+f*2),a(h,l,d)};n.exports=p},53951:(n,o,r)=>{var a=r(87841),p=r(59996),h=function(u,f,l){return l===void 0&&(l=new a),p(u,f)?(l.x=Math.max(u.x,f.x),l.y=Math.max(u.y,f.y),l.width=Math.min(u.right,f.right)-l.x,l.height=Math.min(u.bottom,f.bottom)-l.y):l.setEmpty(),l};n.exports=h},14649:(n,o,r)=>{var a=r(13019),p=r(2141),h=function(u,f,l,d){if(d===void 0&&(d=[]),!f&&!l)return d;f?l=Math.round(a(u)/f):f=a(u)/l;for(var v=u.x,c=u.y,m=0,g=0;g<l;g++)switch(d.push(new p(v,c)),m){case 0:v+=f,v>=u.right&&(m=1,c+=v-u.right,v=u.right);break;case 1:c+=f,c>=u.bottom&&(m=2,v-=c-u.bottom,c=u.bottom);break;case 2:v-=f,v<=u.left&&(m=3,c-=u.left-v,v=u.left);break;case 3:c-=f,c<=u.top&&(m=0,c=u.top);break}return d};n.exports=h},33595:n=>{var o=function(r,a){for(var p=r.x,h=r.right,u=r.y,f=r.bottom,l=0;l<a.length;l++)p=Math.min(p,a[l].x),h=Math.max(h,a[l].x),u=Math.min(u,a[l].y),f=Math.max(f,a[l].y);return r.x=p,r.y=u,r.width=h-p,r.height=f-u,r};n.exports=o},20074:n=>{var o=function(r,a){var p=Math.min(r.x,a.x),h=Math.max(r.right,a.right);r.x=p,r.width=h-p;var u=Math.min(r.y,a.y),f=Math.max(r.bottom,a.bottom);return r.y=u,r.height=f-u,r};n.exports=o},92171:n=>{var o=function(r,a,p){var h=Math.min(r.x,a),u=Math.max(r.right,a);r.x=h,r.width=u-h;var f=Math.min(r.y,p),l=Math.max(r.bottom,p);return r.y=f,r.height=l-f,r};n.exports=o},42981:n=>{var o=function(r,a,p){return r.x+=a,r.y+=p,r};n.exports=o},46907:n=>{var o=function(r,a){return r.x+=a.x,r.y+=a.y,r};n.exports=o},60170:n=>{var o=function(r,a){return r.x<a.right&&r.right>a.x&&r.y<a.bottom&&r.bottom>a.y};n.exports=o},13019:n=>{var o=function(r){return 2*(r.width+r.height)};n.exports=o},85133:(n,o,r)=>{var a=r(2141),p=r(39506),h=function(u,f,l){l===void 0&&(l=new a),f=p(f);var d=Math.sin(f),v=Math.cos(f),c=v>0?u.width/2:u.width/-2,m=d>0?u.height/2:u.height/-2;return Math.abs(c*d)<Math.abs(m*v)?m=c*d/v:c=m*v/d,l.x=c+u.centerX,l.y=m+u.centerY,l};n.exports=h},26597:(n,o,r)=>{var a=r(2141),p=function(h,u){return u===void 0&&(u=new a),u.x=h.x+Math.random()*h.width,u.y=h.y+Math.random()*h.height,u};n.exports=p},86470:(n,o,r)=>{var a=r(30976),p=r(70273),h=r(2141),u=function(f,l,d){if(d===void 0&&(d=new h),p(f,l))switch(a(0,3)){case 0:d.x=f.x+Math.random()*(l.right-f.x),d.y=f.y+Math.random()*(l.top-f.y);break;case 1:d.x=l.x+Math.random()*(f.right-l.x),d.y=l.bottom+Math.random()*(f.bottom-l.bottom);break;case 2:d.x=f.x+Math.random()*(l.x-f.x),d.y=l.y+Math.random()*(f.bottom-l.y);break;case 3:d.x=l.right+Math.random()*(f.right-l.right),d.y=f.y+Math.random()*(l.bottom-f.y);break}return d};n.exports=u},87841:(n,o,r)=>{var a=r(83419),p=r(37303),h=r(20812),u=r(34819),f=r(23777),l=r(23031),d=r(26597),v=new a({initialize:function(m,g,y,x){m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=0),this.type=f.RECTANGLE,this.x=m,this.y=g,this.width=y,this.height=x},contains:function(c,m){return p(this,c,m)},getPoint:function(c,m){return h(this,c,m)},getPoints:function(c,m,g){return u(this,c,m,g)},getRandomPoint:function(c){return d(this,c)},setTo:function(c,m,g,y){return this.x=c,this.y=m,this.width=g,this.height=y,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(c,m){return m===void 0&&(m=c),this.x=c,this.y=m,this},setSize:function(c,m){return m===void 0&&(m=c),this.width=c,this.height=m,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(c){return c===void 0&&(c=new l),c.setTo(this.x,this.y,this.right,this.y),c},getLineB:function(c){return c===void 0&&(c=new l),c.setTo(this.right,this.y,this.right,this.bottom),c},getLineC:function(c){return c===void 0&&(c=new l),c.setTo(this.right,this.bottom,this.x,this.bottom),c},getLineD:function(c){return c===void 0&&(c=new l),c.setTo(this.x,this.bottom,this.x,this.y),c},left:{get:function(){return this.x},set:function(c){c>=this.right?this.width=0:this.width=this.right-c,this.x=c}},right:{get:function(){return this.x+this.width},set:function(c){c<=this.x?this.width=0:this.width=c-this.x}},top:{get:function(){return this.y},set:function(c){c>=this.bottom?this.height=0:this.height=this.bottom-c,this.y=c}},bottom:{get:function(){return this.y+this.height},set:function(c){c<=this.y?this.height=0:this.height=c-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(c){this.x=c-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(c){this.y=c-this.height/2}}});n.exports=v},94845:n=>{var o=function(r,a){return r.width===a.width&&r.height===a.height};n.exports=o},31730:n=>{var o=function(r,a,p){return p===void 0&&(p=a),r.width*=a,r.height*=p,r};n.exports=o},36899:(n,o,r)=>{var a=r(87841),p=function(h,u,f){f===void 0&&(f=new a);var l=Math.min(h.x,u.x),d=Math.min(h.y,u.y),v=Math.max(h.right,u.right)-l,c=Math.max(h.bottom,u.bottom)-d;return f.setTo(l,d,v,c)};n.exports=p},93232:(n,o,r)=>{var a=r(87841);a.Area=r(62224),a.Ceil=r(98615),a.CeilAll=r(31688),a.CenterOn=r(67502),a.Clone=r(65085),a.Contains=r(37303),a.ContainsPoint=r(96553),a.ContainsRect=r(70273),a.CopyFrom=r(43459),a.Decompose=r(77493),a.Equals=r(9219),a.FitInside=r(53751),a.FitOutside=r(16088),a.Floor=r(80774),a.FloorAll=r(83859),a.FromPoints=r(19217),a.FromXY=r(9477),a.GetAspectRatio=r(8249),a.GetCenter=r(27165),a.GetPoint=r(20812),a.GetPoints=r(34819),a.GetSize=r(51313),a.Inflate=r(86091),a.Intersection=r(53951),a.MarchingAnts=r(14649),a.MergePoints=r(33595),a.MergeRect=r(20074),a.MergeXY=r(92171),a.Offset=r(42981),a.OffsetPoint=r(46907),a.Overlaps=r(60170),a.Perimeter=r(13019),a.PerimeterPoint=r(85133),a.Random=r(26597),a.RandomOutside=r(86470),a.SameDimensions=r(94845),a.Scale=r(31730),a.Union=r(36899),n.exports=a},41658:n=>{var o=function(r){var a=r.x1,p=r.y1,h=r.x2,u=r.y2,f=r.x3,l=r.y3;return Math.abs(((f-a)*(u-p)-(h-a)*(l-p))/2)};n.exports=o},39208:(n,o,r)=>{var a=r(16483),p=function(h,u,f){var l=f*(Math.sqrt(3)/2),d=h,v=u,c=h+f/2,m=u+l,g=h-f/2,y=u+l;return new a(d,v,c,m,g,y)};n.exports=p},39545:(n,o,r)=>{var a=r(94811),p=r(16483),h=function(u,f,l,d,v){f===void 0&&(f=null),l===void 0&&(l=1),d===void 0&&(d=1),v===void 0&&(v=[]);for(var c=a(u,f),m,g,y,x,C,S,E,T,P,M=0;M<c.length;M+=3)m=c[M],g=c[M+1],y=c[M+2],x=u[m*2]*l,C=u[m*2+1]*d,S=u[g*2]*l,E=u[g*2+1]*d,T=u[y*2]*l,P=u[y*2+1]*d,v.push(new p(x,C,S,E,T,P));return v};n.exports=h},90301:(n,o,r)=>{var a=r(16483),p=function(h,u,f,l){l===void 0&&(l=f);var d=h,v=u,c=h,m=u-l,g=h+f,y=u;return new a(d,v,c,m,g,y)};n.exports=p},23707:(n,o,r)=>{var a=r(97523),p=r(13584),h=function(u,f,l,d){d===void 0&&(d=a);var v=d(u),c=f-v.x,m=l-v.y;return p(u,c,m)};n.exports=h},97523:(n,o,r)=>{var a=r(2141),p=function(h,u){return u===void 0&&(u=new a),u.x=(h.x1+h.x2+h.x3)/3,u.y=(h.y1+h.y2+h.y3)/3,u};n.exports=p},24951:(n,o,r)=>{var a=r(26099);function p(u,f,l,d){return u*d-f*l}var h=function(u,f){f===void 0&&(f=new a);var l=u.x3,d=u.y3,v=u.x1-l,c=u.y1-d,m=u.x2-l,g=u.y2-d,y=2*p(v,c,m,g),x=p(c,v*v+c*c,g,m*m+g*g),C=p(v,v*v+c*c,m,m*m+g*g);return f.x=l-x/y,f.y=d+C/y,f};n.exports=h},85614:(n,o,r)=>{var a=r(96503),p=function(h,u){u===void 0&&(u=new a);var f=h.x1,l=h.y1,d=h.x2,v=h.y2,c=h.x3,m=h.y3,g=d-f,y=v-l,x=c-f,C=m-l,S=g*(f+d)+y*(l+v),E=x*(f+c)+C*(l+m),T=2*(g*(m-v)-y*(c-d)),P,M;if(Math.abs(T)<1e-6){var w=Math.min(f,d,c),b=Math.min(l,v,m);P=(Math.max(f,d,c)-w)*.5,M=(Math.max(l,v,m)-b)*.5,u.x=w+P,u.y=b+M,u.radius=Math.sqrt(P*P+M*M)}else u.x=(C*S-y*E)/T,u.y=(g*E-x*S)/T,P=u.x-f,M=u.y-l,u.radius=Math.sqrt(P*P+M*M);return u};n.exports=p},74422:(n,o,r)=>{var a=r(16483),p=function(h){return new a(h.x1,h.y1,h.x2,h.y2,h.x3,h.y3)};n.exports=p},10690:n=>{var o=function(r,a,p){var h=r.x3-r.x1,u=r.y3-r.y1,f=r.x2-r.x1,l=r.y2-r.y1,d=a-r.x1,v=p-r.y1,c=h*h+u*u,m=h*f+u*l,g=h*d+u*v,y=f*f+l*l,x=f*d+l*v,C=c*y-m*m,S=C===0?0:1/C,E=(y*g-m*x)*S,T=(c*x-m*g)*S;return E>=0&&T>=0&&E+T<1};n.exports=o},48653:n=>{var o=function(r,a,p,h){p===void 0&&(p=!1),h===void 0&&(h=[]);for(var u=r.x3-r.x1,f=r.y3-r.y1,l=r.x2-r.x1,d=r.y2-r.y1,v=u*u+f*f,c=u*l+f*d,m=l*l+d*d,g=v*m-c*c,y=g===0?0:1/g,x,C,S,E,T,P,M=r.x1,w=r.y1,b=0;b<a.length&&(S=a[b].x-M,E=a[b].y-w,T=u*S+f*E,P=l*S+d*E,x=(m*T-c*P)*y,C=(v*P-c*T)*y,!(x>=0&&C>=0&&x+C<1&&(h.push({x:a[b].x,y:a[b].y}),p)));b++);return h};n.exports=o},96006:(n,o,r)=>{var a=r(10690),p=function(h,u){return a(h,u.x,u.y)};n.exports=p},71326:n=>{var o=function(r,a){return a.setTo(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};n.exports=o},71694:n=>{var o=function(r,a){return a===void 0&&(a=[]),a.push({x:r.x1,y:r.y1}),a.push({x:r.x2,y:r.y2}),a.push({x:r.x3,y:r.y3}),a};n.exports=o},33522:n=>{var o=function(r,a){return r.x1===a.x1&&r.y1===a.y1&&r.x2===a.x2&&r.y2===a.y2&&r.x3===a.x3&&r.y3===a.y3};n.exports=o},20437:(n,o,r)=>{var a=r(2141),p=r(35001),h=function(u,f,l){l===void 0&&(l=new a);var d=u.getLineA(),v=u.getLineB(),c=u.getLineC();if(f<=0||f>=1)return l.x=d.x1,l.y=d.y1,l;var m=p(d),g=p(v),y=p(c),x=m+g+y,C=x*f,S=0;return C<m?(S=C/m,l.x=d.x1+(d.x2-d.x1)*S,l.y=d.y1+(d.y2-d.y1)*S):C>m+g?(C-=m+g,S=C/y,l.x=c.x1+(c.x2-c.x1)*S,l.y=c.y1+(c.y2-c.y1)*S):(C-=m,S=C/g,l.x=v.x1+(v.x2-v.x1)*S,l.y=v.y1+(v.y2-v.y1)*S),l};n.exports=h},80672:(n,o,r)=>{var a=r(35001),p=r(2141),h=function(u,f,l,d){d===void 0&&(d=[]);var v=u.getLineA(),c=u.getLineB(),m=u.getLineC(),g=a(v),y=a(c),x=a(m),C=g+y+x;!f&&l>0&&(f=C/l);for(var S=0;S<f;S++){var E=C*(S/f),T=0,P=new p;E<g?(T=E/g,P.x=v.x1+(v.x2-v.x1)*T,P.y=v.y1+(v.y2-v.y1)*T):E>g+y?(E-=g+y,T=E/x,P.x=m.x1+(m.x2-m.x1)*T,P.y=m.y1+(m.y2-m.y1)*T):(E-=g,T=E/y,P.x=c.x1+(c.x2-c.x1)*T,P.y=c.y1+(c.y2-c.y1)*T),d.push(P)}return d};n.exports=h},39757:(n,o,r)=>{var a=r(2141);function p(u,f,l,d){var v=u-l,c=f-d,m=v*v+c*c;return Math.sqrt(m)}var h=function(u,f){f===void 0&&(f=new a);var l=u.x1,d=u.y1,v=u.x2,c=u.y2,m=u.x3,g=u.y3,y=p(m,g,v,c),x=p(l,d,m,g),C=p(v,c,l,d),S=y+x+C;return f.x=(l*y+v*x+m*C)/S,f.y=(d*y+c*x+g*C)/S,f};n.exports=h},13584:n=>{var o=function(r,a,p){return r.x1+=a,r.y1+=p,r.x2+=a,r.y2+=p,r.x3+=a,r.y3+=p,r};n.exports=o},1376:(n,o,r)=>{var a=r(35001),p=function(h){var u=h.getLineA(),f=h.getLineB(),l=h.getLineC();return a(u)+a(f)+a(l)};n.exports=p},90260:(n,o,r)=>{var a=r(2141),p=function(h,u){u===void 0&&(u=new a);var f=h.x2-h.x1,l=h.y2-h.y1,d=h.x3-h.x1,v=h.y3-h.y1,c=Math.random(),m=Math.random();return c+m>=1&&(c=1-c,m=1-m),u.x=h.x1+(f*c+d*m),u.y=h.y1+(l*c+v*m),u};n.exports=p},52172:(n,o,r)=>{var a=r(99614),p=r(39757),h=function(u,f){var l=p(u);return a(u,l.x,l.y,f)};n.exports=h},49907:(n,o,r)=>{var a=r(99614),p=function(h,u,f){return a(h,u.x,u.y,f)};n.exports=p},99614:n=>{var o=function(r,a,p,h){var u=Math.cos(h),f=Math.sin(h),l=r.x1-a,d=r.y1-p;return r.x1=l*u-d*f+a,r.y1=l*f+d*u+p,l=r.x2-a,d=r.y2-p,r.x2=l*u-d*f+a,r.y2=l*f+d*u+p,l=r.x3-a,d=r.y3-p,r.x3=l*u-d*f+a,r.y3=l*f+d*u+p,r};n.exports=o},16483:(n,o,r)=>{var a=r(83419),p=r(10690),h=r(20437),u=r(80672),f=r(23777),l=r(23031),d=r(90260),v=new a({initialize:function(m,g,y,x,C,S){m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=0),C===void 0&&(C=0),S===void 0&&(S=0),this.type=f.TRIANGLE,this.x1=m,this.y1=g,this.x2=y,this.y2=x,this.x3=C,this.y3=S},contains:function(c,m){return p(this,c,m)},getPoint:function(c,m){return h(this,c,m)},getPoints:function(c,m,g){return u(this,c,m,g)},getRandomPoint:function(c){return d(this,c)},setTo:function(c,m,g,y,x,C){return c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=0),C===void 0&&(C=0),this.x1=c,this.y1=m,this.x2=g,this.y2=y,this.x3=x,this.y3=C,this},getLineA:function(c){return c===void 0&&(c=new l),c.setTo(this.x1,this.y1,this.x2,this.y2),c},getLineB:function(c){return c===void 0&&(c=new l),c.setTo(this.x2,this.y2,this.x3,this.y3),c},getLineC:function(c){return c===void 0&&(c=new l),c.setTo(this.x3,this.y3,this.x1,this.y1),c},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(c){var m=0;this.x1<=this.x2&&this.x1<=this.x3?m=this.x1-c:this.x2<=this.x1&&this.x2<=this.x3?m=this.x2-c:m=this.x3-c,this.x1-=m,this.x2-=m,this.x3-=m}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(c){var m=0;this.x1>=this.x2&&this.x1>=this.x3?m=this.x1-c:this.x2>=this.x1&&this.x2>=this.x3?m=this.x2-c:m=this.x3-c,this.x1-=m,this.x2-=m,this.x3-=m}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(c){var m=0;this.y1<=this.y2&&this.y1<=this.y3?m=this.y1-c:this.y2<=this.y1&&this.y2<=this.y3?m=this.y2-c:m=this.y3-c,this.y1-=m,this.y2-=m,this.y3-=m}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(c){var m=0;this.y1>=this.y2&&this.y1>=this.y3?m=this.y1-c:this.y2>=this.y1&&this.y2>=this.y3?m=this.y2-c:m=this.y3-c,this.y1-=m,this.y2-=m,this.y3-=m}}});n.exports=v},84435:(n,o,r)=>{var a=r(16483);a.Area=r(41658),a.BuildEquilateral=r(39208),a.BuildFromPolygon=r(39545),a.BuildRight=r(90301),a.CenterOn=r(23707),a.Centroid=r(97523),a.CircumCenter=r(24951),a.CircumCircle=r(85614),a.Clone=r(74422),a.Contains=r(10690),a.ContainsArray=r(48653),a.ContainsPoint=r(96006),a.CopyFrom=r(71326),a.Decompose=r(71694),a.Equals=r(33522),a.GetPoint=r(20437),a.GetPoints=r(80672),a.InCenter=r(39757),a.Perimeter=r(1376),a.Offset=r(13584),a.Random=r(90260),a.Rotate=r(52172),a.RotateAroundPoint=r(49907),a.RotateAroundXY=r(99614),n.exports=a},74457:n=>{var o=function(r,a,p){return{gameObject:r,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:a,hitAreaCallback:p,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragStartCamera:null,dragX:0,dragY:0}};n.exports=o},84409:n=>{var o=function(r,a){return function(p,h,u,f){var l=r.getPixelAlpha(h,u,f.texture.key,f.frame.name);return l&&l>=a}};n.exports=o},7003:(n,o,r)=>{var a=r(83419),p=r(93301),h=r(50792),u=r(8214),f=r(8443),l=r(78970),d=r(85098),v=r(42515),c=r(36210),m=r(61340),g=r(85955),y=new a({initialize:function(C,S){this.game=C,this.scaleManager,this.canvas,this.config=S,this.enabled=!0,this.events=new h,this.isOver=!0,this.defaultCursor="",this.keyboard=S.inputKeyboard?new l(this):null,this.mouse=S.inputMouse?new d(this):null,this.touch=S.inputTouch?new c(this):null,this.pointers=[],this.pointersTotal=S.inputActivePointers;for(var E=0;E<=this.pointersTotal;E++){var T=new v(this,E);T.smoothFactor=S.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=S.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new m,this._tempMatrix2=new m,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],C.events.once(f.BOOT,this.boot,this)},boot:function(){var x=this.game,C=x.events;this.canvas=x.canvas,this.scaleManager=x.scale,this.events.emit(u.MANAGER_BOOT),C.on(f.PRE_RENDER,this.preRender,this),C.once(f.DESTROY,this.destroy,this)},setCanvasOver:function(x){this.isOver=!0,this.events.emit(u.GAME_OVER,x)},setCanvasOut:function(x){this.isOver=!1,this.events.emit(u.GAME_OUT,x)},preRender:function(){var x=this.game.loop.now,C=this.game.loop.delta,S=this.game.scene.getScenes(!0,!0);this.time=x,this.events.emit(u.MANAGER_UPDATE);for(var E=0;E<S.length;E++){var T=S[E];if(T.sys.input&&T.sys.input.updatePoll(x,C)&&this.globalTopOnly)return}},setDefaultCursor:function(x){this.defaultCursor=x,this.canvas.style.cursor!==x&&(this.canvas.style.cursor=x)},setCursor:function(x){x.cursor&&(this.canvas.style.cursor=x.cursor)},resetCursor:function(x,C){(C||x&&x.cursor)&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(x){x===void 0&&(x=1);var C=[];this.pointersTotal+x>10&&(x=10-this.pointersTotal);for(var S=0;S<x;S++){var E=this.pointers.length,T=new v(this,E);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,C.push(T)}return C},updateInputPlugins:function(x,C){var S=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var E=0;E<S.length;E++){var T=S[E];if(T.sys.input){var P=T.sys.input.update(x,C);if(P&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(x){for(var C=this.pointers,S=[],E=0;E<x.changedTouches.length;E++)for(var T=x.changedTouches[E],P=1;P<C.length;P++){var M=C[P];if(!M.active){M.touchstart(T,x),this.activePointer=M,S.push(M);break}}this.updateInputPlugins(p.TOUCH_START,S)},onTouchMove:function(x){for(var C=this.pointers,S=[],E=0;E<x.changedTouches.length;E++)for(var T=x.changedTouches[E],P=1;P<C.length;P++){var M=C[P];if(M.active&&M.identifier===T.identifier){var w=document.elementFromPoint(T.clientX,T.clientY),b=w===this.canvas;!this.isOver&&b?this.setCanvasOver(x):this.isOver&&!b&&this.setCanvasOut(x),this.isOver&&(M.touchmove(T,x),this.activePointer=M,S.push(M));break}}this.updateInputPlugins(p.TOUCH_MOVE,S)},onTouchEnd:function(x){for(var C=this.pointers,S=[],E=0;E<x.changedTouches.length;E++)for(var T=x.changedTouches[E],P=1;P<C.length;P++){var M=C[P];if(M.active&&M.identifier===T.identifier){M.touchend(T,x),S.push(M);break}}this.updateInputPlugins(p.TOUCH_END,S)},onTouchCancel:function(x){for(var C=this.pointers,S=[],E=0;E<x.changedTouches.length;E++)for(var T=x.changedTouches[E],P=1;P<C.length;P++){var M=C[P];if(M.active&&M.identifier===T.identifier){M.touchcancel(T,x),S.push(M);break}}this.updateInputPlugins(p.TOUCH_CANCEL,S)},onMouseDown:function(x){var C=this.mousePointer;C.down(x),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(x){var C=this.mousePointer;C.move(x),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(x){var C=this.mousePointer;C.up(x),C.updateMotion(),this.activePointer=C,this.updateInputPlugins(p.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(x){var C=this.mousePointer;C.wheel(x),this.activePointer=C,this.updateInputPlugins(p.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(x){var C=this.mouse.locked;this.mousePointer.locked=C,this.events.emit(u.POINTERLOCK_CHANGE,x,C)},inputCandidate:function(x,C){var S=x.input;if(!S||!S.enabled||!x.willRender(C))return!1;var E=!0,T=x.parentContainer;if(T)do{if(!T.willRender(C)){E=!1;break}T=T.parentContainer}while(T);return E},hitTest:function(x,C,S,E){E===void 0&&(E=this._tempHitTest);var T=this._tempPoint,P=S.scrollX,M=S.scrollY;E.length=0;var w=x.x,b=x.y;S.getWorldPoint(w,b,T),x.worldX=T.x,x.worldY=T.y;for(var I={x:0,y:0},R=this._tempMatrix,A=this._tempMatrix2,L=0;L<C.length;L++){var O=C[L];if(this.inputCandidate(O,S)){var F=T.x+P*O.scrollFactorX-P,G=T.y+M*O.scrollFactorY-M;O.parentContainer?(O.getWorldTransformMatrix(R,A),R.applyInverse(F,G,I)):g(F,G,O.x,O.y,O.rotation,O.scaleX,O.scaleY,I),this.pointWithinHitArea(O,I.x,I.y)&&E.push(O)}}return E},pointWithinHitArea:function(x,C,S){C+=x.displayOriginX,S+=x.displayOriginY;var E=x.input;return E&&E.hitAreaCallback(E.hitArea,C,S,x)?(E.localX=C,E.localY=S,!0):!1},pointWithinInteractiveObject:function(x,C,S){return x.hitArea?(C+=x.gameObject.displayOriginX,S+=x.gameObject.displayOriginY,x.localX=C,x.localY=S,x.hitAreaCallback(x.hitArea,C,S,x)):!1},transformPointer:function(x,C,S,E){var T=x.position,P=x.prevPosition;P.x=T.x,P.y=T.y;var M=this.scaleManager.transformX(C),w=this.scaleManager.transformY(S),b=x.smoothFactor;!E||b===0?(T.x=M,T.y=w):(T.x=M*b+P.x*(1-b),T.y=w*b+P.y*(1-b))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(f.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var x=0;x<this.pointers.length;x++)this.pointers[x].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});n.exports=y},48205:(n,o,r)=>{var a=r(96503),p=r(87902),h=r(83419),u=r(93301),f=r(74457),l=r(84409),d=r(20339),v=r(8497),c=r(81154),m=r(8214),g=r(50792),y=r(95540),x=r(23777),C=r(89639),S=r(41212),E=r(37277),T=r(87841),P=r(37303),M=r(44594),w=r(16483),b=r(10690),I=new h({Extends:g,initialize:function(A){g.call(this),this.scene=A,this.systems=A.sys,this.settings=A.sys.settings,this.manager=A.sys.game.input,this.pluginEvents=new g,this.enabled=!0,this.displayList,this.cameras,C.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var L={cancelled:!1};this._eventContainer={stopPropagation:function(){L.cancelled=!0}},this._eventData=L,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,A.sys.events.once(M.BOOT,this.boot,this),A.sys.events.on(M.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(M.DESTROY,this.destroy,this),this.pluginEvents.emit(m.BOOT)},start:function(){var R=this.systems.events;R.on(M.TRANSITION_START,this.transitionIn,this),R.on(M.TRANSITION_OUT,this.transitionOut,this),R.on(M.TRANSITION_COMPLETE,this.transitionComplete,this),R.on(M.PRE_UPDATE,this.preUpdate,this),R.once(M.SHUTDOWN,this.shutdown,this),this.manager.events.on(m.GAME_OUT,this.onGameOut,this),this.manager.events.on(m.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(m.START)},onGameOver:function(R){this.isActive()&&this.emit(m.GAME_OVER,R.timeStamp,R)},onGameOut:function(R){this.isActive()&&this.emit(m.GAME_OUT,R.timeStamp,R)},preUpdate:function(){this.pluginEvents.emit(m.PRE_UPDATE);var R=this._pendingRemoval,A=this._pendingInsertion,L=R.length,O=A.length;if(!(L===0&&O===0)){for(var F=this._list,G=0;G<L;G++){var U=R[G],z=F.indexOf(U);z>-1&&(F.splice(z,1),this.clear(U,!0))}this._pendingRemoval.length=0,this._list=F.concat(A.splice(0))}},isActive:function(){return this.manager&&this.manager.enabled&&this.enabled&&this.scene.sys.canInput()},setCursor:function(R){this.manager&&this.manager.setCursor(R)},resetCursor:function(){this.manager&&this.manager.resetCursor(null,!0)},updatePoll:function(R,A){if(!this.isActive())return!1;if(this.pluginEvents.emit(m.UPDATE,R,A),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var L,O=this.manager,F=O.pointers;for(L=0;L<F.length;L++)F[L].updateMotion();if(this._list.length===0)return!1;var G=this.pollRate;if(G===-1)return!1;if(G>0)if(this._pollTimer-=A,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var U=!1;for(L=0;L<F.length;L++){var z=0,N=F[L];this._tempZones=[],this._temp=this.hitTestPointer(N),this.sortGameObjects(this._temp,N),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),z+=this.processOverOutEvents(N),this.getDragState(N)===2&&this.processDragThresholdEvent(N,R),z>0&&(U=!0)}return U},update:function(R,A){if(!this.isActive())return!1;for(var L=!1,O=0;O<A.length;O++){var F=0,G=A[O];switch(this._tempZones=[],this._temp=this.hitTestPointer(G),this.sortGameObjects(this._temp,G),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),R){case u.MOUSE_DOWN:F+=this.processDragDownEvent(G),F+=this.processDownEvents(G),F+=this.processOverOutEvents(G);break;case u.MOUSE_UP:F+=this.processDragUpEvent(G),F+=this.processUpEvents(G),F+=this.processOverOutEvents(G);break;case u.TOUCH_START:F+=this.processDragDownEvent(G),F+=this.processDownEvents(G),F+=this.processOverEvents(G);break;case u.TOUCH_END:case u.TOUCH_CANCEL:F+=this.processDragUpEvent(G),F+=this.processUpEvents(G),F+=this.processOutEvents(G);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:F+=this.processDragMoveEvent(G),F+=this.processMoveEvents(G),F+=this.processOverOutEvents(G);break;case u.MOUSE_WHEEL:F+=this.processWheelEvent(G);break}F>0&&(L=!0)}return this._updatedThisFrame=!0,L},clear:function(R,A){A===void 0&&(A=!1),this.disable(R);var L=R.input;L&&(this.removeDebug(R),this.manager.resetCursor(L),L.gameObject=void 0,L.target=void 0,L.hitArea=void 0,L.hitAreaCallback=void 0,L.callbackContext=void 0,R.input=null),A||this.queueForRemoval(R);var O=this._draggable.indexOf(R);return O>-1&&this._draggable.splice(O,1),R},disable:function(R,A){A===void 0&&(A=!1);var L=R.input;L&&(L.enabled=!1,L.dragState=0);for(var O=this._drag,F=this._over,G=this.manager,U=0,z;U<G.pointers.length;U++)z=O[U].indexOf(R),z>-1&&O[U].splice(z,1),z=F[U].indexOf(R),z>-1&&F[U].splice(z,1);return A&&this.resetCursor(),this},enable:function(R,A,L,O){return O===void 0&&(O=!1),R.input?R.input.enabled=!0:this.setHitArea(R,A,L),R.input&&O&&!R.input.dropZone&&(R.input.dropZone=O),this},hitTestPointer:function(R){for(var A=this.cameras.getCamerasBelowPointer(R),L=0;L<A.length;L++){for(var O=A[L],F=this.manager.hitTest(R,this._list,O),G=0;G<F.length;G++){var U=F[G];U.input.dropZone&&this._tempZones.push(U)}if(F.length>0)return R.camera=O,F}return R.camera=A[0],[]},processDownEvents:function(R){var A=0,L=this._temp,O=this._eventData,F=this._eventContainer;O.cancelled=!1;for(var G=0;G<L.length;G++){var U=L[G];if(!(!U.input||!U.input.enabled)&&(A++,U.emit(m.GAMEOBJECT_POINTER_DOWN,R,U.input.localX,U.input.localY,F),O.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(m.GAMEOBJECT_DOWN,R,U,F),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&(R.downElement===this.manager.game.canvas?this.emit(m.POINTER_DOWN,R,L):this.emit(m.POINTER_DOWN_OUTSIDE,R)),A},getDragState:function(R){return this._dragState[R.id]},setDragState:function(R,A){this._dragState[R.id]=A},processDragThresholdEvent:function(R,A){var L=!1,O=this.dragTimeThreshold,F=this.dragDistanceThreshold;if((F>0&&d(R.x,R.y,R.downX,R.downY)>=F||O>0&&A>=R.downTime+O)&&(L=!0),L)return this.setDragState(R,3),this.processDragStartList(R)},processDragStartList:function(R){if(this.getDragState(R)!==3)return 0;var A=this._drag[R.id];A.length>1&&(A=A.slice(0));for(var L=0;L<A.length;L++){var O=A[L],F=O.input;F.dragState=2,F.dragStartX=O.x,F.dragStartY=O.y,F.dragStartXGlobal=R.worldX,F.dragStartYGlobal=R.worldY,F.dragStartCamera=R.camera,F.dragX=F.dragStartXGlobal-F.dragStartX,F.dragY=F.dragStartYGlobal-F.dragStartY,O.emit(m.GAMEOBJECT_DRAG_START,R,F.dragX,F.dragY),this.emit(m.DRAG_START,R,O)}return this.setDragState(R,4),A.length},processDragDownEvent:function(R){var A=this._temp;if(this._draggable.length===0||A.length===0||!R.primaryDown||this.getDragState(R)!==0)return 0;this.setDragState(R,1);for(var L=[],O=0;O<A.length;O++){var F=A[O];F.input.draggable&&F.input.dragState===0&&L.push(F)}return L.length===0?(this.setDragState(R,0),0):(L.length>1&&(this.sortGameObjects(L,R),this.topOnly&&L.splice(1)),this._drag[R.id]=L,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(R,3),this.processDragStartList(R)):(this.setDragState(R,2),0))},processDragMoveEvent:function(R){if(this.getDragState(R)===2&&this.processDragThresholdEvent(R,this.manager.game.loop.now),this.getDragState(R)!==4)return 0;var A=this._tempZones,L=this._drag[R.id];L.length>1&&(L=L.slice(0));for(var O=0;O<L.length;O++){var F=L[O],G=F.input,U=G.target;if(U){var z=A.indexOf(U);z===0?(F.emit(m.GAMEOBJECT_DRAG_OVER,R,U),this.emit(m.DRAG_OVER,R,F,U)):z>0?(F.emit(m.GAMEOBJECT_DRAG_LEAVE,R,U),this.emit(m.DRAG_LEAVE,R,F,U),G.target=A[0],U=G.target,F.emit(m.GAMEOBJECT_DRAG_ENTER,R,U),this.emit(m.DRAG_ENTER,R,F,U)):(F.emit(m.GAMEOBJECT_DRAG_LEAVE,R,U),this.emit(m.DRAG_LEAVE,R,F,U),A[0]?(G.target=A[0],U=G.target,F.emit(m.GAMEOBJECT_DRAG_ENTER,R,U),this.emit(m.DRAG_ENTER,R,F,U)):G.target=null)}else!U&&A[0]&&(G.target=A[0],U=G.target,F.emit(m.GAMEOBJECT_DRAG_ENTER,R,U),this.emit(m.DRAG_ENTER,R,F,U));var N,k,D=R.positionToCamera(G.dragStartCamera);if(!F.parentContainer)N=D.x-G.dragX,k=D.y-G.dragY;else{var V=D.x-G.dragStartXGlobal,B=D.y-G.dragStartYGlobal,W=F.getParentRotation(),H=V*Math.cos(W)+B*Math.sin(W),Y=B*Math.cos(W)-V*Math.sin(W);H*=1/F.parentContainer.scaleX,Y*=1/F.parentContainer.scaleY,N=H+G.dragStartX,k=Y+G.dragStartY}F.emit(m.GAMEOBJECT_DRAG,R,N,k),this.emit(m.DRAG,R,F,N,k)}return L.length},processDragUpEvent:function(R){var A=this._drag[R.id];A.length>1&&(A=A.slice(0));for(var L=0;L<A.length;L++){var O=A[L],F=O.input;if(F&&F.dragState===2){F.dragState=0,F.dragX=F.localX-O.displayOriginX,F.dragY=F.localY-O.displayOriginY,F.dragStartCamera=null;var G=!1,U=F.target;U&&(O.emit(m.GAMEOBJECT_DROP,R,U),this.emit(m.DROP,R,O,U),F.target=null,G=!0),O.input&&O.input.enabled&&(O.emit(m.GAMEOBJECT_DRAG_END,R,F.dragX,F.dragY,G),this.emit(m.DRAG_END,R,O,G))}}return this.setDragState(R,0),A.splice(0),0},processMoveEvents:function(R){var A=0,L=this._temp,O=this._eventData,F=this._eventContainer;O.cancelled=!1;for(var G=0;G<L.length;G++){var U=L[G];if(!(!U.input||!U.input.enabled)&&(A++,U.emit(m.GAMEOBJECT_POINTER_MOVE,R,U.input.localX,U.input.localY,F),O.cancelled||!this.isActive()||U.input&&U.input.enabled&&(this.emit(m.GAMEOBJECT_MOVE,R,U,F),O.cancelled||!this.isActive()||this.topOnly)))break}return!O.cancelled&&this.isActive()&&this.emit(m.POINTER_MOVE,R,L),A},processWheelEvent:function(R){var A=0,L=this._temp,O=this._eventData,F=this._eventContainer;O.cancelled=!1;for(var G=R.deltaX,U=R.deltaY,z=R.deltaZ,N=0;N<L.length;N++){var k=L[N];if(!(!k.input||!k.input.enabled)&&(A++,k.emit(m.GAMEOBJECT_POINTER_WHEEL,R,G,U,z,F),O.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(m.GAMEOBJECT_WHEEL,R,k,G,U,z,F),O.cancelled||!this.isActive())))break}return!O.cancelled&&this.isActive()&&this.emit(m.POINTER_WHEEL,R,L,G,U,z),A},processOverEvents:function(R){var A=this._temp,L=0,O=A.length,F=[];if(O>0){var G=this.manager,U=this._eventData,z=this._eventContainer;U.cancelled=!1;for(var N=0;N<O;N++){var k=A[N];if(!(!k.input||!k.input.enabled)&&(F.push(k),G.setCursor(k.input),k.emit(m.GAMEOBJECT_POINTER_OVER,R,k.input.localX,k.input.localY,z),L++,U.cancelled||!this.isActive()||k.input&&k.input.enabled&&(this.emit(m.GAMEOBJECT_OVER,R,k,z),U.cancelled||!this.isActive())))break}!U.cancelled&&this.isActive()&&this.emit(m.POINTER_OVER,R,F)}return this._over[R.id]=F,L},processOutEvents:function(R){var A=this._over[R.id],L=0,O=A.length;if(O>0){var F=this.manager,G=this._eventData,U=this._eventContainer;G.cancelled=!1,this.sortGameObjects(A,R);for(var z=0;z<O;z++){var N=A[z];if(N=A[z],!(!N.input||!N.input.enabled)&&(F.resetCursor(N.input),N.emit(m.GAMEOBJECT_POINTER_OUT,R,U),L++,G.cancelled||!this.isActive()||N.input&&N.input.enabled&&(this.emit(m.GAMEOBJECT_OUT,R,N,U),G.cancelled||!this.isActive())))break}!G.cancelled&&this.isActive()&&this.emit(m.POINTER_OUT,R,A),this._over[R.id]=[]}return L},processOverOutEvents:function(R){var A=this._temp,L,O,F=[],G=[],U=[],z=this._over[R.id],N=this._drag[R.id],k=this.manager;for(L=0;L<z.length;L++)O=z[L],A.indexOf(O)===-1&&N.indexOf(O)===-1?F.push(O):U.push(O);for(L=0;L<A.length;L++)O=A[L],z.indexOf(O)===-1&&G.push(O);var D=F.length,V=0,B=this._eventData,W=this._eventContainer;if(B.cancelled=!1,D>0){for(this.sortGameObjects(F,R),L=0;L<D&&(O=F[L],!(!(!O.input||!O.input.enabled)&&(k.resetCursor(O.input),O.emit(m.GAMEOBJECT_POINTER_OUT,R,W),V++,B.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(m.GAMEOBJECT_OUT,R,O,W),B.cancelled||!this.isActive()))));L++);(!B.cancelled||this.isActive())&&this.emit(m.POINTER_OUT,R,F)}if(D=G.length,B.cancelled=!1,D>0){for(this.sortGameObjects(G,R),L=0;L<D&&(O=G[L],!(!(!O.input||!O.input.enabled)&&(k.setCursor(O.input),O.emit(m.GAMEOBJECT_POINTER_OVER,R,O.input.localX,O.input.localY,W),V++,B.cancelled||!this.isActive()||O.input&&O.input.enabled&&(this.emit(m.GAMEOBJECT_OVER,R,O,W),B.cancelled||!this.isActive()))));L++);!B.cancelled&&this.isActive()&&this.emit(m.POINTER_OVER,R,G)}return z=U.concat(G),this._over[R.id]=this.sortGameObjects(z,R),V},processUpEvents:function(R){var A=this._temp,L=this._eventData,O=this._eventContainer;L.cancelled=!1;for(var F=0;F<A.length;F++){var G=A[F];if(!(!G.input||!G.input.enabled)&&(G.emit(m.GAMEOBJECT_POINTER_UP,R,G.input.localX,G.input.localY,O),L.cancelled||!this.isActive()||G.input&&G.input.enabled&&(this.emit(m.GAMEOBJECT_UP,R,G,O),L.cancelled||!this.isActive())))break}return!L.cancelled&&this.isActive()&&(R.upElement===this.manager.game.canvas?this.emit(m.POINTER_UP,R,A):this.emit(m.POINTER_UP_OUTSIDE,R)),A.length},forceDownState:function(R,A){this.forceState(R,A,m.GAMEOBJECT_POINTER_DOWN,m.GAMEOBJECT_DOWN,!1)},forceUpState:function(R,A){this.forceState(R,A,m.GAMEOBJECT_POINTER_UP,m.GAMEOBJECT_UP,!1)},forceOverState:function(R,A){this.forceState(R,A,m.GAMEOBJECT_POINTER_OVER,m.GAMEOBJECT_OVER,!0)},forceOutState:function(R,A){this.forceState(R,A,m.GAMEOBJECT_POINTER_OUT,m.GAMEOBJECT_OUT,!1)},forceState:function(R,A,L,O,F){var G=this._eventData,U=this._eventContainer;G.cancelled=!1,A.input&&A.input.enabled&&(A.emit(L,R,A.input.localX,A.input.localY,U),F&&this.setCursor(A.input),!G.cancelled&&this.isActive()&&A.input&&A.input.enabled&&this.emit(O,R,A,U))},queueForInsertion:function(R){return this._pendingInsertion.indexOf(R)===-1&&this._list.indexOf(R)===-1&&this._pendingInsertion.push(R),this},queueForRemoval:function(R){return this._pendingRemoval.push(R),this},setDraggable:function(R,A){A===void 0&&(A=!0),Array.isArray(R)||(R=[R]);for(var L=0;L<R.length;L++){var O=R[L];O.input.draggable=A;var F=this._draggable.indexOf(O);A&&F===-1?this._draggable.push(O):!A&&F>-1&&this._draggable.splice(F,1)}return this},makePixelPerfect:function(R){R===void 0&&(R=1);var A=this.systems.textures;return l(A,R)},setHitArea:function(R,A,L){if(A===void 0)return this.setHitAreaFromTexture(R);Array.isArray(R)||(R=[R]);var O=!1,F=!1,G=!1,U=!1,z=!1,N=!0;if(S(A)&&Object.keys(A).length){var k=A,D=R.some(function(Y){return Y.hasOwnProperty("faces")});if(!D){A=y(k,"hitArea",null),L=y(k,"hitAreaCallback",null),z=y(k,"pixelPerfect",!1);var V=y(k,"alphaTolerance",1);z&&(A={},L=this.makePixelPerfect(V))}O=y(k,"draggable",!1),F=y(k,"dropZone",!1),G=y(k,"cursor",!1),U=y(k,"useHandCursor",!1),(!A||!L)&&(this.setHitAreaFromTexture(R),N=!1)}else typeof A=="function"&&!L&&(L=A,A={});for(var B=0;B<R.length;B++){var W=R[B];if(z&&W.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var H=W.input?W.input:f(W,A,L);H.customHitArea=N,H.dropZone=F,H.cursor=U?"pointer":G,W.input=H,O&&this.setDraggable(W),this.queueForInsertion(W)}return this},setHitAreaCircle:function(R,A,L,O,F){F===void 0&&(F=p);var G=new a(A,L,O);return this.setHitArea(R,G,F)},setHitAreaEllipse:function(R,A,L,O,F,G){G===void 0&&(G=c);var U=new v(A,L,O,F);return this.setHitArea(R,U,G)},setHitAreaFromTexture:function(R,A){A===void 0&&(A=P),Array.isArray(R)||(R=[R]);for(var L=0;L<R.length;L++){var O=R[L],F=O.frame,G=0,U=0;if(O.width?(G=O.width,U=O.height):F&&(G=F.realWidth,U=F.realHeight),O.type==="Container"&&(G===0||U===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}G!==0&&U!==0&&(O.input=f(O,new T(0,0,G,U),A),this.queueForInsertion(O))}return this},setHitAreaRectangle:function(R,A,L,O,F,G){G===void 0&&(G=P);var U=new T(A,L,O,F);return this.setHitArea(R,U,G)},setHitAreaTriangle:function(R,A,L,O,F,G,U,z){z===void 0&&(z=b);var N=new w(A,L,O,F,G,U);return this.setHitArea(R,N,z)},enableDebug:function(R,A){A===void 0&&(A=65280);var L=R.input;if(!L||!L.hitArea)return this;var O=L.hitArea,F=O.type,G=L.hitAreaDebug,U=this.systems.add,z=this.systems.updateList;G&&(z.remove(G),G.destroy(),G=null);var N=0,k=0;switch(F){case x.CIRCLE:G=U.arc(0,0,O.radius),N=O.x-O.radius,k=O.y-O.radius;break;case x.ELLIPSE:G=U.ellipse(0,0,O.width,O.height),N=O.x-O.width/2,k=O.y-O.height/2;break;case x.LINE:G=U.line(0,0,O.x1,O.y1,O.x2,O.y2);break;case x.POLYGON:G=U.polygon(0,0,O.points);break;case x.RECTANGLE:G=U.rectangle(0,0,O.width,O.height),N=O.x,k=O.y;break;case x.TRIANGLE:G=U.triangle(0,0,O.x1,O.y1,O.x2,O.y2,O.x3,O.y3);break}return G&&(G.isFilled=!1,G.strokeColor=A,G.preUpdate=function(){G.setVisible(R.visible),G.setStrokeStyle(1/R.scale,G.strokeColor),G.setDisplayOrigin(R.displayOriginX,R.displayOriginY);var D=R.x,V=R.y,B=R.rotation,W=R.scaleX,H=R.scaleY;if(R.parentContainer){var Y=R.getWorldTransformMatrix();D=Y.tx,V=Y.ty,B=Y.rotation,W=Y.scaleX,H=Y.scaleY}G.setRotation(B),G.setScale(W,H),G.setPosition(D+N*W,V+k*H),G.setScrollFactor(R.scrollFactorX,R.scrollFactorY),G.setDepth(R.depth)},z.add(G),L.hitAreaDebug=G),this},removeDebug:function(R){var A=R.input;if(A&&A.hitAreaDebug){var L=A.hitAreaDebug;L.destroy(),A.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(R){return this.pollRate=R,this._pollTimer=0,this},setGlobalTopOnly:function(R){return this.manager.globalTopOnly=R,this},setTopOnly:function(R){return this.topOnly=R,this},sortGameObjects:function(R,A){if(R.length<2||!A.camera)return R;var L=A.camera.renderList;return R.sort(function(O,F){var G=Math.max(L.indexOf(O),0),U=Math.max(L.indexOf(F),0);return U-G})},sortDropZones:function(R){return R.length<2?R:(this.scene.sys.depthSort(),R.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(R,A){if(!R.parentContainer&&!A.parentContainer)return this.displayList.getIndex(A)-this.displayList.getIndex(R);if(R.parentContainer===A.parentContainer)return A.parentContainer.getIndex(A)-R.parentContainer.getIndex(R);if(R.parentContainer===A)return-1;if(A.parentContainer===R)return 1;for(var L=R.getIndexList(),O=A.getIndexList(),F=Math.min(L.length,O.length),G=0;G<F;G++){var U=L[G],z=O[G];if(U!==z)return z-U}return O.length-L.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(R){return this.manager.addPointer(R)},setDefaultCursor:function(R){return this.manager.setDefaultCursor(R),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(m.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var R=0;R<10;R++)this._drag[R]=[],this._over[R]=[];this.removeAllListeners();var A=this.manager;A.canvas.style.cursor=A.defaultCursor;var L=this.systems.events;L.off(M.TRANSITION_START,this.transitionIn,this),L.off(M.TRANSITION_OUT,this.transitionOut,this),L.off(M.TRANSITION_COMPLETE,this.transitionComplete,this),L.off(M.PRE_UPDATE,this.preUpdate,this),A.events.off(m.GAME_OUT,this.onGameOut,this),A.events.off(m.GAME_OVER,this.onGameOver,this),L.off(M.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var R=this.manager.pointers,A=0;A<R.length;A++)R[A].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(m.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(M.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});E.register("InputPlugin",I,"input"),n.exports=I},89639:(n,o,r)=>{var a=r(35154),p={},h={};h.register=function(u,f,l,d,v){p[u]={plugin:f,mapping:l,settingsKey:d,configKey:v}},h.getPlugin=function(u){return p[u]},h.install=function(u){var f=u.scene.sys,l=f.settings.input,d=f.game.config;for(var v in p){var c=p[v].plugin,m=p[v].mapping,g=p[v].settingsKey,y=p[v].configKey;a(l,g,d[y])&&(u[m]=new c(u))}},h.remove=function(u){p.hasOwnProperty(u)&&delete p[u]},n.exports=h},42515:(n,o,r)=>{var a=r(31040),p=r(83419),h=r(20339),u=r(43855),f=r(47235),l=r(26099),d=r(25892),v=new p({initialize:function(m,g){this.manager=m,this.id=g,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new l,this.prevPosition=new l,this.midPoint=new l(-1,-1),this.velocity=new l,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=g===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(c){var m=c.getWorldPoint(this.x,this.y);return this.worldX=m.x,this.worldY=m.y,this},positionToCamera:function(c,m){return c.getWorldPoint(this.x,this.y,m)},updateMotion:function(){var c=this.position.x,m=this.position.y,g=this.midPoint.x,y=this.midPoint.y;if(!(c===g&&m===y)){var x=f(this.motionFactor,g,c),C=f(this.motionFactor,y,m);u(x,c,.1)&&(x=c),u(C,m,.1)&&(C=m),this.midPoint.set(x,C);var S=c-x,E=m-C;this.velocity.set(S,E),this.angle=a(x,C,c,m),this.distance=Math.sqrt(S*S+E*E)}},up:function(c){"buttons"in c&&(this.buttons=c.buttons),this.event=c,this.button=c.button,this.upElement=c.target,this.manager.transformPointer(this,c.pageX,c.pageY,!1),c.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=c.timeStamp,this.wasTouch=!1)},down:function(c){"buttons"in c&&(this.buttons=c.buttons),this.event=c,this.button=c.button,this.downElement=c.target,this.manager.transformPointer(this,c.pageX,c.pageY,!1),c.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),d.macOS&&c.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=c.timeStamp),this.wasTouch=!1},move:function(c){"buttons"in c&&(this.buttons=c.buttons),this.event=c,this.manager.transformPointer(this,c.pageX,c.pageY,!0),this.locked&&(this.movementX=c.movementX||c.mozMovementX||c.webkitMovementX||0,this.movementY=c.movementY||c.mozMovementY||c.webkitMovementY||0),this.moveTime=c.timeStamp,this.wasTouch=!1},wheel:function(c){"buttons"in c&&(this.buttons=c.buttons),this.event=c,this.manager.transformPointer(this,c.pageX,c.pageY,!1),this.deltaX=c.deltaX,this.deltaY=c.deltaY,this.deltaZ=c.deltaZ,this.wasTouch=!1},touchstart:function(c,m){c.pointerId&&(this.pointerId=c.pointerId),this.identifier=c.identifier,this.target=c.target,this.active=!0,this.buttons=1,this.event=m,this.downElement=c.target,this.manager.transformPointer(this,c.pageX,c.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=m.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(c,m){this.event=m,this.manager.transformPointer(this,c.pageX,c.pageY,!0),this.moveTime=m.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(c,m){this.buttons=0,this.event=m,this.upElement=c.target,this.manager.transformPointer(this,c.pageX,c.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=m.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(c,m){this.buttons=0,this.event=m,this.upElement=c.target,this.manager.transformPointer(this,c.pageX,c.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=m.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.buttons===0?this.button===0&&!this.isDown:this.button===0},rightButtonReleased:function(){return this.buttons===0?this.button===2&&!this.isDown:this.button===2},middleButtonReleased:function(){return this.buttons===0?this.button===1&&!this.isDown:this.button===1},backButtonReleased:function(){return this.buttons===0?this.button===3&&!this.isDown:this.button===3},forwardButtonReleased:function(){return this.buttons===0?this.button===4&&!this.isDown:this.button===4},getDistance:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(c,m){c===void 0&&(c=10),m===void 0&&(m=[]);for(var g=this.prevPosition.x,y=this.prevPosition.y,x=this.position.x,C=this.position.y,S=0;S<c;S++){var E=1/c*S;m[S]={x:f(E,g,x),y:f(E,y,C)}}return m},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(c){this.position.x=c}},y:{get:function(){return this.position.y},set:function(c){this.position.y=c}},time:{get:function(){return this.event?this.event.timeStamp:0}}});n.exports=v},93301:n=>{var o={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};n.exports=o},7179:n=>{n.exports="boot"},85375:n=>{n.exports="destroy"},39843:n=>{n.exports="dragend"},23388:n=>{n.exports="dragenter"},16133:n=>{n.exports="drag"},27829:n=>{n.exports="dragleave"},53904:n=>{n.exports="dragover"},56058:n=>{n.exports="dragstart"},2642:n=>{n.exports="drop"},88171:n=>{n.exports="gameobjectdown"},36147:n=>{n.exports="dragend"},71692:n=>{n.exports="dragenter"},96149:n=>{n.exports="drag"},81285:n=>{n.exports="dragleave"},74048:n=>{n.exports="dragover"},21322:n=>{n.exports="dragstart"},49378:n=>{n.exports="drop"},86754:n=>{n.exports="gameobjectmove"},86433:n=>{n.exports="gameobjectout"},60709:n=>{n.exports="gameobjectover"},24081:n=>{n.exports="pointerdown"},11172:n=>{n.exports="pointermove"},18907:n=>{n.exports="pointerout"},95579:n=>{n.exports="pointerover"},35368:n=>{n.exports="pointerup"},26972:n=>{n.exports="wheel"},47078:n=>{n.exports="gameobjectup"},73802:n=>{n.exports="gameobjectwheel"},56718:n=>{n.exports="gameout"},25936:n=>{n.exports="gameover"},27503:n=>{n.exports="boot"},50852:n=>{n.exports="process"},96438:n=>{n.exports="update"},59152:n=>{n.exports="pointerlockchange"},47777:n=>{n.exports="pointerdown"},27957:n=>{n.exports="pointerdownoutside"},19444:n=>{n.exports="pointermove"},54251:n=>{n.exports="pointerout"},18667:n=>{n.exports="pointerover"},27192:n=>{n.exports="pointerup"},24652:n=>{n.exports="pointerupoutside"},45132:n=>{n.exports="wheel"},44512:n=>{n.exports="preupdate"},15757:n=>{n.exports="shutdown"},41637:n=>{n.exports="start"},93802:n=>{n.exports="update"},8214:(n,o,r)=>{n.exports={BOOT:r(7179),DESTROY:r(85375),DRAG_END:r(39843),DRAG_ENTER:r(23388),DRAG:r(16133),DRAG_LEAVE:r(27829),DRAG_OVER:r(53904),DRAG_START:r(56058),DROP:r(2642),GAME_OUT:r(56718),GAME_OVER:r(25936),GAMEOBJECT_DOWN:r(88171),GAMEOBJECT_DRAG_END:r(36147),GAMEOBJECT_DRAG_ENTER:r(71692),GAMEOBJECT_DRAG:r(96149),GAMEOBJECT_DRAG_LEAVE:r(81285),GAMEOBJECT_DRAG_OVER:r(74048),GAMEOBJECT_DRAG_START:r(21322),GAMEOBJECT_DROP:r(49378),GAMEOBJECT_MOVE:r(86754),GAMEOBJECT_OUT:r(86433),GAMEOBJECT_OVER:r(60709),GAMEOBJECT_POINTER_DOWN:r(24081),GAMEOBJECT_POINTER_MOVE:r(11172),GAMEOBJECT_POINTER_OUT:r(18907),GAMEOBJECT_POINTER_OVER:r(95579),GAMEOBJECT_POINTER_UP:r(35368),GAMEOBJECT_POINTER_WHEEL:r(26972),GAMEOBJECT_UP:r(47078),GAMEOBJECT_WHEEL:r(73802),MANAGER_BOOT:r(27503),MANAGER_PROCESS:r(50852),MANAGER_UPDATE:r(96438),POINTER_DOWN:r(47777),POINTER_DOWN_OUTSIDE:r(27957),POINTER_MOVE:r(19444),POINTER_OUT:r(54251),POINTER_OVER:r(18667),POINTER_UP:r(27192),POINTER_UP_OUTSIDE:r(24652),POINTER_WHEEL:r(45132),POINTERLOCK_CHANGE:r(59152),PRE_UPDATE:r(44512),SHUTDOWN:r(15757),START:r(41637),UPDATE:r(93802)}},97421:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f){this.pad=u,this.events=u.events,this.index=f,this.value=0,this.threshold=.1},update:function(h){this.value=h},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});n.exports=p},28884:(n,o,r)=>{var a=r(83419),p=r(92734),h=new a({initialize:function(f,l){this.pad=f,this.events=f.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var f=this.pad,l=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(p.BUTTON_DOWN,f,this,u),this.pad.emit(p.GAMEPAD_BUTTON_DOWN,l,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(p.BUTTON_UP,f,this,u),this.pad.emit(p.GAMEPAD_BUTTON_UP,l,u,this))},destroy:function(){this.pad=null,this.events=null}});n.exports=h},99125:(n,o,r)=>{var a=r(97421),p=r(28884),h=r(83419),u=r(50792),f=r(26099),l=new h({Extends:u,initialize:function(v,c){u.call(this),this.manager=v,this.pad=c,this.id=c.id,this.index=c.index;for(var m=[],g=0;g<c.buttons.length;g++)m.push(new p(this,g));this.buttons=m;var y=[];for(g=0;g<c.axes.length;g++)y.push(new a(this,g));this.axes=y,this.vibration=c.vibrationActuator;var x={value:0,pressed:!1};this._LCLeft=m[14]?m[14]:x,this._LCRight=m[15]?m[15]:x,this._LCTop=m[12]?m[12]:x,this._LCBottom=m[13]?m[13]:x,this._RCLeft=m[2]?m[2]:x,this._RCRight=m[1]?m[1]:x,this._RCTop=m[3]?m[3]:x,this._RCBottom=m[0]?m[0]:x,this._FBLeftTop=m[4]?m[4]:x,this._FBLeftBottom=m[6]?m[6]:x,this._FBRightTop=m[5]?m[5]:x,this._FBRightBottom=m[7]?m[7]:x;var C={value:0};this._HAxisLeft=y[0]?y[0]:C,this._VAxisLeft=y[1]?y[1]:C,this._HAxisRight=y[2]?y[2]:C,this._VAxisRight=y[3]?y[3]:C,this.leftStick=new f,this.rightStick=new f,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(d){return this.axes[d].getValue()},setAxisThreshold:function(d){for(var v=0;v<this.axes.length;v++)this.axes[v].threshold=d},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(d){return this.buttons[d].value},isButtonDown:function(d){return this.buttons[d].pressed},update:function(d){if(!(d.timestamp<this._created)){var v,c=this.buttons,m=d.buttons,g=c.length;for(v=0;v<g;v++)c[v].update(m[v].value);var y=this.axes,x=d.axes;for(g=y.length,v=0;v<g;v++)y[v].update(x[v]);g>=2&&(this.leftStick.set(y[0].getValue(),y[1].getValue()),g>=4&&this.rightStick.set(y[2].getValue(),y[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var d;for(d=0;d<this.buttons.length;d++)this.buttons[d].destroy();for(d=0;d<this.axes.length;d++)this.axes[d].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});n.exports=l},56654:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(92734),u=r(99125),f=r(35154),l=r(89639),d=r(8214),v=new a({Extends:p,initialize:function(m){p.call(this),this.scene=m.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=m,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,m.pluginEvents.once(d.BOOT,this.boot,this),m.pluginEvents.on(d.START,this.start,this)},boot:function(){var c=this.scene.sys.game,m=this.settings.input,g=c.config;this.enabled=f(m,"gamepad",g.inputGamepad)&&c.device.input.gamepads,this.target=f(m,"gamepad.target",g.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(d.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(d.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var c=this,m=this.target,g=function(y){y.defaultPrevented||!c.isActive()||(c.refreshPads(),c.queue.push(y))};this.onGamepadHandler=g,m.addEventListener("gamepadconnected",g,!1),m.addEventListener("gamepaddisconnected",g,!1),this.sceneInputPlugin.pluginEvents.on(d.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(d.UPDATE,this.update);for(var c=0;c<this.gamepads.length;c++)this.gamepads[c].removeAllListeners()},disconnectAll:function(){for(var c=0;c<this.gamepads.length;c++)this.gamepads[c].pad.connected=!1},refreshPads:function(){var c=navigator.getGamepads();if(!c)this.disconnectAll();else for(var m=this.gamepads,g=0;g<c.length;g++){var y=c[g];if(y){var x=y.id,C=y.index,S=m[C];if(S)S.id!==x?(S.destroy(),m[C]=new u(this,y)):S.update(y);else{var E=new u(this,y);m[C]=E,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=E):this._pad3=E:this._pad2=E:this._pad1=E}}}},getAll:function(){for(var c=[],m=this.gamepads,g=0;g<m.length;g++)m[g]&&c.push(m[g]);return c},getPad:function(c){for(var m=this.gamepads,g=0;g<m.length;g++)if(m[g]&&m[g].index===c)return m[g]},update:function(){if(this.enabled){this.refreshPads();var c=this.queue.length;if(c!==0)for(var m=this.queue.splice(0,c),g=0;g<c;g++){var y=m[g],x=this.getPad(y.gamepad.index);y.type==="gamepadconnected"?this.emit(h.CONNECTED,x,y):y.type==="gamepaddisconnected"&&this.emit(h.DISCONNECTED,x,y)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var c=0;c<this.gamepads.length;c++)this.gamepads[c]&&this.gamepads[c].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});l.register("GamepadPlugin",v,"gamepad","gamepad","inputGamepad"),n.exports=v},89651:n=>{n.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:n=>{n.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:n=>{n.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(n,o,r)=>{n.exports={DUALSHOCK_4:r(65294),SNES_USB:r(89651),XBOX_360:r(90089)}},46008:n=>{n.exports="down"},7629:n=>{n.exports="up"},42206:n=>{n.exports="connected"},86544:n=>{n.exports="disconnected"},94784:n=>{n.exports="down"},14325:n=>{n.exports="up"},92734:(n,o,r)=>{n.exports={BUTTON_DOWN:r(46008),BUTTON_UP:r(7629),CONNECTED:r(42206),DISCONNECTED:r(86544),GAMEPAD_BUTTON_DOWN:r(94784),GAMEPAD_BUTTON_UP:r(14325)}},48646:(n,o,r)=>{n.exports={Axis:r(97421),Button:r(28884),Events:r(92734),Gamepad:r(99125),GamepadPlugin:r(56654),Configs:r(64894)}},14350:(n,o,r)=>{var a=r(93301),p=r(79291),h={CreatePixelPerfectHandler:r(84409),CreateInteractiveObject:r(74457),Events:r(8214),Gamepad:r(48646),InputManager:r(7003),InputPlugin:r(48205),InputPluginCache:r(89639),Keyboard:r(51442),Mouse:r(87078),Pointer:r(42515),Touch:r(95618)};h=p(!1,h,a),n.exports=h},78970:(n,o,r)=>{var a=r(72905),p=r(83419),h=r(8443),u=r(8214),f=r(46032),l=r(29747),d=new p({initialize:function(c){this.manager=c,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=l,this.onKeyUp=l,c.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var v=this.manager.config;this.enabled=v.inputKeyboard,this.target=v.inputKeyboardEventTarget,this.addCapture(v.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(h.POST_STEP,this.postUpdate,this)},startListeners:function(){var v=this;this.onKeyDown=function(m){if(!(m.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(m),v.manager.events.emit(u.MANAGER_PROCESS);var g=m.altKey||m.ctrlKey||m.shiftKey||m.metaKey;v.preventDefault&&!g&&v.captures.indexOf(m.keyCode)>-1&&m.preventDefault()}},this.onKeyUp=function(m){if(!(m.defaultPrevented||!v.enabled||!v.manager)){v.queue.push(m),v.manager.events.emit(u.MANAGER_PROCESS);var g=m.altKey||m.ctrlKey||m.shiftKey||m.metaKey;v.preventDefault&&!g&&v.captures.indexOf(m.keyCode)>-1&&m.preventDefault()}};var c=this.target;c&&(c.addEventListener("keydown",this.onKeyDown,!1),c.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var v=this.target;v.removeEventListener("keydown",this.onKeyDown,!1),v.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var c=this.captures,m=0;m<v.length;m++){var g=v[m];typeof g=="string"&&(g=f[g.trim().toUpperCase()]),c.indexOf(g)===-1&&c.push(g)}this.preventDefault=c.length>0},removeCapture:function(v){typeof v=="string"&&(v=v.split(",")),Array.isArray(v)||(v=[v]);for(var c=this.captures,m=0;m<v.length;m++){var g=v[m];typeof g=="string"&&(g=f[g.toUpperCase()]),a(c,g)}this.preventDefault=c.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(h.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});n.exports=d},28846:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(95922),u=r(8443),f=r(35154),l=r(8214),d=r(89639),v=r(30472),c=r(46032),m=r(87960),g=r(74600),y=r(44594),x=r(56583),C=new a({Extends:p,initialize:function(E){p.call(this),this.game=E.systems.game,this.scene=E.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=E,this.manager=E.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,E.pluginEvents.once(l.BOOT,this.boot,this),E.pluginEvents.on(l.START,this.start,this)},boot:function(){var S=this.settings.input;this.enabled=f(S,"keyboard",!0);var E=f(S,"keyboard.capture",null);E&&this.addCaptures(E),this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(y.PAUSE,this.resetKeys,this),this.scene.sys.events.on(y.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(S){return this.manager.addCapture(S),this},removeCapture:function(S){return this.manager.removeCapture(S),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:c.UP,down:c.DOWN,left:c.LEFT,right:c.RIGHT,space:c.SPACE,shift:c.SHIFT})},addKeys:function(S,E,T){E===void 0&&(E=!0),T===void 0&&(T=!1);var P={};if(typeof S=="string"){S=S.split(",");for(var M=0;M<S.length;M++){var w=S[M].trim();w&&(P[w]=this.addKey(w,E,T))}}else for(var b in S)P[b]=this.addKey(S[b],E,T);return P},addKey:function(S,E,T){E===void 0&&(E=!0),T===void 0&&(T=!1);var P=this.keys;if(S instanceof v){var M=P.indexOf(S);return M>-1?P[M]=S:P[S.keyCode]=S,E&&this.addCapture(S.keyCode),S.setEmitOnRepeat(T),S}return typeof S=="string"&&(S=c[S.toUpperCase()]),P[S]||(P[S]=new v(this,S),E&&this.addCapture(S),P[S].setEmitOnRepeat(T)),P[S]},removeKey:function(S,E,T){E===void 0&&(E=!1),T===void 0&&(T=!1);var P=this.keys,M;if(S instanceof v){var w=P.indexOf(S);w>-1&&(M=this.keys[w],this.keys[w]=void 0)}else typeof S=="string"&&(S=c[S.toUpperCase()]);return P[S]&&(M=P[S],P[S]=void 0),M&&(M.plugin=null,T&&this.removeCapture(M.keyCode),E&&M.destroy()),this},removeAllKeys:function(S,E){S===void 0&&(S=!1),E===void 0&&(E=!1);for(var T=this.keys,P=0;P<T.length;P++){var M=T[P];M&&(T[P]=void 0,E&&this.removeCapture(M.keyCode),S&&M.destroy())}return this},createCombo:function(S,E){return new m(this,S,E)},checkDown:function(S,E){if(E===void 0&&(E=0),this.enabled&&S.isDown){var T=x(this.time-S.timeDown,E);if(T>S._tick)return S._tick=T,!0}return!1},update:function(){var S=this.manager.queue,E=S.length;if(!(!this.isActive()||E===0))for(var T=this.keys,P=0;P<E;P++){var M=S[P],w=M.keyCode,b=T[w],I=!1;M.cancelled===void 0&&(M.cancelled=0,M.stopImmediatePropagation=function(){M.cancelled=1},M.stopPropagation=function(){M.cancelled=-1}),M.cancelled!==-1&&(w===this.prevCode&&M.timeStamp===this.prevTime&&M.type===this.prevType||(this.prevCode=w,this.prevTime=M.timeStamp,this.prevType=M.type,M.type==="keydown"?(b&&(I=b.isDown,b.onDown(M)),!M.cancelled&&(!b||!I)&&(g[w]&&this.emit(h.KEY_DOWN+g[w],M),M.cancelled||this.emit(h.ANY_KEY_DOWN,M))):(b&&b.onUp(M),M.cancelled||(g[w]&&this.emit(h.KEY_UP+g[w],M),M.cancelled||this.emit(h.ANY_KEY_UP,M))),M.cancelled===1&&(M.cancelled=0)))}},resetKeys:function(){for(var S=this.keys,E=0;E<S.length;E++)S[E]&&S[E].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(y.PAUSE,this.resetKeys,this),this.scene.sys.events.off(y.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var S=this.keys,E=0;E<S.length;E++)S[E]&&S[E].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});d.register("KeyboardPlugin",C,"keyboard","keyboard","inputKeyboard"),n.exports=C},66970:n=>{var o=function(r,a){return a.timeLastMatched=r.timeStamp,a.index++,a.index===a.size?!0:(a.current=a.keyCodes[a.index],!1)};n.exports=o},87960:(n,o,r)=>{var a=r(83419),p=r(95922),h=r(95540),u=r(68769),f=r(92803),l=new a({initialize:function(v,c,m){if(m===void 0&&(m={}),c.length<2)return!1;this.manager=v,this.enabled=!0,this.keyCodes=[];for(var g=0;g<c.length;g++){var y=c[g];typeof y=="string"?this.keyCodes.push(y.toUpperCase().charCodeAt(0)):typeof y=="number"?this.keyCodes.push(y):y.hasOwnProperty("keyCode")&&this.keyCodes.push(y.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=h(m,"resetOnWrongKey",!0),this.maxKeyDelay=h(m,"maxKeyDelay",0),this.resetOnMatch=h(m,"resetOnMatch",!1),this.deleteOnMatch=h(m,"deleteOnMatch",!1);var x=this,C=function(S){if(!(x.matched||!x.enabled)){var E=u(S,x);E&&(x.manager.emit(p.COMBO_MATCH,x,S),x.resetOnMatch?f(x):x.deleteOnMatch&&x.destroy())}};this.onKeyDown=C,this.manager.on(p.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(p.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});n.exports=l},68769:(n,o,r)=>{var a=r(66970),p=function(h,u){if(u.matched)return!0;var f=!1,l=!1;if(h.keyCode===u.current)if(u.index>0&&u.maxKeyDelay>0){var d=u.timeLastMatched+u.maxKeyDelay;h.timeStamp<=d&&(l=!0,f=a(h,u))}else l=!0,f=a(h,u);return!l&&u.resetOnWrongKey&&(u.index=0,u.current=u.keyCodes[0]),f&&(u.timeLastMatched=h.timeStamp,u.matched=!0,u.timeMatched=h.timeStamp),f};n.exports=p},92803:n=>{var o=function(r){return r.current=r.keyCodes[0],r.index=0,r.timeLastMatched=0,r.matched=!1,r.timeMatched=0,r};n.exports=o},92612:n=>{n.exports="keydown"},23345:n=>{n.exports="keyup"},21957:n=>{n.exports="keycombomatch"},44743:n=>{n.exports="down"},3771:n=>{n.exports="keydown-"},46358:n=>{n.exports="keyup-"},75674:n=>{n.exports="up"},95922:(n,o,r)=>{n.exports={ANY_KEY_DOWN:r(92612),ANY_KEY_UP:r(23345),COMBO_MATCH:r(21957),DOWN:r(44743),KEY_DOWN:r(3771),KEY_UP:r(46358),UP:r(75674)}},51442:(n,o,r)=>{n.exports={Events:r(95922),KeyboardManager:r(78970),KeyboardPlugin:r(28846),Key:r(30472),KeyCodes:r(46032),KeyCombo:r(87960),AdvanceKeyCombo:r(66970),ProcessKeyCombo:r(68769),ResetKeyCombo:r(92803),JustDown:r(90229),JustUp:r(38796),DownDuration:r(37015),UpDuration:r(41170)}},37015:n=>{var o=function(r,a){a===void 0&&(a=50);var p=r.plugin.game.loop.time-r.timeDown;return r.isDown&&p<a};n.exports=o},90229:n=>{var o=function(r){return r._justDown?(r._justDown=!1,!0):!1};n.exports=o},38796:n=>{var o=function(r){return r._justUp?(r._justUp=!1,!0):!1};n.exports=o},30472:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(95922),u=new a({Extends:p,initialize:function(l,d){p.call(this),this.plugin=l,this.keyCode=d,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(f){return this.emitOnRepeat=f,this},onDown:function(f){this.originalEvent=f,this.enabled&&(this.altKey=f.altKey,this.ctrlKey=f.ctrlKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.location=f.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(h.DOWN,this,f):(this.isDown=!0,this.isUp=!1,this.timeDown=f.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(h.DOWN,this,f)))},onUp:function(f){this.originalEvent=f,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=f.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(h.UP,this,f))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});n.exports=u},46032:n=>{var o={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};n.exports=o},74600:(n,o,r)=>{var a=r(46032),p={};for(var h in a)p[a[h]]=h;n.exports=p},41170:n=>{var o=function(r,a){a===void 0&&(a=50);var p=r.plugin.game.loop.time-r.timeUp;return r.isUp&&p<a};n.exports=o},85098:(n,o,r)=>{var a=r(83419),p=r(89357),h=r(8214),u=r(29747),f=new a({initialize:function(d){this.manager=d,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,d.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputMouse,this.target=l.inputMouseEventTarget,this.passive=l.inputMousePassive,this.preventDefaultDown=l.inputMousePreventDefaultDown,this.preventDefaultUp=l.inputMousePreventDefaultUp,this.preventDefaultMove=l.inputMousePreventDefaultMove,this.preventDefaultWheel=l.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},requestPointerLock:function(){if(p.pointerLock){var l=this.target;l.requestPointerLock=l.requestPointerLock||l.mozRequestPointerLock||l.webkitRequestPointerLock,l.requestPointerLock()}},releasePointerLock:function(){p.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var l=this.target;if(l){var d=this,v=this.manager,c=v.canvas,m=window&&window.focus&&v.game.config.autoFocus;this.onMouseMove=function(y){!y.defaultPrevented&&d.enabled&&v&&v.enabled&&(v.onMouseMove(y),d.preventDefaultMove&&y.preventDefault())},this.onMouseDown=function(y){m&&window.focus(),!y.defaultPrevented&&d.enabled&&v&&v.enabled&&(v.onMouseDown(y),d.preventDefaultDown&&y.target===c&&y.preventDefault())},this.onMouseDownWindow=function(y){y.sourceCapabilities&&y.sourceCapabilities.firesTouchEvents||!y.defaultPrevented&&d.enabled&&v&&v.enabled&&y.target!==c&&v.onMouseDown(y)},this.onMouseUp=function(y){!y.defaultPrevented&&d.enabled&&v&&v.enabled&&(v.onMouseUp(y),d.preventDefaultUp&&y.target===c&&y.preventDefault())},this.onMouseUpWindow=function(y){y.sourceCapabilities&&y.sourceCapabilities.firesTouchEvents||!y.defaultPrevented&&d.enabled&&v&&v.enabled&&y.target!==c&&v.onMouseUp(y)},this.onMouseOver=function(y){!y.defaultPrevented&&d.enabled&&v&&v.enabled&&v.setCanvasOver(y)},this.onMouseOut=function(y){!y.defaultPrevented&&d.enabled&&v&&v.enabled&&v.setCanvasOut(y)},this.onMouseWheel=function(y){!y.defaultPrevented&&d.enabled&&v&&v.enabled&&v.onMouseWheel(y),d.preventDefaultWheel&&y.target===c&&y.preventDefault()};var g={passive:!0};if(l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),l.addEventListener("mouseover",this.onMouseOver,g),l.addEventListener("mouseout",this.onMouseOut,g),this.preventDefaultWheel?l.addEventListener("wheel",this.onMouseWheel,{passive:!1}):l.addEventListener("wheel",this.onMouseWheel,g),window&&v.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,g),window.top.addEventListener("mouseup",this.onMouseUpWindow,g)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,g),window.addEventListener("mouseup",this.onMouseUpWindow,g),this.isTop=!1}p.pointerLock&&(this.pointerLockChange=function(y){var x=d.target;d.locked=document.pointerLockElement===x||document.mozPointerLockElement===x||document.webkitPointerLockElement===x,v.onPointerLockChange(y)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("mousemove",this.onMouseMove),l.removeEventListener("mousedown",this.onMouseDown),l.removeEventListener("mouseup",this.onMouseUp),l.removeEventListener("mouseover",this.onMouseOver),l.removeEventListener("mouseout",this.onMouseOut),window&&(l=this.isTop?window.top:window,l.removeEventListener("mousedown",this.onMouseDownWindow),l.removeEventListener("mouseup",this.onMouseUpWindow)),p.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});n.exports=f},87078:(n,o,r)=>{n.exports={MouseManager:r(85098)}},36210:(n,o,r)=>{var a=r(83419),p=r(8214),h=r(29747),u=new a({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=h,this.onTouchStartWindow=h,this.onTouchMove=h,this.onTouchEnd=h,this.onTouchEndWindow=h,this.onTouchCancel=h,this.onTouchCancelWindow=h,this.isTop=!0,l.events.once(p.MANAGER_BOOT,this.boot,this)},boot:function(){var f=this.manager.config;this.enabled=f.inputTouch,this.target=f.inputTouchEventTarget,this.capture=f.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,f.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(f){return f.preventDefault(),!1}),this},startListeners:function(){var f=this.target;if(f){var l=this,d=this.manager,v=d.canvas,c=window&&window.focus&&d.game.config.autoFocus;this.onTouchMove=function(x){!x.defaultPrevented&&l.enabled&&d&&d.enabled&&(d.onTouchMove(x),l.capture&&x.cancelable&&x.preventDefault())},this.onTouchStart=function(x){c&&window.focus(),!x.defaultPrevented&&l.enabled&&d&&d.enabled&&(d.onTouchStart(x),l.capture&&x.cancelable&&x.target===v&&x.preventDefault())},this.onTouchStartWindow=function(x){!x.defaultPrevented&&l.enabled&&d&&d.enabled&&x.target!==v&&d.onTouchStart(x)},this.onTouchEnd=function(x){!x.defaultPrevented&&l.enabled&&d&&d.enabled&&(d.onTouchEnd(x),l.capture&&x.cancelable&&x.target===v&&x.preventDefault())},this.onTouchEndWindow=function(x){!x.defaultPrevented&&l.enabled&&d&&d.enabled&&x.target!==v&&d.onTouchEnd(x)},this.onTouchCancel=function(x){!x.defaultPrevented&&l.enabled&&d&&d.enabled&&(d.onTouchCancel(x),l.capture&&x.preventDefault())},this.onTouchCancelWindow=function(x){!x.defaultPrevented&&l.enabled&&d&&d.enabled&&d.onTouchCancel(x)};var m=this.capture,g={passive:!0},y={passive:!1};if(f.addEventListener("touchstart",this.onTouchStart,m?y:g),f.addEventListener("touchmove",this.onTouchMove,m?y:g),f.addEventListener("touchend",this.onTouchEnd,m?y:g),f.addEventListener("touchcancel",this.onTouchCancel,m?y:g),window&&d.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,y),window.top.addEventListener("touchend",this.onTouchEndWindow,y),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,y)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,y),window.addEventListener("touchend",this.onTouchEndWindow,y),window.addEventListener("touchcancel",this.onTouchCancelWindow,y),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var f=this.target;f.removeEventListener("touchstart",this.onTouchStart),f.removeEventListener("touchmove",this.onTouchMove),f.removeEventListener("touchend",this.onTouchEnd),f.removeEventListener("touchcancel",this.onTouchCancel),window&&(f=this.isTop?window.top:window,f.removeEventListener("touchstart",this.onTouchStartWindow),f.removeEventListener("touchend",this.onTouchEndWindow),f.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});n.exports=u},95618:(n,o,r)=>{n.exports={TouchManager:r(36210)}},41299:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(54899),u=r(95540),f=r(98356),l=r(3374),d=r(84376),v=r(92638),c=new a({initialize:function(g,y){if(this.loader=g,this.cache=u(y,"cache",!1),this.type=u(y,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=u(y,"key",!1);var x=this.key;if(g.prefix&&g.prefix!==""&&(this.key=g.prefix+x),!this.key)throw new Error("Invalid File key: "+this.key);var C=u(y,"url");C===void 0?C=g.path+x+"."+u(y,"extension",""):typeof C=="string"&&!C.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(C=g.path+C),this.url=C,this.src="",this.xhrSettings=v(u(y,"responseType",void 0)),u(y,"xhrSettings",!1)&&(this.xhrSettings=l(this.xhrSettings,u(y,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?p.FILE_POPULATED:p.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(y,"config",{}),this.multiFile,this.linkFile,this.base64=typeof C=="string"&&C.indexOf("data:")===0,this.retryAttempts=u(y,"maxRetries",g.maxRetries)},setLink:function(m){this.linkFile=m,m.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){if(this.state===p.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=p.FILE_LOADING,this.src=f(this,this.loader.baseURL),!this.src)throw new Error("URL Error in File: "+this.key+" from: "+this.url);this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=d(this,this.loader.xhr)}},onLoad:function(m,g){var y=m.responseURL&&this.loader.localSchemes.some(function(S){return m.responseURL.indexOf(S)===0}),x=y&&g.target.status===0,C=!(g.target&&g.target.status!==200)||x;m.readyState===4&&m.status>=400&&m.status<=599&&(C=!1),this.state=p.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,C)},onBase64Load:function(m){this.xhrLoader=m,this.state=p.FILE_LOADED,this.percentComplete=1,this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.retryAttempts>0?(this.retryAttempts--,this.load()):this.loader.nextFile(this,!1)},onProgress:function(m){m.lengthComputable&&(this.bytesLoaded=m.loaded,this.bytesTotal=m.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=p.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=p.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=p.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(m){if(this.state!==p.FILE_PENDING_DESTROY){m===void 0&&(m=this.data);var g=this.key,y=this.type;this.loader.emit(h.FILE_COMPLETE,g,y,m),this.loader.emit(h.FILE_KEY_COMPLETE+y+"-"+g,g,y,m),this.loader.flagForRemoval(this),this.state=p.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});c.createObjectURL=function(m,g,y){if(typeof URL=="function")m.src=URL.createObjectURL(g);else{var x=new FileReader;x.onload=function(){m.removeAttribute("crossOrigin"),m.src="data:"+(g.type||y)+";base64,"+x.result.split(",")[1]},x.onerror=m.onerror,x.readAsDataURL(g)}},c.revokeObjectURL=function(m){typeof URL=="function"&&URL.revokeObjectURL(m.src)},n.exports=c},74099:n=>{var o={},r={install:function(a){for(var p in o)a[p]=o[p]},register:function(a,p){o[a]=p},destroy:function(){o={}}};n.exports=r},98356:n=>{var o=function(r,a){return r.url?r.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?r.url:a+r.url:!1};n.exports=o},74261:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(35072),u=r(50792),f=r(54899),l=r(74099),d=r(95540),v=r(35154),c=r(41212),m=r(37277),g=r(44594),y=r(92638),x=new a({Extends:u,initialize:function(S){u.call(this);var E=S.sys.game.config,T=S.sys.settings.loader;this.scene=S,this.systems=S.sys,this.cacheManager=S.sys.cache,this.textureManager=S.sys.textures,this.sceneManager=S.sys.game.scene,l.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(d(T,"baseURL",E.loaderBaseURL)),this.setPath(d(T,"path",E.loaderPath)),this.setPrefix(d(T,"prefix",E.loaderPrefix)),this.maxParallelDownloads=d(T,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=y(d(T,"responseType",E.loaderResponseType),d(T,"async",E.loaderAsync),d(T,"user",E.loaderUser),d(T,"password",E.loaderPassword),d(T,"timeout",E.loaderTimeout),d(T,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=d(T,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=d(T,"imageLoadType",E.loaderImageLoadType),this.localSchemes=d(T,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new h,this.inflight=new h,this.queue=new h,this._deleteQueue=new h,this.totalFailed=0,this.totalComplete=0,this.state=p.LOADER_IDLE,this.multiKeyIndex=0,this.maxRetries=d(T,"maxRetries",E.loaderMaxRetries),S.sys.events.once(g.BOOT,this.boot,this),S.sys.events.on(g.START,this.pluginStart,this)},boot:function(){this.systems.events.once(g.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(g.SHUTDOWN,this.shutdown,this)},setBaseURL:function(C){return C===void 0&&(C=""),C!==""&&C.substr(-1)!=="/"&&(C=C.concat("/")),this.baseURL=C,this},setPath:function(C){return C===void 0&&(C=""),C!==""&&C.substr(-1)!=="/"&&(C=C.concat("/")),this.path=C,this},setPrefix:function(C){return C===void 0&&(C=""),this.prefix=C,this},setCORS:function(C){return this.crossOrigin=C,this},addFile:function(C){Array.isArray(C)||(C=[C]);for(var S=0;S<C.length;S++){var E=C[S];this.keyExists(E)||(this.list.set(E),this.emit(f.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(C){var S=C.hasCacheConflict();return S||this.list.iterate(function(E){if(E.type===C.type&&E.key===C.key)return S=!0,!1}),!S&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===C.type&&E.key===C.key)return S=!0,!1}),this.queue.iterate(function(E){if(E.type===C.type&&E.key===C.key)return S=!0,!1})),S},addPack:function(C,S){if(typeof S=="string"){var E=v(C,S);E&&(C={packKey:E})}var T=0,P=this.baseURL,M=this.path,w=this.prefix;for(var b in C)if(Object.prototype.hasOwnProperty.call(C,b)){var I=C[b],R=d(I,"baseURL",P),A=d(I,"path",M),L=d(I,"prefix",w),O=d(I,"files",null),F=d(I,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(R),this.setPath(A),this.setPrefix(L);for(var G=0;G<O.length;G++){var U=O[G],z=U.hasOwnProperty("type")?U.type:F;this[z]&&(this[z](U),T++)}}}return this.setBaseURL(P),this.setPath(M),this.setPrefix(w),T>0},removePack:function(C,S){var E=this.systems.anims,T=this.cacheManager,P=this.textureManager,M={animation:"json",aseprite:"json",audio:"audio",audioSprite:"audio",binary:"binary",bitmapFont:"bitmapFont",css:null,glsl:"shader",html:"html",json:"json",obj:"obj",plugin:null,scenePlugin:null,script:null,spine:"json",text:"text",tilemapCSV:"tilemap",tilemapImpact:"tilemap",tilemapTiledJSON:"tilemap",video:"video",xml:"xml"},w;if(c(C))w=C;else if(w=T.json.get(C),!w){console.warn("Asset Pack not found in JSON cache:",C);return}S&&(w={_:w[S]});for(var b in w){var I=w[b],R=d(I,"prefix",""),A=d(I,"files"),L=d(I,"defaultType");if(Array.isArray(A))for(var O=0;O<A.length;O++){var F=A[O],G=F.hasOwnProperty("type")?F.type:L;if(!G){console.warn("No type:",F);continue}var U=R+F.key;if(G==="animation"&&E.remove(U),!((G==="aseprite"||G==="atlas"||G==="atlasXML"||G==="htmlTexture"||G==="image"||G==="multiatlas"||G==="spritesheet"||G==="svg"||G==="texture"||G==="unityAtlas")&&(P.remove(U),!M[G]))){if(G==="pack"){this.removePack(U,F.dataKey);continue}if(G==="spine"){var z=T.custom.spine.get(U);if(!z)continue;var N=z.prefix===void 0?"":z.prefix;T.custom.spine.remove(U);var k=T.custom.spineTextures.get(U);if(!k)continue;T.custom.spineTextures.remove(U);for(var D=0;D<k.pages.length;D++){var V=k.pages[D],B=N+V.name,W=U+":"+B;P.exists(W)?P.remove(W):P.remove(B)}}var H=M[G];if(H!==null){if(!H){console.warn("Unknown type:",G);continue}var Y=T[H];Y.remove(U)}}}}},isLoading:function(){return this.state===p.LOADER_LOADING||this.state===p.LOADER_PROCESSING},isReady:function(){return this.state===p.LOADER_IDLE||this.state===p.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(f.START,this),this.list.size===0?this.loadComplete():(this.state=p.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(g.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(f.PROGRESS,this.progress)},update:function(){this.state===p.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(C){if((C.state===p.FILE_POPULATED||C.state===p.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(C),this.list.delete(C),C.crossOrigin||(C.crossOrigin=this.crossOrigin),C.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(C,S){this.inflight&&(this.inflight.delete(C),this.updateProgress(),S?(this.totalComplete++,this.queue.set(C),this.emit(f.FILE_LOAD,C),C.onProcess()):(this.totalFailed++,this._deleteQueue.set(C),this.emit(f.FILE_LOAD_ERROR,C),this.fileProcessComplete(C)))},fileProcessComplete:function(C){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(C.state===p.FILE_ERRORED?C.multiFile&&C.multiFile.onFileFailed(C):C.state===p.FILE_COMPLETE&&(C.multiFile?C.multiFile.isReadyToProcess()&&(C.multiFile.addToCache(),C.multiFile.pendingDestroy()):(C.addToCache(),C.pendingDestroy())),this.queue.delete(C),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(f.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=p.LOADER_COMPLETE,this.systems.events.off(g.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(f.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(C){this._deleteQueue.set(C)},saveJSON:function(C,S){return this.save(JSON.stringify(C),S)},save:function(C,S,E){S===void 0&&(S="file.json"),E===void 0&&(E="application/json");var T=new Blob([C],{type:E}),P=URL.createObjectURL(T),M=document.createElement("a");return M.download=S,M.textContent="Download "+S,M.href=P,M.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var C=this.systems.game.config,S=this.systems.settings.loader;this.setBaseURL(d(S,"baseURL",C.loaderBaseURL)),this.setPath(d(S,"path",C.loaderPath)),this.setPrefix(d(S,"prefix",C.loaderPrefix)),this.state=p.LOADER_IDLE},shutdown:function(){this.reset(),this.state=p.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=p.LOADER_DESTROYED,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});m.register("Loader",x,"load"),n.exports=x},3374:(n,o,r)=>{var a=r(79291),p=r(92638),h=function(u,f){var l=u===void 0?p():a({},u);if(f)for(var d in f)f[d]!==void 0&&(l[d]=f[d]);return l};n.exports=h},26430:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(54899),u=new a({initialize:function(l,d,v,c){var m=[];c.forEach(function(x){x&&m.push(x)}),this.loader=l,this.type=d,this.key=v;var g=this.key;l.prefix&&l.prefix!==""&&(this.key=l.prefix+g),this.multiKeyIndex=l.multiKeyIndex++,this.files=m,this.state=p.FILE_PENDING,this.complete=!1,this.pending=m.length,this.failed=0,this.config={},this.baseURL=l.baseURL,this.path=l.path,this.prefix=l.prefix;for(var y=0;y<m.length;y++)m[y].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(f){return this.files.push(f),f.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(f){var l=this.files.indexOf(f);l!==-1&&this.pending--},onFileFailed:function(f){var l=this.files.indexOf(f);l!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,f.type,f.key))},pendingDestroy:function(){if(this.state!==p.FILE_PENDING_DESTROY){var f=this.key,l=this.type;this.loader.emit(h.FILE_COMPLETE,f,l),this.loader.emit(h.FILE_KEY_COMPLETE+l+"-"+f,f,l),this.loader.flagForRemoval(this);for(var d=0;d<this.files.length;d++)this.files[d].pendingDestroy();this.state=p.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});n.exports=u},84376:(n,o,r)=>{var a=r(3374),p=function(h,u){var f=a(u,h.xhrSettings);if(h.base64){var l=h.url.split(";base64,").pop()||h.url.split(",").pop(),d;h.xhrSettings.responseType==="arraybuffer"?d={response:Uint8Array.from(atob(l),function(m){return m.charCodeAt(0)}).buffer}:d={responseText:atob(l)},h.onBase64Load(d);return}var v=new XMLHttpRequest;if(v.open("GET",h.src,f.async,f.user,f.password),v.responseType=h.xhrSettings.responseType,v.timeout=f.timeout,f.headers)for(var c in f.headers)v.setRequestHeader(c,f.headers[c]);return f.header&&f.headerValue&&v.setRequestHeader(f.header,f.headerValue),f.requestedWith&&v.setRequestHeader("X-Requested-With",f.requestedWith),f.overrideMimeType&&v.overrideMimeType(f.overrideMimeType),f.withCredentials&&(v.withCredentials=!0),v.onload=h.onLoad.bind(h,v),v.onerror=h.onError.bind(h,v),v.onprogress=h.onProgress.bind(h),v.ontimeout=h.onError.bind(h,v),v.send(),v};n.exports=p},92638:n=>{var o=function(r,a,p,h,u,f){return r===void 0&&(r=""),a===void 0&&(a=!0),p===void 0&&(p=""),h===void 0&&(h=""),u===void 0&&(u=0),f===void 0&&(f=!1),{responseType:r,async:a,user:p,password:h,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:f}};n.exports=o},23906:n=>{var o={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};n.exports=o},42155:n=>{n.exports="addfile"},38991:n=>{n.exports="complete"},27540:n=>{n.exports="filecomplete"},87464:n=>{n.exports="filecomplete-"},94486:n=>{n.exports="loaderror"},13035:n=>{n.exports="load"},38144:n=>{n.exports="fileprogress"},97520:n=>{n.exports="postprocess"},85595:n=>{n.exports="progress"},55680:n=>{n.exports="start"},54899:(n,o,r)=>{n.exports={ADD:r(42155),COMPLETE:r(38991),FILE_COMPLETE:r(27540),FILE_KEY_COMPLETE:r(87464),FILE_LOAD_ERROR:r(94486),FILE_LOAD:r(13035),FILE_PROGRESS:r(38144),POST_PROCESS:r(97520),PROGRESS:r(85595),START:r(55680)}},14135:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(518),u=r(54899),f=new a({Extends:h,initialize:function(d,v,c,m,g){h.call(this,d,v,c,m,g),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),h.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});p.register("animation",function(l,d,v,c){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new f(this,l[m]));else this.addFile(new f(this,l,d,c,v));return this}),n.exports=f},76272:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(19550),f=r(41212),l=r(518),d=r(26430),v=new a({Extends:d,initialize:function(m,g,y,x,C,S){var E,T;if(f(g)){var P=g;g=h(P,"key"),E=new u(m,{key:g,url:h(P,"textureURL"),extension:h(P,"textureExtension","png"),normalMap:h(P,"normalMap"),xhrSettings:h(P,"textureXhrSettings")}),T=new l(m,{key:g,url:h(P,"atlasURL"),extension:h(P,"atlasExtension","json"),xhrSettings:h(P,"atlasXhrSettings")})}else E=new u(m,g,y,C),T=new l(m,g,x,S);E.linkFile?d.call(this,m,"atlasjson",g,[E,T,E.linkFile]):d.call(this,m,"atlasjson",g,[E,T])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(c.key,c.data,m.data,g),m.addToCache(),this.complete=!0}}});p.register("aseprite",function(c,m,g,y,x){var C;if(Array.isArray(c))for(var S=0;S<c.length;S++)C=new v(this,c[S]),this.addFile(C.files);else C=new v(this,c,m,g,y,x),this.addFile(C.files);return this}),n.exports=v},38734:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(19550),f=r(41212),l=r(518),d=r(26430),v=new a({Extends:d,initialize:function(m,g,y,x,C,S){var E,T;if(f(g)){var P=g;g=h(P,"key"),E=new u(m,{key:g,url:h(P,"textureURL"),extension:h(P,"textureExtension","png"),normalMap:h(P,"normalMap"),xhrSettings:h(P,"textureXhrSettings")}),T=new l(m,{key:g,url:h(P,"atlasURL"),extension:h(P,"atlasExtension","json"),xhrSettings:h(P,"atlasXhrSettings")})}else E=new u(m,g,y,C),T=new l(m,g,x,S);E.linkFile?d.call(this,m,"atlasjson",g,[E,T,E.linkFile]):d.call(this,m,"atlasjson",g,[E,T])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(c.key,c.data,m.data,g),this.complete=!0}}});p.register("atlas",function(c,m,g,y,x){var C;if(Array.isArray(c))for(var S=0;S<c.length;S++)C=new v(this,c[S]),this.addFile(C.files);else C=new v(this,c,m,g,y,x),this.addFile(C.files);return this}),n.exports=v},74599:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(19550),f=r(41212),l=r(26430),d=r(57318),v=new a({Extends:l,initialize:function(m,g,y,x,C,S){var E,T;if(f(g)){var P=g;g=h(P,"key"),E=new u(m,{key:g,url:h(P,"textureURL"),extension:h(P,"textureExtension","png"),normalMap:h(P,"normalMap"),xhrSettings:h(P,"textureXhrSettings")}),T=new d(m,{key:g,url:h(P,"atlasURL"),extension:h(P,"atlasExtension","xml"),xhrSettings:h(P,"atlasXhrSettings")})}else E=new u(m,g,y,C),T=new d(m,g,x,S);E.linkFile?l.call(this,m,"atlasxml",g,[E,T,E.linkFile]):l.call(this,m,"atlasxml",g,[E,T])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(c.key,c.data,m.data,g),this.complete=!0}}});p.register("atlasXML",function(c,m,g,y,x){var C;if(Array.isArray(c))for(var S=0;S<c.length;S++)C=new v(this,c[S]),this.addFile(C.files);else C=new v(this,c,m,g,y,x),this.addFile(C.files);return this}),n.exports=v},21097:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(89749),d=r(41212),v=new a({Extends:h,initialize:function(m,g,y,x,C){if(d(g)){var S=g;g=f(S,"key"),x=f(S,"xhrSettings"),C=f(S,"context",C)}var E={type:"audio",cache:m.cacheManager.audio,extension:y.type,responseType:"arraybuffer",key:g,url:y.url,xhrSettings:x,config:{context:C}};h.call(this,m,E)},onProcess:function(){this.state=p.FILE_PROCESSING;var c=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(m){c.data=m,c.onProcessComplete()},function(m){console.error("Error decoding audio: "+c.key+" - ",m?m.message:null),c.onProcessError()}),this.config.context=null}});v.create=function(c,m,g,y,x){var C=c.systems.game,S=C.config.audio,E=C.device.audio;d(m)&&(g=f(m,"url",[]),y=f(m,"config",{}));var T=v.getAudioURL(C,g);return T?E.webAudio&&!S.disableWebAudio?new v(c,m,T,x,C.sound.context):new l(c,m,T,y):(console.warn('No audio URLs for "%s" can play on this device',m),null)},v.getAudioURL=function(c,m){Array.isArray(m)||(m=[m]);for(var g=0;g<m.length;g++){var y=f(m[g],"url",m[g]);if(y.indexOf("blob:")===0||y.indexOf("data:")===0)return{url:y,type:""};var x=y.match(/\.([a-zA-Z0-9]+)($|\?)/);if(x=f(m[g],"type",x?x[1]:"").toLowerCase(),c.device.audio[x])return{url:y,type:x}}return null},u.register("audio",function(c,m,g,y){var x=this.systems.game,C=x.config.audio,S=x.device.audio;if(C.noAudio||!S.webAudio&&!S.audioData)return this;var E;if(Array.isArray(c))for(var T=0;T<c.length;T++)E=v.create(this,c[T]),E&&this.addFile(E);else E=v.create(this,c,m,g,y),E&&this.addFile(E);return this}),n.exports=v},89524:(n,o,r)=>{var a=r(21097),p=r(83419),h=r(74099),u=r(95540),f=r(41212),l=r(518),d=r(26430),v=new p({Extends:d,initialize:function(m,g,y,x,C,S,E){if(f(g)){var T=g;g=u(T,"key"),y=u(T,"jsonURL"),x=u(T,"audioURL"),C=u(T,"audioConfig"),S=u(T,"audioXhrSettings"),E=u(T,"jsonXhrSettings")}var P;if(!x)P=new l(m,g,y,E),d.call(this,m,"audiosprite",g,[P]),this.config.resourceLoad=!0,this.config.audioConfig=C,this.config.audioXhrSettings=S;else{var M=a.create(m,g,x,C,S);M&&(P=new l(m,g,y,E),d.call(this,m,"audiosprite",g,[M,P]),this.config.resourceLoad=!1)}},onFileComplete:function(c){var m=this.files.indexOf(c);if(m!==-1&&(this.pending--,this.config.resourceLoad&&c.type==="json"&&c.data.hasOwnProperty("resources"))){var g=c.data.resources,y=u(this.config,"audioConfig"),x=u(this.config,"audioXhrSettings"),C=a.create(this.loader,c.key,g,y,x);C&&(this.addToMultiFile(C),this.loader.addFile(C))}},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1];c.addToCache(),m.addToCache(),this.complete=!0}}});h.register("audioSprite",function(c,m,g,y,x,C){var S=this.systems.game,E=S.config.audio,T=S.device.audio;if(E&&E.noAudio||!T.webAudio&&!T.audioData)return this;var P;if(Array.isArray(c))for(var M=0;M<c.length;M++)P=new v(this,c[M]),P.files&&this.addFile(P.files);else P=new v(this,c,m,g,y,x,C),P.files&&this.addFile(P.files);return this})},85722:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y,x){var C="bin";if(l(m)){var S=m;m=f(S,"key"),g=f(S,"url"),y=f(S,"xhrSettings"),C=f(S,"extension",C),x=f(S,"dataType",x)}var E={type:"binary",cache:c.cacheManager.binary,extension:C,responseType:"arraybuffer",key:m,url:g,xhrSettings:y,config:{dataType:x}};h.call(this,c,E)},onProcess:function(){this.state=p.FILE_PROCESSING;var v=this.config.dataType;this.data=v?new v(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(v,c,m,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new d(this,v[y]));else this.addFile(new d(this,v,c,g,m));return this}),n.exports=d},97025:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(19550),f=r(41212),l=r(26430),d=r(21859),v=r(57318),c=new a({Extends:l,initialize:function(g,y,x,C,S,E){var T,P;if(f(y)){var M=y;y=h(M,"key"),T=new u(g,{key:y,url:h(M,"textureURL"),extension:h(M,"textureExtension","png"),normalMap:h(M,"normalMap"),xhrSettings:h(M,"textureXhrSettings")}),P=new v(g,{key:y,url:h(M,"fontDataURL"),extension:h(M,"fontDataExtension","xml"),xhrSettings:h(M,"fontDataXhrSettings")})}else T=new u(g,y,x,S),P=new v(g,y,C,E);T.linkFile?l.call(this,g,"bitmapfont",y,[T,P,T.linkFile]):l.call(this,g,"bitmapfont",y,[T,P])},addToCache:function(){if(this.isReadyToProcess()){var m=this.files[0],g=this.files[1];m.addToCache();var y=m.cache.get(m.key),x=d(g.data,m.cache.getFrame(m.key),0,0,y);this.loader.cacheManager.bitmapFont.add(m.key,{data:x,texture:m.key,frame:null}),this.complete=!0}}});p.register("bitmapFont",function(m,g,y,x,C){var S;if(Array.isArray(m))for(var E=0;E<m.length;E++)S=new c(this,m[E]),this.addFile(S.files);else S=new c(this,m,g,y,x,C),this.addFile(S.files);return this}),n.exports=c},16024:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y){var x="css";if(l(m)){var C=m;m=f(C,"key"),g=f(C,"url"),y=f(C,"xhrSettings"),x=f(C,"extension",x)}var S={type:"script",cache:!1,extension:x,responseType:"text",key:m,url:g,xhrSettings:y};h.call(this,c,S)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(v,c,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new d(this,v[g]));else this.addFile(new d(this,v,c,m));return this}),n.exports=d},69559:(n,o,r)=>{var a=r(38734),p=r(85722),h=r(83419),u=r(74099),f=r(95540),l=r(19550),d=r(41212),v=r(518),c=r(31403),m=r(46975),g=r(59327),y=r(26430),x=r(82038),C=r(55222),S=new h({Extends:y,initialize:function(T,P,M,w){if(M.multiAtlasURL){var b=new v(T,{key:P,url:M.multiAtlasURL,xhrSettings:w,config:M});y.call(this,T,"texture",P,[b])}else{var I=M.textureURL.substr(M.textureURL.length-3);M.type||(M.type=I.toLowerCase()==="ktx"?"KTX":"PVR");var R=new p(T,{key:P,url:M.textureURL,extension:I,xhrSettings:w,config:M});if(M.atlasURL){var A=new v(T,{key:P,url:M.atlasURL,xhrSettings:w,config:M});y.call(this,T,"texture",P,[R,A])}else y.call(this,T,"texture",P,[R])}this.config=M},onFileComplete:function(E){var T=this.files.indexOf(E);if(T!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var P=E.data.textures,M=this.config,w=this.loader,b=w.baseURL,I=w.path,R=w.prefix,A=f(M,"multiBaseURL",this.baseURL),L=f(M,"multiPath",this.path),O=f(M,"prefix",this.prefix),F=f(M,"textureXhrSettings");A&&w.setBaseURL(A),L&&w.setPath(L),O&&w.setPrefix(O);for(var G=0;G<P.length;G++){var U=P[G].image,z="CMA"+this.multiKeyIndex+"_"+U,N=new p(w,z,U,F);if(this.addToMultiFile(N),w.addFile(N),P[G].normalMap){var k=new p(w,z,P[G].normalMap,F);k.type="normalMap",N.setLink(k),this.addToMultiFile(k),w.addFile(k)}}w.setBaseURL(b),w.setPath(I),w.setPrefix(R)}}},addToCache:function(){function E(A){console.warn('Compressed Texture Invalid: "'+b.key+'". '+A)}if(this.isReadyToProcess()){var T=this.config;if(T.multiAtlasURL)this.addMultiToCache();else{var P=this.loader.systems.renderer,M=this.loader.textureManager,w,b=this.files[0],I=this.files[1];if(T.type==="PVR"?w=x(b.data):T.type==="KTX"&&(w=c(b.data),w||E("KTX file contains unsupported format.")),w&&!C(w)&&(E("Texture dimensions failed verification. Check the texture format specifications for "+T.format+" 0x"+w.internalFormat.toString(16)+"."),w=null),w&&!P.supportsCompressedTexture(T.format,w.internalFormat)&&(E("Texture format "+T.format+" with internal format "+w.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),w=null),w){w.format=P.getCompressedTextureName(T.format,w.internalFormat);var R=I&&I.data?I.data:null;M.addCompressedTexture(b.key,w,R)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,T=this.files[0],P=[],M=[],w=[],b=this.loader.systems.renderer,I=this.loader.textureManager,R,A=1;A<this.files.length;A++){var L=this.files[A];if(L.type!=="normalMap")for(var O=L.key.indexOf("_"),F=L.key.substr(O+1),G=L.data,U=0;U<T.data.textures.length;U++){var z=T.data.textures[U];if(z.image===F){E.type==="PVR"?R=x(G):E.type==="KTX"&&(R=c(G)),R&&b.supportsCompressedTexture(E.format,R.internalFormat)&&(R.format=b.getCompressedTextureName(E.format,R.internalFormat),M.push(R),P.push(z),L.linkFile&&w.push(L.linkFile.data));break}}}w.length===0&&(w=void 0),I.addAtlasJSONArray(this.key,M,P,w),this.complete=!0}});u.register("texture",function(E,T,P){var M=this.systems.renderer,w=function(I,R,A,L){var O={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(d(R)){var F=R;R=f(F,"key"),A=f(F,"url"),L=f(F,"xhrSettings")}var G=!1;for(var U in A)if(M.supportsCompressedTexture(U)){var z=A[U];typeof z=="string"?O.textureURL=z:O=m(z,O),O.format=U.toUpperCase(),G=!0;break}if(!G)console.warn("No supported compressed texture format or IMG fallback",R);else if(O.format==="IMG"){var N,k;O.multiAtlasURL?(k=new g(I,R,O.multiAtlasURL,O.multiPath,O.multiBaseURL,L),N=k.files):O.atlasURL?(k=new a(I,R,O.textureURL,O.atlasURL,L),N=k.files):N=new l(I,R,O.textureURL,L),I.addFile(N)}else{var D=new S(I,R,O,L);I.addFile(D.files)}};if(Array.isArray(E))for(var b=0;b<E.length;b++)w(this,E[b]);else w(this,E,T,P);return this}),n.exports=S},87674:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(98356),d=r(41212),v=new a({Extends:h,initialize:function(m,g,y,x,C,S){var E="ttf";if(d(g)){var T=g;g=f(T,"key"),y=f(T,"url"),x=f(T,"format","truetype"),C=f(T,"descriptors",null),S=f(T,"xhrSettings"),E=f(T,"extension",E)}else x===void 0&&(x="truetype");var P={type:"font",cache:!1,extension:E,responseType:"text",key:g,url:y,xhrSettings:S};h.call(this,m,P),this.data={format:x,descriptors:C},this.state=p.FILE_POPULATED},onProcess:function(){this.state=p.FILE_PROCESSING,this.src=l(this,this.loader.baseURL);var c,m=this.key,g="url("+this.src+') format("'+this.data.format+'")';this.data.descriptors?c=new FontFace(m,g,this.data.descriptors):c=new FontFace(m,g);var y=this;c.load().then(function(){document.fonts.add(c),document.body.classList.add("fonts-loaded"),y.onProcessComplete()}).catch(function(){console.warn("Font failed to load",g),y.onProcessComplete()})}});u.register("font",function(c,m,g,y,x){if(Array.isArray(c))for(var C=0;C<c.length;C++)this.addFile(new v(this,c[C]));else this.addFile(new v(this,c,m,g,y,x));return this}),n.exports=v},47931:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=r(73894),v=new a({Extends:h,initialize:function(m,g,y,x,C){var S="glsl";if(l(g)){var E=g;g=f(E,"key"),y=f(E,"url"),x=f(E,"shaderType","fragment"),C=f(E,"xhrSettings"),S=f(E,"extension",S)}else x===void 0&&(x="fragment");var T={type:"glsl",cache:m.cacheManager.shader,extension:S,responseType:"text",key:g,url:y,config:{shaderType:x},xhrSettings:C};h.call(this,m,T)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c=this.data.split(`
`),m=this.extractBlock(c,0);if(m)for(;m;){var g=this.getShaderName(m.header),y=this.getShaderType(m.header),x=this.getShaderUniforms(m.header),C=m.shader;if(this.cache.has(g)){var S=this.cache.get(g);y==="fragment"?S.fragmentSrc=C:S.vertexSrc=C,S.uniforms||(S.uniforms=x)}else y==="fragment"?this.cache.add(g,new d(g,C,"",x)):this.cache.add(g,new d(g,"",C,x));m=this.extractBlock(c,m.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new d(this.key,this.data)):this.cache.add(this.key,new d(this.key,"",this.data))},getShaderName:function(c){for(var m=0;m<c.length;m++){var g=c[m].trim();if(g.substring(0,5)==="name:")return g.substring(5).trim()}return this.key},getShaderType:function(c){for(var m=0;m<c.length;m++){var g=c[m].trim();if(g.substring(0,5)==="type:")return g.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(c){for(var m={},g=0;g<c.length;g++){var y=c[g].trim();if(y.substring(0,8)==="uniform."){var x=y.indexOf(":");if(x){var C=y.substring(8,x);try{m[C]=JSON.parse(y.substring(x+1))}catch{console.warn("Invalid uniform JSON: "+C)}}}}return m},extractBlock:function(c,m){for(var g=-1,y=-1,x=-1,C=!1,S=!1,E=[],T=[],P=m;P<c.length;P++){var M=c[P].trim();if(M==="---")if(g===-1)g=P,C=!0;else if(C)y=P,C=!1,S=!0;else{S=!1;break}else C?E.push(M):S&&(T.push(M),x=P)}return!C&&y!==-1?{header:E,shader:T.join(`
`),offset:x}:null}});u.register("glsl",function(c,m,g,y){if(Array.isArray(c))for(var x=0;x<c.length;x++)this.addFile(new v(this,c[x]));else this.addFile(new v(this,c,m,g,y));return this}),n.exports=v},89749:(n,o,r)=>{var a=r(83419),p=r(54899),h=r(41299),u=r(95540),f=r(98356),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y){if(l(m)){var x=m;m=u(x,"key"),y=u(x,"config",y)}var C={type:"audio",cache:c.cacheManager.audio,extension:g.type,key:m,url:g.url,config:y};h.call(this,c,C),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var v=0;v<this.data.length;v++){var c=this.data[v];c.oncanplaythrough=null,c.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(v){var c=v.target;c.oncanplaythrough=null,c.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(p.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var v=this.config&&this.config.instances||1;this.filesTotal=v,this.filesLoaded=0,this.percentComplete=0;for(var c=0;c<v;c++){var m=new Audio;m.dataset||(m.dataset={}),m.dataset.name=this.key+("0"+c).slice(-2),m.dataset.used="false",this.locked?m.dataset.locked="true":(m.dataset.locked="false",m.preload="auto",m.oncanplaythrough=this.onProgress.bind(this),m.onerror=this.onError.bind(this)),this.data.push(m)}for(c=0;c<this.data.length;c++)m=this.data[c],m.src=f(this,this.loader.baseURL),this.locked||m.load();this.locked&&setTimeout(this.onLoad.bind(this))}});n.exports=d},88470:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y){var x="html";if(l(m)){var C=m;m=f(C,"key"),g=f(C,"url"),y=f(C,"xhrSettings"),x=f(C,"extension",x)}var S={type:"text",cache:c.cacheManager.html,extension:x,responseType:"text",key:m,url:g,xhrSettings:y};h.call(this,c,S)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(v,c,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new d(this,v[g]));else this.addFile(new d(this,v,c,m));return this}),n.exports=d},14643:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y,x,C){y===void 0&&(y=512),x===void 0&&(x=512);var S="html";if(l(m)){var E=m;m=f(E,"key"),g=f(E,"url"),C=f(E,"xhrSettings"),S=f(E,"extension",S),y=f(E,"width",y),x=f(E,"height",x)}var T={type:"html",cache:c.textureManager,extension:S,responseType:"text",key:m,url:g,xhrSettings:C,config:{width:y,height:x}};h.call(this,c,T)},onProcess:function(){this.state=p.FILE_PROCESSING;var v=this.config.width,c=this.config.height,m=[];m.push('<svg width="'+v+'px" height="'+c+'px" viewBox="0 0 '+v+" "+c+'" xmlns="http://www.w3.org/2000/svg">'),m.push('<foreignObject width="100%" height="100%">'),m.push('<body xmlns="http://www.w3.org/1999/xhtml">'),m.push(this.xhrLoader.responseText),m.push("</body>"),m.push("</foreignObject>"),m.push("</svg>");var g=[m.join(`
`)],y=this;try{var x=new window.Blob(g,{type:"image/svg+xml;charset=utf-8"})}catch{y.state=p.FILE_ERRORED,y.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){h.revokeObjectURL(y.data),y.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(y.data),y.onProcessError()},h.createObjectURL(this.data,x,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("htmlTexture",function(v,c,m,g,y){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new d(this,v[x]));else this.addFile(new d(this,v,c,m,g,y));return this}),n.exports=d},19550:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=r(98356),v=new a({Extends:h,initialize:function c(m,g,y,x,C){var S="png",E;if(l(g)){var T=g;g=f(T,"key"),y=f(T,"url"),E=f(T,"normalMap"),x=f(T,"xhrSettings"),S=f(T,"extension",S),C=f(T,"frameConfig")}Array.isArray(y)&&(E=y[1],y=y[0]);var P={type:"image",cache:m.textureManager,extension:S,responseType:"blob",key:g,url:y,xhrSettings:x,config:C};if(h.call(this,m,P),E){var M=new c(m,this.key,E,x,C);M.type="normalMap",this.setLink(M),m.addFile(M)}this.useImageElementLoad=m.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){h.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(c.data),c.onProcessError()},h.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var c=this.state;this.state=p.FILE_PROCESSING,c===p.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=p.FILE_LOADING,this.src=d(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var c=this;this.data.onload=function(){c.state=p.FILE_LOADED,c.loader.nextFile(c,!0)},this.data.onerror=function(){c.loader.nextFile(c,!1)},this.data.src=this.src},addToCache:function(){var c=this.linkFile;c?c.state>=p.FILE_COMPLETE&&(c.type==="spritesheet"?c.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,c.data,this.data):this.cache.addImage(this.key,this.data,c.data)):this.cache.addImage(this.key,this.data)}});u.register("image",function(c,m,g){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new v(this,c[y]));else this.addFile(new v(this,c,m,g));return this}),n.exports=v},518:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(35154),d=r(41212),v=new a({Extends:h,initialize:function(m,g,y,x,C){var S="json";if(d(g)){var E=g;g=f(E,"key"),y=f(E,"url"),x=f(E,"xhrSettings"),S=f(E,"extension",S),C=f(E,"dataKey",C)}var T={type:"json",cache:m.cacheManager.json,extension:S,responseType:"text",key:g,url:y,xhrSettings:x,config:C};h.call(this,m,T),d(y)&&(C?this.data=l(y,C):this.data=y,this.state=p.FILE_POPULATED)},onProcess:function(){if(this.state!==p.FILE_POPULATED){this.state=p.FILE_PROCESSING;try{var c=JSON.parse(this.xhrLoader.responseText)}catch(g){throw this.onProcessError(),g}var m=this.config;typeof m=="string"?this.data=l(c,m,c):this.data=c}this.onProcessComplete()}});u.register("json",function(c,m,g,y){if(Array.isArray(c))for(var x=0;x<c.length;x++)this.addFile(new v(this,c[x]));else this.addFile(new v(this,c,m,y,g));return this}),n.exports=v},59327:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(19550),f=r(41212),l=r(518),d=r(26430),v=new a({Extends:d,initialize:function(m,g,y,x,C,S,E){if(f(g)){var T=g;g=h(T,"key"),h(T,"url",!1)?y=h(T,"url"):y=h(T,"atlasURL"),S=h(T,"xhrSettings"),x=h(T,"path"),C=h(T,"baseURL"),E=h(T,"textureXhrSettings")}var P=new l(m,g,y,S);d.call(this,m,"multiatlas",g,[P]),this.config.path=x,this.config.baseURL=C,this.config.textureXhrSettings=E},onFileComplete:function(c){var m=this.files.indexOf(c);if(m!==-1&&(this.pending--,c.type==="json"&&c.data.hasOwnProperty("textures"))){var g=c.data.textures,y=this.config,x=this.loader,C=x.baseURL,S=x.path,E=x.prefix,T=h(y,"baseURL",this.baseURL),P=h(y,"path",this.path),M=h(y,"prefix",this.prefix),w=h(y,"textureXhrSettings");x.setBaseURL(T),x.setPath(P),x.setPrefix(M);for(var b=0;b<g.length;b++){var I=g[b].image,R="MA"+this.multiKeyIndex+"_"+I,A=new u(x,R,I,w);if(this.addToMultiFile(A),x.addFile(A),g[b].normalMap){var L=new u(x,R,g[b].normalMap,w);L.type="normalMap",A.setLink(L),this.addToMultiFile(L),x.addFile(L)}}x.setBaseURL(C),x.setPath(S),x.setPrefix(E)}},addToCache:function(){if(this.isReadyToProcess()){for(var c=this.files[0],m=[],g=[],y=[],x=1;x<this.files.length;x++){var C=this.files[x];if(C.type!=="normalMap")for(var S=C.key.indexOf("_"),E=C.key.substr(S+1),T=C.data,P=0;P<c.data.textures.length;P++){var M=c.data.textures[P];if(M.image===E){g.push(T),m.push(M),C.linkFile&&y.push(C.linkFile.data);break}}}y.length===0&&(y=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,g,m,y),this.complete=!0}}});p.register("multiatlas",function(c,m,g,y,x){var C;if(Array.isArray(c))for(var S=0;S<c.length;S++)C=new v(this,c[S]),this.addFile(C.files);else C=new v(this,c,m,g,y,x),this.addFile(C.files);return this}),n.exports=v},99297:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(41212),f=r(26430),l=r(34328),d=new a({Extends:f,initialize:function(c,m,g,y){var x="js",C=[];if(u(m)){var S=m;m=h(S,"key"),g=h(S,"url"),y=h(S,"xhrSettings"),x=h(S,"extension",x)}Array.isArray(g)||(g=[g]);for(var E=0;E<g.length;E++){var T=new l(c,{key:m+"_"+E.toString(),url:g[E],extension:x,xhrSettings:y});T.onProcess=function(){this.onProcessComplete()},C.push(T)}f.call(this,c,"scripts",m,C)},addToCache:function(){if(this.isReadyToProcess()){for(var v=0;v<this.files.length;v++){var c=this.files[v];c.data=document.createElement("script"),c.data.language="javascript",c.data.type="text/javascript",c.data.defer=!1,c.data.text=c.xhrLoader.responseText,document.head.appendChild(c.data)}this.complete=!0}}});p.register("scripts",function(v,c,m){var g;if(Array.isArray(v))for(var y=0;y<v.length;y++)g=new d(this,v[y]),this.addFile(g.files);else g=new d(this,v,c,m),this.addFile(g.files);return this}),n.exports=d},41846:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(41212),f=r(26430),l=r(85048),d=r(61485),v=r(78776),c=new a({Extends:f,initialize:function(g,y,x,C,S,E){var T,P,M=g.cacheManager.obj;if(u(y)){var w=y;y=h(w,"key"),T=new v(g,{key:y,type:"obj",cache:M,url:h(w,"url"),extension:h(w,"extension","obj"),xhrSettings:h(w,"xhrSettings"),config:{flipUV:h(w,"flipUV",S)}}),C=h(w,"matURL"),C&&(P=new v(g,{key:y,type:"mat",cache:M,url:C,extension:h(w,"matExtension","mat"),xhrSettings:h(w,"xhrSettings")}))}else T=new v(g,{key:y,url:x,type:"obj",cache:M,extension:"obj",xhrSettings:E,config:{flipUV:S}}),C&&(P=new v(g,{key:y,url:C,type:"mat",cache:M,extension:"mat",xhrSettings:E}));f.call(this,g,"obj",y,[T,P])},addToCache:function(){if(this.isReadyToProcess()){var m=this.files[0],g=this.files[1],y=l(m.data,m.config.flipUV);g&&(y.materials=d(g.data)),m.cache.add(m.key,y),this.complete=!0}}});p.register("obj",function(m,g,y,x,C){var S;if(Array.isArray(m))for(var E=0;E<m.length;E++)S=new c(this,m[E]),this.addFile(S.files);else S=new c(this,m,g,y,x,C),this.addFile(S.files);return this}),n.exports=c},58610:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(74099),u=r(518),f=new a({Extends:u,initialize:function(d,v,c,m,g){u.call(this,d,v,c,m,g),this.type="packfile"},onProcess:function(){if(this.state!==p.FILE_POPULATED&&(this.state=p.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var l={};l[this.config]=this.data,this.data=l}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});h.register("pack",function(l,d,v,c){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new f(this,l[m]));else this.addFile(new f(this,l,d,c,v));return this}),n.exports=f},48988:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y,x,C){var S="js";if(l(m)){var E=m;m=f(E,"key"),g=f(E,"url"),C=f(E,"xhrSettings"),S=f(E,"extension",S),y=f(E,"start"),x=f(E,"mapping")}var T={type:"plugin",cache:!1,extension:S,responseType:"text",key:m,url:g,xhrSettings:C,config:{start:y,mapping:x}};h.call(this,c,T),typeof g=="function"&&(this.data=g,this.state=p.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,c=this.config,m=f(c,"start",!1),g=f(c,"mapping",null);if(this.state===p.FILE_POPULATED)v.install(this.key,this.data,m,g);else{this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var y=v.install(this.key,window[this.key],m,g);(m||g)&&(this.loader.systems[g]=y,this.loader.scene[g]=y)}this.onProcessComplete()}});u.register("plugin",function(v,c,m,g,y){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new d(this,v[x]));else this.addFile(new d(this,v,c,m,g,y));return this}),n.exports=d},67397:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y,x){var C="svg";if(l(m)){var S=m;m=f(S,"key"),g=f(S,"url"),y=f(S,"svgConfig",{}),x=f(S,"xhrSettings"),C=f(S,"extension",C)}var E={type:"svg",cache:c.textureManager,extension:C,responseType:"text",key:m,url:g,xhrSettings:x,config:{width:f(y,"width"),height:f(y,"height"),scale:f(y,"scale")}};h.call(this,c,E)},onProcess:function(){this.state=p.FILE_PROCESSING;var v=this.xhrLoader.responseText,c=[v],m=this.config.width,g=this.config.height,y=this.config.scale;t:if(m&&g||y){var x=null,C=new DOMParser;x=C.parseFromString(v,"text/xml");var S=x.getElementsByTagName("svg")[0],E=S.hasAttribute("viewBox"),T=parseFloat(S.getAttribute("width")),P=parseFloat(S.getAttribute("height"));if(!E&&T&&P)S.setAttribute("viewBox","0  0 "+T+" "+P);else if(E&&!T&&!P){var M=S.getAttribute("viewBox").split(/\s+|,/);T=M[2],P=M[3]}if(y)if(T&&P)m=T*y,g=P*y;else break t;S.setAttribute("width",m.toString()+"px"),S.setAttribute("height",g.toString()+"px"),c=[new XMLSerializer().serializeToString(S)]}try{var w=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var b=this,I=!1;this.data.onload=function(){I||h.revokeObjectURL(b.data),b.onProcessComplete()},this.data.onerror=function(){I?b.onProcessError():(I=!0,h.revokeObjectURL(b.data),b.data.src="data:image/svg+xml,"+encodeURIComponent(c.join("")))},h.createObjectURL(this.data,w,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("svg",function(v,c,m,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new d(this,v[y]));else this.addFile(new d(this,v,c,m,g));return this}),n.exports=d},88423:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y){var x="js";if(l(m)){var C=m;m=f(C,"key"),g=f(C,"url"),y=f(C,"xhrSettings"),x=f(C,"extension",x)}var S={type:"text",extension:x,responseType:"text",key:m,url:g,xhrSettings:y};h.call(this,c,S)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var v=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),c=eval;this.loader.sceneManager.add(this.key,c(v)),this.complete=!0}});u.register("sceneFile",function(v,c,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new d(this,v[g]));else this.addFile(new d(this,v,c,m));return this}),n.exports=d},56812:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y,x,C){var S="js";if(l(m)){var E=m;m=f(E,"key"),g=f(E,"url"),C=f(E,"xhrSettings"),S=f(E,"extension",S),y=f(E,"systemKey"),x=f(E,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:S,responseType:"text",key:m,url:g,xhrSettings:C,config:{systemKey:y,sceneKey:x}};h.call(this,c,T),typeof g=="function"&&(this.data=g,this.state=p.FILE_POPULATED)},onProcess:function(){var v=this.loader.systems.plugins,c=this.config,m=this.key,g=f(c,"systemKey",m),y=f(c,"sceneKey",m);this.state===p.FILE_POPULATED?v.installScenePlugin(g,this.data,y,this.loader.scene,!0):(this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),v.installScenePlugin(g,window[this.key],y,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(v,c,m,g,y){if(Array.isArray(v))for(var x=0;x<v.length;x++)this.addFile(new d(this,v[x]));else this.addFile(new d(this,v,c,m,g,y));return this}),n.exports=d},34328:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y,x){var C="js";if(l(m)){var S=m;m=f(S,"key"),g=f(S,"url"),y=f(S,"type","script"),x=f(S,"xhrSettings"),C=f(S,"extension",C)}else y===void 0&&(y="script");var E={type:y,cache:!1,extension:C,responseType:"text",key:m,url:g,xhrSettings:x};h.call(this,c,E)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(v,c,m,g){if(Array.isArray(v))for(var y=0;y<v.length;y++)this.addFile(new d(this,v[y]));else this.addFile(new d(this,v,c,m,g));return this}),n.exports=d},85035:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(74099),u=r(19550),f=new a({Extends:u,initialize:function(d,v,c,m,g){u.call(this,d,v,c,g,m),this.type="spritesheet"},addToCache:function(){var l=this.linkFile;l?l.state>=p.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,l.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,l.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});h.register("spritesheet",function(l,d,v,c){if(Array.isArray(l))for(var m=0;m<l.length;m++)this.addFile(new f(this,l[m]));else this.addFile(new f(this,l,d,v,c));return this}),n.exports=f},78776:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=new a({Extends:h,initialize:function(c,m,g,y){var x="text",C="txt",S=c.cacheManager.text;if(l(m)){var E=m;m=f(E,"key"),g=f(E,"url"),y=f(E,"xhrSettings"),C=f(E,"extension",C),x=f(E,"type",x),S=f(E,"cache",S)}var T={type:x,cache:S,extension:C,responseType:"text",key:m,url:g,xhrSettings:y};h.call(this,c,T)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(v,c,m){if(Array.isArray(v))for(var g=0;g<v.length;g++)this.addFile(new d(this,v[g]));else this.addFile(new d(this,v,c,m));return this}),n.exports=d},49477:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=r(80341),v=new a({Extends:h,initialize:function(m,g,y,x){var C="csv";if(l(g)){var S=g;g=f(S,"key"),y=f(S,"url"),x=f(S,"xhrSettings"),C=f(S,"extension",C)}var E={type:"tilemapCSV",cache:m.cacheManager.tilemap,extension:C,responseType:"text",key:g,url:y,xhrSettings:x};h.call(this,m,E),this.tilemapFormat=d.CSV},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var c={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,c)}});u.register("tilemapCSV",function(c,m,g){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new v(this,c[y]));else this.addFile(new v(this,c,m,g));return this}),n.exports=v},40807:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(518),u=r(80341),f=new a({Extends:h,initialize:function(d,v,c,m){h.call(this,d,v,c,m),this.type="tilemapJSON",this.cache=d.cacheManager.tilemap},addToCache:function(){var l={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,l)}});p.register("tilemapImpact",function(l,d,v){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new f(this,l[c]));else this.addFile(new f(this,l,d,v));return this}),n.exports=f},56775:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(518),u=r(80341),f=new a({Extends:h,initialize:function(d,v,c,m){h.call(this,d,v,c,m),this.type="tilemapJSON",this.cache=d.cacheManager.tilemap},addToCache:function(){var l={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,l)}});p.register("tilemapTiledJSON",function(l,d,v){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new f(this,l[c]));else this.addFile(new f(this,l,d,v));return this}),n.exports=f},25771:(n,o,r)=>{var a=r(83419),p=r(74099),h=r(95540),u=r(19550),f=r(41212),l=r(26430),d=r(78776),v=new a({Extends:l,initialize:function(m,g,y,x,C,S){var E,T;if(f(g)){var P=g;g=h(P,"key"),E=new u(m,{key:g,url:h(P,"textureURL"),extension:h(P,"textureExtension","png"),normalMap:h(P,"normalMap"),xhrSettings:h(P,"textureXhrSettings")}),T=new d(m,{key:g,url:h(P,"atlasURL"),extension:h(P,"atlasExtension","txt"),xhrSettings:h(P,"atlasXhrSettings")})}else E=new u(m,g,y,C),T=new d(m,g,x,S);E.linkFile?l.call(this,m,"unityatlas",g,[E,T,E.linkFile]):l.call(this,m,"unityatlas",g,[E,T])},addToCache:function(){if(this.isReadyToProcess()){var c=this.files[0],m=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(c.key,c.data,m.data,g),this.complete=!0}}});p.register("unityAtlas",function(c,m,g,y,x){var C;if(Array.isArray(c))for(var S=0;S<c.length;S++)C=new v(this,c[S]),this.addFile(C.files);else C=new v(this,c,m,g,y,x),this.addFile(C.files);return this}),n.exports=v},33720:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(98356),l=r(95540),d=r(41212),v=new a({Extends:h,initialize:function(m,g,y,x){if(x===void 0&&(x=!1),d(g)){var C=g;g=l(C,"key"),y=l(C,"url",[]),x=l(C,"noAudio",!1)}var S=m.systems.game.device.video.getVideoURL(y);S||console.warn("VideoFile: No supported format for "+g);var E={type:"video",cache:m.cacheManager.video,extension:S.type,key:g,url:S.url,config:{noAudio:x}};h.call(this,m,E)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=f(this,this.loader.baseURL),this.state=p.FILE_LOADED,this.loader.nextFile(this,!0)}});u.register("video",function(c,m,g){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new v(this,c[y]));else this.addFile(new v(this,c,m,g));return this}),n.exports=v},57318:(n,o,r)=>{var a=r(83419),p=r(23906),h=r(41299),u=r(74099),f=r(95540),l=r(41212),d=r(56836),v=new a({Extends:h,initialize:function(m,g,y,x){var C="xml";if(l(g)){var S=g;g=f(S,"key"),y=f(S,"url"),x=f(S,"xhrSettings"),C=f(S,"extension",C)}var E={type:"xml",cache:m.cacheManager.xml,extension:C,responseType:"text",key:g,url:y,xhrSettings:x};h.call(this,m,E)},onProcess:function(){this.state=p.FILE_PROCESSING,this.data=d(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});u.register("xml",function(c,m,g){if(Array.isArray(c))for(var y=0;y<c.length;y++)this.addFile(new v(this,c[y]));else this.addFile(new v(this,c,m,g));return this}),n.exports=v},64589:(n,o,r)=>{n.exports={AnimationJSONFile:r(14135),AsepriteFile:r(76272),AtlasJSONFile:r(38734),AtlasXMLFile:r(74599),AudioFile:r(21097),AudioSpriteFile:r(89524),BinaryFile:r(85722),BitmapFontFile:r(97025),CompressedTextureFile:r(69559),CSSFile:r(16024),FontFile:r(87674),GLSLFile:r(47931),HTML5AudioFile:r(89749),HTMLFile:r(88470),HTMLTextureFile:r(14643),ImageFile:r(19550),JSONFile:r(518),MultiAtlasFile:r(59327),MultiScriptFile:r(99297),OBJFile:r(41846),PackFile:r(58610),PluginFile:r(48988),SceneFile:r(88423),ScenePluginFile:r(56812),ScriptFile:r(34328),SpriteSheetFile:r(85035),SVGFile:r(67397),TextFile:r(78776),TilemapCSVFile:r(49477),TilemapImpactFile:r(40807),TilemapJSONFile:r(56775),UnityAtlasFile:r(25771),VideoFile:r(33720),XMLFile:r(57318)}},57777:(n,o,r)=>{var a=r(23906),p=r(79291),h={Events:r(54899),FileTypes:r(64589),File:r(41299),FileTypesManager:r(74099),GetURL:r(98356),LoaderPlugin:r(74261),MergeXHRSettings:r(3374),MultiFile:r(26430),XHRLoader:r(84376),XHRSettings:r(92638)};h=p(!1,h,a),n.exports=h},53307:n=>{var o=function(r){for(var a=0,p=0;p<r.length;p++)a+=+r[p];return a/r.length};n.exports=o},85710:(n,o,r)=>{var a=r(6411),p=function(h,u){return a(h)/a(u)/a(h-u)};n.exports=p},30976:n=>{var o=function(r,a){return Math.floor(Math.random()*(a-r+1)+r)};n.exports=o},87842:n=>{var o=function(r,a,p,h,u){var f=(h-a)*.5,l=(u-p)*.5,d=r*r,v=r*d;return(2*p-2*h+f+l)*v+(-3*p+3*h-2*f-l)*d+f*r+p};n.exports=o},26302:n=>{var o=function(r,a,p){a===void 0&&(a=0),p===void 0&&(p=10);var h=Math.pow(p,-a);return Math.ceil(r*h)/h};n.exports=o},45319:n=>{var o=function(r,a,p){return Math.max(a,Math.min(p,r))};n.exports=o},39506:(n,o,r)=>{var a=r(36383),p=function(h){return h*a.DEG_TO_RAD};n.exports=p},61241:n=>{var o=function(r,a){return Math.abs(r-a)};n.exports=o},38857:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(37867),u=r(29747),f=new h,l=new p({initialize:function d(v,c,m,g){v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g=d.DefaultOrder),this._x=v,this._y=c,this._z=m,this._order=g,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(d){this._x=d,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(d){this._y=d,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(d){this._z=d,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(d){this._order=d,this.onChangeCallback(this)}},set:function(d,v,c,m){return m===void 0&&(m=this._order),this._x=d,this._y=v,this._z=c,this._order=m,this.onChangeCallback(this),this},copy:function(d){return this.set(d.x,d.y,d.z,d.order)},setFromQuaternion:function(d,v,c){return v===void 0&&(v=this._order),c===void 0&&(c=!1),f.fromQuat(d),this.setFromRotationMatrix(f,v,c)},setFromRotationMatrix:function(d,v,c){v===void 0&&(v=this._order),c===void 0&&(c=!1);var m=d.val,g=m[0],y=m[4],x=m[8],C=m[1],S=m[5],E=m[9],T=m[2],P=m[6],M=m[10],w=0,b=0,I=0,R=.99999;switch(v){case"XYZ":{b=Math.asin(a(x,-1,1)),Math.abs(x)<R?(w=Math.atan2(-E,M),I=Math.atan2(-y,g)):w=Math.atan2(P,S);break}case"YXZ":{w=Math.asin(-a(E,-1,1)),Math.abs(E)<R?(b=Math.atan2(x,M),I=Math.atan2(C,S)):b=Math.atan2(-T,g);break}case"ZXY":{w=Math.asin(a(P,-1,1)),Math.abs(P)<R?(b=Math.atan2(-T,M),I=Math.atan2(-y,S)):I=Math.atan2(C,g);break}case"ZYX":{b=Math.asin(-a(T,-1,1)),Math.abs(T)<R?(w=Math.atan2(P,M),I=Math.atan2(C,g)):I=Math.atan2(-y,S);break}case"YZX":{I=Math.asin(a(C,-1,1)),Math.abs(C)<R?(w=Math.atan2(-E,S),b=Math.atan2(-T,g)):b=Math.atan2(x,M);break}case"XZY":{I=Math.asin(-a(y,-1,1)),Math.abs(y)<R?(w=Math.atan2(P,S),b=Math.atan2(x,g)):w=Math.atan2(-E,M);break}}return this._x=w,this._y=b,this._z=I,this._order=v,c&&this.onChangeCallback(this),this}});l.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],l.DefaultOrder="XYZ",n.exports=l},6411:n=>{var o=function(r){if(r===0)return 1;for(var a=r;--r;)a*=r;return a};n.exports=o},99472:n=>{var o=function(r,a){return Math.random()*(a-r)+r};n.exports=o},77623:n=>{var o=function(r,a,p){a===void 0&&(a=0),p===void 0&&(p=10);var h=Math.pow(p,-a);return Math.floor(r*h)/h};n.exports=o},62945:(n,o,r)=>{var a=r(45319),p=function(h,u,f){return h=a(h,0,1),(f-u)*h+u};n.exports=p},38265:n=>{var o=function(r,a){return r/a/1e3};n.exports=o},78702:n=>{var o=function(r){return r==parseFloat(r)?!(r%2):void 0};n.exports=o},94883:n=>{var o=function(r){return r===parseFloat(r)?!(r%2):void 0};n.exports=o},28915:n=>{var o=function(r,a,p){return(a-r)*p+r};n.exports=o},94908:n=>{var o=function(r,a,p){return p===void 0&&(p=0),r.clone().lerp(a,p)};n.exports=o},94434:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u){this.val=new Float32Array(9),u?this.copy(u):this.identity()},clone:function(){return new p(this)},set:function(h){return this.copy(h)},copy:function(h){var u=this.val,f=h.val;return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],this},fromMat4:function(h){var u=h.val,f=this.val;return f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[4],f[4]=u[5],f[5]=u[6],f[6]=u[8],f[7]=u[9],f[8]=u[10],this},fromArray:function(h){var u=this.val;return u[0]=h[0],u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=h[6],u[7]=h[7],u[8]=h[8],this},identity:function(){var h=this.val;return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=0,h[7]=0,h[8]=1,this},transpose:function(){var h=this.val,u=h[1],f=h[2],l=h[5];return h[1]=h[3],h[2]=h[6],h[3]=u,h[5]=h[7],h[6]=f,h[7]=l,this},invert:function(){var h=this.val,u=h[0],f=h[1],l=h[2],d=h[3],v=h[4],c=h[5],m=h[6],g=h[7],y=h[8],x=y*v-c*g,C=-y*d+c*m,S=g*d-v*m,E=u*x+f*C+l*S;return E?(E=1/E,h[0]=x*E,h[1]=(-y*f+l*g)*E,h[2]=(c*f-l*v)*E,h[3]=C*E,h[4]=(y*u-l*m)*E,h[5]=(-c*u+l*d)*E,h[6]=S*E,h[7]=(-g*u+f*m)*E,h[8]=(v*u-f*d)*E,this):null},adjoint:function(){var h=this.val,u=h[0],f=h[1],l=h[2],d=h[3],v=h[4],c=h[5],m=h[6],g=h[7],y=h[8];return h[0]=v*y-c*g,h[1]=l*g-f*y,h[2]=f*c-l*v,h[3]=c*m-d*y,h[4]=u*y-l*m,h[5]=l*d-u*c,h[6]=d*g-v*m,h[7]=f*m-u*g,h[8]=u*v-f*d,this},determinant:function(){var h=this.val,u=h[0],f=h[1],l=h[2],d=h[3],v=h[4],c=h[5],m=h[6],g=h[7],y=h[8];return u*(y*v-c*g)+f*(-y*d+c*m)+l*(g*d-v*m)},multiply:function(h){var u=this.val,f=u[0],l=u[1],d=u[2],v=u[3],c=u[4],m=u[5],g=u[6],y=u[7],x=u[8],C=h.val,S=C[0],E=C[1],T=C[2],P=C[3],M=C[4],w=C[5],b=C[6],I=C[7],R=C[8];return u[0]=S*f+E*v+T*g,u[1]=S*l+E*c+T*y,u[2]=S*d+E*m+T*x,u[3]=P*f+M*v+w*g,u[4]=P*l+M*c+w*y,u[5]=P*d+M*m+w*x,u[6]=b*f+I*v+R*g,u[7]=b*l+I*c+R*y,u[8]=b*d+I*m+R*x,this},translate:function(h){var u=this.val,f=h.x,l=h.y;return u[6]=f*u[0]+l*u[3]+u[6],u[7]=f*u[1]+l*u[4]+u[7],u[8]=f*u[2]+l*u[5]+u[8],this},rotate:function(h){var u=this.val,f=u[0],l=u[1],d=u[2],v=u[3],c=u[4],m=u[5],g=Math.sin(h),y=Math.cos(h);return u[0]=y*f+g*v,u[1]=y*l+g*c,u[2]=y*d+g*m,u[3]=y*v-g*f,u[4]=y*c-g*l,u[5]=y*m-g*d,this},scale:function(h){var u=this.val,f=h.x,l=h.y;return u[0]=f*u[0],u[1]=f*u[1],u[2]=f*u[2],u[3]=l*u[3],u[4]=l*u[4],u[5]=l*u[5],this},fromQuat:function(h){var u=h.x,f=h.y,l=h.z,d=h.w,v=u+u,c=f+f,m=l+l,g=u*v,y=u*c,x=u*m,C=f*c,S=f*m,E=l*m,T=d*v,P=d*c,M=d*m,w=this.val;return w[0]=1-(C+E),w[3]=y+M,w[6]=x-P,w[1]=y-M,w[4]=1-(g+E),w[7]=S+T,w[2]=x+P,w[5]=S-T,w[8]=1-(g+C),this},normalFromMat4:function(h){var u=h.val,f=this.val,l=u[0],d=u[1],v=u[2],c=u[3],m=u[4],g=u[5],y=u[6],x=u[7],C=u[8],S=u[9],E=u[10],T=u[11],P=u[12],M=u[13],w=u[14],b=u[15],I=l*g-d*m,R=l*y-v*m,A=l*x-c*m,L=d*y-v*g,O=d*x-c*g,F=v*x-c*y,G=C*M-S*P,U=C*w-E*P,z=C*b-T*P,N=S*w-E*M,k=S*b-T*M,D=E*b-T*w,V=I*D-R*k+A*N+L*z-O*U+F*G;return V?(V=1/V,f[0]=(g*D-y*k+x*N)*V,f[1]=(y*z-m*D-x*U)*V,f[2]=(m*k-g*z+x*G)*V,f[3]=(v*k-d*D-c*N)*V,f[4]=(l*D-v*z+c*U)*V,f[5]=(d*z-l*k-c*G)*V,f[6]=(M*F-w*O+b*L)*V,f[7]=(w*A-P*F-b*R)*V,f[8]=(P*O-M*A+b*I)*V,this):null}});n.exports=p},37867:(n,o,r)=>{var a=r(83419),p=r(25836),h=1e-6,u=new a({initialize:function(g){this.val=new Float32Array(16),g?this.copy(g):this.identity()},clone:function(){return new u(this)},set:function(m){return this.copy(m)},setValues:function(m,g,y,x,C,S,E,T,P,M,w,b,I,R,A,L){var O=this.val;return O[0]=m,O[1]=g,O[2]=y,O[3]=x,O[4]=C,O[5]=S,O[6]=E,O[7]=T,O[8]=P,O[9]=M,O[10]=w,O[11]=b,O[12]=I,O[13]=R,O[14]=A,O[15]=L,this},copy:function(m){var g=m.val;return this.setValues(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15])},fromArray:function(m){return this.setValues(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(m,g,y){var x=f.fromQuat(y),C=x.val,S=g.x,E=g.y,T=g.z;return this.setValues(C[0]*S,C[1]*S,C[2]*S,0,C[4]*E,C[5]*E,C[6]*E,0,C[8]*T,C[9]*T,C[10]*T,0,m.x,m.y,m.z,1)},xyz:function(m,g,y){this.identity();var x=this.val;return x[12]=m,x[13]=g,x[14]=y,this},scaling:function(m,g,y){this.zero();var x=this.val;return x[0]=m,x[5]=g,x[10]=y,x[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var m=this.val,g=m[1],y=m[2],x=m[3],C=m[6],S=m[7],E=m[11];return m[1]=m[4],m[2]=m[8],m[3]=m[12],m[4]=g,m[6]=m[9],m[7]=m[13],m[8]=y,m[9]=C,m[11]=m[14],m[12]=x,m[13]=S,m[14]=E,this},getInverse:function(m){return this.copy(m),this.invert()},invert:function(){var m=this.val,g=m[0],y=m[1],x=m[2],C=m[3],S=m[4],E=m[5],T=m[6],P=m[7],M=m[8],w=m[9],b=m[10],I=m[11],R=m[12],A=m[13],L=m[14],O=m[15],F=g*E-y*S,G=g*T-x*S,U=g*P-C*S,z=y*T-x*E,N=y*P-C*E,k=x*P-C*T,D=M*A-w*R,V=M*L-b*R,B=M*O-I*R,W=w*L-b*A,H=w*O-I*A,Y=b*O-I*L,X=F*Y-G*H+U*W+z*B-N*V+k*D;return X?(X=1/X,this.setValues((E*Y-T*H+P*W)*X,(x*H-y*Y-C*W)*X,(A*k-L*N+O*z)*X,(b*N-w*k-I*z)*X,(T*B-S*Y-P*V)*X,(g*Y-x*B+C*V)*X,(L*U-R*k-O*G)*X,(M*k-b*U+I*G)*X,(S*H-E*B+P*D)*X,(y*B-g*H-C*D)*X,(R*N-A*U+O*F)*X,(w*U-M*N-I*F)*X,(E*V-S*W-T*D)*X,(g*W-y*V+x*D)*X,(A*G-R*z-L*F)*X,(M*z-w*G+b*F)*X)):this},adjoint:function(){var m=this.val,g=m[0],y=m[1],x=m[2],C=m[3],S=m[4],E=m[5],T=m[6],P=m[7],M=m[8],w=m[9],b=m[10],I=m[11],R=m[12],A=m[13],L=m[14],O=m[15];return this.setValues(E*(b*O-I*L)-w*(T*O-P*L)+A*(T*I-P*b),-(y*(b*O-I*L)-w*(x*O-C*L)+A*(x*I-C*b)),y*(T*O-P*L)-E*(x*O-C*L)+A*(x*P-C*T),-(y*(T*I-P*b)-E*(x*I-C*b)+w*(x*P-C*T)),-(S*(b*O-I*L)-M*(T*O-P*L)+R*(T*I-P*b)),g*(b*O-I*L)-M*(x*O-C*L)+R*(x*I-C*b),-(g*(T*O-P*L)-S*(x*O-C*L)+R*(x*P-C*T)),g*(T*I-P*b)-S*(x*I-C*b)+M*(x*P-C*T),S*(w*O-I*A)-M*(E*O-P*A)+R*(E*I-P*w),-(g*(w*O-I*A)-M*(y*O-C*A)+R*(y*I-C*w)),g*(E*O-P*A)-S*(y*O-C*A)+R*(y*P-C*E),-(g*(E*I-P*w)-S*(y*I-C*w)+M*(y*P-C*E)),-(S*(w*L-b*A)-M*(E*L-T*A)+R*(E*b-T*w)),g*(w*L-b*A)-M*(y*L-x*A)+R*(y*b-x*w),-(g*(E*L-T*A)-S*(y*L-x*A)+R*(y*T-x*E)),g*(E*b-T*w)-S*(y*b-x*w)+M*(y*T-x*E))},determinant:function(){var m=this.val,g=m[0],y=m[1],x=m[2],C=m[3],S=m[4],E=m[5],T=m[6],P=m[7],M=m[8],w=m[9],b=m[10],I=m[11],R=m[12],A=m[13],L=m[14],O=m[15],F=g*E-y*S,G=g*T-x*S,U=g*P-C*S,z=y*T-x*E,N=y*P-C*E,k=x*P-C*T,D=M*A-w*R,V=M*L-b*R,B=M*O-I*R,W=w*L-b*A,H=w*O-I*A,Y=b*O-I*L;return F*Y-G*H+U*W+z*B-N*V+k*D},multiply:function(m){var g=this.val,y=g[0],x=g[1],C=g[2],S=g[3],E=g[4],T=g[5],P=g[6],M=g[7],w=g[8],b=g[9],I=g[10],R=g[11],A=g[12],L=g[13],O=g[14],F=g[15],G=m.val,U=G[0],z=G[1],N=G[2],k=G[3];return g[0]=U*y+z*E+N*w+k*A,g[1]=U*x+z*T+N*b+k*L,g[2]=U*C+z*P+N*I+k*O,g[3]=U*S+z*M+N*R+k*F,U=G[4],z=G[5],N=G[6],k=G[7],g[4]=U*y+z*E+N*w+k*A,g[5]=U*x+z*T+N*b+k*L,g[6]=U*C+z*P+N*I+k*O,g[7]=U*S+z*M+N*R+k*F,U=G[8],z=G[9],N=G[10],k=G[11],g[8]=U*y+z*E+N*w+k*A,g[9]=U*x+z*T+N*b+k*L,g[10]=U*C+z*P+N*I+k*O,g[11]=U*S+z*M+N*R+k*F,U=G[12],z=G[13],N=G[14],k=G[15],g[12]=U*y+z*E+N*w+k*A,g[13]=U*x+z*T+N*b+k*L,g[14]=U*C+z*P+N*I+k*O,g[15]=U*S+z*M+N*R+k*F,this},multiplyLocal:function(m){var g=this.val,y=m.val;return this.setValues(g[0]*y[0]+g[1]*y[4]+g[2]*y[8]+g[3]*y[12],g[0]*y[1]+g[1]*y[5]+g[2]*y[9]+g[3]*y[13],g[0]*y[2]+g[1]*y[6]+g[2]*y[10]+g[3]*y[14],g[0]*y[3]+g[1]*y[7]+g[2]*y[11]+g[3]*y[15],g[4]*y[0]+g[5]*y[4]+g[6]*y[8]+g[7]*y[12],g[4]*y[1]+g[5]*y[5]+g[6]*y[9]+g[7]*y[13],g[4]*y[2]+g[5]*y[6]+g[6]*y[10]+g[7]*y[14],g[4]*y[3]+g[5]*y[7]+g[6]*y[11]+g[7]*y[15],g[8]*y[0]+g[9]*y[4]+g[10]*y[8]+g[11]*y[12],g[8]*y[1]+g[9]*y[5]+g[10]*y[9]+g[11]*y[13],g[8]*y[2]+g[9]*y[6]+g[10]*y[10]+g[11]*y[14],g[8]*y[3]+g[9]*y[7]+g[10]*y[11]+g[11]*y[15],g[12]*y[0]+g[13]*y[4]+g[14]*y[8]+g[15]*y[12],g[12]*y[1]+g[13]*y[5]+g[14]*y[9]+g[15]*y[13],g[12]*y[2]+g[13]*y[6]+g[14]*y[10]+g[15]*y[14],g[12]*y[3]+g[13]*y[7]+g[14]*y[11]+g[15]*y[15])},premultiply:function(m){return this.multiplyMatrices(m,this)},multiplyMatrices:function(m,g){var y=m.val,x=g.val,C=y[0],S=y[4],E=y[8],T=y[12],P=y[1],M=y[5],w=y[9],b=y[13],I=y[2],R=y[6],A=y[10],L=y[14],O=y[3],F=y[7],G=y[11],U=y[15],z=x[0],N=x[4],k=x[8],D=x[12],V=x[1],B=x[5],W=x[9],H=x[13],Y=x[2],X=x[6],$=x[10],J=x[14],q=x[3],Q=x[7],tt=x[11],rt=x[15];return this.setValues(C*z+S*V+E*Y+T*q,P*z+M*V+w*Y+b*q,I*z+R*V+A*Y+L*q,O*z+F*V+G*Y+U*q,C*N+S*B+E*X+T*Q,P*N+M*B+w*X+b*Q,I*N+R*B+A*X+L*Q,O*N+F*B+G*X+U*Q,C*k+S*W+E*$+T*tt,P*k+M*W+w*$+b*tt,I*k+R*W+A*$+L*tt,O*k+F*W+G*$+U*tt,C*D+S*H+E*J+T*rt,P*D+M*H+w*J+b*rt,I*D+R*H+A*J+L*rt,O*D+F*H+G*J+U*rt)},translate:function(m){return this.translateXYZ(m.x,m.y,m.z)},translateXYZ:function(m,g,y){var x=this.val;return x[12]=x[0]*m+x[4]*g+x[8]*y+x[12],x[13]=x[1]*m+x[5]*g+x[9]*y+x[13],x[14]=x[2]*m+x[6]*g+x[10]*y+x[14],x[15]=x[3]*m+x[7]*g+x[11]*y+x[15],this},scale:function(m){return this.scaleXYZ(m.x,m.y,m.z)},scaleXYZ:function(m,g,y){var x=this.val;return x[0]=x[0]*m,x[1]=x[1]*m,x[2]=x[2]*m,x[3]=x[3]*m,x[4]=x[4]*g,x[5]=x[5]*g,x[6]=x[6]*g,x[7]=x[7]*g,x[8]=x[8]*y,x[9]=x[9]*y,x[10]=x[10]*y,x[11]=x[11]*y,this},makeRotationAxis:function(m,g){var y=Math.cos(g),x=Math.sin(g),C=1-y,S=m.x,E=m.y,T=m.z,P=C*S,M=C*E;return this.setValues(P*S+y,P*E-x*T,P*T+x*E,0,P*E+x*T,M*E+y,M*T-x*S,0,P*T-x*E,M*T+x*S,C*T*T+y,0,0,0,0,1)},rotate:function(m,g){var y=this.val,x=g.x,C=g.y,S=g.z,E=Math.sqrt(x*x+C*C+S*S);if(Math.abs(E)<h)return this;E=1/E,x*=E,C*=E,S*=E;var T=Math.sin(m),P=Math.cos(m),M=1-P,w=y[0],b=y[1],I=y[2],R=y[3],A=y[4],L=y[5],O=y[6],F=y[7],G=y[8],U=y[9],z=y[10],N=y[11],k=y[12],D=y[13],V=y[14],B=y[15],W=x*x*M+P,H=C*x*M+S*T,Y=S*x*M-C*T,X=x*C*M-S*T,$=C*C*M+P,J=S*C*M+x*T,q=x*S*M+C*T,Q=C*S*M-x*T,tt=S*S*M+P;return this.setValues(w*W+A*H+G*Y,b*W+L*H+U*Y,I*W+O*H+z*Y,R*W+F*H+N*Y,w*X+A*$+G*J,b*X+L*$+U*J,I*X+O*$+z*J,R*X+F*$+N*J,w*q+A*Q+G*tt,b*q+L*Q+U*tt,I*q+O*Q+z*tt,R*q+F*Q+N*tt,k,D,V,B)},rotateX:function(m){var g=this.val,y=Math.sin(m),x=Math.cos(m),C=g[4],S=g[5],E=g[6],T=g[7],P=g[8],M=g[9],w=g[10],b=g[11];return g[4]=C*x+P*y,g[5]=S*x+M*y,g[6]=E*x+w*y,g[7]=T*x+b*y,g[8]=P*x-C*y,g[9]=M*x-S*y,g[10]=w*x-E*y,g[11]=b*x-T*y,this},rotateY:function(m){var g=this.val,y=Math.sin(m),x=Math.cos(m),C=g[0],S=g[1],E=g[2],T=g[3],P=g[8],M=g[9],w=g[10],b=g[11];return g[0]=C*x-P*y,g[1]=S*x-M*y,g[2]=E*x-w*y,g[3]=T*x-b*y,g[8]=C*y+P*x,g[9]=S*y+M*x,g[10]=E*y+w*x,g[11]=T*y+b*x,this},rotateZ:function(m){var g=this.val,y=Math.sin(m),x=Math.cos(m),C=g[0],S=g[1],E=g[2],T=g[3],P=g[4],M=g[5],w=g[6],b=g[7];return g[0]=C*x+P*y,g[1]=S*x+M*y,g[2]=E*x+w*y,g[3]=T*x+b*y,g[4]=P*x-C*y,g[5]=M*x-S*y,g[6]=w*x-E*y,g[7]=b*x-T*y,this},fromRotationTranslation:function(m,g){var y=m.x,x=m.y,C=m.z,S=m.w,E=y+y,T=x+x,P=C+C,M=y*E,w=y*T,b=y*P,I=x*T,R=x*P,A=C*P,L=S*E,O=S*T,F=S*P;return this.setValues(1-(I+A),w+F,b-O,0,w-F,1-(M+A),R+L,0,b+O,R-L,1-(M+I),0,g.x,g.y,g.z,1)},fromQuat:function(m){var g=m.x,y=m.y,x=m.z,C=m.w,S=g+g,E=y+y,T=x+x,P=g*S,M=g*E,w=g*T,b=y*E,I=y*T,R=x*T,A=C*S,L=C*E,O=C*T;return this.setValues(1-(b+R),M+O,w-L,0,M-O,1-(P+R),I+A,0,w+L,I-A,1-(P+b),0,0,0,0,1)},frustum:function(m,g,y,x,C,S){var E=1/(g-m),T=1/(x-y),P=1/(C-S);return this.setValues(C*2*E,0,0,0,0,C*2*T,0,0,(g+m)*E,(x+y)*T,(S+C)*P,-1,0,0,S*C*2*P,0)},perspective:function(m,g,y,x){var C=1/Math.tan(m/2),S=1/(y-x);return this.setValues(C/g,0,0,0,0,C,0,0,0,0,(x+y)*S,-1,0,0,2*x*y*S,0)},perspectiveLH:function(m,g,y,x){return this.setValues(2*y/m,0,0,0,0,2*y/g,0,0,0,0,-x/(y-x),1,0,0,y*x/(y-x),0)},ortho:function(m,g,y,x,C,S){var E=m-g,T=y-x,P=C-S;return E=E===0?E:1/E,T=T===0?T:1/T,P=P===0?P:1/P,this.setValues(-2*E,0,0,0,0,-2*T,0,0,0,0,2*P,0,(m+g)*E,(x+y)*T,(S+C)*P,1)},lookAtRH:function(m,g,y){var x=this.val;return c.subVectors(m,g),c.lengthSq()===0&&(c.z=1),c.normalize(),d.crossVectors(y,c),d.lengthSq()===0&&(Math.abs(y.z)===1?c.x+=1e-4:c.z+=1e-4,c.normalize(),d.crossVectors(y,c)),d.normalize(),v.crossVectors(c,d),x[0]=d.x,x[1]=d.y,x[2]=d.z,x[4]=v.x,x[5]=v.y,x[6]=v.z,x[8]=c.x,x[9]=c.y,x[10]=c.z,this},lookAt:function(m,g,y){var x=m.x,C=m.y,S=m.z,E=y.x,T=y.y,P=y.z,M=g.x,w=g.y,b=g.z;if(Math.abs(x-M)<h&&Math.abs(C-w)<h&&Math.abs(S-b)<h)return this.identity();var I=x-M,R=C-w,A=S-b,L=1/Math.sqrt(I*I+R*R+A*A);I*=L,R*=L,A*=L;var O=T*A-P*R,F=P*I-E*A,G=E*R-T*I;L=Math.sqrt(O*O+F*F+G*G),L?(L=1/L,O*=L,F*=L,G*=L):(O=0,F=0,G=0);var U=R*G-A*F,z=A*O-I*G,N=I*F-R*O;return L=Math.sqrt(U*U+z*z+N*N),L?(L=1/L,U*=L,z*=L,N*=L):(U=0,z=0,N=0),this.setValues(O,U,I,0,F,z,R,0,G,N,A,0,-(O*x+F*C+G*S),-(U*x+z*C+N*S),-(I*x+R*C+A*S),1)},yawPitchRoll:function(m,g,y){this.zero(),f.zero(),l.zero();var x=this.val,C=f.val,S=l.val,E=Math.sin(y),T=Math.cos(y);return x[10]=1,x[15]=1,x[0]=T,x[1]=E,x[4]=-E,x[5]=T,E=Math.sin(g),T=Math.cos(g),C[0]=1,C[15]=1,C[5]=T,C[10]=T,C[9]=-E,C[6]=E,E=Math.sin(m),T=Math.cos(m),S[5]=1,S[15]=1,S[0]=T,S[2]=-E,S[8]=E,S[10]=T,this.multiplyLocal(f),this.multiplyLocal(l),this},setWorldMatrix:function(m,g,y,x,C){return this.yawPitchRoll(m.y,m.x,m.z),f.scaling(y.x,y.y,y.z),l.xyz(g.x,g.y,g.z),this.multiplyLocal(f),this.multiplyLocal(l),x&&this.multiplyLocal(x),C&&this.multiplyLocal(C),this},multiplyToMat4:function(m,g){var y=this.val,x=m.val,C=y[0],S=y[1],E=y[2],T=y[3],P=y[4],M=y[5],w=y[6],b=y[7],I=y[8],R=y[9],A=y[10],L=y[11],O=y[12],F=y[13],G=y[14],U=y[15],z=x[0],N=x[1],k=x[2],D=x[3],V=x[4],B=x[5],W=x[6],H=x[7],Y=x[8],X=x[9],$=x[10],J=x[11],q=x[12],Q=x[13],tt=x[14],rt=x[15];return g.setValues(z*C+N*P+k*I+D*O,N*S+N*M+k*R+D*F,k*E+N*w+k*A+D*G,D*T+N*b+k*L+D*U,V*C+B*P+W*I+H*O,V*S+B*M+W*R+H*F,V*E+B*w+W*A+H*G,V*T+B*b+W*L+H*U,Y*C+X*P+$*I+J*O,Y*S+X*M+$*R+J*F,Y*E+X*w+$*A+J*G,Y*T+X*b+$*L+J*U,q*C+Q*P+tt*I+rt*O,q*S+Q*M+tt*R+rt*F,q*E+Q*w+tt*A+rt*G,q*T+Q*b+tt*L+rt*U)},fromRotationXYTranslation:function(m,g,y){var x=g.x,C=g.y,S=g.z,E=Math.sin(m.x),T=Math.cos(m.x),P=Math.sin(m.y),M=Math.cos(m.y),w=x,b=C,I=S,R=-E,A=0-R*P,L=0-T*P,O=R*M,F=T*M;return y||(w=M*x+P*S,b=A*x+T*C+O*S,I=L*x+E*C+F*S),this.setValues(M,A,L,0,0,T,E,0,P,O,F,0,w,b,I,1)},getMaxScaleOnAxis:function(){var m=this.val,g=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],y=m[4]*m[4]+m[5]*m[5]+m[6]*m[6],x=m[8]*m[8]+m[9]*m[9]+m[10]*m[10];return Math.sqrt(Math.max(g,y,x))}}),f=new u,l=new u,d=new p,v=new p,c=new p;n.exports=u},86883:n=>{var o=function(r,a,p){return Math.min(r+a,p)};n.exports=o},50040:n=>{var o=function(r){var a=r.length;if(a===0)return 0;r.sort(function(h,u){return h-u});var p=Math.floor(a/2);return a%2===0?(r[p]+r[p-1])/2:r[p]};n.exports=o},37204:n=>{var o=function(r,a,p){return Math.max(r-a,p)};n.exports=o},65201:n=>{var o=function(r,a,p,h){p===void 0&&(p=a+1);var u=(r-a)/(p-a);return u>1?h!==void 0?(u=(h-r)/(h-p),u<0&&(u=0)):u=1:u<0&&(u=0),u};n.exports=o},15746:(n,o,r)=>{var a=r(83419),p=r(94434),h=r(29747),u=r(25836),f=1e-6,l=new Int8Array([1,2,0]),d=new Float32Array([0,0,0]),v=new u(1,0,0),c=new u(0,1,0),m=new u,g=new p,y=new a({initialize:function(C,S,E,T){this.onChangeCallback=h,this.set(C,S,E,T)},x:{get:function(){return this._x},set:function(x){this._x=x,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(x){this._y=x,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(x){this._z=x,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(x){this._w=x,this.onChangeCallback(this)}},copy:function(x){return this.set(x)},set:function(x,C,S,E,T){return T===void 0&&(T=!0),typeof x=="object"?(this._x=x.x||0,this._y=x.y||0,this._z=x.z||0,this._w=x.w||0):(this._x=x||0,this._y=C||0,this._z=S||0,this._w=E||0),T&&this.onChangeCallback(this),this},add:function(x){return this._x+=x.x,this._y+=x.y,this._z+=x.z,this._w+=x.w,this.onChangeCallback(this),this},subtract:function(x){return this._x-=x.x,this._y-=x.y,this._z-=x.z,this._w-=x.w,this.onChangeCallback(this),this},scale:function(x){return this._x*=x,this._y*=x,this._z*=x,this._w*=x,this.onChangeCallback(this),this},length:function(){var x=this.x,C=this.y,S=this.z,E=this.w;return Math.sqrt(x*x+C*C+S*S+E*E)},lengthSq:function(){var x=this.x,C=this.y,S=this.z,E=this.w;return x*x+C*C+S*S+E*E},normalize:function(){var x=this.x,C=this.y,S=this.z,E=this.w,T=x*x+C*C+S*S+E*E;return T>0&&(T=1/Math.sqrt(T),this._x=x*T,this._y=C*T,this._z=S*T,this._w=E*T),this.onChangeCallback(this),this},dot:function(x){return this.x*x.x+this.y*x.y+this.z*x.z+this.w*x.w},lerp:function(x,C){C===void 0&&(C=0);var S=this.x,E=this.y,T=this.z,P=this.w;return this.set(S+C*(x.x-S),E+C*(x.y-E),T+C*(x.z-T),P+C*(x.w-P))},rotationTo:function(x,C){var S=x.x*C.x+x.y*C.y+x.z*C.z;return S<-.999999?(m.copy(v).cross(x).length()<f&&m.copy(c).cross(x),m.normalize(),this.setAxisAngle(m,Math.PI)):S>.999999?this.set(0,0,0,1):(m.copy(x).cross(C),this._x=m.x,this._y=m.y,this._z=m.z,this._w=1+S,this.normalize())},setAxes:function(x,C,S){var E=g.val;return E[0]=C.x,E[3]=C.y,E[6]=C.z,E[1]=S.x,E[4]=S.y,E[7]=S.z,E[2]=-x.x,E[5]=-x.y,E[8]=-x.z,this.fromMat3(g).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(x,C){C=C*.5;var S=Math.sin(C);return this.set(S*x.x,S*x.y,S*x.z,Math.cos(C))},multiply:function(x){var C=this.x,S=this.y,E=this.z,T=this.w,P=x.x,M=x.y,w=x.z,b=x.w;return this.set(C*b+T*P+S*w-E*M,S*b+T*M+E*P-C*w,E*b+T*w+C*M-S*P,T*b-C*P-S*M-E*w)},slerp:function(x,C){var S=this.x,E=this.y,T=this.z,P=this.w,M=x.x,w=x.y,b=x.z,I=x.w,R=S*M+E*w+T*b+P*I;R<0&&(R=-R,M=-M,w=-w,b=-b,I=-I);var A=1-C,L=C;if(1-R>f){var O=Math.acos(R),F=Math.sin(O);A=Math.sin((1-C)*O)/F,L=Math.sin(C*O)/F}return this.set(A*S+L*M,A*E+L*w,A*T+L*b,A*P+L*I)},invert:function(){var x=this.x,C=this.y,S=this.z,E=this.w,T=x*x+C*C+S*S+E*E,P=T?1/T:0;return this.set(-x*P,-C*P,-S*P,E*P)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(x){x*=.5;var C=this.x,S=this.y,E=this.z,T=this.w,P=Math.sin(x),M=Math.cos(x);return this.set(C*M+T*P,S*M+E*P,E*M-S*P,T*M-C*P)},rotateY:function(x){x*=.5;var C=this.x,S=this.y,E=this.z,T=this.w,P=Math.sin(x),M=Math.cos(x);return this.set(C*M-E*P,S*M+T*P,E*M+C*P,T*M-S*P)},rotateZ:function(x){x*=.5;var C=this.x,S=this.y,E=this.z,T=this.w,P=Math.sin(x),M=Math.cos(x);return this.set(C*M+S*P,S*M-C*P,E*M+T*P,T*M-E*P)},calculateW:function(){var x=this.x,C=this.y,S=this.z;return this.w=-Math.sqrt(1-x*x-C*C-S*S),this},setFromEuler:function(x,C){var S=x.x/2,E=x.y/2,T=x.z/2,P=Math.cos(S),M=Math.cos(E),w=Math.cos(T),b=Math.sin(S),I=Math.sin(E),R=Math.sin(T);switch(x.order){case"XYZ":{this.set(b*M*w+P*I*R,P*I*w-b*M*R,P*M*R+b*I*w,P*M*w-b*I*R,C);break}case"YXZ":{this.set(b*M*w+P*I*R,P*I*w-b*M*R,P*M*R-b*I*w,P*M*w+b*I*R,C);break}case"ZXY":{this.set(b*M*w-P*I*R,P*I*w+b*M*R,P*M*R+b*I*w,P*M*w-b*I*R,C);break}case"ZYX":{this.set(b*M*w-P*I*R,P*I*w+b*M*R,P*M*R-b*I*w,P*M*w+b*I*R,C);break}case"YZX":{this.set(b*M*w+P*I*R,P*I*w+b*M*R,P*M*R-b*I*w,P*M*w-b*I*R,C);break}case"XZY":{this.set(b*M*w-P*I*R,P*I*w-b*M*R,P*M*R+b*I*w,P*M*w+b*I*R,C);break}}return this},setFromRotationMatrix:function(x){var C=x.val,S=C[0],E=C[4],T=C[8],P=C[1],M=C[5],w=C[9],b=C[2],I=C[6],R=C[10],A=S+M+R,L;return A>0?(L=.5/Math.sqrt(A+1),this.set((I-w)*L,(T-b)*L,(P-E)*L,.25/L)):S>M&&S>R?(L=2*Math.sqrt(1+S-M-R),this.set(.25*L,(E+P)/L,(T+b)/L,(I-w)/L)):M>R?(L=2*Math.sqrt(1+M-S-R),this.set((E+P)/L,.25*L,(w+I)/L,(T-b)/L)):(L=2*Math.sqrt(1+R-S-M),this.set((T+b)/L,(w+I)/L,.25*L,(P-E)/L)),this},fromMat3:function(x){var C=x.val,S=C[0]+C[4]+C[8],E;if(S>0)E=Math.sqrt(S+1),this.w=.5*E,E=.5/E,this._x=(C[7]-C[5])*E,this._y=(C[2]-C[6])*E,this._z=(C[3]-C[1])*E;else{var T=0;C[4]>C[0]&&(T=1),C[8]>C[T*3+T]&&(T=2);var P=l[T],M=l[P];E=Math.sqrt(C[T*3+T]-C[P*3+P]-C[M*3+M]+1),d[T]=.5*E,E=.5/E,d[P]=(C[P*3+T]+C[T*3+P])*E,d[M]=(C[M*3+T]+C[T*3+M])*E,this._x=d[0],this._y=d[1],this._z=d[2],this._w=(C[M*3+P]-C[P*3+M])*E}return this.onChangeCallback(this),this}});n.exports=y},43396:(n,o,r)=>{var a=r(36383),p=function(h){return h*a.RAD_TO_DEG};n.exports=p},74362:n=>{var o=function(r,a){a===void 0&&(a=1);var p=Math.random()*2*Math.PI;return r.x=Math.cos(p)*a,r.y=Math.sin(p)*a,r};n.exports=o},60706:n=>{var o=function(r,a){a===void 0&&(a=1);var p=Math.random()*2*Math.PI,h=Math.random()*2-1,u=Math.sqrt(1-h*h)*a;return r.x=Math.cos(p)*u,r.y=Math.sin(p)*u,r.z=h*a,r};n.exports=o},67421:n=>{var o=function(r,a){return a===void 0&&(a=1),r.x=(Math.random()*2-1)*a,r.y=(Math.random()*2-1)*a,r.z=(Math.random()*2-1)*a,r.w=(Math.random()*2-1)*a,r};n.exports=o},36305:n=>{var o=function(r,a){var p=r.x,h=r.y;return r.x=p*Math.cos(a)-h*Math.sin(a),r.y=p*Math.sin(a)+h*Math.cos(a),r};n.exports=o},11520:n=>{var o=function(r,a,p,h){var u=Math.cos(h),f=Math.sin(h),l=r.x-a,d=r.y-p;return r.x=l*u-d*f+a,r.y=l*f+d*u+p,r};n.exports=o},1163:n=>{var o=function(r,a,p,h,u){var f=h+Math.atan2(r.y-p,r.x-a);return r.x=a+u*Math.cos(f),r.y=p+u*Math.sin(f),r};n.exports=o},70336:n=>{var o=function(r,a,p,h,u){return r.x=a+u*Math.cos(h),r.y=p+u*Math.sin(h),r};n.exports=o},72678:(n,o,r)=>{var a=r(25836),p=r(37867),h=r(15746),u=new p,f=new h,l=new a,d=function(v,c,m){return f.setAxisAngle(c,m),u.fromRotationTranslation(f,l.set(0,0,0)),v.transformMat4(u)};n.exports=d},2284:n=>{var o=function(r){return r>0?Math.ceil(r):Math.floor(r)};n.exports=o},41013:n=>{var o=function(r,a,p){a===void 0&&(a=0),p===void 0&&(p=10);var h=Math.pow(p,-a);return Math.round(r*h)/h};n.exports=o},16922:n=>{var o=function(r,a,p,h){a===void 0&&(a=1),p===void 0&&(p=1),h===void 0&&(h=1),h*=Math.PI/r;for(var u=[],f=[],l=0;l<r;l++)p-=a*h,a+=p*h,u[l]=p,f[l]=a;return{sin:f,cos:u,length:r}};n.exports=o},7602:n=>{var o=function(r,a,p){return r<=a?0:r>=p?1:(r=(r-a)/(p-a),r*r*(3-2*r))};n.exports=o},54261:n=>{var o=function(r,a,p){return r=Math.max(0,Math.min(1,(r-a)/(p-a))),r*r*r*(r*(r*6-15)+10)};n.exports=o},44408:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l){l===void 0&&(l=new a);var d=0,v=0,c=u*f;return h>0&&h<=c&&(h>u-1?(v=Math.floor(h/u),d=h-v*u):d=h),l.set(d,v)};n.exports=p},85955:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d,v,c,m){m===void 0&&(m=new a);var g=Math.sin(d),y=Math.cos(d),x=y*v,C=g*v,S=-g*c,E=y*c,T=1/(x*E+S*-C);return m.x=E*T*h+-S*T*u+(l*S-f*E)*T,m.y=x*T*u+-C*T*h+(-l*x+f*C)*T,m};n.exports=p},26099:(n,o,r)=>{var a=r(83419),p=r(43855),h=new a({initialize:function(f,l){this.x=0,this.y=0,typeof f=="object"?(this.x=f.x||0,this.y=f.y||0):(l===void 0&&(l=f),this.x=f||0,this.y=l||0)},clone:function(){return new h(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,f){return f===void 0&&(f=u),this.x=u,this.y=f,this},setTo:function(u,f){return this.set(u,f)},setToPolar:function(u,f){return f==null&&(f=1),this.x=Math.cos(u)*f,this.y=Math.sin(u)*f,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,f){return p(this.x,u.x,f)&&p(this.y,u.y,f)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var f=u.x-this.x,l=u.y-this.y;return Math.sqrt(f*f+l*l)},distanceSq:function(u){var f=u.x-this.x,l=u.y-this.y;return f*f+l*l},length:function(){var u=this.x,f=this.y;return Math.sqrt(u*u+f*f)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,f=this.y;return u*u+f*f},normalize:function(){var u=this.x,f=this.y,l=u*u+f*f;return l>0&&(l=1/Math.sqrt(l),this.x=u*l,this.y=f*l),this},normalizeRightHand:function(){var u=this.x;return this.x=this.y*-1,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=u*-1,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,f){f===void 0&&(f=0);var l=this.x,d=this.y;return this.x=l+f*(u.x-l),this.y=d+f*(u.y-d),this},transformMat3:function(u){var f=this.x,l=this.y,d=u.val;return this.x=d[0]*f+d[3]*l+d[6],this.y=d[1]*f+d[4]*l+d[7],this},transformMat4:function(u){var f=this.x,l=this.y,d=u.val;return this.x=d[0]*f+d[4]*l+d[12],this.y=d[1]*f+d[5]*l+d[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var f=this.length();return f&&f>u&&this.scale(u/f),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var f=Math.cos(u),l=Math.sin(u);return this.set(f*this.x-l*this.y,l*this.x+f*this.y)},project:function(u){var f=this.dot(u)/u.dot(u);return this.copy(u).scale(f)}});h.ZERO=new h,h.RIGHT=new h(1,0),h.LEFT=new h(-1,0),h.UP=new h(0,-1),h.DOWN=new h(0,1),h.ONE=new h(1,1),n.exports=h},25836:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l){this.x=0,this.y=0,this.z=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0):(this.x=u||0,this.y=f||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(h){return this.x=Math.min(this.x,h.x),this.y=Math.min(this.y,h.y),this.z=Math.min(this.z,h.z),this},max:function(h){return this.x=Math.max(this.x,h.x),this.y=Math.max(this.y,h.y),this.z=Math.max(this.z,h.z),this},clone:function(){return new p(this.x,this.y,this.z)},addVectors:function(h,u){return this.x=h.x+u.x,this.y=h.y+u.y,this.z=h.z+u.z,this},subVectors:function(h,u){return this.x=h.x-u.x,this.y=h.y-u.y,this.z=h.z-u.z,this},crossVectors:function(h,u){var f=h.x,l=h.y,d=h.z,v=u.x,c=u.y,m=u.z;return this.x=l*m-d*c,this.y=d*v-f*m,this.z=f*c-l*v,this},equals:function(h){return this.x===h.x&&this.y===h.y&&this.z===h.z},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z||0,this},set:function(h,u,f){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=u||0,this.z=f||0),this},setFromMatrixPosition:function(h){return this.fromArray(h.val,12)},setFromMatrixColumn:function(h,u){return this.fromArray(h.val,u*4)},fromArray:function(h,u){return u===void 0&&(u=0),this.x=h[u],this.y=h[u+1],this.z=h[u+2],this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z||0,this},addScalar:function(h){return this.x+=h,this.y+=h,this.z+=h,this},addScale:function(h,u){return this.x+=h.x*u,this.y+=h.y*u,this.z+=h.z*u||0,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z||0,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this.z*=h.z||1,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h,this.z*=h):(this.x=0,this.y=0,this.z=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this.z/=h.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(h){var u=h.x-this.x,f=h.y-this.y,l=h.z-this.z||0;return Math.sqrt(u*u+f*f+l*l)},distanceSq:function(h){var u=h.x-this.x,f=h.y-this.y,l=h.z-this.z||0;return u*u+f*f+l*l},length:function(){var h=this.x,u=this.y,f=this.z;return Math.sqrt(h*h+u*u+f*f)},lengthSq:function(){var h=this.x,u=this.y,f=this.z;return h*h+u*u+f*f},normalize:function(){var h=this.x,u=this.y,f=this.z,l=h*h+u*u+f*f;return l>0&&(l=1/Math.sqrt(l),this.x=h*l,this.y=u*l,this.z=f*l),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z},cross:function(h){var u=this.x,f=this.y,l=this.z,d=h.x,v=h.y,c=h.z;return this.x=f*c-l*v,this.y=l*d-u*c,this.z=u*v-f*d,this},lerp:function(h,u){u===void 0&&(u=0);var f=this.x,l=this.y,d=this.z;return this.x=f+u*(h.x-f),this.y=l+u*(h.y-l),this.z=d+u*(h.z-d),this},applyMatrix3:function(h){var u=this.x,f=this.y,l=this.z,d=h.val;return this.x=d[0]*u+d[3]*f+d[6]*l,this.y=d[1]*u+d[4]*f+d[7]*l,this.z=d[2]*u+d[5]*f+d[8]*l,this},applyMatrix4:function(h){var u=this.x,f=this.y,l=this.z,d=h.val,v=1/(d[3]*u+d[7]*f+d[11]*l+d[15]);return this.x=(d[0]*u+d[4]*f+d[8]*l+d[12])*v,this.y=(d[1]*u+d[5]*f+d[9]*l+d[13])*v,this.z=(d[2]*u+d[6]*f+d[10]*l+d[14])*v,this},transformMat3:function(h){var u=this.x,f=this.y,l=this.z,d=h.val;return this.x=u*d[0]+f*d[3]+l*d[6],this.y=u*d[1]+f*d[4]+l*d[7],this.z=u*d[2]+f*d[5]+l*d[8],this},transformMat4:function(h){var u=this.x,f=this.y,l=this.z,d=h.val;return this.x=d[0]*u+d[4]*f+d[8]*l+d[12],this.y=d[1]*u+d[5]*f+d[9]*l+d[13],this.z=d[2]*u+d[6]*f+d[10]*l+d[14],this},transformCoordinates:function(h){var u=this.x,f=this.y,l=this.z,d=h.val,v=u*d[0]+f*d[4]+l*d[8]+d[12],c=u*d[1]+f*d[5]+l*d[9]+d[13],m=u*d[2]+f*d[6]+l*d[10]+d[14],g=u*d[3]+f*d[7]+l*d[11]+d[15];return this.x=v/g,this.y=c/g,this.z=m/g,this},transformQuat:function(h){var u=this.x,f=this.y,l=this.z,d=h.x,v=h.y,c=h.z,m=h.w,g=m*u+v*l-c*f,y=m*f+c*u-d*l,x=m*l+d*f-v*u,C=-d*u-v*f-c*l;return this.x=g*m+C*-d+y*-c-x*-v,this.y=y*m+C*-v+x*-d-g*-c,this.z=x*m+C*-c+g*-v-y*-d,this},project:function(h){var u=this.x,f=this.y,l=this.z,d=h.val,v=d[0],c=d[1],m=d[2],g=d[3],y=d[4],x=d[5],C=d[6],S=d[7],E=d[8],T=d[9],P=d[10],M=d[11],w=d[12],b=d[13],I=d[14],R=d[15],A=1/(u*g+f*S+l*M+R);return this.x=(u*v+f*y+l*E+w)*A,this.y=(u*c+f*x+l*T+b)*A,this.z=(u*m+f*C+l*P+I)*A,this},projectViewMatrix:function(h,u){return this.applyMatrix4(h).applyMatrix4(u)},unprojectViewMatrix:function(h,u){return this.applyMatrix4(h).applyMatrix4(u)},unproject:function(h,u){var f=h.x,l=h.y,d=h.z,v=h.w,c=this.x-f,m=v-this.y-1-l,g=this.z;return this.x=2*c/d-1,this.y=2*m/v-1,this.z=2*g-1,this.project(u)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});p.ZERO=new p,p.RIGHT=new p(1,0,0),p.LEFT=new p(-1,0,0),p.UP=new p(0,-1,0),p.DOWN=new p(0,1,0),p.FORWARD=new p(0,0,1),p.BACK=new p(0,0,-1),p.ONE=new p(1,1,1),n.exports=p},61369:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d){this.x=0,this.y=0,this.z=0,this.w=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0,this.z=u.z||0,this.w=u.w||0):(this.x=u||0,this.y=f||0,this.z=l||0,this.w=d||0)},clone:function(){return new p(this.x,this.y,this.z,this.w)},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z||0,this.w=h.w||0,this},equals:function(h){return this.x===h.x&&this.y===h.y&&this.z===h.z&&this.w===h.w},set:function(h,u,f,l){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=u||0,this.z=f||0,this.w=l||0),this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z||0,this.w+=h.w||0,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z||0,this.w-=h.w||0,this},scale:function(h){return this.x*=h,this.y*=h,this.z*=h,this.w*=h,this},length:function(){var h=this.x,u=this.y,f=this.z,l=this.w;return Math.sqrt(h*h+u*u+f*f+l*l)},lengthSq:function(){var h=this.x,u=this.y,f=this.z,l=this.w;return h*h+u*u+f*f+l*l},normalize:function(){var h=this.x,u=this.y,f=this.z,l=this.w,d=h*h+u*u+f*f+l*l;return d>0&&(d=1/Math.sqrt(d),this.x=h*d,this.y=u*d,this.z=f*d,this.w=l*d),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z+this.w*h.w},lerp:function(h,u){u===void 0&&(u=0);var f=this.x,l=this.y,d=this.z,v=this.w;return this.x=f+u*(h.x-f),this.y=l+u*(h.y-l),this.z=d+u*(h.z-d),this.w=v+u*(h.w-v),this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this.z*=h.z||1,this.w*=h.w||1,this},divide:function(h){return this.x/=h.x,this.y/=h.y,this.z/=h.z||1,this.w/=h.w||1,this},distance:function(h){var u=h.x-this.x,f=h.y-this.y,l=h.z-this.z||0,d=h.w-this.w||0;return Math.sqrt(u*u+f*f+l*l+d*d)},distanceSq:function(h){var u=h.x-this.x,f=h.y-this.y,l=h.z-this.z||0,d=h.w-this.w||0;return u*u+f*f+l*l+d*d},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(h){var u=this.x,f=this.y,l=this.z,d=this.w,v=h.val;return this.x=v[0]*u+v[4]*f+v[8]*l+v[12]*d,this.y=v[1]*u+v[5]*f+v[9]*l+v[13]*d,this.z=v[2]*u+v[6]*f+v[10]*l+v[14]*d,this.w=v[3]*u+v[7]*f+v[11]*l+v[15]*d,this},transformQuat:function(h){var u=this.x,f=this.y,l=this.z,d=h.x,v=h.y,c=h.z,m=h.w,g=m*u+v*l-c*f,y=m*f+c*u-d*l,x=m*l+d*f-v*u,C=-d*u-v*f-c*l;return this.x=g*m+C*-d+y*-c-x*-v,this.y=y*m+C*-v+x*-d-g*-c,this.z=x*m+C*-c+g*-v-y*-d,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});p.prototype.sub=p.prototype.subtract,p.prototype.mul=p.prototype.multiply,p.prototype.div=p.prototype.divide,p.prototype.dist=p.prototype.distance,p.prototype.distSq=p.prototype.distanceSq,p.prototype.len=p.prototype.length,p.prototype.lenSq=p.prototype.lengthSq,n.exports=p},60417:n=>{var o=function(r,a,p){return Math.abs(r-a)<=p};n.exports=o},15994:n=>{var o=function(r,a,p){var h=p-a;return a+((r-a)%h+h)%h};n.exports=o},31040:n=>{var o=function(r,a,p,h){return Math.atan2(h-a,p-r)};n.exports=o},55495:n=>{var o=function(r,a){return Math.atan2(a.y-r.y,a.x-r.x)};n.exports=o},128:n=>{var o=function(r,a){return Math.atan2(a.x-r.x,a.y-r.y)};n.exports=o},41273:n=>{var o=function(r,a,p,h){return Math.atan2(p-r,h-a)};n.exports=o},1432:(n,o,r)=>{var a=r(36383),p=function(h){return h>Math.PI&&(h-=a.PI2),Math.abs(((h+a.TAU)%a.PI2-a.PI2)%a.PI2)};n.exports=p},49127:(n,o,r)=>{var a=r(12407),p=function(h,u){return a(u-h)};n.exports=p},52285:(n,o,r)=>{var a=r(12407),p=2*Math.PI,h=function(u,f){var l=a(f-u);return l>0&&(l-=p),l};n.exports=h},67317:(n,o,r)=>{var a=r(86554),p=function(h,u){return a(u-h)};n.exports=p},12407:n=>{var o=function(r){return r=r%(2*Math.PI),r>=0?r:r+2*Math.PI};n.exports=o},53993:(n,o,r)=>{var a=r(99472),p=function(){return a(-Math.PI,Math.PI)};n.exports=p},86564:(n,o,r)=>{var a=r(99472),p=function(){return a(-180,180)};n.exports=p},90154:(n,o,r)=>{var a=r(12407),p=function(h){return a(h+Math.PI)};n.exports=p},48736:(n,o,r)=>{var a=r(36383),p=function(h,u,f){return f===void 0&&(f=.05),h===u||(Math.abs(u-h)<=f||Math.abs(u-h)>=a.PI2-f?h=u:(Math.abs(u-h)>Math.PI&&(u<h?u+=a.PI2:u-=a.PI2),u>h?h+=f:u<h&&(h-=f))),h};n.exports=p},61430:n=>{var o=function(r,a){var p=a-r;if(p===0)return 0;var h=Math.floor((p- -180)/360);return p-h*360};n.exports=o},86554:(n,o,r)=>{var a=r(15994),p=function(h){return a(h,-Math.PI,Math.PI)};n.exports=p},30954:(n,o,r)=>{var a=r(15994),p=function(h){return a(h,-180,180)};n.exports=p},25588:(n,o,r)=>{n.exports={Between:r(31040),BetweenPoints:r(55495),BetweenPointsY:r(128),BetweenY:r(41273),CounterClockwise:r(1432),GetClockwiseDistance:r(49127),GetCounterClockwiseDistance:r(52285),GetShortestDistance:r(67317),Normalize:r(12407),Random:r(53993),RandomDegrees:r(86564),Reverse:r(90154),RotateTo:r(48736),ShortestBetween:r(61430),Wrap:r(86554),WrapDegrees:r(30954)}},36383:n=>{var o={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};n.exports=o},20339:n=>{var o=function(r,a,p,h){var u=r-p,f=a-h;return Math.sqrt(u*u+f*f)};n.exports=o},52816:n=>{var o=function(r,a){var p=r.x-a.x,h=r.y-a.y;return Math.sqrt(p*p+h*h)};n.exports=o},64559:n=>{var o=function(r,a){var p=r.x-a.x,h=r.y-a.y;return p*p+h*h};n.exports=o},82340:n=>{var o=function(r,a,p,h){return Math.max(Math.abs(r-p),Math.abs(a-h))};n.exports=o},14390:n=>{var o=function(r,a,p,h,u){return u===void 0&&(u=2),Math.sqrt(Math.pow(p-r,u)+Math.pow(h-a,u))};n.exports=o},2243:n=>{var o=function(r,a,p,h){return Math.abs(r-p)+Math.abs(a-h)};n.exports=o},89774:n=>{var o=function(r,a,p,h){var u=r-p,f=a-h;return u*u+f*f};n.exports=o},50994:(n,o,r)=>{n.exports={Between:r(20339),BetweenPoints:r(52816),BetweenPointsSquared:r(64559),Chebyshev:r(82340),Power:r(14390),Snake:r(2243),Squared:r(89774)}},62640:(n,o,r)=>{var a=r(54178),p=r(41521),h=r(79980),u=r(85433),f=r(99140),l=r(48857),d=r(81596),v=r(59133),c=r(98516),m=r(35248),g=r(82500),y=r(49752);n.exports={Power0:d,Power1:v.Out,Power2:u.Out,Power3:c.Out,Power4:m.Out,Linear:d,Quad:v.Out,Cubic:u.Out,Quart:c.Out,Quint:m.Out,Sine:g.Out,Expo:l.Out,Circ:h.Out,Elastic:f.Out,Back:a.Out,Bounce:p.Out,Stepped:y,"Quad.easeIn":v.In,"Cubic.easeIn":u.In,"Quart.easeIn":c.In,"Quint.easeIn":m.In,"Sine.easeIn":g.In,"Expo.easeIn":l.In,"Circ.easeIn":h.In,"Elastic.easeIn":f.In,"Back.easeIn":a.In,"Bounce.easeIn":p.In,"Quad.easeOut":v.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":c.Out,"Quint.easeOut":m.Out,"Sine.easeOut":g.Out,"Expo.easeOut":l.Out,"Circ.easeOut":h.Out,"Elastic.easeOut":f.Out,"Back.easeOut":a.Out,"Bounce.easeOut":p.Out,"Quad.easeInOut":v.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":c.InOut,"Quint.easeInOut":m.InOut,"Sine.easeInOut":g.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":h.InOut,"Elastic.easeInOut":f.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":p.InOut}},1639:n=>{var o=function(r,a){return a===void 0&&(a=1.70158),r*r*((a+1)*r-a)};n.exports=o},50099:n=>{var o=function(r,a){a===void 0&&(a=1.70158);var p=a*1.525;return(r*=2)<1?.5*(r*r*((p+1)*r-p)):.5*((r-=2)*r*((p+1)*r+p)+2)};n.exports=o},41286:n=>{var o=function(r,a){return a===void 0&&(a=1.70158),--r*r*((a+1)*r+a)+1};n.exports=o},54178:(n,o,r)=>{n.exports={In:r(1639),Out:r(41286),InOut:r(50099)}},59590:n=>{var o=function(r){return r=1-r,r<.36363636363636365?1-7.5625*r*r:r<.7272727272727273?1-(7.5625*(r-=.5454545454545454)*r+.75):r<.9090909090909091?1-(7.5625*(r-=.8181818181818182)*r+.9375):1-(7.5625*(r-=.9545454545454546)*r+.984375)};n.exports=o},41788:n=>{var o=function(r){var a=!1;return r<.5?(r=1-r*2,a=!0):r=r*2-1,r<.36363636363636365?r=7.5625*r*r:r<.7272727272727273?r=7.5625*(r-=.5454545454545454)*r+.75:r<.9090909090909091?r=7.5625*(r-=.8181818181818182)*r+.9375:r=7.5625*(r-=.9545454545454546)*r+.984375,a?(1-r)*.5:r*.5+.5};n.exports=o},69905:n=>{var o=function(r){return r<.36363636363636365?7.5625*r*r:r<.7272727272727273?7.5625*(r-=.5454545454545454)*r+.75:r<.9090909090909091?7.5625*(r-=.8181818181818182)*r+.9375:7.5625*(r-=.9545454545454546)*r+.984375};n.exports=o},41521:(n,o,r)=>{n.exports={In:r(59590),Out:r(69905),InOut:r(41788)}},91861:n=>{var o=function(r){return 1-Math.sqrt(1-r*r)};n.exports=o},4177:n=>{var o=function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)};n.exports=o},57512:n=>{var o=function(r){return Math.sqrt(1- --r*r)};n.exports=o},79980:(n,o,r)=>{n.exports={In:r(91861),Out:r(57512),InOut:r(4177)}},51150:n=>{var o=function(r){return r*r*r};n.exports=o},82820:n=>{var o=function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)};n.exports=o},35033:n=>{var o=function(r){return--r*r*r+1};n.exports=o},85433:(n,o,r)=>{n.exports={In:r(51150),Out:r(35033),InOut:r(82820)}},69965:n=>{var o=function(r,a,p){if(a===void 0&&(a=.1),p===void 0&&(p=.1),r===0)return 0;if(r===1)return 1;var h=p/4;return a<1?a=1:h=p*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(r-=1))*Math.sin((r-h)*(2*Math.PI)/p))};n.exports=o},50665:n=>{var o=function(r,a,p){if(a===void 0&&(a=.1),p===void 0&&(p=.1),r===0)return 0;if(r===1)return 1;var h=p/4;return a<1?a=1:h=p*Math.asin(1/a)/(2*Math.PI),(r*=2)<1?-.5*(a*Math.pow(2,10*(r-=1))*Math.sin((r-h)*(2*Math.PI)/p)):a*Math.pow(2,-10*(r-=1))*Math.sin((r-h)*(2*Math.PI)/p)*.5+1};n.exports=o},7744:n=>{var o=function(r,a,p){if(a===void 0&&(a=.1),p===void 0&&(p=.1),r===0)return 0;if(r===1)return 1;var h=p/4;return a<1?a=1:h=p*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*r)*Math.sin((r-h)*(2*Math.PI)/p)+1};n.exports=o},99140:(n,o,r)=>{n.exports={In:r(69965),Out:r(7744),InOut:r(50665)}},24590:n=>{var o=function(r){return Math.pow(2,10*(r-1))-.001};n.exports=o},87844:n=>{var o=function(r){return(r*=2)<1?.5*Math.pow(2,10*(r-1)):.5*(2-Math.pow(2,-10*(r-1)))};n.exports=o},89433:n=>{var o=function(r){return 1-Math.pow(2,-10*r)};n.exports=o},48857:(n,o,r)=>{n.exports={In:r(24590),Out:r(89433),InOut:r(87844)}},48820:(n,o,r)=>{n.exports={Back:r(54178),Bounce:r(41521),Circular:r(79980),Cubic:r(85433),Elastic:r(99140),Expo:r(48857),Linear:r(81596),Quadratic:r(59133),Quartic:r(98516),Quintic:r(35248),Sine:r(82500),Stepped:r(49752)}},7147:n=>{var o=function(r){return r};n.exports=o},81596:(n,o,r)=>{n.exports=r(7147)},34826:n=>{var o=function(r){return r*r};n.exports=o},20544:n=>{var o=function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)};n.exports=o},92029:n=>{var o=function(r){return r*(2-r)};n.exports=o},59133:(n,o,r)=>{n.exports={In:r(34826),Out:r(92029),InOut:r(20544)}},64413:n=>{var o=function(r){return r*r*r*r};n.exports=o},78137:n=>{var o=function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)};n.exports=o},45840:n=>{var o=function(r){return 1- --r*r*r*r};n.exports=o},98516:(n,o,r)=>{n.exports={In:r(64413),Out:r(45840),InOut:r(78137)}},87745:n=>{var o=function(r){return r*r*r*r*r};n.exports=o},16509:n=>{var o=function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)};n.exports=o},17868:n=>{var o=function(r){return--r*r*r*r*r+1};n.exports=o},35248:(n,o,r)=>{n.exports={In:r(87745),Out:r(17868),InOut:r(16509)}},80461:n=>{var o=function(r){return r===0?0:r===1?1:1-Math.cos(r*Math.PI/2)};n.exports=o},34025:n=>{var o=function(r){return r===0?0:r===1?1:.5*(1-Math.cos(Math.PI*r))};n.exports=o},52768:n=>{var o=function(r){return r===0?0:r===1?1:Math.sin(r*Math.PI/2)};n.exports=o},82500:(n,o,r)=>{n.exports={In:r(80461),Out:r(52768),InOut:r(34025)}},72251:n=>{var o=function(r,a){return a===void 0&&(a=1),r<=0?0:r>=1?1:((a*r|0)+1)*(1/a)};n.exports=o},49752:(n,o,r)=>{n.exports=r(72251)},75698:n=>{var o=function(r,a){return a===void 0&&(a=1e-4),Math.ceil(r-a)};n.exports=o},43855:n=>{var o=function(r,a,p){return p===void 0&&(p=1e-4),Math.abs(r-a)<p};n.exports=o},25777:n=>{var o=function(r,a){return a===void 0&&(a=1e-4),Math.floor(r+a)};n.exports=o},5470:n=>{var o=function(r,a,p){return p===void 0&&(p=1e-4),r>a-p};n.exports=o},94977:n=>{var o=function(r,a,p){return p===void 0&&(p=1e-4),r<a+p};n.exports=o},48379:(n,o,r)=>{n.exports={Ceil:r(75698),Equal:r(43855),Floor:r(25777),GreaterThan:r(5470),LessThan:r(94977)}},75508:(n,o,r)=>{var a=r(36383),p=r(79291),h={Angle:r(25588),Distance:r(50994),Easing:r(48820),Fuzzy:r(48379),Interpolation:r(38289),Pow2:r(49001),Snap:r(73697),RandomDataGenerator:r(28453),Average:r(53307),Bernstein:r(85710),Between:r(30976),CatmullRom:r(87842),CeilTo:r(26302),Clamp:r(45319),DegToRad:r(39506),Difference:r(61241),Euler:r(38857),Factorial:r(6411),FloatBetween:r(99472),FloorTo:r(77623),FromPercent:r(62945),GetSpeed:r(38265),IsEven:r(78702),IsEvenStrict:r(94883),Linear:r(28915),LinearXY:r(94908),MaxAdd:r(86883),Median:r(50040),MinSub:r(37204),Percent:r(65201),RadToDeg:r(43396),RandomXY:r(74362),RandomXYZ:r(60706),RandomXYZW:r(67421),Rotate:r(36305),RotateAround:r(11520),RotateAroundDistance:r(1163),RotateTo:r(70336),RoundAwayFromZero:r(2284),RoundTo:r(41013),SinCosTableGenerator:r(16922),SmootherStep:r(54261),SmoothStep:r(7602),ToXY:r(44408),TransformXY:r(85955),Within:r(60417),Wrap:r(15994),Vector2:r(26099),Vector3:r(25836),Vector4:r(61369),Matrix3:r(94434),Matrix4:r(37867),Quaternion:r(15746),RotateVec3:r(72678)};h=p(!1,h,a),n.exports=h},89318:(n,o,r)=>{var a=r(85710),p=function(h,u){for(var f=0,l=h.length-1,d=0;d<=l;d++)f+=Math.pow(1-u,l-d)*Math.pow(u,d)*h[d]*a(l,d);return f};n.exports=p},77259:(n,o,r)=>{var a=r(87842),p=function(h,u){var f=h.length-1,l=f*u,d=Math.floor(l);return h[0]===h[f]?(u<0&&(d=Math.floor(l=f*(1+u))),a(l-d,h[(d-1+f)%f],h[d],h[(d+1)%f],h[(d+2)%f])):u<0?h[0]-(a(-l,h[0],h[0],h[1],h[1])-h[0]):u>1?h[f]-(a(l-f,h[f],h[f],h[f-1],h[f-1])-h[f]):a(l-d,h[d?d-1:0],h[d],h[f<d+1?f:d+1],h[f<d+2?f:d+2])};n.exports=p},36316:n=>{function o(u,f){var l=1-u;return l*l*l*f}function r(u,f){var l=1-u;return 3*l*l*u*f}function a(u,f){return 3*(1-u)*u*u*f}function p(u,f){return u*u*u*f}var h=function(u,f,l,d,v){return o(u,f)+r(u,l)+a(u,d)+p(u,v)};n.exports=h},28392:(n,o,r)=>{var a=r(28915),p=function(h,u){var f=h.length-1,l=f*u,d=Math.floor(l);return u<0?a(h[0],h[1],l):u>1?a(h[f],h[f-1],f-l):a(h[d],h[d+1>f?f:d+1],l-d)};n.exports=p},32112:n=>{function o(h,u){var f=1-h;return f*f*u}function r(h,u){return 2*(1-h)*h*u}function a(h,u){return h*h*u}var p=function(h,u,f,l){return o(h,u)+r(h,f)+a(h,l)};n.exports=p},47235:(n,o,r)=>{var a=r(7602),p=function(h,u,f){return u+(f-u)*a(h,0,1)};n.exports=p},50178:(n,o,r)=>{var a=r(54261),p=function(h,u,f){return u+(f-u)*a(h,0,1)};n.exports=p},38289:(n,o,r)=>{n.exports={Bezier:r(89318),CatmullRom:r(77259),CubicBezier:r(36316),Linear:r(28392),QuadraticBezier:r(32112),SmoothStep:r(47235),SmootherStep:r(50178)}},98439:n=>{var o=function(r){var a=Math.log(r)/.6931471805599453;return 1<<Math.ceil(a)};n.exports=o},50030:n=>{var o=function(r,a){return r>0&&(r&r-1)===0&&a>0&&(a&a-1)===0};n.exports=o},81230:n=>{var o=function(r){return r>0&&(r&r-1)===0};n.exports=o},49001:(n,o,r)=>{n.exports={GetNext:r(98439),IsSize:r(50030),IsValue:r(81230)}},28453:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u){u===void 0&&(u=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],u&&this.init(u)},rnd:function(){var h=2091639*this.s0+this.c*23283064365386963e-26;return this.c=h|0,this.s0=this.s1,this.s1=this.s2,this.s2=h-this.c,this.s2},hash:function(h){var u,f=this.n;h=h.toString();for(var l=0;l<h.length;l++)f+=h.charCodeAt(l),u=.02519603282416938*f,f=u>>>0,u-=f,u*=f,f=u>>>0,u-=f,f+=u*4294967296;return this.n=f,(f>>>0)*23283064365386963e-26},init:function(h){typeof h=="string"?this.state(h):this.sow(h)},sow:function(h){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!h)for(var u=0;u<h.length&&h[u]!=null;u++){var f=h[u];this.s0-=this.hash(f),this.s0+=~~(this.s0<0),this.s1-=this.hash(f),this.s1+=~~(this.s1<0),this.s2-=this.hash(f),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(h,u){return Math.floor(this.realInRange(0,u-h+1)+h)},between:function(h,u){return Math.floor(this.realInRange(0,u-h+1)+h)},realInRange:function(h,u){return this.frac()*(u-h)+h},normal:function(){return 1-2*this.frac()},uuid:function(){var h="",u="";for(u=h="";h++<36;u+=~h%5|h*3&4?(h^15?8^this.frac()*(h^20?16:4):4).toString(16):"-");return u},pick:function(h){return h[this.integerInRange(0,h.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(h){return h[~~(Math.pow(this.frac(),2)*(h.length-.5)+.5)]},timestamp:function(h,u){return this.realInRange(h||9466848e5,u||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(h){return typeof h=="string"&&h.match(/^!rnd/)&&(h=h.split(","),this.c=parseFloat(h[1]),this.s0=parseFloat(h[2]),this.s1=parseFloat(h[3]),this.s2=parseFloat(h[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(h){for(var u=h.length-1,f=u;f>0;f--){var l=Math.floor(this.frac()*(f+1)),d=h[l];h[l]=h[f],h[f]=d}return h}});n.exports=p},63448:n=>{var o=function(r,a,p,h){return p===void 0&&(p=0),a===0?r:(r-=p,r=a*Math.ceil(r/a),h?(p+r)/a:p+r)};n.exports=o},56583:n=>{var o=function(r,a,p,h){return p===void 0&&(p=0),a===0?r:(r-=p,r=a*Math.floor(r/a),h?(p+r)/a:p+r)};n.exports=o},77720:n=>{var o=function(r,a,p,h){return p===void 0&&(p=0),a===0?r:(r-=p,r=a*Math.round(r/a),h?(p+r)/a:p+r)};n.exports=o},73697:(n,o,r)=>{n.exports={Ceil:r(63448),Floor:r(56583),To:r(77720)}},85454:(n,o,r)=>{r(63595);var a=r(8054),p=r(79291),h={Actions:r(61061),Animations:r(60421),BlendModes:r(10312),Cache:r(83388),Cameras:r(26638),Core:r(42857),Class:r(83419),Create:r(15822),Curves:r(25410),Data:r(44965),Display:r(27460),DOM:r(84902),Events:r(93055),FX:r(66064),Game:r(50127),GameObjects:r(77856),Geom:r(55738),Input:r(14350),Loader:r(57777),Math:r(75508),Physics:r(44563),Plugins:r(18922),Renderer:r(36909),Scale:r(93364),ScaleModes:r(29795),Scene:r(97482),Scenes:r(62194),Structs:r(41392),Textures:r(27458),Tilemaps:r(62501),Time:r(90291),Tweens:r(43066),Utils:r(91799)};h.Sound=r(23717),h=p(!1,h,a),n.exports=h,r.g.Phaser=h},71289:(n,o,r)=>{var a=r(83419),p=r(92209),h=r(88571),u=new a({Extends:h,Mixins:[p.Acceleration,p.Angular,p.Bounce,p.Collision,p.Debug,p.Drag,p.Enable,p.Friction,p.Gravity,p.Immovable,p.Mass,p.Pushable,p.Size,p.Velocity],initialize:function(l,d,v,c,m){h.call(this,l,d,v,c,m),this.body=null}});n.exports=u},86689:(n,o,r)=>{var a=r(83419),p=r(39506),h=r(20339),u=r(89774),f=r(66022),l=r(95540),d=r(46975),v=r(72441),c=r(47956),m=r(37277),g=r(44594),y=r(26099),x=r(82248),C=new a({initialize:function(E){this.scene=E,this.systems=E.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,E.sys.events.once(g.BOOT,this.boot,this),E.sys.events.on(g.START,this.start,this)},boot:function(){this.world=new x(this.scene,this.config),this.add=new f(this.world),this.systems.events.once(g.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new x(this.scene,this.config),this.add=new f(this.world));var S=this.systems.events;l(this.config,"customUpdate",!1)||S.on(g.UPDATE,this.world.update,this.world),S.on(g.POST_UPDATE,this.world.postUpdate,this.world),S.once(g.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(g.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(g.UPDATE,this.world.update,this.world)},getConfig:function(){var S=this.systems.game.config.physics,E=this.systems.settings.physics,T=d(l(E,"arcade",{}),l(S,"arcade",{}));return T},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(S,E,T,P,M){return T===void 0&&(T=null),P===void 0&&(P=null),M===void 0&&(M=T),this.world.collideObjects(S,E,T,P,M,!0)},collide:function(S,E,T,P,M){return T===void 0&&(T=null),P===void 0&&(P=null),M===void 0&&(M=T),this.world.collideObjects(S,E,T,P,M,!1)},collideTiles:function(S,E,T,P,M){return this.world.collideTiles(S,E,T,P,M)},overlapTiles:function(S,E,T,P,M){return this.world.overlapTiles(S,E,T,P,M)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(S,E,T,P,M,w){P===void 0&&(P=60);var b=Math.atan2(T-S.y,E-S.x);return S.body.acceleration.setToPolar(b,P),M!==void 0&&w!==void 0&&S.body.maxVelocity.set(M,w),b},accelerateToObject:function(S,E,T,P,M){return this.accelerateTo(S,E.x,E.y,T,P,M)},closest:function(S,E){E||(E=this.world.bodies.entries);for(var T=Number.MAX_VALUE,P=null,M=S.x,w=S.y,b=E.length,I=0;I<b;I++){var R=E[I],A=R.body||R;if(!(S===R||S===A||S===A.gameObject||S===A.center)){var L=u(M,w,A.center.x,A.center.y);L<T&&(P=R,T=L)}}return P},furthest:function(S,E){E||(E=this.world.bodies.entries);for(var T=-1,P=null,M=S.x,w=S.y,b=E.length,I=0;I<b;I++){var R=E[I],A=R.body||R;if(!(S===R||S===A||S===A.gameObject||S===A.center)){var L=u(M,w,A.center.x,A.center.y);L>T&&(P=R,T=L)}}return P},moveTo:function(S,E,T,P,M){P===void 0&&(P=60),M===void 0&&(M=0);var w=Math.atan2(T-S.y,E-S.x);return M>0&&(P=h(S.x,S.y,E,T)/(M/1e3)),S.body.velocity.setToPolar(w,P),w},moveToObject:function(S,E,T,P){return this.moveTo(S,E.x,E.y,T,P)},velocityFromAngle:function(S,E,T){return E===void 0&&(E=60),T===void 0&&(T=new y),T.setToPolar(p(S),E)},velocityFromRotation:function(S,E,T){return E===void 0&&(E=60),T===void 0&&(T=new y),T.setToPolar(S,E)},overlapRect:function(S,E,T,P,M,w){return c(this.world,S,E,T,P,M,w)},overlapCirc:function(S,E,T,P,M){return v(this.world,S,E,T,P,M)},shutdown:function(){if(this.world){var S=this.systems.events;S.off(g.UPDATE,this.world.update,this.world),S.off(g.POST_UPDATE,this.world.postUpdate,this.world),S.off(g.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(g.START,this.start,this),this.scene=null,this.systems=null}});m.register("ArcadePhysics",C,"arcadePhysics"),n.exports=C},13759:(n,o,r)=>{var a=r(83419),p=r(92209),h=r(68287),u=new a({Extends:h,Mixins:[p.Acceleration,p.Angular,p.Bounce,p.Collision,p.Debug,p.Drag,p.Enable,p.Friction,p.Gravity,p.Immovable,p.Mass,p.Pushable,p.Size,p.Velocity],initialize:function(l,d,v,c,m){h.call(this,l,d,v,c,m),this.body=null}});n.exports=u},37742:(n,o,r)=>{var a=r(83419),p=r(78389),h=r(37747),u=r(63012),f=r(43396),l=r(87841),d=r(37303),v=r(95829),c=r(26099),m=new a({Mixins:[p],initialize:function(y,x){var C=64,S=64,E={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},T=x!==void 0;T&&x.displayWidth&&(C=x.displayWidth,S=x.displayHeight),T||(x=E),this.world=y,this.gameObject=T?x:void 0,this.isBody=!0,this.transform={x:x.x,y:x.y,rotation:x.angle,scaleX:x.scaleX,scaleY:x.scaleY,displayOriginX:x.displayOriginX,displayOriginY:x.displayOriginY},this.debugShowBody=y.defaults.debugShowBody,this.debugShowVelocity=y.defaults.debugShowVelocity,this.debugBodyColor=y.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(x.x-x.scaleX*x.displayOriginX,x.y-x.scaleY*x.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=x.angle,this.preRotation=x.angle,this.width=C,this.height=S,this.sourceWidth=C,this.sourceHeight=S,x.frame&&(this.sourceWidth=x.frame.realWidth,this.sourceHeight=x.frame.realHeight),this.halfWidth=Math.abs(C/2),this.halfHeight=Math.abs(S/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new c,this.newVelocity=new c,this.deltaMax=new c,this.acceleration=new c,this.allowDrag=!0,this.drag=new c,this.allowGravity=!0,this.gravity=new c,this.bounce=new c,this.worldBounce=null,this.customBoundsRectangle=y.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new c(1e4,1e4),this.maxSpeed=-1,this.friction=new c(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=h.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new c(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=v(!1),this.touching=v(!0),this.wasTouching=v(!0),this.blocked=v(!0),this.syncBounds=!1,this.physicsType=h.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=x.scaleX,this._sy=x.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new l,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var g=this.gameObject,y=this.transform;if(g.parentContainer){var x=g.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);y.x=x.tx,y.y=x.ty,y.rotation=f(x.rotation),y.scaleX=x.scaleX,y.scaleY=x.scaleY,y.displayOriginX=g.displayOriginX,y.displayOriginY=g.displayOriginY}else y.x=g.x,y.y=g.y,y.rotation=g.angle,y.scaleX=g.scaleX,y.scaleY=g.scaleY,y.displayOriginX=g.displayOriginX,y.displayOriginY=g.displayOriginY;var C=!1;if(this.syncBounds){var S=g.getBounds(this._bounds);this.width=S.width,this.height=S.height,C=!0}else{var E=Math.abs(y.scaleX),T=Math.abs(y.scaleY);(this._sx!==E||this._sy!==T)&&(this.width=this.sourceWidth*E,this.height=this.sourceHeight*T,this._sx=E,this._sy=T,C=!0)}C&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var g=this.transform;this.position.x=g.x+g.scaleX*(this.offset.x-g.displayOriginX),this.position.y=g.y+g.scaleY*(this.offset.y-g.displayOriginY),this.updateCenter()},resetFlags:function(g){g===void 0&&(g=!1);var y=this.wasTouching,x=this.touching,C=this.blocked;g?v(!0,y):(y.none=x.none,y.up=x.up,y.down=x.down,y.left=x.left,y.right=x.right),v(!0,x),v(!0,C),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(g,y){if(g&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var x=this.position;this.prev.x=x.x,this.prev.y=x.y,this.prevFrame.x=x.x,this.prevFrame.y=x.y}g&&this.update(y)},update:function(g){var y=this.prev,x=this.position,C=this.velocity;if(y.set(x.x,x.y),!this.moves){this._dx=x.x-y.x,this._dy=x.y-y.y;return}if(this.directControl){var S=this.autoFrame;C.set((x.x-S.x)/g,(x.y-S.y)/g),this.world.updateMotion(this,g),this._dx=x.x-S.x,this._dy=x.y-S.y}else this.world.updateMotion(this,g),this.newVelocity.set(C.x*g,C.y*g),x.add(this.newVelocity),this._dx=x.x-y.x,this._dy=x.y-y.y;var E=C.x,T=C.y;if(this.updateCenter(),this.angle=Math.atan2(T,E),this.speed=Math.sqrt(E*E+T*T),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var P=this.blocked;this.world.emit(u.WORLD_BOUNDS,this,P.up,P.down,P.left,P.right)}},postUpdate:function(){var g=this.position,y=g.x-this.prevFrame.x,x=g.y-this.prevFrame.y,C=this.gameObject;if(this.moves){var S=this.deltaMax.x,E=this.deltaMax.y;S!==0&&y!==0&&(y<0&&y<-S?y=-S:y>0&&y>S&&(y=S)),E!==0&&x!==0&&(x<0&&x<-E?x=-E:x>0&&x>E&&(x=E)),C&&(C.x+=y,C.y+=x)}y<0?this.facing=h.FACING_LEFT:y>0&&(this.facing=h.FACING_RIGHT),x<0?this.facing=h.FACING_UP:x>0&&(this.facing=h.FACING_DOWN),this.allowRotation&&C&&(C.angle+=this.deltaZ()),this._tx=y,this._ty=x,this.autoFrame.set(g.x,g.y)},setBoundsRectangle:function(g){return this.customBoundsRectangle=g||this.world.bounds,this},checkWorldBounds:function(){var g=this.position,y=this.velocity,x=this.blocked,C=this.customBoundsRectangle,S=this.world.checkCollision,E=this.worldBounce?-this.worldBounce.x:-this.bounce.x,T=this.worldBounce?-this.worldBounce.y:-this.bounce.y,P=!1;return g.x<C.x&&S.left?(g.x=C.x,y.x*=E,x.left=!0,P=!0):this.right>C.right&&S.right&&(g.x=C.right-this.width,y.x*=E,x.right=!0,P=!0),g.y<C.y&&S.up?(g.y=C.y,y.y*=T,x.up=!0,P=!0):this.bottom>C.bottom&&S.down&&(g.y=C.bottom-this.height,y.y*=T,x.down=!0,P=!0),P&&(this.blocked.none=!1,this.updateCenter()),P},setOffset:function(g,y){return y===void 0&&(y=g),this.offset.set(g,y),this},setGameObject:function(g,y){if(y===void 0&&(y=!0),!g||!g.hasTransformComponent)return this;var x=this.world;return this.gameObject&&this.gameObject.body&&(x.disable(this.gameObject),this.gameObject.body=null),g.body&&x.disable(g),this.gameObject=g,g.body=this,this.setSize(),this.enable=y,this},setSize:function(g,y,x){x===void 0&&(x=!0);var C=this.gameObject;if(C&&(!g&&C.frame&&(g=C.frame.realWidth),!y&&C.frame&&(y=C.frame.realHeight)),this.sourceWidth=g,this.sourceHeight=y,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),x&&C&&C.getCenter){var S=(C.width-g)/2,E=(C.height-y)/2;this.offset.set(S,E)}return this.isCircle=!1,this.radius=0,this},setCircle:function(g,y,x){return y===void 0&&(y=this.offset.x),x===void 0&&(x=this.offset.y),g>0?(this.isCircle=!0,this.radius=g,this.sourceWidth=g*2,this.sourceHeight=g*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(y,x),this.updateCenter()):this.isCircle=!1,this},reset:function(g,y){this.stop();var x=this.gameObject;x&&(x.setPosition(g,y),this.rotation=x.angle,this.preRotation=x.angle);var C=this.position;x&&x.getTopLeft?x.getTopLeft(C):C.set(g,y),this.prev.copy(C),this.prevFrame.copy(C),this.autoFrame.copy(C),x&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(g){return g.x=this.x,g.y=this.y,g.right=this.right,g.bottom=this.bottom,g},hitTest:function(g,y){if(!this.isCircle)return d(this,g,y);if(this.radius>0&&g>=this.left&&g<=this.right&&y>=this.top&&y<=this.bottom){var x=(this.center.x-g)*(this.center.x-g),C=(this.center.y-y)*(this.center.y-y);return x+C<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(g){var y=this.position,x=y.x+this.halfWidth,C=y.y+this.halfHeight;this.debugShowBody&&(g.lineStyle(g.defaultStrokeWidth,this.debugBodyColor),this.isCircle?g.strokeCircle(x,C,this.width/2):(this.checkCollision.up&&g.lineBetween(y.x,y.y,y.x+this.width,y.y),this.checkCollision.right&&g.lineBetween(y.x+this.width,y.y,y.x+this.width,y.y+this.height),this.checkCollision.down&&g.lineBetween(y.x,y.y+this.height,y.x+this.width,y.y+this.height),this.checkCollision.left&&g.lineBetween(y.x,y.y,y.x,y.y+this.height))),this.debugShowVelocity&&(g.lineStyle(g.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),g.lineBetween(x,C,x+this.velocity.x/2,C+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(g){return g===void 0&&(g=!0),this.directControl=g,this},setCollideWorldBounds:function(g,y,x,C){g===void 0&&(g=!0),this.collideWorldBounds=g;var S=y!==void 0,E=x!==void 0;return(S||E)&&(this.worldBounce||(this.worldBounce=new c),S&&(this.worldBounce.x=y),E&&(this.worldBounce.y=x)),C!==void 0&&(this.onWorldBounds=C),this},setVelocity:function(g,y){return this.velocity.set(g,y),g=this.velocity.x,y=this.velocity.y,this.speed=Math.sqrt(g*g+y*y),this},setVelocityX:function(g){return this.setVelocity(g,this.velocity.y)},setVelocityY:function(g){return this.setVelocity(this.velocity.x,g)},setMaxVelocity:function(g,y){return this.maxVelocity.set(g,y),this},setMaxVelocityX:function(g){return this.maxVelocity.x=g,this},setMaxVelocityY:function(g){return this.maxVelocity.y=g,this},setMaxSpeed:function(g){return this.maxSpeed=g,this},setSlideFactor:function(g,y){return this.slideFactor.set(g,y),this},setBounce:function(g,y){return this.bounce.set(g,y),this},setBounceX:function(g){return this.bounce.x=g,this},setBounceY:function(g){return this.bounce.y=g,this},setAcceleration:function(g,y){return this.acceleration.set(g,y),this},setAccelerationX:function(g){return this.acceleration.x=g,this},setAccelerationY:function(g){return this.acceleration.y=g,this},setAllowDrag:function(g){return g===void 0&&(g=!0),this.allowDrag=g,this},setAllowGravity:function(g){return g===void 0&&(g=!0),this.allowGravity=g,this},setAllowRotation:function(g){return g===void 0&&(g=!0),this.allowRotation=g,this},setDrag:function(g,y){return this.drag.set(g,y),this},setDamping:function(g){return this.useDamping=g,this},setDragX:function(g){return this.drag.x=g,this},setDragY:function(g){return this.drag.y=g,this},setGravity:function(g,y){return this.gravity.set(g,y),this},setGravityX:function(g){return this.gravity.x=g,this},setGravityY:function(g){return this.gravity.y=g,this},setFriction:function(g,y){return this.friction.set(g,y),this},setFrictionX:function(g){return this.friction.x=g,this},setFrictionY:function(g){return this.friction.y=g,this},setAngularVelocity:function(g){return this.angularVelocity=g,this},setAngularAcceleration:function(g){return this.angularAcceleration=g,this},setAngularDrag:function(g){return this.angularDrag=g,this},setMass:function(g){return this.mass=g,this},setImmovable:function(g){return g===void 0&&(g=!0),this.immovable=g,this},setEnable:function(g){return g===void 0&&(g=!0),this.enable=g,this},processX:function(g,y,x,C){this.x+=g,this.updateCenter(),y!==null&&(this.velocity.x=y*this.slideFactor.x);var S=this.blocked;x&&(S.left=!0,S.none=!1),C&&(S.right=!0,S.none=!1)},processY:function(g,y,x,C){this.y+=g,this.updateCenter(),y!==null&&(this.velocity.y=y*this.slideFactor.y);var S=this.blocked;x&&(S.up=!0,S.none=!1),C&&(S.down=!0,S.none=!1)},x:{get:function(){return this.position.x},set:function(g){this.position.x=g}},y:{get:function(){return this.position.y},set:function(g){this.position.y=g}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});n.exports=m},79342:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d,v,c,m){this.world=u,this.name="",this.active=!0,this.overlapOnly=f,this.object1=l,this.object2=d,this.collideCallback=v,this.processCallback=c,this.callbackContext=m},setName:function(h){return this.name=h,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});n.exports=p},66022:(n,o,r)=>{var a=r(71289),p=r(13759),h=r(37742),u=r(83419),f=r(37747),l=r(60758),d=r(72624),v=r(71464),c=new u({initialize:function(g){this.world=g,this.scene=g.scene,this.sys=g.scene.sys},collider:function(m,g,y,x,C){return this.world.addCollider(m,g,y,x,C)},overlap:function(m,g,y,x,C){return this.world.addOverlap(m,g,y,x,C)},existing:function(m,g){var y=g?f.STATIC_BODY:f.DYNAMIC_BODY;return this.world.enableBody(m,y),m},staticImage:function(m,g,y,x){var C=new a(this.scene,m,g,y,x);return this.sys.displayList.add(C),this.world.enableBody(C,f.STATIC_BODY),C},image:function(m,g,y,x){var C=new a(this.scene,m,g,y,x);return this.sys.displayList.add(C),this.world.enableBody(C,f.DYNAMIC_BODY),C},staticSprite:function(m,g,y,x){var C=new p(this.scene,m,g,y,x);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,f.STATIC_BODY),C},sprite:function(m,g,y,x){var C=new p(this.scene,m,g,y,x);return this.sys.displayList.add(C),this.sys.updateList.add(C),this.world.enableBody(C,f.DYNAMIC_BODY),C},staticGroup:function(m,g){return this.sys.updateList.add(new v(this.world,this.world.scene,m,g))},group:function(m,g){return this.sys.updateList.add(new l(this.world,this.world.scene,m,g))},body:function(m,g,y,x){var C=new h(this.world);return C.position.set(m,g),y&&x&&C.setSize(y,x),this.world.add(C,f.DYNAMIC_BODY),C},staticBody:function(m,g,y,x){var C=new d(this.world);return C.position.set(m,g),y&&x&&C.setSize(y,x),this.world.add(C,f.STATIC_BODY),C},destroy:function(){this.world=null,this.scene=null,this.sys=null}});n.exports=c},79599:n=>{var o=function(r){var a=0;if(!Array.isArray(r))a=r;else for(var p=0;p<r.length;p++)a|=r[p];return a};n.exports=o},64897:(n,o,r)=>{var a=r(37747),p=function(h,u,f,l){var d=0,v=h.deltaAbsX()+u.deltaAbsX()+l;return h._dx===0&&u._dx===0?(h.embedded=!0,u.embedded=!0):h._dx>u._dx?(d=h.right-u.x,d>v&&!f||h.checkCollision.right===!1||u.checkCollision.left===!1?d=0:(h.touching.none=!1,h.touching.right=!0,u.touching.none=!1,u.touching.left=!0,u.physicsType===a.STATIC_BODY&&!f&&(h.blocked.none=!1,h.blocked.right=!0),h.physicsType===a.STATIC_BODY&&!f&&(u.blocked.none=!1,u.blocked.left=!0))):h._dx<u._dx&&(d=h.x-u.width-u.x,-d>v&&!f||h.checkCollision.left===!1||u.checkCollision.right===!1?d=0:(h.touching.none=!1,h.touching.left=!0,u.touching.none=!1,u.touching.right=!0,u.physicsType===a.STATIC_BODY&&!f&&(h.blocked.none=!1,h.blocked.left=!0),h.physicsType===a.STATIC_BODY&&!f&&(u.blocked.none=!1,u.blocked.right=!0))),h.overlapX=d,u.overlapX=d,d};n.exports=p},45170:(n,o,r)=>{var a=r(37747),p=function(h,u,f,l){var d=0,v=h.deltaAbsY()+u.deltaAbsY()+l;return h._dy===0&&u._dy===0?(h.embedded=!0,u.embedded=!0):h._dy>u._dy?(d=h.bottom-u.y,d>v&&!f||h.checkCollision.down===!1||u.checkCollision.up===!1?d=0:(h.touching.none=!1,h.touching.down=!0,u.touching.none=!1,u.touching.up=!0,u.physicsType===a.STATIC_BODY&&!f&&(h.blocked.none=!1,h.blocked.down=!0),h.physicsType===a.STATIC_BODY&&!f&&(u.blocked.none=!1,u.blocked.up=!0))):h._dy<u._dy&&(d=h.y-u.bottom,-d>v&&!f||h.checkCollision.up===!1||u.checkCollision.down===!1?d=0:(h.touching.none=!1,h.touching.up=!0,u.touching.none=!1,u.touching.down=!0,u.physicsType===a.STATIC_BODY&&!f&&(h.blocked.none=!1,h.blocked.up=!0),h.physicsType===a.STATIC_BODY&&!f&&(u.blocked.none=!1,u.blocked.down=!0))),h.overlapY=d,u.overlapY=d,d};n.exports=p},60758:(n,o,r)=>{var a=r(13759),p=r(83419),h=r(78389),u=r(37747),f=r(95540),l=r(26479),d=r(41212),v=new p({Extends:l,Mixins:[h],initialize:function(m,g,y,x){if(!y&&!x)x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(d(y))x=y,y=null,x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(y)&&d(y[0])){var C=this;y.forEach(function(S){S.internalCreateCallback=C.createCallbackHandler,S.internalRemoveCallback=C.removeCallbackHandler,S.classType=f(S,"classType",a)}),x=null}else x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=m,x&&(x.classType=f(x,"classType",a)),this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=2147483647,this.defaults={setCollideWorldBounds:f(x,"collideWorldBounds",!1),setBoundsRectangle:f(x,"customBoundsRectangle",null),setAccelerationX:f(x,"accelerationX",0),setAccelerationY:f(x,"accelerationY",0),setAllowDrag:f(x,"allowDrag",!0),setAllowGravity:f(x,"allowGravity",!0),setAllowRotation:f(x,"allowRotation",!0),setDamping:f(x,"useDamping",!1),setBounceX:f(x,"bounceX",0),setBounceY:f(x,"bounceY",0),setDragX:f(x,"dragX",0),setDragY:f(x,"dragY",0),setEnable:f(x,"enable",!0),setGravityX:f(x,"gravityX",0),setGravityY:f(x,"gravityY",0),setFrictionX:f(x,"frictionX",0),setFrictionY:f(x,"frictionY",0),setMaxSpeed:f(x,"maxSpeed",-1),setMaxVelocityX:f(x,"maxVelocityX",1e4),setMaxVelocityY:f(x,"maxVelocityY",1e4),setVelocityX:f(x,"velocityX",0),setVelocityY:f(x,"velocityY",0),setAngularVelocity:f(x,"angularVelocity",0),setAngularAcceleration:f(x,"angularAcceleration",0),setAngularDrag:f(x,"angularDrag",0),setMass:f(x,"mass",1),setImmovable:f(x,"immovable",!1)},l.call(this,g,y,x),this.type="PhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,u.DYNAMIC_BODY);var m=c.body;for(var g in this.defaults)m[g](this.defaults[g])},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},setVelocity:function(c,m,g){g===void 0&&(g=0);for(var y=this.getChildren(),x=0;x<y.length;x++)y[x].body.velocity.set(c+x*g,m+x*g);return this},setVelocityX:function(c,m){m===void 0&&(m=0);for(var g=this.getChildren(),y=0;y<g.length;y++)g[y].body.velocity.x=c+y*m;return this},setVelocityY:function(c,m){m===void 0&&(m=0);for(var g=this.getChildren(),y=0;y<g.length;y++)g[y].body.velocity.y=c+y*m;return this}});n.exports=v},3017:n=>{var o,r,a,p,h,u,f,l,d,v,c,m,g,y,x,C,S,E=function(I,R,A){o=I,r=R;var L=o.velocity.x,O=r.velocity.x;return a=o.pushable,d=o._dx<0,v=o._dx>0,c=o._dx===0,x=Math.abs(o.right-r.x)<=Math.abs(r.right-o.x),f=O-L*o.bounce.x,p=r.pushable,m=r._dx<0,g=r._dx>0,y=r._dx===0,C=!x,l=L-O*r.bounce.x,S=Math.abs(A),T()},T=function(){return v&&x&&r.blocked.right?(o.processX(-S,f,!1,!0),1):d&&C&&r.blocked.left?(o.processX(S,f,!0),1):g&&C&&o.blocked.right?(r.processX(-S,l,!1,!0),2):m&&x&&o.blocked.left?(r.processX(S,l,!0),2):0},P=function(){var I=o.velocity.x,R=r.velocity.x,A=Math.sqrt(R*R*r.mass/o.mass)*(R>0?1:-1),L=Math.sqrt(I*I*o.mass/r.mass)*(I>0?1:-1),O=(A+L)*.5;return A-=O,L-=O,h=O+A*o.bounce.x,u=O+L*r.bounce.x,d&&C?M(0):m&&x?M(1):v&&x?M(2):g&&C?M(3):!1},M=function(I){if(a&&p)S*=.5,I===0||I===3?(o.processX(S,h),r.processX(-S,u)):(o.processX(-S,h),r.processX(S,u));else if(a&&!p)I===0||I===3?o.processX(S,f,!0):o.processX(-S,f,!1,!0);else if(!a&&p)I===0||I===3?r.processX(-S,l,!1,!0):r.processX(S,l,!0);else{var R=S*.5;I===0?y?(o.processX(S,0,!0),r.processX(0,null,!1,!0)):g?(o.processX(R,0,!0),r.processX(-R,0,!1,!0)):(o.processX(R,r.velocity.x,!0),r.processX(-R,null,!1,!0)):I===1?c?(o.processX(0,null,!1,!0),r.processX(S,0,!0)):v?(o.processX(-R,0,!1,!0),r.processX(R,0,!0)):(o.processX(-R,null,!1,!0),r.processX(R,o.velocity.x,!0)):I===2?y?(o.processX(-S,0,!1,!0),r.processX(0,null,!0)):m?(o.processX(-R,0,!1,!0),r.processX(R,0,!0)):(o.processX(-R,r.velocity.x,!1,!0),r.processX(R,null,!0)):I===3&&(c?(o.processX(0,null,!0),r.processX(-S,0,!1,!0)):d?(o.processX(R,0,!0),r.processX(-R,0,!1,!0)):(o.processX(R,r.velocity.y,!0),r.processX(-R,null,!1,!0)))}return!0},w=function(I){if(I===1?r.velocity.x=0:x?r.processX(S,l,!0):r.processX(-S,l,!1,!0),o.moves){var R=o.directControl?o.y-o.autoFrame.y:o.y-o.prev.y;r.y+=R*o.friction.y,r._dy=r.y-r.prev.y}},b=function(I){if(I===2?o.velocity.x=0:C?o.processX(S,f,!0):o.processX(-S,f,!1,!0),r.moves){var R=r.directControl?r.y-r.autoFrame.y:r.y-r.prev.y;o.y+=R*r.friction.y,o._dy=o.y-o.prev.y}};n.exports={BlockCheck:T,Check:P,Set:E,Run:M,RunImmovableBody1:w,RunImmovableBody2:b}},47962:n=>{var o,r,a,p,h,u,f,l,d,v,c,m,g,y,x,C,S,E=function(I,R,A){o=I,r=R;var L=o.velocity.y,O=r.velocity.y;return a=o.pushable,d=o._dy<0,v=o._dy>0,c=o._dy===0,x=Math.abs(o.bottom-r.y)<=Math.abs(r.bottom-o.y),f=O-L*o.bounce.y,p=r.pushable,m=r._dy<0,g=r._dy>0,y=r._dy===0,C=!x,l=L-O*r.bounce.y,S=Math.abs(A),T()},T=function(){return v&&x&&r.blocked.down?(o.processY(-S,f,!1,!0),1):d&&C&&r.blocked.up?(o.processY(S,f,!0),1):g&&C&&o.blocked.down?(r.processY(-S,l,!1,!0),2):m&&x&&o.blocked.up?(r.processY(S,l,!0),2):0},P=function(){var I=o.velocity.y,R=r.velocity.y,A=Math.sqrt(R*R*r.mass/o.mass)*(R>0?1:-1),L=Math.sqrt(I*I*o.mass/r.mass)*(I>0?1:-1),O=(A+L)*.5;return A-=O,L-=O,h=O+A*o.bounce.y,u=O+L*r.bounce.y,d&&C?M(0):m&&x?M(1):v&&x?M(2):g&&C?M(3):!1},M=function(I){if(a&&p)S*=.5,I===0||I===3?(o.processY(S,h),r.processY(-S,u)):(o.processY(-S,h),r.processY(S,u));else if(a&&!p)I===0||I===3?o.processY(S,f,!0):o.processY(-S,f,!1,!0);else if(!a&&p)I===0||I===3?r.processY(-S,l,!1,!0):r.processY(S,l,!0);else{var R=S*.5;I===0?y?(o.processY(S,0,!0),r.processY(0,null,!1,!0)):g?(o.processY(R,0,!0),r.processY(-R,0,!1,!0)):(o.processY(R,r.velocity.y,!0),r.processY(-R,null,!1,!0)):I===1?c?(o.processY(0,null,!1,!0),r.processY(S,0,!0)):v?(o.processY(-R,0,!1,!0),r.processY(R,0,!0)):(o.processY(-R,null,!1,!0),r.processY(R,o.velocity.y,!0)):I===2?y?(o.processY(-S,0,!1,!0),r.processY(0,null,!0)):m?(o.processY(-R,0,!1,!0),r.processY(R,0,!0)):(o.processY(-R,r.velocity.y,!1,!0),r.processY(R,null,!0)):I===3&&(c?(o.processY(0,null,!0),r.processY(-S,0,!1,!0)):d?(o.processY(R,0,!0),r.processY(-R,0,!1,!0)):(o.processY(R,r.velocity.y,!0),r.processY(-R,null,!1,!0)))}return!0},w=function(I){if(I===1?r.velocity.y=0:x?r.processY(S,l,!0):r.processY(-S,l,!1,!0),o.moves){var R=o.directControl?o.x-o.autoFrame.x:o.x-o.prev.x;r.x+=R*o.friction.x,r._dx=r.x-r.prev.x}},b=function(I){if(I===2?o.velocity.y=0:C?o.processY(S,f,!0):o.processY(-S,f,!1,!0),r.moves){var R=r.directControl?r.x-r.autoFrame.x:r.x-r.prev.x;o.x+=R*r.friction.x,o._dx=o.x-o.prev.x}};n.exports={BlockCheck:T,Check:P,Set:E,Run:M,RunImmovableBody1:w,RunImmovableBody2:b}},14087:(n,o,r)=>{var a=r(64897),p=r(3017),h=function(u,f,l,d,v){v===void 0&&(v=a(u,f,l,d));var c=u.immovable,m=f.immovable;if(l||v===0||c&&m||u.customSeparateX||f.customSeparateX)return v!==0||u.embedded&&f.embedded;var g=p.Set(u,f,v);return!c&&!m?g>0?!0:p.Check():(c?p.RunImmovableBody1(g):m&&p.RunImmovableBody2(g),!0)};n.exports=h},89936:(n,o,r)=>{var a=r(45170),p=r(47962),h=function(u,f,l,d,v){v===void 0&&(v=a(u,f,l,d));var c=u.immovable,m=f.immovable;if(l||v===0||c&&m||u.customSeparateY||f.customSeparateY)return v!==0||u.embedded&&f.embedded;var g=p.Set(u,f,v);return!c&&!m?g>0?!0:p.Check():(c?p.RunImmovableBody1(g):m&&p.RunImmovableBody2(g),!0)};n.exports=h},95829:n=>{var o=function(r,a){return a===void 0&&(a={}),a.none=r,a.up=!1,a.down=!1,a.left=!1,a.right=!1,r||(a.up=!0,a.down=!0,a.left=!0,a.right=!0),a};n.exports=o},72624:(n,o,r)=>{var a=r(87902),p=r(83419),h=r(78389),u=r(37747),f=r(37303),l=r(95829),d=r(26099),v=new p({Mixins:[h],initialize:function(m,g){var y=64,x=64,C={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},S=g!==void 0;S&&g.displayWidth&&(y=g.displayWidth,x=g.displayHeight),S||(g=C),this.world=m,this.gameObject=S?g:void 0,this.isBody=!0,this.debugShowBody=m.defaults.debugShowStaticBody,this.debugBodyColor=m.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new d,this.position=new d(g.x-y*g.originX,g.y-x*g.originY),this.width=y,this.height=x,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new d(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=d.ZERO,this.allowGravity=!1,this.gravity=d.ZERO,this.bounce=d.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=l(!1),this.touching=l(!0),this.wasTouching=l(!0),this.blocked=l(!0),this.physicsType=u.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(c,m,g){if(m===void 0&&(m=!0),g===void 0&&(g=!0),!c||!c.hasTransformComponent)return this;var y=this.world;return this.gameObject&&this.gameObject.body&&(y.disable(this.gameObject),this.gameObject.body=null),c.body&&y.disable(c),this.gameObject=c,c.body=this,this.setSize(),m&&this.updateFromGameObject(),this.enable=g,this},updateFromGameObject:function(){this.world.staticTree.remove(this);var c=this.gameObject;return c.getTopLeft(this.position),this.width=c.displayWidth,this.height=c.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(c,m){return m===void 0&&(m=c),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(c,m),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(c,m,g){g===void 0&&(g=!0);var y=this.gameObject;if(y&&y.frame&&(c||(c=y.frame.realWidth),m||(m=y.frame.realHeight)),this.world.staticTree.remove(this),this.width=c,this.height=m,this.halfWidth=Math.floor(c/2),this.halfHeight=Math.floor(m/2),g&&y&&y.getCenter){var x=y.displayWidth/2,C=y.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(x-this.halfWidth,C-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(c,m,g){return m===void 0&&(m=this.offset.x),g===void 0&&(g=this.offset.y),c>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=c,this.width=c*2,this.height=c*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(m,g),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(c,m){var g=this.gameObject;c===void 0&&(c=g.x),m===void 0&&(m=g.y),this.world.staticTree.remove(this),g.setPosition(c,m),g.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(c){return c.x=this.x,c.y=this.y,c.right=this.right,c.bottom=this.bottom,c},hitTest:function(c,m){return this.isCircle?a(this,c,m):f(this,c,m)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(c){var m=this.position,g=m.x+this.halfWidth,y=m.y+this.halfHeight;this.debugShowBody&&(c.lineStyle(c.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?c.strokeCircle(g,y,this.width/2):c.strokeRect(m.x,m.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(c){return c<=0&&(c=.1),this.mass=c,this},x:{get:function(){return this.position.x},set:function(c){this.world.staticTree.remove(this),this.position.x=c,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(c){this.world.staticTree.remove(this),this.position.y=c,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});n.exports=v},71464:(n,o,r)=>{var a=r(13759),p=r(83419),h=r(78389),u=r(37747),f=r(95540),l=r(26479),d=r(41212),v=new p({Extends:l,Mixins:[h],initialize:function(m,g,y,x){!y&&!x?x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}:d(y)?(x=y,y=null,x.internalCreateCallback=this.createCallbackHandler,x.internalRemoveCallback=this.removeCallbackHandler,x.createMultipleCallback=this.createMultipleCallbackHandler,x.classType=f(x,"classType",a)):Array.isArray(y)&&d(y[0])?(x=y,y=null,x.forEach(function(C){C.internalCreateCallback=this.createCallbackHandler,C.internalRemoveCallback=this.removeCallbackHandler,C.createMultipleCallback=this.createMultipleCallbackHandler,C.classType=f(C,"classType",a)})):x={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=m,this.physicsType=u.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,l.call(this,g,y,x),this.type="StaticPhysicsGroup"},createCallbackHandler:function(c){c.body||this.world.enableBody(c,u.STATIC_BODY)},removeCallbackHandler:function(c){c.body&&this.world.disableBody(c)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var c=this.children.entries,m=0;m<c.length;m++)c[m].body.reset();return this}});n.exports=v},82248:(n,o,r)=>{var a=r(55495),p=r(37742),h=r(45319),u=r(83419),f=r(79342),l=r(37747),d=r(20339),v=r(52816),c=r(50792),m=r(63012),g=r(43855),y=r(5470),x=r(94977),C=r(64897),S=r(45170),E=r(96523),T=r(35154),P=r(36383),M=r(25774),w=r(96602),b=r(87841),I=r(59542),R=r(40012),A=r(14087),L=r(89936),O=r(35072),F=r(72624),G=r(2483),U=r(61340),z=r(26099),N=r(15994),k=new u({Extends:c,initialize:function(V,B){c.call(this),this.scene=V,this.bodies=new O,this.staticBodies=new O,this.pendingDestroy=new O,this.colliders=new M,this.gravity=new z(T(B,"gravity.x",0),T(B,"gravity.y",0)),this.bounds=new b(T(B,"x",0),T(B,"y",0),T(B,"width",V.sys.scale.width),T(B,"height",V.sys.scale.height)),this.checkCollision={up:T(B,"checkCollision.up",!0),down:T(B,"checkCollision.down",!0),left:T(B,"checkCollision.left",!0),right:T(B,"checkCollision.right",!0)},this.fps=T(B,"fps",60),this.fixedStep=T(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(B,"timeScale",1),this.OVERLAP_BIAS=T(B,"overlapBias",4),this.TILE_BIAS=T(B,"tileBias",16),this.forceX=T(B,"forceX",!1),this.isPaused=T(B,"isPaused",!1),this._total=0,this.drawDebug=T(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(B,"debugShowBody",!0),debugShowStaticBody:T(B,"debugShowStaticBody",!0),debugShowVelocity:T(B,"debugShowVelocity",!0),bodyDebugColor:T(B,"debugBodyColor",16711935),staticBodyDebugColor:T(B,"debugStaticBodyColor",255),velocityDebugColor:T(B,"debugVelocityColor",65280)},this.maxEntries=T(B,"maxEntries",16),this.useTree=T(B,"useTree",!0),this.tree=new I(this.maxEntries),this.staticTree=new I(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new U,this._tempMatrix2=new U,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(D,V){V===void 0&&(V=l.DYNAMIC_BODY),Array.isArray(D)||(D=[D]);for(var B=0;B<D.length;B++){var W=D[B];if(W.isParent)for(var H=W.getChildren(),Y=0;Y<H.length;Y++){var X=H[Y];X.isParent?this.enable(X,V):this.enableBody(X,V)}else this.enableBody(W,V)}},enableBody:function(D,V){return V===void 0&&(V=l.DYNAMIC_BODY),D.hasTransformComponent&&(D.body||(V===l.DYNAMIC_BODY?D.body=new p(this,D):V===l.STATIC_BODY&&(D.body=new F(this,D))),this.add(D.body)),D},add:function(D){return D.physicsType===l.DYNAMIC_BODY?this.bodies.set(D):D.physicsType===l.STATIC_BODY&&(this.staticBodies.set(D),this.staticTree.insert(D)),D.enable=!0,D},disable:function(D){Array.isArray(D)||(D=[D]);for(var V=0;V<D.length;V++){var B=D[V];if(B.isParent)for(var W=B.getChildren(),H=0;H<W.length;H++){var Y=W[H];Y.isParent?this.disable(Y):this.disableBody(Y.body)}else this.disableBody(B.body)}},disableBody:function(D){this.remove(D),D.enable=!1},remove:function(D){D.physicsType===l.DYNAMIC_BODY?(this.tree.remove(D),this.bodies.delete(D)):D.physicsType===l.STATIC_BODY&&(this.staticBodies.delete(D),this.staticTree.remove(D))},createDebugGraphic:function(){var D=this.scene.sys.add.graphics({x:0,y:0});return D.setDepth(Number.MAX_VALUE),this.debugGraphic=D,this.drawDebug=!0,D},setBounds:function(D,V,B,W,H,Y,X,$){return this.bounds.setTo(D,V,B,W),H!==void 0&&this.setBoundsCollision(H,Y,X,$),this},setBoundsCollision:function(D,V,B,W){return D===void 0&&(D=!0),V===void 0&&(V=!0),B===void 0&&(B=!0),W===void 0&&(W=!0),this.checkCollision.left=D,this.checkCollision.right=V,this.checkCollision.up=B,this.checkCollision.down=W,this},pause:function(){return this.isPaused=!0,this.emit(m.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(m.RESUME),this},addCollider:function(D,V,B,W,H){B===void 0&&(B=null),W===void 0&&(W=null),H===void 0&&(H=B);var Y=new f(this,!1,D,V,B,W,H);return this.colliders.add(Y),Y},addOverlap:function(D,V,B,W,H){B===void 0&&(B=null),W===void 0&&(W=null),H===void 0&&(H=B);var Y=new f(this,!0,D,V,B,W,H);return this.colliders.add(Y),Y},removeCollider:function(D){return this.colliders.remove(D),this},setFPS:function(D){return this.fps=D,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(D,V){if(!(this.isPaused||this.bodies.size===0)){var B,W=this._frameTime,H=this._frameTimeMS*this.timeScale;this._elapsed+=V;var Y,X=this.bodies.entries,$=this._elapsed>=H;for(this.fixedStep||(W=V*.001,$=!0,this._elapsed=0),B=0;B<X.length;B++)Y=X[B],Y.enable&&Y.preUpdate($,W);if($){this._elapsed-=H,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(X));var J=this.colliders.update();for(B=0;B<J.length;B++){var q=J[B];q.active&&q.update()}this.emit(m.WORLD_STEP,W)}for(;this._elapsed>=H;)this._elapsed-=H,this.step(W)}},step:function(D){var V,B,W=this.bodies.entries,H=W.length;for(V=0;V<H;V++)B=W[V],B.enable&&B.update(D);this.useTree&&(this.tree.clear(),this.tree.load(W));var Y=this.colliders.update();for(V=0;V<Y.length;V++){var X=Y[V];X.active&&X.update()}this.emit(m.WORLD_STEP,D),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var D,V,B=this.bodies.entries,W=B.length,H=this.bodies,Y=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,D=0;D<W;D++)V=B[D],V.enable&&V.postUpdate();if(this.drawDebug){var X=this.debugGraphic;for(X.clear(),D=0;D<W;D++)V=B[D],V.willDrawDebug()&&V.drawDebug(X);for(B=Y.entries,W=B.length,D=0;D<W;D++)V=B[D],V.willDrawDebug()&&V.drawDebug(X)}var $=this.pendingDestroy;if($.size>0){var J=this.tree,q=this.staticTree;for(B=$.entries,W=B.length,D=0;D<W;D++)V=B[D],V.physicsType===l.DYNAMIC_BODY?(J.remove(V),H.delete(V)):V.physicsType===l.STATIC_BODY&&(q.remove(V),Y.delete(V)),V.world=void 0,V.gameObject=void 0;$.clear()}},updateMotion:function(D,V){D.allowRotation&&this.computeAngularVelocity(D,V),this.computeVelocity(D,V)},computeAngularVelocity:function(D,V){var B=D.angularVelocity,W=D.angularAcceleration,H=D.angularDrag,Y=D.maxAngular;W?B+=W*V:D.allowDrag&&H&&(H*=V,y(B-H,0,.1)?B-=H:x(B+H,0,.1)?B+=H:B=0),B=h(B,-Y,Y);var X=B-D.angularVelocity;D.angularVelocity+=X,D.rotation+=D.angularVelocity*V},computeVelocity:function(D,V){var B=D.velocity.x,W=D.acceleration.x,H=D.drag.x,Y=D.maxVelocity.x,X=D.velocity.y,$=D.acceleration.y,J=D.drag.y,q=D.maxVelocity.y,Q=D.speed,tt=D.maxSpeed,rt=D.allowDrag,et=D.useDamping;D.allowGravity&&(B+=(this.gravity.x+D.gravity.x)*V,X+=(this.gravity.y+D.gravity.y)*V),W?B+=W*V:rt&&H&&(et?(H=Math.pow(H,V),B*=H,Q=Math.sqrt(B*B+X*X),g(Q,0,.001)&&(B=0)):(H*=V,y(B-H,0,.01)?B-=H:x(B+H,0,.01)?B+=H:B=0)),$?X+=$*V:rt&&J&&(et?(J=Math.pow(J,V),X*=J,Q=Math.sqrt(B*B+X*X),g(Q,0,.001)&&(X=0)):(J*=V,y(X-J,0,.01)?X-=J:x(X+J,0,.01)?X+=J:X=0)),B=h(B,-Y,Y),X=h(X,-q,q),D.velocity.set(B,X),tt>-1&&D.velocity.length()>tt&&(D.velocity.normalize().scale(tt),Q=tt),D.speed=Q},separate:function(D,V,B,W,H){var Y,X,$=!1,J=!0;if(!D.enable||!V.enable||D.checkCollision.none||V.checkCollision.none||!this.intersects(D,V)||(D.collisionMask&V.collisionCategory)===0||(V.collisionMask&D.collisionCategory)===0||B&&B.call(W,D.gameObject||D,V.gameObject||V)===!1)return $;if(D.isCircle||V.isCircle){var q=this.separateCircle(D,V,H);q.result?($=!0,J=!1):(Y=q.x,X=q.y,J=!0)}if(J){var Q=!1,tt=!1,rt=this.OVERLAP_BIAS;H?(Q=A(D,V,H,rt,Y),tt=L(D,V,H,rt,X)):this.forceX||Math.abs(this.gravity.y+D.gravity.y)<Math.abs(this.gravity.x+D.gravity.x)?(Q=A(D,V,H,rt,Y),this.intersects(D,V)&&(tt=L(D,V,H,rt,X))):(tt=L(D,V,H,rt,X),this.intersects(D,V)&&(Q=A(D,V,H,rt,Y))),$=Q||tt}return $&&(H?(D.onOverlap||V.onOverlap)&&this.emit(m.OVERLAP,D.gameObject,V.gameObject,D,V):(D.onCollide||V.onCollide)&&this.emit(m.COLLIDE,D.gameObject,V.gameObject,D,V)),$},separateCircle:function(D,V,B){C(D,V,!1,0),S(D,V,!1,0);var W=D.isCircle,H=V.isCircle,Y=D.center,X=V.center,$=D.immovable,J=V.immovable,q=D.velocity,Q=V.velocity,tt=0,rt=!0;if(W!==H){rt=!1;var et=Y.x,ot=Y.y,ut=D.halfWidth,dt=V.position.x,it=V.position.y,st=V.right,at=V.bottom;H&&(et=X.x,ot=X.y,ut=V.halfWidth,dt=D.position.x,it=D.position.y,st=D.right,at=D.bottom),ot<it?et<dt?tt=d(et,ot,dt,it)-ut:et>st&&(tt=d(et,ot,st,it)-ut):ot>at&&(et<dt?tt=d(et,ot,dt,at)-ut:et>st&&(tt=d(et,ot,st,at)-ut)),tt*=-1}else tt=D.halfWidth+V.halfWidth-v(Y,X);D.overlapR=tt,V.overlapR=tt;var yt=a(Y,X),Ft=(tt+P.EPSILON)*Math.cos(yt),ee=(tt+P.EPSILON)*Math.sin(yt),It={overlap:tt,result:!1,x:Ft,y:ee};if(B&&(!rt||rt&&tt!==0))return It.result=!0,It;if(!rt&&tt===0||$&&J||D.customSeparateX||V.customSeparateX)return It.x=void 0,It.y=void 0,It;var Dt=!D.pushable&&!V.pushable;if(rt){var he=Y.x-X.x,Xe=Y.y-X.y,Jt=Math.sqrt(Math.pow(he,2)+Math.pow(Xe,2)),ye=(X.x-Y.x)/Jt||0,be=(X.y-Y.y)/Jt||0,pi=2*(q.x*ye+q.y*be-Q.x*ye-Q.y*be)/(D.mass+V.mass);($||J||!D.pushable||!V.pushable)&&(pi*=2),!$&&D.pushable&&(q.x=q.x-pi/D.mass*ye,q.y=q.y-pi/D.mass*be,q.multiply(D.bounce)),!J&&V.pushable&&(Q.x=Q.x+pi/V.mass*ye,Q.y=Q.y+pi/V.mass*be,Q.multiply(V.bounce)),!$&&!J&&(Ft*=.5,ee*=.5),(!$||D.pushable||Dt)&&(D.x-=Ft,D.y-=ee,D.updateCenter()),(!J||V.pushable||Dt)&&(V.x+=Ft,V.y+=ee,V.updateCenter()),It.result=!0}else!$&&(D.pushable||Dt)&&(D.x-=Ft,D.y-=ee,D.updateCenter()),!J&&(V.pushable||Dt)&&(V.x+=Ft,V.y+=ee,V.updateCenter()),It.x=void 0,It.y=void 0;return It},intersects:function(D,V){return D===V?!1:!D.isCircle&&!V.isCircle?!(D.right<=V.left||D.bottom<=V.top||D.left>=V.right||D.top>=V.bottom):D.isCircle?V.isCircle?v(D.center,V.center)<=D.halfWidth+V.halfWidth:this.circleBodyIntersects(D,V):this.circleBodyIntersects(V,D)},circleBodyIntersects:function(D,V){var B=h(D.center.x,V.left,V.right),W=h(D.center.y,V.top,V.bottom),H=(D.center.x-B)*(D.center.x-B),Y=(D.center.y-W)*(D.center.y-W);return H+Y<=D.halfWidth*D.halfWidth},overlap:function(D,V,B,W,H){return B===void 0&&(B=null),W===void 0&&(W=null),H===void 0&&(H=B),this.collideObjects(D,V,B,W,H,!0)},collide:function(D,V,B,W,H){return B===void 0&&(B=null),W===void 0&&(W=null),H===void 0&&(H=B),this.collideObjects(D,V,B,W,H,!1)},collideObjects:function(D,V,B,W,H,Y){var X,$;D.isParent&&(D.physicsType===void 0||V===void 0||D===V)&&(D=D.children.entries),V&&V.isParent&&V.physicsType===void 0&&(V=V.children.entries);var J=Array.isArray(D),q=Array.isArray(V);if(this._total=0,!J&&!q)this.collideHandler(D,V,B,W,H,Y);else if(!J&&q)for(X=0;X<V.length;X++)this.collideHandler(D,V[X],B,W,H,Y);else if(J&&!q)if(V)for(X=0;X<D.length;X++)this.collideHandler(D[X],V,B,W,H,Y);else for(X=0;X<D.length;X++){var Q=D[X];for($=X+1;$<D.length;$++)X!==$&&this.collideHandler(Q,D[$],B,W,H,Y)}else for(X=0;X<D.length;X++)for($=0;$<V.length;$++)this.collideHandler(D[X],V[$],B,W,H,Y);return this._total>0},collideHandler:function(D,V,B,W,H,Y){if(V===void 0&&D.isParent)return this.collideGroupVsGroup(D,D,B,W,H,Y);if(!D||!V)return!1;if(D.body||D.isBody){if(V.body||V.isBody)return this.collideSpriteVsSprite(D,V,B,W,H,Y);if(V.isParent)return this.collideSpriteVsGroup(D,V,B,W,H,Y);if(V.isTilemap)return this.collideSpriteVsTilemapLayer(D,V,B,W,H,Y)}else if(D.isParent){if(V.body||V.isBody)return this.collideSpriteVsGroup(V,D,B,W,H,Y);if(V.isParent)return this.collideGroupVsGroup(D,V,B,W,H,Y);if(V.isTilemap)return this.collideGroupVsTilemapLayer(D,V,B,W,H,Y)}else if(D.isTilemap){if(V.body||V.isBody)return this.collideSpriteVsTilemapLayer(V,D,B,W,H,Y);if(V.isParent)return this.collideGroupVsTilemapLayer(V,D,B,W,H,Y)}},canCollide:function(D,V){return D&&V&&(D.collisionMask&V.collisionCategory)!==0&&(V.collisionMask&D.collisionCategory)!==0},collideSpriteVsSprite:function(D,V,B,W,H,Y){var X=D.isBody?D:D.body,$=V.isBody?V:V.body;return this.canCollide(X,$)?(this.separate(X,$,W,H,Y)&&(B&&B.call(H,D,V),this._total++),!0):!1},collideSpriteVsGroup:function(D,V,B,W,H,Y){var X=D.isBody?D:D.body;if(!(V.getLength()===0||!X||!X.enable||X.checkCollision.none||!this.canCollide(X,V))){var $,J,q;if(this.useTree||V.physicsType===l.STATIC_BODY){var Q=this.treeMinMax;Q.minX=X.left,Q.minY=X.top,Q.maxX=X.right,Q.maxY=X.bottom;var tt=V.physicsType===l.DYNAMIC_BODY?this.tree.search(Q):this.staticTree.search(Q);for(J=tt.length,$=0;$<J;$++)q=tt[$],!(X===q||!q.enable||q.checkCollision.none||!V.contains(q.gameObject))&&this.separate(X,q,W,H,Y)&&(B&&B.call(H,X.gameObject,q.gameObject),this._total++)}else{var rt=V.getChildren(),et=V.children.entries.indexOf(D);for(J=rt.length,$=0;$<J;$++)q=rt[$].body,!(!q||$===et||!q.enable)&&this.separate(X,q,W,H,Y)&&(B&&B.call(H,X.gameObject,q.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(D,V,B,W,H,Y){if(!this.canCollide(D,V))return!1;var X=D.getChildren();if(X.length===0)return!1;for(var $=!1,J=0;J<X.length;J++)(X[J].body||X[J].isBody)&&this.collideSpriteVsTilemapLayer(X[J],V,B,W,H,Y)&&($=!0);return $},collideTiles:function(D,V,B,W,H){return V.length===0||D.body&&!D.body.enable||D.isBody&&!D.enable?!1:this.collideSpriteVsTilesHandler(D,V,B,W,H,!1,!1)},overlapTiles:function(D,V,B,W,H){return V.length===0||D.body&&!D.body.enable||D.isBody&&!D.enable?!1:this.collideSpriteVsTilesHandler(D,V,B,W,H,!0,!1)},collideSpriteVsTilemapLayer:function(D,V,B,W,H,Y){var X=D.isBody?D:D.body;if(!X.enable||X.checkCollision.none||!this.canCollide(X,V))return!1;var $=V.layer,J=X.x-$.tileWidth*V.scaleX,q=X.y-$.tileHeight*V.scaleY,Q=X.width+$.tileWidth*V.scaleX,tt=X.height+$.tileHeight*V.scaleY,rt=Y?null:this.tileFilterOptions,et=E(J,q,Q,tt,rt,V.scene.cameras.main,V.layer);return et.length===0?!1:this.collideSpriteVsTilesHandler(D,et,B,W,H,Y,!0)},collideSpriteVsTilesHandler:function(D,V,B,W,H,Y,X){for(var $=D.isBody?D:D.body,J,q={left:0,right:0,top:0,bottom:0},Q,tt=!1,rt=0;rt<V.length;rt++){J=V[rt],Q=J.tilemapLayer;var et=Q.tileToWorldXY(J.x,J.y);q.left=et.x,q.top=et.y,q.right=q.left+J.width*Q.scaleX,q.bottom=q.top+J.height*Q.scaleY,G(q,$)&&(!W||W.call(H,D,J))&&w(J,D)&&(Y||R(rt,$,J,q,Q,this.TILE_BIAS,X))&&(this._total++,tt=!0,B&&B.call(H,D,J),Y&&$.onOverlap?this.emit(m.TILE_OVERLAP,D,J,$):$.onCollide&&this.emit(m.TILE_COLLIDE,D,J,$))}return tt},collideGroupVsGroup:function(D,V,B,W,H,Y){if(!(D.getLength()===0||V.getLength()===0||!this.canCollide(D,V)))for(var X=D.getChildren(),$=0;$<X.length;$++)this.collideSpriteVsGroup(X[$],V,B,W,H,Y)},wrap:function(D,V){D.body?this.wrapObject(D,V):D.getChildren?this.wrapArray(D.getChildren(),V):Array.isArray(D)?this.wrapArray(D,V):this.wrapObject(D,V)},wrapArray:function(D,V){for(var B=0;B<D.length;B++)this.wrapObject(D[B],V)},wrapObject:function(D,V){V===void 0&&(V=0),D.x=N(D.x,this.bounds.left-V,this.bounds.right+V),D.y=N(D.y,this.bounds.top-V,this.bounds.bottom+V)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});n.exports=k},1093:n=>{var o={setAcceleration:function(r,a){return this.body.acceleration.set(r,a),this},setAccelerationX:function(r){return this.body.acceleration.x=r,this},setAccelerationY:function(r){return this.body.acceleration.y=r,this}};n.exports=o},59023:n=>{var o={setAngularVelocity:function(r){return this.body.angularVelocity=r,this},setAngularAcceleration:function(r){return this.body.angularAcceleration=r,this},setAngularDrag:function(r){return this.body.angularDrag=r,this}};n.exports=o},62069:n=>{var o={setBounce:function(r,a){return this.body.bounce.set(r,a),this},setBounceX:function(r){return this.body.bounce.x=r,this},setBounceY:function(r){return this.body.bounce.y=r,this},setCollideWorldBounds:function(r,a,p,h){return this.body.setCollideWorldBounds(r,a,p,h),this}};n.exports=o},78389:(n,o,r)=>{var a=r(79599),p={setCollisionCategory:function(h){var u=this.body?this.body:this;return u.collisionCategory=h,this},willCollideWith:function(h){var u=this.body?this.body:this;return(u.collisionMask&h)!==0},addCollidesWith:function(h){var u=this.body?this.body:this;return u.collisionMask=u.collisionMask|h,this},removeCollidesWith:function(h){var u=this.body?this.body:this;return u.collisionMask=u.collisionMask&~h,this},setCollidesWith:function(h){var u=this.body?this.body:this;return u.collisionMask=a(h),this},resetCollisionCategory:function(){var h=this.body?this.body:this;return h.collisionCategory=1,h.collisionMask=2147483647,this}};n.exports=p},87118:n=>{var o={setDebug:function(r,a,p){return this.debugShowBody=r,this.debugShowVelocity=a,this.debugBodyColor=p,this},setDebugBodyColor:function(r){return this.body.debugBodyColor=r,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(r){this.body.debugShowBody=r}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(r){this.body.debugShowVelocity=r}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(r){this.body.debugBodyColor=r}}};n.exports=o},52819:n=>{var o={setDrag:function(r,a){return this.body.drag.set(r,a),this},setDragX:function(r){return this.body.drag.x=r,this},setDragY:function(r){return this.body.drag.y=r,this},setDamping:function(r){return this.body.useDamping=r,this}};n.exports=o},4074:n=>{var o={setDirectControl:function(r){return this.body.setDirectControl(r),this},enableBody:function(r,a,p,h,u){return r&&this.body.reset(a,p),h&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(r,a){return r===void 0&&(r=!1),a===void 0&&(a=!1),this.body.stop(),this.body.enable=!1,r&&(this.body.gameObject.active=!1),a&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};n.exports=o},40831:n=>{var o={setFriction:function(r,a){return this.body.friction.set(r,a),this},setFrictionX:function(r){return this.body.friction.x=r,this},setFrictionY:function(r){return this.body.friction.y=r,this}};n.exports=o},26775:n=>{var o={setGravity:function(r,a){return this.body.gravity.set(r,a),this},setGravityX:function(r){return this.body.gravity.x=r,this},setGravityY:function(r){return this.body.gravity.y=r,this}};n.exports=o},9437:n=>{var o={setImmovable:function(r){return r===void 0&&(r=!0),this.body.immovable=r,this}};n.exports=o},30621:n=>{var o={setMass:function(r){return this.body.mass=r,this}};n.exports=o},72441:(n,o,r)=>{var a=r(47956),p=r(96503),h=r(2044),u=r(81491),f=function(l,d,v,c,m,g){var y=a(l,d-c,v-c,2*c,2*c,m,g);if(y.length===0)return y;for(var x=new p(d,v,c),C=new p,S=[],E=0;E<y.length;E++){var T=y[E];T.isCircle?(C.setTo(T.center.x,T.center.y,T.halfWidth),h(x,C)&&S.push(T)):u(x,T)&&S.push(T)}return S};n.exports=f},47956:n=>{var o=function(r,a,p,h,u,f,l){f===void 0&&(f=!0),l===void 0&&(l=!1);var d=[],v=[],c=r.treeMinMax;if(c.minX=a,c.minY=p,c.maxX=a+h,c.maxY=p+u,l&&(v=r.staticTree.search(c)),f&&r.useTree)d=r.tree.search(c);else if(f){var m=r.bodies,g={position:{x:a,y:p},left:a,top:p,right:a+h,bottom:p+u,isCircle:!1},y=r.intersects;m.iterate(function(x){y(x,g)&&d.push(x)})}return v.concat(d)};n.exports=o},62121:n=>{var o={setPushable:function(r){return r===void 0&&(r=!0),this.body.pushable=r,this}};n.exports=o},29384:n=>{var o={setOffset:function(r,a){return this.body.setOffset(r,a),this},setSize:function(r,a,p){return this.body.setSize(r,a,p),this},setBodySize:function(r,a,p){return this.body.setSize(r,a,p),this},setCircle:function(r,a,p){return this.body.setCircle(r,a,p),this}};n.exports=o},15098:n=>{var o={setVelocity:function(r,a){return this.body.setVelocity(r,a),this},setVelocityX:function(r){return this.body.setVelocityX(r),this},setVelocityY:function(r){return this.body.setVelocityY(r),this},setMaxVelocity:function(r,a){return this.body.maxVelocity.set(r,a),this}};n.exports=o},92209:(n,o,r)=>{n.exports={Acceleration:r(1093),Angular:r(59023),Bounce:r(62069),Collision:r(78389),Debug:r(87118),Drag:r(52819),Enable:r(4074),Friction:r(40831),Gravity:r(26775),Immovable:r(9437),Mass:r(30621),OverlapCirc:r(72441),OverlapRect:r(47956),Pushable:r(62121),Size:r(29384),Velocity:r(15098)}},37747:n=>{var o={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};n.exports=o},20009:n=>{n.exports="collide"},36768:n=>{n.exports="overlap"},60473:n=>{n.exports="pause"},89954:n=>{n.exports="resume"},61804:n=>{n.exports="tilecollide"},7161:n=>{n.exports="tileoverlap"},34689:n=>{n.exports="worldbounds"},16006:n=>{n.exports="worldstep"},63012:(n,o,r)=>{n.exports={COLLIDE:r(20009),OVERLAP:r(36768),PAUSE:r(60473),RESUME:r(89954),TILE_COLLIDE:r(61804),TILE_OVERLAP:r(7161),WORLD_BOUNDS:r(34689),WORLD_STEP:r(16006)}},27064:(n,o,r)=>{var a=r(37747),p=r(79291),h={ArcadePhysics:r(86689),Body:r(37742),Collider:r(79342),Components:r(92209),Events:r(63012),Factory:r(66022),GetCollidesWith:r(79599),GetOverlapX:r(64897),GetOverlapY:r(45170),SeparateX:r(14087),SeparateY:r(89936),Group:r(60758),Image:r(71289),Sprite:r(13759),StaticBody:r(72624),StaticGroup:r(71464),Tilemap:r(55173),World:r(82248)};h=p(!1,h,a),n.exports=h},96602:n=>{var o=function(r,a){return r.collisionCallback?!r.collisionCallback.call(r.collisionCallbackContext,a,r):r.layer.callbacks[r.index]?!r.layer.callbacks[r.index].callback.call(r.layer.callbacks[r.index].callbackContext,a,r):!0};n.exports=o},36294:n=>{var o=function(r,a){a<0?(r.blocked.none=!1,r.blocked.left=!0):a>0&&(r.blocked.none=!1,r.blocked.right=!0),r.position.x-=a,r.updateCenter(),r.bounce.x===0?r.velocity.x=0:r.velocity.x=-r.velocity.x*r.bounce.x};n.exports=o},67013:n=>{var o=function(r,a){a<0?(r.blocked.none=!1,r.blocked.up=!0):a>0&&(r.blocked.none=!1,r.blocked.down=!0),r.position.y-=a,r.updateCenter(),r.bounce.y===0?r.velocity.y=0:r.velocity.y=-r.velocity.y*r.bounce.y};n.exports=o},40012:(n,o,r)=>{var a=r(21329),p=r(53442),h=r(2483),u=function(f,l,d,v,c,m,g){var y=v.left,x=v.top,C=v.right,S=v.bottom,E=d.faceLeft||d.faceRight,T=d.faceTop||d.faceBottom;if(g||(E=!0,T=!0),!E&&!T)return!1;var P=0,M=0,w=0,b=1;if(l.deltaAbsX()>l.deltaAbsY()?w=-1:l.deltaAbsX()<l.deltaAbsY()&&(b=-1),l.deltaX()!==0&&l.deltaY()!==0&&E&&T&&(w=Math.min(Math.abs(l.position.x-C),Math.abs(l.right-y)),b=Math.min(Math.abs(l.position.y-S),Math.abs(l.bottom-x))),w<b){if(E&&(P=a(l,d,y,C,m,g),P!==0&&!h(v,l)))return!0;T&&(M=p(l,d,x,S,m,g))}else{if(T&&(M=p(l,d,x,S,m,g),M!==0&&!h(v,l)))return!0;E&&(P=a(l,d,y,C,m,g))}return P!==0||M!==0};n.exports=u},21329:(n,o,r)=>{var a=r(36294),p=function(h,u,f,l,d,v){var c=0,m=u.faceLeft,g=u.faceRight,y=u.collideLeft,x=u.collideRight;return v||(m=!0,g=!0,y=!0,x=!0),h.deltaX()<0&&x&&h.checkCollision.left?g&&h.x<l&&(c=h.x-l,c<-d&&(c=0)):h.deltaX()>0&&y&&h.checkCollision.right&&m&&h.right>f&&(c=h.right-f,c>d&&(c=0)),c!==0&&(h.customSeparateX?h.overlapX=c:a(h,c)),c};n.exports=p},53442:(n,o,r)=>{var a=r(67013),p=function(h,u,f,l,d,v){var c=0,m=u.faceTop,g=u.faceBottom,y=u.collideUp,x=u.collideDown;return v||(m=!0,g=!0,y=!0,x=!0),h.deltaY()<0&&x&&h.checkCollision.up?g&&h.y<l&&(c=h.y-l,c<-d&&(c=0)):h.deltaY()>0&&y&&h.checkCollision.down&&m&&h.bottom>f&&(c=h.bottom-f,c>d&&(c=0)),c!==0&&(h.customSeparateY?h.overlapY=c:a(h,c)),c};n.exports=p},2483:n=>{var o=function(r,a){return!(a.right<=r.left||a.bottom<=r.top||a.position.x>=r.right||a.position.y>=r.bottom)};n.exports=o},55173:(n,o,r)=>{var a={ProcessTileCallbacks:r(96602),ProcessTileSeparationX:r(36294),ProcessTileSeparationY:r(67013),SeparateTile:r(40012),TileCheckX:r(21329),TileCheckY:r(53442),TileIntersectsBody:r(2483)};n.exports=a},44563:(n,o,r)=>{n.exports={Arcade:r(27064),Matter:r(3875)}},68174:(n,o,r)=>{var a=r(83419),p=r(26099),h=new a({initialize:function(){this.boundsCenter=new p,this.centerDiff=new p},parseBody:function(u){if(u=u.hasOwnProperty("body")?u.body:u,!u.hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var f=this.boundsCenter,l=this.centerDiff,d=u.bounds.max.x-u.bounds.min.x,v=u.bounds.max.y-u.bounds.min.y,c=d*u.centerOfMass.x,m=v*u.centerOfMass.y;return f.set(d/2,v/2),l.set(c-f.x,m-f.y),!0},getTopLeft:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f+d.x+v.x,l+d.y+v.y)}return!1},getTopCenter:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f+v.x,l+d.y+v.y)}return!1},getTopRight:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f-(d.x-v.x),l+d.y+v.y)}return!1},getLeftCenter:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f+d.x+v.x,l+v.y)}return!1},getCenter:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.centerDiff;return new p(f+d.x,l+d.y)}return!1},getRightCenter:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f-(d.x-v.x),l+v.y)}return!1},getBottomLeft:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f+d.x+v.x,l-(d.y-v.y))}return!1},getBottomCenter:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f+v.x,l-(d.y-v.y))}return!1},getBottomRight:function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),this.parseBody(u)){var d=this.boundsCenter,v=this.centerDiff;return new p(f-(d.x-v.x),l-(d.y-v.y))}return!1}});n.exports=h},19933:(n,o,r)=>{var a=r(6790);a.Body=r(22562),a.Composite=r(69351),a.World=r(4372),a.Collision=r(52284),a.Detector=r(81388),a.Pairs=r(99561),a.Pair=r(4506),a.Query=r(73296),a.Resolver=r(66272),a.Constraint=r(48140),a.Common=r(53402),a.Engine=r(48413),a.Events=r(35810),a.Sleeping=r(53614),a.Plugin=r(73832),a.Bodies=r(66280),a.Composites=r(74116),a.Axes=r(66615),a.Bounds=r(15647),a.Svg=r(74058),a.Vector=r(31725),a.Vertices=r(41598),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,n.exports=a},28137:(n,o,r)=>{var a=r(66280),p=r(83419),h=r(74116),u=r(48140),f=r(74058),l=r(75803),d=r(23181),v=r(34803),c=r(73834),m=r(19496),g=r(85791),y=r(98713),x=r(41598),C=new p({initialize:function(E){this.world=E,this.scene=E.scene,this.sys=E.scene.sys},rectangle:function(S,E,T,P,M){var w=a.rectangle(S,E,T,P,M);return this.world.add(w),w},trapezoid:function(S,E,T,P,M,w){var b=a.trapezoid(S,E,T,P,M,w);return this.world.add(b),b},circle:function(S,E,T,P,M){var w=a.circle(S,E,T,P,M);return this.world.add(w),w},polygon:function(S,E,T,P,M){var w=a.polygon(S,E,T,P,M);return this.world.add(w),w},fromVertices:function(S,E,T,P,M,w,b){typeof T=="string"&&(T=x.fromPath(T));var I=a.fromVertices(S,E,T,P,M,w,b);return this.world.add(I),I},fromPhysicsEditor:function(S,E,T,P,M){M===void 0&&(M=!0);var w=m.parseBody(S,E,T,P);return M&&!this.world.has(w)&&this.world.add(w),w},fromSVG:function(S,E,T,P,M,w){P===void 0&&(P=1),M===void 0&&(M={}),w===void 0&&(w=!0);for(var b=T.getElementsByTagName("path"),I=[],R=0;R<b.length;R++){var A=f.pathToVertices(b[R],30);P!==1&&x.scale(A,P,P),I.push(A)}var L=a.fromVertices(S,E,I,M);return w&&this.world.add(L),L},fromJSON:function(S,E,T,P,M){P===void 0&&(P={}),M===void 0&&(M=!0);var w=g.parseBody(S,E,T,P);return w&&M&&this.world.add(w),w},imageStack:function(S,E,T,P,M,w,b,I,R){b===void 0&&(b=0),I===void 0&&(I=0),R===void 0&&(R={});var A=this.world,L=this.sys.displayList;R.addToWorld=!1;var O=h.stack(T,P,M,w,b,I,function(F,G){var U=new d(A,F,G,S,E,R);return L.add(U),U.body});return A.add(O),O},stack:function(S,E,T,P,M,w,b){var I=h.stack(S,E,T,P,M,w,b);return this.world.add(I),I},pyramid:function(S,E,T,P,M,w,b){var I=h.pyramid(S,E,T,P,M,w,b);return this.world.add(I),I},chain:function(S,E,T,P,M,w){return h.chain(S,E,T,P,M,w)},mesh:function(S,E,T,P,M){return h.mesh(S,E,T,P,M)},newtonsCradle:function(S,E,T,P,M){var w=h.newtonsCradle(S,E,T,P,M);return this.world.add(w),w},car:function(S,E,T,P,M){var w=h.car(S,E,T,P,M);return this.world.add(w),w},softBody:function(S,E,T,P,M,w,b,I,R,A){var L=h.softBody(S,E,T,P,M,w,b,I,R,A);return this.world.add(L),L},joint:function(S,E,T,P,M){return this.constraint(S,E,T,P,M)},spring:function(S,E,T,P,M){return this.constraint(S,E,T,P,M)},constraint:function(S,E,T,P,M){P===void 0&&(P=1),M===void 0&&(M={}),M.bodyA=S.type==="body"?S:S.body,M.bodyB=E.type==="body"?E:E.body,isNaN(T)||(M.length=T),M.stiffness=P;var w=u.create(M);return this.world.add(w),w},worldConstraint:function(S,E,T,P){T===void 0&&(T=1),P===void 0&&(P={}),P.bodyB=S.type==="body"?S:S.body,isNaN(E)||(P.length=E),P.stiffness=T;var M=u.create(P);return this.world.add(M),M},mouseSpring:function(S){return this.pointerConstraint(S)},pointerConstraint:function(S){S===void 0&&(S={}),S.hasOwnProperty("render")||(S.render={visible:!1});var E=new y(this.scene,this.world,S);return this.world.add(E.constraint),E},image:function(S,E,T,P,M){var w=new d(this.world,S,E,T,P,M);return this.sys.displayList.add(w),w},tileBody:function(S,E){return new c(this.world,S,E)},sprite:function(S,E,T,P,M){var w=new v(this.world,S,E,T,P,M);return this.sys.displayList.add(w),this.sys.updateList.add(w),w},gameObject:function(S,E,T){return l(this.world,S,E,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});n.exports=C},75803:(n,o,r)=>{var a=r(31884),p=r(95540),h=r(26099);function u(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}var f=function(l,d,v,c){v===void 0&&(v={}),c===void 0&&(c=!0);var m=d.x,g=d.y;d.body={temp:!0,position:{x:m,y:g}};var y=[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity];if(y.forEach(function(C){for(var S in C)u(C[S])?Object.defineProperty(d,S,{get:C[S].get,set:C[S].set}):Object.defineProperty(d,S,{value:C[S]})}),d.world=l,d._tempVec2=new h(m,g),v.hasOwnProperty("type")&&v.type==="body")d.setExistingBody(v,c);else{var x=p(v,"shape",null);x||(x="rectangle"),v.addToWorld=c,d.setBody(x,v)}return d};n.exports=f},23181:(n,o,r)=>{var a=r(83419),p=r(31884),h=r(95643),u=r(95540),f=r(88571),l=r(72699),d=r(26099),v=new a({Extends:f,Mixins:[p.Bounce,p.Collision,p.Force,p.Friction,p.Gravity,p.Mass,p.Sensor,p.SetBody,p.Sleep,p.Static,p.Transform,p.Velocity,l],initialize:function(m,g,y,x,C,S){h.call(this,m.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(x,C),this.setSizeToFrame(),this.setOrigin(),this.world=m,this._tempVec2=new d(g,y);var E=u(S,"shape",null);E?this.setBody(E,S):this.setRectangle(this.width,this.height,S),this.setPosition(g,y),this.initPipeline(),this.initPostPipeline(!0)}});n.exports=v},42045:(n,o,r)=>{var a=r(60461),p=r(66615),h=r(66280),u=r(22562),f=r(68174),l=r(15647),d=r(83419),v=r(52284),c=r(53402),m=r(69351),g=r(74116),y=r(48140),x=r(81388),C=r(20339),S=r(28137),E=r(95540),T=r(35154),P=r(46975),M=r(4506),w=r(99561),b=r(37277),I=r(73296),R=r(66272),A=r(44594),L=r(74058),O=r(31725),F=r(41598),G=r(68243);c.setDecomp(r(55973));var U=new d({initialize:function(N){this.scene=N,this.systems=N.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=u,this.composite=m,this.collision=v,this.detector=x,this.pair=M,this.pairs=w,this.query=I,this.resolver=R,this.constraint=y,this.bodies=h,this.composites=g,this.axes=p,this.bounds=l,this.svg=L,this.vector=O,this.vertices=F,this.verts=F,this._tempVec2=O.create(),R._restingThresh=T(this.config,"restingThresh",4),R._restingThreshTangent=T(this.config,"restingThreshTangent",6),R._positionDampen=T(this.config,"positionDampen",.9),R._positionWarming=T(this.config,"positionWarming",.8),R._frictionNormalMultiplier=T(this.config,"frictionNormalMultiplier",5),N.sys.events.once(A.BOOT,this.boot,this),N.sys.events.on(A.START,this.start,this)},boot:function(){this.world=new G(this.scene,this.config),this.add=new S(this.world),this.bodyBounds=new f,this.systems.events.once(A.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new G(this.scene,this.config),this.add=new S(this.world));var z=this.systems.events;z.on(A.UPDATE,this.world.update,this.world),z.on(A.POST_UPDATE,this.world.postUpdate,this.world),z.once(A.SHUTDOWN,this.shutdown,this)},getConfig:function(){var z=this.systems.game.config.physics,N=this.systems.settings.physics,k=P(E(N,"matter",{}),E(z,"matter",{}));return k},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(z,N){this.world.step(z,N)},containsPoint:function(z,N,k){z=this.getMatterBodies(z);var D=O.create(N,k),V=I.point(z,D);return V.length>0},intersectPoint:function(z,N,k){k=this.getMatterBodies(k);var D=O.create(z,N),V=[],B=I.point(k,D);return B.forEach(function(W){V.indexOf(W)===-1&&V.push(W)}),V},intersectRect:function(z,N,k,D,V,B){V===void 0&&(V=!1),B=this.getMatterBodies(B);var W={min:{x:z,y:N},max:{x:z+k,y:N+D}},H=[],Y=I.region(B,W,V);return Y.forEach(function(X){H.indexOf(X)===-1&&H.push(X)}),H},intersectRay:function(z,N,k,D,V,B){V===void 0&&(V=1),B=this.getMatterBodies(B);for(var W=[],H=I.ray(B,O.create(z,N),O.create(k,D),V),Y=0;Y<H.length;Y++)W.push(H[Y].body);return W},intersectBody:function(z,N){N=this.getMatterBodies(N);for(var k=[],D=I.collides(z,N),V=0;V<D.length;V++){var B=D[V];B.bodyA===z?k.push(B.bodyB):k.push(B.bodyA)}return k},overlap:function(z,N,k,D,V){k===void 0&&(k=null),D===void 0&&(D=null),V===void 0&&(V=k),Array.isArray(z)||(z=[z]),z=this.getMatterBodies(z),N=this.getMatterBodies(N);for(var B=!1,W=0;W<z.length;W++)for(var H=z[W],Y=I.collides(H,N),X=0;X<Y.length;X++){var $=Y[X],J=$.bodyA.id===H.id?$.bodyB:$.bodyA;if(!D||D.call(V,H,J,$)){if(B=!0,k)k.call(V,H,J,$);else if(!D)return!0}}return B},setCollisionCategory:function(z,N){return z=this.getMatterBodies(z),z.forEach(function(k){k.collisionFilter.category=N}),this},setCollisionGroup:function(z,N){return z=this.getMatterBodies(z),z.forEach(function(k){k.collisionFilter.group=N}),this},setCollidesWith:function(z,N){z=this.getMatterBodies(z);var k=0;if(!Array.isArray(N))k=N;else for(var D=0;D<N.length;D++)k|=N[D];return z.forEach(function(V){V.collisionFilter.mask=k}),this},getMatterBodies:function(z){if(!z)return this.world.getAllBodies();Array.isArray(z)||(z=[z]);for(var N=[],k=0;k<z.length;k++){var D=z[k].hasOwnProperty("body")?z[k].body:z[k];N.push(D)}return N},setVelocity:function(z,N,k){z=this.getMatterBodies(z);var D=this._tempVec2;return D.x=N,D.y=k,z.forEach(function(V){u.setVelocity(V,D)}),this},setVelocityX:function(z,N){z=this.getMatterBodies(z);var k=this._tempVec2;return k.x=N,z.forEach(function(D){k.y=D.velocity.y,u.setVelocity(D,k)}),this},setVelocityY:function(z,N){z=this.getMatterBodies(z);var k=this._tempVec2;return k.y=N,z.forEach(function(D){k.x=D.velocity.x,u.setVelocity(D,k)}),this},setAngularVelocity:function(z,N){return z=this.getMatterBodies(z),z.forEach(function(k){u.setAngularVelocity(k,N)}),this},applyForce:function(z,N){z=this.getMatterBodies(z);var k=this._tempVec2;return z.forEach(function(D){k.x=D.position.x,k.y=D.position.y,u.applyForce(D,k,N)}),this},applyForceFromPosition:function(z,N,k,D){z=this.getMatterBodies(z);var V=this._tempVec2;return z.forEach(function(B){D===void 0&&(D=B.angle),V.x=k*Math.cos(D),V.y=k*Math.sin(D),u.applyForce(B,N,V)}),this},applyForceFromAngle:function(z,N,k){z=this.getMatterBodies(z);var D=this._tempVec2;return z.forEach(function(V){k===void 0&&(k=V.angle),D.x=N*Math.cos(k),D.y=N*Math.sin(k),u.applyForce(V,{x:V.position.x,y:V.position.y},D)}),this},getConstraintLength:function(z){var N=z.pointA.x,k=z.pointA.y,D=z.pointB.x,V=z.pointB.y;return z.bodyA&&(N+=z.bodyA.position.x,k+=z.bodyA.position.y),z.bodyB&&(D+=z.bodyB.position.x,V+=z.bodyB.position.y),C(N,k,D,V)},alignBody:function(z,N,k,D){z=z.hasOwnProperty("body")?z.body:z;var V;switch(D){case a.TOP_LEFT:case a.LEFT_TOP:V=this.bodyBounds.getTopLeft(z,N,k);break;case a.TOP_CENTER:V=this.bodyBounds.getTopCenter(z,N,k);break;case a.TOP_RIGHT:case a.RIGHT_TOP:V=this.bodyBounds.getTopRight(z,N,k);break;case a.LEFT_CENTER:V=this.bodyBounds.getLeftCenter(z,N,k);break;case a.CENTER:V=this.bodyBounds.getCenter(z,N,k);break;case a.RIGHT_CENTER:V=this.bodyBounds.getRightCenter(z,N,k);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:V=this.bodyBounds.getBottomLeft(z,N,k);break;case a.BOTTOM_CENTER:V=this.bodyBounds.getBottomCenter(z,N,k);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:V=this.bodyBounds.getBottomRight(z,N,k);break}return V&&u.setPosition(z,V),this},shutdown:function(){var z=this.systems.events;this.world&&(z.off(A.UPDATE,this.world.update,this.world),z.off(A.POST_UPDATE,this.world.postUpdate,this.world)),z.off(A.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.systems=null}});b.register("MatterPhysics",U,"matterPhysics"),n.exports=U},34803:(n,o,r)=>{var a=r(9674),p=r(83419),h=r(31884),u=r(95643),f=r(95540),l=r(72699),d=r(68287),v=r(26099),c=new p({Extends:d,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,l],initialize:function(g,y,x,C,S,E){u.call(this,g.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(C,S),this.setSizeToFrame(),this.setOrigin(),this.world=g,this._tempVec2=new v(y,x);var T=f(E,"shape",null);T?this.setBody(T,E):this.setRectangle(this.width,this.height,E),this.setPosition(y,x),this.initPipeline(),this.initPostPipeline(!0)}});n.exports=c},73834:(n,o,r)=>{var a=r(66280),p=r(22562),h=r(83419),u=r(31884),f=r(62644),l=r(50792),d=r(95540),v=r(97022),c=r(41598),m=new h({Extends:l,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(y,x,C){l.call(this),this.tile=x,this.world=y,x.physics.matterBody&&x.physics.matterBody.destroy(),x.physics.matterBody=this;var S=d(C,"body",null),E=d(C,"addToWorld",!0);if(S)this.setBody(S,E);else{var T=x.getCollisionGroup(),P=d(T,"objects",[]);P.length>0?this.setFromTileCollision(C):this.setFromTileRectangle(C)}if(x.flipX||x.flipY){var M={x:x.getCenterX(),y:x.getCenterY()},w=x.flipX?-1:1,b=x.flipY?-1:1;p.scale(S,w,b,M)}},setFromTileRectangle:function(g){g===void 0&&(g={}),v(g,"isStatic")||(g.isStatic=!0),v(g,"addToWorld")||(g.addToWorld=!0);var y=this.tile.getBounds(),x=y.x+y.width/2,C=y.y+y.height/2,S=a.rectangle(x,C,y.width,y.height,g);return this.setBody(S,g.addToWorld),this},setFromTileCollision:function(g){g===void 0&&(g={}),v(g,"isStatic")||(g.isStatic=!0),v(g,"addToWorld")||(g.addToWorld=!0);for(var y=this.tile.tilemapLayer.scaleX,x=this.tile.tilemapLayer.scaleY,C=this.tile.getLeft(),S=this.tile.getTop(),E=this.tile.getCollisionGroup(),T=d(E,"objects",[]),P=[],M=0;M<T.length;M++){var w=T[M],b=C+w.x*y,I=S+w.y*x,R=w.width*y,A=w.height*x,L=null;if(w.rectangle)L=a.rectangle(b+R/2,I+A/2,R,A,g);else if(w.ellipse)L=a.circle(b+R/2,I+A/2,R/2,g);else if(w.polygon||w.polyline){var O=w.polygon?w.polygon:w.polyline,F=O.map(function(N){return{x:N.x*y,y:N.y*x}}),G=c.create(F),U=c.centre(G);b+=U.x,I+=U.y,L=a.fromVertices(b,I,G,g)}L&&P.push(L)}if(P.length===1)this.setBody(P[0],g.addToWorld);else if(P.length>1){var z=f(g);z.parts=P,this.setBody(p.create(z),z.addToWorld)}return this},setBody:function(g,y){return y===void 0&&(y=!0),this.body&&this.removeBody(),this.body=g,this.body.gameObject=this,y&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});n.exports=m},19496:(n,o,r)=>{var a=r(66280),p=r(22562),h=r(53402),u=r(95540),f=r(41598),l={parseBody:function(d,v,c,m){m===void 0&&(m={});for(var g=u(c,"fixtures",[]),y=[],x=0;x<g.length;x++)for(var C=this.parseFixture(g[x]),S=0;S<C.length;S++)y.push(C[S]);var E=h.clone(c,!0);h.extend(E,m,!0),delete E.fixtures,delete E.type;var T=p.create(E);return p.setParts(T,y),p.setPosition(T,{x:d,y:v}),T},parseFixture:function(d){var v=h.extend({},!1,d);delete v.circle,delete v.vertices;var c;if(d.circle){var m=u(d.circle,"x"),g=u(d.circle,"y"),y=u(d.circle,"radius");c=[a.circle(m,g,y,v)]}else d.vertices&&(c=this.parseVertices(d.vertices,v));return c},parseVertices:function(d,v){v===void 0&&(v={});for(var c=[],m=0;m<d.length;m++)f.clockwiseSort(d[m]),c.push(p.create(h.extend({position:f.centre(d[m]),vertices:d[m]},v)));return a.flagCoincidentParts(c)}};n.exports=l},85791:(n,o,r)=>{var a=r(66280),p=r(22562),h={parseBody:function(u,f,l,d){d===void 0&&(d={});var v,c=l.vertices;if(c.length===1)d.vertices=c[0],v=p.create(d),a.flagCoincidentParts(v.parts);else{for(var m=[],g=0;g<c.length;g++){var y=p.create({vertices:c[g]});m.push(y)}a.flagCoincidentParts(m),d.parts=m,v=p.create(d)}return v.label=l.label,p.setPosition(v,{x:u,y:f}),v}};n.exports=h},98713:(n,o,r)=>{var a=r(15647),p=r(83419),h=r(69351),u=r(48140),f=r(81388),l=r(1121),d=r(8214),v=r(46975),c=r(53614),m=r(26099),g=r(41598),y=new p({initialize:function(C,S,E){E===void 0&&(E={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=C,this.world=S,this.camera=null,this.pointer=null,this.active=!0,this.position=new m,this.body=null,this.part=null,this.constraint=u.create(v(E,T)),this.world.on(l.BEFORE_UPDATE,this.update,this),C.sys.input.on(d.POINTER_DOWN,this.onDown,this),C.sys.input.on(d.POINTER_UP,this.onUp,this)},onDown:function(x){this.pointer||(this.pointer=x,this.camera=x.camera)},onUp:function(x){x===this.pointer&&(this.pointer=null)},getBody:function(x){var C=this.position,S=this.constraint;this.camera.getWorldPoint(x.x,x.y,C);for(var E=h.allBodies(this.world.localWorld),T=0;T<E.length;T++){var P=E[T];if(!P.ignorePointer&&a.contains(P.bounds,C)&&f.canCollide(P.collisionFilter,S.collisionFilter)&&this.hitTestBody(P,C))return this.world.emit(l.DRAG_START,P,this.part,this),!0}return!1},hitTestBody:function(x,C){for(var S=this.constraint,E=x.parts.length,T=E>1?1:0,P=T;P<E;P++){var M=x.parts[P];if(g.contains(M.vertices,C))return S.pointA=C,S.pointB={x:C.x-x.position.x,y:C.y-x.position.y},S.bodyB=x,S.angleB=x.angle,c.set(x,!1),this.part=M,this.body=x,!0}return!1},update:function(){var x=this.pointer,C=this.body;if(!this.active||!x){C&&this.stopDrag();return}if(!x.isDown&&C){this.stopDrag();return}else if(x.isDown){if(!this.camera||!C&&!this.getBody(x))return;C=this.body;var S=this.position,E=this.constraint;this.camera.getWorldPoint(x.x,x.y,S),E.pointA.x=S.x,E.pointA.y=S.y,c.set(C,!1),this.world.emit(l.DRAG,C,this)}},stopDrag:function(){var x=this.body,C=this.constraint;C.bodyB=null,C.pointB=null,this.pointer=null,this.body=null,this.part=null,x&&this.world.emit(l.DRAG_END,x,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(l.BEFORE_UPDATE,this.update),this.scene.sys.input.off(d.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(d.POINTER_UP,this.onUp,this)}});n.exports=y},68243:(n,o,r)=>{var a=r(66280),p=r(22562),h=r(83419),u=r(53402),f=r(69351),l=r(48413),d=r(50792),v=r(1121),c=r(95540),m=r(35154),g=r(22562),y=r(35810),x=r(73834),C=r(4372),S=r(13037),E=r(31725),T=new h({Extends:d,initialize:function(M,w){d.call(this),this.scene=M,this.engine=l.create(w),this.localWorld=this.engine.world;var b=m(w,"gravity",null);b?this.setGravity(b.x,b.y,b.scale):b===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=m(w,"enabled",!0),this.getDelta=m(w,"getDelta",this.update60Hz);var I=c(w,"runner",{}),R=c(I,"fps",!1);R&&(I.delta=1e3/c(I,"fps",60)),this.runner=S.create(I),this.autoUpdate=m(w,"autoUpdate",!0);var A=m(w,"debug",!1);if(this.drawDebug=typeof A=="object"?!0:A,this.debugGraphic,this.debugConfig={showAxes:c(A,"showAxes",!1),showAngleIndicator:c(A,"showAngleIndicator",!1),angleColor:c(A,"angleColor",15208787),showBroadphase:c(A,"showBroadphase",!1),broadphaseColor:c(A,"broadphaseColor",16757760),showBounds:c(A,"showBounds",!1),boundsColor:c(A,"boundsColor",16777215),showVelocity:c(A,"showVelocity",!1),velocityColor:c(A,"velocityColor",44783),showCollisions:c(A,"showCollisions",!1),collisionColor:c(A,"collisionColor",16094476),showSeparations:c(A,"showSeparations",!1),separationColor:c(A,"separationColor",16753920),showBody:c(A,"showBody",!0),showStaticBody:c(A,"showStaticBody",!0),showInternalEdges:c(A,"showInternalEdges",!1),renderFill:c(A,"renderFill",!1),renderLine:c(A,"renderLine",!0),fillColor:c(A,"fillColor",1075465),fillOpacity:c(A,"fillOpacity",1),lineColor:c(A,"lineColor",2678297),lineOpacity:c(A,"lineOpacity",1),lineThickness:c(A,"lineThickness",1),staticFillColor:c(A,"staticFillColor",857979),staticLineColor:c(A,"staticLineColor",1255396),showSleeping:c(A,"showSleeping",!1),staticBodySleepOpacity:c(A,"staticBodySleepOpacity",.7),sleepFillColor:c(A,"sleepFillColor",4605510),sleepLineColor:c(A,"sleepLineColor",10066585),showSensors:c(A,"showSensors",!0),sensorFillColor:c(A,"sensorFillColor",857979),sensorLineColor:c(A,"sensorLineColor",1255396),showPositions:c(A,"showPositions",!0),positionSize:c(A,"positionSize",4),positionColor:c(A,"positionColor",14697178),showJoint:c(A,"showJoint",!0),jointColor:c(A,"jointColor",14737474),jointLineOpacity:c(A,"jointLineOpacity",1),jointLineThickness:c(A,"jointLineThickness",2),pinSize:c(A,"pinSize",4),pinColor:c(A,"pinColor",4382944),springColor:c(A,"springColor",14697184),anchorColor:c(A,"anchorColor",15724527),anchorSize:c(A,"anchorSize",4),showConvexHulls:c(A,"showConvexHulls",!1),hullColor:c(A,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),c(w,"setBounds",!1)){var L=w.setBounds;if(typeof L=="boolean")this.setBounds();else{var O=c(L,"x",0),F=c(L,"y",0),G=c(L,"width",M.sys.scale.width),U=c(L,"height",M.sys.scale.height),z=c(L,"thickness",64),N=c(L,"left",!0),k=c(L,"right",!0),D=c(L,"top",!0),V=c(L,"bottom",!0);this.setBounds(O,F,G,U,z,N,k,D,V)}}},setCompositeRenderStyle:function(P){var M=P.bodies,w=P.constraints,b=P.composites,I,R,A;for(I=0;I<M.length;I++)R=M[I],A=R.render,this.setBodyRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.fillColor,A.fillOpacity);for(I=0;I<w.length;I++)R=w[I],A=R.render,this.setConstraintRenderStyle(R,A.lineColor,A.lineOpacity,A.lineThickness,A.pinSize,A.anchorColor,A.anchorSize);for(I=0;I<b.length;I++)R=b[I],this.setCompositeRenderStyle(R);return this},setBodyRenderStyle:function(P,M,w,b,I,R){var A=P.render,L=this.debugConfig;return A?(M==null&&(M=P.isStatic?L.staticLineColor:L.lineColor),w==null&&(w=L.lineOpacity),b==null&&(b=L.lineThickness),I==null&&(I=P.isStatic?L.staticFillColor:L.fillColor),R==null&&(R=L.fillOpacity),M!==!1&&(A.lineColor=M),w!==!1&&(A.lineOpacity=w),b!==!1&&(A.lineThickness=b),I!==!1&&(A.fillColor=I),R!==!1&&(A.fillOpacity=R),this):this},setConstraintRenderStyle:function(P,M,w,b,I,R,A){var L=P.render,O=this.debugConfig;if(!L)return this;if(M==null){var F=L.type;F==="line"?M=O.jointColor:F==="pin"?M=O.pinColor:F==="spring"&&(M=O.springColor)}return w==null&&(w=O.jointLineOpacity),b==null&&(b=O.jointLineThickness),I==null&&(I=O.pinSize),R==null&&(R=O.anchorColor),A==null&&(A=O.anchorSize),M!==!1&&(L.lineColor=M),w!==!1&&(L.lineOpacity=w),b!==!1&&(L.lineThickness=b),I!==!1&&(L.pinSize=I),R!==!1&&(L.anchorColor=R),A!==!1&&(L.anchorSize=A),this},setEventsProxy:function(){var P=this,M=this.engine,w=this.localWorld;this.drawDebug&&(y.on(w,"compositeModified",function(b){P.setCompositeRenderStyle(b)}),y.on(w,"beforeAdd",function(b){for(var I=[].concat(b.object),R=0;R<I.length;R++){var A=I[R],L=A.render;A.type==="body"?P.setBodyRenderStyle(A,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity):A.type==="composite"?P.setCompositeRenderStyle(A):A.type==="constraint"&&P.setConstraintRenderStyle(A,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize)}})),y.on(w,"beforeAdd",function(b){P.emit(v.BEFORE_ADD,b)}),y.on(w,"afterAdd",function(b){P.emit(v.AFTER_ADD,b)}),y.on(w,"beforeRemove",function(b){P.emit(v.BEFORE_REMOVE,b)}),y.on(w,"afterRemove",function(b){P.emit(v.AFTER_REMOVE,b)}),y.on(M,"beforeUpdate",function(b){P.emit(v.BEFORE_UPDATE,b)}),y.on(M,"afterUpdate",function(b){P.emit(v.AFTER_UPDATE,b)}),y.on(M,"collisionStart",function(b){var I=b.pairs,R,A;I.length>0&&I.map(function(L){R=L.bodyA,A=L.bodyB,R.gameObject&&R.gameObject.emit("collide",R,A,L),A.gameObject&&A.gameObject.emit("collide",A,R,L),y.trigger(R,"onCollide",{pair:L}),y.trigger(A,"onCollide",{pair:L}),R.onCollideCallback&&R.onCollideCallback(L),A.onCollideCallback&&A.onCollideCallback(L),R.onCollideWith[A.id]&&R.onCollideWith[A.id](A,L),A.onCollideWith[R.id]&&A.onCollideWith[R.id](R,L)}),P.emit(v.COLLISION_START,b,R,A)}),y.on(M,"collisionActive",function(b){var I=b.pairs,R,A;I.length>0&&I.map(function(L){R=L.bodyA,A=L.bodyB,R.gameObject&&R.gameObject.emit("collideActive",R,A,L),A.gameObject&&A.gameObject.emit("collideActive",A,R,L),y.trigger(R,"onCollideActive",{pair:L}),y.trigger(A,"onCollideActive",{pair:L}),R.onCollideActiveCallback&&R.onCollideActiveCallback(L),A.onCollideActiveCallback&&A.onCollideActiveCallback(L)}),P.emit(v.COLLISION_ACTIVE,b,R,A)}),y.on(M,"collisionEnd",function(b){var I=b.pairs,R,A;I.length>0&&I.map(function(L){R=L.bodyA,A=L.bodyB,R.gameObject&&R.gameObject.emit("collideEnd",R,A,L),A.gameObject&&A.gameObject.emit("collideEnd",A,R,L),y.trigger(R,"onCollideEnd",{pair:L}),y.trigger(A,"onCollideEnd",{pair:L}),R.onCollideEndCallback&&R.onCollideEndCallback(L),A.onCollideEndCallback&&A.onCollideEndCallback(L)}),P.emit(v.COLLISION_END,b,R,A)})},setBounds:function(P,M,w,b,I,R,A,L,O){return P===void 0&&(P=0),M===void 0&&(M=0),w===void 0&&(w=this.scene.sys.scale.width),b===void 0&&(b=this.scene.sys.scale.height),I===void 0&&(I=64),R===void 0&&(R=!0),A===void 0&&(A=!0),L===void 0&&(L=!0),O===void 0&&(O=!0),this.updateWall(R,"left",P-I,M-I,I,b+I*2),this.updateWall(A,"right",P+w,M-I,I,b+I*2),this.updateWall(L,"top",P,M-I,w,I),this.updateWall(O,"bottom",P,M+b,w,I),this},updateWall:function(P,M,w,b,I,R){var A=this.walls[M];P?(A&&C.remove(this.localWorld,A),w+=I/2,b+=R/2,this.walls[M]=this.create(w,b,I,R,{isStatic:!0,friction:0,frictionStatic:0})):(A&&C.remove(this.localWorld,A),this.walls[M]=null)},createDebugGraphic:function(){var P=this.scene.sys.add.graphics({x:0,y:0});return P.setDepth(Number.MAX_VALUE),this.debugGraphic=P,this.drawDebug=!0,P},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(P,M,w){return P===void 0&&(P=0),M===void 0&&(M=1),w===void 0&&(w=.001),this.localWorld.gravity.x=P,this.localWorld.gravity.y=M,this.localWorld.gravity.scale=w,this},create:function(P,M,w,b,I){var R=a.rectangle(P,M,w,b,I);return C.add(this.localWorld,R),R},add:function(P){return C.add(this.localWorld,P),this},remove:function(P,M){Array.isArray(P)||(P=[P]);for(var w=0;w<P.length;w++){var b=P[w],I=b.body?b.body:b;f.remove(this.localWorld,I,M)}return this},removeConstraint:function(P,M){return f.remove(this.localWorld,P,M),this},convertTilemapLayer:function(P,M){var w=P.layer,b=P.getTilesWithin(0,0,w.width,w.height,{isColliding:!0});return this.convertTiles(b,M),this},convertTiles:function(P,M){if(P.length===0)return this;for(var w=0;w<P.length;w++)new x(this,P[w],M);return this},nextGroup:function(P){return g.nextGroup(P)},nextCategory:function(){return g.nextCategory()},pause:function(){return this.enabled=!1,this.emit(v.PAUSE),this},resume:function(){return this.enabled=!0,this.runner.timeLastTick=u.now(),this.emit(v.RESUME),this},update:function(P){if(!(!this.enabled||!this.autoUpdate)){var M=this.engine,w=this.runner,b=u.now(),I=w.delta,R=0,A=P-w.timeLastTick;if((!A||!w.timeLastTick||A>Math.max(S._maxFrameDelta,w.maxFrameTime))&&(A=w.frameDelta||S._frameDeltaFallback),w.frameDeltaSmoothing){w.frameDeltaHistory.push(A),w.frameDeltaHistory=w.frameDeltaHistory.slice(-w.frameDeltaHistorySize);var L=w.frameDeltaHistory.slice(0).sort(),O=w.frameDeltaHistory.slice(L.length*S._smoothingLowerBound,L.length*S._smoothingUpperBound),F=S._mean(O);A=F||A}w.frameDeltaSnapping&&(A=1e3/Math.round(1e3/A)),w.frameDelta=A,w.timeLastTick=P,w.timeBuffer+=w.frameDelta,w.timeBuffer=u.clamp(w.timeBuffer,0,w.frameDelta+I*S._timeBufferMargin),w.lastUpdatesDeferred=0;for(var G=w.maxUpdates||Math.ceil(w.maxFrameTime/I),U=u.now();I>0&&w.timeBuffer>=I*S._timeBufferMargin;){l.update(M,I),w.timeBuffer-=I,R+=1;var z=u.now()-b,N=u.now()-U,k=z+S._elapsedNextEstimate*N/R;if(R>=G||k>w.maxFrameTime){w.lastUpdatesDeferred=Math.round(Math.max(0,w.timeBuffer/I-S._timeBufferMargin));break}}}},step:function(P){l.update(this.engine,P)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(P){var M=P.hasOwnProperty("body")?P.body:P;return f.get(this.localWorld,M.id,M.type)!==null},getAllBodies:function(){return f.allBodies(this.localWorld)},getAllConstraints:function(){return f.allConstraints(this.localWorld)},getAllComposites:function(){return f.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var P=this.debugConfig,M=this.engine,w=this.debugGraphic,b=f.allBodies(this.localWorld);this.debugGraphic.clear(),P.showBroadphase&&M.broadphase.controller&&this.renderGrid(M.broadphase,w,P.broadphaseColor,.5),P.showBounds&&this.renderBodyBounds(b,w,P.boundsColor,.5),(P.showBody||P.showStaticBody)&&this.renderBodies(b),P.showJoint&&this.renderJoints(),(P.showAxes||P.showAngleIndicator)&&this.renderBodyAxes(b,w,P.showAxes,P.angleColor,.5),P.showVelocity&&this.renderBodyVelocity(b,w,P.velocityColor,1,2),P.showSeparations&&this.renderSeparations(M.pairs.list,w,P.separationColor),P.showCollisions&&this.renderCollisions(M.pairs.list,w,P.collisionColor)}},renderGrid:function(P,M,w,b){M.lineStyle(1,w,b);for(var I=u.keys(P.buckets),R=0;R<I.length;R++){var A=I[R];if(!(P.buckets[A].length<2)){var L=A.split(/C|R/);M.strokeRect(parseInt(L[1],10)*P.bucketWidth,parseInt(L[2],10)*P.bucketHeight,P.bucketWidth,P.bucketHeight)}}return this},renderSeparations:function(P,M,w){M.lineStyle(1,w,1);for(var b=0;b<P.length;b++){var I=P[b];if(I.isActive){var R=I.collision,A=R.bodyA,L=R.bodyB,O=A.position,F=L.position,G=R.penetration,U=!A.isStatic&&!L.isStatic?4:1;L.isStatic&&(U=0),M.lineBetween(F.x,F.y,F.x-G.x*U,F.y-G.y*U),U=!A.isStatic&&!L.isStatic?4:1,A.isStatic&&(U=0),M.lineBetween(O.x,O.y,O.x-G.x*U,O.y-G.y*U)}}return this},renderCollisions:function(P,M,w){M.lineStyle(1,w,.5),M.fillStyle(w,1);var b,I;for(b=0;b<P.length;b++)if(I=P[b],!!I.isActive)for(var R=0;R<I.contactCount;R++){var A=I.contacts[R],L=A.vertex;L&&M.fillRect(L.x-2,L.y-2,5,5)}for(b=0;b<P.length;b++)if(I=P[b],!!I.isActive){var O=I.collision,F=I.contacts;if(I.contactCount>0){var G=F[0].vertex.x,U=F[0].vertex.y;I.contactCount===2&&(G=(F[0].vertex.x+F[1].vertex.x)/2,U=(F[0].vertex.y+F[1].vertex.y)/2),O.bodyB===O.supports[0].body||O.bodyA.isStatic?M.lineBetween(G-O.normal.x*8,U-O.normal.y*8,G,U):M.lineBetween(G+O.normal.x*8,U+O.normal.y*8,G,U)}}return this},renderBodyBounds:function(P,M,w,b){M.lineStyle(1,w,b);for(var I=0;I<P.length;I++){var R=P[I];if(R.render.visible){var A=R.bounds;if(A)M.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var L=R.parts,O=L.length>1?1:0;O<L.length;O++){var F=L[O];M.strokeRect(F.bounds.min.x,F.bounds.min.y,F.bounds.max.x-F.bounds.min.x,F.bounds.max.y-F.bounds.min.y)}}}return this},renderBodyAxes:function(P,M,w,b,I){M.lineStyle(1,b,I);for(var R=0;R<P.length;R++){var A=P[R],L=A.parts;if(A.render.visible){var O,F,G;if(w)for(F=L.length>1?1:0;F<L.length;F++)for(O=L[F],G=0;G<O.axes.length;G++){var U=O.axes[G];M.lineBetween(O.position.x,O.position.y,O.position.x+U.x*20,O.position.y+U.y*20)}else for(F=L.length>1?1:0;F<L.length;F++)for(O=L[F],G=0;G<O.axes.length;G++)M.lineBetween(O.position.x,O.position.y,(O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(P,M,w,b,I){M.lineStyle(I,w,b);for(var R=0;R<P.length;R++){var A=P[R];A.render.visible&&M.lineBetween(A.position.x,A.position.y,A.position.x+(A.position.x-A.positionPrev.x)*2,A.position.y+(A.position.y-A.positionPrev.y)*2)}return this},renderBodies:function(P){for(var M=this.debugGraphic,w=this.debugConfig,b=w.showBody,I=w.showStaticBody,R=w.showSleeping,A=w.showInternalEdges,L=w.showConvexHulls,O=w.renderFill,F=w.renderLine,G=w.staticBodySleepOpacity,U=w.sleepFillColor,z=w.sleepLineColor,N=w.hullColor,k=0;k<P.length;k++){var D=P[k];if(D.render.visible&&!(!I&&D.isStatic||!b&&!D.isStatic)){var V=D.render.lineColor,B=D.render.lineOpacity,W=D.render.lineThickness,H=D.render.fillColor,Y=D.render.fillOpacity;R&&D.isSleeping&&(D.isStatic?(B*=G,Y*=G):(V=z,H=U)),O||(H=null),F||(V=null),this.renderBody(D,M,A,V,B,W,H,Y);var X=D.parts.length;L&&X>1&&this.renderConvexHull(D,M,N,W)}}},renderBody:function(P,M,w,b,I,R,A,L){b===void 0&&(b=null),I===void 0&&(I=null),R===void 0&&(R=1),A===void 0&&(A=null),L===void 0&&(L=null);for(var O=this.debugConfig,F=O.sensorFillColor,G=O.sensorLineColor,U=P.parts,z=U.length,N=z>1?1:0;N<z;N++){var k=U[N],D=k.render,V=D.opacity;if(!(!D.visible||V===0||k.isSensor&&!O.showSensors)){var B=k.circleRadius;if(M.beginPath(),k.isSensor?(A!==null&&M.fillStyle(F,L*V),b!==null&&M.lineStyle(R,G,I*V)):(A!==null&&M.fillStyle(A,L*V),b!==null&&M.lineStyle(R,b,I*V)),B)M.arc(k.position.x,k.position.y,B,0,2*Math.PI);else{var W=k.vertices,H=W.length;M.moveTo(W[0].x,W[0].y);for(var Y=1;Y<H;Y++){var X=W[Y];if(!W[Y-1].isInternal||w?M.lineTo(X.x,X.y):M.moveTo(X.x,X.y),Y<H&&X.isInternal&&!w){var $=(Y+1)%H;M.moveTo(W[$].x,W[$].y)}}M.closePath()}A!==null&&M.fillPath(),b!==null&&M.strokePath()}}if(O.showPositions&&!P.isStatic){var J=P.position.x,q=P.position.y,Q=Math.ceil(O.positionSize/2);M.fillStyle(O.positionColor,1),M.fillRect(J-Q,q-Q,O.positionSize,O.positionSize)}return this},renderConvexHull:function(P,M,w,b){b===void 0&&(b=1);var I=P.parts,R=I.length;if(R>1){var A=P.vertices;M.lineStyle(b,w),M.beginPath(),M.moveTo(A[0].x,A[0].y);for(var L=1;L<A.length;L++)M.lineTo(A[L].x,A[L].y);M.lineTo(A[0].x,A[0].y),M.strokePath()}return this},renderJoints:function(){for(var P=this.debugGraphic,M=f.allConstraints(this.localWorld),w=0;w<M.length;w++){var b=M[w].render,I=b.lineColor,R=b.lineOpacity,A=b.lineThickness,L=b.pinSize,O=b.anchorColor,F=b.anchorSize;this.renderConstraint(M[w],P,I,R,A,L,O,F)}},renderConstraint:function(P,M,w,b,I,R,A,L){var O=P.render;if(!O.visible||!P.pointA||!P.pointB)return this;M.lineStyle(I,w,b);var F=P.bodyA,G=P.bodyB,U,z;if(F?U=E.add(F.position,P.pointA):U=P.pointA,O.type==="pin")M.strokeCircle(U.x,U.y,R);else{if(G?z=E.add(G.position,P.pointB):z=P.pointB,M.beginPath(),M.moveTo(U.x,U.y),O.type==="spring")for(var N=E.sub(z,U),k=E.perp(E.normalise(N)),D=Math.ceil(u.clamp(P.length/5,12,20)),V,B=1;B<D;B+=1)V=B%2===0?1:-1,M.lineTo(U.x+N.x*(B/D)+k.x*V*4,U.y+N.y*(B/D)+k.y*V*4);M.lineTo(z.x,z.y)}return M.strokePath(),O.anchors&&L>0&&(M.fillStyle(A),M.fillCircle(U.x,U.y,L),M.fillCircle(z.x,z.y,L)),this},resetCollisionIDs:function(){return p._nextCollidingGroupId=1,p._nextNonCollidingGroupId=-1,p._nextCategory=1,this},shutdown:function(){y.off(this.engine),this.removeAllListeners(),C.clear(this.localWorld,!1),l.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});n.exports=T},70410:n=>{var o={setBounce:function(r){return this.body.restitution=r,this}};n.exports=o},66968:n=>{var o={setCollisionCategory:function(r){return this.body.collisionFilter.category=r,this},setCollisionGroup:function(r){return this.body.collisionFilter.group=r,this},setCollidesWith:function(r){var a=0;if(!Array.isArray(r))a=r;else for(var p=0;p<r.length;p++)a|=r[p];return this.body.collisionFilter.mask=a,this},setOnCollide:function(r){return this.body.onCollideCallback=r,this},setOnCollideEnd:function(r){return this.body.onCollideEndCallback=r,this},setOnCollideActive:function(r){return this.body.onCollideActiveCallback=r,this},setOnCollideWith:function(r,a){Array.isArray(r)||(r=[r]);for(var p=0;p<r.length;p++){var h=r[p].hasOwnProperty("body")?r[p].body:r[p];this.body.setOnCollideWith(h,a)}return this}};n.exports=o},51607:(n,o,r)=>{var a=r(22562),p={applyForce:function(h){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,h),this},applyForceFrom:function(h,u){return a.applyForce(this.body,h,u),this},thrust:function(h){var u=this.body.angle;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(h){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(h){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(h){var u=this.body.angle-Math.PI;return this._tempVec2.set(h*Math.cos(u),h*Math.sin(u)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};n.exports=p},5436:n=>{var o={setFriction:function(r,a,p){return this.body.friction=r,a!==void 0&&(this.body.frictionAir=a),p!==void 0&&(this.body.frictionStatic=p),this},setFrictionAir:function(r){return this.body.frictionAir=r,this},setFrictionStatic:function(r){return this.body.frictionStatic=r,this}};n.exports=o},39858:n=>{var o={setIgnoreGravity:function(r){return this.body.ignoreGravity=r,this}};n.exports=o},37302:(n,o,r)=>{var a=r(22562),p=r(26099),h={setMass:function(u){return a.setMass(this.body,u),this},setDensity:function(u){return a.setDensity(this.body,u),this},centerOfMass:{get:function(){return new p(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};n.exports=h},39132:n=>{var o={setSensor:function(r){return this.body.isSensor=r,this},isSensor:function(){return this.body.isSensor}};n.exports=o},57772:(n,o,r)=>{var a=r(66280),p=r(22562),h=r(43855),u=r(95540),f=r(19496),l=r(85791),d=r(41598),v={setRectangle:function(c,m,g){return this.setBody({type:"rectangle",width:c,height:m},g)},setCircle:function(c,m){return this.setBody({type:"circle",radius:c},m)},setPolygon:function(c,m,g){return this.setBody({type:"polygon",sides:m,radius:c},g)},setTrapezoid:function(c,m,g,y){return this.setBody({type:"trapezoid",width:c,height:m,slope:g},y)},setExistingBody:function(c,m){m===void 0&&(m=!0),this.body&&this.world.remove(this.body,!0),this.body=c;for(var g=0;g<c.parts.length;g++)c.parts[g].gameObject=this;var y=this;if(c.destroy=function(){y.world.remove(y.body,!0),y.body.gameObject=null},m&&(this.world.has(c)&&this.world.remove(c,!0),this.world.add(c)),this._originComponent){var x=c.render.sprite.xOffset,C=c.render.sprite.yOffset,S=c.centerOfMass.x,E=c.centerOfMass.y;if(h(S,.5)&&h(E,.5))this.setOrigin(x+.5,C+.5);else{var T=c.centerOffset.x,P=c.centerOffset.y;this.setOrigin(x+T/this.displayWidth,C+P/this.displayHeight)}}return this},setBody:function(c,m){if(!c)return this;var g;typeof c=="string"&&(c={type:c});var y=u(c,"type","rectangle"),x=u(c,"x",this._tempVec2.x),C=u(c,"y",this._tempVec2.y),S=u(c,"width",this.width),E=u(c,"height",this.height);switch(y){case"rectangle":g=a.rectangle(x,C,S,E,m);break;case"circle":var T=u(c,"radius",Math.max(S,E)/2),P=u(c,"maxSides",25);g=a.circle(x,C,T,m,P);break;case"trapezoid":var M=u(c,"slope",.5);g=a.trapezoid(x,C,S,E,M,m);break;case"polygon":var w=u(c,"sides",5),b=u(c,"radius",Math.max(S,E)/2);g=a.polygon(x,C,w,b,m);break;case"fromVertices":case"fromVerts":var I=u(c,"verts",null);if(I)if(typeof I=="string"&&(I=d.fromPath(I)),this.body&&!this.body.hasOwnProperty("temp"))p.setVertices(this.body,I),g=this.body;else{var R=u(c,"flagInternal",!1),A=u(c,"removeCollinear",.01),L=u(c,"minimumArea",10);g=a.fromVertices(x,C,I,m,R,A,L)}break;case"fromPhysicsEditor":g=f.parseBody(x,C,c,m);break;case"fromPhysicsTracer":g=l.parseBody(x,C,c,m);break}return g&&this.setExistingBody(g,c.addToWorld),this}};n.exports=v},38083:(n,o,r)=>{var a=r(1121),p=r(53614),h=r(35810),u={setToSleep:function(){return p.set(this.body,!0),this},setAwake:function(){return p.set(this.body,!1),this},setSleepThreshold:function(f){return f===void 0&&(f=60),this.body.sleepThreshold=f,this},setSleepEvents:function(f,l){return this.setSleepStartEvent(f),this.setSleepEndEvent(l),this},setSleepStartEvent:function(f){if(f){var l=this.world;h.on(this.body,"sleepStart",function(d){l.emit(a.SLEEP_START,d,this)})}else h.off(this.body,"sleepStart");return this},setSleepEndEvent:function(f){if(f){var l=this.world;h.on(this.body,"sleepEnd",function(d){l.emit(a.SLEEP_END,d,this)})}else h.off(this.body,"sleepEnd");return this}};n.exports=u},90556:(n,o,r)=>{var a=r(22562),p={setStatic:function(h){return a.setStatic(this.body,h),this},isStatic:function(){return this.body.isStatic}};n.exports=p},85436:(n,o,r)=>{var a=r(22562),p=r(36383),h=r(86554),u=r(30954),f=4,l={x:{get:function(){return this.body.position.x},set:function(d){this._tempVec2.set(d,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(d){this._tempVec2.set(this.x,d),a.setPosition(this.body,this._tempVec2)}},scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(d){this.setScale(d,d)}},scaleX:{get:function(){return this._scaleX},set:function(d){var v=1/this._scaleX,c=1/this._scaleY;this._scaleX=d,this._scaleX===0?this.renderFlags&=~f:this.renderFlags|=f,a.scale(this.body,v,c),a.scale(this.body,d,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(d){var v=1/this._scaleX,c=1/this._scaleY;this._scaleY=d,this._scaleY===0?this.renderFlags&=~f:this.renderFlags|=f,a.scale(this.body,v,c),a.scale(this.body,this._scaleX,d)}},angle:{get:function(){return u(this.body.angle*p.RAD_TO_DEG)},set:function(d){this.rotation=u(d)*p.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(d){this._rotation=h(d),a.setAngle(this.body,this._rotation)}},setPosition:function(d,v){return d===void 0&&(d=0),v===void 0&&(v=d),this._tempVec2.set(d,v),a.setPosition(this.body,this._tempVec2),this},setRotation:function(d){return d===void 0&&(d=0),this._rotation=h(d),a.setAngle(this.body,d),this},setFixedRotation:function(){return a.setInertia(this.body,1/0),this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,a.setAngle(this.body,this.rotation),this},setScale:function(d,v,c){d===void 0&&(d=1),v===void 0&&(v=d);var m=1/this._scaleX,g=1/this._scaleY;return this._scaleX=d,this._scaleY=v,a.scale(this.body,m,g,c),a.scale(this.body,d,v,c),this}};n.exports=l},42081:(n,o,r)=>{var a=r(22562),p={setVelocityX:function(h){return this._tempVec2.set(h,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(h){return this._tempVec2.set(this.body.velocity.x,h),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function(h,u){return this._tempVec2.set(h,u),a.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return a.getVelocity(this.body)},setAngularVelocity:function(h){return a.setAngularVelocity(this.body,h),this},getAngularVelocity:function(){return a.getAngularVelocity(this.body)},setAngularSpeed:function(h){return a.setAngularSpeed(this.body,h),this},getAngularSpeed:function(){return a.getAngularSpeed(this.body)}};n.exports=p},31884:(n,o,r)=>{n.exports={Bounce:r(70410),Collision:r(66968),Force:r(51607),Friction:r(5436),Gravity:r(39858),Mass:r(37302),Sensor:r(39132),SetBody:r(57772),Sleep:r(38083),Static:r(90556),Transform:r(85436),Velocity:r(42081)}},85608:n=>{n.exports="afteradd"},1213:n=>{n.exports="afterremove"},25968:n=>{n.exports="afterupdate"},67205:n=>{n.exports="beforeadd"},39438:n=>{n.exports="beforeremove"},44823:n=>{n.exports="beforeupdate"},92593:n=>{n.exports="collisionactive"},60128:n=>{n.exports="collisionend"},76861:n=>{n.exports="collisionstart"},92362:n=>{n.exports="dragend"},76408:n=>{n.exports="drag"},93971:n=>{n.exports="dragstart"},5656:n=>{n.exports="pause"},47861:n=>{n.exports="resume"},79099:n=>{n.exports="sleepend"},35906:n=>{n.exports="sleepstart"},1121:(n,o,r)=>{n.exports={AFTER_ADD:r(85608),AFTER_REMOVE:r(1213),AFTER_UPDATE:r(25968),BEFORE_ADD:r(67205),BEFORE_REMOVE:r(39438),BEFORE_UPDATE:r(44823),COLLISION_ACTIVE:r(92593),COLLISION_END:r(60128),COLLISION_START:r(76861),DRAG_END:r(92362),DRAG:r(76408),DRAG_START:r(93971),PAUSE:r(5656),RESUME:r(47861),SLEEP_END:r(79099),SLEEP_START:r(35906)}},3875:(n,o,r)=>{n.exports={BodyBounds:r(68174),Components:r(31884),Events:r(1121),Factory:r(28137),MatterGameObject:r(75803),Image:r(23181),Matter:r(19933),MatterPhysics:r(42045),PolyDecomp:r(55973),Sprite:r(34803),TileBody:r(73834),PhysicsEditorParser:r(19496),PhysicsJSONParser:r(85791),PointerConstraint:r(98713),World:r(68243)}},22562:(n,o,r)=>{var a={};n.exports=a;var p=r(41598),h=r(31725),u=r(53614),f=r(53402),l=r(15647),d=r(66615);(function(){a._timeCorrection=!0,a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a._baseDelta=16.666666666666668,a.create=function(c){var m={id:f.nextId(),type:"body",label:"Body",parts:[],plugin:{},attractors:c.attractors||[],wrapBounds:null,angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!c.hasOwnProperty("position")&&c.hasOwnProperty("vertices")?c.position=p.centre(c.vertices):c.hasOwnProperty("vertices")||(m.vertices=p.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var g=f.extend(m,c);return v(g,c),g.setOnCollideWith=function(y,x){return x?this.onCollideWith[y.id]=x:delete this.onCollideWith[y.id],this},g},a.nextGroup=function(c){return c?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var v=function(c,m){if(m=m||{},a.set(c,{bounds:c.bounds||l.create(c.vertices),positionPrev:c.positionPrev||h.clone(c.position),anglePrev:c.anglePrev||c.angle,vertices:c.vertices,parts:c.parts||[c],isStatic:c.isStatic,isSleeping:c.isSleeping,parent:c.parent||c}),p.rotate(c.vertices,c.angle,c.position),d.rotate(c.axes,c.angle),l.update(c.bounds,c.vertices,c.velocity),a.set(c,{axes:m.axes||c.axes,area:m.area||c.area,mass:m.mass||c.mass,inertia:m.inertia||c.inertia}),c.parts.length===1){var g=c.bounds,y=c.centerOfMass,x=c.centerOffset,C=g.max.x-g.min.x,S=g.max.y-g.min.y;y.x=-(g.min.x-c.position.x)/C,y.y=-(g.min.y-c.position.y)/S,x.x=C*y.x,x.y=S*y.y}};a.set=function(c,m,g){var y;typeof m=="string"&&(y=m,m={},m[y]=g);for(y in m)if(Object.prototype.hasOwnProperty.call(m,y))switch(g=m[y],y){case"isStatic":a.setStatic(c,g);break;case"isSleeping":u.set(c,g);break;case"mass":a.setMass(c,g);break;case"density":a.setDensity(c,g);break;case"inertia":a.setInertia(c,g);break;case"vertices":a.setVertices(c,g);break;case"position":a.setPosition(c,g);break;case"angle":a.setAngle(c,g);break;case"velocity":a.setVelocity(c,g);break;case"angularVelocity":a.setAngularVelocity(c,g);break;case"speed":a.setSpeed(c,g);break;case"angularSpeed":a.setAngularSpeed(c,g);break;case"parts":a.setParts(c,g);break;case"centre":a.setCentre(c,g);break;default:c[y]=g}},a.setStatic=function(c,m){for(var g=0;g<c.parts.length;g++){var y=c.parts[g];m?(y.isStatic||(y._original={restitution:y.restitution,friction:y.friction,mass:y.mass,inertia:y.inertia,density:y.density,inverseMass:y.inverseMass,inverseInertia:y.inverseInertia}),y.restitution=0,y.friction=1,y.mass=y.inertia=y.density=1/0,y.inverseMass=y.inverseInertia=0,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.anglePrev=y.angle,y.angularVelocity=0,y.speed=0,y.angularSpeed=0,y.motion=0):y._original&&(y.restitution=y._original.restitution,y.friction=y._original.friction,y.mass=y._original.mass,y.inertia=y._original.inertia,y.density=y._original.density,y.inverseMass=y._original.inverseMass,y.inverseInertia=y._original.inverseInertia,y._original=null),y.isStatic=m}},a.setMass=function(c,m){var g=c.inertia/(c.mass/6);c.inertia=g*(m/6),c.inverseInertia=1/c.inertia,c.mass=m,c.inverseMass=1/c.mass,c.density=c.mass/c.area},a.setDensity=function(c,m){a.setMass(c,m*c.area),c.density=m},a.setInertia=function(c,m){c.inertia=m,c.inverseInertia=1/c.inertia},a.setVertices=function(c,m){m[0].body===c?c.vertices=m:c.vertices=p.create(m,c),c.axes=d.fromVertices(c.vertices),c.area=p.area(c.vertices),a.setMass(c,c.density*c.area);var g=p.centre(c.vertices);p.translate(c.vertices,g,-1),a.setInertia(c,a._inertiaScale*p.inertia(c.vertices,c.mass)),p.translate(c.vertices,c.position),l.update(c.bounds,c.vertices,c.velocity)},a.setParts=function(c,m,g){var y;for(m=m.slice(0),c.parts.length=0,c.parts.push(c),c.parent=c,y=0;y<m.length;y++){var x=m[y];x!==c&&(x.parent=c,c.parts.push(x))}if(c.parts.length!==1){if(g=typeof g<"u"?g:!0,g){var C=[];for(y=0;y<m.length;y++)C=C.concat(m[y].vertices);p.clockwiseSort(C);var S=p.hull(C),E=p.centre(S);a.setVertices(c,S),p.translate(c.vertices,E)}var T=a._totalProperties(c),P=T.centre.x,M=T.centre.y,w=c.bounds,b=c.centerOfMass,I=c.centerOffset;l.update(w,c.vertices,c.velocity),b.x=-(w.min.x-P)/(w.max.x-w.min.x),b.y=-(w.min.y-M)/(w.max.y-w.min.y),I.x=P,I.y=M,c.area=T.area,c.parent=c,c.position.x=P,c.position.y=M,c.positionPrev.x=P,c.positionPrev.y=M,a.setMass(c,T.mass),a.setInertia(c,T.inertia),a.setPosition(c,T.centre)}},a.setCentre=function(c,m,g){g?(c.positionPrev.x+=m.x,c.positionPrev.y+=m.y,c.position.x+=m.x,c.position.y+=m.y):(c.positionPrev.x=m.x-(c.position.x-c.positionPrev.x),c.positionPrev.y=m.y-(c.position.y-c.positionPrev.y),c.position.x=m.x,c.position.y=m.y)},a.setPosition=function(c,m,g){var y=h.sub(m,c.position);g?(c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.velocity.x=y.x,c.velocity.y=y.y,c.speed=h.magnitude(y)):(c.positionPrev.x+=y.x,c.positionPrev.y+=y.y);for(var x=0;x<c.parts.length;x++){var C=c.parts[x];C.position.x+=y.x,C.position.y+=y.y,p.translate(C.vertices,y),l.update(C.bounds,C.vertices,c.velocity)}},a.setAngle=function(c,m,g){var y=m-c.angle;g?(c.anglePrev=c.angle,c.angularVelocity=y,c.angularSpeed=Math.abs(y)):c.anglePrev+=y;for(var x=0;x<c.parts.length;x++){var C=c.parts[x];C.angle+=y,p.rotate(C.vertices,y,c.position),d.rotate(C.axes,y),l.update(C.bounds,C.vertices,c.velocity),x>0&&h.rotateAbout(C.position,y,c.position,C.position)}},a.setVelocity=function(c,m){var g=c.deltaTime/a._baseDelta;c.positionPrev.x=c.position.x-m.x*g,c.positionPrev.y=c.position.y-m.y*g,c.velocity.x=(c.position.x-c.positionPrev.x)/g,c.velocity.y=(c.position.y-c.positionPrev.y)/g,c.speed=h.magnitude(c.velocity)},a.getVelocity=function(c){var m=a._baseDelta/c.deltaTime;return{x:(c.position.x-c.positionPrev.x)*m,y:(c.position.y-c.positionPrev.y)*m}},a.getSpeed=function(c){return h.magnitude(a.getVelocity(c))},a.setSpeed=function(c,m){a.setVelocity(c,h.mult(h.normalise(a.getVelocity(c)),m))},a.setAngularVelocity=function(c,m){var g=c.deltaTime/a._baseDelta;c.anglePrev=c.angle-m*g,c.angularVelocity=(c.angle-c.anglePrev)/g,c.angularSpeed=Math.abs(c.angularVelocity)},a.getAngularVelocity=function(c){return(c.angle-c.anglePrev)*a._baseDelta/c.deltaTime},a.getAngularSpeed=function(c){return Math.abs(a.getAngularVelocity(c))},a.setAngularSpeed=function(c,m){a.setAngularVelocity(c,f.sign(a.getAngularVelocity(c))*m)},a.translate=function(c,m,g){a.setPosition(c,h.add(c.position,m),g)},a.rotate=function(c,m,g,y){if(!g)a.setAngle(c,c.angle+m,y);else{var x=Math.cos(m),C=Math.sin(m),S=c.position.x-g.x,E=c.position.y-g.y;a.setPosition(c,{x:g.x+(S*x-E*C),y:g.y+(S*C+E*x)},y),a.setAngle(c,c.angle+m,y)}},a.scale=function(c,m,g,y){var x=0,C=0;y=y||c.position;for(var S=c.inertia===1/0,E=0;E<c.parts.length;E++){var T=c.parts[E];T.scale.x=m,T.scale.y=g,p.scale(T.vertices,m,g,y),T.axes=d.fromVertices(T.vertices),T.area=p.area(T.vertices),a.setMass(T,c.density*T.area),p.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),a.setInertia(T,a._inertiaScale*p.inertia(T.vertices,T.mass)),p.translate(T.vertices,{x:T.position.x,y:T.position.y}),E>0&&(x+=T.area,C+=T.inertia),T.position.x=y.x+(T.position.x-y.x)*m,T.position.y=y.y+(T.position.y-y.y)*g,l.update(T.bounds,T.vertices,c.velocity)}c.parts.length>1&&(c.area=x,c.isStatic||(a.setMass(c,c.density*x),a.setInertia(c,C))),c.circleRadius&&(m===g?c.circleRadius*=m:c.circleRadius=null),S&&a.setInertia(c,1/0)},a.update=function(c,m){m=(typeof m<"u"?m:16.666666666666668)*c.timeScale;var g=m*m,y=a._timeCorrection?m/(c.deltaTime||m):1,x=1-c.frictionAir*(m/f._baseDelta),C=(c.position.x-c.positionPrev.x)*y,S=(c.position.y-c.positionPrev.y)*y;c.velocity.x=C*x+c.force.x/c.mass*g,c.velocity.y=S*x+c.force.y/c.mass*g,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.position.x+=c.velocity.x,c.position.y+=c.velocity.y,c.deltaTime=m,c.angularVelocity=(c.angle-c.anglePrev)*x*y+c.torque/c.inertia*g,c.anglePrev=c.angle,c.angle+=c.angularVelocity,c.speed=h.magnitude(c.velocity),c.angularSpeed=Math.abs(c.angularVelocity);for(var E=0;E<c.parts.length;E++){var T=c.parts[E];p.translate(T.vertices,c.velocity),E>0&&(T.position.x+=c.velocity.x,T.position.y+=c.velocity.y),c.angularVelocity!==0&&(p.rotate(T.vertices,c.angularVelocity,c.position),d.rotate(T.axes,c.angularVelocity),E>0&&h.rotateAbout(T.position,c.angularVelocity,c.position,T.position)),l.update(T.bounds,T.vertices,c.velocity)}},a.updateVelocities=function(c){var m=a._baseDelta/c.deltaTime,g=c.velocity;g.x=(c.position.x-c.positionPrev.x)*m,g.y=(c.position.y-c.positionPrev.y)*m,c.speed=Math.sqrt(g.x*g.x+g.y*g.y),c.angularVelocity=(c.angle-c.anglePrev)*m,c.angularSpeed=Math.abs(c.angularVelocity)},a.applyForce=function(c,m,g){var y={x:m.x-c.position.x,y:m.y-c.position.y};c.force.x+=g.x,c.force.y+=g.y,c.torque+=y.x*g.y-y.y*g.x},a._totalProperties=function(c){for(var m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=c.parts.length===1?0:1;g<c.parts.length;g++){var y=c.parts[g],x=y.mass!==1/0?y.mass:1;m.mass+=x,m.area+=y.area,m.inertia+=y.inertia,m.centre=h.add(m.centre,h.mult(y.position,x))}return m.centre=h.div(m.centre,m.mass),m},a.wrap=function(c,m){var g=l.wrap(c.bounds,m);return g&&a.translate(c,g),g}})()},69351:(n,o,r)=>{var a={};n.exports=a;var p=r(35810),h=r(53402),u=r(15647),f=r(22562);(function(){a.create=function(l){return h.extend({id:h.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},wrapBounds:null,cache:{allBodies:null,allConstraints:null,allComposites:null}},l)},a.setModified=function(l,d,v,c){if(p.trigger(l,"compositeModified",l),l.isModified=d,d&&l.cache&&(l.cache.allBodies=null,l.cache.allConstraints=null,l.cache.allComposites=null),v&&l.parent&&a.setModified(l.parent,d,v,c),c)for(var m=0;m<l.composites.length;m++){var g=l.composites[m];a.setModified(g,d,v,c)}},a.add=function(l,d){var v=[].concat(d);p.trigger(l,"beforeAdd",{object:d});for(var c=0;c<v.length;c++){var m=v[c];switch(m.type){case"body":if(m.parent!==m){h.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(l,m);break;case"constraint":a.addConstraint(l,m);break;case"composite":a.addComposite(l,m);break;case"mouseConstraint":a.addConstraint(l,m.constraint);break}}return p.trigger(l,"afterAdd",{object:d}),l},a.remove=function(l,d,v){var c=[].concat(d);p.trigger(l,"beforeRemove",{object:d});for(var m=0;m<c.length;m++){var g=c[m];switch(g.type){case"body":a.removeBody(l,g,v);break;case"constraint":a.removeConstraint(l,g,v);break;case"composite":a.removeComposite(l,g,v);break;case"mouseConstraint":a.removeConstraint(l,g.constraint);break}}return p.trigger(l,"afterRemove",{object:d}),l},a.addComposite=function(l,d){return l.composites.push(d),d.parent=l,a.setModified(l,!0,!0,!1),l},a.removeComposite=function(l,d,v){var c=h.indexOf(l.composites,d);if(c!==-1){var m=a.allBodies(d);a.removeCompositeAt(l,c);for(var g=0;g<m.length;g++)m[g].sleepCounter=0}if(v)for(var g=0;g<l.composites.length;g++)a.removeComposite(l.composites[g],d,!0);return l},a.removeCompositeAt=function(l,d){return l.composites.splice(d,1),a.setModified(l,!0,!0,!1),l},a.addBody=function(l,d){return l.bodies.push(d),a.setModified(l,!0,!0,!1),l},a.removeBody=function(l,d,v){var c=h.indexOf(l.bodies,d);if(c!==-1&&(a.removeBodyAt(l,c),d.sleepCounter=0),v)for(var m=0;m<l.composites.length;m++)a.removeBody(l.composites[m],d,!0);return l},a.removeBodyAt=function(l,d){return l.bodies.splice(d,1),a.setModified(l,!0,!0,!1),l},a.addConstraint=function(l,d){return l.constraints.push(d),a.setModified(l,!0,!0,!1),l},a.removeConstraint=function(l,d,v){var c=h.indexOf(l.constraints,d);if(c!==-1&&a.removeConstraintAt(l,c),v)for(var m=0;m<l.composites.length;m++)a.removeConstraint(l.composites[m],d,!0);return l},a.removeConstraintAt=function(l,d){return l.constraints.splice(d,1),a.setModified(l,!0,!0,!1),l},a.clear=function(l,d,v){if(v)for(var c=0;c<l.composites.length;c++)a.clear(l.composites[c],d,!0);return d?l.bodies=l.bodies.filter(function(m){return m.isStatic}):l.bodies.length=0,l.constraints.length=0,l.composites.length=0,a.setModified(l,!0,!0,!1),l},a.allBodies=function(l){if(l.cache&&l.cache.allBodies)return l.cache.allBodies;for(var d=[].concat(l.bodies),v=0;v<l.composites.length;v++)d=d.concat(a.allBodies(l.composites[v]));return l.cache&&(l.cache.allBodies=d),d},a.allConstraints=function(l){if(l.cache&&l.cache.allConstraints)return l.cache.allConstraints;for(var d=[].concat(l.constraints),v=0;v<l.composites.length;v++)d=d.concat(a.allConstraints(l.composites[v]));return l.cache&&(l.cache.allConstraints=d),d},a.allComposites=function(l){if(l.cache&&l.cache.allComposites)return l.cache.allComposites;for(var d=[].concat(l.composites),v=0;v<l.composites.length;v++)d=d.concat(a.allComposites(l.composites[v]));return l.cache&&(l.cache.allComposites=d),d},a.get=function(l,d,v){var c,m;switch(v){case"body":c=a.allBodies(l);break;case"constraint":c=a.allConstraints(l);break;case"composite":c=a.allComposites(l).concat(l);break}return c?(m=c.filter(function(g){return g.id.toString()===d.toString()}),m.length===0?null:m[0]):null},a.move=function(l,d,v){return a.remove(l,d),a.add(v,d),l},a.rebase=function(l){for(var d=a.allBodies(l).concat(a.allConstraints(l)).concat(a.allComposites(l)),v=0;v<d.length;v++)d[v].id=h.nextId();return l},a.translate=function(l,d,v){for(var c=v?a.allBodies(l):l.bodies,m=0;m<c.length;m++)f.translate(c[m],d);return l},a.rotate=function(l,d,v,c){for(var m=Math.cos(d),g=Math.sin(d),y=c?a.allBodies(l):l.bodies,x=0;x<y.length;x++){var C=y[x],S=C.position.x-v.x,E=C.position.y-v.y;f.setPosition(C,{x:v.x+(S*m-E*g),y:v.y+(S*g+E*m)}),f.rotate(C,d)}return l},a.scale=function(l,d,v,c,m){for(var g=m?a.allBodies(l):l.bodies,y=0;y<g.length;y++){var x=g[y],C=x.position.x-c.x,S=x.position.y-c.y;f.setPosition(x,{x:c.x+C*d,y:c.y+S*v}),f.scale(x,d,v)}return l},a.bounds=function(l){for(var d=a.allBodies(l),v=[],c=0;c<d.length;c+=1){var m=d[c];v.push(m.bounds.min,m.bounds.max)}return u.create(v)},a.wrap=function(l,d){var v=u.wrap(a.bounds(l),d);return v&&a.translate(l,v),v}})()},4372:(n,o,r)=>{var a={};n.exports=a;var p=r(69351);(function(){a.create=p.create,a.add=p.add,a.remove=p.remove,a.clear=p.clear,a.addComposite=p.addComposite,a.addBody=p.addBody,a.addConstraint=p.addConstraint})()},52284:(n,o,r)=>{var a={};n.exports=a;var p=r(41598),h=r(4506);(function(){var u=[],f={overlap:0,axis:null},l={overlap:0,axis:null};a.create=function(d,v){return{pair:null,collided:!1,bodyA:d,bodyB:v,parentA:d.parent,parentB:v.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},a.collides=function(d,v,c){if(a._overlapAxes(f,d.vertices,v.vertices,d.axes),f.overlap<=0||(a._overlapAxes(l,v.vertices,d.vertices,v.axes),l.overlap<=0))return null;var m=c&&c.table[h.id(d,v)],g;m?g=m.collision:(g=a.create(d,v),g.collided=!0,g.bodyA=d.id<v.id?d:v,g.bodyB=d.id<v.id?v:d,g.parentA=g.bodyA.parent,g.parentB=g.bodyB.parent),d=g.bodyA,v=g.bodyB;var y;f.overlap<l.overlap?y=f:y=l;var x=g.normal,C=g.tangent,S=g.penetration,E=g.supports,T=y.overlap,P=y.axis,M=P.x,w=P.y,b=v.position.x-d.position.x,I=v.position.y-d.position.y;M*b+w*I>=0&&(M=-M,w=-w),x.x=M,x.y=w,C.x=-w,C.y=M,S.x=M*T,S.y=w*T,g.depth=T;var R=a._findSupports(d,v,x,1),A=0;if(p.contains(d.vertices,R[0])&&(E[A++]=R[0]),p.contains(d.vertices,R[1])&&(E[A++]=R[1]),A<2){var L=a._findSupports(v,d,x,-1);p.contains(v.vertices,L[0])&&(E[A++]=L[0]),A<2&&p.contains(v.vertices,L[1])&&(E[A++]=L[1])}return A===0&&(E[A++]=R[0]),g.supportCount=A,g},a._overlapAxes=function(d,v,c,m){var g=v.length,y=c.length,x=v[0].x,C=v[0].y,S=c[0].x,E=c[0].y,T=m.length,P=Number.MAX_VALUE,M=0,w,b,I,R,A,L;for(A=0;A<T;A++){var O=m[A],F=O.x,G=O.y,U=x*F+C*G,z=S*F+E*G,N=U,k=z;for(L=1;L<g;L+=1)R=v[L].x*F+v[L].y*G,R>N?N=R:R<U&&(U=R);for(L=1;L<y;L+=1)R=c[L].x*F+c[L].y*G,R>k?k=R:R<z&&(z=R);if(b=N-z,I=k-U,w=b<I?b:I,w<P&&(P=w,M=A,w<=0))break}d.axis=m[M],d.overlap=P},a._findSupports=function(d,v,c,m){var g=v.vertices,y=g.length,x=d.position.x,C=d.position.y,S=c.x*m,E=c.y*m,T=g[0],P=T,M=S*(x-P.x)+E*(C-P.y),w,b,I;for(I=1;I<y;I+=1)P=g[I],b=S*(x-P.x)+E*(C-P.y),b<M&&(M=b,T=P);return w=g[(y+T.index-1)%y],M=S*(x-w.x)+E*(C-w.y),P=g[(T.index+1)%y],S*(x-P.x)+E*(C-P.y)<M?(u[0]=T,u[1]=P,u):(u[0]=T,u[1]=w,u)}})()},43424:n=>{var o={};n.exports=o,function(){o.create=function(r){return{vertex:r,normalImpulse:0,tangentImpulse:0}}}()},81388:(n,o,r)=>{var a={};n.exports=a;var p=r(53402),h=r(52284);(function(){a.create=function(u){var f={bodies:[],collisions:[],pairs:null};return p.extend(f,u)},a.setBodies=function(u,f){u.bodies=f.slice(0)},a.clear=function(u){u.bodies=[],u.collisions=[]},a.collisions=function(u){var f=u.pairs,l=u.bodies,d=l.length,v=a.canCollide,c=h.collides,m=u.collisions,g=0,y,x;for(l.sort(a._compareBoundsX),y=0;y<d;y++){var C=l[y],S=C.bounds,E=C.bounds.max.x,T=C.bounds.max.y,P=C.bounds.min.y,M=C.isStatic||C.isSleeping,w=C.parts.length,b=w===1;for(x=y+1;x<d;x++){var I=l[x],R=I.bounds;if(R.min.x>E)break;if(!(T<R.min.y||P>R.max.y)&&!(M&&(I.isStatic||I.isSleeping))&&v(C.collisionFilter,I.collisionFilter)){var A=I.parts.length;if(b&&A===1){var L=c(C,I,f);L&&(m[g++]=L)}else for(var O=w>1?1:0,F=A>1?1:0,G=O;G<w;G++)for(var U=C.parts[G],S=U.bounds,z=F;z<A;z++){var N=I.parts[z],R=N.bounds;if(!(S.min.x>R.max.x||S.max.x<R.min.x||S.max.y<R.min.y||S.min.y>R.max.y)){var L=c(U,N,f);L&&(m[g++]=L)}}}}}return m.length!==g&&(m.length=g),m},a.canCollide=function(u,f){return u.group===f.group&&u.group!==0?u.group>0:(u.mask&f.category)!==0&&(f.mask&u.category)!==0},a._compareBoundsX=function(u,f){return u.bounds.min.x-f.bounds.min.x}})()},4506:(n,o,r)=>{var a={};n.exports=a;var p=r(43424);(function(){a.create=function(h,u){var f=h.bodyA,l=h.bodyB,d={id:a.id(f,l),bodyA:f,bodyB:l,collision:h,contacts:[p.create(),p.create()],contactCount:0,separation:0,isActive:!0,isSensor:f.isSensor||l.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return a.update(d,h,u),d},a.update=function(h,u,f){var l=u.supports,d=u.supportCount,v=h.contacts,c=u.parentA,m=u.parentB;h.isActive=!0,h.timeUpdated=f,h.collision=u,h.separation=u.depth,h.inverseMass=c.inverseMass+m.inverseMass,h.friction=c.friction<m.friction?c.friction:m.friction,h.frictionStatic=c.frictionStatic>m.frictionStatic?c.frictionStatic:m.frictionStatic,h.restitution=c.restitution>m.restitution?c.restitution:m.restitution,h.slop=c.slop>m.slop?c.slop:m.slop,h.contactCount=d,u.pair=h;var g=l[0],y=v[0],x=l[1],C=v[1];(C.vertex===g||y.vertex===x)&&(v[1]=y,v[0]=y=C,C=v[1]),y.vertex=g,C.vertex=x},a.setActive=function(h,u,f){u?(h.isActive=!0,h.timeUpdated=f):(h.isActive=!1,h.contactCount=0)},a.id=function(h,u){return h.id<u.id?h.id.toString(36)+":"+u.id.toString(36):u.id.toString(36)+":"+h.id.toString(36)}})()},99561:(n,o,r)=>{var a={};n.exports=a;var p=r(4506),h=r(53402);(function(){a.create=function(u){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},a.update=function(u,f,l){var d=p.update,v=p.create,c=p.setActive,m=u.table,g=u.list,y=g.length,x=y,C=u.collisionStart,S=u.collisionEnd,E=u.collisionActive,T=f.length,P=0,M=0,w=0,b,I,R;for(R=0;R<T;R++)b=f[R],I=b.pair,I?(I.isActive&&(E[w++]=I),d(I,b,l)):(I=v(b,l),m[I.id]=I,C[P++]=I,g[x++]=I);for(x=0,y=g.length,R=0;R<y;R++)I=g[R],I.timeUpdated>=l?g[x++]=I:(c(I,!1,l),I.collision.bodyA.sleepCounter>0&&I.collision.bodyB.sleepCounter>0?g[x++]=I:(S[M++]=I,delete m[I.id]));g.length!==x&&(g.length=x),C.length!==P&&(C.length=P),S.length!==M&&(S.length=M),E.length!==w&&(E.length=w)},a.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},73296:(n,o,r)=>{var a={};n.exports=a;var p=r(31725),h=r(52284),u=r(15647),f=r(66280),l=r(41598);(function(){a.collides=function(d,v){for(var c=[],m=v.length,g=d.bounds,y=h.collides,x=u.overlaps,C=0;C<m;C++){var S=v[C],E=S.parts.length,T=E===1?0:1;if(d!==S&&x(S.bounds,g))for(var P=T;P<E;P++){var M=S.parts[P];if(x(M.bounds,g)){var w=y(M,d);if(w){c.push(w);break}}}}return c},a.ray=function(d,v,c,m){m=m||1e-100;for(var g=p.angle(v,c),y=p.magnitude(p.sub(v,c)),x=(c.x+v.x)*.5,C=(c.y+v.y)*.5,S=f.rectangle(x,C,y,m,{angle:g}),E=a.collides(S,d),T=0;T<E.length;T+=1){var P=E[T];P.body=P.bodyB=P.bodyA}return E},a.region=function(d,v,c){for(var m=[],g=0;g<d.length;g++){var y=d[g],x=u.overlaps(y.bounds,v);(x&&!c||!x&&c)&&m.push(y)}return m},a.point=function(d,v){for(var c=[],m=0;m<d.length;m++){var g=d[m];if(u.contains(g.bounds,v))for(var y=g.parts.length===1?0:1;y<g.parts.length;y++){var x=g.parts[y];if(u.contains(x.bounds,v)&&l.contains(x.vertices,v)){c.push(g);break}}}return c}})()},66272:(n,o,r)=>{var a={};n.exports=a;var p=r(41598),h=r(53402),u=r(15647);(function(){a._restingThresh=2,a._restingThreshTangent=Math.sqrt(6),a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a._frictionMaxStatic=Number.MAX_VALUE,a.preSolvePosition=function(f){var l,d,v,c=f.length;for(l=0;l<c;l++)d=f[l],d.isActive&&(v=d.contactCount,d.collision.parentA.totalContacts+=v,d.collision.parentB.totalContacts+=v)},a.solvePosition=function(f,l,d){var v,c,m,g,y,x,C,S,E=a._positionDampen*(d||1),T=h.clamp(l/h._baseDelta,0,1),P=f.length;for(v=0;v<P;v++)c=f[v],!(!c.isActive||c.isSensor)&&(m=c.collision,g=m.parentA,y=m.parentB,x=m.normal,c.separation=m.depth+x.x*(y.positionImpulse.x-g.positionImpulse.x)+x.y*(y.positionImpulse.y-g.positionImpulse.y));for(v=0;v<P;v++)c=f[v],!(!c.isActive||c.isSensor)&&(m=c.collision,g=m.parentA,y=m.parentB,x=m.normal,S=c.separation-c.slop*T,(g.isStatic||y.isStatic)&&(S*=2),g.isStatic||g.isSleeping||(C=E/g.totalContacts,g.positionImpulse.x+=x.x*S*C,g.positionImpulse.y+=x.y*S*C),y.isStatic||y.isSleeping||(C=E/y.totalContacts,y.positionImpulse.x-=x.x*S*C,y.positionImpulse.y-=x.y*S*C))},a.postSolvePosition=function(f){for(var l=a._positionWarming,d=f.length,v=p.translate,c=u.update,m=0;m<d;m++){var g=f[m],y=g.positionImpulse,x=y.x,C=y.y,S=g.velocity;if(g.totalContacts=0,x!==0||C!==0){for(var E=0;E<g.parts.length;E++){var T=g.parts[E];v(T.vertices,y),c(T.bounds,T.vertices,S),T.position.x+=x,T.position.y+=C}g.positionPrev.x+=x,g.positionPrev.y+=C,x*S.x+C*S.y<0?(y.x=0,y.y=0):(y.x*=l,y.y*=l)}}},a.preSolveVelocity=function(f){var l=f.length,d,v;for(d=0;d<l;d++){var c=f[d];if(!(!c.isActive||c.isSensor)){var m=c.contacts,g=c.contactCount,y=c.collision,x=y.parentA,C=y.parentB,S=y.normal,E=y.tangent;for(v=0;v<g;v++){var T=m[v],P=T.vertex,M=T.normalImpulse,w=T.tangentImpulse;if(M!==0||w!==0){var b=S.x*M+E.x*w,I=S.y*M+E.y*w;x.isStatic||x.isSleeping||(x.positionPrev.x+=b*x.inverseMass,x.positionPrev.y+=I*x.inverseMass,x.anglePrev+=x.inverseInertia*((P.x-x.position.x)*I-(P.y-x.position.y)*b)),C.isStatic||C.isSleeping||(C.positionPrev.x-=b*C.inverseMass,C.positionPrev.y-=I*C.inverseMass,C.anglePrev-=C.inverseInertia*((P.x-C.position.x)*I-(P.y-C.position.y)*b))}}}}},a.solveVelocity=function(f,l){var d=l/h._baseDelta,v=d*d,c=v*d,m=-a._restingThresh*d,g=a._restingThreshTangent,y=a._frictionNormalMultiplier*d,x=a._frictionMaxStatic,C=f.length,S,E,T,P;for(T=0;T<C;T++){var M=f[T];if(!(!M.isActive||M.isSensor)){var w=M.collision,b=w.parentA,I=w.parentB,R=w.normal.x,A=w.normal.y,L=w.tangent.x,O=w.tangent.y,F=M.inverseMass,G=M.friction*M.frictionStatic*y,U=M.contacts,z=M.contactCount,N=1/z,k=b.position.x-b.positionPrev.x,D=b.position.y-b.positionPrev.y,V=b.angle-b.anglePrev,B=I.position.x-I.positionPrev.x,W=I.position.y-I.positionPrev.y,H=I.angle-I.anglePrev;for(P=0;P<z;P++){var Y=U[P],X=Y.vertex,$=X.x-b.position.x,J=X.y-b.position.y,q=X.x-I.position.x,Q=X.y-I.position.y,tt=k-J*V,rt=D+$*V,et=B-Q*H,ot=W+q*H,ut=tt-et,dt=rt-ot,it=R*ut+A*dt,st=L*ut+O*dt,at=M.separation+it,yt=Math.min(at,1);yt=at<0?0:yt;var Ft=yt*G;st<-Ft||st>Ft?(E=st>0?st:-st,S=M.friction*(st>0?1:-1)*c,S<-E?S=-E:S>E&&(S=E)):(S=st,E=x);var ee=$*A-J*R,It=q*A-Q*R,Dt=N/(F+b.inverseInertia*ee*ee+I.inverseInertia*It*It),he=(1+M.restitution)*it*Dt;if(S*=Dt,it<m)Y.normalImpulse=0;else{var Xe=Y.normalImpulse;Y.normalImpulse+=he,Y.normalImpulse>0&&(Y.normalImpulse=0),he=Y.normalImpulse-Xe}if(st<-g||st>g)Y.tangentImpulse=0;else{var Jt=Y.tangentImpulse;Y.tangentImpulse+=S,Y.tangentImpulse<-E&&(Y.tangentImpulse=-E),Y.tangentImpulse>E&&(Y.tangentImpulse=E),S=Y.tangentImpulse-Jt}var ye=R*he+L*S,be=A*he+O*S;b.isStatic||b.isSleeping||(b.positionPrev.x+=ye*b.inverseMass,b.positionPrev.y+=be*b.inverseMass,b.anglePrev+=($*be-J*ye)*b.inverseInertia),I.isStatic||I.isSleeping||(I.positionPrev.x-=ye*I.inverseMass,I.positionPrev.y-=be*I.inverseMass,I.anglePrev-=(q*be-Q*ye)*I.inverseInertia)}}}}})()},48140:(n,o,r)=>{var a={};n.exports=a;var p=r(41598),h=r(31725),u=r(53614),f=r(15647),l=r(66615),d=r(53402);(function(){a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(v){var c=v;c.bodyA&&!c.pointA&&(c.pointA={x:0,y:0}),c.bodyB&&!c.pointB&&(c.pointB={x:0,y:0});var m=c.bodyA?h.add(c.bodyA.position,c.pointA):c.pointA,g=c.bodyB?h.add(c.bodyB.position,c.pointB):c.pointB,y=h.magnitude(h.sub(m,g));c.length=typeof c.length<"u"?c.length:y,c.id=c.id||d.nextId(),c.label=c.label||"Constraint",c.type="constraint",c.stiffness=c.stiffness||(c.length>0?1:.7),c.damping=c.damping||0,c.angularStiffness=c.angularStiffness||0,c.angleA=c.bodyA?c.bodyA.angle:c.angleA,c.angleB=c.bodyB?c.bodyB.angle:c.angleB,c.plugin={};var x={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return c.length===0&&c.stiffness>.1?(x.type="pin",x.anchors=!1):c.stiffness<.9&&(x.type="spring"),c.render=d.extend(x,c.render),c},a.preSolveAll=function(v){for(var c=0;c<v.length;c+=1){var m=v[c],g=m.constraintImpulse;m.isStatic||g.x===0&&g.y===0&&g.angle===0||(m.position.x+=g.x,m.position.y+=g.y,m.angle+=g.angle)}},a.solveAll=function(v,c){for(var m=d.clamp(c/d._baseDelta,0,1),g=0;g<v.length;g+=1){var y=v[g],x=!y.bodyA||y.bodyA&&y.bodyA.isStatic,C=!y.bodyB||y.bodyB&&y.bodyB.isStatic;(x||C)&&a.solve(v[g],m)}for(g=0;g<v.length;g+=1)y=v[g],x=!y.bodyA||y.bodyA&&y.bodyA.isStatic,C=!y.bodyB||y.bodyB&&y.bodyB.isStatic,!x&&!C&&a.solve(v[g],m)},a.solve=function(v,c){var m=v.bodyA,g=v.bodyB,y=v.pointA,x=v.pointB;if(!(!m&&!g)){m&&!m.isStatic&&(h.rotate(y,m.angle-v.angleA,y),v.angleA=m.angle),g&&!g.isStatic&&(h.rotate(x,g.angle-v.angleB,x),v.angleB=g.angle);var C=y,S=x;if(m&&(C=h.add(m.position,y)),g&&(S=h.add(g.position,x)),!(!C||!S)){var E=h.sub(C,S),T=h.magnitude(E);T<a._minLength&&(T=a._minLength);var P=(T-v.length)/T,M=v.stiffness>=1||v.length===0,w=M?v.stiffness*c:v.stiffness*c*c,b=v.damping*c,I=h.mult(E,P*w),R=(m?m.inverseMass:0)+(g?g.inverseMass:0),A=(m?m.inverseInertia:0)+(g?g.inverseInertia:0),L=R+A,O,F,G,U,z;if(b>0){var N=h.create();G=h.div(E,T),z=h.sub(g&&h.sub(g.position,g.positionPrev)||N,m&&h.sub(m.position,m.positionPrev)||N),U=h.dot(G,z)}m&&!m.isStatic&&(F=m.inverseMass/R,m.constraintImpulse.x-=I.x*F,m.constraintImpulse.y-=I.y*F,m.position.x-=I.x*F,m.position.y-=I.y*F,b>0&&(m.positionPrev.x-=b*G.x*U*F,m.positionPrev.y-=b*G.y*U*F),O=h.cross(y,I)/L*a._torqueDampen*m.inverseInertia*(1-v.angularStiffness),m.constraintImpulse.angle-=O,m.angle-=O),g&&!g.isStatic&&(F=g.inverseMass/R,g.constraintImpulse.x+=I.x*F,g.constraintImpulse.y+=I.y*F,g.position.x+=I.x*F,g.position.y+=I.y*F,b>0&&(g.positionPrev.x+=b*G.x*U*F,g.positionPrev.y+=b*G.y*U*F),O=h.cross(x,I)/L*a._torqueDampen*g.inverseInertia*(1-v.angularStiffness),g.constraintImpulse.angle+=O,g.angle+=O)}}},a.postSolveAll=function(v){for(var c=0;c<v.length;c++){var m=v[c],g=m.constraintImpulse;if(!(m.isStatic||g.x===0&&g.y===0&&g.angle===0)){u.set(m,!1);for(var y=0;y<m.parts.length;y++){var x=m.parts[y];p.translate(x.vertices,g),y>0&&(x.position.x+=g.x,x.position.y+=g.y),g.angle!==0&&(p.rotate(x.vertices,g.angle,m.position),l.rotate(x.axes,g.angle),y>0&&h.rotateAbout(x.position,g.angle,m.position,x.position)),f.update(x.bounds,x.vertices,m.velocity)}g.angle*=a._warming,g.x*=a._warming,g.y*=a._warming}}},a.pointAWorld=function(v){return{x:(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),y:(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0)}},a.pointBWorld=function(v){return{x:(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),y:(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0)}},a.currentLength=function(v){var c=(v.bodyA?v.bodyA.position.x:0)+(v.pointA?v.pointA.x:0),m=(v.bodyA?v.bodyA.position.y:0)+(v.pointA?v.pointA.y:0),g=(v.bodyB?v.bodyB.position.x:0)+(v.pointB?v.pointB.x:0),y=(v.bodyB?v.bodyB.position.y:0)+(v.pointB?v.pointB.y:0),x=c-g,C=m-y;return Math.sqrt(x*x+C*C)}})()},53402:(n,o,r)=>{var a={};n.exports=a,function(){a._baseDelta=16.666666666666668,a._nextId=0,a._seed=0,a._nowStartTime=+new Date,a._warnedOnce={},a._decomp=null,a.extend=function(h,u){var f,l,d;typeof u=="boolean"?(f=2,d=u):(f=1,d=!0);for(var v=f;v<arguments.length;v++){var c=arguments[v];if(c)for(var m in c)d&&c[m]&&c[m].constructor===Object&&(!h[m]||h[m].constructor===Object)?(h[m]=h[m]||{},a.extend(h[m],d,c[m])):h[m]=c[m]}return h},a.clone=function(h,u){return a.extend({},u,h)},a.keys=function(h){if(Object.keys)return Object.keys(h);var u=[];for(var f in h)u.push(f);return u},a.values=function(h){var u=[];if(Object.keys){for(var f=Object.keys(h),l=0;l<f.length;l++)u.push(h[f[l]]);return u}for(var d in h)u.push(h[d]);return u},a.get=function(h,u,f,l){u=u.split(".").slice(f,l);for(var d=0;d<u.length;d+=1)h=h[u[d]];return h},a.set=function(h,u,f,l,d){var v=u.split(".").slice(l,d);return a.get(h,u,0,-1)[v[v.length-1]]=f,f},a.shuffle=function(h){for(var u=h.length-1;u>0;u--){var f=Math.floor(a.random()*(u+1)),l=h[u];h[u]=h[f],h[f]=l}return h},a.choose=function(h){return h[Math.floor(a.random()*h.length)]},a.isElement=function(h){return typeof HTMLElement<"u"?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)},a.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"},a.isFunction=function(h){return typeof h=="function"},a.isPlainObject=function(h){return typeof h=="object"&&h.constructor===Object},a.isString=function(h){return toString.call(h)==="[object String]"},a.clamp=function(h,u,f){return h<u?u:h>f?f:h},a.sign=function(h){return h<0?-1:1},a.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-a._nowStartTime},a.random=function(h,u){return h=typeof h<"u"?h:0,u=typeof u<"u"?u:1,h+p()*(u-h)};var p=function(){return a._seed=(a._seed*9301+49297)%233280,a._seed/233280};a.colorToNumber=function(h){return h=h.replace("#",""),h.length==3&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)),parseInt(h,16)},a.logLevel=1,a.log=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.info=function(){console&&a.logLevel>0&&a.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warn=function(){console&&a.logLevel>0&&a.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},a.warnOnce=function(){var h=Array.prototype.slice.call(arguments).join(" ");a._warnedOnce[h]||(a.warn(h),a._warnedOnce[h]=!0)},a.deprecated=function(h,u,f){h[u]=a.chain(function(){a.warnOnce("\u{1F505} deprecated \u{1F505}",f)},h[u])},a.nextId=function(){return a._nextId++},a.indexOf=function(h,u){if(h.indexOf)return h.indexOf(u);for(var f=0;f<h.length;f++)if(h[f]===u)return f;return-1},a.map=function(h,u){if(h.map)return h.map(u);for(var f=[],l=0;l<h.length;l+=1)f.push(u(h[l]));return f},a.topologicalSort=function(h){var u=[],f=[],l=[];for(var d in h)!f[d]&&!l[d]&&a._topologicalSort(d,f,l,h,u);return u},a._topologicalSort=function(h,u,f,l,d){var v=l[h]||[];f[h]=!0;for(var c=0;c<v.length;c+=1){var m=v[c];f[m]||u[m]||a._topologicalSort(m,u,f,l,d)}f[h]=!1,u[h]=!0,d.push(h)},a.chain=function(){for(var h=[],u=0;u<arguments.length;u+=1){var f=arguments[u];f._chained?h.push.apply(h,f._chained):h.push(f)}var l=function(){for(var d,v=new Array(arguments.length),c=0,m=arguments.length;c<m;c++)v[c]=arguments[c];for(c=0;c<h.length;c+=1){var g=h[c].apply(d,v);typeof g<"u"&&(d=g)}return d};return l._chained=h,l},a.chainPathBefore=function(h,u,f){return a.set(h,u,a.chain(f,a.get(h,u)))},a.chainPathAfter=function(h,u,f){return a.set(h,u,a.chain(a.get(h,u),f))},a.setDecomp=function(h){a._decomp=h},a.getDecomp=function(){var h=a._decomp;try{!h&&typeof window<"u"&&(h=window.decomp),!h&&typeof r.g<"u"&&(h=r.g.decomp)}catch{h=null}return h}}()},48413:(n,o,r)=>{var a={};n.exports=a;var p=r(53614),h=r(66272),u=r(81388),f=r(99561),l=r(35810),d=r(69351),v=r(48140),c=r(53402),m=r(22562);(function(){a._deltaMax=16.666666666666668,a.create=function(g){g=g||{};var y={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},x=c.extend(y,g);return x.world=g.world||d.create({label:"World"}),x.pairs=g.pairs||f.create(),x.detector=g.detector||u.create(),x.detector.pairs=x.pairs,x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},a.update=function(g,y){var x=c.now(),C=g.world,S=g.detector,E=g.pairs,T=g.timing,P=T.timestamp,M;y>a._deltaMax&&c.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",a._deltaMax.toFixed(3),"ms."),y=typeof y<"u"?y:c._baseDelta,y*=T.timeScale,T.timestamp+=y,T.lastDelta=y;var w={timestamp:T.timestamp,delta:y};l.trigger(g,"beforeUpdate",w);var b=d.allBodies(C),I=d.allConstraints(C),R=d.allComposites(C);for(C.isModified&&(u.setBodies(S,b),d.setModified(C,!1,!1,!0)),g.enableSleeping&&p.update(b,y),a._bodiesApplyGravity(b,g.gravity),a.wrap(b,R),a.attractors(b),y>0&&a._bodiesUpdate(b,y),l.trigger(g,"beforeSolve",w),v.preSolveAll(b),M=0;M<g.constraintIterations;M++)v.solveAll(I,y);v.postSolveAll(b);var A=u.collisions(S);f.update(E,A,P),g.enableSleeping&&p.afterCollisions(E.list),E.collisionStart.length>0&&l.trigger(g,"collisionStart",{pairs:E.collisionStart,timestamp:T.timestamp,delta:y});var L=c.clamp(20/g.positionIterations,0,1);for(h.preSolvePosition(E.list),M=0;M<g.positionIterations;M++)h.solvePosition(E.list,y,L);for(h.postSolvePosition(b),v.preSolveAll(b),M=0;M<g.constraintIterations;M++)v.solveAll(I,y);for(v.postSolveAll(b),h.preSolveVelocity(E.list),M=0;M<g.velocityIterations;M++)h.solveVelocity(E.list,y);return a._bodiesUpdateVelocities(b),E.collisionActive.length>0&&l.trigger(g,"collisionActive",{pairs:E.collisionActive,timestamp:T.timestamp,delta:y}),E.collisionEnd.length>0&&l.trigger(g,"collisionEnd",{pairs:E.collisionEnd,timestamp:T.timestamp,delta:y}),a._bodiesClearForces(b),l.trigger(g,"afterUpdate",w),g.timing.lastElapsed=c.now()-x,g},a.merge=function(g,y){if(c.extend(g,y),y.world){g.world=y.world,a.clear(g);for(var x=d.allBodies(g.world),C=0;C<x.length;C++){var S=x[C];p.set(S,!1),S.id=c.nextId()}}},a.clear=function(g){f.clear(g.pairs),u.clear(g.detector)},a._bodiesClearForces=function(g){for(var y=g.length,x=0;x<y;x++){var C=g[x];C.force.x=0,C.force.y=0,C.torque=0}},a._bodiesApplyGravity=function(g,y){var x=typeof y.scale<"u"?y.scale:.001,C=g.length;if(!(y.x===0&&y.y===0||x===0))for(var S=0;S<C;S++){var E=g[S];E.ignoreGravity||E.isStatic||E.isSleeping||(E.force.y+=E.mass*y.y*x,E.force.x+=E.mass*y.x*x)}},a._bodiesUpdate=function(g,y){for(var x=g.length,C=0;C<x;C++){var S=g[C];S.isStatic||S.isSleeping||m.update(S,y)}},a._bodiesUpdateVelocities=function(g){for(var y=g.length,x=0;x<y;x++)m.updateVelocities(g[x])},a.wrap=function(g,y){for(var x=0;x<g.length;x+=1){var C=g[x];C.wrapBounds!==null&&m.wrap(C,C.wrapBounds)}for(x=0;x<y.length;x+=1){var S=y[x];S.wrapBounds!==null&&d.wrap(S,S.wrapBounds)}},a.attractors=function(g){for(var y=0;y<g.length;y++){var x=g[y],C=x.attractors;if(C&&C.length>0)for(var S=0;S<g.length;S++){var E=g[S];if(y!==S)for(var T=0;T<C.length;T++){var P=C[T],M=P;c.isFunction(P)&&(M=P(x,E)),M&&m.applyForce(E,E.position,M)}}}}})()},35810:(n,o,r)=>{var a={};n.exports=a;var p=r(53402);(function(){a.on=function(h,u,f){for(var l=u.split(" "),d,v=0;v<l.length;v++)d=l[v],h.events=h.events||{},h.events[d]=h.events[d]||[],h.events[d].push(f);return f},a.off=function(h,u,f){if(!u){h.events={};return}typeof u=="function"&&(f=u,u=p.keys(h.events).join(" "));for(var l=u.split(" "),d=0;d<l.length;d++){var v=h.events[l[d]],c=[];if(f&&v)for(var m=0;m<v.length;m++)v[m]!==f&&c.push(v[m]);h.events[l[d]]=c}},a.trigger=function(h,u,f){var l,d,v,c,m=h.events;if(m&&p.keys(m).length>0){f||(f={}),l=u.split(" ");for(var g=0;g<l.length;g++)if(d=l[g],v=m[d],v){c=p.clone(f,!1),c.name=d,c.source=h;for(var y=0;y<v.length;y++)v[y].apply(h,[c])}}}})()},6790:(n,o,r)=>{var a={};n.exports=a;var p=r(73832),h=r(53402);(function(){a.name="matter-js",a.version="0.20.0",a.uses=[],a.used=[],a.use=function(){p.use(a,Array.prototype.slice.call(arguments))},a.before=function(u,f){return u=u.replace(/^Matter./,""),h.chainPathBefore(a,u,f)},a.after=function(u,f){return u=u.replace(/^Matter./,""),h.chainPathAfter(a,u,f)}})()},73832:(n,o,r)=>{var a={};n.exports=a;var p=r(53402);(function(){a._registry={},a.register=function(h){if(a.isPlugin(h)||p.warn("Plugin.register:",a.toString(h),"does not implement all required fields."),h.name in a._registry){var u=a._registry[h.name],f=a.versionParse(h.version).number,l=a.versionParse(u.version).number;f>l?(p.warn("Plugin.register:",a.toString(u),"was upgraded to",a.toString(h)),a._registry[h.name]=h):f<l?p.warn("Plugin.register:",a.toString(u),"can not be downgraded to",a.toString(h)):h!==u&&p.warn("Plugin.register:",a.toString(h),"is already registered to different plugin object")}else a._registry[h.name]=h;return h},a.resolve=function(h){return a._registry[a.dependencyParse(h).name]},a.toString=function(h){return typeof h=="string"?h:(h.name||"anonymous")+"@"+(h.version||h.range||"0.0.0")},a.isPlugin=function(h){return h&&h.name&&h.version&&h.install},a.isUsed=function(h,u){return h.used.indexOf(u)>-1},a.isFor=function(h,u){var f=h.for&&a.dependencyParse(h.for);return!h.for||u.name===f.name&&a.versionSatisfies(u.version,f.range)},a.use=function(h,u){if(h.uses=(h.uses||[]).concat(u||[]),h.uses.length===0){p.warn("Plugin.use:",a.toString(h),"does not specify any dependencies to install.");return}for(var f=a.dependencies(h),l=p.topologicalSort(f),d=[],v=0;v<l.length;v+=1)if(l[v]!==h.name){var c=a.resolve(l[v]);if(!c){d.push("\u274C "+l[v]);continue}a.isUsed(h,c.name)||(a.isFor(c,h)||(p.warn("Plugin.use:",a.toString(c),"is for",c.for,"but installed on",a.toString(h)+"."),c._warned=!0),c.install?c.install(h):(p.warn("Plugin.use:",a.toString(c),"does not specify an install function."),c._warned=!0),c._warned?(d.push("\u{1F536} "+a.toString(c)),delete c._warned):d.push("\u2705 "+a.toString(c)),h.used.push(c.name))}d.length>0&&!c.silent&&p.info(d.join("  "))},a.dependencies=function(h,u){var f=a.dependencyParse(h),l=f.name;if(u=u||{},!(l in u)){h=a.resolve(h)||h,u[l]=p.map(h.uses||[],function(v){a.isPlugin(v)&&a.register(v);var c=a.dependencyParse(v),m=a.resolve(v);return m&&!a.versionSatisfies(m.version,c.range)?(p.warn("Plugin.dependencies:",a.toString(m),"does not satisfy",a.toString(c),"used by",a.toString(f)+"."),m._warned=!0,h._warned=!0):m||(p.warn("Plugin.dependencies:",a.toString(v),"used by",a.toString(f),"could not be resolved."),h._warned=!0),c.name});for(var d=0;d<u[l].length;d+=1)a.dependencies(u[l][d],u);return u}},a.dependencyParse=function(h){if(p.isString(h)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(h)||p.warn("Plugin.dependencyParse:",h,"is not a valid dependency string."),{name:h.split("@")[0],range:h.split("@")[1]||"*"}}return{name:h.name,range:h.range||h.version}},a.versionParse=function(h){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(h)||p.warn("Plugin.versionParse:",h,"is not a valid version or range.");var f=u.exec(h),l=Number(f[4]),d=Number(f[5]),v=Number(f[6]);return{isRange:!!(f[1]||f[2]),version:f[3],range:h,operator:f[1]||f[2]||"",major:l,minor:d,patch:v,parts:[l,d,v],prerelease:f[7],number:l*1e8+d*1e4+v}},a.versionSatisfies=function(h,u){u=u||"*";var f=a.versionParse(u),l=a.versionParse(h);if(f.isRange){if(f.operator==="*"||h==="*")return!0;if(f.operator===">")return l.number>f.number;if(f.operator===">=")return l.number>=f.number;if(f.operator==="~")return l.major===f.major&&l.minor===f.minor&&l.patch>=f.patch;if(f.operator==="^")return f.major>0?l.major===f.major&&l.number>=f.number:f.minor>0?l.minor===f.minor&&l.patch>=f.patch:l.patch===f.patch}return h===u||h==="*"}})()},13037:(n,o,r)=>{var a={};n.exports=a;var p=r(35810),h=r(48413),u=r(53402);(function(){a._maxFrameDelta=66.66666666666667,a._frameDeltaFallback=16.666666666666668,a._timeBufferMargin=1.5,a._elapsedNextEstimate=1,a._smoothingLowerBound=.1,a._smoothingUpperBound=.9,a.create=function(l){var d={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},v=u.extend(d,l);return v.fps=0,v},a.run=function(l,d){return l.timeBuffer=a._frameDeltaFallback,function v(c){l.frameRequestId=a._onNextFrame(l,v),c&&l.enabled&&a.tick(l,d,c)}(),l},a.tick=function(l,d,v){var c=u.now(),m=l.delta,g=0,y=v-l.timeLastTick;if((!y||!l.timeLastTick||y>Math.max(a._maxFrameDelta,l.maxFrameTime))&&(y=l.frameDelta||a._frameDeltaFallback),l.frameDeltaSmoothing){l.frameDeltaHistory.push(y),l.frameDeltaHistory=l.frameDeltaHistory.slice(-l.frameDeltaHistorySize);var x=l.frameDeltaHistory.slice(0).sort(),C=l.frameDeltaHistory.slice(x.length*a._smoothingLowerBound,x.length*a._smoothingUpperBound),S=f(C);y=S||y}l.frameDeltaSnapping&&(y=1e3/Math.round(1e3/y)),l.frameDelta=y,l.timeLastTick=v,l.timeBuffer+=l.frameDelta,l.timeBuffer=u.clamp(l.timeBuffer,0,l.frameDelta+m*a._timeBufferMargin),l.lastUpdatesDeferred=0;var E=l.maxUpdates||Math.ceil(l.maxFrameTime/m),T={timestamp:d.timing.timestamp};p.trigger(l,"beforeTick",T),p.trigger(l,"tick",T);for(var P=u.now();m>0&&l.timeBuffer>=m*a._timeBufferMargin;){p.trigger(l,"beforeUpdate",T),h.update(d,m),p.trigger(l,"afterUpdate",T),l.timeBuffer-=m,g+=1;var M=u.now()-c,w=u.now()-P,b=M+a._elapsedNextEstimate*w/g;if(g>=E||b>l.maxFrameTime){l.lastUpdatesDeferred=Math.round(Math.max(0,l.timeBuffer/m-a._timeBufferMargin));break}}d.timing.lastUpdatesPerFrame=g,p.trigger(l,"afterTick",T),l.frameDeltaHistory.length>=100&&(l.lastUpdatesDeferred&&Math.round(l.frameDelta/m)>E?u.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):l.lastUpdatesDeferred&&u.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof l.isFixed<"u"&&u.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(l.deltaMin||l.deltaMax)&&u.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),l.fps!==0&&u.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},a.stop=function(l){a._cancelNextFrame(l)},a._onNextFrame=function(l,d){if(typeof window<"u"&&window.requestAnimationFrame)l.frameRequestId=window.requestAnimationFrame(d);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return l.frameRequestId},a._cancelNextFrame=function(l){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(l.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var f=function(l){for(var d=0,v=l.length,c=0;c<v;c+=1)d+=l[c];return d/v||0};a._mean=f})()},53614:(n,o,r)=>{var a={};n.exports=a;var p=r(22562),h=r(35810),u=r(53402);(function(){a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(f,l){for(var d=l/u._baseDelta,v=a._motionSleepThreshold,c=0;c<f.length;c++){var m=f[c],g=p.getSpeed(m),y=p.getAngularSpeed(m),x=g*g+y*y;if(m.force.x!==0||m.force.y!==0){a.set(m,!1);continue}var C=Math.min(m.motion,x),S=Math.max(m.motion,x);m.motion=a._minBias*C+(1-a._minBias)*S,m.sleepThreshold>0&&m.motion<v?(m.sleepCounter+=1,m.sleepCounter>=m.sleepThreshold/d&&a.set(m,!0)):m.sleepCounter>0&&(m.sleepCounter-=1)}},a.afterCollisions=function(f){for(var l=a._motionSleepThreshold,d=0;d<f.length;d++){var v=f[d];if(v.isActive){var c=v.collision,m=c.bodyA.parent,g=c.bodyB.parent;if(!(m.isSleeping&&g.isSleeping||m.isStatic||g.isStatic)&&(m.isSleeping||g.isSleeping)){var y=m.isSleeping&&!m.isStatic?m:g,x=y===m?g:m;!y.isStatic&&x.motion>l&&a.set(y,!1)}}}},a.set=function(f,l){var d=f.isSleeping;l?(f.isSleeping=!0,f.sleepCounter=f.sleepThreshold,f.positionImpulse.x=0,f.positionImpulse.y=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.speed=0,f.angularSpeed=0,f.motion=0,d||h.trigger(f,"sleepStart")):(f.isSleeping=!1,f.sleepCounter=0,d&&h.trigger(f,"sleepEnd"))}})()},66280:(n,o,r)=>{var a={};n.exports=a;var p=r(41598),h=r(53402),u=r(22562),f=r(15647),l=r(31725);(function(){a.rectangle=function(d,v,c,m,g){g=g||{};var y={label:"Rectangle Body",position:{x:d,y:v},vertices:p.fromPath("L 0 0 L "+c+" 0 L "+c+" "+m+" L 0 "+m)};if(g.chamfer){var x=g.chamfer;y.vertices=p.chamfer(y.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return u.create(h.extend({},y,g))},a.trapezoid=function(d,v,c,m,g,y){y=y||{},g>=1&&h.warn("Bodies.trapezoid: slope parameter must be < 1."),g*=.5;var x=(1-g*2)*c,C=c*g,S=C+x,E=S+C,T;g<.5?T="L 0 0 L "+C+" "+-m+" L "+S+" "+-m+" L "+E+" 0":T="L 0 0 L "+S+" "+-m+" L "+E+" 0";var P={label:"Trapezoid Body",position:{x:d,y:v},vertices:p.fromPath(T)};if(y.chamfer){var M=y.chamfer;P.vertices=p.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete y.chamfer}return u.create(h.extend({},P,y))},a.circle=function(d,v,c,m,g){m=m||{};var y={label:"Circle Body",circleRadius:c};g=g||25;var x=Math.ceil(Math.max(10,Math.min(g,c)));return x%2===1&&(x+=1),a.polygon(d,v,x,c,h.extend({},y,m))},a.polygon=function(d,v,c,m,g){if(g=g||{},c<3)return a.circle(d,v,m,g);for(var y=2*Math.PI/c,x="",C=y*.5,S=0;S<c;S+=1){var E=C+S*y,T=Math.cos(E)*m,P=Math.sin(E)*m;x+="L "+T.toFixed(3)+" "+P.toFixed(3)+" "}var M={label:"Polygon Body",position:{x:d,y:v},vertices:p.fromPath(x)};if(g.chamfer){var w=g.chamfer;M.vertices=p.chamfer(M.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete g.chamfer}return u.create(h.extend({},M,g))},a.fromVertices=function(d,v,c,m,g,y,x,C){var S=h.getDecomp(),E,T,P,M,w,b,I,R,A,L,O;for(E=!!(S&&S.quickDecomp),m=m||{},P=[],g=typeof g<"u"?g:!1,y=typeof y<"u"?y:.01,x=typeof x<"u"?x:10,C=typeof C<"u"?C:.01,h.isArray(c[0])||(c=[c]),L=0;L<c.length;L+=1)if(b=c[L],M=p.isConvex(b),w=!M,w&&!E&&h.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),M||!E)M?b=p.clockwiseSort(b):b=p.hull(b),P.push({position:{x:d,y:v},vertices:b});else{var F=b.map(function(Y){return[Y.x,Y.y]});S.makeCCW(F),y!==!1&&S.removeCollinearPoints(F,y),C!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(F,C);var G=S.quickDecomp(F);for(I=0;I<G.length;I++){var U=G[I],z=U.map(function(Y){return{x:Y[0],y:Y[1]}});x>0&&p.area(z)<x||P.push({position:p.centre(z),vertices:z})}}for(I=0;I<P.length;I++)P[I]=u.create(h.extend(P[I],m));if(g){var N=5;for(I=0;I<P.length;I++){var k=P[I];for(R=I+1;R<P.length;R++){var D=P[R];if(f.overlaps(k.bounds,D.bounds)){var V=k.vertices,B=D.vertices;for(A=0;A<k.vertices.length;A++)for(O=0;O<D.vertices.length;O++){var W=l.magnitudeSquared(l.sub(V[(A+1)%V.length],B[O])),H=l.magnitudeSquared(l.sub(V[A],B[(O+1)%B.length]));W<N&&H<N&&(V[A].isInternal=!0,B[O].isInternal=!0)}}}}}return P.length>1?(T=u.create(h.extend({parts:P.slice(0)},m)),u.setPosition(T,{x:d,y:v}),T):P[0]},a.flagCoincidentParts=function(d,v){v===void 0&&(v=5);for(var c=0;c<d.length;c++)for(var m=d[c],g=c+1;g<d.length;g++){var y=d[g];if(f.overlaps(m.bounds,y.bounds))for(var x=m.vertices,C=y.vertices,S=0;S<m.vertices.length;S++)for(var E=0;E<y.vertices.length;E++){var T=l.magnitudeSquared(l.sub(x[(S+1)%x.length],C[E])),P=l.magnitudeSquared(l.sub(x[S],C[(E+1)%C.length]));T<v&&P<v&&(x[S].isInternal=!0,C[E].isInternal=!0)}}return d}})()},74116:(n,o,r)=>{var a={};n.exports=a;var p=r(69351),h=r(48140),u=r(53402),f=r(22562),l=r(66280);(function(){a.stack=function(d,v,c,m,g,y,x){for(var C=p.create({label:"Stack"}),S=d,E=v,T,P=0,M=0;M<m;M++){for(var w=0,b=0;b<c;b++){var I=x(S,E,b,M,T,P);if(I){var R=I.bounds.max.y-I.bounds.min.y,A=I.bounds.max.x-I.bounds.min.x;R>w&&(w=R),f.translate(I,{x:A*.5,y:R*.5}),S=I.bounds.max.x+g,p.addBody(C,I),T=I,P+=1}else S+=g}E+=w+y,S=d}return C},a.chain=function(d,v,c,m,g,y){for(var x=d.bodies,C=1;C<x.length;C++){var S=x[C-1],E=x[C],T=S.bounds.max.y-S.bounds.min.y,P=S.bounds.max.x-S.bounds.min.x,M=E.bounds.max.y-E.bounds.min.y,w=E.bounds.max.x-E.bounds.min.x,b={bodyA:S,pointA:{x:P*v,y:T*c},bodyB:E,pointB:{x:w*m,y:M*g}},I=u.extend(b,y);p.addConstraint(d,h.create(I))}return d.label+=" Chain",d},a.mesh=function(d,v,c,m,g){var y=d.bodies,x,C,S,E,T;for(x=0;x<c;x++){for(C=1;C<v;C++)S=y[C-1+x*v],E=y[C+x*v],p.addConstraint(d,h.create(u.extend({bodyA:S,bodyB:E},g)));if(x>0)for(C=0;C<v;C++)S=y[C+(x-1)*v],E=y[C+x*v],p.addConstraint(d,h.create(u.extend({bodyA:S,bodyB:E},g))),m&&C>0&&(T=y[C-1+(x-1)*v],p.addConstraint(d,h.create(u.extend({bodyA:T,bodyB:E},g)))),m&&C<v-1&&(T=y[C+1+(x-1)*v],p.addConstraint(d,h.create(u.extend({bodyA:T,bodyB:E},g))))}return d.label+=" Mesh",d},a.pyramid=function(d,v,c,m,g,y,x){return a.stack(d,v,c,m,g,y,function(C,S,E,T,P,M){var w=Math.min(m,Math.ceil(c/2)),b=P?P.bounds.max.x-P.bounds.min.x:0;if(!(T>w)){T=w-T;var I=T,R=c-1-T;if(!(E<I||E>R)){M===1&&f.translate(P,{x:(E+(c%2===1?1:-1))*b,y:0});var A=P?E*b:0;return x(d+A+E*g,S,E,T,P,M)}}})},a.newtonsCradle=function(d,v,c,m,g){for(var y=p.create({label:"Newtons Cradle"}),x=0;x<c;x++){var C=1.9,S=l.circle(d+x*(m*C),v+g,m,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),E=h.create({pointA:{x:d+x*(m*C),y:v},bodyB:S});p.addBody(y,S),p.addConstraint(y,E)}return y},a.car=function(d,v,c,m,g){var y=f.nextGroup(!0),x=20,C=-c*.5+x,S=c*.5-x,E=0,T=p.create({label:"Car"}),P=l.rectangle(d,v,c,m,{collisionFilter:{group:y},chamfer:{radius:m*.5},density:2e-4}),M=l.circle(d+C,v+E,g,{collisionFilter:{group:y},friction:.8}),w=l.circle(d+S,v+E,g,{collisionFilter:{group:y},friction:.8}),b=h.create({bodyB:P,pointB:{x:C,y:E},bodyA:M,stiffness:1,length:0}),I=h.create({bodyB:P,pointB:{x:S,y:E},bodyA:w,stiffness:1,length:0});return p.addBody(T,P),p.addBody(T,M),p.addBody(T,w),p.addConstraint(T,b),p.addConstraint(T,I),T},a.softBody=function(d,v,c,m,g,y,x,C,S,E){S=u.extend({inertia:1/0},S),E=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},E);var T=a.stack(d,v,c,m,g,y,function(P,M){return l.circle(P,M,C,S)});return a.mesh(T,c,m,x,E),T.label="Soft Body",T}})()},66615:(n,o,r)=>{var a={};n.exports=a;var p=r(31725),h=r(53402);(function(){a.fromVertices=function(u){for(var f={},l=0;l<u.length;l++){var d=(l+1)%u.length,v=p.normalise({x:u[d].y-u[l].y,y:u[l].x-u[d].x}),c=v.y===0?1/0:v.x/v.y;c=c.toFixed(3).toString(),f[c]=v}return h.values(f)},a.rotate=function(u,f){if(f!==0)for(var l=Math.cos(f),d=Math.sin(f),v=0;v<u.length;v++){var c=u[v],m;m=c.x*l-c.y*d,c.y=c.x*d+c.y*l,c.x=m}}})()},15647:n=>{var o={};n.exports=o,function(){o.create=function(r){var a={min:{x:0,y:0},max:{x:0,y:0}};return r&&o.update(a,r),a},o.update=function(r,a,p){r.min.x=1/0,r.max.x=-1/0,r.min.y=1/0,r.max.y=-1/0;for(var h=0;h<a.length;h++){var u=a[h];u.x>r.max.x&&(r.max.x=u.x),u.x<r.min.x&&(r.min.x=u.x),u.y>r.max.y&&(r.max.y=u.y),u.y<r.min.y&&(r.min.y=u.y)}p&&(p.x>0?r.max.x+=p.x:r.min.x+=p.x,p.y>0?r.max.y+=p.y:r.min.y+=p.y)},o.contains=function(r,a){return a.x>=r.min.x&&a.x<=r.max.x&&a.y>=r.min.y&&a.y<=r.max.y},o.overlaps=function(r,a){return r.min.x<=a.max.x&&r.max.x>=a.min.x&&r.max.y>=a.min.y&&r.min.y<=a.max.y},o.translate=function(r,a){r.min.x+=a.x,r.max.x+=a.x,r.min.y+=a.y,r.max.y+=a.y},o.shift=function(r,a){var p=r.max.x-r.min.x,h=r.max.y-r.min.y;r.min.x=a.x,r.max.x=a.x+p,r.min.y=a.y,r.max.y=a.y+h},o.wrap=function(r,a,p){var h=null,u=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(r.min.x>a.max.x?h=a.min.x-r.max.x:r.max.x<a.min.x&&(h=a.max.x-r.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(r.min.y>a.max.y?u=a.min.y-r.max.y:r.max.y<a.min.y&&(u=a.max.y-r.min.y)),h!==null||u!==null)return{x:h||0,y:u||0}}}()},74058:(n,o,r)=>{var a={};n.exports=a;var p=r(15647),h=r(53402);(function(){a.pathToVertices=function(u,f){typeof window<"u"&&!("SVGPathSeg"in window)&&h.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var l,d,v,c,m,g,y,x,C,S,E=[],T,P,M=0,w=0,b=0;f=f||15;var I=function(A,L,O){var F=O%2===1&&O>1;if(!C||A!=C.x||L!=C.y){C&&F?(T=C.x,P=C.y):(T=0,P=0);var G={x:T+A,y:P+L};(F||!C)&&(C=G),E.push(G),w=T+A,b=P+L}},R=function(A){var L=A.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":w=A.x,b=A.y;break;case"H":w=A.x;break;case"V":b=A.y;break}I(w,b,A.pathSegType)}};for(a._svgPathToAbsolute(u),v=u.getTotalLength(),g=[],l=0;l<u.pathSegList.numberOfItems;l+=1)g.push(u.pathSegList.getItem(l));for(y=g.concat();M<v;){if(S=u.getPathSegAtLength(M),m=g[S],m!=x){for(;y.length&&y[0]!=m;)R(y.shift());x=m}switch(m.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":c=u.getPointAtLength(M),I(c.x,c.y,0);break}M+=f}for(l=0,d=y.length;l<d;++l)R(y[l]);return E},a._svgPathToAbsolute=function(u){for(var f,l,d,v,c,m,g=u.pathSegList,y=0,x=0,C=g.numberOfItems,S=0;S<C;++S){var E=g.getItem(S),T=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in E&&(y=E.x),"y"in E&&(x=E.y);else switch("x1"in E&&(d=y+E.x1),"x2"in E&&(c=y+E.x2),"y1"in E&&(v=x+E.y1),"y2"in E&&(m=x+E.y2),"x"in E&&(y+=E.x),"y"in E&&(x+=E.y),T){case"m":g.replaceItem(u.createSVGPathSegMovetoAbs(y,x),S);break;case"l":g.replaceItem(u.createSVGPathSegLinetoAbs(y,x),S);break;case"h":g.replaceItem(u.createSVGPathSegLinetoHorizontalAbs(y),S);break;case"v":g.replaceItem(u.createSVGPathSegLinetoVerticalAbs(x),S);break;case"c":g.replaceItem(u.createSVGPathSegCurvetoCubicAbs(y,x,d,v,c,m),S);break;case"s":g.replaceItem(u.createSVGPathSegCurvetoCubicSmoothAbs(y,x,c,m),S);break;case"q":g.replaceItem(u.createSVGPathSegCurvetoQuadraticAbs(y,x,d,v),S);break;case"t":g.replaceItem(u.createSVGPathSegCurvetoQuadraticSmoothAbs(y,x),S);break;case"a":g.replaceItem(u.createSVGPathSegArcAbs(y,x,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),S);break;case"z":case"Z":y=f,x=l;break}(T=="M"||T=="m")&&(f=y,l=x)}}})()},31725:n=>{var o={};n.exports=o,function(){o.create=function(r,a){return{x:r||0,y:a||0}},o.clone=function(r){return{x:r.x,y:r.y}},o.magnitude=function(r){return Math.sqrt(r.x*r.x+r.y*r.y)},o.magnitudeSquared=function(r){return r.x*r.x+r.y*r.y},o.rotate=function(r,a,p){var h=Math.cos(a),u=Math.sin(a);p||(p={});var f=r.x*h-r.y*u;return p.y=r.x*u+r.y*h,p.x=f,p},o.rotateAbout=function(r,a,p,h){var u=Math.cos(a),f=Math.sin(a);h||(h={});var l=p.x+((r.x-p.x)*u-(r.y-p.y)*f);return h.y=p.y+((r.x-p.x)*f+(r.y-p.y)*u),h.x=l,h},o.normalise=function(r){var a=o.magnitude(r);return a===0?{x:0,y:0}:{x:r.x/a,y:r.y/a}},o.dot=function(r,a){return r.x*a.x+r.y*a.y},o.cross=function(r,a){return r.x*a.y-r.y*a.x},o.cross3=function(r,a,p){return(a.x-r.x)*(p.y-r.y)-(a.y-r.y)*(p.x-r.x)},o.add=function(r,a,p){return p||(p={}),p.x=r.x+a.x,p.y=r.y+a.y,p},o.sub=function(r,a,p){return p||(p={}),p.x=r.x-a.x,p.y=r.y-a.y,p},o.mult=function(r,a){return{x:r.x*a,y:r.y*a}},o.div=function(r,a){return{x:r.x/a,y:r.y/a}},o.perp=function(r,a){return a=a===!0?-1:1,{x:a*-r.y,y:a*r.x}},o.neg=function(r){return{x:-r.x,y:-r.y}},o.angle=function(r,a){return Math.atan2(a.y-r.y,a.x-r.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]}()},41598:(n,o,r)=>{var a={};n.exports=a;var p=r(31725),h=r(53402);(function(){a.create=function(u,f){for(var l=[],d=0;d<u.length;d++){var v=u[d],c={x:v.x,y:v.y,index:d,body:f,isInternal:!1};l.push(c)}return l},a.fromPath=function(u,f){var l=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,d=[];return u.replace(l,function(v,c,m){d.push({x:parseFloat(c),y:parseFloat(m)})}),a.create(d,f)},a.centre=function(u){for(var f=a.area(u,!0),l={x:0,y:0},d,v,c,m=0;m<u.length;m++)c=(m+1)%u.length,d=p.cross(u[m],u[c]),v=p.mult(p.add(u[m],u[c]),d),l=p.add(l,v);return p.div(l,6*f)},a.mean=function(u){for(var f={x:0,y:0},l=0;l<u.length;l++)f.x+=u[l].x,f.y+=u[l].y;return p.div(f,u.length)},a.area=function(u,f){for(var l=0,d=u.length-1,v=0;v<u.length;v++)l+=(u[d].x-u[v].x)*(u[d].y+u[v].y),d=v;return f?l/2:Math.abs(l)/2},a.inertia=function(u,f){for(var l=0,d=0,v=u,c,m,g=0;g<v.length;g++)m=(g+1)%v.length,c=Math.abs(p.cross(v[m],v[g])),l+=c*(p.dot(v[m],v[m])+p.dot(v[m],v[g])+p.dot(v[g],v[g])),d+=c;return f/6*(l/d)},a.translate=function(u,f,l){l=typeof l<"u"?l:1;var d=u.length,v=f.x*l,c=f.y*l,m;for(m=0;m<d;m++)u[m].x+=v,u[m].y+=c;return u},a.rotate=function(u,f,l){if(f!==0){var d=Math.cos(f),v=Math.sin(f),c=l.x,m=l.y,g=u.length,y,x,C,S;for(S=0;S<g;S++)y=u[S],x=y.x-c,C=y.y-m,y.x=c+(x*d-C*v),y.y=m+(x*v+C*d);return u}},a.contains=function(u,f){for(var l=f.x,d=f.y,v=u.length,c=u[v-1],m,g=0;g<v;g++){if(m=u[g],(l-c.x)*(m.y-c.y)+(d-c.y)*(c.x-m.x)>0)return!1;c=m}return!0},a.scale=function(u,f,l,d){if(f===1&&l===1)return u;d=d||a.centre(u);for(var v,c,m=0;m<u.length;m++)v=u[m],c=p.sub(v,d),u[m].x=d.x+c.x*f,u[m].y=d.y+c.y*l;return u},a.chamfer=function(u,f,l,d,v){typeof f=="number"?f=[f]:f=f||[8],l=typeof l<"u"?l:-1,d=d||2,v=v||14;for(var c=[],m=0;m<u.length;m++){var g=u[m-1>=0?m-1:u.length-1],y=u[m],x=u[(m+1)%u.length],C=f[m<f.length?m:f.length-1];if(C===0){c.push(y);continue}var S=p.normalise({x:y.y-g.y,y:g.x-y.x}),E=p.normalise({x:x.y-y.y,y:y.x-x.x}),T=Math.sqrt(2*Math.pow(C,2)),P=p.mult(h.clone(S),C),M=p.normalise(p.mult(p.add(S,E),.5)),w=p.sub(y,p.mult(M,T)),b=l;l===-1&&(b=Math.pow(C,.32)*1.75),b=h.clamp(b,d,v),b%2===1&&(b+=1);for(var I=Math.acos(p.dot(S,E)),R=I/b,A=0;A<b;A++)c.push(p.add(p.rotate(P,R*A),w))}return c},a.clockwiseSort=function(u){var f=a.mean(u);return u.sort(function(l,d){return p.angle(f,l)-p.angle(f,d)}),u},a.isConvex=function(u){var f=0,l=u.length,d,v,c,m;if(l<3)return null;for(d=0;d<l;d++)if(v=(d+1)%l,c=(d+2)%l,m=(u[v].x-u[d].x)*(u[c].y-u[v].y),m-=(u[v].y-u[d].y)*(u[c].x-u[v].x),m<0?f|=1:m>0&&(f|=2),f===3)return!1;return f!==0?!0:null},a.hull=function(u){var f=[],l=[],d,v;for(u=u.slice(0),u.sort(function(c,m){var g=c.x-m.x;return g!==0?g:c.y-m.y}),v=0;v<u.length;v+=1){for(d=u[v];l.length>=2&&p.cross3(l[l.length-2],l[l.length-1],d)<=0;)l.pop();l.push(d)}for(v=u.length-1;v>=0;v-=1){for(d=u[v];f.length>=2&&p.cross3(f[f.length-2],f[f.length-1],d)<=0;)f.pop();f.push(d)}return f.pop(),l.pop(),f.concat(l)}})()},55973:n=>{n.exports={decomp:I,quickDecomp:O,isSimple:A,removeCollinearPoints:F,removeDuplicatePoints:G,makeCCW:x};function o(N,k,D){D=D||0;var V=[0,0],B,W,H,Y,X,$,J;return B=N[1][1]-N[0][1],W=N[0][0]-N[1][0],H=B*N[0][0]+W*N[0][1],Y=k[1][1]-k[0][1],X=k[0][0]-k[1][0],$=Y*k[0][0]+X*k[0][1],J=B*X-Y*W,U(J,0,D)||(V[0]=(X*H-W*$)/J,V[1]=(B*$-Y*H)/J),V}function r(N,k,D,V){var B=k[0]-N[0],W=k[1]-N[1],H=V[0]-D[0],Y=V[1]-D[1];if(H*W-Y*B===0)return!1;var X=(B*(D[1]-N[1])+W*(N[0]-D[0]))/(H*W-Y*B),$=(H*(N[1]-D[1])+Y*(D[0]-N[0]))/(Y*B-H*W);return X>=0&&X<=1&&$>=0&&$<=1}function a(N,k,D){return(k[0]-N[0])*(D[1]-N[1])-(D[0]-N[0])*(k[1]-N[1])}function p(N,k,D){return a(N,k,D)>0}function h(N,k,D){return a(N,k,D)>=0}function u(N,k,D){return a(N,k,D)<0}function f(N,k,D){return a(N,k,D)<=0}var l=[],d=[];function v(N,k,D,V){if(V){var B=l,W=d;B[0]=k[0]-N[0],B[1]=k[1]-N[1],W[0]=D[0]-k[0],W[1]=D[1]-k[1];var H=B[0]*W[0]+B[1]*W[1],Y=Math.sqrt(B[0]*B[0]+B[1]*B[1]),X=Math.sqrt(W[0]*W[0]+W[1]*W[1]),$=Math.acos(H/(Y*X));return $<V}else return a(N,k,D)===0}function c(N,k){var D=k[0]-N[0],V=k[1]-N[1];return D*D+V*V}function m(N,k){var D=N.length;return N[k<0?k%D+D:k%D]}function g(N){N.length=0}function y(N,k,D,V){for(var B=D;B<V;B++)N.push(k[B])}function x(N){for(var k=0,D=N,V=1;V<N.length;++V)(D[V][1]<D[k][1]||D[V][1]===D[k][1]&&D[V][0]>D[k][0])&&(k=V);return p(m(N,k-1),m(N,k),m(N,k+1))?!1:(C(N),!0)}function C(N){for(var k=[],D=N.length,V=0;V!==D;V++)k.push(N.pop());for(var V=0;V!==D;V++)N[V]=k[V]}function S(N,k){return u(m(N,k-1),m(N,k),m(N,k+1))}var E=[],T=[];function P(N,k,D){var V,B,W=E,H=T;if(h(m(N,k+1),m(N,k),m(N,D))&&f(m(N,k-1),m(N,k),m(N,D)))return!1;B=c(m(N,k),m(N,D));for(var Y=0;Y!==N.length;++Y)if(!((Y+1)%N.length===k||Y===k)&&h(m(N,k),m(N,D),m(N,Y+1))&&f(m(N,k),m(N,D),m(N,Y))&&(W[0]=m(N,k),W[1]=m(N,D),H[0]=m(N,Y),H[1]=m(N,Y+1),V=o(W,H),c(m(N,k),V)<B))return!1;return!0}function M(N,k,D){for(var V=0;V!==N.length;++V)if(!(V===k||V===D||(V+1)%N.length===k||(V+1)%N.length===D)&&r(m(N,k),m(N,D),m(N,V),m(N,V+1)))return!1;return!0}function w(N,k,D,V){var B=V||[];if(g(B),k<D)for(var W=k;W<=D;W++)B.push(N[W]);else{for(var W=0;W<=D;W++)B.push(N[W]);for(var W=k;W<N.length;W++)B.push(N[W])}return B}function b(N){for(var k=[],D=[],V=[],B=[],W=Number.MAX_VALUE,H=0;H<N.length;++H)if(S(N,H)){for(var Y=0;Y<N.length;++Y)if(P(N,H,Y)){D=b(w(N,H,Y,B)),V=b(w(N,Y,H,B));for(var X=0;X<V.length;X++)D.push(V[X]);D.length<W&&(k=D,W=D.length,k.push([m(N,H),m(N,Y)]))}}return k}function I(N){var k=b(N);return k.length>0?R(N,k):[N]}function R(N,k){if(k.length===0)return[N];if(k instanceof Array&&k.length&&k[0]instanceof Array&&k[0].length===2&&k[0][0]instanceof Array){for(var D=[N],V=0;V<k.length;V++)for(var B=k[V],W=0;W<D.length;W++){var H=D[W],Y=R(H,B);if(Y){D.splice(W,1),D.push(Y[0],Y[1]);break}}return D}else{var B=k,V=N.indexOf(B[0]),W=N.indexOf(B[1]);return V!==-1&&W!==-1?[w(N,V,W),w(N,W,V)]:!1}}function A(N){var k=N,D;for(D=0;D<k.length-1;D++)for(var V=0;V<D-1;V++)if(r(k[D],k[D+1],k[V],k[V+1]))return!1;for(D=1;D<k.length-2;D++)if(r(k[0],k[k.length-1],k[D],k[D+1]))return!1;return!0}function L(N,k,D,V,B){B=B||0;var W=k[1]-N[1],H=N[0]-k[0],Y=W*N[0]+H*N[1],X=V[1]-D[1],$=D[0]-V[0],J=X*D[0]+$*D[1],q=W*$-X*H;return U(q,0,B)?[0,0]:[($*Y-H*J)/q,(W*J-X*Y)/q]}function O(N,k,D,V,B,W,H){W=W||100,H=H||0,B=B||25,k=typeof k<"u"?k:[],D=D||[],V=V||[];var Y=[0,0],X=[0,0],$=[0,0],J=0,q=0,Q=0,tt=0,rt=0,et=0,ot=0,ut=[],dt=[],it=N,st=N;if(st.length<3)return k;if(H++,H>W)return console.warn("quickDecomp: max level ("+W+") reached."),k;for(var at=0;at<N.length;++at)if(S(it,at)){D.push(it[at]),J=q=Number.MAX_VALUE;for(var yt=0;yt<N.length;++yt)p(m(it,at-1),m(it,at),m(it,yt))&&f(m(it,at-1),m(it,at),m(it,yt-1))&&($=L(m(it,at-1),m(it,at),m(it,yt),m(it,yt-1)),u(m(it,at+1),m(it,at),$)&&(Q=c(it[at],$),Q<q&&(q=Q,X=$,et=yt))),p(m(it,at+1),m(it,at),m(it,yt+1))&&f(m(it,at+1),m(it,at),m(it,yt))&&($=L(m(it,at+1),m(it,at),m(it,yt),m(it,yt+1)),p(m(it,at-1),m(it,at),$)&&(Q=c(it[at],$),Q<J&&(J=Q,Y=$,rt=yt)));if(et===(rt+1)%N.length)$[0]=(X[0]+Y[0])/2,$[1]=(X[1]+Y[1])/2,V.push($),at<rt?(y(ut,it,at,rt+1),ut.push($),dt.push($),et!==0&&y(dt,it,et,it.length),y(dt,it,0,at+1)):(at!==0&&y(ut,it,at,it.length),y(ut,it,0,rt+1),ut.push($),dt.push($),y(dt,it,et,at+1));else{if(et>rt&&(rt+=N.length),tt=Number.MAX_VALUE,rt<et)return k;for(var yt=et;yt<=rt;++yt)h(m(it,at-1),m(it,at),m(it,yt))&&f(m(it,at+1),m(it,at),m(it,yt))&&(Q=c(m(it,at),m(it,yt)),Q<tt&&M(it,at,yt)&&(tt=Q,ot=yt%N.length));at<ot?(y(ut,it,at,ot+1),ot!==0&&y(dt,it,ot,st.length),y(dt,it,0,at+1)):(at!==0&&y(ut,it,at,st.length),y(ut,it,0,ot+1),y(dt,it,ot,at+1))}return ut.length<dt.length?(O(ut,k,D,V,B,W,H),O(dt,k,D,V,B,W,H)):(O(dt,k,D,V,B,W,H),O(ut,k,D,V,B,W,H)),k}return k.push(N),k}function F(N,k){for(var D=0,V=N.length-1;N.length>3&&V>=0;--V)v(m(N,V-1),m(N,V),m(N,V+1),k)&&(N.splice(V%N.length,1),D++);return D}function G(N,k){for(var D=N.length-1;D>=1;--D)for(var V=N[D],B=D-1;B>=0;--B)if(z(V,N[B],k)){N.splice(D,1);continue}}function U(N,k,D){return D=D||0,Math.abs(N-k)<=D}function z(N,k,D){return U(N[0],k[0],D)&&U(N[1],k[1],D)}},52018:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u){this.pluginManager=u,this.game=u.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});n.exports=p},42363:n=>{var o={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};n.exports=o},37277:n=>{var o={},r={},a={};a.register=function(p,h,u,f){f===void 0&&(f=!1),o[p]={plugin:h,mapping:u,custom:f}},a.registerCustom=function(p,h,u,f){r[p]={plugin:h,mapping:u,data:f}},a.hasCore=function(p){return o.hasOwnProperty(p)},a.hasCustom=function(p){return r.hasOwnProperty(p)},a.getCore=function(p){return o[p]},a.getCustom=function(p){return r[p]},a.getCustomClass=function(p){return r.hasOwnProperty(p)?r[p].plugin:null},a.remove=function(p){o.hasOwnProperty(p)&&delete o[p]},a.removeCustom=function(p){r.hasOwnProperty(p)&&delete r[p]},a.destroyCorePlugins=function(){for(var p in o)o.hasOwnProperty(p)&&delete o[p]},a.destroyCustomPlugins=function(){for(var p in r)r.hasOwnProperty(p)&&delete r[p]},n.exports=a},77332:(n,o,r)=>{var a=r(83419),p=r(8443),h=r(50792),u=r(74099),f=r(44603),l=r(39429),d=r(95540),v=r(37277),c=r(72905),m=r(8054),g=new a({Extends:h,initialize:function(x){h.call(this),this.game=x,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],x.isBooted||x.config.renderType===m.HEADLESS?this.boot():x.events.once(p.BOOT,this.boot,this)},boot:function(){var y,x,C,S,E,T,P,M=this.game.config,w=M.installGlobalPlugins;for(w=w.concat(this._pendingGlobal),y=0;y<w.length;y++)x=w[y],C=d(x,"key",null),S=d(x,"plugin",null),E=d(x,"start",!1),T=d(x,"mapping",null),P=d(x,"data",null),C&&(S?this.install(C,S,E,T,P):console.warn("Missing `plugin` for key: "+C));for(w=M.installScenePlugins,w=w.concat(this._pendingScene),y=0;y<w.length;y++)x=w[y],C=d(x,"key",null),S=d(x,"plugin",null),T=d(x,"mapping",null),C&&(S?this.installScenePlugin(C,S,T):console.warn("Missing `plugin` for key: "+C));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(p.DESTROY,this.destroy,this)},addToScene:function(y,x,C){var S,E,T,P=this.game,M=y.scene,w=y.settings.map,b=y.settings.isBooted;for(S=0;S<x.length;S++)E=x[S],P[E]?(y[E]=P[E],w.hasOwnProperty(E)&&(M[w[E]]=y[E])):E==="game"&&w.hasOwnProperty(E)&&(M[w[E]]=P);for(var I=0;I<C.length;I++)for(T=C[I],S=0;S<T.length;S++)if(E=T[S],!!v.hasCore(E)){var R=v.getCore(E),A=R.mapping,L=new R.plugin(M,this,A);y[A]=L,R.custom?M[A]=L:w.hasOwnProperty(A)&&(M[w[A]]=L),b&&L.boot()}for(T=this.plugins,S=0;S<T.length;S++){var O=T[S];O.mapping&&(M[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var y=this.game.config.defaultPlugins;return y=y.concat(this.scenePlugins),y},installScenePlugin:function(y,x,C,S,E){if(E===void 0&&(E=!1),typeof x!="function"){console.warn("Invalid Scene Plugin: "+y);return}if(v.hasCore(y)||v.register(y,x,C,!0),this.scenePlugins.indexOf(y)===-1)this.scenePlugins.push(y);else if(!E&&v.hasCore(y)){console.warn("Scene Plugin key in use: "+y);return}if(S){var T=new x(S,this,y);S.sys[y]=T,C&&C!==""&&(S[C]=T),T.boot()}},install:function(y,x,C,S,E){if(C===void 0&&(C=!1),S===void 0&&(S=null),E===void 0&&(E=null),typeof x!="function")return console.warn("Invalid Plugin: "+y),null;if(v.hasCustom(y))return console.warn("Plugin key in use: "+y),null;if(S!==null&&(C=!0),!this.game.isBooted)this._pendingGlobal.push({key:y,plugin:x,start:C,mapping:S,data:E});else if(v.registerCustom(y,x,S,E),C)return this.start(y);return null},getIndex:function(y){for(var x=this.plugins,C=0;C<x.length;C++){var S=x[C];if(S.key===y)return C}return-1},getEntry:function(y){var x=this.getIndex(y);if(x!==-1)return this.plugins[x]},isActive:function(y){var x=this.getEntry(y);return x&&x.active},start:function(y,x){x===void 0&&(x=y);var C=this.getEntry(x);return C&&!C.active?(C.active=!0,C.plugin.start()):C||(C=this.createEntry(y,x)),C?C.plugin:null},createEntry:function(y,x){var C=v.getCustom(y);if(C){var S=new C.plugin(this);C={key:x,plugin:S,active:!0,mapping:C.mapping,data:C.data},this.plugins.push(C),S.init(C.data),S.start()}return C},stop:function(y){var x=this.getEntry(y);return x&&x.active&&(x.active=!1,x.plugin.stop()),this},get:function(y,x){x===void 0&&(x=!0);var C=this.getEntry(y);if(C)return C.plugin;var S=this.getClass(y);return S&&x?(C=this.createEntry(y,y),C?C.plugin:null):S||null},getClass:function(y){return v.getCustomClass(y)},removeGlobalPlugin:function(y){var x=this.getEntry(y);x&&c(this.plugins,x),v.removeCustom(y)},removeScenePlugin:function(y){c(this.scenePlugins,y),v.remove(y)},registerGameObject:function(y,x,C){return x&&l.register(y,x),C&&f.register(y,C),this},removeGameObject:function(y,x,C){return x===void 0&&(x=!0),C===void 0&&(C=!0),x&&l.remove(y),C&&f.remove(y),this},registerFileType:function(y,x,C){u.register(y,x),C&&C.sys.load&&(C.sys.load[y]=x)},destroy:function(){for(var y=0;y<this.plugins.length;y++)this.plugins[y].plugin.destroy();v.destroyCustomPlugins(),this.game.noReturn&&v.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});n.exports=g},45145:(n,o,r)=>{var a=r(52018),p=r(83419),h=r(44594),u=new p({Extends:a,initialize:function(l,d,v){a.call(this,d),this.scene=l,this.systems=l.sys,this.pluginKey=v,l.sys.events.once(h.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});n.exports=u},18922:(n,o,r)=>{n.exports={BasePlugin:r(52018),DefaultPlugins:r(42363),PluginCache:r(37277),PluginManager:r(77332),ScenePlugin:r(45145)}},63595:()=>{typeof HTMLVideoElement<"u"&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(n){let o=performance.now(),r=this.getVideoPlaybackQuality(),a=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames,p=(h,u)=>{let f=this.getVideoPlaybackQuality(),l=this.mozPresentedFrames||this.mozPaintedFrames||f.totalVideoFrames-f.droppedVideoFrames;if(l>a){let d=this.mozFrameDelay||f.totalFrameDelay-r.totalFrameDelay||0,v=u-h;n(u,{presentationTime:u+d*1e3,expectedDisplayTime:u+v,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+v/1e3,presentedFrames:l,processingDuration:d}),delete this._rvfcpolyfillmap[o]}else this._rvfcpolyfillmap[o]=requestAnimationFrame(d=>p(u,d))};return this._rvfcpolyfillmap[o]=requestAnimationFrame(h=>p(o,h)),o},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(n){cancelAnimationFrame(this._rvfcpolyfillmap[n]),delete this._rvfcpolyfillmap[n]})},10312:n=>{n.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:n=>{var o={DEFAULT:0,LINEAR:0,NEAREST:1};n.exports=o},68627:(n,o,r)=>{var a=r(19715),p=r(32880),h=r(83419),u=r(8054),f=r(50792),l=r(92503),d=r(56373),v=r(97480),c=r(69442),m=r(8443),g=r(61340),y=new h({Extends:f,initialize:function(C){f.call(this);var S=C.config;this.config={clearBeforeRender:S.clearBeforeRender,backgroundColor:S.backgroundColor,antialias:S.antialias,roundPixels:S.roundPixels,transparent:S.transparent},this.game=C,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=C.canvas;var E={alpha:S.transparent,desynchronized:S.desynchronized,willReadFrequently:!1};this.gameContext=S.context?S.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=S.antialias,this.blendModes=d(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new g,this._tempMatrix2=new g,this._tempMatrix3=new g,this.isBooted=!1,this.init()},init:function(){var x=this.game;x.events.once(m.BOOT,function(){var C=this.config;if(!C.transparent){var S=this.gameContext,E=this.gameCanvas;S.fillStyle=C.backgroundColor.rgba,S.fillRect(0,0,E.width,E.height)}},this),x.textures.once(c.READY,this.boot,this)},boot:function(){var x=this.game,C=x.scale.baseSize;this.width=C.width,this.height=C.height,this.isBooted=!0,x.scale.on(v.RESIZE,this.onResize,this),this.resize(C.width,C.height)},onResize:function(x,C){(C.width!==this.width||C.height!==this.height)&&this.resize(C.width,C.height)},resize:function(x,C){this.width=x,this.height=C,this.emit(l.RESIZE,x,C)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(x){return this.currentContext.globalCompositeOperation=x,this},setContext:function(x){return this.currentContext=x||this.gameContext,this},setAlpha:function(x){return this.currentContext.globalAlpha=x,this},preRender:function(){var x=this.gameContext,C=this.config,S=this.width,E=this.height;x.globalAlpha=1,x.globalCompositeOperation="source-over",x.setTransform(1,0,0,1,0,0),this.emit(l.PRE_RENDER_CLEAR),C.clearBeforeRender&&(x.clearRect(0,0,S,E),C.transparent||(x.fillStyle=C.backgroundColor.rgba,x.fillRect(0,0,S,E))),x.save(),this.drawCount=0,this.emit(l.PRE_RENDER)},render:function(x,C,S){var E=C.length;this.emit(l.RENDER,x,S);var T=S.x,P=S.y,M=S.width,w=S.height,b=S.renderToTexture?S.context:x.sys.context;b.save(),this.game.scene.customViewports&&(b.beginPath(),b.rect(T,P,M,w),b.clip()),S.emit(a.PRE_RENDER,S),this.currentContext=b;var I=S.mask;I&&I.preRenderCanvas(this,null,S._maskCamera),S.transparent||(b.fillStyle=S.backgroundColor.rgba,b.fillRect(T,P,M,w)),b.globalAlpha=S.alpha,b.globalCompositeOperation="source-over",this.drawCount+=E,S.renderToTexture&&S.emit(a.PRE_RENDER,S),S.matrix.copyToContext(b);for(var R=0;R<E;R++){var A=C[R];A.mask&&A.mask.preRenderCanvas(this,A,S),A.renderCanvas(this,A,S),A.mask&&A.mask.postRenderCanvas(this,A,S)}b.setTransform(1,0,0,1,0,0),b.globalCompositeOperation="source-over",b.globalAlpha=1,S.flashEffect.postRenderCanvas(b),S.fadeEffect.postRenderCanvas(b),S.dirty=!1,I&&I.postRenderCanvas(this),b.restore(),S.renderToTexture&&(S.emit(a.POST_RENDER,S),S.renderToGame&&x.sys.context.drawImage(S.canvas,T,P)),S.emit(a.POST_RENDER,S)},postRender:function(){var x=this.gameContext;x.restore(),this.emit(l.POST_RENDER);var C=this.snapshotState;C.callback&&(p(this.gameCanvas,C),C.callback=null)},snapshotCanvas:function(x,C,S,E,T,P,M,w,b){S===void 0&&(S=!1),this.snapshotArea(E,T,P,M,C,w,b);var I=this.snapshotState;return I.getPixel=S,p(x,I),I.callback=null,this},snapshot:function(x,C,S){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,x,C,S)},snapshotArea:function(x,C,S,E,T,P,M){var w=this.snapshotState;return w.callback=T,w.type=P,w.encoder=M,w.getPixel=!1,w.x=x,w.y=C,w.width=Math.min(S,this.gameCanvas.width),w.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(x,C,S){return this.snapshotArea(x,C,1,1,S),this.snapshotState.getPixel=!0,this},batchSprite:function(x,C,S,E){var T=S.alpha*x.alpha;if(T!==0){var P=this.currentContext,M=this._tempMatrix1,w=this._tempMatrix2,b=C.canvasData,I=b.x,R=b.y,A=C.cutWidth,L=C.cutHeight,O=C.customPivot,F=C.source.resolution,G=x.displayOriginX,U=x.displayOriginY,z=-G+C.x,N=-U+C.y;if(x.isCropped){var k=x._crop;(k.flipX!==x.flipX||k.flipY!==x.flipY)&&C.updateCropUVs(k,x.flipX,x.flipY),A=k.cw,L=k.ch,I=k.cx,R=k.cy,z=-G+k.x,N=-U+k.y,x.flipX&&(z>=0?z=-(z+A):z<0&&(z=Math.abs(z)-A)),x.flipY&&(N>=0?N=-(N+L):N<0&&(N=Math.abs(N)-L))}var D=1,V=1;x.flipX&&(O||(z+=-C.realWidth+G*2),D=-1),x.flipY&&(O||(N+=-C.realHeight+U*2),V=-1);var B=x.x,W=x.y;if(S.roundPixels&&(B=Math.floor(B),W=Math.floor(W)),w.applyITRS(B,W,x.rotation,x.scaleX*D,x.scaleY*V),M.copyFrom(S.matrix),E?(M.multiplyWithOffset(E,-S.scrollX*x.scrollFactorX,-S.scrollY*x.scrollFactorY),w.e=B,w.f=W):(w.e-=S.scrollX*x.scrollFactorX,w.f-=S.scrollY*x.scrollFactorY),M.multiply(w),S.renderRoundPixels&&(M.e=Math.floor(M.e+.5),M.f=Math.floor(M.f+.5)),P.save(),M.setToContext(P),P.globalCompositeOperation=this.blendModes[x.blendMode],P.globalAlpha=T,P.imageSmoothingEnabled=!C.source.scaleMode,x.mask&&x.mask.preRenderCanvas(this,x,S),A>0&&L>0){var H=A/F,Y=L/F;S.roundPixels&&(z=Math.floor(z+.5),N=Math.floor(N+.5),H+=.5,Y+=.5),P.drawImage(C.source.image,I,R,A,L,z,N,H,Y)}x.mask&&x.mask.postRenderCanvas(this,x,S),P.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});n.exports=y},55830:(n,o,r)=>{n.exports={CanvasRenderer:r(68627),GetBlendModes:r(56373),SetTransform:r(20926)}},56373:(n,o,r)=>{var a=r(10312),p=r(89289),h=function(){var u=[],f=p.supportNewBlendModes,l="source-over";return u[a.NORMAL]=l,u[a.ADD]="lighter",u[a.MULTIPLY]=f?"multiply":l,u[a.SCREEN]=f?"screen":l,u[a.OVERLAY]=f?"overlay":l,u[a.DARKEN]=f?"darken":l,u[a.LIGHTEN]=f?"lighten":l,u[a.COLOR_DODGE]=f?"color-dodge":l,u[a.COLOR_BURN]=f?"color-burn":l,u[a.HARD_LIGHT]=f?"hard-light":l,u[a.SOFT_LIGHT]=f?"soft-light":l,u[a.DIFFERENCE]=f?"difference":l,u[a.EXCLUSION]=f?"exclusion":l,u[a.HUE]=f?"hue":l,u[a.SATURATION]=f?"saturation":l,u[a.COLOR]=f?"color":l,u[a.LUMINOSITY]=f?"luminosity":l,u[a.ERASE]="destination-out",u[a.SOURCE_IN]="source-in",u[a.SOURCE_OUT]="source-out",u[a.SOURCE_ATOP]="source-atop",u[a.DESTINATION_OVER]="destination-over",u[a.DESTINATION_IN]="destination-in",u[a.DESTINATION_OUT]="destination-out",u[a.DESTINATION_ATOP]="destination-atop",u[a.LIGHTER]="lighter",u[a.COPY]="copy",u[a.XOR]="xor",u};n.exports=h},20926:(n,o,r)=>{var a=r(91296),p=function(h,u,f,l,d){var v=l.alpha*f.alpha;if(v<=0)return!1;var c=a(f,l,d).calc;return u.globalCompositeOperation=h.blendModes[f.blendMode],u.globalAlpha=v,u.save(),c.setToContext(u),u.imageSmoothingEnabled=f.frame?!f.frame.source.scaleMode:h.antialias,!0};n.exports=p},63899:n=>{n.exports="losewebgl"},6119:n=>{n.exports="postrender"},48070:n=>{n.exports="prerender"},15640:n=>{n.exports="render"},8912:n=>{n.exports="resize"},87124:n=>{n.exports="restorewebgl"},92503:(n,o,r)=>{n.exports={LOSE_WEBGL:r(63899),POST_RENDER:r(6119),PRE_RENDER:r(48070),RENDER:r(15640),RESIZE:r(8912),RESTORE_WEBGL:r(87124)}},36909:(n,o,r)=>{n.exports={Events:r(92503),Snapshot:r(89966)},n.exports.Canvas=r(55830),n.exports.WebGL=r(4159)},32880:(n,o,r)=>{var a=r(27919),p=r(40987),h=r(95540),u=function(f,l){var d=h(l,"callback"),v=h(l,"type","image/png"),c=h(l,"encoder",.92),m=Math.abs(Math.round(h(l,"x",0))),g=Math.abs(Math.round(h(l,"y",0))),y=Math.floor(h(l,"width",f.width)),x=Math.floor(h(l,"height",f.height)),C=h(l,"getPixel",!1);if(C){var S=f.getContext("2d",{willReadFrequently:!1}),E=S.getImageData(m,g,1,1),T=E.data;d.call(null,new p(T[0],T[1],T[2],T[3]))}else if(m!==0||g!==0||y!==f.width||x!==f.height){var P=a.createWebGL(this,y,x),M=P.getContext("2d",{willReadFrequently:!0});y>0&&x>0&&M.drawImage(f,m,g,y,x,0,0,y,x);var w=new Image;w.onerror=function(){d.call(null),a.remove(P)},w.onload=function(){d.call(null,w),a.remove(P)},w.src=P.toDataURL(v,c)}else{var b=new Image;b.onerror=function(){d.call(null)},b.onload=function(){d.call(null,b)},b.src=f.toDataURL(v,c)}};n.exports=u},88815:(n,o,r)=>{var a=r(27919),p=r(40987),h=r(95540),u=function(f,l){var d=f,v=h(l,"callback"),c=h(l,"type","image/png"),m=h(l,"encoder",.92),g=Math.abs(Math.round(h(l,"x",0))),y=Math.abs(Math.round(h(l,"y",0))),x=h(l,"getPixel",!1),C=h(l,"isFramebuffer",!1),S=C?h(l,"bufferWidth",1):d.drawingBufferWidth,E=C?h(l,"bufferHeight",1):d.drawingBufferHeight;if(x){var T=new Uint8Array(4),P=C?y:E-y;d.readPixels(g,P,1,1,d.RGBA,d.UNSIGNED_BYTE,T),v.call(null,new p(T[0],T[1],T[2],T[3]))}else{var M=Math.floor(h(l,"width",S)),w=Math.floor(h(l,"height",E)),b=M*w*4,I=new Uint8Array(b);d.readPixels(g,E-y-w,M,w,d.RGBA,d.UNSIGNED_BYTE,I);for(var R=a.createWebGL(this,M,w),A=R.getContext("2d",{willReadFrequently:!0}),L=A.getImageData(0,0,M,w),O=L.data,F=0;F<w;F++)for(var G=0;G<M;G++){var U=((w-F-1)*M+G)*4,z=C?b-(F*M+(M-G))*4:(F*M+G)*4;O[z+0]=I[U+0],O[z+1]=I[U+1],O[z+2]=I[U+2],O[z+3]=I[U+3]}A.putImageData(L,0,0);var N=new Image;N.onerror=function(){v.call(null),a.remove(R)},N.onload=function(){v.call(null,N),a.remove(R)},N.src=R.toDataURL(c,m)}};n.exports=u},89966:(n,o,r)=>{n.exports={Canvas:r(32880),WebGL:r(88815)}},7530:(n,o,r)=>{var a=r(83419),p=r(36060),h=r(90330),u=r(82264),f=r(95540),l=r(32302),d=r(63448),v=r(31302),c=r(58918),m=r(14811),g=r(92651),y=r(96569),x=r(56527),C=r(57516),S=r(43439),E=r(81041),T=r(12385),P=r(7589),M=r(95428),w=r(72905),b=new a({initialize:function(R){this.game=R.game,this.renderer=R,this.classes=new h([[p.UTILITY_PIPELINE,P],[p.MULTI_PIPELINE,C],[p.BITMAPMASK_PIPELINE,v],[p.SINGLE_PIPELINE,T],[p.ROPE_PIPELINE,E],[p.LIGHT_PIPELINE,y],[p.POINTLIGHT_PIPELINE,S],[p.MOBILE_PIPELINE,x]]),this.postPipelineClasses=new h,this.pipelines=new h,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(I,R,A){var L=this.renderer,O=this.renderTargets;this.frameInc=Math.floor(f(I,"frameInc",32));var F=L.width,G=L.height,U=this.game.config.disablePreFX,z=this.game.config.disablePostFX;if(z||this.postPipelineClasses.setAll([[String(m.BARREL),c.Barrel],[String(m.BLOOM),c.Bloom],[String(m.BLUR),c.Blur],[String(m.BOKEH),c.Bokeh],[String(m.CIRCLE),c.Circle],[String(m.COLOR_MATRIX),c.ColorMatrix],[String(m.DISPLACEMENT),c.Displacement],[String(m.GLOW),c.Glow],[String(m.GRADIENT),c.Gradient],[String(m.PIXELATE),c.Pixelate],[String(m.SHADOW),c.Shadow],[String(m.SHINE),c.Shine],[String(m.VIGNETTE),c.Vignette],[String(m.WIPE),c.Wipe]]),!U){this.classes.set(p.FX_PIPELINE,g);for(var N=Math.min(F,G),k=Math.ceil(N/this.frameInc),D=1;D<k;D++){var V=D*this.frameInc;O.push(new l(L,V,V)),O.push(new l(L,V,V)),O.push(new l(L,V,V)),this.maxDimension=V}O.push(new l(L,F,G,1,0,!0,!0)),O.push(new l(L,F,G,1,0,!0,!0)),O.push(new l(L,F,G,1,0,!0,!0))}var B,W,H=this,Y=this.game;if(this.classes.each(function($,J){B=H.add($,new J({game:Y})),$===p.UTILITY_PIPELINE&&(H.UTILITY_PIPELINE=B,H.fullFrame1=B.fullFrame1,H.fullFrame2=B.fullFrame2,H.halfFrame1=B.halfFrame1,H.halfFrame2=B.halfFrame2)}),this.MULTI_PIPELINE=this.get(p.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(p.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(p.MOBILE_PIPELINE),U||(this.FX_PIPELINE=this.get(p.FX_PIPELINE)),I)for(W in I){var X=I[W];B=new X(Y),B.name=W,B.isPostFX?this.postPipelineClasses.set(W,X):this.has(W)||(this.classes.set(W,X),this.add(W,B))}this.default=this.get(R),A&&!u.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(I){var R=this.get(I);return R&&(this.default=R),R},add:function(I,R){if(R.isPostFX){console.warn(I+" is a Post Pipeline. Use `addPostPipeline` instead");return}var A=this.pipelines,L=this.renderer;return A.has(I)?console.warn("Pipeline exists: "+I):(R.name=I,R.manager=this,A.set(I,R)),R.hasBooted||R.boot(),L.width!==0&&L.height!==0&&!R.isPreFX&&R.resize(L.width,L.height),R},addPostPipeline:function(I,R){this.postPipelineClasses.has(I)||this.postPipelineClasses.set(I,R)},flush:function(){this.current&&this.current.flush()},has:function(I){var R=this.pipelines;return typeof I=="string"?R.has(I):!!R.contains(I)},get:function(I){var R=this.pipelines;if(typeof I=="string")return R.get(I);if(R.contains(I))return I},getPostPipeline:function(I,R,A){var L=this.postPipelineClasses,O,F="",G=typeof I;if(G==="string"||G==="number"?(O=L.get(I),F=I):G==="function"?(L.contains(I)&&(O=I),F=I.name):G==="object"&&(O=L.get(I.name),F=I.name),O){var U=new O(this.game,A);return U.name=F,R&&(U.gameObject=R),this.postPipelineInstances.push(U),U}},removePostPipeline:function(I){w(this.postPipelineInstances,I)},remove:function(I,R,A){R===void 0&&(R=!0),A===void 0&&(A=!0),this.pipelines.delete(I),R&&this.classes.delete(I),A&&this.postPipelineClasses.delete(I)},set:function(I,R,A){if(!I.isPostFX)return this.isCurrent(I,A)||(this.flush(),this.current&&this.current.unbind(),this.current=I,I.bind(A)),I.updateProjectionMatrix(),I.onBind(R),I},preBatch:function(I){if(I.hasPostPipeline){this.flush();for(var R=I.postPipelines,A=R.length-1;A>=0;A--){var L=R[A];L.active&&L.preBatch(I)}}},postBatch:function(I){if(I.hasPostPipeline){this.flush();for(var R=I.postPipelines,A=0;A<R.length;A++){var L=R[A];L.active&&L.postBatch(I)}}},preBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var R=I.postPipelines,A=R.length-1;A>=0;A--){var L=R[A];L.active&&L.preBatch(I)}}},postBatchCamera:function(I){if(I.hasPostPipeline){this.flush();for(var R=I.postPipelines,A=0;A<R.length;A++){var L=R[A];L.active&&L.postBatch(I)}}},isCurrent:function(I,R){var A=this.renderer,L=this.current;return L&&!R&&(R=L.currentShader),!(L!==I||R.program!==A.currentProgram)},copyFrame:function(I,R,A,L,O){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(I,R,A,L,O),this},copyToGame:function(I){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(I),this},drawFrame:function(I,R,A,L){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(I,R,A,L),this},blendFrames:function(I,R,A,L,O){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(I,R,A,L,O),this},blendFramesAdditive:function(I,R,A,L,O){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(I,R,A,L,O),this},clearFrame:function(I,R){return this.UTILITY_PIPELINE.clearFrame(I,R),this},blitFrame:function(I,R,A,L,O,F){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(I,R,A,L,O,F),this},copyFrameRect:function(I,R,A,L,O,F,G,U){return this.UTILITY_PIPELINE.copyFrameRect(I,R,A,L,O,F,G,U),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(I){return this.UTILITY_PIPELINE.bind(I)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(I,R){R.restoreContext()}),M(this.postPipelineInstances,function(I){I.restoreContext()})},rebind:function(I){I===void 0&&this.previous&&(I=this.previous);var R=this.renderer,A=R.gl;A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),R.hasActiveStencilMask()?A.clear(A.DEPTH_BUFFER_BIT):(A.disable(A.STENCIL_TEST),A.clear(A.DEPTH_BUFFER_BIT|A.STENCIL_BUFFER_BIT)),A.viewport(0,0,R.width,R.height),R.currentProgram=null,R.setBlendMode(0,!0);var L=R.vaoExtension;L&&L.bindVertexArrayOES(null);var O=this.pipelines.entries;for(var F in O)O[F].glReset=!0;I&&(this.current=I,I.rebind())},clear:function(){var I=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,I.currentProgram=null,I.setBlendMode(0,!0);var R=I.vaoExtension;R&&R.bindVertexArrayOES(null)},getRenderTarget:function(I){var R=this.renderTargets,A=3;if(I>this.maxDimension)return this.targetIndex=R.length-A,R[this.targetIndex];var L=(d(I,this.frameInc,0,!0)-1)*A;return this.targetIndex=L,R[L]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});n.exports=b},32302:(n,o,r)=>{var a=r(83419),p=r(92503),h=new a({initialize:function(f,l,d,v,c,m,g,y,x){v===void 0&&(v=1),c===void 0&&(c=0),m===void 0&&(m=!0),g===void 0&&(g=!1),y===void 0&&(y=!0),x===void 0&&(x=!0),this.renderer=f,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=v,this.minFilter=c,this.autoClear=m,this.autoResize=!0,this.hasDepthBuffer=y,this.forceClamp=x,this.init(l,d),g?this.renderer.on(p.RESIZE,this.resize,this):this.autoResize=!1},init:function(u,f){var l=this.renderer;this.texture=l.createTextureFromSource(null,u,f,this.minFilter,this.forceClamp),this.framebuffer=l.createFramebuffer(u,f,this.texture,this.hasDepthBuffer),this.width=u,this.height=f},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(p.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(p.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,f){if(this.autoResize&&this.willResize(u,f)){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),this.texture=l.createTextureFromSource(null,u,f,this.minFilter,this.forceClamp),this.framebuffer=l.createFramebuffer(u,f,this.texture,this.hasDepthBuffer),this.width=u,this.height=f}return this},willResize:function(u,f){return typeof u!="number"||typeof f!="number"?!1:(u=Math.round(u*this.scale),f=Math.round(f*this.scale),u=Math.max(u,1),f=Math.max(f,1),u!==this.width||f!==this.height)},bind:function(u,f,l){u===void 0&&(u=!1);var d=this.renderer;if(u&&d.flush(),f&&l&&this.resize(f,l),d.pushFramebuffer(this.framebuffer,!1,!1),u&&this.adjustViewport(),this.autoClear){var v=this.renderer.gl;v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT)}d.clearStencilMask()},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(u,f,l,d){var v=this.renderer,c=v.gl;v.pushFramebuffer(this.framebuffer),u!==void 0&&f!==void 0&&l!==void 0&&d!==void 0?(c.enable(c.SCISSOR_TEST),c.scissor(u,f,l,d)):c.disable(c.SCISSOR_TEST),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),v.popFramebuffer(),v.resetScissor()},unbind:function(u){u===void 0&&(u=!1);var f=this.renderer;return u&&f.flush(),f.popFramebuffer()},destroy:function(){var u=this.renderer;u.off(p.RESIZE,this.resize,this),u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});n.exports=h},70554:n=>{n.exports={getTintFromFloats:function(o,r,a,p){var h=(o*255|0)&255,u=(r*255|0)&255,f=(a*255|0)&255,l=(p*255|0)&255;return(l<<24|h<<16|u<<8|f)>>>0},getTintAppendFloatAlpha:function(o,r){var a=(r*255|0)&255;return(a<<24|o)>>>0},getTintAppendFloatAlphaAndSwap:function(o,r){var a=(o>>16|0)&255,p=(o>>8|0)&255,h=(o|0)&255,u=(r*255|0)&255;return(u<<24|h<<16|p<<8|a)>>>0},getFloatsFromUintRGB:function(o){var r=(o>>16|0)&255,a=(o>>8|0)&255,p=(o|0)&255;return[r/255,a/255,p/255]},checkShaderMax:function(o,r){var a=Math.min(16,o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS));return!r||r===-1?a:Math.min(a,r)},parseFragmentShaderMaxTextures:function(o,r){if(!o)return"";for(var a="",p=0;p<r;p++)p>0&&(a+=`
	else `),p<r-1&&(a+="if (outTexId < "+p+".5)"),a+=`
	{`,a+=`
		texture = texture2D(uMainSampler[`+p+"], outTexCoord);",a+=`
	}`;return o=o.replace(/%count%/gi,r.toString()),o.replace(/%forloop%/gi,a)},setGlowQuality:function(o,r,a,p){return a===void 0&&(a=r.config.glowFXQuality),p===void 0&&(p=r.config.glowFXDistance),o=o.replace(/__SIZE__/gi,(1/a/p).toFixed(7)),o=o.replace(/__DIST__/gi,p.toFixed(0)+".0"),o}}},29100:(n,o,r)=>{var a=r(83419),p=r(62644),h=r(50792),u=r(77085),f=r(95540),l=r(37867),d=r(92503),v=r(32302),c=r(70554),m=r(38683),g=new a({Extends:h,initialize:function(x){h.call(this);var C=x.game,S=C.renderer,E=S.gl;this.name=f(x,"name","WebGLPipeline"),this.game=C,this.renderer=S,this.manager,this.gl=E,this.view=C.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=f(x,"topology",E.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=f(x,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=x,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=f(x,"resizeUniform","")},boot:function(){var y,x=this.gl,C=this.config,S=this.renderer;this.isPostFX||(this.projectionMatrix=new l().identity());var E=this.renderTargets,T=f(C,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var P=S.width,M=S.height;if(typeof T=="number")for(y=0;y<T;y++)E.push(new v(S,P,M,1,0,!0));else if(Array.isArray(T))for(y=0;y<T.length;y++){var w=f(T[y],"scale",1),b=f(T[y],"minFilter",0),I=f(T[y],"autoClear",1),R=f(T[y],"autoResize",!1),A=f(T[y],"width",null),L=f(T[y],"height",A);A?E.push(new v(S,A,L,1,b,I,R)):E.push(new v(S,P,M,w,b,I,R))}E.length&&(this.currentRenderTarget=E[0]),this.setShadersFromConfig(C);var O=this.shaders,F=0;for(y=0;y<O.length;y++)O[y].vertexSize>F&&(F=O[y].vertexSize);var G=f(C,"batchSize",S.config.batchSize);this.vertexCapacity=G*6;var U=new ArrayBuffer(this.vertexCapacity*F);this.vertexData=U,this.bytes=new Uint8Array(U),this.vertexViewF32=new Float32Array(U),this.vertexViewU32=new Uint32Array(U);var z=f(C,"vertices",null);for(z?(this.vertexViewF32.set(z),this.vertexBuffer=S.createVertexBuffer(U,x.STATIC_DRAW)):this.vertexBuffer=S.createVertexBuffer(U.byteLength,x.DYNAMIC_DRAW),this.setVertexBuffer(),y=O.length-1;y>=0;y--)O[y].rebind();this.hasBooted=!0,S.on(d.RESIZE,this.resize,this),S.on(d.PRE_RENDER,this.onPreRender,this),S.on(d.RENDER,this.onRender,this),S.on(d.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(y,x,C){var S=this.renderer;if(y!==this.currentShader||S.currentProgram!==this.currentShader.program){this.flush();var E=this.setVertexBuffer(C);E&&!x&&(x=!0),y.bind(x,!1),this.currentShader=y}return this},getShaderByName:function(y){for(var x=this.shaders,C=0;C<x.length;C++)if(x[C].name===y)return x[C]},setShadersFromConfig:function(y){var x,C=this.shaders,S=this.renderer;for(x=0;x<C.length;x++)C[x].destroy();var E="vertShader",T="fragShader",P="attributes",M=f(y,E,null),w=c.parseFragmentShaderMaxTextures(f(y,T,null),S.maxTextures),b=f(y,P,null),I=f(y,"shaders",[]),R=I.length;if(R===0)M&&w&&(this.shaders=[new m(this,"default",M,w,p(b))]);else{var A=[];for(x=0;x<R;x++){var L=I[x],O,F,G,U;if(typeof L=="string"?(O="default",F=M,G=c.parseFragmentShaderMaxTextures(L,S.maxTextures),U=b):(O=f(L,"name","default"),F=f(L,E,M),G=c.parseFragmentShaderMaxTextures(f(L,T,w),S.maxTextures),U=f(L,P,b)),O==="default"){var z=G.split(`
`),N=z[0].trim();N.indexOf("#define SHADER_NAME")>-1&&(O=N.substring(20))}F&&G&&A.push(new m(this,O,F,G,p(U)))}this.shaders=A}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(y){return this.currentBatch={start:this.vertexCount,count:0,texture:[y],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=y,this.batch.push(this.currentBatch),0},addTextureToBatch:function(y){var x=this.currentBatch;x&&(x.texture.push(y),x.unit++,x.maxUnit++)},pushBatch:function(y){if(!this.currentBatch||this.forceZero&&y!==this.currentTexture)return this.createBatch(y);if(y===this.currentTexture)return this.currentUnit;var x=this.currentBatch,C=x.texture.indexOf(y);return C===-1?x.texture.length===this.renderer.maxTextures?this.createBatch(y):(x.unit++,x.maxUnit++,x.texture.push(y),this.currentUnit=x.unit,this.currentTexture=y,x.unit):(this.currentUnit=C,this.currentTexture=y,C)},setGameObject:function(y,x){return x===void 0&&(x=y.frame),this.pushBatch(x.source.glTexture)},shouldFlush:function(y){return y===void 0&&(y=0),this.vertexCount+y>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(y,x){(y!==this.width||x!==this.height)&&this.flush(),this.width=y,this.height=x;for(var C=this.renderTargets,S=0;S<C.length;S++)C[S].resize(y,x);return this.setProjectionMatrix(y,x),this.resizeUniform&&this.set2f(this.resizeUniform,y,x),this.emit(u.RESIZE,y,x,this),this.onResize(y,x),this},setProjectionMatrix:function(y,x){var C=this.projectionMatrix;if(!C)return this;this.projectionWidth=y,this.projectionHeight=x,C.ortho(0,y,x,0,-1e3,1e3);for(var S=this.shaders,E="uProjectionMatrix",T=0;T<S.length;T++){var P=S[T];P.hasUniform(E)&&(P.resetUniform(E),P.setMatrix4fv(E,!1,C.val,P))}return this},flipProjectionMatrix:function(y){y===void 0&&(y=!0);var x=this.projectionMatrix;if(!x)return this;var C=this.projectionWidth,S=this.projectionHeight;y?x.ortho(0,C,0,S,-1e3,1e3):x.ortho(0,C,S,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,x.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var y=this.renderer.projectionWidth,x=this.renderer.projectionHeight;(this.projectionWidth!==y||this.projectionHeight!==x)&&this.setProjectionMatrix(y,x)}},bind:function(y){if(y===void 0&&(y=this.currentShader),this.glReset)return this.rebind(y);var x=!1,C=this.gl;return C.getParameter(C.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(C.bindBuffer(C.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,x=!0),y.bind(x),this.currentShader=y,this.activeTextures.length=0,this.emit(u.BIND,this,y),this.onActive(y),this},rebind:function(y){this.activeBuffer=null,this.setVertexBuffer();for(var x=this.shaders,C=x.length-1;C>=0;C--){var S=x[C].rebind();(!y||S===y)&&(this.currentShader=S)}return this.activeTextures.length=0,this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var y=this.shaders,x=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,x&&this.setVertexBuffer();for(var C=0;C<y.length;C++){var S=y[C];S.syncUniforms(),x&&S.rebind()}},setVertexBuffer:function(y){if(y===void 0&&(y=this.vertexBuffer),y!==this.activeBuffer){var x=this.gl;return this.gl.bindBuffer(x.ARRAY_BUFFER,y.webGLBuffer),this.activeBuffer=y,!0}return!1},preBatch:function(y){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(y),this},postBatch:function(y){return this.onDraw(this.currentRenderTarget),this.onPostBatch(y),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(y){if(y===void 0&&(y=!1),this.vertexCount>0){this.emit(u.BEFORE_FLUSH,this,y),this.onBeforeFlush(y);var x=this.gl,C=this.vertexCount,S=this.currentShader.vertexSize,E=this.topology;if(this.active){this.setVertexBuffer(),C===this.vertexCapacity?x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.DYNAMIC_DRAW):x.bufferSubData(x.ARRAY_BUFFER,0,this.bytes.subarray(0,C*S));var T,P,M,w=this.batch,b=this.activeTextures;if(this.forceZero)for(b[0]||x.activeTexture(x.TEXTURE0),T=0;T<w.length;T++)P=w[T],M=P.texture[0],b[0]!==M&&(x.bindTexture(x.TEXTURE_2D,M.webGLTexture),b[0]=M),x.drawArrays(E,P.start,P.count);else for(T=0;T<w.length;T++){P=w[T];for(var I=0;I<=P.maxUnit;I++)M=P.texture[I],b[I]!==M&&(x.activeTexture(x.TEXTURE0+I),x.bindTexture(x.TEXTURE_2D,M.webGLTexture),b[I]=M);x.drawArrays(E,P.start,P.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(u.AFTER_FLUSH,this,y),this.onAfterFlush(y)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(y,x,C,S,E,T,P){var M=this.vertexViewF32,w=this.vertexViewU32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;M[++b]=y,M[++b]=x,M[++b]=C,M[++b]=S,M[++b]=E,M[++b]=T,w[++b]=P,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(y,x,C,S,E,T,P,M,w,b,I,R,A,L,O,F,G,U,z,N){N===void 0&&(N=this.currentUnit);var k=!1;this.shouldFlush(6)&&(this.flush(),k=!0),this.currentBatch||(N=this.setTexture2D(z));var D=this.vertexViewF32,V=this.vertexViewU32,B=this.vertexCount*this.currentShader.vertexComponentCount-1;return D[++B]=x,D[++B]=C,D[++B]=b,D[++B]=I,D[++B]=N,D[++B]=U,V[++B]=L,D[++B]=S,D[++B]=E,D[++B]=b,D[++B]=A,D[++B]=N,D[++B]=U,V[++B]=F,D[++B]=T,D[++B]=P,D[++B]=R,D[++B]=A,D[++B]=N,D[++B]=U,V[++B]=G,D[++B]=x,D[++B]=C,D[++B]=b,D[++B]=I,D[++B]=N,D[++B]=U,V[++B]=L,D[++B]=T,D[++B]=P,D[++B]=R,D[++B]=A,D[++B]=N,D[++B]=U,V[++B]=G,D[++B]=M,D[++B]=w,D[++B]=R,D[++B]=I,D[++B]=N,D[++B]=U,V[++B]=O,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(y),k},batchTri:function(y,x,C,S,E,T,P,M,w,b,I,R,A,L,O,F,G){G===void 0&&(G=this.currentUnit);var U=!1;this.shouldFlush(3)&&(this.flush(),U=!0),this.currentBatch||(G=this.setTexture2D(F));var z=this.vertexViewF32,N=this.vertexViewU32,k=this.vertexCount*this.currentShader.vertexComponentCount-1;return z[++k]=x,z[++k]=C,z[++k]=M,z[++k]=w,z[++k]=G,z[++k]=O,N[++k]=R,z[++k]=S,z[++k]=E,z[++k]=M,z[++k]=I,z[++k]=G,z[++k]=O,N[++k]=A,z[++k]=T,z[++k]=P,z[++k]=b,z[++k]=I,z[++k]=G,z[++k]=O,N[++k]=L,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(y),U},drawFillRect:function(y,x,C,S,E,T,P,M){P===void 0&&(P=this.renderer.whiteTexture),M===void 0&&(M=!0),y=Math.floor(y),x=Math.floor(x);var w=Math.floor(y+C),b=Math.floor(x+S),I=this.setTexture2D(P),R=c.getTintAppendFloatAlphaAndSwap(E,T),A=0,L=0,O=1,F=1;M&&(L=1,F=0),this.batchQuad(null,y,x,y,b,w,b,w,x,A,L,O,F,R,R,R,R,0,P,I)},setTexture2D:function(y){return y===void 0&&(y=this.renderer.whiteTexture),this.pushBatch(y)},bindTexture:function(y,x){x===void 0&&(x=0);var C=this.gl;return C.activeTexture(C.TEXTURE0+x),C.bindTexture(C.TEXTURE_2D,y.webGLTexture),this},bindRenderTarget:function(y,x){return this.bindTexture(y.texture,x)},setTime:function(y,x){return this.set1f(y,this.game.loop.getDuration(),x),this},setBoolean:function(y,x,C){return C===void 0&&(C=this.currentShader),C.setBoolean(y,x),this},set1f:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set1f(y,x),this},set2f:function(y,x,C,S){return S===void 0&&(S=this.currentShader),S.set2f(y,x,C),this},set3f:function(y,x,C,S,E){return E===void 0&&(E=this.currentShader),E.set3f(y,x,C,S),this},set4f:function(y,x,C,S,E,T){return T===void 0&&(T=this.currentShader),T.set4f(y,x,C,S,E),this},set1fv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set1fv(y,x),this},set2fv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set2fv(y,x),this},set3fv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set3fv(y,x),this},set4fv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set4fv(y,x),this},set1iv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set1iv(y,x),this},set2iv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set2iv(y,x),this},set3iv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set3iv(y,x),this},set4iv:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set4iv(y,x),this},set1i:function(y,x,C){return C===void 0&&(C=this.currentShader),C.set1i(y,x),this},set2i:function(y,x,C,S){return S===void 0&&(S=this.currentShader),S.set2i(y,x,C),this},set3i:function(y,x,C,S,E){return E===void 0&&(E=this.currentShader),E.set3i(y,x,C,S),this},set4i:function(y,x,C,S,E,T){return T===void 0&&(T=this.currentShader),T.set4i(y,x,C,S,E),this},setMatrix2fv:function(y,x,C,S){return S===void 0&&(S=this.currentShader),S.setMatrix2fv(y,x,C),this},setMatrix3fv:function(y,x,C,S){return S===void 0&&(S=this.currentShader),S.setMatrix3fv(y,x,C),this},setMatrix4fv:function(y,x,C,S){return S===void 0&&(S=this.currentShader),S.setMatrix4fv(y,x,C),this},destroy:function(){this.emit(u.DESTROY,this);var y,x=this.shaders;for(y=0;y<x.length;y++)x[y].destroy();var C=this.renderTargets;for(y=0;y<C.length;y++)C[y].destroy();var S=this.renderer;return S.deleteBuffer(this.vertexBuffer),S.off(d.RESIZE,this.resize,this),S.off(d.PRE_RENDER,this.onPreRender,this),S.off(d.RENDER,this.onRender,this),S.off(d.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});n.exports=g},74797:(n,o,r)=>{var a=r(95428),p=r(72905),h=r(19715),u=r(83419),f=r(8054),l=r(50792),d=r(92503),v=r(50030),c=r(37867),m=r(29747),g=r(7530),y=r(32302),x=r(97480),C=r(69442),S=r(70554),E=r(88815),T=r(26128),P=r(1482),M=r(82751),w=r(84387),b=r(93567),I=r(57183),R=!1;if(0)var A;var L=new u({Extends:l,initialize:function(F){l.call(this);var G=F.config,U={alpha:G.transparent,desynchronized:G.desynchronized,depth:!0,antialias:G.antialiasGL,premultipliedAlpha:G.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:G.failIfMajorPerformanceCaveat,powerPreference:G.powerPreference,preserveDrawingBuffer:G.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:G.clearBeforeRender,antialias:G.antialias,backgroundColor:G.backgroundColor,contextCreation:U,roundPixels:G.roundPixels,maxTextures:G.maxTextures,maxTextureSize:G.maxTextureSize,batchSize:G.batchSize,maxLights:G.maxLights,mipmapFilter:G.mipmapFilter},this.game=F,this.type=f.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=F.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=m,this.contextRestoredHandler=m,this.previousContextLostHandler=m,this.previousContextRestoredHandler=m,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(O){var F,G=this.game,U=this.canvas,z=O.backgroundColor;if(R&&(this.spector=new A.Spector,this.spector.onCapture.add(this.onCapture.bind(this))),G.config.context?F=G.config.context:F=U.getContext("webgl",O.contextCreation)||U.getContext("experimental-webgl",O.contextCreation),!F||F.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=F,this.setExtensions(),this.setContextHandlers(),G.context=F;for(var N=0;N<=27;N++)this.blendModes.push({func:[F.ONE,F.ONE_MINUS_SRC_ALPHA],equation:F.FUNC_ADD});this.blendModes[1].func=[F.ONE,F.DST_ALPHA],this.blendModes[2].func=[F.DST_COLOR,F.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[F.ONE,F.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[F.ZERO,F.ONE_MINUS_SRC_ALPHA],equation:F.FUNC_REVERSE_SUBTRACT},this.glFormats=[F.BYTE,F.SHORT,F.UNSIGNED_BYTE,F.UNSIGNED_SHORT,F.FLOAT],this.glFuncMap={mat2:{func:F.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:F.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:F.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:F.uniform1f,length:1},"1fv":{func:F.uniform1fv,length:1},"1i":{func:F.uniform1i,length:1},"1iv":{func:F.uniform1iv,length:1},"2f":{func:F.uniform2f,length:2},"2fv":{func:F.uniform2fv,length:1},"2i":{func:F.uniform2i,length:2},"2iv":{func:F.uniform2iv,length:1},"3f":{func:F.uniform3f,length:3},"3fv":{func:F.uniform3fv,length:1},"3i":{func:F.uniform3i,length:3},"3iv":{func:F.uniform3iv,length:1},"4f":{func:F.uniform4f,length:4},"4fv":{func:F.uniform4fv,length:1},"4i":{func:F.uniform4i,length:4},"4iv":{func:F.uniform4iv,length:1}},(!O.maxTextures||O.maxTextures===-1)&&(O.maxTextures=F.getParameter(F.MAX_TEXTURE_IMAGE_UNITS)),O.maxTextureSize||(O.maxTextureSize=F.getParameter(F.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),F.disable(F.DEPTH_TEST),F.disable(F.CULL_FACE),F.enable(F.BLEND),F.clearColor(z.redGL,z.greenGL,z.blueGL,z.alphaGL),F.clear(F.COLOR_BUFFER_BIT);var k=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return k.indexOf(O.mipmapFilter)!==-1&&(this.mipmapFilter=F[O.mipmapFilter]),this.maxTextures=S.checkShaderMax(F,O.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new g(this),this.setBlendMode(f.BlendModes.NORMAL),this.projectionMatrix=new c().identity(),G.textures.once(C.READY,this.boot,this),this},boot:function(){var O=this.game,F=this.pipelines,G=O.scale.baseSize,U=G.width,z=G.height;this.width=U,this.height=z,this.isBooted=!0,this.renderTarget=new y(this,U,z,1,0,!0,!0),this.maskTarget=new y(this,U,z,1,0,!0,!0),this.maskSource=new y(this,U,z,1,0,!0,!0);var N=O.config;F.boot(N.pipeline,N.defaultPipeline,N.autoMobilePipeline),this.blankTexture=O.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=O.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=O.textures.getFrame("__WHITE").glTexture;var k=this.gl;k.bindFramebuffer(k.FRAMEBUFFER,null),k.enable(k.SCISSOR_TEST),O.scale.on(x.RESIZE,this.onResize,this),this.resize(U,z)},setExtensions:function(){var O=this.gl,F=O.getSupportedExtensions();this.supportedExtensions=F;var G="ANGLE_instanced_arrays";this.instancedArraysExtension=F.indexOf(G)>-1?O.getExtension(G):null;var U="OES_vertex_array_object";this.vaoExtension=F.indexOf(U)>-1?O.getExtension(U):null},setContextHandlers:function(O,F){this.previousContextLostHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextLostHandler,!1),this.previousContextRestoredHandler&&this.canvas.removeEventListener("webglcontextlost",this.previousContextRestoredHandler,!1),typeof O=="function"?this.contextLostHandler=O.bind(this):this.contextLostHandler=this.dispatchContextLost.bind(this),typeof F=="function"?this.contextRestoredHandler=F.bind(this):this.contextRestoredHandler=this.dispatchContextRestored.bind(this),this.canvas.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),this.previousContextLostHandler=this.contextLostHandler,this.previousContextRestoredHandler=this.contextRestoredHandler},dispatchContextLost:function(O){this.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),this.emit(d.LOSE_WEBGL,this),O.preventDefault()},dispatchContextRestored:function(O){var F=this.gl;if(F.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}this.currentProgram=null,this.currentFramebuffer=null,this.setBlendMode(f.BlendModes.NORMAL),F.disable(F.BLEND),F.disable(F.DEPTH_TEST),F.enable(F.CULL_FACE),this.compression=this.getCompressedTextures();var G=function(U){U.createResource()};a(this.glTextureWrappers,G),a(this.glBufferWrappers,G),a(this.glFramebufferWrappers,G),a(this.glProgramWrappers,G),a(this.glAttribLocationWrappers,G),a(this.glUniformLocationWrappers,G),this.createTemporaryTextures(),this.pipelines.restoreContext(),this.resize(this.game.scale.baseSize.width,this.game.scale.baseSize.height),this.setExtensions(),this.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),this.emit(d.RESTORE_WEBGL,this),O.preventDefault()},createTemporaryTextures:function(){for(var O=this.gl,F=0;F<this.maxTextures;F++){var G=O.createTexture();O.activeTexture(O.TEXTURE0+F),O.bindTexture(O.TEXTURE_2D,G),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(F)}},captureFrame:function(O,F){O===void 0&&(O=!1),F===void 0&&(F=!1),R&&this.spector&&!this._debugCapture&&(this.spector.captureCanvas(this.canvas,0,O,F),this._debugCapture=!0)},captureNextFrame:function(){R&&this.spector&&!this._debugCapture&&(this._debugCapture=!0,this.spector.captureNextFrame(this.canvas))},getFps:function(){if(R&&this.spector)return this.spector.getFps()},log:function(){if(R&&this.spector){var O=Array.prototype.slice.call(arguments).join(" ");return this.spector.log(O)}},startCapture:function(O,F,G){O===void 0&&(O=0),F===void 0&&(F=!1),G===void 0&&(G=!1),R&&this.spector&&!this._debugCapture&&(this.spector.startCapture(this.canvas,O,F,G),this._debugCapture=!0)},stopCapture:function(){if(R&&this.spector&&this._debugCapture)return this.spector.stopCapture()},onCapture:function(O){if(R){var F=this.spector.getResultUI();F.display(O),this._debugCapture=!1}},onResize:function(O,F){(F.width!==this.width||F.height!==this.height)&&this.resize(F.width,F.height)},beginCapture:function(O,F){O===void 0&&(O=this.width),F===void 0&&(F=this.height),this.renderTarget.bind(!0,O,F),this.setProjectionMatrix(O,F)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(O,F){var G=this.gl;return this.width=O,this.height=F,this.setProjectionMatrix(O,F),G.viewport(0,0,O,F),this.drawingBufferHeight=G.drawingBufferHeight,G.scissor(0,G.drawingBufferHeight-F,O,F),this.defaultScissor[2]=O,this.defaultScissor[3]=F,this.emit(d.RESIZE,O,F),this},getCompressedTextures:function(){var O="WEBGL_compressed_texture_",F="WEBKIT_"+O,G="EXT_texture_compression_",U=function(N,k){var D=N.getExtension(O+k)||N.getExtension(F+k)||N.getExtension(G+k);if(D){var V={};for(var B in D)V[D[B]]=B;return V}},z=this.gl;return{ETC:U(z,"etc"),ETC1:U(z,"etc1"),ATC:U(z,"atc"),ASTC:U(z,"astc"),BPTC:U(z,"bptc"),RGTC:U(z,"rgtc"),PVRTC:U(z,"pvrtc"),S3TC:U(z,"s3tc"),S3TCSRGB:U(z,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(O,F){var G=this.compression[O.toUpperCase()];if(F in G)return G[F]},supportsCompressedTexture:function(O,F){var G=this.compression[O.toUpperCase()];return G?F?F in G:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(O,F){return(O!==this.projectionWidth||F!==this.projectionHeight)&&(this.projectionWidth=O,this.projectionHeight=F,this.projectionMatrix.ortho(0,O,F,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(O){return this.supportedExtensions?this.supportedExtensions.indexOf(O):!1},getExtension:function(O){return this.hasExtension(O)?(O in this.extensions||(this.extensions[O]=this.gl.getExtension(O)),this.extensions[O]):null},flush:function(){this.pipelines.flush()},pushScissor:function(O,F,G,U,z){z===void 0&&(z=this.drawingBufferHeight);var N=this.scissorStack,k=[O,F,G,U];return N.push(k),this.setScissor(O,F,G,U,z),this.currentScissor=k,k},setScissor:function(O,F,G,U,z){z===void 0&&(z=this.drawingBufferHeight);var N=this.gl,k=this.currentScissor,D=G>0&&U>0;if(k&&D){var V=k[0],B=k[1],W=k[2],H=k[3];D=V!==O||B!==F||W!==G||H!==U}D&&(this.flush(),N.scissor(O,z-F-U,G,U))},resetScissor:function(){var O=this.gl;O.enable(O.SCISSOR_TEST);var F=this.currentScissor;if(F){var G=F[0],U=F[1],z=F[2],N=F[3];z>0&&N>0&&O.scissor(G,this.drawingBufferHeight-U-N,z,N)}},popScissor:function(){var O=this.scissorStack;O.pop();var F=O[O.length-1];F&&this.setScissor(F[0],F[1],F[2],F[3]),this.currentScissor=F},hasActiveStencilMask:function(){var O=this.currentMask.mask,F=this.currentCameraMask.mask;return O&&O.isStencil||F&&F.isStencil},resetViewport:function(){var O=this.gl;O.viewport(0,0,this.width,this.height),this.drawingBufferHeight=O.drawingBufferHeight},setBlendMode:function(O,F){F===void 0&&(F=!1);var G=this.gl,U=this.blendModes[O];return F||O!==f.BlendModes.SKIP_CHECK&&this.currentBlendMode!==O?(this.flush(),G.enable(G.BLEND),G.blendEquation(U.equation),U.func.length>2?G.blendFuncSeparate(U.func[0],U.func[1],U.func[2],U.func[3]):G.blendFunc(U.func[0],U.func[1]),this.currentBlendMode=O,!0):!1},addBlendMode:function(O,F){var G=this.blendModes.push({func:O,equation:F});return G-1},updateBlendMode:function(O,F,G){return this.blendModes[O]&&(this.blendModes[O].func=F,G&&(this.blendModes[O].equation=G)),this},removeBlendMode:function(O){return O>17&&this.blendModes[O]&&this.blendModes.splice(O,1),this},pushFramebuffer:function(O,F,G,U,z){return O===this.currentFramebuffer?this:(this.fboStack.push(O),this.setFramebuffer(O,F,G,U,z))},setFramebuffer:function(O,F,G,U,z){if(F===void 0&&(F=!1),G===void 0&&(G=!0),U===void 0&&(U=null),z===void 0&&(z=!1),O===this.currentFramebuffer)return this;var N=this.gl,k=this.width,D=this.height;return O&&O.renderTexture&&G?(k=O.renderTexture.width,D=O.renderTexture.height):this.flush(),O?N.bindFramebuffer(N.FRAMEBUFFER,O.webGLFramebuffer):N.bindFramebuffer(N.FRAMEBUFFER,null),G&&N.viewport(0,0,k,D),U&&N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_2D,U.webGLTexture,0),z&&(N.clearColor(0,0,0,0),N.clear(N.COLOR_BUFFER_BIT)),F&&(O?(this.drawingBufferHeight=D,this.pushScissor(0,0,k,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=O,this},popFramebuffer:function(O,F){O===void 0&&(O=!1),F===void 0&&(F=!0);var G=this.fboStack;G.pop();var U=G[G.length-1];return U||(U=null),this.setFramebuffer(U,O,F),U},restoreFramebuffer:function(O,F){O===void 0&&(O=!1),F===void 0&&(F=!0);var G=this.fboStack,U=G[G.length-1];U||(U=null),this.currentFramebuffer=null,this.setFramebuffer(U,O,F)},setProgram:function(O){return O!==this.currentProgram?(this.flush(),this.gl.useProgram(O.webGLProgram),this.currentProgram=O,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(O,F,G,U,z){z===void 0&&(z=!1);var N=this.gl,k=N.NEAREST,D=N.NEAREST,V=N.CLAMP_TO_EDGE,B=null;F=O?O.width:F,G=O?O.height:G;var W=v(F,G);if(W&&!z&&(V=N.REPEAT),U===f.ScaleModes.LINEAR&&this.config.antialias){var H=O&&O.compressed,Y=!H&&W||H&&O.mipmaps.length>1;k=this.mipmapFilter&&Y?this.mipmapFilter:N.LINEAR,D=N.LINEAR}return!O&&typeof F=="number"&&typeof G=="number"?B=this.createTexture2D(0,k,D,V,V,N.RGBA,null,F,G):B=this.createTexture2D(0,k,D,V,V,N.RGBA,O),B},createTexture2D:function(O,F,G,U,z,N,k,D,V,B,W,H){typeof D!="number"&&(D=k?k.width:1),typeof V!="number"&&(V=k?k.height:1);var Y=new M(this.gl,O,F,G,U,z,N,k,D,V,B,W,H);return this.glTextureWrappers.push(Y),Y},createFramebuffer:function(O,F,G,U){this.currentFramebuffer=null;var z=new w(this.gl,O,F,G,U);return this.glFramebufferWrappers.push(z),z},beginBitmapMask:function(O,F){var G=this.gl;G&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==O&&(this.currentMask.mask=O,this.currentMask.camera=F))},drawBitmapMask:function(O,F,G){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),O.renderWebGL(this,O,F),this.maskSource.unbind(!0),this.maskTarget.unbind();var U=this.gl,z=this.getCurrentStencilMask();z?(U.enable(U.STENCIL_TEST),z.mask.applyStencil(this,z.camera,!0)):this.currentMask.mask=null,this.pipelines.set(G),U.activeTexture(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,this.maskTarget.texture.webGLTexture),U.activeTexture(U.TEXTURE1),U.bindTexture(U.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(O,F){var G=new P(this.gl,O,F);return this.glProgramWrappers.push(G),G},createVertexBuffer:function(O,F){var G=this.gl,U=new T(G,O,G.ARRAY_BUFFER,F);return this.glBufferWrappers.push(U),U},createAttribLocation:function(O,F){var G=new b(this.gl,O,F);return this.glAttribLocationWrappers.push(G),G},createUniformLocation:function(O,F){var G=new I(this.gl,O,F);return this.glUniformLocationWrappers.push(G),G},createIndexBuffer:function(O,F){var G=this.gl,U=new T(G,O,G.ELEMENT_ARRAY_BUFFER,F);return this.glBufferWrappers.push(U),U},deleteTexture:function(O){if(O)return p(this.glTextureWrappers,O),O.destroy(),this},deleteFramebuffer:function(O){return O?(p(this.fboStack,O),p(this.glFramebufferWrappers,O),O.destroy(),this):this},deleteProgram:function(O){return O&&(p(this.glProgramWrappers,O),O.destroy()),this},deleteAttribLocation:function(O){return O&&(p(this.glAttribLocationWrappers,O),O.destroy()),this},deleteUniformLocation:function(O){return O&&(p(this.glUniformLocationWrappers,O),O.destroy()),this},deleteBuffer:function(O){return O?(p(this.glBufferWrappers,O),O.destroy(),this):this},preRenderCamera:function(O){var F=O.x,G=O.y,U=O.width,z=O.height,N=O.backgroundColor;if(O.emit(h.PRE_RENDER,O),this.pipelines.preBatchCamera(O),this.pushScissor(F,G,U,z),O.mask&&(this.currentCameraMask.mask=O.mask,this.currentCameraMask.camera=O._maskCamera,O.mask.preRenderWebGL(this,O,O._maskCamera)),N.alphaGL>0){var k=this.pipelines.setMulti();k.drawFillRect(F,G,U,z,S.getTintFromFloats(N.blueGL,N.greenGL,N.redGL,1),N.alphaGL)}},getCurrentStencilMask:function(){var O=null,F=this.maskStack,G=this.currentCameraMask;return F.length>0?O=F[F.length-1]:G.mask&&G.mask.isStencil&&(O=G),O},postRenderCamera:function(O){var F=O.flashEffect,G=O.fadeEffect;if(F.isRunning||G.isRunning||G.isComplete){var U=this.pipelines.setMulti();F.postRenderWebGL(U,S.getTintFromFloats),G.postRenderWebGL(U,S.getTintFromFloats)}O.dirty=!1,this.popScissor(),O.mask&&(this.currentCameraMask.mask=null,O.mask.postRenderWebGL(this,O._maskCamera)),this.pipelines.postBatchCamera(O),O.emit(h.POST_RENDER,O)},preRender:function(){if(!this.contextLost){var O=this.gl;if(O.bindFramebuffer(O.FRAMEBUFFER,null),this.emit(d.PRE_RENDER_CLEAR),this.config.clearBeforeRender){var F=this.config.backgroundColor;O.clearColor(F.redGL,F.greenGL,F.blueGL,F.alphaGL),O.clear(O.COLOR_BUFFER_BIT|O.DEPTH_BUFFER_BIT|O.STENCIL_BUFFER_BIT)}O.enable(O.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&O.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(d.PRE_RENDER)}},render:function(O,F,G){if(!this.contextLost){var U=F.length;if(this.emit(d.RENDER,O,G),this.preRenderCamera(G),U===0){this.setBlendMode(f.BlendModes.NORMAL),this.postRenderCamera(G);return}this.currentType="";for(var z=this.currentMask,N=0;N<U;N++){this.finalType=N===U-1;var k=F[N],D=k.mask;z=this.currentMask,z.mask&&z.mask!==D&&z.mask.postRenderWebGL(this,z.camera),D&&z.mask!==D&&D.preRenderWebGL(this,k,G),k.blendMode!==this.currentBlendMode&&this.setBlendMode(k.blendMode);var V=k.type;V!==this.currentType&&(this.newType=!0,this.currentType=V),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=F[N+1].type===this.currentType,k.renderWebGL(this,k,G),this.newType=!1}z=this.currentMask,z.mask&&z.mask.postRenderWebGL(this,z.camera),this.setBlendMode(f.BlendModes.NORMAL),this.postRenderCamera(G)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(d.POST_RENDER);var O=this.snapshotState;O.callback&&(E(this.gl,O),O.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var O=this.gl,F=this.getCurrentStencilMask();if(F){var G=F.mask;O.enable(O.STENCIL_TEST),G.invertAlpha?O.stencilFunc(O.NOTEQUAL,G.level,255):O.stencilFunc(O.EQUAL,G.level,255)}},snapshot:function(O,F,G){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,O,F,G)},snapshotArea:function(O,F,G,U,z,N,k){var D=this.snapshotState;return D.callback=z,D.type=N,D.encoder=k,D.getPixel=!1,D.x=O,D.y=F,D.width=G,D.height=U,this},snapshotPixel:function(O,F,G){return this.snapshotArea(O,F,1,1,G),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(O,F,G,U,z,N,k,D,V,B,W){z===void 0&&(z=!1),N===void 0&&(N=0),k===void 0&&(k=0),D===void 0&&(D=F),V===void 0&&(V=G),B==="pixel"&&(z=!0,B="image/png");var H=this.currentFramebuffer;this.snapshotArea(N,k,D,V,U,B,W);var Y=this.snapshotState;return Y.getPixel=z,Y.isFramebuffer=!0,Y.bufferWidth=F,Y.bufferHeight=G,Y.width=Math.min(Y.width,F),Y.height=Math.min(Y.height,G),this.setFramebuffer(O),E(this.gl,Y),this.setFramebuffer(H),Y.callback=null,Y.isFramebuffer=!1,this},canvasToTexture:function(O,F,G,U){G===void 0&&(G=!1),U===void 0&&(U=!1);var z=this.gl,N=z.NEAREST,k=z.NEAREST,D=O.width,V=O.height,B=z.CLAMP_TO_EDGE,W=v(D,V);return!G&&W&&(B=z.REPEAT),this.config.antialias&&(N=W&&this.mipmapFilter?this.mipmapFilter:z.LINEAR,k=z.LINEAR),F?(F.update(O,D,V,U,B,B,N,k,F.format),F):this.createTexture2D(0,N,k,B,B,z.RGBA,O,D,V,!0,!1,U)},createCanvasTexture:function(O,F,G){return F===void 0&&(F=!1),G===void 0&&(G=!1),this.canvasToTexture(O,null,F,G)},updateCanvasTexture:function(O,F,G,U){return G===void 0&&(G=!1),U===void 0&&(U=!1),this.canvasToTexture(O,F,U,G)},videoToTexture:function(O,F,G,U){G===void 0&&(G=!1),U===void 0&&(U=!1);var z=this.gl,N=z.NEAREST,k=z.NEAREST,D=O.videoWidth,V=O.videoHeight,B=z.CLAMP_TO_EDGE,W=v(D,V);return!G&&W&&(B=z.REPEAT),this.config.antialias&&(N=W&&this.mipmapFilter?this.mipmapFilter:z.LINEAR,k=z.LINEAR),F?(F.update(O,D,V,U,B,B,N,k,F.format),F):this.createTexture2D(0,N,k,B,B,z.RGBA,O,D,V,!0,!0,U)},createVideoTexture:function(O,F,G){return F===void 0&&(F=!1),G===void 0&&(G=!1),this.videoToTexture(O,null,F,G)},updateVideoTexture:function(O,F,G,U){return G===void 0&&(G=!1),U===void 0&&(U=!1),this.videoToTexture(O,F,U,G)},createUint8ArrayTexture:function(O,F,G){var U=this.gl,z=U.NEAREST,N=U.NEAREST,k=U.CLAMP_TO_EDGE,D=v(F,G);return D&&(k=U.REPEAT),this.createTexture2D(0,z,N,k,k,U.RGBA,O,F,G)},setTextureFilter:function(O,F){var G=this.gl,U=F===0?G.LINEAR:G.NEAREST;G.activeTexture(G.TEXTURE0);var z=G.getParameter(G.TEXTURE_BINDING_2D);return G.bindTexture(G.TEXTURE_2D,O.webGLTexture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,U),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,U),O.minFilter=U,O.magFilter=U,z&&G.bindTexture(G.TEXTURE_2D,z),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var O=function(F){F.destroy()};a(this.glAttribLocationWrappers,O),a(this.glBufferWrappers,O),a(this.glFramebufferWrappers,O),a(this.glProgramWrappers,O),a(this.glTextureWrappers,O),a(this.glUniformLocationWrappers,O),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null,R&&(this.spector=null)}});n.exports=L},38683:(n,o,r)=>{var a=r(83419),p=r(95428),h=r(95540),u=r(14500),f=new a({initialize:function(d,v,c,m,g){this.pipeline=d,this.name=v,this.renderer=d.renderer,this.gl=this.renderer.gl,this.fragSrc=m,this.vertSrc=c,this.program=this.renderer.createProgram(c,m),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(g),this.createUniforms()},createAttributes:function(l){var d=0,v=0,c=[];this.vertexComponentCount=0;for(var m=0;m<l.length;m++){var g=l[m],y=g.name,x=h(g,"size",1),C=h(g,"type",u.FLOAT),S=C.enum,E=C.size,T=!!g.normalized;c.push({name:y,size:x,type:S,normalized:T,offset:v,enabled:!1,location:-1}),E===4?d+=x:d++,v+=x*E}this.vertexSize=v,this.vertexComponentCount=d,this.attributes=c},bind:function(l,d){return l===void 0&&(l=!1),d===void 0&&(d=!1),d&&this.pipeline.flush(),this.renderer.setProgram(this.program),l&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(l){l===void 0&&(l=!1);for(var d=this.gl,v=this.renderer,c=this.vertexSize,m=this.attributes,g=this.program,y=0;y<m.length;y++){var x=m[y],C=x.size,S=x.type,E=x.offset,T=x.enabled,P=x.location,M=!!x.normalized;if(l){P!==-1&&v.deleteAttribLocation(P);var w=this.renderer.createAttribLocation(g,x.name);w.webGLAttribLocation>=0?(d.enableVertexAttribArray(w.webGLAttribLocation),d.vertexAttribPointer(w.webGLAttribLocation,C,S,M,c,E),x.enabled=!0,x.location=w):w.webGLAttribLocation!==-1&&d.disableVertexAttribArray(w.webGLAttribLocation)}else T?d.vertexAttribPointer(P.webGLAttribLocation,C,S,M,c,E):!T&&P!==-1&&P.webGLAttribLocation>-1&&(d.disableVertexAttribArray(P.webGLAttribLocation),x.location=-1)}return this},createUniforms:function(){var l=this.gl,d=this.program,v=this.uniforms,c,m,g,y=l.getProgramParameter(d.webGLProgram,l.ACTIVE_UNIFORMS);for(c=0;c<y;c++){var x=l.getActiveUniform(d.webGLProgram,c);if(x){m=x.name,g=this.renderer.createUniformLocation(d,m),g!==null&&(v[m]={name:m,location:g,setter:null,value1:null,value2:null,value3:null,value4:null});var C=m.indexOf("[");C>0&&(m=m.substr(0,C),v.hasOwnProperty(m)||(g=this.renderer.createUniformLocation(d,m),g!==null&&(v[m]={name:m,location:g,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var l=this.gl;this.renderer.setProgram(this.program);for(var d in this.uniforms){var v=this.uniforms[d];v.setter&&v.setter.call(l,v.location.webGLUniformLocation,v.value1,v.value2,v.value3,v.value4)}},hasUniform:function(l){return this.uniforms.hasOwnProperty(l)},resetUniform:function(l){var d=this.uniforms[l];return d&&(d.value1=null,d.value2=null,d.value3=null,d.value4=null),this},setUniform1:function(l,d,v,c){var m=this.uniforms[d];return m?((c||m.value1!==v)&&(m.setter||(m.setter=l),m.value1=v,this.renderer.setProgram(this.program),l.call(this.gl,m.location.webGLUniformLocation,v),this.pipeline.currentShader=this),this):this},setUniform2:function(l,d,v,c,m){var g=this.uniforms[d];return g?((m||g.value1!==v||g.value2!==c)&&(g.setter||(g.setter=l),g.value1=v,g.value2=c,this.renderer.setProgram(this.program),l.call(this.gl,g.location.webGLUniformLocation,v,c),this.pipeline.currentShader=this),this):this},setUniform3:function(l,d,v,c,m,g){var y=this.uniforms[d];return y?((g||y.value1!==v||y.value2!==c||y.value3!==m)&&(y.setter||(y.setter=l),y.value1=v,y.value2=c,y.value3=m,this.renderer.setProgram(this.program),l.call(this.gl,y.location.webGLUniformLocation,v,c,m),this.pipeline.currentShader=this),this):this},setUniform4:function(l,d,v,c,m,g,y){var x=this.uniforms[d];return x?((y||x.value1!==v||x.value2!==c||x.value3!==m||x.value4!==g)&&(x.setter||(x.setter=l),x.value1=v,x.value2=c,x.value3=m,x.value4=g,this.renderer.setProgram(this.program),l.call(this.gl,x.location.webGLUniformLocation,v,c,m,g),this.pipeline.currentShader=this),this):this},setBoolean:function(l,d){return this.setUniform1(this.gl.uniform1i,l,Number(d))},set1f:function(l,d){return this.setUniform1(this.gl.uniform1f,l,d)},set2f:function(l,d,v){return this.setUniform2(this.gl.uniform2f,l,d,v)},set3f:function(l,d,v,c){return this.setUniform3(this.gl.uniform3f,l,d,v,c)},set4f:function(l,d,v,c,m){return this.setUniform4(this.gl.uniform4f,l,d,v,c,m)},set1fv:function(l,d){return this.setUniform1(this.gl.uniform1fv,l,d,!0)},set2fv:function(l,d){return this.setUniform1(this.gl.uniform2fv,l,d,!0)},set3fv:function(l,d){return this.setUniform1(this.gl.uniform3fv,l,d,!0)},set4fv:function(l,d){return this.setUniform1(this.gl.uniform4fv,l,d,!0)},set1iv:function(l,d){return this.setUniform1(this.gl.uniform1iv,l,d,!0)},set2iv:function(l,d){return this.setUniform1(this.gl.uniform2iv,l,d,!0)},set3iv:function(l,d){return this.setUniform1(this.gl.uniform3iv,l,d,!0)},set4iv:function(l,d){return this.setUniform1(this.gl.uniform4iv,l,d,!0)},set1i:function(l,d){return this.setUniform1(this.gl.uniform1i,l,d)},set2i:function(l,d,v){return this.setUniform2(this.gl.uniform2i,l,d,v)},set3i:function(l,d,v,c){return this.setUniform3(this.gl.uniform3i,l,d,v,c)},set4i:function(l,d,v,c,m){return this.setUniform4(this.gl.uniform4i,l,d,v,c,m)},setMatrix2fv:function(l,d,v){return this.setUniform2(this.gl.uniformMatrix2fv,l,d,v,!0)},setMatrix3fv:function(l,d,v){return this.setUniform2(this.gl.uniformMatrix3fv,l,d,v,!0)},setMatrix4fv:function(l,d,v){return this.setUniform2(this.gl.uniformMatrix4fv,l,d,v,!0)},createProgram:function(l,d){return l===void 0&&(l=this.vertSrc),d===void 0&&(d=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=l,this.fragSrc=d,this.program=this.renderer.createProgram(l,d),this.createUniforms(),this.rebind()},destroy:function(){var l=this.renderer;p(this.uniforms,function(d){l.deleteUniformLocation(d.location)}),this.uniforms=null,p(this.attributes,function(d){l.deleteAttribLocation(d.location)}),this.attributes=null,l.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});n.exports=f},14500:n=>{var o={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};n.exports=o},4159:(n,o,r)=>{var a=r(14500),p=r(79291),h={PipelineManager:r(7530),Pipelines:r(96615),RenderTarget:r(32302),Utils:r(70554),WebGLPipeline:r(29100),WebGLRenderer:r(74797),WebGLShader:r(38683),Wrappers:r(9503)};h=p(!1,h,a),n.exports=h},31302:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(78908),u=r(85191),f=r(14500),l=r(29100),d=new a({Extends:l,initialize:function(c){c.fragShader=p(c,"fragShader",h),c.vertShader=p(c,"vertShader",u),c.batchSize=p(c,"batchSize",1),c.vertices=p(c,"vertices",[-1,1,-1,-7,7,1]),c.attributes=p(c,"attributes",[{name:"inPosition",size:2,type:f.FLOAT}]),l.call(this,c)},boot:function(){l.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(v,c){l.prototype.resize.call(this,v,c),this.set2f("uResolution",v,c)},beginMask:function(v,c,m){this.renderer.beginBitmapMask(v,m)},endMask:function(v,c,m){var g=this.gl,y=this.renderer,x=v.bitmapMask;x&&g&&(y.drawBitmapMask(x,c,this),m&&this.set2f("uResolution",m.width,m.height),this.set1i("uInvertMaskAlpha",v.invertAlpha),g.drawArrays(this.topology,0,3),m&&this.set2f("uResolution",this.width,this.height),g.bindTexture(g.TEXTURE_2D,null))}});n.exports=d},92651:(n,o,r)=>{var a=r(83419),p=r(58918),h=r(14811),u=r(95540),f=r(43558),l=r(89350),d=r(70554),v=new a({Extends:f,initialize:function(m){m.shaders=[d.setGlowQuality(l.FXGlowFrag,m.game),l.FXShadowFrag,l.FXPixelateFrag,l.FXVignetteFrag,l.FXShineFrag,l.FXBlurLowFrag,l.FXBlurMedFrag,l.FXBlurHighFrag,l.FXGradientFrag,l.FXBloomFrag,l.ColorMatrixFrag,l.FXCircleFrag,l.FXBarrelFrag,l.FXDisplacementFrag,l.FXWipeFrag,l.FXBokehFrag],f.call(this,m);var g=this.game;this.glow=new p.Glow(g),this.shadow=new p.Shadow(g),this.pixelate=new p.Pixelate(g),this.vignette=new p.Vignette(g),this.shine=new p.Shine(g),this.gradient=new p.Gradient(g),this.circle=new p.Circle(g),this.barrel=new p.Barrel(g),this.wipe=new p.Wipe(g),this.bokeh=new p.Bokeh(g);var y=[];y[h.GLOW]=this.onGlow,y[h.SHADOW]=this.onShadow,y[h.PIXELATE]=this.onPixelate,y[h.VIGNETTE]=this.onVignette,y[h.SHINE]=this.onShine,y[h.BLUR]=this.onBlur,y[h.GRADIENT]=this.onGradient,y[h.BLOOM]=this.onBloom,y[h.COLOR_MATRIX]=this.onColorMatrix,y[h.CIRCLE]=this.onCircle,y[h.BARREL]=this.onBarrel,y[h.DISPLACEMENT]=this.onDisplacement,y[h.WIPE]=this.onWipe,y[h.BOKEH]=this.onBokeh,this.fxHandlers=y,this.source,this.target,this.swap},onDraw:function(c,m,g){this.source=c,this.target=m,this.swap=g;var y=c.width,x=c.height,C=this.tempSprite,S=this.fxHandlers;if(C&&C.preFX)for(var E=C.preFX.list,T=0;T<E.length;T++){var P=E[T];P.active&&S[P.type].call(this,P,y,x)}this.drawToGame(this.source)},runDraw:function(){var c=this.source,m=this.target;this.copy(c,m),this.source=m,this.target=c},onGlow:function(c,m,g){var y=this.shaders[h.GLOW];this.setShader(y),this.glow.onPreRender(c,y,m,g),this.runDraw()},onShadow:function(c){var m=this.shaders[h.SHADOW];this.setShader(m),this.shadow.onPreRender(c,m),this.runDraw()},onPixelate:function(c,m,g){var y=this.shaders[h.PIXELATE];this.setShader(y),this.pixelate.onPreRender(c,y,m,g),this.runDraw()},onVignette:function(c){var m=this.shaders[h.VIGNETTE];this.setShader(m),this.vignette.onPreRender(c,m),this.runDraw()},onShine:function(c,m,g){var y=this.shaders[h.SHINE];this.setShader(y),this.shine.onPreRender(c,y,m,g),this.runDraw()},onBlur:function(c,m,g){var y=u(c,"quality"),x=this.shaders[h.BLUR+y];this.setShader(x),this.set1i("uMainSampler",0),this.set2f("resolution",m,g),this.set1f("strength",u(c,"strength")),this.set3fv("color",u(c,"glcolor"));for(var C=u(c,"x"),S=u(c,"y"),E=u(c,"steps"),T=0;T<E;T++)this.set2f("offset",C,0),this.runDraw(),this.set2f("offset",0,S),this.runDraw()},onGradient:function(c){var m=this.shaders[h.GRADIENT];this.setShader(m),this.gradient.onPreRender(c,m),this.runDraw()},onBloom:function(c,m,g){var y=this.shaders[h.BLOOM];this.copySprite(this.source,this.swap),this.setShader(y),this.set1i("uMainSampler",0),this.set1f("strength",u(c,"blurStrength")),this.set3fv("color",u(c,"glcolor"));for(var x=2/m*u(c,"offsetX"),C=2/g*u(c,"offsetY"),S=u(c,"steps"),E=0;E<S;E++)this.set2f("offset",x,0),this.runDraw(),this.set2f("offset",0,C),this.runDraw();this.blendFrames(this.swap,this.source,this.target,u(c,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(c){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",c.getData()),this.set1f("uAlpha",c.alpha),this.runDraw()},onCircle:function(c,m,g){var y=this.shaders[h.CIRCLE];this.setShader(y),this.circle.onPreRender(c,y,m,g),this.runDraw()},onBarrel:function(c){var m=this.shaders[h.BARREL];this.setShader(m),this.barrel.onPreRender(c,m),this.runDraw()},onDisplacement:function(c){this.setShader(this.shaders[h.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",c.x,c.y),this.bindTexture(c.glTexture,1),this.runDraw()},onWipe:function(c){var m=this.shaders[h.WIPE];this.setShader(m),this.wipe.onPreRender(c,m),this.runDraw()},onBokeh:function(c,m,g){var y=this.shaders[h.BOKEH];this.setShader(y),this.bokeh.onPreRender(c,y,m,g),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,f.prototype.destroy.call(this),this}});n.exports=v},96569:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(31063),u=r(57516),f=r(61340),l=r(26099),d=r(29100),v=new a({Extends:u,initialize:function(m){var g=p(m,"fragShader",h);m.fragShader=g.replace("%LIGHT_COUNT%",m.game.renderer.config.maxLights),u.call(this,m),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new l,this._tempMatrix=new f,this._tempMatrix2=new f},boot:function(){d.prototype.boot.call(this)},onRender:function(c,m){var g=c.sys.lights;if(this.lightsActive=!1,!(!g||!g.active)){var y=g.getLights(m),x=y.length;this.lightsActive=!0;var C,S=this.renderer,E=S.height,T=m.matrix,P=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",m.x,m.y,m.rotation,m.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),this.set1i("uLightCount",x),C=0;C<x;C++){var M=y[C].light,w=M.color,b="uLights["+C+"].";T.transformPoint(M.x,M.y,P),this.set2f(b+"position",P.x-m.scrollX*M.scrollFactorX*m.zoom,E-(P.y-m.scrollY*M.scrollFactorY*m.zoom)),this.set3f(b+"color",w.r,w.g,w.b),this.set1f(b+"intensity",M.intensity),this.set1f(b+"radius",M.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(c){if(c!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var m=this.inverseRotationMatrix;if(c){var g=-c,y=Math.cos(g),x=Math.sin(g);m[1]=x,m[3]=-x,m[0]=m[4]=y}else m[0]=m[4]=1,m[1]=m[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,m),this.currentNormalMapRotation=c}},setTexture2D:function(c,m){var g=this.renderer;c===void 0&&(c=g.whiteTexture);var y=this.getNormalMap(m);this.isNewNormalMap(c,y)&&(this.flush(),this.createBatch(c),this.addTextureToBatch(y),this.currentNormalMap=y);var x=0;if(m&&m.parentContainer){var C=m.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);x=C.rotationNormalized}else m&&(x=m.rotation);return this.currentBatch===null&&(this.createBatch(c),this.addTextureToBatch(y)),this.setNormalMapRotation(x),0},setGameObject:function(c,m){m===void 0&&(m=c.frame);var g=m.glTexture,y=this.getNormalMap(c);if(this.isNewNormalMap(g,y)&&(this.flush(),this.createBatch(g),this.addTextureToBatch(y),this.currentNormalMap=y),c.parentContainer){var x=c.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(x.rotationNormalized)}else this.setNormalMapRotation(c.rotation);return this.currentBatch===null&&(this.createBatch(g),this.addTextureToBatch(y)),0},isNewNormalMap:function(c,m){return this.currentTexture!==c||this.currentNormalMap!==m},getNormalMap:function(c){var m;if(c)c.displayTexture?m=c.displayTexture.dataSource[c.displayFrame.sourceIndex]:c.texture?m=c.texture.dataSource[c.frame.sourceIndex]:c.tileset&&(Array.isArray(c.tileset)?m=c.tileset[0].image.dataSource[0]:m=c.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return m?m.glTexture:this.renderer.normalTexture},batchSprite:function(c,m,g){this.lightsActive&&u.prototype.batchSprite.call(this,c,m,g)},batchTexture:function(c,m,g,y,x,C,S,E,T,P,M,w,b,I,R,A,L,O,F,G,U,z,N,k,D,V,B,W,H,Y,X,$){this.lightsActive&&u.prototype.batchTexture.call(this,c,m,g,y,x,C,S,E,T,P,M,w,b,I,R,A,L,O,F,G,U,z,N,k,D,V,B,W,H,Y,X,$)},batchTextureFrame:function(c,m,g,y,x,C,S){this.lightsActive&&u.prototype.batchTextureFrame.call(this,c,m,g,y,x,C,S)}});n.exports=v},56527:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(57516),u=r(45561),f=r(60722),l=r(14500),d=r(29100),v=new a({Extends:h,initialize:function(m){m.fragShader=p(m,"fragShader",u),m.vertShader=p(m,"vertShader",f),m.attributes=p(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),m.forceZero=!0,m.resizeUniform="uResolution",h.call(this,m)},boot:function(){d.prototype.boot.call(this);var c=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",c.width,c.height)}});n.exports=v},57516:(n,o,r)=>{var a=r(83419),p=r(94811),h=r(95540),u=r(98840),f=r(44667),l=r(61340),d=r(70554),v=r(14500),c=r(29100),m=new a({Extends:c,initialize:function(y){var x=y.game.renderer,C=h(y,"fragShader",u);y.fragShader=d.parseFragmentShaderMaxTextures(C,x.maxTextures),y.vertShader=h(y,"vertShader",f),y.attributes=h(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:v.UNSIGNED_BYTE,normalized:!0}]),y.resizeUniform="uResolution",c.call(this,y),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.calcMatrix=new l,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){c.prototype.boot.call(this);var g=this.renderer;this.set1iv("uMainSampler",g.textureIndexes),this.set2f("uResolution",g.width,g.height)},batchSprite:function(g,y,x){this.manager.set(this,g);var C=this._tempMatrix1,S=this._tempMatrix2,E=this._tempMatrix3,T=g.frame,P=T.glTexture,M=T.u0,w=T.v0,b=T.u1,I=T.v1,R=T.x,A=T.y,L=T.cutWidth,O=T.cutHeight,F=T.customPivot,G=g.displayOriginX,U=g.displayOriginY,z=-G+R,N=-U+A;if(g.isCropped){var k=g._crop;(k.flipX!==g.flipX||k.flipY!==g.flipY)&&T.updateCropUVs(k,g.flipX,g.flipY),M=k.u0,w=k.v0,b=k.u1,I=k.v1,L=k.width,O=k.height,R=k.x,A=k.y,z=-G+R,N=-U+A}var D=1,V=1;g.flipX&&(F||(z+=-T.realWidth+G*2),D=-1),g.flipY&&(F||(N+=-T.realHeight+U*2),V=-1);var B=g.x,W=g.y;y.roundPixels&&(B=Math.floor(B),W=Math.floor(W)),S.applyITRS(B,W,g.rotation,g.scaleX*D,g.scaleY*V),C.copyFrom(y.matrix),x?(C.multiplyWithOffset(x,-y.scrollX*g.scrollFactorX,-y.scrollY*g.scrollFactorY),S.e=B,S.f=W):(S.e-=y.scrollX*g.scrollFactorX,S.f-=y.scrollY*g.scrollFactorY),C.multiply(S,E);var H=E.setQuad(z,N,z+L,N+O,y.renderRoundPixels),Y=d.getTintAppendFloatAlpha,X=y.alpha,$=Y(g.tintTopLeft,X*g._alphaTL),J=Y(g.tintTopRight,X*g._alphaTR),q=Y(g.tintBottomLeft,X*g._alphaBL),Q=Y(g.tintBottomRight,X*g._alphaBR);this.shouldFlush(6)&&this.flush();var tt=this.setGameObject(g,T);this.manager.preBatch(g),this.batchQuad(g,H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],M,w,b,I,$,J,q,Q,g.tintFill,P,tt),this.manager.postBatch(g)},batchTexture:function(g,y,x,C,S,E,T,P,M,w,b,I,R,A,L,O,F,G,U,z,N,k,D,V,B,W,H,Y,X,$,J,q,Q){Q===void 0&&(Q=!1),this.manager.set(this,g);var tt=this._tempMatrix1,rt=this._tempMatrix2,et=this._tempMatrix3,ot=G/x+H,ut=U/C+Y,dt=(G+z)/x+H,it=(U+N)/C+Y,st=T,at=P,yt=-O,Ft=-F;if(g.isCropped){var ee=g._crop,It=ee.width,Dt=ee.height;st=It,at=Dt,T=It,P=Dt,G=ee.x,U=ee.y;var he=G,Xe=U;I&&(he=z-ee.x-It),R&&(Xe=N-ee.y-Dt),ot=he/x+H,ut=Xe/C+Y,dt=(he+It)/x+H,it=(Xe+Dt)/C+Y,yt=-O+G,Ft=-F+U}R=R^(!J&&y.isRenderTexture?1:0),I&&(st*=-1,yt+=T),R&&(at*=-1,Ft+=P),X.roundPixels&&(S=Math.floor(S),E=Math.floor(E)),rt.applyITRS(S,E,b,M,w),tt.copyFrom(X.matrix),$?(tt.multiplyWithOffset($,-X.scrollX*A,-X.scrollY*L),rt.e=S,rt.f=E):(rt.e-=X.scrollX*A,rt.f-=X.scrollY*L),tt.multiply(rt,et);var Jt=et.setQuad(yt,Ft,yt+st,Ft+at,X.renderRoundPixels);q==null&&(q=this.setTexture2D(y)),g&&!Q&&this.manager.preBatch(g),this.batchQuad(g,Jt[0],Jt[1],Jt[2],Jt[3],Jt[4],Jt[5],Jt[6],Jt[7],ot,ut,dt,it,k,D,V,B,W,y,q),g&&!Q&&this.manager.postBatch(g)},batchTextureFrame:function(g,y,x,C,S,E,T){this.manager.set(this);var P=this._tempMatrix1.copyFrom(E),M=this._tempMatrix2;T?P.multiply(T,M):M=P;var w=M.setQuad(y,x,y+g.width,x+g.height),b=this.setTexture2D(g.source.glTexture);C=d.getTintAppendFloatAlpha(C,S),this.batchQuad(null,w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],g.u0,g.v0,g.u1,g.v1,C,C,C,C,0,g.glTexture,b)},batchFillRect:function(g,y,x,C,S,E){this.renderer.pipelines.set(this);var T=this.calcMatrix;E&&E.multiply(S,T);var P=T.setQuad(g,y,g+x,y+C),M=this.fillTint;this.batchQuad(null,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],0,0,1,1,M.TL,M.TR,M.BL,M.BR,2)},batchFillTriangle:function(g,y,x,C,S,E,T,P){this.renderer.pipelines.set(this);var M=this.calcMatrix;P&&P.multiply(T,M);var w=M.getX(g,y),b=M.getY(g,y),I=M.getX(x,C),R=M.getY(x,C),A=M.getX(S,E),L=M.getY(S,E),O=this.fillTint;this.batchTri(null,w,b,I,R,A,L,0,0,1,1,O.TL,O.TR,O.BL,2)},batchStrokeTriangle:function(g,y,x,C,S,E,T,P,M){var w=this.tempTriangle;w[0].x=g,w[0].y=y,w[0].width=T,w[1].x=x,w[1].y=C,w[1].width=T,w[2].x=S,w[2].y=E,w[2].width=T,w[3].x=g,w[3].y=y,w[3].width=T,this.batchStrokePath(w,T,!1,P,M)},batchFillPath:function(g,y,x){this.renderer.pipelines.set(this);var C=this.calcMatrix;x&&x.multiply(y,C);for(var S=g.length,E=this.polygonCache,T,P,M=this.fillTint.TL,w=this.fillTint.TR,b=this.fillTint.BL,I=0;I<S;++I)P=g[I],E.push(P.x,P.y);T=p(E),S=T.length;for(var R=0;R<S;R+=3){var A=T[R+0]*2,L=T[R+1]*2,O=T[R+2]*2,F=E[A+0],G=E[A+1],U=E[L+0],z=E[L+1],N=E[O+0],k=E[O+1],D=C.getX(F,G),V=C.getY(F,G),B=C.getX(U,z),W=C.getY(U,z),H=C.getX(N,k),Y=C.getY(N,k);this.batchTri(null,D,V,B,W,H,Y,0,0,1,1,M,w,b,2)}E.length=0},batchStrokePath:function(g,y,x,C,S){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var E=g.length-1,T=0;T<E;T++){var P=g[T],M=g[T+1];this.batchLine(P.x,P.y,M.x,M.y,P.width/2,M.width/2,y,T,!x&&T===E-1,C,S)}},batchLine:function(g,y,x,C,S,E,T,P,M,w,b){this.renderer.pipelines.set(this);var I=this.calcMatrix;b&&b.multiply(w,I);var R=x-g,A=C-y,L=Math.sqrt(R*R+A*A);if(L!==0){var O=S*(C-y)/L,F=S*(g-x)/L,G=E*(C-y)/L,U=E*(g-x)/L,z=x-G,N=C-U,k=g-O,D=y-F,V=x+G,B=C+U,W=g+O,H=y+F,Y=I.getX(z,N),X=I.getY(z,N),$=I.getX(k,D),J=I.getY(k,D),q=I.getX(V,B),Q=I.getY(V,B),tt=I.getX(W,H),rt=I.getY(W,H),et=this.strokeTint,ot=et.TL,ut=et.TR,dt=et.BL,it=et.BR;if(this.batchQuad(null,tt,rt,$,J,Y,X,q,Q,0,0,1,1,ot,ut,dt,it,2),!(T<=2)){var st=this.prevQuad,at=this.firstQuad;P>0&&st[4]?this.batchQuad(null,tt,rt,$,J,st[0],st[1],st[2],st[3],0,0,1,1,ot,ut,dt,it,2):(at[0]=tt,at[1]=rt,at[2]=$,at[3]=J,at[4]=1),M&&at[4]?this.batchQuad(null,Y,X,q,Q,at[0],at[1],at[2],at[3],0,0,1,1,ot,ut,dt,it,2):(st[0]=Y,st[1]=X,st[2]=q,st[3]=Q,st[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,c.prototype.destroy.call(this),this}});n.exports=m},43439:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(4127),u=r(89924),f=r(29100),l=new a({Extends:f,initialize:function(v){v.vertShader=p(v,"vertShader",u),v.fragShader=p(v,"fragShader",h),v.attributes=p(v,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),f.call(this,v)},onRender:function(d,v){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",v.zoom)},batchPointLight:function(d,v,c,m,g,y,x,C,S,E,T,P){var M=d.color,w=d.intensity,b=d.radius,I=d.attenuation,R=M.r*w,A=M.g*w,L=M.b*w,O=v.alpha*d.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(c,m,T,P,b,I,R,A,L,O),this.batchLightVert(g,y,T,P,b,I,R,A,L,O),this.batchLightVert(x,C,T,P,b,I,R,A,L,O),this.batchLightVert(c,m,T,P,b,I,R,A,L,O),this.batchLightVert(x,C,T,P,b,I,R,A,L,O),this.batchLightVert(S,E,T,P,b,I,R,A,L,O),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(d,v,c,m,g,y,x,C,S,E){var T=this.vertexViewF32,P=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++P]=d,T[++P]=v,T[++P]=c,T[++P]=m,T[++P]=g,T[++P]=y,T[++P]=x,T[++P]=C,T[++P]=S,T[++P]=E,this.vertexCount++}});n.exports=l},84057:(n,o,r)=>{var a=r(83419),p=r(89422),h=r(95540),u=r(27681),f=r(49627),l=r(29100),d=new a({Extends:l,initialize:function(c){c.renderTarget=h(c,"renderTarget",1),c.fragShader=h(c,"fragShader",u),c.vertShader=h(c,"vertShader",f),c.attributes=h(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),c.batchSize=1,c.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],l.call(this,c),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new p,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){l.prototype.boot.call(this);var v=this.manager.UTILITY_PIPELINE;this.fullFrame1=v.fullFrame1,this.fullFrame2=v.fullFrame2,this.halfFrame1=v.halfFrame1,this.halfFrame2=v.halfFrame2;var c=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",c.width,c.height);for(var m=this.renderTargets,g=0;g<m.length;g++)m[g].autoResize=!0},postBatch:function(v){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(v),this},onDraw:function(v){this.bindAndDraw(v)},getController:function(v){return v!==void 0?v:this.controller?this.controller:this},copySprite:function(v,c,m){m===void 0&&(m=!1);var g=this.gl;g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,v.texture.webGLTexture);var y=g.getParameter(g.FRAMEBUFFER_BINDING);g.bindFramebuffer(g.FRAMEBUFFER,c.framebuffer.webGLFramebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,c.texture.webGLTexture,0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),m&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,y))},copyFrame:function(v,c,m,g,y){this.manager.copyFrame(v,c,m,g,y)},copyToGame:function(v){this.manager.copyToGame(v)},drawFrame:function(v,c,m){this.manager.drawFrame(v,c,m,this.colorMatrix)},blendFrames:function(v,c,m,g,y){this.manager.blendFrames(v,c,m,g,y)},blendFramesAdditive:function(v,c,m,g,y){this.manager.blendFramesAdditive(v,c,m,g,y)},clearFrame:function(v,c){this.manager.clearFrame(v,c)},blitFrame:function(v,c,m,g,y,x){this.manager.blitFrame(v,c,m,g,y,x)},copyFrameRect:function(v,c,m,g,y,x,C,S){this.manager.copyFrameRect(v,c,m,g,y,x,C,S)},bindAndDraw:function(v,c,m,g,y){m===void 0&&(m=!0),g===void 0&&(g=!0);var x=this.gl,C=this.renderer;this.bind(y),this.set1i("uMainSampler",0),c?(x.viewport(0,0,c.width,c.height),x.bindFramebuffer(x.FRAMEBUFFER,c.framebuffer.webGLFramebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,c.texture.webGLTexture,0),m&&(g?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT))):(C.popFramebuffer(!1,!1),C.currentFramebuffer||x.viewport(0,0,C.width,C.height)),C.restoreStencilMask(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,v.texture.webGLTexture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),c&&(x.bindTexture(x.TEXTURE_2D,null),x.bindFramebuffer(x.FRAMEBUFFER,C.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),l.prototype.destroy.call(this),this}});n.exports=d},43558:(n,o,r)=>{var a=r(10312),p=r(67502),h=r(83419),u=r(96293),f=r(95540),l=r(57516),d=r(27681),v=r(87841),c=r(32302),m=r(45561),g=r(60722),y=r(29100),x=new h({Extends:l,initialize:function(S){var E=f(S,"fragShader",d),T=f(S,"vertShader",g),P=f(S,"drawShader",d),M=[{name:"DrawSprite",fragShader:m,vertShader:g},{name:"CopySprite",fragShader:E,vertShader:T},{name:"DrawGame",fragShader:P,vertShader:g},{name:"ColorMatrix",fragShader:u}],w=f(S,"shaders",[]);S.shaders=M.concat(w),S.vertShader||(S.vertShader=T),S.batchSize=1,l.call(this,S),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new v,this.targetBounds=new v,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){y.prototype.boot.call(this);var C=this.shaders,S=this.renderer;this.drawSpriteShader=C[0],this.copyShader=C[1],this.gameShader=C[2],this.colorMatrixShader=C[3],this.fsTarget=new c(S,S.width,S.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var E=new ArrayBuffer(168);this.quadVertexData=E,this.quadVertexViewF32=new Float32Array(E),this.quadVertexBuffer=S.createVertexBuffer(E,this.gl.STATIC_DRAW),this.onResize(S.width,S.height),this.currentShader=this.copyShader,this.set2f("uResolution",S.width,S.height)},onResize:function(C,S){var E=this.quadVertexViewF32;E[1]=S,E[22]=S,E[14]=C,E[28]=C,E[35]=C,E[36]=S},batchQuad:function(C,S,E,T,P,M,w,b,I,R,A,L,O,F,G,U,z,N,k){var D=Math.min(S,T,M,b),V=Math.min(E,P,w,I),B=Math.max(S,T,M,b),W=Math.max(E,P,w,I),H=B-D,Y=W-V,X=this.spriteBounds.setTo(D,V,H,Y),$=C?C.preFX.padding:0,J=H+$*2,q=Y+$*2,Q=Math.abs(Math.max(J,q)),tt=this.manager.getRenderTarget(Q),rt=this.targetBounds.setTo(0,0,tt.width,tt.height);p(rt,Math.round(X.centerX),Math.round(X.centerY)),this.tempSprite=C;var et=this.gl,ot=this.renderer;ot.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",ot.width,ot.height),this.flipProjectionMatrix(!0),C&&(this.onDrawSprite(C,tt),C.preFX.onFX(this));var ut=this.fsTarget;return this.flush(),et.viewport(0,0,ot.width,ot.height),et.bindFramebuffer(et.FRAMEBUFFER,ut.framebuffer.webGLFramebuffer),et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_2D,ut.texture.webGLTexture,0),et.clearColor(0,0,0,0),et.clear(et.COLOR_BUFFER_BIT),this.setTexture2D(k),this.batchVert(S,E,R,A,0,N,F),this.batchVert(T,P,R,O,0,N,U),this.batchVert(M,w,L,O,0,N,z),this.batchVert(S,E,R,A,0,N,F),this.batchVert(M,w,L,O,0,N,z),this.batchVert(b,I,L,A,0,N,G),this.flush(),this.flipProjectionMatrix(!1),et.activeTexture(et.TEXTURE0),et.bindTexture(et.TEXTURE_2D,tt.texture.webGLTexture),et.copyTexSubImage2D(et.TEXTURE_2D,0,0,0,rt.x,rt.y,rt.width,rt.height),et.bindFramebuffer(et.FRAMEBUFFER,null),et.bindTexture(et.TEXTURE_2D,null),this.onBatch(C),this.currentShader=this.copyShader,this.onDraw(tt,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(C,S,E,T,P,M,w){E===void 0&&(E=!0),T===void 0&&(T=!0),P===void 0&&(P=!1),w===void 0&&(w=this.copyShader);var b=this.gl,I=this.tempSprite;M&&(w=this.colorMatrixShader),this.currentShader=w;var R=this.setVertexBuffer(this.quadVertexBuffer);w.bind(R,!1);var A=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",A.width,A.height),I.preFX.onFXCopy(this),this.onCopySprite(C,S,I),M&&(this.set1fv("uColorMatrix",M.getData()),this.set1f("uAlpha",M.alpha)),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,C.texture.webGLTexture),C.height>S.height)b.viewport(0,0,C.width,C.height),this.setTargetUVs(C,S);else{var L=S.height-C.height;b.viewport(0,L,C.width,C.height),this.resetUVs()}if(b.bindFramebuffer(b.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,S.texture.webGLTexture,0),E&&(b.clearColor(0,0,0,+!T),b.clear(b.COLOR_BUFFER_BIT)),P){var O=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}b.bufferData(b.ARRAY_BUFFER,this.quadVertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),P&&this.renderer.setBlendMode(O),b.bindFramebuffer(b.FRAMEBUFFER,null)},copy:function(C,S){var E=this.gl;this.set1i("uMainSampler",0),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,C.texture.webGLTexture),E.viewport(0,0,C.width,C.height),this.setUVs(0,0,0,1,1,1,1,0),E.bindFramebuffer(E.FRAMEBUFFER,S.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,S.texture.webGLTexture,0),E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.quadVertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null)},blendFrames:function(C,S,E,T,P){this.manager.blendFrames(C,S,E,T,P)},blendFramesAdditive:function(C,S,E,T,P){this.manager.blendFramesAdditive(C,S,E,T,P)},drawToGame:function(C){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(C)},copyToGame:function(C){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(C)},bindAndDraw:function(C){var S=this.gl,E=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(C.texture);var T=this._tempMatrix1.loadIdentity(),P=this.targetBounds.x,M=this.targetBounds.y,w=P+C.width,b=M+C.height,I=T.getX(P,M),R=T.getX(P,b),A=T.getX(w,b),L=T.getX(w,M),O=T.getY(P,M),F=T.getY(P,b),G=T.getY(w,b),U=T.getY(w,M),z=16777215;this.batchVert(I,O,0,0,0,0,z),this.batchVert(R,F,0,1,0,0,z),this.batchVert(A,G,1,1,0,0,z),this.batchVert(I,O,0,0,0,0,z),this.batchVert(A,G,1,1,0,0,z),this.batchVert(L,U,1,0,0,0,z),E.restoreFramebuffer(!1,!0),E.currentFramebuffer||S.viewport(0,0,E.width,E.height),E.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(C){this.drawToGame(C)},setUVs:function(C,S,E,T,P,M,w,b){var I=this.quadVertexViewF32;I[2]=C,I[3]=S,I[9]=E,I[10]=T,I[16]=P,I[17]=M,I[23]=C,I[24]=S,I[30]=P,I[31]=M,I[37]=w,I[38]=b},setTargetUVs:function(C,S){var E=S.height/C.height;E>.5?E=.5-(E-.5):E=.5+(.5-E),this.setUVs(0,E,0,1+E,1,1+E,1,E)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,l.prototype.destroy.call(this),this}});n.exports=x},81041:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(57516),u=new a({Extends:h,initialize:function(l){l.topology=5,l.batchSize=p(l,"batchSize",256),h.call(this,l)}});n.exports=u},12385:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(57516),u=r(45561),f=r(60722),l=r(29100),d=new a({Extends:h,initialize:function(c){c.fragShader=p(c,"fragShader",u),c.vertShader=p(c,"vertShader",f),c.forceZero=!0,h.call(this,c)},boot:function(){l.prototype.boot.call(this);var v=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",v.width,v.height)}});n.exports=d},7589:(n,o,r)=>{var a=r(35407),p=r(10312),h=r(83419),u=r(89422),f=r(96293),l=r(36682),d=r(95540),v=r(48247),c=r(49627),m=r(29100),g=new h({Extends:m,initialize:function(x){x.renderTarget=d(x,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),x.vertShader=d(x,"vertShader",c),x.shaders=d(x,"shaders",[{name:"Copy",fragShader:l},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:v},{name:"ColorMatrix",fragShader:f}]),x.attributes=d(x,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),x.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],x.batchSize=1,m.call(this,x),this.colorMatrix=new u,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){m.prototype.boot.call(this);var y=this.shaders,x=this.renderTargets;this.copyShader=y[0],this.addShader=y[1],this.linearShader=y[2],this.colorMatrixShader=y[3],this.fullFrame1=x[0],this.fullFrame2=x[1],this.halfFrame1=x[2],this.halfFrame2=x[3]},copyFrame:function(y,x,C,S,E){C===void 0&&(C=1),S===void 0&&(S=!0),E===void 0&&(E=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,y.texture.webGLTexture),x?(T.viewport(0,0,x.width,x.height),T.bindFramebuffer(T.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,x.texture.webGLTexture,0)):T.viewport(0,0,y.width,y.height),S&&(E?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(y,x,C,S,E,T,P){C===void 0&&(C=1),S===void 0&&(S=!0),E===void 0&&(E=!0),T===void 0&&(T=!1),P===void 0&&(P=!1);var M=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",C),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,y.texture.webGLTexture),y.height>x.height)M.viewport(0,0,y.width,y.height),this.setTargetUVs(y,x);else{var w=x.height-y.height;M.viewport(0,w,y.width,y.height)}if(M.bindFramebuffer(M.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,x.texture.webGLTexture,0),S&&(E?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),T){var b=this.renderer.currentBlendMode;this.renderer.setBlendMode(p.ERASE)}P&&this.flipY(),M.bufferData(M.ARRAY_BUFFER,this.vertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),T&&this.renderer.setBlendMode(b),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(y,x,C,S,E,T,P,M){P===void 0&&(P=!0),M===void 0&&(M=!0);var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,y.texture.webGLTexture,0),P&&(M?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,x.texture.webGLTexture),w.copyTexSubImage2D(w.TEXTURE_2D,0,0,0,C,S,E,T),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},copyToGame:function(y){var x=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,y.texture.webGLTexture),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6)},drawFrame:function(y,x,C,S){C===void 0&&(C=!0),S===void 0&&(S=this.colorMatrix);var E=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",S.getData()),this.set1f("uAlpha",S.alpha),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,y.texture.webGLTexture),x?(E.viewport(0,0,x.width,x.height),E.bindFramebuffer(E.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,x.texture.webGLTexture,0)):E.viewport(0,0,y.width,y.height),C?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT),E.bufferData(E.ARRAY_BUFFER,this.vertexData,E.STATIC_DRAW),E.drawArrays(E.TRIANGLES,0,6),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},blendFrames:function(y,x,C,S,E,T){S===void 0&&(S=1),E===void 0&&(E=!0),T===void 0&&(T=this.linearShader);var P=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",S),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,y.texture.webGLTexture),P.activeTexture(P.TEXTURE1),P.bindTexture(P.TEXTURE_2D,x.texture.webGLTexture),C?(P.bindFramebuffer(P.FRAMEBUFFER,C.framebuffer.webGLFramebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,C.texture.webGLTexture,0),P.viewport(0,0,C.width,C.height)):P.viewport(0,0,y.width,y.height),E?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null)},blendFramesAdditive:function(y,x,C,S,E){this.blendFrames(y,x,C,S,E,this.addShader)},clearFrame:function(y,x){x===void 0&&(x=!0);var C=this.gl;C.viewport(0,0,y.width,y.height),C.bindFramebuffer(C.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),x?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT);var S=this.renderer.currentFramebuffer;C.bindFramebuffer(C.FRAMEBUFFER,S.webGLFramebuffer)},setUVs:function(y,x,C,S,E,T,P,M){var w=this.vertexViewF32;w[2]=y,w[3]=x,w[6]=C,w[7]=S,w[10]=E,w[11]=T,w[14]=y,w[15]=x,w[18]=E,w[19]=T,w[22]=P,w[23]=M},setTargetUVs:function(y,x){var C=x.height/y.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});n.exports=g},36060:n=>{var o={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};n.exports=o},84817:n=>{n.exports="pipelineafterflush"},36712:n=>{n.exports="pipelinebeforeflush"},40285:n=>{n.exports="pipelinebind"},65918:n=>{n.exports="pipelineboot"},92852:n=>{n.exports="pipelinedestroy"},56072:n=>{n.exports="pipelinerebind"},57566:n=>{n.exports="pipelineresize"},77085:(n,o,r)=>{n.exports={AFTER_FLUSH:r(84817),BEFORE_FLUSH:r(36712),BIND:r(40285),BOOT:r(65918),DESTROY:r(92852),REBIND:r(56072),RESIZE:r(57566)}},54812:(n,o,r)=>{var a=r(83419),p=r(99155),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.amount=1},onPreRender:function(f,l){f=this.getController(f),this.set1f("amount",f.amount,l)}});n.exports=u},67329:(n,o,r)=>{var a=r(83419),p=r(24400),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(f){f=this.getController(f),this.set1f("strength",f.blurStrength),this.set3fv("color",f.glcolor)},onDraw:function(f){var l=this.getController(),d=this.fullFrame1,v=this.fullFrame2;this.copyFrame(f,v);for(var c=2/f.width*l.offsetX,m=2/f.height*l.offsetY,g=0;g<l.steps;g++)this.set2f("offset",c,0),this.copySprite(f,d),this.set2f("offset",0,m),this.copySprite(d,f);this.blendFrames(v,f,d,l.strength),this.copyToGame(d)}});n.exports=u},8861:(n,o,r)=>{var a=r(83419),p=r(41514),h=r(51078),u=r(94328),f=r(84057),l=new a({Extends:f,initialize:function(v){f.call(this,{game:v,shaders:[{name:"Gaussian5",fragShader:p},{name:"Gaussian9",fragShader:h},{name:"Gaussian13",fragShader:u}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(d){var v=this.getController(),c=this.gl,m=this.fullFrame1,g=c.getParameter(c.FRAMEBUFFER_BINDING);this.bind(this.shaders[v.quality]),c.activeTexture(c.TEXTURE0),c.viewport(0,0,d.width,d.height),this.set1i("uMainSampler",0),this.set2f("resolution",d.width,d.height),this.set1f("strength",v.strength),this.set3fv("color",v.glcolor);for(var y=0;y<v.steps;y++)this.set2f("offset",v.x,0),this.copySprite(d,m),this.set2f("offset",0,v.y),this.copySprite(m,d);c.bindFramebuffer(c.FRAMEBUFFER,g),c.bindTexture(c.TEXTURE_2D,null),this.copyToGame(d)}});n.exports=l},51051:(n,o,r)=>{var a=r(83419),p=r(90610),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(f,l,d,v){f=this.getController(f),this.set1f("radius",f.radius,l),this.set1f("amount",f.amount,l),this.set1f("contrast",f.contrast,l),this.set1f("strength",f.strength,l),this.set2f("blur",f.blurX,f.blurY,l),this.setBoolean("isTiltShift",f.isTiltShift,l),d&&v&&this.set2f("resolution",d,v,l)},onDraw:function(f){this.set2f("resolution",f.width,f.height),this.bindAndDraw(f)}});n.exports=u},89428:(n,o,r)=>{var a=r(83419),p=r(91899),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(f,l,d,v){f=this.getController(f),this.set1f("scale",f.scale,l),this.set1f("feather",f.feather,l),this.set1f("thickness",f.thickness,l),this.set3fv("color",f.glcolor,l),this.set4fv("backgroundColor",f.glcolor2,l),d&&v&&this.set2f("resolution",d,v,l)},onDraw:function(f){this.set2f("resolution",f.width,f.height),this.bindAndDraw(f)}});n.exports=u},88904:(n,o,r)=>{var a=r(83419),p=r(84057),h=new a({Extends:p,initialize:function(f){p.call(this,{game:f})},onDraw:function(u){var f=this.fullFrame1;this.controller?this.manager.drawFrame(u,f,!0,this.controller):this.drawFrame(u,f),this.copyToGame(f)}});n.exports=h},63563:(n,o,r)=>{var a=r(83419),p=r(47838),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(f){var l=this.game.textures.getFrame(f);l&&(this.glTexture=l.glTexture)},onDraw:function(f){var l=this.getController(),d=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",l.x,l.y),this.bindTexture(l.glTexture,1),this.copySprite(f,d),this.copyToGame(d)}});n.exports=u},94045:(n,o,r)=>{var a=r(83419),p=r(95540),h=r(98656),u=r(84057),f=r(70554),l=new a({Extends:u,initialize:function(v,c){var m=p(c,"quality",.1),g=p(c,"distance",10);u.call(this,{game:v,fragShader:f.setGlowQuality(h,v,m,g)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(d,v,c,m){d=this.getController(d),this.set1f("outerStrength",d.outerStrength,v),this.set1f("innerStrength",d.innerStrength,v),this.set4fv("glowColor",d.glcolor,v),this.setBoolean("knockout",d.knockout,v),c&&m&&this.set2f("resolution",c,m,v)},onDraw:function(d){this.set2f("resolution",d.width,d.height),this.bindAndDraw(d)}});n.exports=l},74088:(n,o,r)=>{var a=r(83419),p=r(70463),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(f,l){f=this.getController(f),this.set1f("alpha",f.alpha,l),this.set1i("size",f.size,l),this.set3fv("color1",f.glcolor1,l),this.set3fv("color2",f.glcolor2,l),this.set2f("positionFrom",f.fromX,f.fromY,l),this.set2f("positionTo",f.toX,f.toY,l)}});n.exports=u},99636:(n,o,r)=>{var a=r(83419),p=r(50831),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.amount=1},onPreRender:function(f,l,d,v){f=this.getController(f),this.set1f("amount",f.amount,l),d&&v&&this.set2f("resolution",d,v,l)},onDraw:function(f){this.set2f("resolution",f.width,f.height),this.bindAndDraw(f)}});n.exports=u},34700:(n,o,r)=>{var a=r(83419),p=r(92595),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(f,l){f=this.getController(f);var d=f.samples;this.set1i("samples",d,l),this.set1f("intensity",f.intensity,l),this.set1f("decay",f.decay,l),this.set1f("power",f.power/d,l),this.set2f("lightPosition",f.x,f.y,l),this.set4fv("color",f.glcolor,l)}});n.exports=u},91157:(n,o,r)=>{var a=r(83419),p=r(72464),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(f,l,d,v){f=this.getController(f),this.setTime("time",l),this.set1f("speed",f.speed,l),this.set1f("lineWidth",f.lineWidth,l),this.set1f("gradient",f.gradient,l),this.setBoolean("reveal",f.reveal,l),d&&v&&this.set2f("resolution",d,v,l)},onDraw:function(f){this.set2f("resolution",f.width,f.height),this.bindAndDraw(f)}});n.exports=u},27797:(n,o,r)=>{var a=r(83419),p=r(39249),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(f,l){f=this.getController(f),this.set1f("radius",f.radius,l),this.set1f("strength",f.strength,l),this.set2f("position",f.x,f.y,l)}});n.exports=u},67603:(n,o,r)=>{var a=r(83419),p=r(2878),h=r(84057),u=new a({Extends:h,initialize:function(l){h.call(this,{game:l,fragShader:p}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(f,l){f=this.getController(f);var d=f.progress,v=f.wipeWidth,c=f.direction,m=f.axis;this.set4f("config",d,v,c,m,l),this.setBoolean("reveal",f.reveal,l)}});n.exports=u},58918:(n,o,r)=>{var a={Barrel:r(54812),Bloom:r(67329),Blur:r(8861),Bokeh:r(51051),Circle:r(89428),ColorMatrix:r(88904),Displacement:r(63563),Glow:r(94045),Gradient:r(74088),Pixelate:r(99636),Shadow:r(34700),Shine:r(91157),Vignette:r(27797),Wipe:r(67603)};n.exports=a},96615:(n,o,r)=>{var a=r(36060),p=r(79291),h={FX:r(58918),BitmapMaskPipeline:r(31302),Events:r(77085),FXPipeline:r(92651),LightPipeline:r(96569),MobilePipeline:r(56527),MultiPipeline:r(57516),PointLightPipeline:r(43439),PostFXPipeline:r(84057),PreFXPipeline:r(43558),RopePipeline:r(81041),SinglePipeline:r(12385),UtilityPipeline:r(7589)};h=p(!1,h,a),n.exports=h},35407:n=>{n.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:n=>{n.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:n=>{n.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:n=>{n.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:n=>{n.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:n=>{n.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:n=>{n.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:n=>{n.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:n=>{n.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:n=>{n.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:n=>{n.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:n=>{n.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:n=>{n.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:n=>{n.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:n=>{n.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:n=>{n.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:n=>{n.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:n=>{n.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:n=>{n.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:n=>{n.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:n=>{n.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:n=>{n.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:n=>{n.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:n=>{n.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:n=>{n.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:n=>{n.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:n=>{n.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:n=>{n.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:n=>{n.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:n=>{n.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:n=>{n.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:n=>{n.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:n=>{n.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:n=>{n.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(n,o,r)=>{n.exports={AddBlendFrag:r(35407),BitmapMaskFrag:r(78908),BitmapMaskVert:r(85191),ColorMatrixFrag:r(96293),CopyFrag:r(36682),FXBarrelFrag:r(99155),FXBloomFrag:r(24400),FXBlurHighFrag:r(94328),FXBlurLowFrag:r(41514),FXBlurMedFrag:r(51078),FXBokehFrag:r(90610),FXCircleFrag:r(91899),FXDisplacementFrag:r(47838),FXGlowFrag:r(98656),FXGradientFrag:r(70463),FXPixelateFrag:r(50831),FXShadowFrag:r(92595),FXShineFrag:r(72464),FXVignetteFrag:r(39249),FXWipeFrag:r(2878),LightFrag:r(31063),LinearBlendFrag:r(48247),MeshFrag:r(41214),MeshVert:r(39653),MobileFrag:r(62143),MobileVert:r(47940),MultiFrag:r(98840),MultiVert:r(44667),PointLightFrag:r(4127),PointLightVert:r(89924),PostFXFrag:r(27681),QuadVert:r(49627),SingleFrag:r(45561),SingleVert:r(60722)}},93567:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l){this.webGLAttribLocation=-1,this.gl=u,this.program=f,this.name=l,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var h=this.gl;h.isContextLost()||(this.webGLAttribLocation=h.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});n.exports=p},26128:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d){this.webGLBuffer=null,this.gl=u,this.initialDataOrSize=f,this.bufferType=l,this.bufferUsage=d,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var h=this.gl;if(!h.isContextLost()){var u=this.bufferType,f=h.createBuffer();this.webGLBuffer=f,h.bindBuffer(u,this.webGLBuffer),h.bufferData(u,this.initialDataOrSize,this.bufferUsage),h.bindBuffer(u,null)}}},destroy:function(){var h=this.gl;h.isContextLost()||h.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});n.exports=p},84387:(n,o,r)=>{var a=r(83419),p={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},h=new a({initialize:function(f,l,d,v,c){this.webGLFramebuffer=null,this.gl=f,this.width=l,this.height=d,this.renderTexture=v,this.addDepthStencilBuffer=!!c,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var f=this.renderTexture,l=0,d=u.createFramebuffer();if(this.webGLFramebuffer=d,u.bindFramebuffer(u.FRAMEBUFFER,d),f.isRenderTexture=!0,f.isAlphaPremultiplied=!1,u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,f.webGLTexture,0),l=u.checkFramebufferStatus(u.FRAMEBUFFER),l!==u.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(p[l]||l));if(this.addDepthStencilBuffer){var v=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,v),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,this.width,this.height),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,v)}u.bindFramebuffer(u.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var u=this.gl;if(!u.isContextLost()){u.bindFramebuffer(u.FRAMEBUFFER,this.webGLFramebuffer);var f=u.getFramebufferAttachmentParameter(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);f!==null&&(u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,null,0),u.deleteTexture(f));var l=u.getFramebufferAttachmentParameter(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);l!==null&&u.deleteRenderbuffer(l),u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});n.exports=h},1482:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l){this.webGLProgram=null,this.gl=u,this.vertexSource=f,this.fragmentSource=l,this.createResource()},createResource:function(){var h=this.gl;if(!h.isContextLost()){var u=h.createProgram(),f=h.createShader(h.VERTEX_SHADER),l=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(f,this.vertexSource),h.shaderSource(l,this.fragmentSource),h.compileShader(f),h.compileShader(l);var d=`Shader failed:
`;if(!h.getShaderParameter(f,h.COMPILE_STATUS))throw new Error("Vertex "+d+h.getShaderInfoLog(f));if(!h.getShaderParameter(l,h.COMPILE_STATUS))throw new Error("Fragment "+d+h.getShaderInfoLog(l));if(h.attachShader(u,f),h.attachShader(u,l),h.linkProgram(u),!h.getProgramParameter(u,h.LINK_STATUS))throw new Error("Link "+d+h.getProgramInfoLog(u));h.useProgram(u),this.webGLProgram=u}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});n.exports=p},82751:(n,o,r)=>{var a=r(83419),p=r(50030),h=new a({initialize:function(f,l,d,v,c,m,g,y,x,C,S,E,T){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=f,this.mipLevel=l,this.minFilter=d,this.magFilter=v,this.wrapT=c,this.wrapS=m,this.format=g,this.pixels=y,this.width=x,this.height=C,this.pma=S??!0,this.forceSize=!!E,this.flipY=!!T,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){if(this.pixels instanceof h){this.webGLTexture=this.pixels.webGLTexture;return}var f=u.createTexture();f.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=f,this._processTexture()}},update:function(u,f,l,d,v,c,m,g,y){if(!(f===0||l===0)){this.pixels=u,this.width=f,this.height=l,this.flipY=d,this.wrapS=v,this.wrapT=c,this.minFilter=m,this.magFilter=g,this.format=y;var x=this.gl;x.isContextLost()||this._processTexture()}},_processTexture:function(){var u=this.gl;u.activeTexture(u.TEXTURE0);var f=u.getParameter(u.TEXTURE_BINDING_2D);u.bindTexture(u.TEXTURE_2D,this.webGLTexture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.minFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.magFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.wrapS),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.wrapT),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,this.flipY);var l=this.pixels,d=this.mipLevel,v=this.width,c=this.height,m=this.format,g=!1;if(l==null)u.texImage2D(u.TEXTURE_2D,d,m,v,c,0,m,u.UNSIGNED_BYTE,null),g=p(v,c);else if(l.compressed){v=l.width,c=l.height,g=l.generateMipmap;for(var y=0;y<l.mipmaps.length;y++)u.compressedTexImage2D(u.TEXTURE_2D,y,l.internalFormat,l.mipmaps[y].width,l.mipmaps[y].height,0,l.mipmaps[y].data)}else l instanceof Uint8Array?(u.texImage2D(u.TEXTURE_2D,d,m,v,c,0,m,u.UNSIGNED_BYTE,l),g=p(v,c)):(this.forceSize||(v=l.width,c=l.height),u.texImage2D(u.TEXTURE_2D,d,m,m,u.UNSIGNED_BYTE,l),g=p(v,c));g&&u.generateMipmap(u.TEXTURE_2D),f?u.bindTexture(u.TEXTURE_2D,f):u.bindTexture(u.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(u){this.__SPECTOR_Metadata=u,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=u)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof h||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});n.exports=h},57183:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l){this.webGLUniformLocation=null,this.gl=u,this.program=f,this.name=l,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var h=this.gl;h.isContextLost()||(this.webGLUniformLocation=h.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});n.exports=p},9503:(n,o,r)=>{var a={WebGLAttribLocationWrapper:r(93567),WebGLBufferWrapper:r(26128),WebGLProgramWrapper:r(1482),WebGLTextureWrapper:r(82751),WebGLFramebufferWrapper:r(84387),WebGLUniformLocationWrapper:r(57183)};n.exports=a},76531:(n,o,r)=>{var a=r(13560),p=r(83419),h=r(45319),u=r(50792),f=r(97480),l=r(8443),d=r(57811),v=r(74403),c=r(45818),m=r(29747),g=r(87841),y=r(86555),x=r(56583),C=r(26099),S=r(38058),E=new p({Extends:u,initialize:function(P){u.call(this),this.game=P,this.canvas,this.canvasBounds=new g,this.parent=null,this.parentIsWindow=!1,this.parentSize=new y,this.gameSize=new y,this.baseSize=new y,this.displaySize=new y,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new C(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:m,windowResize:m,fullScreenChange:m,fullScreenError:m}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var T=this.game;this.canvas=T.canvas,this.fullscreen=T.device.fullscreen;var P=this.scaleMode;P!==a.SCALE_MODE.RESIZE&&P!==a.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(P),P===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),T.events.on(l.PRE_STEP,this.step,this),T.events.once(l.READY,this.refresh,this),T.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(T){this.getParent(T),this.getParentBounds();var P=T.width,M=T.height,w=T.scaleMode,b=T.zoom,I=T.autoRound;if(typeof P=="string")if(P.substr(-1)!=="%")P=parseInt(P,10);else{var R=this.parentSize.width;R===0&&(R=window.innerWidth);var A=parseInt(P,10)/100;P=Math.floor(R*A)}if(typeof M=="string")if(M.substr(-1)!=="%")M=parseInt(M,10);else{var L=this.parentSize.height;L===0&&(L=window.innerHeight);var O=parseInt(M,10)/100;M=Math.floor(L*O)}this.scaleMode=w,this.autoRound=I,this.autoCenter=T.autoCenter,this.resizeInterval=T.resizeInterval,I&&(P=Math.floor(P),M=Math.floor(M)),this.gameSize.setSize(P,M),b===a.ZOOM.MAX_ZOOM&&(b=this.getMaxZoom()),this.zoom=b,b!==1&&(this._resetZoom=!0),this.baseSize.setSize(P,M),I&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),T.minWidth>0&&this.displaySize.setMin(T.minWidth*b,T.minHeight*b),T.maxWidth>0&&this.displaySize.setMax(T.maxWidth*b,T.maxHeight*b),this.displaySize.setSize(P,M),(T.snapWidth>0||T.snapHeight>0)&&this.displaySize.setSnap(T.snapWidth,T.snapHeight),this.orientation=c(P,M)},getParent:function(T){var P=T.parent;if(P!==null){if(this.parent=v(P),this.parentIsWindow=this.parent===document.body,T.expandParent&&T.scaleMode!==a.SCALE_MODE.NONE){var M=this.parent.getBoundingClientRect();(this.parentIsWindow||M.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",M=this.parent.getBoundingClientRect(),!this.parentIsWindow&&M.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}T.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=v(T.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var T=this.parentSize,P=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(P.height=d(!0));var M=P.width,w=P.height;if(T.width!==M||T.height!==w)return T.setSize(M,w),!0;if(this.canvas){var b=this.canvasBounds,I=this.canvas.getBoundingClientRect();if(I.x!==b.x||I.y!==b.y)return!0}return!1},lockOrientation:function(T){var P=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return P?P.call(screen,T):!1},setParentSize:function(T,P){return this.parentSize.setSize(T,P),this.refresh()},setGameSize:function(T,P){var M=this.autoRound;M&&(T=Math.floor(T),P=Math.floor(P));var w=this.width,b=this.height;return this.gameSize.resize(T,P),this.baseSize.resize(T,P),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(T/P),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(w,b)},resize:function(T,P){var M=this.zoom,w=this.autoRound;w&&(T=Math.floor(T),P=Math.floor(P));var b=this.width,I=this.height;this.gameSize.resize(T,P),this.baseSize.resize(T,P),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(T*M,P*M),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var R=this.canvas.style,A=T*M,L=P*M;return w&&(A=Math.floor(A),L=Math.floor(L)),(A!==T||L!==P)&&(R.width=A+"px",R.height=L+"px"),this.refresh(b,I)},setZoom:function(T){return this.zoom=T,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(T,P){return T===void 0&&(T=0),P===void 0&&(P=T),this.displaySize.setSnap(T,P),this.refresh()},refresh:function(T,P){T===void 0&&(T=this.width),P===void 0&&(P=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var M=this.game.domContainer;if(M){this.baseSize.setCSS(M);var w=this.canvas.style,b=M.style;b.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",b.marginLeft=w.marginLeft,b.marginTop=w.marginTop}return this.emit(f.RESIZE,this.gameSize,this.baseSize,this.displaySize,T,P),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var T=c(this.width,this.height);T!==this.orientation&&(this.orientation=T,this.emit(f.ORIENTATION_CHANGE,T))}},updateScale:function(){var T=this.canvas.style,P=this.gameSize.width,M=this.gameSize.height,w,b,I=this.zoom,R=this.autoRound;if(this.scaleMode===a.SCALE_MODE.NONE)this.displaySize.setSize(P*I,M*I),w=this.displaySize.width,b=this.displaySize.height,R&&(w=Math.floor(w),b=Math.floor(b)),this._resetZoom&&(T.width=w+"px",T.height=b+"px",this._resetZoom=!1);else if(this.scaleMode===a.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),w=this.displaySize.width,b=this.displaySize.height,R&&(w=Math.floor(w),b=Math.floor(b)),this.canvas.width=w,this.canvas.height=b;else if(this.scaleMode===a.SCALE_MODE.EXPAND){var A=this.game.config.width,L=this.game.config.height,O=this.parentSize.width,F=this.parentSize.height,G=O/A,U=F/L,z,N;G<U?(z=A,N=G!==0?F/G:L):(z=U!==0?O/U:A,N=L);var k=h(z,this.displaySize.minWidth,this.displaySize.maxWidth),D=h(N,this.displaySize.minHeight,this.displaySize.maxHeight);this.baseSize.setSize(k,D),this.gameSize.setSize(k,D),R&&(k=Math.floor(k),D=Math.floor(D)),this.canvas.width=k,this.canvas.height=D;var V=O*(k/z),B=F*(D/N);this.displaySize.setSize(V,B),w=this.displaySize.width,b=this.displaySize.height,R&&(w=Math.floor(w),b=Math.floor(b)),T.width=w+"px",T.height=b+"px"}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),w=this.displaySize.width,b=this.displaySize.height,R&&(w=Math.floor(w),b=Math.floor(b)),T.width=w+"px",T.height=b+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var T=x(this.parentSize.width,this.gameSize.width,0,!0),P=x(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(T,P),1)},updateCenter:function(){var T=this.autoCenter;if(T!==a.CENTER.NO_CENTER){var P=this.canvas,M=P.style,w=P.getBoundingClientRect(),b=w.width,I=w.height,R=Math.floor((this.parentSize.width-b)/2),A=Math.floor((this.parentSize.height-I)/2);T===a.CENTER.CENTER_HORIZONTALLY?A=0:T===a.CENTER.CENTER_VERTICALLY&&(R=0),M.marginLeft=R+"px",M.marginTop=A+"px"}},updateBounds:function(){var T=this.canvasBounds,P=this.canvas.getBoundingClientRect();T.x=P.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),T.y=P.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),T.width=P.width,T.height=P.height},transformX:function(T){return(T-this.canvasBounds.left)*this.displayScale.x},transformY:function(T){return(T-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(T){T===void 0&&(T={navigationUI:"hide"});var P=this.fullscreen;if(!P.available){this.emit(f.FULLSCREEN_UNSUPPORTED);return}if(!P.active){var M=this.getFullscreenTarget();P.keyboard?M[P.request](Element.ALLOW_KEYBOARD_INPUT):M[P.request](T)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(f.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(T){this.removeFullscreenTarget(),this.emit(f.FULLSCREEN_FAILED,T)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var T=document.createElement("div");T.style.margin="0",T.style.padding="0",T.style.width="100%",T.style.height="100%",this.fullscreenTarget=T,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var P=this.canvas.parentNode;P.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var T=this.fullscreenTarget;if(T&&T.parentNode){var P=T.parentNode;P.insertBefore(this.canvas,T),P.removeChild(T)}}},stopFullscreen:function(){var T=this.fullscreen;if(!T.available)return this.emit(f.FULLSCREEN_UNSUPPORTED),!1;T.active&&document[T.cancel](),this.removeFullscreenTarget()},leaveFullScreenSuccessHandler:function(){this.getParentBounds(),this.emit(f.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(T){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(T)},startListeners:function(){var T=this,P=this.domlisteners;if(P.orientationChange=function(){T.updateBounds(),T._checkOrientation=!0,T.dirty=!0,T.refresh()},P.windowResize=function(){T.updateBounds(),T.dirty=!0},screen.orientation&&screen.orientation.addEventListener?screen.orientation.addEventListener("change",P.orientationChange,!1):window.addEventListener("orientationchange",P.orientationChange,!1),window.addEventListener("resize",P.windowResize,!1),this.fullscreen.available){P.fullScreenChange=function(w){return T.onFullScreenChange(w)},P.fullScreenError=function(w){return T.onFullScreenError(w)};var M=["webkit","moz",""];M.forEach(function(w){document.addEventListener(w+"fullscreenchange",P.fullScreenChange,!1),document.addEventListener(w+"fullscreenerror",P.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",P.fullScreenChange,!1),document.addEventListener("MSFullscreenError",P.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():(this.stopFullscreen(),this.leaveFullScreenSuccessHandler())},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(T,P){T instanceof S||(P=T,T=void 0),P===void 0&&(P=new g);var M=this.baseSize,w=this.parentSize,b=this.canvasBounds,I=this.displayScale,R=b.x>=0?0:-(b.x*I.x),A=b.y>=0?0:-(b.y*I.y),L;w.width>=b.width?L=M.width:L=M.width-(b.width-w.width)*I.x;var O;return w.height>=b.height?O=M.height:O=M.height-(b.height-w.height)*I.y,P.setTo(R,A,L,O),T&&(P.width/=T.zoomX,P.height/=T.zoomY,P.centerX=T.centerX+T.scrollX,P.centerY=T.centerY+T.scrollY),P},step:function(T,P){this.parent&&(this._lastCheck+=P,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var T=this.domlisteners;screen.orientation&&screen.orientation.addEventListener?screen.orientation.removeEventListener("change",T.orientationChange,!1):window.removeEventListener("orientationchange",T.orientationChange,!1),window.removeEventListener("resize",T.windowResize,!1);var P=["webkit","moz",""];P.forEach(function(M){document.removeEventListener(M+"fullscreenchange",T.fullScreenChange,!1),document.removeEventListener(M+"fullscreenerror",T.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",T.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});n.exports=E},64743:n=>{n.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:n=>{n.exports={LANDSCAPE:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary"}},81050:n=>{n.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:n=>{n.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(n,o,r)=>{var a={CENTER:r(64743),ORIENTATION:r(39218),SCALE_MODE:r(81050),ZOOM:r(80805)};n.exports=a},56139:n=>{n.exports="enterfullscreen"},2336:n=>{n.exports="fullscreenfailed"},47412:n=>{n.exports="fullscreenunsupported"},51452:n=>{n.exports="leavefullscreen"},20666:n=>{n.exports="orientationchange"},47945:n=>{n.exports="resize"},97480:(n,o,r)=>{n.exports={ENTER_FULLSCREEN:r(56139),FULLSCREEN_FAILED:r(2336),FULLSCREEN_UNSUPPORTED:r(47412),LEAVE_FULLSCREEN:r(51452),ORIENTATION_CHANGE:r(20666),RESIZE:r(47945)}},93364:(n,o,r)=>{var a=r(79291),p=r(13560),h={Center:r(64743),Events:r(97480),Orientation:r(39218),ScaleManager:r(76531),ScaleModes:r(81050),Zoom:r(80805)};h=a(!1,h,p.CENTER),h=a(!1,h,p.ORIENTATION),h=a(!1,h,p.SCALE_MODE),h=a(!1,h,p.ZOOM),n.exports=h},27397:(n,o,r)=>{var a=r(95540),p=r(35355),h=function(u){var f=u.game.config.defaultPhysicsSystem,l=a(u.settings,"physics",!1);if(!(!f&&!l)){var d=[];if(f&&d.push(p(f+"Physics")),l)for(var v in l)v=p(v.concat("Physics")),d.indexOf(v)===-1&&d.push(v);return d}};n.exports=h},52106:(n,o,r)=>{var a=r(95540),p=function(h){var u=h.plugins.getDefaultScenePlugins(),f=a(h.settings,"plugins",!1);return Array.isArray(f)?f:u||[]};n.exports=p},87033:n=>{var o={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};n.exports=o},97482:(n,o,r)=>{var a=r(83419),p=r(2368),h=new a({initialize:function(f){this.sys=new p(this,f),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});n.exports=h},60903:(n,o,r)=>{var a=r(83419),p=r(89993),h=r(44594),u=r(8443),f=r(35154),l=r(54899),d=r(29747),v=r(97482),c=r(2368),m=new a({initialize:function(y,x){if(this.game=y,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,x){Array.isArray(x)||(x=[x]);for(var C=0;C<x.length;C++)this._pending.push({key:"default",scene:x[C],autoStart:C===0,data:{}})}y.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new v),this.game.events.emit(u.SYSTEM_READY,this.systemScene,this);var g,y,x,C;for(g=0;g<this._pending.length;g++){y=this._pending[g],x=y.key,C=y.scene;var S;C instanceof v?S=this.createSceneFromInstance(x,C):typeof C=="object"?S=this.createSceneFromObject(x,C):typeof C=="function"&&(S=this.createSceneFromFunction(x,C)),x=S.sys.settings.key,this.keys[x]=S,this.scenes.push(S),this._data[x]&&(S.sys.settings.data=this._data[x].data,this._data[x].autoStart&&(y.autoStart=!0)),(y.autoStart||S.sys.settings.active)&&this._start.push(x)}for(this._pending.length=0,this._data={},this.isBooted=!0,g=0;g<this._start.length;g++)y=this._start[g],this.start(y);this._start.length=0}},processQueue:function(){var g=this._pending.length,y=this._queue.length;if(!(g===0&&y===0)){var x,C;if(g){for(x=0;x<g;x++)C=this._pending[x],this.add(C.key,C.scene,C.autoStart,C.data);for(x=0;x<this._start.length;x++)C=this._start[x],this.start(C);this._start.length=0,this._pending.length=0}for(x=0;x<this._queue.length;x++)C=this._queue[x],this[C.op](C.keyA,C.keyB,C.data);this._queue.length=0}},add:function(g,y,x,C){if(x===void 0&&(x=!1),C===void 0&&(C={}),this.isProcessing||!this.isBooted)return this._pending.push({key:g,scene:y,autoStart:x,data:C}),this.isBooted||(this._data[g]={data:C}),null;g=this.getKey(g,y);var S;return y instanceof v?S=this.createSceneFromInstance(g,y):typeof y=="object"?(y.key=g,S=this.createSceneFromObject(g,y)):typeof y=="function"&&(S=this.createSceneFromFunction(g,y)),S.sys.settings.data=C,g=S.sys.settings.key,this.keys[g]=S,this.scenes.push(S),(x||S.sys.settings.active)&&(this._pending.length?this._start.push(g):this.start(g)),S},remove:function(g){if(this.isProcessing)return this.queueOp("remove",g);var y=this.getScene(g);if(!y||y.sys.isTransitioning())return this;var x=this.scenes.indexOf(y),C=y.sys.settings.key;return x>-1&&(delete this.keys[C],this.scenes.splice(x,1),this._start.indexOf(C)>-1&&(x=this._start.indexOf(C),this._start.splice(x,1)),y.sys.destroy()),this},bootScene:function(g){var y=g.sys,x=y.settings;y.sceneUpdate=d,g.init&&(g.init.call(g,x.data),x.status=p.INIT,x.isTransition&&y.events.emit(h.TRANSITION_INIT,x.transitionFrom,x.transitionDuration));var C;y.load&&(C=y.load,C.reset()),C&&g.preload?(g.preload.call(g),x.status=p.LOADING,C.once(l.COMPLETE,this.loadComplete,this),C.start()):this.create(g)},loadComplete:function(g){this.create(g.scene)},payloadComplete:function(g){this.bootScene(g.scene)},update:function(g,y){this.processQueue(),this.isProcessing=!0;for(var x=this.scenes.length-1;x>=0;x--){var C=this.scenes[x].sys;C.settings.status>p.START&&C.settings.status<=p.RUNNING&&C.step(g,y),C.scenePlugin&&C.scenePlugin._target&&C.scenePlugin.step(g,y)}},render:function(g){for(var y=0;y<this.scenes.length;y++){var x=this.scenes[y].sys;x.settings.visible&&x.settings.status>=p.LOADING&&x.settings.status<p.SLEEPING&&x.render(g)}this.isProcessing=!1},create:function(g){var y=g.sys,x=y.settings;g.create&&(x.status=p.CREATING,g.create.call(g,x.data),x.status===p.DESTROYED)||(x.isTransition&&y.events.emit(h.TRANSITION_START,x.transitionFrom,x.transitionDuration),g.update&&(y.sceneUpdate=g.update),x.status=p.RUNNING,y.events.emit(h.CREATE,g))},createSceneFromFunction:function(g,y){var x=new y;if(x instanceof v){var C=x.sys.settings.key;if(C!==""&&(g=C),this.keys.hasOwnProperty(g))throw new Error("Cannot add Scene with duplicate key: "+g);return this.createSceneFromInstance(g,x)}else return x.sys=new c(x),x.sys.settings.key=g,x.sys.init(this.game),x},createSceneFromInstance:function(g,y){var x=y.sys.settings.key;return x===""&&(y.sys.settings.key=g),y.sys.init(this.game),y},createSceneFromObject:function(g,y){var x=new v(y),C=x.sys.settings.key;C!==""?g=C:x.sys.settings.key=g,x.sys.init(this.game);for(var S=["init","preload","create","update","render"],E=0;E<S.length;E++){var T=f(y,S[E],null);T&&(x[S[E]]=T)}if(y.hasOwnProperty("extend")){for(var P in y.extend)if(y.extend.hasOwnProperty(P)){var M=y.extend[P];P==="data"&&x.hasOwnProperty("data")&&typeof M=="object"?x.data.merge(M):P!=="sys"&&(x[P]=M)}}return x},getKey:function(g,y){if(g||(g="default"),typeof y=="function")return g;if(y instanceof v?g=y.sys.settings.key:typeof y=="object"&&y.hasOwnProperty("key")&&(g=y.key),this.keys.hasOwnProperty(g))throw new Error("Cannot add Scene with duplicate key: "+g);return g},getScenes:function(g,y){g===void 0&&(g=!0),y===void 0&&(y=!1);for(var x=[],C=this.scenes,S=0;S<C.length;S++){var E=C[S];E&&(!g||g&&E.sys.isActive())&&x.push(E)}return y?x.reverse():x},getScene:function(g){if(typeof g=="string"){if(this.keys[g])return this.keys[g]}else for(var y=0;y<this.scenes.length;y++)if(g===this.scenes[y])return g;return null},isActive:function(g){var y=this.getScene(g);return y?y.sys.isActive():null},isPaused:function(g){var y=this.getScene(g);return y?y.sys.isPaused():null},isVisible:function(g){var y=this.getScene(g);return y?y.sys.isVisible():null},isSleeping:function(g){var y=this.getScene(g);return y?y.sys.isSleeping():null},pause:function(g,y){var x=this.getScene(g);return x&&x.sys.pause(y),this},resume:function(g,y){var x=this.getScene(g);return x&&x.sys.resume(y),this},sleep:function(g,y){var x=this.getScene(g);return x&&!x.sys.isTransitioning()&&x.sys.sleep(y),this},wake:function(g,y){var x=this.getScene(g);return x&&x.sys.wake(y),this},run:function(g,y){var x=this.getScene(g);if(!x){for(var C=0;C<this._pending.length;C++)if(this._pending[C].key===g){this.queueOp("start",g,y);break}return this}x.sys.isSleeping()?x.sys.wake(y):x.sys.isPaused()?x.sys.resume(y):this.start(g,y)},start:function(g,y){if(!this.isBooted)return this._data[g]={autoStart:!0,data:y},this;var x=this.getScene(g);if(!x)return console.warn("Scene key not found: "+g),this;var C=x.sys,S=C.settings.status;if(S>=p.START&&S<=p.CREATING)return this;if(S>=p.RUNNING&&S<=p.SLEEPING)C.shutdown(),C.sceneUpdate=d,C.start(y);else{C.sceneUpdate=d,C.start(y);var E;if(C.load&&(E=C.load),E&&C.settings.hasOwnProperty("pack")&&(E.reset(),E.addPack({payload:C.settings.pack})))return C.settings.status=p.LOADING,E.once(l.COMPLETE,this.payloadComplete,this),E.start(),this}return this.bootScene(x),this},stop:function(g,y){var x=this.getScene(g);if(x&&!x.sys.isTransitioning()&&x.sys.settings.status!==p.SHUTDOWN){var C=x.sys.load;C&&(C.off(l.COMPLETE,this.loadComplete,this),C.off(l.COMPLETE,this.payloadComplete,this)),x.sys.shutdown(y)}return this},switch:function(g,y,x){var C=this.getScene(g),S=this.getScene(y);return C&&S&&C!==S&&(this.sleep(g),this.isSleeping(y)?this.wake(y,x):this.start(y,x)),this},getAt:function(g){return this.scenes[g]},getIndex:function(g){var y=this.getScene(g);return this.scenes.indexOf(y)},bringToTop:function(g){if(this.isProcessing)return this.queueOp("bringToTop",g);var y=this.getIndex(g),x=this.scenes;if(y!==-1&&y<x.length){var C=this.getScene(g);x.splice(y,1),x.push(C)}return this},sendToBack:function(g){if(this.isProcessing)return this.queueOp("sendToBack",g);var y=this.getIndex(g);if(y!==-1&&y>0){var x=this.getScene(g);this.scenes.splice(y,1),this.scenes.unshift(x)}return this},moveDown:function(g){if(this.isProcessing)return this.queueOp("moveDown",g);var y=this.getIndex(g);if(y>0){var x=y-1,C=this.getScene(g),S=this.getAt(x);this.scenes[y]=S,this.scenes[x]=C}return this},moveUp:function(g){if(this.isProcessing)return this.queueOp("moveUp",g);var y=this.getIndex(g);if(y<this.scenes.length-1){var x=y+1,C=this.getScene(g),S=this.getAt(x);this.scenes[y]=S,this.scenes[x]=C}return this},moveAbove:function(g,y){if(g===y)return this;if(this.isProcessing)return this.queueOp("moveAbove",g,y);var x=this.getIndex(g),C=this.getIndex(y);if(x!==-1&&C!==-1&&C<x){var S=this.getAt(C);this.scenes.splice(C,1),this.scenes.splice(x+(C>x),0,S)}return this},moveBelow:function(g,y){if(g===y)return this;if(this.isProcessing)return this.queueOp("moveBelow",g,y);var x=this.getIndex(g),C=this.getIndex(y);if(x!==-1&&C!==-1&&C>x){var S=this.getAt(C);this.scenes.splice(C,1),x===0?this.scenes.unshift(S):this.scenes.splice(x-(C<x),0,S)}return this},queueOp:function(g,y,x,C){return this._queue.push({op:g,keyA:y,keyB:x,data:C}),this},swapPosition:function(g,y){if(g===y)return this;if(this.isProcessing)return this.queueOp("swapPosition",g,y);var x=this.getIndex(g),C=this.getIndex(y);if(x!==C&&x!==-1&&C!==-1){var S=this.getAt(x);this.scenes[x]=this.scenes[C],this.scenes[C]=S}return this},dump:function(){for(var g=[],y=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],x=0;x<this.scenes.length;x++){var C=this.scenes[x].sys,S=C.settings.visible&&(C.settings.status===p.RUNNING||C.settings.status===p.PAUSED)?"[*] ":"[-] ";S+=C.settings.key+" ("+y[C.settings.status]+")",g.push(S)}console.log(g.join(`
`))},destroy:function(){for(var g=0;g<this.scenes.length;g++){var y=this.scenes[g].sys;y.destroy()}this.systemScene.sys.destroy(),this.update=d,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});n.exports=m},52209:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(44594),u=r(95540),f=r(37277),l=new p({initialize:function(v){this.scene=v,this.systems=v.sys,this.settings=v.sys.settings,this.key=v.sys.settings.key,this.manager=v.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,v.sys.events.once(h.BOOT,this.boot,this),v.sys.events.on(h.START,this.pluginStart,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(h.SHUTDOWN,this.shutdown,this)},start:function(d,v){return d===void 0&&(d=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",d,v),this},restart:function(d){var v=this.key;return this.manager.queueOp("stop",v),this.manager.queueOp("start",v,d),this},transition:function(d){d===void 0&&(d={});var v=u(d,"target",!1),c=this.manager.getScene(v);if(!v||!this.checkValidTransition(c))return!1;var m=u(d,"duration",1e3);this._elapsed=0,this._target=c,this._duration=m,this._willSleep=u(d,"sleep",!1),this._willRemove=u(d,"remove",!1);var g=u(d,"onUpdate",null);g&&(this._onUpdate=g,this._onUpdateScope=u(d,"onUpdateScope",this.scene));var y=u(d,"allowInput",!1);this.settings.transitionAllowInput=y;var x=c.sys.settings;x.isTransition=!0,x.transitionFrom=this.scene,x.transitionDuration=m,x.transitionAllowInput=y,u(d,"moveAbove",!1)?this.manager.moveAbove(this.key,v):u(d,"moveBelow",!1)&&this.manager.moveBelow(this.key,v),c.sys.isSleeping()?c.sys.wake(u(d,"data")):this.manager.start(v,u(d,"data"));var C=u(d,"onStart",null),S=u(d,"onStartScope",this.scene);return C&&C.call(S,this.scene,c,m),this.systems.events.emit(h.TRANSITION_OUT,c,m),!0},checkValidTransition:function(d){return!(!d||d.sys.isActive()||d.sys.isTransitioning()||d===this.scene||this.systems.isTransitioning())},step:function(d,v){this._elapsed+=v,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var d=this._target.sys,v=this._target.sys.settings;d.events.emit(h.TRANSITION_COMPLETE,this.scene),v.isTransition=!1,v.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(d,v,c,m){return this.manager.add(d,v,c,m)},launch:function(d,v){return d&&d!==this.key&&this.manager.queueOp("start",d,v),this},run:function(d,v){return d&&d!==this.key&&this.manager.queueOp("run",d,v),this},pause:function(d,v){return d===void 0&&(d=this.key),this.manager.queueOp("pause",d,v),this},resume:function(d,v){return d===void 0&&(d=this.key),this.manager.queueOp("resume",d,v),this},sleep:function(d,v){return d===void 0&&(d=this.key),this.manager.queueOp("sleep",d,v),this},wake:function(d,v){return d===void 0&&(d=this.key),this.manager.queueOp("wake",d,v),this},switch:function(d,v){return d!==this.key&&this.manager.queueOp("switch",this.key,d,v),this},stop:function(d,v){return d===void 0&&(d=this.key),this.manager.queueOp("stop",d,v),this},setActive:function(d,v,c){v===void 0&&(v=this.key);var m=this.manager.getScene(v);return m&&m.sys.setActive(d,c),this},setVisible:function(d,v){v===void 0&&(v=this.key);var c=this.manager.getScene(v);return c&&c.sys.setVisible(d),this},isSleeping:function(d){return d===void 0&&(d=this.key),this.manager.isSleeping(d)},isActive:function(d){return d===void 0&&(d=this.key),this.manager.isActive(d)},isPaused:function(d){return d===void 0&&(d=this.key),this.manager.isPaused(d)},isVisible:function(d){return d===void 0&&(d=this.key),this.manager.isVisible(d)},swapPosition:function(d,v){return v===void 0&&(v=this.key),d!==v&&this.manager.swapPosition(d,v),this},moveAbove:function(d,v){return v===void 0&&(v=this.key),d!==v&&this.manager.moveAbove(d,v),this},moveBelow:function(d,v){return v===void 0&&(v=this.key),d!==v&&this.manager.moveBelow(d,v),this},remove:function(d){return d===void 0&&(d=this.key),this.manager.remove(d),this},moveUp:function(d){return d===void 0&&(d=this.key),this.manager.moveUp(d),this},moveDown:function(d){return d===void 0&&(d=this.key),this.manager.moveDown(d),this},bringToTop:function(d){return d===void 0&&(d=this.key),this.manager.bringToTop(d),this},sendToBack:function(d){return d===void 0&&(d=this.key),this.manager.sendToBack(d),this},get:function(d){return this.manager.getScene(d)},getStatus:function(d){var v=this.manager.getScene(d);if(v)return v.sys.getStatus()},getIndex:function(d){return d===void 0&&(d=this.key),this.manager.getIndex(d)},shutdown:function(){var d=this.systems.events;d.off(h.SHUTDOWN,this.shutdown,this),d.off(h.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});f.register("ScenePlugin",l,"scenePlugin"),n.exports=l},55681:(n,o,r)=>{var a=r(89993),p=r(35154),h=r(46975),u=r(87033),f={create:function(l){return typeof l=="string"?l={key:l}:l===void 0&&(l={}),{status:a.PENDING,key:p(l,"key",""),active:p(l,"active",!1),visible:p(l,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:p(l,"pack",!1),cameras:p(l,"cameras",null),map:p(l,"map",h(u,p(l,"mapAdd",{}))),physics:p(l,"physics",{}),loader:p(l,"loader",{}),plugins:p(l,"plugins",!1),input:p(l,"input",{})}}};n.exports=f},2368:(n,o,r)=>{var a=r(83419),p=r(89993),h=r(42363),u=r(44594),f=r(27397),l=r(52106),d=r(29747),v=r(55681),c=new a({initialize:function(g,y){this.scene=g,this.game,this.renderer,this.config=y,this.settings=v.create(y),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=d},init:function(m){this.settings.status=p.INIT,this.sceneUpdate=d,this.game=m,this.renderer=m.renderer,this.canvas=m.canvas,this.context=m.context;var g=m.plugins;this.plugins=g,g.addToScene(this,h.Global,[h.CoreScene,l(this),f(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},step:function(m,g){var y=this.events;y.emit(u.PRE_UPDATE,m,g),y.emit(u.UPDATE,m,g),this.sceneUpdate.call(this.scene,m,g),y.emit(u.POST_UPDATE,m,g)},render:function(m){var g=this.displayList;g.depthSort(),this.events.emit(u.PRE_RENDER,m),this.cameras.render(m,g),this.events.emit(u.RENDER,m)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(m){var g=this.settings,y=this.getStatus();return y!==p.CREATING&&y!==p.RUNNING?console.warn("Cannot pause non-running Scene",g.key):this.settings.active&&(g.status=p.PAUSED,g.active=!1,this.events.emit(u.PAUSE,this,m)),this},resume:function(m){var g=this.events,y=this.settings;return this.settings.active||(y.status=p.RUNNING,y.active=!0,g.emit(u.RESUME,this,m)),this},sleep:function(m){var g=this.settings,y=this.getStatus();return y!==p.CREATING&&y!==p.RUNNING?console.warn("Cannot sleep non-running Scene",g.key):(g.status=p.SLEEPING,g.active=!1,g.visible=!1,this.events.emit(u.SLEEP,this,m)),this},wake:function(m){var g=this.events,y=this.settings;return y.status=p.RUNNING,y.active=!0,y.visible=!0,g.emit(u.WAKE,this,m),y.isTransition&&g.emit(u.TRANSITION_WAKE,y.transitionFrom,y.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var m=this.settings.status;return m>p.PENDING&&m<=p.RUNNING},isSleeping:function(){return this.settings.status===p.SLEEPING},isActive:function(){return this.settings.status===p.RUNNING},isPaused:function(){return this.settings.status===p.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(m){return this.settings.visible=m,this},setActive:function(m,g){return m?this.resume(g):this.pause(g)},start:function(m){var g=this.events,y=this.settings;m&&(y.data=m),y.status=p.START,y.active=!0,y.visible=!0,g.emit(u.START,this),g.emit(u.READY,this,m)},shutdown:function(m){var g=this.events,y=this.settings;g.off(u.TRANSITION_INIT),g.off(u.TRANSITION_START),g.off(u.TRANSITION_COMPLETE),g.off(u.TRANSITION_OUT),y.status=p.SHUTDOWN,y.active=!1,y.visible=!1,g.emit(u.SHUTDOWN,this,m)},destroy:function(){var m=this.events,g=this.settings;g.status=p.DESTROYED,g.active=!1,g.visible=!1,m.emit(u.DESTROY,this),m.removeAllListeners();for(var y=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],x=0;x<y.length;x++)this[y[x]]=null}});n.exports=c},89993:n=>{var o={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};n.exports=o},69830:n=>{n.exports="addedtoscene"},7919:n=>{n.exports="boot"},46763:n=>{n.exports="create"},11763:n=>{n.exports="destroy"},71555:n=>{n.exports="pause"},36735:n=>{n.exports="postupdate"},3809:n=>{n.exports="prerender"},90716:n=>{n.exports="preupdate"},58262:n=>{n.exports="ready"},91633:n=>{n.exports="removedfromscene"},10319:n=>{n.exports="render"},87132:n=>{n.exports="resume"},81961:n=>{n.exports="shutdown"},90194:n=>{n.exports="sleep"},6265:n=>{n.exports="start"},33178:n=>{n.exports="transitioncomplete"},43063:n=>{n.exports="transitioninit"},11259:n=>{n.exports="transitionout"},61611:n=>{n.exports="transitionstart"},45209:n=>{n.exports="transitionwake"},22966:n=>{n.exports="update"},21747:n=>{n.exports="wake"},44594:(n,o,r)=>{n.exports={ADDED_TO_SCENE:r(69830),BOOT:r(7919),CREATE:r(46763),DESTROY:r(11763),PAUSE:r(71555),POST_UPDATE:r(36735),PRE_RENDER:r(3809),PRE_UPDATE:r(90716),READY:r(58262),REMOVED_FROM_SCENE:r(91633),RENDER:r(10319),RESUME:r(87132),SHUTDOWN:r(81961),SLEEP:r(90194),START:r(6265),TRANSITION_COMPLETE:r(33178),TRANSITION_INIT:r(43063),TRANSITION_OUT:r(11259),TRANSITION_START:r(61611),TRANSITION_WAKE:r(45209),UPDATE:r(22966),WAKE:r(21747)}},62194:(n,o,r)=>{var a=r(89993),p=r(79291),h={Events:r(44594),GetPhysicsPlugins:r(27397),GetScenePlugins:r(52106),SceneManager:r(60903),ScenePlugin:r(52209),Settings:r(55681),Systems:r(2368)};h=p(!1,h,a),n.exports=h},30341:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(14463),u=r(79291),f=r(29747),l=new a({Extends:p,initialize:function(v,c,m){p.call(this),this.manager=v,this.key=c,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,m),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(d){return!d||!d.name||typeof d.name!="string"?!1:this.markers[d.name]?(console.error("addMarker "+d.name+" already exists in Sound"),!1):(d=u(!0,{name:"",start:0,duration:this.totalDuration-(d.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},d),this.markers[d.name]=d,!0)},updateMarker:function(d){return!d||!d.name||typeof d.name!="string"?!1:this.markers[d.name]?(this.markers[d.name]=u(!0,this.markers[d.name],d),!0):(console.warn("Audio Marker: "+d.name+" missing in Sound: "+this.key),!1)},removeMarker:function(d){var v=this.markers[d];return v?(this.markers[d]=null,v):null},play:function(d,v){if(d===void 0&&(d=""),typeof d=="object"&&(v=d,d=""),typeof d!="string")return!1;if(!d)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[d])return console.warn("Marker: "+d+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[d],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=u(this.currentConfig,v),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:f,calculateRate:function(){var d=1.0005777895065548,v=this.currentConfig.detune+this.manager.detune,c=Math.pow(d,v);this.totalRate=this.currentConfig.rate*this.manager.rate*c},destroy:function(){this.pendingRemove||(this.stop(),this.emit(h.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});n.exports=l},85034:(n,o,r)=>{var a=r(83419),p=r(41786),h=r(50792),u=r(14463),f=r(8443),l=r(46710),d=r(58731),v=r(29747),c=r(26099),m=new a({Extends:h,initialize:function(y){h.call(this),this.game=y,this.jsonCache=y.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new c;var x=y.events;x.on(f.BLUR,this.onGameBlur,this),x.on(f.FOCUS,this.onGameFocus,this),x.on(f.PRE_STEP,this.update,this),x.once(f.DESTROY,this.destroy,this)},add:v,addAudioSprite:function(g,y){y===void 0&&(y={});var x=this.add(g,y);x.spritemap=this.jsonCache.get(g).spritemap;for(var C in x.spritemap)if(x.spritemap.hasOwnProperty(C)){var S=p(y),E=x.spritemap[C];S.loop=E.hasOwnProperty("loop")?E.loop:!1,x.addMarker({name:C,start:E.start,duration:E.end-E.start,config:S})}return x},get:function(g){return d(this.sounds,"key",g)},getAll:function(g){return g?l(this.sounds,"key",g):l(this.sounds)},getAllPlaying:function(){return l(this.sounds,"isPlaying",!0)},play:function(g,y){var x=this.add(g);return x.once(u.COMPLETE,x.destroy,x),y?y.name?(x.addMarker(y),x.play(y.name)):x.play(y):x.play()},playAudioSprite:function(g,y,x){var C=this.addAudioSprite(g);return C.once(u.COMPLETE,C.destroy,C),C.play(y,x)},remove:function(g){var y=this.sounds.indexOf(g);return y!==-1?(g.destroy(),this.sounds.splice(y,1),!0):!1},removeAll:function(){this.sounds.forEach(function(g){g.destroy()}),this.sounds.length=0},removeByKey:function(g){for(var y=0,x=this.sounds.length-1;x>=0;x--){var C=this.sounds[x];C.key===g&&(C.destroy(),this.sounds.splice(x,1),y++)}return y},pauseAll:function(){this.forEachActiveSound(function(g){g.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(g){g.resume()}),this.emit(u.RESUME_ALL,this)},setListenerPosition:v,stopAll:function(){this.forEachActiveSound(function(g){g.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(g){var y=0;return this.getAll(g).forEach(function(x){x.stop()&&y++}),y},isPlaying:function(g){var y=this.sounds,x=y.length-1,C;if(g===void 0){for(;x>=0;x--)if(C=this.sounds[x],C.isPlaying)return!0}else for(;x>=0;x--)if(C=this.sounds[x],C.key===g&&C.isPlaying)return!0;return!1},unlock:v,onBlur:v,onFocus:v,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(g,y){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var x=this.sounds.length-1;x>=0;x--)this.sounds[x].pendingRemove&&this.sounds.splice(x,1);this.sounds.forEach(function(C){C.update(g,y)})},destroy:function(){this.game.events.off(f.BLUR,this.onGameBlur,this),this.game.events.off(f.FOCUS,this.onGameFocus,this),this.game.events.off(f.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(g,y){var x=this;this.sounds.forEach(function(C,S){C&&!C.pendingRemove&&g.call(y||x,C,S,x.sounds)})},setRate:function(g){return this.rate=g,this},rate:{get:function(){return this._rate},set:function(g){this._rate=g,this.forEachActiveSound(function(y){y.calculateRate()}),this.emit(u.GLOBAL_RATE,this,g)}},setDetune:function(g){return this.detune=g,this},detune:{get:function(){return this._detune},set:function(g){this._detune=g,this.forEachActiveSound(function(y){y.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,g)}}});n.exports=m},14747:(n,o,r)=>{var a=r(33684),p=r(25960),h=r(57490),u={create:function(f){var l=f.config.audio,d=f.device.audio;return l.noAudio||!d.webAudio&&!d.audioData?new p(f):d.webAudio&&!l.disableWebAudio?new h(f):new a(f)}};n.exports=u},19723:n=>{n.exports="complete"},98882:n=>{n.exports="decodedall"},57506:n=>{n.exports="decoded"},73146:n=>{n.exports="destroy"},11305:n=>{n.exports="detune"},40577:n=>{n.exports="detune"},30333:n=>{n.exports="mute"},20394:n=>{n.exports="rate"},21802:n=>{n.exports="volume"},1299:n=>{n.exports="looped"},99190:n=>{n.exports="loop"},97125:n=>{n.exports="mute"},89259:n=>{n.exports="pan"},79986:n=>{n.exports="pauseall"},17586:n=>{n.exports="pause"},19618:n=>{n.exports="play"},42306:n=>{n.exports="rate"},10387:n=>{n.exports="resumeall"},48959:n=>{n.exports="resume"},9960:n=>{n.exports="seek"},19180:n=>{n.exports="stopall"},98328:n=>{n.exports="stop"},50401:n=>{n.exports="unlocked"},52498:n=>{n.exports="volume"},14463:(n,o,r)=>{n.exports={COMPLETE:r(19723),DECODED:r(57506),DECODED_ALL:r(98882),DESTROY:r(73146),DETUNE:r(11305),GLOBAL_DETUNE:r(40577),GLOBAL_MUTE:r(30333),GLOBAL_RATE:r(20394),GLOBAL_VOLUME:r(21802),LOOP:r(99190),LOOPED:r(1299),MUTE:r(97125),PAN:r(89259),PAUSE_ALL:r(79986),PAUSE:r(17586),PLAY:r(19618),RATE:r(42306),RESUME_ALL:r(10387),RESUME:r(48959),SEEK:r(9960),STOP_ALL:r(19180),STOP:r(98328),UNLOCKED:r(50401),VOLUME:r(52498)}},64895:(n,o,r)=>{var a=r(30341),p=r(83419),h=r(14463),u=r(45319),f=new p({Extends:a,initialize:function(d,v,c){if(c===void 0&&(c={}),this.tags=d.game.cache.audio.get(v),!this.tags)throw new Error('No cached audio asset with key "'+v);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,d,v,c)},play:function(l,d){return this.manager.isLocked(this,"play",[l,d])||!a.prototype.play.call(this,l,d)||!this.pickAndPlayAudioTag()?!1:(this.emit(h.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(h.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(h.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!a.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(h.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var l=this.currentConfig.seek,d=this.currentConfig.delay,v=(this.currentMarker?this.currentMarker.start:0)+l;return this.previousTime=v,this.audio.currentTime=v,this.applyConfig(),d===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+d*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var l=0;l<this.tags.length;l++){var d=this.tags[l];if(d.dataset.used==="false")return d.dataset.used="true",this.audio=d,!0}if(!this.manager.override)return!1;var v=[];this.manager.forEachActiveSound(function(m){m.key===this.key&&m.audio&&v.push(m)},this),v.sort(function(m,g){return m.loop===g.loop?g.seek/g.duration-m.seek/m.duration:m.loop?1:-1});var c=v[0];return this.audio=c.audio,c.reset(),c.audio=null,c.startTime=0,c.previousTime=0,!0},playCatchPromise:function(){var l=this.audio.play();l&&l.catch(function(d){console.warn(d)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){a.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(l){if(this.isPlaying){if(this.startTime>0){this.startTime<l-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,l-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var d=this.currentMarker?this.currentMarker.start:0,v=d+this.duration,c=this.audio.currentTime;if(this.currentConfig.loop)c>=v-this.manager.loopEndOffset?(this.audio.currentTime=d+Math.max(0,c-v),c=this.audio.currentTime):c<d&&(this.audio.currentTime+=d,c=this.audio.currentTime),c<this.previousTime&&this.emit(h.LOOPED,this);else if(c>=v){this.reset(),this.stopAndReleaseAudioTag(),this.emit(h.COMPLETE,this);return}this.previousTime=c}},destroy:function(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(l){this.currentConfig.mute=l,!this.manager.isLocked(this,"mute",l)&&(this.updateMute(),this.emit(h.MUTE,this,l))}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.currentConfig.volume},set:function(l){this.currentConfig.volume=l,!this.manager.isLocked(this,"volume",l)&&(this.updateVolume(),this.emit(h.VOLUME,this,l))}},setVolume:function(l){return this.volume=l,this},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,!this.manager.isLocked(this,h.RATE,l)&&(this.calculateRate(),this.emit(h.RATE,this,l))}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,!this.manager.isLocked(this,h.DETUNE,l)&&(this.calculateRate(),this.emit(h.DETUNE,this,l))}},setDetune:function(l){return this.detune=l,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.isLocked(this,"seek",l)||this.startTime>0||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.isPlaying?(this.previousTime=l,this.audio.currentTime=l):this.isPaused&&(this.currentConfig.seek=l),this.emit(h.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,!this.manager.isLocked(this,"loop",l)&&(this.audio&&(this.audio.loop=l),this.emit(h.LOOP,this,l))}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.currentConfig.pan},set:function(l){this.currentConfig.pan=l,this.emit(h.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});n.exports=f},33684:(n,o,r)=>{var a=r(85034),p=r(83419),h=r(14463),u=r(64895),f=new p({Extends:a,initialize:function(d){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,d)},add:function(l,d){var v=new u(this,l,d);return this.sounds.push(v),v},unlock:function(){this.locked=!1;var l=this;if(this.game.cache.audio.entries.each(function(m,g){for(var y=0;y<g.length;y++)if(g[y].dataset.locked==="true")return l.locked=!0,!1;return!0}),!!this.locked){var d=!1,v=function(){d=!0},c=function(){if(d){d=!1;return}document.body.removeEventListener("touchmove",v),document.body.removeEventListener("touchend",c);var m=[];if(l.game.cache.audio.entries.each(function(y,x){for(var C=0;C<x.length;C++){var S=x[C];S.dataset.locked==="true"&&m.push(S)}return!0}),m.length!==0){var g=m[m.length-1];g.oncanplaythrough=function(){g.oncanplaythrough=null,m.forEach(function(y){y.dataset.locked="false"}),l.unlocked=!0},m.forEach(function(y){y.load()})}};this.once(h.UNLOCKED,function(){for(this.forEachActiveSound(function(g){g.currentMarker===null&&g.duration===0&&(g.duration=g.tags[0].duration),g.totalDuration=g.tags[0].duration});this.lockedActionsQueue.length;){var m=this.lockedActionsQueue.shift();m.sound[m.prop].apply?m.sound[m.prop].apply(m.sound,m.value||[]):m.sound[m.prop]=m.value}},this),document.body.addEventListener("touchmove",v,!1),document.body.addEventListener("touchend",c,!1)}},onBlur:function(){this.forEachActiveSound(function(l){l.isPlaying&&(this.onBlurPausedSounds.push(l),l.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(l){l.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(l,d,v){return l.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:l,prop:d,value:v}),!0):!1},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this._mute},set:function(l){this._mute=l,this.forEachActiveSound(function(d){d.updateMute()}),this.emit(h.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this._volume},set:function(l){this._volume=l,this.forEachActiveSound(function(d){d.updateVolume()}),this.emit(h.GLOBAL_VOLUME,this,l)}}});n.exports=f},23717:(n,o,r)=>{n.exports={SoundManagerCreator:r(14747),Events:r(14463),BaseSound:r(30341),BaseSoundManager:r(85034),WebAudioSound:r(71741),WebAudioSoundManager:r(57490),HTML5AudioSound:r(64895),HTML5AudioSoundManager:r(33684),NoAudioSound:r(4603),NoAudioSoundManager:r(25960)}},4603:(n,o,r)=>{var a=r(30341),p=r(83419),h=r(50792),u=r(79291),f=r(29747),l=function(){return!1},d=function(){return null},v=function(){return this},c=new p({Extends:h,initialize:function(g,y,x){x===void 0&&(x={}),h.call(this),this.manager=g,this.key=y,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=u({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},x),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:l,updateMarker:l,removeMarker:d,play:l,pause:l,resume:l,stop:l,setMute:v,setVolume:v,setRate:v,setDetune:v,setSeek:v,setLoop:v,setPan:v,applyConfig:d,resetConfig:d,update:f,calculateRate:d,destroy:function(){a.prototype.destroy.call(this)}});n.exports=c},25960:(n,o,r)=>{var a=r(85034),p=r(83419),h=r(50792),u=r(4603),f=r(29747),l=new p({Extends:h,initialize:function(v){h.call(this),this.game=v,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(d,v){var c=new u(this,d,v);return this.sounds.push(c),c},addAudioSprite:function(d,v){var c=this.add(d,v);return c.spritemap={},c},get:function(d){return a.prototype.get.call(this,d)},getAll:function(d){return a.prototype.getAll.call(this,d)},play:function(d,v){return!1},playAudioSprite:function(d,v,c){return!1},remove:function(d){return a.prototype.remove.call(this,d)},removeAll:function(){return a.prototype.removeAll.call(this)},removeByKey:function(d){return a.prototype.removeByKey.call(this,d)},stopByKey:function(d){return a.prototype.stopByKey.call(this,d)},onBlur:f,onFocus:f,onGameBlur:f,onGameFocus:f,pauseAll:f,resumeAll:f,stopAll:f,update:f,setRate:f,setDetune:f,setMute:f,setVolume:f,unlock:f,forEachActiveSound:function(d,v){a.prototype.forEachActiveSound.call(this,d,v)},destroy:function(){a.prototype.destroy.call(this)}});n.exports=l},71741:(n,o,r)=>{var a=r(30341),p=r(83419),h=r(14463),u=r(95540),f=new p({Extends:a,initialize:function(d,v,c){if(c===void 0&&(c={}),this.audioBuffer=d.game.cache.audio.get(v),!this.audioBuffer)throw new Error('Audio key "'+v+'" not found in cache');this.source=null,this.loopSource=null,this.muteNode=d.context.createGain(),this.volumeNode=d.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),d.context.createPanner&&(this.spatialNode=d.context.createPanner(),this.volumeNode.connect(this.spatialNode)),d.context.createStereoPanner?(this.pannerNode=d.context.createStereoPanner(),d.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(d.destination)):d.context.createPanner?this.spatialNode.connect(d.destination):this.volumeNode.connect(d.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,d,v,c)},play:function(l,d){return a.prototype.play.call(this,l,d)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(h.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(h.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(h.RESUME,this),!0)},stop:function(){return a.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(h.STOP,this),!0):!1},createAndStartBufferSource:function(){var l=this.currentConfig.seek,d=this.currentConfig.delay,v=this.manager.context.currentTime+d,c=(this.currentMarker?this.currentMarker.start:0)+l,m=this.duration-l;this.playTime=v-l,this.startTime=v,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,v),Math.max(0,c),Math.max(0,m)),this.resetConfig()},createAndStartLoopBufferSource:function(){var l=this.getLoopTime(),d=this.currentMarker?this.currentMarker.start:0,v=this.duration;this.loopTime=l,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,l),Math.max(0,d),Math.max(0,v))},createBufferSource:function(){var l=this,d=this.manager.context.createBufferSource();return d.buffer=this.audioBuffer,d.connect(this.muteNode),d.onended=function(v){var c=v.target;(c===l.source||c===l.loopSource)&&(l.currentConfig.loop?l.hasLooped=!0:l.hasEnded=!0)},d},stopAndRemoveBufferSource:function(){if(this.source){var l=this.source;this.source=null,l.stop(),l.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var l=this.currentConfig.source;if(l&&this.manager.context.createPanner){var d=this.spatialNode;d.panningModel=u(l,"panningModel","equalpower"),d.distanceModel=u(l,"distanceModel","inverse"),d.orientationX.value=u(l,"orientationX",0),d.orientationY.value=u(l,"orientationY",0),d.orientationZ.value=u(l,"orientationZ",-1),d.refDistance=u(l,"refDistance",1),d.maxDistance=u(l,"maxDistance",1e4),d.rolloffFactor=u(l,"rolloffFactor",1),d.coneInnerAngle=u(l,"coneInnerAngle",360),d.coneOuterAngle=u(l,"coneOuterAngle",0),d.coneOuterGain=u(l,"coneOuterGain",0),this.spatialSource=u(l,"follow",null),this.spatialSource||(d.positionX.value=u(l,"x",0),d.positionY.value=u(l,"y",0),d.positionZ.value=u(l,"z",0))}a.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(l){this.spatialNode&&(this.spatialNode.positionX.value=l)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(l){this.spatialNode&&(this.spatialNode.positionY.value=l)}},update:function(){if(this.isPlaying&&this.spatialSource){var l=u(this.spatialSource,"x",null),d=u(this.spatialSource,"y",null);l&&l!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=l),d&&d!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=d)}this.hasEnded?(a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(h.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(h.LOOPED,this))},destroy:function(){this.pendingRemove||(a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){a.prototype.calculateRate.call(this);var l=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,l),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,l)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var l=0,d=0;d<this.rateUpdates.length;d++){var v=0;d<this.rateUpdates.length-1?v=this.rateUpdates[d+1].time:v=this.manager.context.currentTime-this.playTime,l+=(v-this.rateUpdates[d].time)*this.rateUpdates[d].rate}return l},getLoopTime:function(){for(var l=0,d=0;d<this.rateUpdates.length-1;d++)l+=(this.rateUpdates[d+1].time-this.rateUpdates[d].time)*this.rateUpdates[d].rate;var v=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+v.time+(this.duration-l)/v.rate},rate:{get:function(){return this.currentConfig.rate},set:function(l){this.currentConfig.rate=l,this.calculateRate(),this.emit(h.RATE,this,l)}},setRate:function(l){return this.rate=l,this},detune:{get:function(){return this.currentConfig.detune},set:function(l){this.currentConfig.detune=l,this.calculateRate(),this.emit(h.DETUNE,this,l)}},setDetune:function(l){return this.detune=l,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(l){this.currentConfig.mute=l,this.muteNode.gain.setValueAtTime(l?0:1,0),this.emit(h.MUTE,this,l)}},setMute:function(l){return this.mute=l,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(l){this.currentConfig.volume=l,this.volumeNode.gain.setValueAtTime(l,0),this.emit(h.VOLUME,this,l)}},setVolume:function(l){return this.volume=l,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(l){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(l=Math.min(Math.max(0,l),this.duration),this.currentConfig.seek=l,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(h.SEEK,this,l))}},setSeek:function(l){return this.seek=l,this},loop:{get:function(){return this.currentConfig.loop},set:function(l){this.currentConfig.loop=l,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),l&&this.createAndStartLoopBufferSource()),this.emit(h.LOOP,this,l)}},setLoop:function(l){return this.loop=l,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(l){this.currentConfig.pan=l,this.pannerNode&&this.pannerNode.pan.setValueAtTime(l,this.manager.context.currentTime),this.emit(h.PAN,this,l)}},setPan:function(l){return this.pan=l,this}});n.exports=f},57490:(n,o,r)=>{var a=r(53134),p=r(85034),h=r(83419),u=r(14463),f=r(8443),l=r(71741),d=r(95540),v=new h({Extends:p,initialize:function(m){this.context=this.createAudioContext(m),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended",p.call(this,m),this.locked&&(m.isBooted?this.unlock():m.events.once(f.BOOT,this.unlock,this)),m.events.on(f.VISIBLE,this.onGameVisible,this)},onGameVisible:function(){var c=this.context;window.setTimeout(function(){c&&(c.suspend(),c.resume())},100)},createAudioContext:function(c){var m=c.config.audio;if(m.context)return m.context.resume(),m.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(c){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=c,this.masterMuteNode=c.createGain(),this.masterVolumeNode=c.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(c.destination),this.destination=this.masterMuteNode,this},add:function(c,m){var g=new l(this,c,m);return this.sounds.push(g),g},decodeAudio:function(c,m){var g;Array.isArray(c)?g=c:g=[{key:c,data:m}];for(var y=this.game.cache.audio,x=g.length,C=0;C<g.length;C++){var S=g[C],E=S.key,T=S.data;typeof T=="string"&&(T=a(T));var P=function(w,b){y.add(w,b),this.emit(u.DECODED,w),x--,x===0&&this.emit(u.DECODED_ALL)}.bind(this,E),M=function(w,b){console.error("Error decoding audio: "+w+" - ",b?b.message:""),x--,x===0&&this.emit(u.DECODED_ALL)}.bind(this,E);this.context.decodeAudioData(T,P,M)}},setListenerPosition:function(c,m){return c===void 0&&(c=this.game.scale.width/2),m===void 0&&(m=this.game.scale.height/2),this.listenerPosition.set(c,m),this},unlock:function(){var c=this,m=document.body,g=function y(){if(c.context&&m){var x=m.removeEventListener.bind(m);c.context.resume().then(function(){x("touchstart",y),x("touchend",y),x("mousedown",y),x("mouseup",y),x("keydown",y),c.unlocked=!0},function(){x("touchstart",y),x("touchend",y),x("mousedown",y),x("mouseup",y),x("keydown",y)})}};m&&(m.addEventListener("touchstart",g,!1),m.addEventListener("touchend",g,!1),m.addEventListener("mousedown",g,!1),m.addEventListener("mouseup",g,!1),m.addEventListener("keydown",g,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var c=this.context;c&&!this.locked&&(c.state==="suspended"||c.state==="interrupted")&&c.resume()},update:function(c,m){var g=this.context.listener,y=d(this.listenerPosition,"x",null),x=d(this.listenerPosition,"y",null);if(g&&g.positionX!==void 0)y&&y!==this._spatialx&&(this._spatialx=g.positionX.value=y),x&&x!==this._spatialy&&(this._spatialy=g.positionY.value=x);else if(g){y&&y!==this._spatialx&&(this._spatialx=y),x&&x!==this._spatialy&&(this._spatialy=x);var C=d(g,"z",0);g.setPosition(this._spatialx||0,this._spatialy||0,C)}p.prototype.update.call(this,c,m),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var c=this;this.context.close().then(function(){c.context=null})}this.game.events.off(f.VISIBLE,this.onGameVisible,this),p.prototype.destroy.call(this)},setMute:function(c){return this.mute=c,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(c){this.masterMuteNode.gain.setValueAtTime(c?0:1,0),this.emit(u.GLOBAL_MUTE,this,c)}},setVolume:function(c){return this.volume=c,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(c){this.masterVolumeNode.gain.setValueAtTime(c,0),this.emit(u.GLOBAL_VOLUME,this,c)}}});n.exports=v},73162:(n,o,r)=>{var a=r(37105),p=r(83419),h=r(29747),u=r(19186),f=new p({initialize:function(d){this.parent=d,this.list=[],this.position=0,this.addCallback=h,this.removeCallback=h,this._sortKey=""},add:function(l,d){return d?a.Add(this.list,l):a.Add(this.list,l,0,this.addCallback,this)},addAt:function(l,d,v){return v?a.AddAt(this.list,l,d):a.AddAt(this.list,l,d,0,this.addCallback,this)},getAt:function(l){return this.list[l]},getIndex:function(l){return this.list.indexOf(l)},sort:function(l,d){return l?(d===void 0&&(d=function(v,c){return v[l]-c[l]}),u(this.list,d),this):this},getByName:function(l){return a.GetFirst(this.list,"name",l)},getRandom:function(l,d){return a.GetRandom(this.list,l,d)},getFirst:function(l,d,v,c){return a.GetFirst(this.list,l,d,v,c)},getAll:function(l,d,v,c){return a.GetAll(this.list,l,d,v,c)},count:function(l,d){return a.CountAllMatching(this.list,l,d)},swap:function(l,d){a.Swap(this.list,l,d)},moveTo:function(l,d){return a.MoveTo(this.list,l,d)},moveAbove:function(l,d){return a.MoveAbove(this.list,l,d)},moveBelow:function(l,d){return a.MoveBelow(this.list,l,d)},remove:function(l,d){return d?a.Remove(this.list,l):a.Remove(this.list,l,this.removeCallback,this)},removeAt:function(l,d){return d?a.RemoveAt(this.list,l):a.RemoveAt(this.list,l,this.removeCallback,this)},removeBetween:function(l,d,v){return v?a.RemoveBetween(this.list,l,d):a.RemoveBetween(this.list,l,d,this.removeCallback,this)},removeAll:function(l){for(var d=this.list.length;d--;)this.remove(this.list[d],l);return this},bringToTop:function(l){return a.BringToTop(this.list,l)},sendToBack:function(l){return a.SendToBack(this.list,l)},moveUp:function(l){return a.MoveUp(this.list,l),l},moveDown:function(l){return a.MoveDown(this.list,l),l},reverse:function(){return this.list.reverse(),this},shuffle:function(){return a.Shuffle(this.list),this},replace:function(l,d){return a.Replace(this.list,l,d)},exists:function(l){return this.list.indexOf(l)>-1},setAll:function(l,d,v,c){return a.SetAll(this.list,l,d,v,c),this},each:function(l,d){for(var v=[null],c=2;c<arguments.length;c++)v.push(arguments[c]);for(c=0;c<this.list.length;c++)v[0]=this.list[c],l.apply(d,v)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});n.exports=f},90330:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u){this.entries={},this.size=0,this.setAll(u)},setAll:function(h){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.set(h[u][0],h[u][1]);return this},set:function(h,u){return this.has(h)||this.size++,this.entries[h]=u,this},get:function(h){if(this.has(h))return this.entries[h]},getArray:function(){var h=[],u=this.entries;for(var f in u)h.push(u[f]);return h},has:function(h){return this.entries.hasOwnProperty(h)},delete:function(h){return this.has(h)&&(delete this.entries[h],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(h){delete this.entries[h]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var h=[],u=this.entries;for(var f in u)h.push(u[f]);return h},dump:function(){var h=this.entries;console.group("Map");for(var u in h)console.log(u,h[u]);console.groupEnd()},each:function(h){var u=this.entries;for(var f in u)if(h(f,u[f])===!1)break;return this},contains:function(h){var u=this.entries;for(var f in u)if(u[f]===h)return!0;return!1},merge:function(h,u){u===void 0&&(u=!1);var f=this.entries,l=h.entries;for(var d in l)f.hasOwnProperty(d)&&u?f[d]=l[d]:this.set(d,l[d]);return this}});n.exports=p},25774:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(82348),u=new a({Extends:p,initialize:function(){p.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(f){return this._active.indexOf(f)>-1},isPending:function(f){return this._toProcess>0&&this._pending.indexOf(f)>-1},isDestroying:function(f){return this._destroy.indexOf(f)>-1},add:function(f){return this.checkQueue&&this.isActive(f)&&!this.isDestroying(f)||this.isPending(f)||(this._pending.push(f),this._toProcess++),f},remove:function(f){if(this.isPending(f)){var l=this._pending,d=l.indexOf(f);d!==-1&&l.splice(d,1)}else this.isActive(f)&&(this._destroy.push(f),this._toProcess++);return f},removeAll:function(){for(var f=this._active,l=this._destroy,d=f.length;d--;)l.push(f[d]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var f=this._destroy,l=this._active,d,v;for(d=0;d<f.length;d++){v=f[d];var c=l.indexOf(v);c!==-1&&(l.splice(c,1),this.emit(h.PROCESS_QUEUE_REMOVE,v))}for(f.length=0,f=this._pending,d=0;d<f.length;d++)v=f[d],(!this.checkQueue||this.checkQueue&&l.indexOf(v)===-1)&&(l.push(v),this.emit(h.PROCESS_QUEUE_ADD,v));return f.length=0,this._toProcess=0,l},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});n.exports=u},59542:(n,o,r)=>{var a=r(43886);function p(T){var P=[".left",".top",".right",".bottom"];if(!(this instanceof p))return new p(T,P);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}p.prototype={all:function(){return this._all(this.data,[])},search:function(T){var P=this.data,M=[],w=this.toBBox;if(!C(T,P))return M;for(var b=[],I,R,A,L;P;){for(I=0,R=P.children.length;I<R;I++)A=P.children[I],L=P.leaf?w(A):A,C(T,L)&&(P.leaf?M.push(A):x(T,L)?this._all(A,M):b.push(A));P=b.pop()}return M},collides:function(T){var P=this.data,M=this.toBBox;if(!C(T,P))return!1;for(var w=[],b,I,R,A;P;){for(b=0,I=P.children.length;b<I;b++)if(R=P.children[b],A=P.leaf?M(R):R,C(T,A)){if(P.leaf||x(T,A))return!0;w.push(R)}P=w.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var P=0,M=T.length;P<M;P++)this.insert(T[P]);return this}var w=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=w;else if(this.data.height===w.height)this._splitRoot(this.data,w);else{if(this.data.height<w.height){var b=this.data;this.data=w,w=b}this._insert(w,this.data.height-w.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=S([]),this},remove:function(T,P){if(!T)return this;for(var M=this.data,w=this.toBBox(T),b=[],I=[],R,A,L,O;M||b.length;){if(M||(M=b.pop(),A=b[b.length-1],R=I.pop(),O=!0),M.leaf&&(L=h(T,M.children,P),L!==-1))return M.children.splice(L,1),b.push(M),this._condense(b),this;!O&&!M.leaf&&x(M,w)?(b.push(M),I.push(R),R=0,A=M,M=M.children[0]):A?(R++,M=A.children[R],O=!1):M=null}return this},toBBox:function(T){return T},compareMinX:d,compareMinY:v,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,P){for(var M=[];T;)T.leaf?P.push.apply(P,T.children):M.push.apply(M,T.children),T=M.pop();return P},_build:function(T,P,M,w){var b=M-P+1,I=this._maxEntries,R;if(b<=I)return R=S(T.slice(P,M+1)),u(R,this.toBBox),R;w||(w=Math.ceil(Math.log(b)/Math.log(I)),I=Math.ceil(b/Math.pow(I,w-1))),R=S([]),R.leaf=!1,R.height=w;var A=Math.ceil(b/I),L=A*Math.ceil(Math.sqrt(I)),O,F,G,U;for(E(T,P,M,L,this.compareMinX),O=P;O<=M;O+=L)for(G=Math.min(O+L-1,M),E(T,O,G,A,this.compareMinY),F=O;F<=G;F+=A)U=Math.min(F+A-1,G),R.children.push(this._build(T,F,U,w-1));return u(R,this.toBBox),R},_chooseSubtree:function(T,P,M,w){for(var b,I,R,A,L,O,F,G;w.push(P),!(P.leaf||w.length-1===M);){for(F=G=1/0,b=0,I=P.children.length;b<I;b++)R=P.children[b],L=c(R),O=g(T,R)-L,O<G?(G=O,F=L<F?L:F,A=R):O===G&&L<F&&(F=L,A=R);P=A||P.children[0]}return P},_insert:function(T,P,M){var w=this.toBBox,b=M?T:w(T),I=[],R=this._chooseSubtree(b,this.data,P,I);for(R.children.push(T),l(R,b);P>=0&&I[P].children.length>this._maxEntries;)this._split(I,P),P--;this._adjustParentBBoxes(b,I,P)},_split:function(T,P){var M=T[P],w=M.children.length,b=this._minEntries;this._chooseSplitAxis(M,b,w);var I=this._chooseSplitIndex(M,b,w),R=S(M.children.splice(I,M.children.length-I));R.height=M.height,R.leaf=M.leaf,u(M,this.toBBox),u(R,this.toBBox),P?T[P-1].children.push(R):this._splitRoot(M,R)},_splitRoot:function(T,P){this.data=S([T,P]),this.data.height=T.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(T,P,M){var w,b,I,R,A,L,O,F;for(L=O=1/0,w=P;w<=M-P;w++)b=f(T,0,w,this.toBBox),I=f(T,w,M,this.toBBox),R=y(b,I),A=c(b)+c(I),R<L?(L=R,F=w,O=A<O?A:O):R===L&&A<O&&(O=A,F=w);return F},_chooseSplitAxis:function(T,P,M){var w=T.leaf?this.compareMinX:d,b=T.leaf?this.compareMinY:v,I=this._allDistMargin(T,P,M,w),R=this._allDistMargin(T,P,M,b);I<R&&T.children.sort(w)},_allDistMargin:function(T,P,M,w){T.children.sort(w);var b=this.toBBox,I=f(T,0,P,b),R=f(T,M-P,M,b),A=m(I)+m(R),L,O;for(L=P;L<M-P;L++)O=T.children[L],l(I,T.leaf?b(O):O),A+=m(I);for(L=M-P-1;L>=P;L--)O=T.children[L],l(R,T.leaf?b(O):O),A+=m(R);return A},_adjustParentBBoxes:function(T,P,M){for(var w=M;w>=0;w--)l(P[w],T)},_condense:function(T){for(var P=T.length-1,M;P>=0;P--)T[P].children.length===0?P>0?(M=T[P-1].children,M.splice(M.indexOf(T[P]),1)):this.clear():u(T[P],this.toBBox)},compareMinX:function(T,P){return T.left-P.left},compareMinY:function(T,P){return T.top-P.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function h(T,P,M){if(!M)return P.indexOf(T);for(var w=0;w<P.length;w++)if(M(T,P[w]))return w;return-1}function u(T,P){f(T,0,T.children.length,P,T)}function f(T,P,M,w,b){b||(b=S(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var I=P,R;I<M;I++)R=T.children[I],l(b,T.leaf?w(R):R);return b}function l(T,P){return T.minX=Math.min(T.minX,P.minX),T.minY=Math.min(T.minY,P.minY),T.maxX=Math.max(T.maxX,P.maxX),T.maxY=Math.max(T.maxY,P.maxY),T}function d(T,P){return T.minX-P.minX}function v(T,P){return T.minY-P.minY}function c(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function m(T){return T.maxX-T.minX+(T.maxY-T.minY)}function g(T,P){return(Math.max(P.maxX,T.maxX)-Math.min(P.minX,T.minX))*(Math.max(P.maxY,T.maxY)-Math.min(P.minY,T.minY))}function y(T,P){var M=Math.max(T.minX,P.minX),w=Math.max(T.minY,P.minY),b=Math.min(T.maxX,P.maxX),I=Math.min(T.maxY,P.maxY);return Math.max(0,b-M)*Math.max(0,I-w)}function x(T,P){return T.minX<=P.minX&&T.minY<=P.minY&&P.maxX<=T.maxX&&P.maxY<=T.maxY}function C(T,P){return P.minX<=T.maxX&&P.minY<=T.maxY&&P.maxX>=T.minX&&P.maxY>=T.minY}function S(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(T,P,M,w,b){for(var I=[P,M],R;I.length;)M=I.pop(),P=I.pop(),!(M-P<=w)&&(R=P+Math.ceil((M-P)/w/2)*w,a(T,R,P,M,b),I.push(P,R,R,M))}n.exports=p},35072:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u){if(this.entries=[],Array.isArray(u))for(var f=0;f<u.length;f++)this.set(u[f])},set:function(h){return this.entries.indexOf(h)===-1&&this.entries.push(h),this},get:function(h,u){for(var f=0;f<this.entries.length;f++){var l=this.entries[f];if(l[h]===u)return l}},getArray:function(){return this.entries.slice(0)},delete:function(h){var u=this.entries.indexOf(h);return u>-1&&this.entries.splice(u,1),this},dump:function(){console.group("Set");for(var h=0;h<this.entries.length;h++){var u=this.entries[h];console.log(u)}console.groupEnd()},each:function(h,u){var f,l=this.entries.slice(),d=l.length;if(u)for(f=0;f<d&&h.call(u,l[f],f)!==!1;f++);else for(f=0;f<d&&h(l[f],f)!==!1;f++);return this},iterate:function(h,u){var f,l=this.entries.length;if(u)for(f=0;f<l&&h.call(u,this.entries[f],f)!==!1;f++);else for(f=0;f<l&&h(this.entries[f],f)!==!1;f++);return this},iterateLocal:function(h){var u,f=[];for(u=1;u<arguments.length;u++)f.push(arguments[u]);var l=this.entries.length;for(u=0;u<l;u++){var d=this.entries[u];d[h].apply(d,f)}return this},clear:function(){return this.entries.length=0,this},contains:function(h){return this.entries.indexOf(h)>-1},union:function(h){var u=new p;return h.entries.forEach(function(f){u.set(f)}),this.entries.forEach(function(f){u.set(f)}),u},intersect:function(h){var u=new p;return this.entries.forEach(function(f){h.contains(f)&&u.set(f)}),u},difference:function(h){var u=new p;return this.entries.forEach(function(f){h.contains(f)||u.set(f)}),u},size:{get:function(){return this.entries.length},set:function(h){return h<this.entries.length?this.entries.length=h:this.entries.length}}});n.exports=p},86555:(n,o,r)=>{var a=r(45319),p=r(83419),h=r(56583),u=r(26099),f=new p({initialize:function(d,v,c,m){d===void 0&&(d=0),v===void 0&&(v=d),c===void 0&&(c=0),m===void 0&&(m=null),this._width=d,this._height=v,this._parent=m,this.aspectMode=c,this.aspectRatio=v===0?1:d/v,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(l){return l===void 0&&(l=0),this.aspectMode=l,this.setSize(this._width,this._height)},setSnap:function(l,d){return l===void 0&&(l=0),d===void 0&&(d=l),this.snapTo.set(l,d),this.setSize(this._width,this._height)},setParent:function(l){return this._parent=l,this.setSize(this._width,this._height)},setMin:function(l,d){return l===void 0&&(l=0),d===void 0&&(d=l),this.minWidth=a(l,0,this.maxWidth),this.minHeight=a(d,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(l,d){return l===void 0&&(l=Number.MAX_VALUE),d===void 0&&(d=l),this.maxWidth=a(l,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(d,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(l,d){switch(l===void 0&&(l=0),d===void 0&&(d=l),this.aspectMode){case f.NONE:this._width=this.getNewWidth(h(l,this.snapTo.x)),this._height=this.getNewHeight(h(d,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case f.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(h(l,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case f.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(h(d,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case f.FIT:this.constrain(l,d,!0);break;case f.ENVELOP:this.constrain(l,d,!1);break}return this},setAspectRatio:function(l){return this.aspectRatio=l,this.setSize(this._width,this._height)},resize:function(l,d){return this._width=this.getNewWidth(h(l,this.snapTo.x)),this._height=this.getNewHeight(h(d,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(l,d){return d===void 0&&(d=!0),l=a(l,this.minWidth,this.maxWidth),d&&this._parent&&l>this._parent.width&&(l=Math.max(this.minWidth,this._parent.width)),l},getNewHeight:function(l,d){return d===void 0&&(d=!0),l=a(l,this.minHeight,this.maxHeight),d&&this._parent&&l>this._parent.height&&(l=Math.max(this.minHeight,this._parent.height)),l},constrain:function(l,d,v){l===void 0&&(l=0),d===void 0&&(d=l),v===void 0&&(v=!0),l=this.getNewWidth(l),d=this.getNewHeight(d);var c=this.snapTo,m=d===0?1:l/d;return v&&this.aspectRatio>m||!v&&this.aspectRatio<m?(l=h(l,c.x),d=l/this.aspectRatio,c.y>0&&(d=h(d,c.y),l=d*this.aspectRatio)):(v&&this.aspectRatio<m||!v&&this.aspectRatio>m)&&(d=h(d,c.y),l=d*this.aspectRatio,c.x>0&&(l=h(l,c.x),d=l*(1/this.aspectRatio))),this._width=l,this._height=d,this},fitTo:function(l,d){return this.constrain(l,d,!0)},envelop:function(l,d){return this.constrain(l,d,!1)},setWidth:function(l){return this.setSize(l,this._height)},setHeight:function(l){return this.setSize(this._width,l)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(l){l&&l.style&&(l.style.width=this._width+"px",l.style.height=this._height+"px")},copy:function(l){return l.setAspectMode(this.aspectMode),l.aspectRatio=this.aspectRatio,l.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(l){this.setSize(l,this._height)}},height:{get:function(){return this._height},set:function(l){this.setSize(this._width,l)}}});f.NONE=0,f.WIDTH_CONTROLS_HEIGHT=1,f.HEIGHT_CONTROLS_WIDTH=2,f.FIT=3,f.ENVELOP=4,n.exports=f},15238:n=>{n.exports="add"},56187:n=>{n.exports="remove"},82348:(n,o,r)=>{n.exports={PROCESS_QUEUE_ADD:r(15238),PROCESS_QUEUE_REMOVE:r(56187)}},41392:(n,o,r)=>{n.exports={Events:r(82348),List:r(73162),Map:r(90330),ProcessQueue:r(25774),RTree:r(59542),Set:r(35072),Size:r(86555)}},57382:(n,o,r)=>{var a=r(83419),p=r(45319),h=r(40987),u=r(8054),f=r(50030),l=r(79237),d=new a({Extends:l,initialize:function(c,m,g,y,x){l.call(this,c,m,g,y,x),this.add("__BASE",0,0,0,y,x),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=y,this.height=x,this.imageData=this.context.getImageData(0,0,y,x),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(v,c,m,g){return g===void 0&&(g=!0),this.context.drawImage(m,v,c),g&&this.update(),this},drawFrame:function(v,c,m,g,y){m===void 0&&(m=0),g===void 0&&(g=0),y===void 0&&(y=!0);var x=this.manager.getFrame(v,c);if(x){var C=x.canvasData,S=x.cutWidth,E=x.cutHeight,T=x.source.resolution;this.context.drawImage(x.source.image,C.x,C.y,S,E,m,g,S/T,E/T),y&&this.update()}return this},setPixel:function(v,c,m,g,y,x){x===void 0&&(x=255),v=Math.abs(Math.floor(v)),c=Math.abs(Math.floor(c));var C=this.getIndex(v,c);if(C>-1){var S=this.context.getImageData(v,c,1,1);S.data[0]=m,S.data[1]=g,S.data[2]=y,S.data[3]=x,this.context.putImageData(S,v,c)}return this},putData:function(v,c,m,g,y,x,C){return g===void 0&&(g=0),y===void 0&&(y=0),x===void 0&&(x=v.width),C===void 0&&(C=v.height),this.context.putImageData(v,c,m,g,y,x,C),this},getData:function(v,c,m,g){v=p(Math.floor(v),0,this.width-1),c=p(Math.floor(c),0,this.height-1),m=p(m,1,this.width-v),g=p(g,1,this.height-c);var y=this.context.getImageData(v,c,m,g);return y},getPixel:function(v,c,m){m||(m=new h);var g=this.getIndex(v,c);if(g>-1){var y=this.data,x=y[g+0],C=y[g+1],S=y[g+2],E=y[g+3];m.setTo(x,C,S,E)}return m},getPixels:function(v,c,m,g){v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=this.width),g===void 0&&(g=m),v=Math.abs(Math.round(v)),c=Math.abs(Math.round(c));for(var y=p(v,0,this.width),x=p(v+m,0,this.width),C=p(c,0,this.height),S=p(c+g,0,this.height),E=new h,T=[],P=C;P<S;P++){for(var M=[],w=y;w<x;w++)E=this.getPixel(w,P,E),M.push({x:w,y:P,color:E.color,alpha:E.alphaGL});T.push(M)}return T},getIndex:function(v,c){return v=Math.abs(Math.round(v)),c=Math.abs(Math.round(c)),v<this.width&&c<this.height?(v+c*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(v,c,m,g,y){return v===void 0&&(v=0),c===void 0&&(c=0),m===void 0&&(m=this.width),g===void 0&&(g=this.height),y===void 0&&(y=!0),this.context.clearRect(v,c,m,g),y&&this.update(),this},setSize:function(v,c){return c===void 0&&(c=v),(v!==this.width||c!==this.height)&&(this.canvas.width=v,this.canvas.height=c,this._source.width=v,this._source.height=c,this._source.isPowerOf2=f(v,c),this.frames.__BASE.setSize(v,c,0,0),this.width=v,this.height=c,this.refresh()),this},destroy:function(){l.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});n.exports=d},81320:(n,o,r)=>{var a=r(10312),p=r(38058),h=r(27919),u=r(83419),f=r(8054),l=r(4327),d=r(95540),v=r(36060),c=r(32302),m=r(79237),g=r(70554),y=new u({Extends:m,initialize:function(C,S,E,T,P){E===void 0&&(E=256),T===void 0&&(T=256),P===void 0&&(P=!0),this.type="DynamicTexture";var M=C.game.renderer,w=M&&M.type===f.CANVAS,b=w?h.create2D(this,E,T):[this];m.call(this,C,S,b,E,T),this.add("__BASE",0,0,0,E,T),this.renderer=M,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=w?b:null,this.context=w?b.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new p(0,0,E,T).setScene(C.game.scene.systemScene,!1),this.renderTarget=w?null:new c(M,E,T,1,0,!1,!1,!0,!1),this.pipeline=w?null:M.pipelines.get(v.SINGLE_PIPELINE),this.setSize(E,T,P)},setSize:function(x,C,S){C===void 0&&(C=x),S===void 0&&(S=!0),S&&(x=Math.floor(x),C=Math.floor(C),x%2!==0&&x++,C%2!==0&&C++);var E=this.get(),T=E.source;if(x!==this.width||C!==this.height){this.canvas&&(this.canvas.width=x,this.canvas.height=C);var P=this.renderTarget;P&&(P.willResize(x,C)&&P.resize(x,C),P.texture!==T.glTexture&&this.renderer.deleteTexture(T.glTexture),this.setFromRenderTarget()),this.camera.setSize(x,C),T.width=x,T.height=C,E.setSize(x,C),this.width=x,this.height=C}else{var M=this.getSourceImage();E.cutX+x>M.width&&(x=M.width-E.cutX),E.cutY+C>M.height&&(C=M.height-E.cutY),E.setSize(x,C,E.cutX,E.cutY)}return this},setFromRenderTarget:function(){var x=this.get(),C=x.source,S=this.renderTarget;return C.isRenderTexture=!0,C.isGLTexture=!0,C.glTexture=S.texture,this},setIsSpriteTexture:function(x){return this.isSpriteTexture=x,this},fill:function(x,C,S,E,T,P){var M=this.camera,w=this.renderer;C===void 0&&(C=1),S===void 0&&(S=0),E===void 0&&(E=0),T===void 0&&(T=this.width),P===void 0&&(P=this.height);var b=x>>16&255,I=x>>8&255,R=x&255,A=this.renderTarget;if(M.preRender(),A){A.bind(!0);var L=this.pipeline.manager.set(this.pipeline),O=w.width/A.width,F=w.height/A.height,G=A.height-(E+P);L.drawFillRect(S*O,G*F,T*O,P*F,g.getTintFromFloats(R/255,I/255,b/255,1),C),A.unbind(!0)}else{var U=this.context;w.setContext(U),U.globalCompositeOperation="source-over",U.fillStyle="rgba("+b+","+I+","+R+","+C+")",U.fillRect(S,E,T,P),w.setContext()}return this.dirty=!0,this},clear:function(x,C,S,E){if(this.dirty){var T=this.context,P=this.renderTarget;P?P.clear(x,C,S,E):T&&(x!==void 0&&C!==void 0&&S!==void 0&&E!==void 0?T.clearRect(x,C,S,E):(T.save(),T.setTransform(1,0,0,1,0,0),T.clearRect(0,0,this.width,this.height),T.restore())),this.dirty=!1}return this},stamp:function(x,C,S,E,T){S===void 0&&(S=0),E===void 0&&(E=0);var P=d(T,"alpha",1),M=d(T,"tint",16777215),w=d(T,"angle",0),b=d(T,"rotation",0),I=d(T,"scale",1),R=d(T,"scaleX",I),A=d(T,"scaleY",I),L=d(T,"originX",.5),O=d(T,"originY",.5),F=d(T,"blendMode",0),G=d(T,"erase",!1),U=d(T,"skipBatch",!1),z=this.manager.resetStamp(P,M);return z.setAngle(0),w!==0?z.setAngle(w):b!==0&&z.setRotation(b),z.setScale(R,A),z.setTexture(x,C),z.setOrigin(L,O),z.setBlendMode(F),G&&(this._eraseMode=!0),U?this.batchGameObject(z,S,E):this.draw(z,S,E),G&&(this._eraseMode=!1),this},erase:function(x,C,S){return this._eraseMode=!0,this.draw(x,C,S),this._eraseMode=!1,this},draw:function(x,C,S,E,T){return this.beginDraw(),this.batchDraw(x,C,S,E,T),this.endDraw(),this},drawFrame:function(x,C,S,E,T,P){return this.beginDraw(),this.batchDrawFrame(x,C,S,E,T,P),this.endDraw(),this},repeat:function(x,C,S,E,T,P,M,w,b){if(S===void 0&&(S=0),E===void 0&&(E=0),T===void 0&&(T=this.width),P===void 0&&(P=this.height),M===void 0&&(M=1),w===void 0&&(w=16777215),b===void 0&&(b=!1),x instanceof l?C=x:C=this.manager.getFrame(x,C),!C)return this;var I=this.manager.resetStamp(M,w);I.setFrame(C),I.setOrigin(0);var R=C.width,A=C.height;T=Math.floor(T),P=Math.floor(P);var L=Math.ceil(T/R),O=Math.ceil(P/A),F=L*R-T,G=O*A-P;F>0&&(F=R-F),G>0&&(G=A-G),S<0&&(L+=Math.ceil(Math.abs(S)/R)),E<0&&(O+=Math.ceil(Math.abs(E)/A));var U=S,z=E,N=!1,k=this.manager.stampCrop.setTo(0,0,R,A);b||this.beginDraw();for(var D=0;D<O;D++){if(z+A<0){z+=A;continue}for(var V=0;V<L;V++){if(N=!1,U+R<0){U+=R;continue}else U<0&&(N=!0,k.width=R+U,k.x=R-k.width);z<0&&(N=!0,k.height=A+z,k.y=A-k.height),F>0&&V===L-1&&(N=!0,k.width=F),G>0&&D===O-1&&(N=!0,k.height=G),N&&I.setCrop(k),this.batchGameObject(I,U,z),I.isCropped=!1,k.setTo(0,0,R,A),U+=R}U=S,z+=A}return b||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var x=this.camera,C=this.renderer,S=this.renderTarget;x.preRender(),S?C.beginCapture(S.width,S.height):C.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(x,C,S,E,T){return Array.isArray(x)||(x=[x]),this.batchList(x,C,S,E,T),this},batchDrawFrame:function(x,C,S,E,T,P){S===void 0&&(S=0),E===void 0&&(E=0),T===void 0&&(T=1),P===void 0&&(P=16777215);var M=this.manager.getFrame(x,C);return M&&(this.renderTarget?this.pipeline.batchTextureFrame(M,S,E,P,T,this.camera.matrix,null):this.batchTextureFrame(M,S,E,T,P)),this},endDraw:function(x){if(x===void 0&&(x=this._eraseMode),this.isDrawing){var C=this.renderer,S=this.renderTarget;if(S){var E=C.endCapture(),T=C.pipelines.setUtility();T.blitFrame(E,S,1,!1,!1,x,this.isSpriteTexture),C.resetScissor(),C.resetViewport()}else C.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(x,C,S,E,T){var P=x.length;if(P!==0)for(var M=0;M<P;M++){var w=x[M];!w||w===this||(w.renderWebGL||w.renderCanvas?this.batchGameObject(w,C,S):w.isParent||w.list?this.batchGroup(w.getChildren(),C,S):typeof w=="string"?this.batchTextureFrameKey(w,null,C,S,E,T):w instanceof l?this.batchTextureFrame(w,C,S,E,T):Array.isArray(w)&&this.batchList(w,C,S,E,T))}},batchGroup:function(x,C,S){C===void 0&&(C=0),S===void 0&&(S=0);for(var E=0;E<x.length;E++){var T=x[E];T.willRender(this.camera)&&this.batchGameObject(T,T.x+C,T.y+S)}},batchGameObject:function(x,C,S){C===void 0&&(C=x.x),S===void 0&&(S=x.y);var E=x.x,T=x.y,P=this.camera,M=this.renderer,w=this._eraseMode,b=x.mask;if(x.setPosition(C,S),this.canvas){if(w){var I=x.blendMode;x.blendMode=a.ERASE}b&&b.preRenderCanvas(M,x,P),x.renderCanvas(M,x,P,null),b&&b.postRenderCanvas(M,x,P),w&&(x.blendMode=I)}else M&&(b&&b.preRenderWebGL(M,x,P),w||M.setBlendMode(x.blendMode),x.renderWebGL(M,x,P),b&&b.postRenderWebGL(M,P,this.renderTarget));x.setPosition(E,T)},batchTextureFrameKey:function(x,C,S,E,T,P){var M=this.manager.getFrame(x,C);M&&this.batchTextureFrame(M,S,E,T,P)},batchTextureFrame:function(x,C,S,E,T){C===void 0&&(C=0),S===void 0&&(S=0),E===void 0&&(E=1),T===void 0&&(T=16777215);var P=this.camera.matrix,M=this.renderTarget;if(M)this.pipeline.batchTextureFrame(x,C,S,T,E,P,null);else{var w=this.context,b=x.canvasData,I=x.source.image;w.save(),w.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",w.globalAlpha=E,P.setToContext(w),b.width>0&&b.height>0&&w.drawImage(I,b.x,b.y,b.width,b.height,C,S,b.width,b.height),w.restore()}},snapshotArea:function(x,C,S,E,T,P,M){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,x,C,S,E,P,M):this.renderer.snapshotCanvas(this.canvas,T,!1,x,C,S,E,P,M),this},snapshot:function(x,C,S){return this.snapshotArea(0,0,this.width,this.height,x,C,S)},snapshotPixel:function(x,C,S){return this.snapshotArea(x,C,1,1,S,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(x,C,S,E){var T=this.manager.resetStamp();T.setTexture(this),T.setOrigin(0),T.renderWebGL(x,T,S,E)},renderCanvas:function(){},destroy:function(){var x=this.manager.stamp;x&&x.texture===this&&this.manager.resetStamp(),m.prototype.destroy.call(this),h.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});n.exports=y},4327:(n,o,r)=>{var a=r(83419),p=r(45319),h=r(79291),u=new a({initialize:function(l,d,v,c,m,g,y){this.texture=l,this.name=d,this.source=l.source[v],this.sourceIndex=v,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(g,y,c,m)},setCutPosition:function(f,l){return f===void 0&&(f=0),l===void 0&&(l=0),this.cutX=f,this.cutY=l,this.updateUVs()},setCutSize:function(f,l){return this.cutWidth=f,this.cutHeight=l,this.updateUVs()},setSize:function(f,l,d,v){d===void 0&&(d=0),v===void 0&&(v=0),this.setCutPosition(d,v),this.setCutSize(f,l),this.width=f,this.height=l,this.halfWidth=Math.floor(f*.5),this.halfHeight=Math.floor(l*.5),this.centerX=Math.floor(f/2),this.centerY=Math.floor(l/2);var c=this.data,m=c.cut;m.x=d,m.y=v,m.w=f,m.h=l,m.r=d+f,m.b=v+l,c.sourceSize.w=f,c.sourceSize.h=l,c.spriteSourceSize.w=f,c.spriteSourceSize.h=l,c.radius=.5*Math.sqrt(f*f+l*l);var g=c.drawImage;return g.x=d,g.y=v,g.width=f,g.height=l,this.updateUVs()},setTrim:function(f,l,d,v,c,m){var g=this.data,y=g.spriteSourceSize;return g.trim=!0,g.sourceSize.w=f,g.sourceSize.h=l,y.x=d,y.y=v,y.w=c,y.h=m,y.r=d+c,y.b=v+m,this.x=d,this.y=v,this.width=c,this.height=m,this.halfWidth=c*.5,this.halfHeight=m*.5,this.centerX=Math.floor(c/2),this.centerY=Math.floor(m/2),this.updateUVs()},setScale9:function(f,l,d,v){var c=this.data;return c.scale9=!0,c.is3Slice=l===0&&v===this.height,c.scale9Borders.x=f,c.scale9Borders.y=l,c.scale9Borders.w=d,c.scale9Borders.h=v,this},setCropUVs:function(f,l,d,v,c,m,g){var y=this.cutX,x=this.cutY,C=this.cutWidth,S=this.cutHeight,E=this.realWidth,T=this.realHeight;l=p(l,0,E),d=p(d,0,T),v=p(v,0,E-l),c=p(c,0,T-d);var P=y+l,M=x+d,w=v,b=c,I=this.data;if(I.trim){var R=I.spriteSourceSize;v=p(v,0,R.x+C-l),c=p(c,0,R.y+S-d);var A=l+v,L=d+c,O=!(R.r<l||R.b<d||R.x>A||R.y>L);if(O){var F=Math.max(R.x,l),G=Math.max(R.y,d),U=Math.min(R.r,A)-F,z=Math.min(R.b,L)-G;w=U,b=z,m?P=y+(C-(F-R.x)-U):P=y+(F-R.x),g?M=x+(S-(G-R.y)-z):M=x+(G-R.y),l=F,d=G,v=U,c=z}else P=0,M=0,w=0,b=0}else m&&(P=y+(C-l-v)),g&&(M=x+(S-d-c));var N=this.source.width,k=this.source.height;return f.u0=Math.max(0,P/N),f.v0=Math.max(0,M/k),f.u1=Math.min(1,(P+w)/N),f.v1=Math.min(1,(M+b)/k),f.x=l,f.y=d,f.cx=P,f.cy=M,f.cw=w,f.ch=b,f.width=v,f.height=c,f.flipX=m,f.flipY=g,f},updateCropUVs:function(f,l,d){return this.setCropUVs(f,f.x,f.y,f.width,f.height,l,d)},setUVs:function(f,l,d,v,c,m){var g=this.data.drawImage;return g.width=f,g.height=l,this.u0=d,this.v0=v,this.u1=c,this.v1=m,this},updateUVs:function(){var f=this.cutX,l=this.cutY,d=this.cutWidth,v=this.cutHeight,c=this.data.drawImage;c.width=d,c.height=v;var m=this.source.width,g=this.source.height;return this.u0=f/m,this.v0=l/g,this.u1=(f+d)/m,this.v1=(l+v)/g,this},updateUVsInverted:function(){var f=this.source.width,l=this.source.height;return this.u0=(this.cutX+this.cutHeight)/f,this.v0=this.cutY/l,this.u1=this.cutX/f,this.v1=(this.cutY+this.cutWidth)/l,this},clone:function(){var f=new u(this.texture,this.name,this.sourceIndex);return f.cutX=this.cutX,f.cutY=this.cutY,f.cutWidth=this.cutWidth,f.cutHeight=this.cutHeight,f.x=this.x,f.y=this.y,f.width=this.width,f.height=this.height,f.halfWidth=this.halfWidth,f.halfHeight=this.halfHeight,f.centerX=this.centerX,f.centerY=this.centerY,f.rotated=this.rotated,f.data=h(!0,f.data,this.data),f.updateUVs(),f},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});n.exports=u},79237:(n,o,r)=>{var a=r(83419),p=r(4327),h=r(11876),u='Texture "%s" has no frame "%s"',f=new a({initialize:function(d,v,c,m,g){Array.isArray(c)||(c=[c]),this.manager=d,this.key=v,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var y=0;y<c.length;y++)this.source.push(new h(this,c[y],m,g))},add:function(l,d,v,c,m,g){if(this.has(l))return null;var y=new p(this,l,d,v,c,m,g);return this.frames[l]=y,this.firstFrame==="__BASE"&&(this.firstFrame=l),this.frameTotal++,y},remove:function(l){if(this.has(l)){var d=this.get(l);return d.destroy(),delete this.frames[l],!0}return!1},has:function(l){return this.frames.hasOwnProperty(l)},get:function(l){l||(l=this.firstFrame);var d=this.frames[l];return d||(console.warn(u,this.key,l),d=this.frames[this.firstFrame]),d},getTextureSourceIndex:function(l){for(var d=0;d<this.source.length;d++)if(this.source[d]===l)return d;return-1},getFramesFromTextureSource:function(l,d){d===void 0&&(d=!1);var v=[];for(var c in this.frames)if(!(c==="__BASE"&&!d)){var m=this.frames[c];m.sourceIndex===l&&v.push(m)}return v},getFrameBounds:function(l){l===void 0&&(l=0);for(var d=this.getFramesFromTextureSource(l,!0),v=d[0],c=v.cutX,m=v.cutY,g=v.cutX+v.cutWidth,y=v.cutY+v.cutHeight,x=1;x<d.length;x++){var C=d[x];C.cutX<c&&(c=C.cutX),C.cutY<m&&(m=C.cutY),C.cutX+C.cutWidth>g&&(g=C.cutX+C.cutWidth),C.cutY+C.cutHeight>y&&(y=C.cutY+C.cutHeight)}return{x:c,y:m,width:g-c,height:y-m}},getFrameNames:function(l){l===void 0&&(l=!1);var d=Object.keys(this.frames);if(!l){var v=d.indexOf("__BASE");v!==-1&&d.splice(v,1)}return d},getSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var d=this.frames[l];return d?d.source.image:(console.warn(u,this.key,l),this.frames.__BASE.source.image)},getDataSourceImage:function(l){(l==null||this.frameTotal===1)&&(l="__BASE");var d=this.frames[l],v;return d?v=d.sourceIndex:(console.warn(u,this.key,l),v=this.frames.__BASE.sourceIndex),this.dataSource[v].image},setDataSource:function(l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++){var v=this.source[d];this.dataSource.push(new h(this,l[d],v.width,v.height))}},setFilter:function(l){var d;for(d=0;d<this.source.length;d++)this.source[d].setFilter(l);for(d=0;d<this.dataSource.length;d++)this.dataSource[d].setFilter(l)},destroy:function(){var l,d=this.source,v=this.dataSource;for(l=0;l<d.length;l++)d[l]&&d[l].destroy();for(l=0;l<v.length;l++)v[l]&&v[l].destroy();for(var c in this.frames){var m=this.frames[c];m&&m.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});n.exports=f},17130:(n,o,r)=>{var a=r(27919),p=r(57382),h=r(83419),u=r(40987),f=r(8054),l=r(81320),d=r(50792),v=r(69442),c=r(4327),m=r(8443),g=r(99584),y=r(35154),x=r(88571),C=r(41212),S=r(61309),E=r(87841),T=r(79237),P=new h({Extends:d,initialize:function(w){d.call(this),this.game=w,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new E,this.silentWarnings=!1,w.events.once(m.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(v.LOAD,this.updatePending,this),this.on(v.ERROR,this.updatePending,this);var M=this.game.config;M.defaultImage!==null&&this.addBase64("__DEFAULT",M.defaultImage),M.missingImage!==null&&this.addBase64("__MISSING",M.missingImage),M.whiteImage!==null&&this.addBase64("__WHITE",M.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(m.DESTROY,this.destroy,this),this.game.events.once(m.SYSTEM_READY,function(w){this.stamp=new x(w).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(v.LOAD),this.off(v.ERROR),this.emit(v.READY))},checkKey:function(M){return!M||typeof M!="string"||this.exists(M)?(this.silentWarnings||console.error("Texture key already in use: "+M),!1):!0},remove:function(M){if(typeof M=="string")if(this.exists(M))M=this.get(M);else return this.silentWarnings||console.warn("No texture found matching key: "+M),this;var w=M.key;return this.list.hasOwnProperty(w)&&(M.destroy(),this.emit(v.REMOVE,w),this.emit(v.REMOVE_KEY+w)),this},removeKey:function(M){return this.list.hasOwnProperty(M)&&delete this.list[M],this},addBase64:function(M,w){if(this.checkKey(M)){var b=this,I=new Image;I.onerror=function(){b.emit(v.ERROR,M)},I.onload=function(){var R=b.create(M,I);R&&(S.Image(R,0),b.emit(v.ADD,M,R),b.emit(v.ADD_KEY+M,R),b.emit(v.LOAD,M,R))},I.src=w}return this},getBase64:function(M,w,b,I){b===void 0&&(b="image/png"),I===void 0&&(I=.92);var R="",A=this.getFrame(M,w);if(A&&(A.source.isRenderTexture||A.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(A){var L=A.canvasData,O=a.create2D(this,L.width,L.height),F=O.getContext("2d",{willReadFrequently:!0});L.width>0&&L.height>0&&F.drawImage(A.source.image,L.x,L.y,L.width,L.height,0,0,L.width,L.height),R=O.toDataURL(b,I),a.remove(O)}return R},addImage:function(M,w,b){var I=null;return this.checkKey(M)&&(I=this.create(M,w),S.Image(I,0),b&&I.setDataSource(b),this.emit(v.ADD,M,I),this.emit(v.ADD_KEY+M,I)),I},addGLTexture:function(M,w){var b=null;if(this.checkKey(M)){var I=w.width,R=w.height;b=this.create(M,w,I,R),b.add("__BASE",0,0,0,I,R),this.emit(v.ADD,M,b),this.emit(v.ADD_KEY+M,b)}return b},addCompressedTexture:function(M,w,b){var I=null;if(this.checkKey(M)){if(I=this.create(M,w),I.add("__BASE",0,0,0,w.width,w.height),b){var R=function(L,O,F){Array.isArray(F.textures)||Array.isArray(F.frames)?S.JSONArray(L,O,F):S.JSONHash(L,O,F)};if(Array.isArray(b))for(var A=0;A<b.length;A++)R(I,A,b[A]);else R(I,0,b)}this.emit(v.ADD,M,I),this.emit(v.ADD_KEY+M,I)}return I},addRenderTexture:function(M,w){var b=null;return this.checkKey(M)&&(b=this.create(M,w),b.add("__BASE",0,0,0,w.width,w.height),this.emit(v.ADD,M,b),this.emit(v.ADD_KEY+M,b)),b},generate:function(M,w){if(this.checkKey(M)){var b=a.create(this,1,1);return w.canvas=b,g(w),this.addCanvas(M,b)}else return null},createCanvas:function(M,w,b){if(w===void 0&&(w=256),b===void 0&&(b=256),this.checkKey(M)){var I=a.create(this,w,b,f.CANVAS,!0);return this.addCanvas(M,I)}return null},addCanvas:function(M,w,b){b===void 0&&(b=!1);var I=null;return b?I=new p(this,M,w,w.width,w.height):this.checkKey(M)&&(I=new p(this,M,w,w.width,w.height),this.list[M]=I,this.emit(v.ADD,M,I),this.emit(v.ADD_KEY+M,I)),I},addDynamicTexture:function(M,w,b){var I=null;return typeof M=="string"&&!this.exists(M)?I=new l(this,M,w,b):(I=M,M=I.key),this.checkKey(M)?(this.list[M]=I,this.emit(v.ADD,M,I),this.emit(v.ADD_KEY+M,I)):I=null,I},addAtlas:function(M,w,b,I){return Array.isArray(b.textures)||Array.isArray(b.frames)?this.addAtlasJSONArray(M,w,b,I):this.addAtlasJSONHash(M,w,b,I)},addAtlasJSONArray:function(M,w,b,I){var R=null;if(w instanceof T?(M=w.key,R=w):this.checkKey(M)&&(R=this.create(M,w)),R){if(Array.isArray(b))for(var A=b.length===1,L=0;L<R.source.length;L++){var O=A?b[0]:b[L];S.JSONArray(R,L,O)}else S.JSONArray(R,0,b);I&&R.setDataSource(I),this.emit(v.ADD,M,R),this.emit(v.ADD_KEY+M,R)}return R},addAtlasJSONHash:function(M,w,b,I){var R=null;if(w instanceof T?(M=w.key,R=w):this.checkKey(M)&&(R=this.create(M,w)),R){if(Array.isArray(b))for(var A=0;A<b.length;A++)S.JSONHash(R,A,b[A]);else S.JSONHash(R,0,b);I&&R.setDataSource(I),this.emit(v.ADD,M,R),this.emit(v.ADD_KEY+M,R)}return R},addAtlasXML:function(M,w,b,I){var R=null;return w instanceof T?(M=w.key,R=w):this.checkKey(M)&&(R=this.create(M,w)),R&&(S.AtlasXML(R,0,b),I&&R.setDataSource(I),this.emit(v.ADD,M,R),this.emit(v.ADD_KEY+M,R)),R},addUnityAtlas:function(M,w,b,I){var R=null;return w instanceof T?(M=w.key,R=w):this.checkKey(M)&&(R=this.create(M,w)),R&&(S.UnityYAML(R,0,b),I&&R.setDataSource(I),this.emit(v.ADD,M,R),this.emit(v.ADD_KEY+M,R)),R},addSpriteSheet:function(M,w,b,I){var R=null;if(w instanceof T?(M=w.key,R=w):this.checkKey(M)&&(R=this.create(M,w)),R){var A=R.source[0].width,L=R.source[0].height;S.SpriteSheet(R,0,0,0,A,L,b),I&&R.setDataSource(I),this.emit(v.ADD,M,R),this.emit(v.ADD_KEY+M,R)}return R},addSpriteSheetFromAtlas:function(M,w){if(!this.checkKey(M))return null;var b=y(w,"atlas",null),I=y(w,"frame",null);if(!(!b||!I)){var R=this.get(b),A=R.get(I);if(A){var L=A.source.image;L||(L=A.source.glTexture);var O=this.create(M,L);return A.trimmed?S.SpriteSheetFromAtlas(O,A,w):S.SpriteSheet(O,0,A.cutX,A.cutY,A.cutWidth,A.cutHeight,w),this.emit(v.ADD,M,O),this.emit(v.ADD_KEY+M,O),O}}},addUint8Array:function(M,w,b,I){if(!this.checkKey(M)||w.length/4!==b*I)return null;var R=this.create(M,w,b,I);return R.add("__BASE",0,0,0,b,I),this.emit(v.ADD,M,R),this.emit(v.ADD_KEY+M,R),R},create:function(M,w,b,I){var R=null;return this.checkKey(M)&&(R=new T(this,M,w,b,I),this.list[M]=R),R},exists:function(M){return this.list.hasOwnProperty(M)},get:function(M){return M===void 0&&(M="__DEFAULT"),this.list[M]?this.list[M]:M instanceof T?M:M instanceof c?M.texture:this.list.__MISSING},cloneFrame:function(M,w){if(this.list[M])return this.list[M].get(w).clone()},getFrame:function(M,w){if(this.list[M])return this.list[M].get(w)},parseFrame:function(M){if(M){if(typeof M=="string")return this.getFrame(M);if(Array.isArray(M)&&M.length===2)return this.getFrame(M[0],M[1]);if(C(M))return this.getFrame(M.key,M.frame);if(M instanceof T)return M.get();if(M instanceof c)return M}else return},getTextureKeys:function(){var M=[];for(var w in this.list)w!=="__DEFAULT"&&w!=="__MISSING"&&w!=="__WHITE"&&w!=="__NORMAL"&&M.push(w);return M},getPixel:function(M,w,b,I){var R=this.getFrame(b,I);if(R){M-=R.x,w-=R.y;var A=R.data.cut;if(M+=A.x,w+=A.y,M>=A.x&&M<A.r&&w>=A.y&&w<A.b){var L=this._tempContext;L.clearRect(0,0,1,1),L.drawImage(R.source.image,M,w,1,1,0,0,1,1);var O=L.getImageData(0,0,1,1);return new u(O.data[0],O.data[1],O.data[2],O.data[3])}}return null},getPixelAlpha:function(M,w,b,I){var R=this.getFrame(b,I);if(R){M-=R.x,w-=R.y;var A=R.data.cut;if(M+=A.x,w+=A.y,M>=A.x&&M<A.r&&w>=A.y&&w<A.b){var L=this._tempContext;L.clearRect(0,0,1,1),L.drawImage(R.source.image,M,w,1,1,0,0,1,1);var O=L.getImageData(0,0,1,1);return O.data[3]}}return null},setTexture:function(M,w,b){return this.list[w]&&(M.texture=this.list[w],M.frame=M.texture.get(b)),M},renameTexture:function(M,w){var b=this.get(M);return b&&M!==w?(b.key=w,this.list[w]=b,delete this.list[M],!0):!1},each:function(M,w){for(var b=[null],I=1;I<arguments.length;I++)b.push(arguments[I]);for(var R in this.list)b[0]=this.list[R],M.apply(w,b)},resetStamp:function(M,w){M===void 0&&(M=1),w===void 0&&(w=16777215);var b=this.stamp;return b.setCrop(),b.setPosition(0),b.setAngle(0),b.setScale(1),b.setAlpha(M),b.setTint(w),b.setTexture("__WHITE"),b},destroy:function(){for(var M in this.list)this.list[M].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,a.remove(this._tempCanvas)}});n.exports=P},11876:(n,o,r)=>{var a=r(27919),p=r(83419),h=r(50030),u=r(29795),f=r(82751),l=new p({initialize:function(v,c,m,g,y){y===void 0&&(y=!1);var x=v.manager.game;this.renderer=x.renderer,this.texture=v,this.source=c,this.image=c.compressed?null:c,this.compressionAlgorithm=c.compressed?c.format:null,this.resolution=1,this.width=m||c.naturalWidth||c.videoWidth||c.width||0,this.height=g||c.naturalHeight||c.videoHeight||c.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=c instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&c instanceof HTMLVideoElement,this.isRenderTexture=c.type==="RenderTexture"||c.type==="DynamicTexture",this.isGLTexture=c instanceof f,this.isPowerOf2=h(this.width,this.height),this.glTexture=null,this.flipY=y,this.init(x)},init:function(d){var v=this.renderer;if(v){var c=this.source;if(v.gl){var m=this.image,g=this.flipY,y=this.width,x=this.height,C=this.scaleMode;this.isCanvas?this.glTexture=v.createCanvasTexture(m,!1,g):this.isVideo?this.glTexture=v.createVideoTexture(m,!1,g):this.isRenderTexture?this.glTexture=v.createTextureFromSource(null,y,x,C):this.isGLTexture?this.glTexture=c:this.compressionAlgorithm?this.glTexture=v.createTextureFromSource(c,void 0,void 0,C):c instanceof Uint8Array?this.glTexture=v.createUint8ArrayTexture(c,y,x,C):this.glTexture=v.createTextureFromSource(m,y,x,C)}else this.isRenderTexture&&(this.image=c.canvas)}d.config.antialias||this.setFilter(1)},setFilter:function(d){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,d),this.scaleMode=d},setFlipY:function(d){return d===void 0&&(d=!0),d===this.flipY?this:(this.flipY=d,this.update(),this)},update:function(){var d=this.renderer,v=this.image,c=this.flipY,m=d.gl;m&&this.isCanvas?d.updateCanvasTexture(v,this.glTexture,c):m&&this.isVideo&&d.updateVideoTexture(v,this.glTexture,c)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});n.exports=l},19673:n=>{var o={LINEAR:0,NEAREST:1};n.exports=o},44538:n=>{n.exports="addtexture"},63486:n=>{n.exports="addtexture-"},94851:n=>{n.exports="onerror"},29099:n=>{n.exports="onload"},8678:n=>{n.exports="ready"},86415:n=>{n.exports="removetexture"},30879:n=>{n.exports="removetexture-"},69442:(n,o,r)=>{n.exports={ADD:r(44538),ADD_KEY:r(63486),ERROR:r(94851),LOAD:r(29099),READY:r(8678),REMOVE:r(86415),REMOVE_KEY:r(30879)}},27458:(n,o,r)=>{var a=r(79291),p=r(19673),h={CanvasTexture:r(57382),DynamicTexture:r(81320),Events:r(69442),FilterMode:p,Frame:r(4327),Parsers:r(61309),Texture:r(79237),TextureManager:r(17130),TextureSource:r(11876)};h=a(!1,h,p),n.exports=h},89905:n=>{var o=function(r,a,p){if(!p.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var h=r.source[a];r.add("__BASE",a,0,0,h.width,h.height);for(var u=p.getElementsByTagName("SubTexture"),f,l=0;l<u.length;l++){var d=u[l].attributes,v=d.name.value,c=parseInt(d.x.value,10),m=parseInt(d.y.value,10),g=parseInt(d.width.value,10),y=parseInt(d.height.value,10);if(f=r.add(v,a,c,m,g,y),d.frameX){var x=Math.abs(parseInt(d.frameX.value,10)),C=Math.abs(parseInt(d.frameY.value,10)),S=parseInt(d.frameWidth.value,10),E=parseInt(d.frameHeight.value,10);f.setTrim(g,y,x,C,S,E)}}return r};n.exports=o},72893:n=>{var o=function(r,a){var p=r.source[a];return r.add("__BASE",a,0,0,p.width,p.height),r};n.exports=o},4832:n=>{var o=function(r,a){var p=r.source[a];return r.add("__BASE",a,0,0,p.width,p.height),r};n.exports=o},78566:(n,o,r)=>{var a=r(41786),p=function(h,u,f){if(!f.frames&&!f.textures){console.warn("Invalid Texture Atlas JSON Array");return}var l=h.source[u];h.add("__BASE",u,0,0,l.width,l.height);for(var d=Array.isArray(f.textures)?f.textures[u].frames:f.frames,v,c=0;c<d.length;c++){var m=d[c];if(v=h.add(m.filename,u,m.frame.x,m.frame.y,m.frame.w,m.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+m.filename);continue}m.trimmed&&v.setTrim(m.sourceSize.w,m.sourceSize.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.spriteSourceSize.w,m.spriteSourceSize.h),m.rotated&&(v.rotated=!0,v.updateUVsInverted());var g=m.anchor||m.pivot;g&&(v.customPivot=!0,v.pivotX=g.x,v.pivotY=g.y),m.scale9Borders&&v.setScale9(m.scale9Borders.x,m.scale9Borders.y,m.scale9Borders.w,m.scale9Borders.h),v.customData=a(m)}for(var y in f)y!=="frames"&&(Array.isArray(f[y])?h.customData[y]=f[y].slice(0):h.customData[y]=f[y]);return h};n.exports=p},39711:(n,o,r)=>{var a=r(41786),p=function(h,u,f){if(!f.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var l=h.source[u];h.add("__BASE",u,0,0,l.width,l.height);var d=f.frames,v;for(var c in d)if(d.hasOwnProperty(c)){var m=d[c];if(v=h.add(c,u,m.frame.x,m.frame.y,m.frame.w,m.frame.h),!v){console.warn("Invalid atlas json, frame already exists: "+c);continue}m.trimmed&&v.setTrim(m.sourceSize.w,m.sourceSize.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.spriteSourceSize.w,m.spriteSourceSize.h),m.rotated&&(v.rotated=!0,v.updateUVsInverted());var g=m.anchor||m.pivot;g&&(v.customPivot=!0,v.pivotX=g.x,v.pivotY=g.y),m.scale9Borders&&v.setScale9(m.scale9Borders.x,m.scale9Borders.y,m.scale9Borders.w,m.scale9Borders.h),v.customData=a(m)}for(var y in f)y!=="frames"&&(Array.isArray(f[y])?h.customData[y]=f[y].slice(0):h.customData[y]=f[y]);return h};n.exports=p},31403:n=>{var o=function(r){var a=[171,75,84,88,32,49,49,187,13,10,26,10],p,h=new Uint8Array(r,0,12);for(p=0;p<h.length;p++)if(h[p]!==a[p]){console.warn("KTXParser - Invalid file format");return}var u=Uint32Array.BYTES_PER_ELEMENT,f=new DataView(r,12,13*u),l=f.getUint32(0,!0)===67305985,d=f.getUint32(1*u,l);if(d!==0){console.warn("KTXParser - Only compressed formats supported");return}var v=f.getUint32(4*u,l),c=f.getUint32(6*u,l),m=f.getUint32(7*u,l),g=Math.max(1,f.getUint32(11*u,l)),y=f.getUint32(12*u,l),x=new Array(g),C=12+13*4+y,S=c,E=m;for(p=0;p<g;p++){var T=new Int32Array(r,C,1)[0];C+=4,x[p]={data:new Uint8Array(r,C,T),width:S,height:E},S=Math.max(1,S>>1),E=Math.max(1,E>>1),C+=T}return{mipmaps:x,width:c,height:m,internalFormat:v,compressed:!0,generateMipmap:!1}};n.exports=o},82038:n=>{function o(w,b,I,R,A,L,O){return O===void 0&&(O=16),Math.floor((w+I)/A)*Math.floor((b+R)/L)*O}function r(w,b){return w=Math.max(w,16),b=Math.max(b,8),w*b/4}function a(w,b){return w=Math.max(w,8),b=Math.max(b,8),w*b/2}function p(w,b){return Math.ceil(w/4)*Math.ceil(b/4)*16}function h(w,b){return o(w,b,3,3,4,4,8)}function u(w,b){return o(w,b,3,3,4,4)}function f(w,b){return o(w,b,4,3,5,4)}function l(w,b){return o(w,b,4,4,5,5)}function d(w,b){return o(w,b,5,4,6,5)}function v(w,b){return o(w,b,5,5,6,6)}function c(w,b){return o(w,b,7,4,8,5)}function m(w,b){return o(w,b,7,5,8,6)}function g(w,b){return o(w,b,7,7,8,8)}function y(w,b){return o(w,b,9,4,10,5)}function x(w,b){return o(w,b,9,5,10,6)}function C(w,b){return o(w,b,9,7,10,8)}function S(w,b){return o(w,b,9,9,10,10)}function E(w,b){return o(w,b,11,9,12,10)}function T(w,b){return o(w,b,11,11,12,12)}var P={0:{sizeFunc:r,glFormat:[35841]},1:{sizeFunc:r,glFormat:[35843]},2:{sizeFunc:a,glFormat:[35840]},3:{sizeFunc:a,glFormat:[35842]},6:{sizeFunc:h,glFormat:[36196]},7:{sizeFunc:h,glFormat:[33776,35916]},8:{sizeFunc:u,glFormat:[33777,35917]},9:{sizeFunc:u,glFormat:[33778,35918]},11:{sizeFunc:u,glFormat:[33779,35919]},14:{sizeFunc:p,glFormat:[36494,36495]},15:{sizeFunc:p,glFormat:[36492,36493]},22:{sizeFunc:h,glFormat:[37492,37493]},23:{sizeFunc:u,glFormat:[37496,37497]},24:{sizeFunc:h,glFormat:[37494,37495]},25:{sizeFunc:h,glFormat:[37488]},26:{sizeFunc:u,glFormat:[37490]},27:{sizeFunc:u,glFormat:[37808,37840]},28:{sizeFunc:f,glFormat:[37809,37841]},29:{sizeFunc:l,glFormat:[37810,37842]},30:{sizeFunc:d,glFormat:[37811,37843]},31:{sizeFunc:v,glFormat:[37812,37844]},32:{sizeFunc:c,glFormat:[37813,37845]},33:{sizeFunc:m,glFormat:[37814,37846]},34:{sizeFunc:g,glFormat:[37815,37847]},35:{sizeFunc:y,glFormat:[37816,37848]},36:{sizeFunc:x,glFormat:[37817,37849]},37:{sizeFunc:C,glFormat:[37818,37850]},38:{sizeFunc:S,glFormat:[37819,37851]},39:{sizeFunc:E,glFormat:[37820,37852]},40:{sizeFunc:T,glFormat:[37821,37853]}},M=function(w){for(var b=new Uint32Array(w,0,13),I=b[0],R=I===55727696,A=R?b[2]:b[3],L=b[4],O=P[A].glFormat[L],F=P[A].sizeFunc,G=b[11],U=b[7],z=b[6],N=52+b[12],k=new Uint8Array(w,N),D=new Array(G),V=0,B=U,W=z,H=0;H<G;H++){var Y=F(B,W);D[H]={data:new Uint8Array(k.buffer,k.byteOffset+V,Y),width:B,height:W},B=Math.max(1,B>>1),W=Math.max(1,W>>1),V+=Y}return{mipmaps:D,width:U,height:z,internalFormat:O,compressed:!0,generateMipmap:!1}};n.exports=M},75549:(n,o,r)=>{var a=r(95540),p=function(h,u,f,l,d,v,c){var m=a(c,"frameWidth",null),g=a(c,"frameHeight",m);if(m===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var y=h.source[u];h.add("__BASE",u,0,0,y.width,y.height);var x=a(c,"startFrame",0),C=a(c,"endFrame",-1),S=a(c,"margin",0),E=a(c,"spacing",0),T=Math.floor((d-S+E)/(m+E)),P=Math.floor((v-S+E)/(g+E)),M=T*P;M===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",h.key),(x>M||x<-M)&&(x=0),x<0&&(x=M+x),(C===-1||C>M||C<x)&&(C=M);for(var w=S,b=S,I=0,R=0,A=0,L=0;L<M;L++){I=0,R=0;var O=w+m,F=b+g;O>d&&(I=O-d),F>v&&(R=F-v),L>=x&&L<=C&&(h.add(A,u,f+w,l+b,m-I,g-R),A++),w+=m+E,w+m>d&&(w=S,b+=g+E)}return h};n.exports=p},47534:(n,o,r)=>{var a=r(95540),p=function(h,u,f){var l=a(f,"frameWidth",null),d=a(f,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var v=h.source[0];h.add("__BASE",0,0,0,v.width,v.height);var c=a(f,"startFrame",0),m=a(f,"endFrame",-1),g=a(f,"margin",0),y=a(f,"spacing",0),x=u.cutX,C=u.cutY,S=u.cutWidth,E=u.cutHeight,T=u.realWidth,P=u.realHeight,M=Math.floor((T-g+y)/(l+y)),w=Math.floor((P-g+y)/(d+y)),b=M*w,I=u.x,R=l-I,A=l-(T-S-I),L=u.y,O=d-L,F=d-(P-E-L);(c>b||c<-b)&&(c=0),c<0&&(c=b+c),m!==-1&&(b=c+(m+1));for(var G,U=g,z=g,N=0,k=0,D=0;D<w;D++){for(var V=D===0,B=D===w-1,W=0;W<M;W++){var H=W===0,Y=W===M-1;if(G=h.add(N,k,x+U,C+z,l,d),H||V||Y||B){var X=H?I:0,$=V?L:0,J=0,q=0;H&&(J+=l-R),Y&&(J+=l-A),V&&(q+=d-O),B&&(q+=d-F);var Q=l-J,tt=d-q;G.cutWidth=Q,G.cutHeight=tt,G.setTrim(l,d,X,$,Q,tt)}U+=y,H?U+=R:Y?U+=A:U+=l,N++}U=g,z+=y,V?z+=O:B?z+=F:z+=d}return h};n.exports=p},86147:n=>{var o=0,r=function(p,h,u,f){var l=o-f.y-f.height;p.add(u,h,f.x,l,f.width,f.height)},a=function(p,h,u){var f=p.source[h];p.add("__BASE",h,0,0,f.width,f.height),o=f.height;for(var l=u.split(`
`),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,v="",c="",m={x:0,y:0,width:0,height:0},g=0;g<l.length;g++){var y=l[g].match(d);if(y){var x=y[1]==="- ",C=y[2],S=y[3];if(x&&(c!==v&&(r(p,h,c,m),v=c),m={x:0,y:0,width:0,height:0}),C==="name"){c=S;continue}switch(C){case"x":case"y":case"width":case"height":m[C]=parseInt(S,10);break}}}return c!==v&&r(p,h,c,m),p};n.exports=a},55222:(n,o,r)=>{var a=r(50030),p=function(v){for(var c=v.mipmaps,m=1;m<c.length;m++){var g=c[m].width,y=c[m].height;if(!a(g,y))return console.warn("Mip level "+m+" is not a power-of-two size: "+g+"x"+y),!1}var x=d[v.internalFormat];return x?x(v):(console.warn("No format checker found for internal format "+v.internalFormat+". Assuming valid."),!0)};function h(v){for(var c=v.mipmaps,m=0;m<c.length;m++){var g=c[m].width,y=c[m].height;if((g<<m)%4!==0||(y<<m)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+m+" is "+g+"x"+y),!1}return!0}function u(){return!0}function f(v){var c=v.mipmaps,m=c[0];return a(m.width,m.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+m.width+"x"+m.height),!1)}function l(v){var c=v.mipmaps,m=c[0];return m.width%4!==0||m.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+m.width+"x"+m.height+" pixels"),!1):!0}var d={37488:u,37489:u,37490:u,37491:u,37492:u,37493:u,37494:u,37495:u,37496:u,37497:u,36196:u,37808:u,37809:u,37810:u,37811:u,37812:u,37813:u,37814:u,37815:u,37816:u,37817:u,37818:u,37819:u,37820:u,37821:u,37840:u,37841:u,37842:u,37843:u,37844:u,37845:u,37846:u,37847:u,37848:u,37849:u,37850:u,37851:u,37852:u,37853:u,36492:h,36493:h,36494:h,36495:h,36283:h,36284:h,36285:h,36286:h,35840:f,35841:f,35842:f,35843:f,33776:h,33777:h,33778:h,33779:h,35916:l,35917:l,35918:l,35919:l};n.exports=p},61309:(n,o,r)=>{n.exports={AtlasXML:r(89905),Canvas:r(72893),Image:r(4832),JSONArray:r(78566),JSONHash:r(39711),KTXParser:r(31403),PVRParser:r(82038),SpriteSheet:r(75549),SpriteSheetFromAtlas:r(47534),UnityYAML:r(86147)}},80341:n=>{n.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u,f,l,d,v,c,m){(l===void 0||l<=0)&&(l=32),(d===void 0||d<=0)&&(d=32),v===void 0&&(v=0),c===void 0&&(c=0),this.name=u,this.firstgid=f|0,this.imageWidth=l|0,this.imageHeight=d|0,this.imageMargin=v|0,this.imageSpacing=c|0,this.properties=m||{},this.images=[],this.total=0},containsImageIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},addImage:function(h,u,f,l){return this.images.push({gid:h,image:u,width:f,height:l}),this.total++,this}});n.exports=p},27462:(n,o,r)=>{var a=r(83419),p=new a({initialize:function(u){if(this.gids=[],u!==void 0)for(var f=0;f<u.length;++f)for(var l=u[f],d=0;d<l.total;++d)this.gids[l.firstgid+d]=l;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(h){this.gids=h?this._gids:void 0}},getTypeIncludingTile:function(h){if(h.type!==void 0&&h.type!=="")return h.type;if(!(!this.gids||h.gid===void 0)){var u=this.gids[h.gid];if(u){var f=u.getTileData(h.gid);if(f)return f.type}}},setTextureAndFrame:function(h,u,f,l){if(u===null&&this.gids&&l.gid!==void 0){var d=this.gids[l.gid];d&&(u===null&&d.image!==void 0&&(u=d.image.key),f===null&&(f=l.gid-d.firstgid),h.scene.textures.getFrame(u,f)||(u=null,f=null))}h.setTexture(u,f)},setPropertiesFromTiledObject:function(h,u){if(this.gids!==void 0&&u.gid!==void 0){var f=this.gids[u.gid];f!==void 0&&this.setFromJSON(h,f.getTileProperties(u.gid))}this.setFromJSON(h,u.properties)},setFromJSON:function(h,u){if(u){if(Array.isArray(u)){for(var f=0;f<u.length;f++){var l=u[f];h[l.name]!==void 0?h[l.name]=l.value:h.setData(l.name,l.value)}return}for(var d in u)h[d]!==void 0?h[d]=u[d]:h.setData(d,u[d])}}});n.exports=p},31989:(n,o,r)=>{var a=r(80341),p=r(87010),h=r(46177),u=r(49075),f=function(l,d,v,c,m,g,y,x){v===void 0&&(v=32),c===void 0&&(c=32),m===void 0&&(m=10),g===void 0&&(g=10),x===void 0&&(x=!1);var C=null;if(Array.isArray(y)){var S=d!==void 0?d:"map";C=h(S,a.ARRAY_2D,y,v,c,x)}else if(d!==void 0){var E=l.cache.tilemap.get(d);E?C=h(d,E.format,E.data,v,c,x):console.warn("No map data found for key "+d)}return C===null&&(C=new p({tileWidth:v,tileHeight:c,width:m,height:g})),new u(l,C)};n.exports=f},23029:(n,o,r)=>{var a=r(83419),p=r(31401),h=r(91907),u=r(62644),f=r(93232),l=new a({Mixins:[p.AlphaSingle,p.Flip,p.Visible],initialize:function(v,c,m,g,y,x,C,S){this.layer=v,this.index=c,this.x=m,this.y=g,this.width=y,this.height=x,this.right,this.bottom,this.baseWidth=C!==void 0?C:y,this.baseHeight=S!==void 0?S:x,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(d,v){return!(d<this.pixelX||v<this.pixelY||d>this.right||v>this.bottom)},copy:function(d){return this.index=d.index,this.alpha=d.alpha,this.properties=u(d.properties),this.visible=d.visible,this.setFlip(d.flipX,d.flipY),this.tint=d.tint,this.rotation=d.rotation,this.collideUp=d.collideUp,this.collideDown=d.collideDown,this.collideLeft=d.collideLeft,this.collideRight=d.collideRight,this.collisionCallback=d.collisionCallback,this.collisionCallbackContext=d.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(d){var v=this.tilemapLayer;if(v){var c=v.tileToWorldXY(this.x,this.y,void 0,d);return c.x}return this.x*this.baseWidth},getRight:function(d){var v=this.tilemapLayer;return v?this.getLeft(d)+this.width*v.scaleX:this.getLeft(d)+this.width},getTop:function(d){var v=this.tilemapLayer;if(v){var c=v.tileToWorldXY(this.x,this.y,void 0,d);return c.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(d){var v=this.tilemapLayer;return v?this.getTop(d)+this.height*v.scaleY:this.getTop(d)+this.height},getBounds:function(d,v){return v===void 0&&(v=new f),v.x=this.getLeft(d),v.y=this.getTop(d),v.width=this.getRight(d)-v.x,v.height=this.getBottom(d)-v.y,v},getCenterX:function(d){return(this.getLeft(d)+this.getRight(d))/2},getCenterY:function(d){return(this.getTop(d)+this.getBottom(d))/2},intersects:function(d,v,c,m){return!(c<=this.pixelX||m<=this.pixelY||d>=this.right||v>=this.bottom)},isInteresting:function(d,v){return d&&v?this.canCollide||this.hasInterestingFace:d?this.collides:v?this.hasInterestingFace:!1},resetCollision:function(d){if(d===void 0&&(d=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,d){var v=this.tilemapLayer;v&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(d,v,c,m,g){if(v===void 0&&(v=d),c===void 0&&(c=d),m===void 0&&(m=d),g===void 0&&(g=!0),this.collideLeft=d,this.collideRight=v,this.collideUp=c,this.collideDown=m,this.faceLeft=d,this.faceRight=v,this.faceTop=c,this.faceBottom=m,g){var y=this.tilemapLayer;y&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(d,v){return d===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=d,this.collisionCallbackContext=v),this},setSize:function(d,v,c,m){return d!==void 0&&(this.width=d),v!==void 0&&(this.height=v),c!==void 0&&(this.baseWidth=c),m!==void 0&&(this.baseHeight=m),this.updatePixelXY(),this},updatePixelXY:function(){var d=this.layer.orientation;if(d===h.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(d===h.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(d===h.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(d===h.HEXAGONAL){var v=this.layer.staggerAxis,c=this.layer.staggerIndex,m=this.layer.hexSideLength,g,y;v==="y"?(y=(this.baseHeight-m)/2+m,c==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*y):v==="x"&&(g=(this.baseWidth-m)/2+m,this.pixelX=this.x*g,c==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var d=this.layer.tilemapLayer;if(d){var v=d.gidMap[this.index];if(v)return v}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var d=this.tilemapLayer;return d?d.tilemap:null}}});n.exports=l},49075:(n,o,r)=>{var a=r(84101),p=r(83419),h=r(39506),u=r(80341),f=r(95540),l=r(14977),d=r(27462),v=r(91907),c=r(36305),m=r(19133),g=r(68287),y=r(23029),x=r(81086),C=r(20442),S=r(33629),E=new p({initialize:function(P,M){this.scene=P,this.tileWidth=M.tileWidth,this.tileHeight=M.tileHeight,this.width=M.width,this.height=M.height,this.orientation=M.orientation,this.renderOrder=M.renderOrder,this.format=M.format,this.version=M.version,this.properties=M.properties,this.widthInPixels=M.widthInPixels,this.heightInPixels=M.heightInPixels,this.imageCollections=M.imageCollections,this.images=M.images,this.layers=M.layers,this.tiles=M.tiles,this.tilesets=M.tilesets,this.objects=M.objects,this.currentLayerIndex=0,this.hexSideLength=M.hexSideLength;var w=this.orientation;this._convert={WorldToTileXY:x.GetWorldToTileXYFunction(w),WorldToTileX:x.GetWorldToTileXFunction(w),WorldToTileY:x.GetWorldToTileYFunction(w),TileToWorldXY:x.GetTileToWorldXYFunction(w),TileToWorldX:x.GetTileToWorldXFunction(w),TileToWorldY:x.GetTileToWorldYFunction(w),GetTileCorners:x.GetTileCornersFunction(w)}},setRenderOrder:function(T){var P=["right-down","left-down","right-up","left-up"];return typeof T=="number"&&(T=P[T]),P.indexOf(T)>-1&&(this.renderOrder=T),this},addTilesetImage:function(T,P,M,w,b,I,R,A){if(T===void 0)return null;P==null&&(P=T);var L=this.scene.sys.textures;if(!L.exists(P))return console.warn('Texture key "%s" not found',P),null;var O=L.get(P),F=this.getTilesetIndex(T);if(F===null&&this.format===u.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',T,this.tilesets),null;var G=this.tilesets[F];return G?((M||w)&&G.setTileSize(M,w),(b||I)&&G.setSpacing(b,I),G.setImage(O),G):(M===void 0&&(M=this.tileWidth),w===void 0&&(w=this.tileHeight),b===void 0&&(b=0),I===void 0&&(I=0),R===void 0&&(R=0),A===void 0&&(A={x:0,y:0}),G=new S(T,R,M,w,b,I,void 0,void 0,A),G.setImage(O),this.tilesets.push(G),this.tiles=a(this),G)},copy:function(T,P,M,w,b,I,R,A){return A=this.getLayer(A),A!==null?(x.Copy(T,P,M,w,b,I,R,A),this):null},createBlankLayer:function(T,P,M,w,b,I,R,A){M===void 0&&(M=0),w===void 0&&(w=0),b===void 0&&(b=this.width),I===void 0&&(I=this.height),R===void 0&&(R=this.tileWidth),A===void 0&&(A=this.tileHeight);var L=this.getLayerIndex(T);if(L!==null)return console.warn("Invalid Tilemap Layer ID: "+T),null;for(var O=new l({name:T,tileWidth:R,tileHeight:A,width:b,height:I,orientation:this.orientation,hexSideLength:this.hexSideLength}),F,G=0;G<I;G++){F=[];for(var U=0;U<b;U++)F.push(new y(O,-1,U,G,R,A,this.tileWidth,this.tileHeight));O.data.push(F)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var z=new C(this.scene,this,this.currentLayerIndex,P,M,w);return z.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(z),z},createLayer:function(T,P,M,w){var b=this.getLayerIndex(T);if(b===null)return console.warn("Invalid Tilemap Layer ID: "+T),typeof T=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var I=this.layers[b];if(I.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+T),null;this.currentLayerIndex=b,M===void 0&&(M=I.x),w===void 0&&(w=I.y);var R=new C(this.scene,this,b,P,M,w);return R.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(R),R},createFromObjects:function(T,P,M){M===void 0&&(M=!0);var w=[],b=this.getObjectLayer(T);if(!b)return console.warn("createFromObjects: Invalid objectLayerName given: "+T),w;var I=new d(M?this.tilesets:void 0);Array.isArray(P)||(P=[P]);for(var R=b.objects,A=0;A<P.length;A++){var L=P[A],O=f(L,"id",null),F=f(L,"gid",null),G=f(L,"name",null),U=f(L,"type",null);I.enabled=!f(L,"ignoreTileset",null);for(var z,N=[],k=0;k<R.length;k++)z=R[k],(O===null&&F===null&&G===null&&U===null||O!==null&&z.id===O||F!==null&&z.gid===F||G!==null&&z.name===G||U!==null&&I.getTypeIncludingTile(z)===U)&&N.push(z);for(var D=f(L,"classType",g),V=f(L,"scene",this.scene),B=f(L,"container",null),W=f(L,"key",null),H=f(L,"frame",null),Y=0;Y<N.length;Y++){z=N[Y];var X=new D(V);if(X.setName(z.name),X.setPosition(z.x,z.y),I.setTextureAndFrame(X,W,H,z),z.width&&(X.displayWidth=z.width),z.height&&(X.displayHeight=z.height),this.orientation===v.ISOMETRIC){var $=this.tileWidth/this.tileHeight,J={x:X.x-X.y,y:(X.x+X.y)/$};X.x=J.x,X.y=J.y}var q={x:X.originX*z.width,y:(X.originY-(z.gid?1:0))*z.height};if(z.rotation){var Q=h(z.rotation);c(q,Q),X.rotation=Q}X.x+=q.x,X.y+=q.y,(z.flippedHorizontal!==void 0||z.flippedVertical!==void 0)&&X.setFlip(z.flippedHorizontal,z.flippedVertical),z.visible||(X.visible=!1),I.setPropertiesFromTiledObject(X,z),B?B.add(X):V.add.existing(X),w.push(X)}}return w},createFromTiles:function(T,P,M,w,b,I){return I=this.getLayer(I),I===null?null:x.CreateFromTiles(T,P,M,w,b,I)},fill:function(T,P,M,w,b,I,R){return I===void 0&&(I=!0),R=this.getLayer(R),R===null?null:(x.Fill(T,P,M,w,b,I,R),this)},filterObjects:function(T,P,M){if(typeof T=="string"){var w=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+w),null}return T.objects.filter(P,M)},filterTiles:function(T,P,M,w,b,I,R,A){return A=this.getLayer(A),A===null?null:x.FilterTiles(T,P,M,w,b,I,R,A)},findByIndex:function(T,P,M,w){return w=this.getLayer(w),w===null?null:x.FindByIndex(T,P,M,w)},findObject:function(T,P,M){if(typeof T=="string"){var w=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+w),null}return T.objects.find(P,M)||null},findTile:function(T,P,M,w,b,I,R,A){return A=this.getLayer(A),A===null?null:x.FindTile(T,P,M,w,b,I,R,A)},forEachTile:function(T,P,M,w,b,I,R,A){return A=this.getLayer(A),A===null?null:(x.ForEachTile(T,P,M,w,b,I,R,A),this)},getImageIndex:function(T){return this.getIndex(this.images,T)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(T){return T.name})},getIndex:function(T,P){for(var M=0;M<T.length;M++)if(T[M].name===P)return M;return null},getLayer:function(T){var P=this.getLayerIndex(T);return P!==null?this.layers[P]:null},getObjectLayer:function(T){var P=this.getIndex(this.objects,T);return P!==null?this.objects[P]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(T){return T.name})},getLayerIndex:function(T){return T===void 0?this.currentLayerIndex:typeof T=="string"?this.getLayerIndexByName(T):typeof T=="number"&&T<this.layers.length?T:T instanceof C&&T.tilemap===this?T.layerIndex:null},getLayerIndexByName:function(T){return this.getIndex(this.layers,T)},getTileAt:function(T,P,M,w){return w=this.getLayer(w),w===null?null:x.GetTileAt(T,P,M,w)},getTileAtWorldXY:function(T,P,M,w,b){return b=this.getLayer(b),b===null?null:x.GetTileAtWorldXY(T,P,M,w,b)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(T){return T.name})},getTilesWithin:function(T,P,M,w,b,I){return I=this.getLayer(I),I===null?null:x.GetTilesWithin(T,P,M,w,b,I)},getTilesWithinShape:function(T,P,M,w){return w=this.getLayer(w),w===null?null:x.GetTilesWithinShape(T,P,M,w)},getTilesWithinWorldXY:function(T,P,M,w,b,I,R){return R=this.getLayer(R),R===null?null:x.GetTilesWithinWorldXY(T,P,M,w,b,I,R)},getTileset:function(T){var P=this.getIndex(this.tilesets,T);return P!==null?this.tilesets[P]:null},getTilesetIndex:function(T){return this.getIndex(this.tilesets,T)},hasTileAt:function(T,P,M){return M=this.getLayer(M),M===null?null:x.HasTileAt(T,P,M)},hasTileAtWorldXY:function(T,P,M,w){return w=this.getLayer(w),w===null?null:x.HasTileAtWorldXY(T,P,M,w)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(T){this.setLayer(T)}},putTileAt:function(T,P,M,w,b){return w===void 0&&(w=!0),b=this.getLayer(b),b===null?null:x.PutTileAt(T,P,M,w,b)},putTileAtWorldXY:function(T,P,M,w,b,I){return w===void 0&&(w=!0),I=this.getLayer(I),I===null?null:x.PutTileAtWorldXY(T,P,M,w,b,I)},putTilesAt:function(T,P,M,w,b){return w===void 0&&(w=!0),b=this.getLayer(b),b===null?null:(x.PutTilesAt(T,P,M,w,b),this)},randomize:function(T,P,M,w,b,I){return I=this.getLayer(I),I===null?null:(x.Randomize(T,P,M,w,b,I),this)},calculateFacesAt:function(T,P,M){return M=this.getLayer(M),M===null?null:(x.CalculateFacesAt(T,P,M),this)},calculateFacesWithin:function(T,P,M,w,b){return b=this.getLayer(b),b===null?null:(x.CalculateFacesWithin(T,P,M,w,b),this)},removeLayer:function(T){var P=this.getLayerIndex(T);if(P!==null){m(this.layers,P);for(var M=P;M<this.layers.length;M++)this.layers[M].tilemapLayer&&this.layers[M].tilemapLayer.layerIndex--;return this.currentLayerIndex===P&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(T){var P=this.getLayerIndex(T);return P!==null?(T=this.layers[P],T.tilemapLayer.destroy(),m(this.layers,P),this.currentLayerIndex===P&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var T=this.layers,P=0;P<T.length;P++)T[P].tilemapLayer&&T[P].tilemapLayer.destroy(!1);return T.length=0,this.currentLayerIndex=0,this},removeTile:function(T,P,M){P===void 0&&(P=-1),M===void 0&&(M=!0);var w=[];Array.isArray(T)||(T=[T]);for(var b=0;b<T.length;b++){var I=T[b];w.push(this.removeTileAt(I.x,I.y,!0,M,I.tilemapLayer)),P>-1&&this.putTileAt(P,I.x,I.y,M,I.tilemapLayer)}return w},removeTileAt:function(T,P,M,w,b){return M===void 0&&(M=!0),w===void 0&&(w=!0),b=this.getLayer(b),b===null?null:x.RemoveTileAt(T,P,M,w,b)},removeTileAtWorldXY:function(T,P,M,w,b,I){return M===void 0&&(M=!0),w===void 0&&(w=!0),I=this.getLayer(I),I===null?null:x.RemoveTileAtWorldXY(T,P,M,w,b,I)},renderDebug:function(T,P,M){return M=this.getLayer(M),M===null?null:(this.orientation===v.ORTHOGONAL&&x.RenderDebug(T,P,M),this)},renderDebugFull:function(T,P){for(var M=this.layers,w=0;w<M.length;w++)x.RenderDebug(T,P,M[w]);return this},replaceByIndex:function(T,P,M,w,b,I,R){return R=this.getLayer(R),R===null?null:(x.ReplaceByIndex(T,P,M,w,b,I,R),this)},setCollision:function(T,P,M,w,b){return P===void 0&&(P=!0),M===void 0&&(M=!0),b===void 0&&(b=!0),w=this.getLayer(w),w===null?null:(x.SetCollision(T,P,M,w,b),this)},setCollisionBetween:function(T,P,M,w,b){return M===void 0&&(M=!0),w===void 0&&(w=!0),b=this.getLayer(b),b===null?null:(x.SetCollisionBetween(T,P,M,w,b),this)},setCollisionByProperty:function(T,P,M,w){return P===void 0&&(P=!0),M===void 0&&(M=!0),w=this.getLayer(w),w===null?null:(x.SetCollisionByProperty(T,P,M,w),this)},setCollisionByExclusion:function(T,P,M,w){return P===void 0&&(P=!0),M===void 0&&(M=!0),w=this.getLayer(w),w===null?null:(x.SetCollisionByExclusion(T,P,M,w),this)},setCollisionFromCollisionGroup:function(T,P,M){return T===void 0&&(T=!0),P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(x.SetCollisionFromCollisionGroup(T,P,M),this)},setTileIndexCallback:function(T,P,M,w){return w=this.getLayer(w),w===null?null:(x.SetTileIndexCallback(T,P,M,w),this)},setTileLocationCallback:function(T,P,M,w,b,I,R){return R=this.getLayer(R),R===null?null:(x.SetTileLocationCallback(T,P,M,w,b,I,R),this)},setLayer:function(T){var P=this.getLayerIndex(T);return P!==null&&(this.currentLayerIndex=P),this},setBaseTileSize:function(T,P){this.tileWidth=T,this.tileHeight=P,this.widthInPixels=this.width*T,this.heightInPixels=this.height*P;for(var M=0;M<this.layers.length;M++){this.layers[M].baseTileWidth=T,this.layers[M].baseTileHeight=P;for(var w=this.layers[M].data,b=this.layers[M].width,I=this.layers[M].height,R=0;R<I;R++)for(var A=0;A<b;A++){var L=w[R][A];L!==null&&L.setSize(void 0,void 0,T,P)}}return this},setLayerTileSize:function(T,P,M){if(M=this.getLayer(M),M===null)return this;M.tileWidth=T,M.tileHeight=P;for(var w=M.data,b=M.width,I=M.height,R=0;R<I;R++)for(var A=0;A<b;A++){var L=w[R][A];L!==null&&L.setSize(T,P)}return this},shuffle:function(T,P,M,w,b){return b=this.getLayer(b),b===null?null:(x.Shuffle(T,P,M,w,b),this)},swapByIndex:function(T,P,M,w,b,I,R){return R=this.getLayer(R),R===null?null:(x.SwapByIndex(T,P,M,w,b,I,R),this)},tileToWorldX:function(T,P,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldX(T,P,M)},tileToWorldY:function(T,P,M){return M=this.getLayer(M),M===null?null:this._convert.TileToWorldY(T,P,M)},tileToWorldXY:function(T,P,M,w,b){return b=this.getLayer(b),b===null?null:this._convert.TileToWorldXY(T,P,M,w,b)},getTileCorners:function(T,P,M,w){return w=this.getLayer(w),w===null?null:this._convert.GetTileCorners(T,P,M,w)},weightedRandomize:function(T,P,M,w,b,I){return I=this.getLayer(I),I===null?null:(x.WeightedRandomize(P,M,w,b,T,I),this)},worldToTileX:function(T,P,M,w){return w=this.getLayer(w),w===null?null:this._convert.WorldToTileX(T,P,M,w)},worldToTileY:function(T,P,M,w){return w=this.getLayer(w),w===null?null:this._convert.WorldToTileY(T,P,M,w)},worldToTileXY:function(T,P,M,w,b,I){return I=this.getLayer(I),I===null?null:this._convert.WorldToTileXY(T,P,M,w,b,I)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});n.exports=E},45939:(n,o,r)=>{var a=r(44603),p=r(31989);a.register("tilemap",function(h){var u=h!==void 0?h:{};return p(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},46029:(n,o,r)=>{var a=r(39429),p=r(31989);a.register("tilemap",function(h,u,f,l,d,v,c){return h===null&&(h=void 0),u===null&&(u=void 0),f===null&&(f=void 0),l===null&&(l=void 0),d===null&&(d=void 0),p(this.scene,h,u,f,l,d,v,c)})},20442:(n,o,r)=>{var a=r(83419),p=r(78389),h=r(31401),u=r(95643),f=r(81086),l=r(19218),d=r(26099),v=new a({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.Transform,h.Visible,h.ScrollFactor,p,l],initialize:function(m,g,y,x,C,S){u.call(this,m,"TilemapLayer"),this.isTilemap=!0,this.tilemap=g,this.layerIndex=y,this.layer=g.layers[y],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=f.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new d,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(x),this.setAlpha(this.layer.alpha),this.setPosition(C,S),this.setOrigin(0,0),this.setSize(g.tileWidth*this.layer.width,g.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(c){var m=[],g=[],y=this.tilemap;Array.isArray(c)||(c=[c]);for(var x=0;x<c.length;x++){var C=c[x];if(typeof C=="string"&&(C=y.getTileset(C)),C){g.push(C);for(var S=C.firstgid,E=0;E<C.total;E++)m[S+E]=C}}this.gidMap=m,this.tileset=g},setRenderOrder:function(c){var m=["right-down","left-down","right-up","left-up"];return typeof c=="string"&&(c=m.indexOf(c)),c>=0&&c<4&&(this._renderOrder=c),this},calculateFacesAt:function(c,m){return f.CalculateFacesAt(c,m,this.layer),this},calculateFacesWithin:function(c,m,g,y){return f.CalculateFacesWithin(c,m,g,y,this.layer),this},createFromTiles:function(c,m,g,y,x){return f.CreateFromTiles(c,m,g,y,x,this.layer)},cull:function(c){return this.cullCallback(this.layer,c,this.culledTiles,this._renderOrder)},copy:function(c,m,g,y,x,C,S){return f.Copy(c,m,g,y,x,C,S,this.layer),this},fill:function(c,m,g,y,x,C){return f.Fill(c,m,g,y,x,C,this.layer),this},filterTiles:function(c,m,g,y,x,C,S){return f.FilterTiles(c,m,g,y,x,C,S,this.layer)},findByIndex:function(c,m,g){return f.FindByIndex(c,m,g,this.layer)},findTile:function(c,m,g,y,x,C,S){return f.FindTile(c,m,g,y,x,C,S,this.layer)},forEachTile:function(c,m,g,y,x,C,S){return f.ForEachTile(c,m,g,y,x,C,S,this.layer),this},setTint:function(c,m,g,y,x,C){c===void 0&&(c=16777215);var S=function(E){E.tint=c,E.tintFill=!1};return this.forEachTile(S,this,m,g,y,x,C)},setTintFill:function(c,m,g,y,x,C){c===void 0&&(c=16777215);var S=function(E){E.tint=c,E.tintFill=!0};return this.forEachTile(S,this,m,g,y,x,C)},getTileAt:function(c,m,g){return f.GetTileAt(c,m,g,this.layer)},getTileAtWorldXY:function(c,m,g,y){return f.GetTileAtWorldXY(c,m,g,y,this.layer)},getIsoTileAtWorldXY:function(c,m,g,y,x){g===void 0&&(g=!0);var C=this.tempVec;return f.IsometricWorldToTileXY(c,m,!0,C,x,this.layer,g),this.getTileAt(C.x,C.y,y)},getTilesWithin:function(c,m,g,y,x){return f.GetTilesWithin(c,m,g,y,x,this.layer)},getTilesWithinShape:function(c,m,g){return f.GetTilesWithinShape(c,m,g,this.layer)},getTilesWithinWorldXY:function(c,m,g,y,x,C){return f.GetTilesWithinWorldXY(c,m,g,y,x,C,this.layer)},hasTileAt:function(c,m){return f.HasTileAt(c,m,this.layer)},hasTileAtWorldXY:function(c,m,g){return f.HasTileAtWorldXY(c,m,g,this.layer)},putTileAt:function(c,m,g,y){return f.PutTileAt(c,m,g,y,this.layer)},putTileAtWorldXY:function(c,m,g,y,x){return f.PutTileAtWorldXY(c,m,g,y,x,this.layer)},putTilesAt:function(c,m,g,y){return f.PutTilesAt(c,m,g,y,this.layer),this},randomize:function(c,m,g,y,x){return f.Randomize(c,m,g,y,x,this.layer),this},removeTileAt:function(c,m,g,y){return f.RemoveTileAt(c,m,g,y,this.layer)},removeTileAtWorldXY:function(c,m,g,y,x){return f.RemoveTileAtWorldXY(c,m,g,y,x,this.layer)},renderDebug:function(c,m){return f.RenderDebug(c,m,this.layer),this},replaceByIndex:function(c,m,g,y,x,C){return f.ReplaceByIndex(c,m,g,y,x,C,this.layer),this},setSkipCull:function(c){return c===void 0&&(c=!0),this.skipCull=c,this},setCullPadding:function(c,m){return c===void 0&&(c=1),m===void 0&&(m=1),this.cullPaddingX=c,this.cullPaddingY=m,this},setCollision:function(c,m,g,y){return f.SetCollision(c,m,g,this.layer,y),this},setCollisionBetween:function(c,m,g,y){return f.SetCollisionBetween(c,m,g,y,this.layer),this},setCollisionByProperty:function(c,m,g){return f.SetCollisionByProperty(c,m,g,this.layer),this},setCollisionByExclusion:function(c,m,g){return f.SetCollisionByExclusion(c,m,g,this.layer),this},setCollisionFromCollisionGroup:function(c,m){return f.SetCollisionFromCollisionGroup(c,m,this.layer),this},setTileIndexCallback:function(c,m,g){return f.SetTileIndexCallback(c,m,g,this.layer),this},setTileLocationCallback:function(c,m,g,y,x,C){return f.SetTileLocationCallback(c,m,g,y,x,C,this.layer),this},shuffle:function(c,m,g,y){return f.Shuffle(c,m,g,y,this.layer),this},swapByIndex:function(c,m,g,y,x,C){return f.SwapByIndex(c,m,g,y,x,C,this.layer),this},tileToWorldX:function(c,m){return this.tilemap.tileToWorldX(c,m,this)},tileToWorldY:function(c,m){return this.tilemap.tileToWorldY(c,m,this)},tileToWorldXY:function(c,m,g,y){return this.tilemap.tileToWorldXY(c,m,g,y,this)},getTileCorners:function(c,m,g){return this.tilemap.getTileCorners(c,m,g,this)},weightedRandomize:function(c,m,g,y,x){return f.WeightedRandomize(m,g,y,x,c,this.layer),this},worldToTileX:function(c,m,g){return this.tilemap.worldToTileX(c,m,g,this)},worldToTileY:function(c,m,g){return this.tilemap.worldToTileY(c,m,g,this)},worldToTileXY:function(c,m,g,y,x){return this.tilemap.worldToTileXY(c,m,g,y,x,this)},destroy:function(c){c===void 0&&(c=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),c&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});n.exports=v},16153:(n,o,r)=>{var a=r(61340),p=new a,h=new a,u=new a,f=function(l,d,v,c){var m=d.cull(v),g=m.length,y=v.alpha*d.alpha;if(!(g===0||y<=0)){var x=p,C=h,S=u;C.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),x.copyFrom(v.matrix);var E=l.currentContext,T=d.gidMap;E.save(),c?(x.multiplyWithOffset(c,-v.scrollX*d.scrollFactorX,-v.scrollY*d.scrollFactorY),C.e=d.x,C.f=d.y,x.multiply(C,S),S.copyToContext(E)):(C.e-=v.scrollX*d.scrollFactorX,C.f-=v.scrollY*d.scrollFactorY,C.copyToContext(E)),(!l.antialias||d.scaleX>1||d.scaleY>1)&&(E.imageSmoothingEnabled=!1);for(var P=0;P<g;P++){var M=m[P],w=T[M.index];if(w){var b=w.image.getSourceImage(),I=w.getTileTextureCoordinates(M.index),R=w.tileWidth,A=w.tileHeight;if(!(I===null||R===0||A===0)){var L=R*.5,O=A*.5;I.x+=w.tileOffset.x,I.y+=w.tileOffset.y,E.save(),E.translate(M.pixelX+L,M.pixelY+O),M.rotation!==0&&E.rotate(M.rotation),(M.flipX||M.flipY)&&E.scale(M.flipX?-1:1,M.flipY?-1:1),E.globalAlpha=y*M.alpha,E.drawImage(b,I.x,I.y,R,A,-L,-O,R,A),E.restore()}}}E.restore()}};n.exports=f},19218:(n,o,r)=>{var a=r(29747),p=a,h=a;p=r(99558),h=r(16153),n.exports={renderWebGL:p,renderCanvas:h}},99558:(n,o,r)=>{var a=r(70554),p=function(h,u,f){var l=u.cull(f),d=l.length,v=f.alpha*u.alpha;if(!(d===0||v<=0)){var c=u.gidMap,m=h.pipelines.set(u.pipeline,u),g=a.getTintAppendFloatAlpha,y=u.scrollFactorX,x=u.scrollFactorY,C=u.x,S=u.y,E=u.scaleX,T=u.scaleY;h.pipelines.preBatch(u);for(var P=0;P<d;P++){var M=l[P],w=c[M.index];if(w){var b=w.getTileTextureCoordinates(M.index),I=w.tileWidth,R=w.tileHeight;if(!(!b||I===0||R===0)){var A=I*.5,L=R*.5,O=w.glTexture,F=m.setTexture2D(O,u),G=I,U=R,z=b.x,N=b.y,k=w.tileOffset.x,D=w.tileOffset.y,V=g(M.tint,v*M.alpha);m.batchTexture(u,O,O.width,O.height,C+M.pixelX*E+(A*E-k),S+M.pixelY*T+(L*T-D),I,R,E,T,M.rotation,M.flipX,M.flipY,y,x,A,L,z,N,G,U,V,V,V,V,M.tintFill,0,0,f,null,!0,F,!0)}}}h.pipelines.postBatch(u)}};n.exports=p},33629:(n,o,r)=>{var a=r(83419),p=r(26099),h=new a({initialize:function(f,l,d,v,c,m,g,y,x){(d===void 0||d<=0)&&(d=32),(v===void 0||v<=0)&&(v=32),c===void 0&&(c=0),m===void 0&&(m=0),g===void 0&&(g={}),y===void 0&&(y={}),this.name=f,this.firstgid=l,this.tileWidth=d,this.tileHeight=v,this.tileMargin=c,this.tileSpacing=m,this.tileProperties=g,this.tileData=y,this.tileOffset=new p,x!==void 0&&this.tileOffset.set(x.x,x.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(u){return this.containsTileIndex(u)?this.tileProperties[u-this.firstgid]:null},getTileData:function(u){return this.containsTileIndex(u)?this.tileData[u-this.firstgid]:null},getTileCollisionGroup:function(u){var f=this.getTileData(u);return f&&f.objectgroup?f.objectgroup:null},containsTileIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},getTileTextureCoordinates:function(u){return this.containsTileIndex(u)?this.texCoordinates[u-this.firstgid]:null},setImage:function(u){this.image=u;var f=u.get(),l=u.getFrameBounds();return this.glTexture=f.source.glTexture,f.width>l.width||f.height>l.height?this.updateTileData(f.width,f.height):this.updateTileData(l.width,l.height,l.x,l.y),this},setTileSize:function(u,f){return u!==void 0&&(this.tileWidth=u),f!==void 0&&(this.tileHeight=f),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(u,f){return u!==void 0&&(this.tileMargin=u),f!==void 0&&(this.tileSpacing=f),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(u,f,l,d){l===void 0&&(l=0),d===void 0&&(d=0);var v=(f-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),c=(u-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(v%1!==0||c%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),v=Math.floor(v),c=Math.floor(c),this.rows=v,this.columns=c,this.total=v*c,this.texCoordinates.length=0;for(var m=this.tileMargin+l,g=this.tileMargin+d,y=0;y<this.rows;y++){for(var x=0;x<this.columns;x++)this.texCoordinates.push({x:m,y:g}),m+=this.tileWidth+this.tileSpacing;m=this.tileMargin+l,g+=this.tileHeight+this.tileSpacing}return this}});n.exports=h},72023:(n,o,r)=>{var a=r(7423),p=function(h,u,f){var l=a(h,u,!0,f),d=a(h,u-1,!0,f),v=a(h,u+1,!0,f),c=a(h-1,u,!0,f),m=a(h+1,u,!0,f),g=l&&l.collides;return g&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),d&&d.collides&&(g&&(l.faceTop=!1),d.faceBottom=!g),v&&v.collides&&(g&&(l.faceBottom=!1),v.faceTop=!g),c&&c.collides&&(g&&(l.faceLeft=!1),c.faceRight=!g),m&&m.collides&&(g&&(l.faceRight=!1),m.faceLeft=!g),l&&!l.collides&&l.resetFaces(),l};n.exports=p},42573:(n,o,r)=>{var a=r(7423),p=r(7386),h=function(u,f,l,d,v){for(var c=null,m=null,g=null,y=null,x=p(u,f,l,d,null,v),C=0;C<x.length;C++){var S=x[C];S&&(S.collides?(c=a(S.x,S.y-1,!0,v),m=a(S.x,S.y+1,!0,v),g=a(S.x-1,S.y,!0,v),y=a(S.x+1,S.y,!0,v),S.faceTop=!(c&&c.collides),S.faceBottom=!(m&&m.collides),S.faceLeft=!(g&&g.collides),S.faceRight=!(y&&y.collides)):S.resetFaces())}};n.exports=h},33528:(n,o,r)=>{var a=r(26099),p=new a,h=function(u,f,l,d){var v=l.tilemapLayer,c=v.cullPaddingX,m=v.cullPaddingY,g=v.tilemap.tileToWorldXY(u,f,p,d,v);return g.x>d.worldView.x+v.scaleX*l.tileWidth*(-c-.5)&&g.x<d.worldView.right+v.scaleX*l.tileWidth*(c-.5)&&g.y>d.worldView.y+v.scaleY*l.tileHeight*(-m-1)&&g.y<d.worldView.bottom+v.scaleY*l.tileHeight*(m-.5)};n.exports=h},1785:(n,o,r)=>{var a=r(42573),p=r(7386),h=r(62991),u=r(23029),f=function(l,d,v,c,m,g,y,x){y===void 0&&(y=!0);var C=p(l,d,v,c,null,x),S=[];C.forEach(function(I){var R=new u(I.layer,I.index,I.x,I.y,I.width,I.height,I.baseWidth,I.baseHeight);R.copy(I),S.push(R)});for(var E=m-l,T=g-d,P=0;P<S.length;P++){var M=S[P],w=M.x+E,b=M.y+T;h(w,b,x)&&x.data[b][w]&&(M.x=w,M.y=b,M.updatePixelXY(),x.data[b][w]=M)}y&&a(m-1,g-1,v+2,c+2,x),C.length=0,S.length=0};n.exports=f},78419:(n,o,r)=>{var a=r(62644),p=r(7386),h=r(27987),u=function(f,l,d,v,c,m){d||(d={}),Array.isArray(f)||(f=[f]);var g=m.tilemapLayer;v||(v=g.scene),c||(c=v.cameras.main);var y=m.width,x=m.height,C=p(0,0,y,x,null,m),S=[],E,T=function(b,I,R){for(var A=0;A<R.length;A++){var L=R[A];b.hasOwnProperty(L)||(b[L]=I[L])}};for(E=0;E<C.length;E++){var P=C[E],M=a(d);if(f.indexOf(P.index)!==-1){var w=g.tileToWorldXY(P.x,P.y,void 0,c,m);M.x=w.x,M.y=w.y,T(M,P,["rotation","flipX","flipY","alpha","visible","tint"]),M.hasOwnProperty("origin")||(M.x+=P.width*.5,M.y+=P.height*.5),M.hasOwnProperty("useSpriteSheet")&&(M.key=P.tileset.image,M.frame=P.index-P.tileset.firstgid),S.push(v.make.sprite(M))}}if(Array.isArray(l))for(E=0;E<f.length;E++)h(f[E],l[E],0,0,y,x,m);else if(l!==null)for(E=0;E<f.length;E++)h(f[E],l,0,0,y,x,m);return S};n.exports=u},19545:(n,o,r)=>{var a=r(87841),p=r(63448),h=r(56583),u=new a,f=function(l,d){var v=l.tilemapLayer.tilemap,c=l.tilemapLayer,m=Math.floor(v.tileWidth*c.scaleX),g=Math.floor(v.tileHeight*c.scaleY),y=h(d.worldView.x-c.x,m,0,!0)-c.cullPaddingX,x=p(d.worldView.right-c.x,m,0,!0)+c.cullPaddingX,C=h(d.worldView.y-c.y,g,0,!0)-c.cullPaddingY,S=p(d.worldView.bottom-c.y,g,0,!0)+c.cullPaddingY;return u.setTo(y,C,x-y,S-C)};n.exports=f},30003:(n,o,r)=>{var a=r(19545),p=r(32483),h=function(u,f,l,d){l===void 0&&(l=[]),d===void 0&&(d=0),l.length=0;var v=u.tilemapLayer,c=a(u,f);return(v.skipCull||v.scrollFactorX!==1||v.scrollFactorY!==1)&&(c.left=0,c.right=u.width,c.top=0,c.bottom=u.height),p(u,c,d,l),l};n.exports=h},35137:(n,o,r)=>{var a=r(7386),p=r(42573),h=r(20576),u=function(f,l,d,v,c,m,g){for(var y=g.collideIndexes.indexOf(f)!==-1,x=a(l,d,v,c,null,g),C=0;C<x.length;C++)x[C].index=f,h(x[C],y);m&&p(l-1,d-1,v+2,c+2,g)};n.exports=u},40253:(n,o,r)=>{var a=r(7386),p=function(h,u,f,l,d,v,c,m){var g=a(f,l,d,v,c,m);return g.filter(h,u)};n.exports=p},52692:n=>{var o=function(r,a,p,h){a===void 0&&(a=0),p===void 0&&(p=!1);var u=0,f,l,d;if(p){for(l=h.height-1;l>=0;l--)for(f=h.width-1;f>=0;f--)if(d=h.data[l][f],d&&d.index===r){if(u===a)return d;u+=1}}else for(l=0;l<h.height;l++)for(f=0;f<h.width;f++)if(d=h.data[l][f],d&&d.index===r){if(u===a)return d;u+=1}return null};n.exports=o},66151:(n,o,r)=>{var a=r(7386),p=function(h,u,f,l,d,v,c,m){var g=a(f,l,d,v,c,m);return g.find(h,u)||null};n.exports=p},97560:(n,o,r)=>{var a=r(7386),p=function(h,u,f,l,d,v,c,m){var g=a(f,l,d,v,c,m);g.forEach(h,u)};n.exports=p},43305:(n,o,r)=>{var a=r(91907),p=r(30003),h=r(9474),u=r(14018),f=r(29747),l=r(54503),d=function(v){return v===a.ORTHOGONAL?p:v===a.HEXAGONAL?h:v===a.STAGGERED?l:v===a.ISOMETRIC?u:f};n.exports=d},7423:(n,o,r)=>{var a=r(62991),p=function(h,u,f,l){if(a(h,u,l)){var d=l.data[u][h]||null;return d?d.index===-1?f?d:null:d:null}else return null};n.exports=p},60540:(n,o,r)=>{var a=r(7423),p=r(26099),h=new p,u=function(f,l,d,v,c){return c.tilemapLayer.worldToTileXY(f,l,!0,h,v),a(h.x,h.y,d,c)};n.exports=u},55826:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l){var d=l.baseTileWidth,v=l.baseTileHeight,c=l.tilemapLayer,m=0,g=0;c&&(f||(f=c.scene.cameras.main),m=c.x+f.scrollX*(1-c.scrollFactorX),g=c.y+f.scrollY*(1-c.scrollFactorY),d*=c.scaleX,v*=c.scaleY);var y=m+h*d,x=g+u*v;return[new a(y,x),new a(y+d,x),new a(y+d,x+v),new a(y,x+v)]};n.exports=p},11758:(n,o,r)=>{var a=r(91907),p=r(27229),h=r(29747),u=r(55826),f=function(l){return l===a.ORTHOGONAL?u:l===a.ISOMETRIC?h:l===a.HEXAGONAL?p:(l===a.STAGGERED,h)};n.exports=f},39167:(n,o,r)=>{var a=r(91907),p=r(29747),h=r(97281),u=function(f){return f===a.ORTHOGONAL?h:p};n.exports=u},62e3:(n,o,r)=>{var a=r(91907),p=r(19951),h=r(14127),u=r(29747),f=r(97202),l=r(70326),d=function(v){return v===a.ORTHOGONAL?l:v===a.ISOMETRIC?h:v===a.HEXAGONAL?p:v===a.STAGGERED?f:u};n.exports=d},5984:(n,o,r)=>{var a=r(91907),p=r(29747),h=r(28054),u=r(29650),f=function(l){return l===a.ORTHOGONAL?u:l===a.STAGGERED?h:p};n.exports=f},7386:(n,o,r)=>{var a=r(95540),p=function(h,u,f,l,d,v){h===void 0&&(h=0),u===void 0&&(u=0),f===void 0&&(f=v.width),l===void 0&&(l=v.height),d||(d={});var c=a(d,"isNotEmpty",!1),m=a(d,"isColliding",!1),g=a(d,"hasInterestingFace",!1);h<0&&(f+=h,h=0),u<0&&(l+=u,u=0),h+f>v.width&&(f=Math.max(v.width-h,0)),u+l>v.height&&(l=Math.max(v.height-u,0));for(var y=[],x=u;x<u+l;x++)for(var C=h;C<h+f;C++){var S=v.data[x][C];if(S!==null){if(c&&S.index===-1||m&&!S.collides||g&&!S.hasInterestingFace)continue;y.push(S)}}return y};n.exports=p},91141:(n,o,r)=>{var a=r(55738),p=r(7386),h=r(91865),u=r(29747),f=r(26099),l=r(91907),d=function(y,x){return h.RectangleToTriangle(x,y)},v=new f,c=new f,m=new f,g=function(y,x,C,S){if(S.orientation!==l.ORTHOGONAL)return console.warn("GetTilesWithinShape only works with orthogonal tilemaps"),[];if(y===void 0)return[];var E=u;y instanceof a.Circle?E=h.CircleToRectangle:y instanceof a.Rectangle?E=h.RectangleToRectangle:y instanceof a.Triangle?E=d:y instanceof a.Line&&(E=h.LineToRectangle),S.tilemapLayer.worldToTileXY(y.left,y.top,!0,c,C);var T=c.x,P=c.y;S.tilemapLayer.worldToTileXY(y.right,y.bottom,!1,m,C);var M=Math.ceil(m.x),w=Math.ceil(m.y),b=Math.max(M-T,1),I=Math.max(w-P,1),R=p(T,P,b,I,x,S),A=S.tileWidth,L=S.tileHeight;S.tilemapLayer&&(A*=S.tilemapLayer.scaleX,L*=S.tilemapLayer.scaleY);for(var O=[],F=new a.Rectangle(0,0,A,L),G=0;G<R.length;G++){var U=R[G];S.tilemapLayer.tileToWorldXY(U.x,U.y,v,C),F.x=v.x,F.y=v.y,E(y,F)&&O.push(U)}return O};n.exports=g},96523:(n,o,r)=>{var a=r(7386),p=r(26099),h=new p,u=new p,f=function(l,d,v,c,m,g,y){var x=y.tilemapLayer.tilemap._convert.WorldToTileXY;x(l,d,!0,h,g,y);var C=h.x,S=h.y;x(l+v,d+c,!1,u,g,y);var E=Math.ceil(u.x),T=Math.ceil(u.y);return a(C,S,E-C,T-S,m,y)};n.exports=f},96113:(n,o,r)=>{var a=r(91907),p=r(20242),h=r(10095),u=function(f){return f===a.ORTHOGONAL?h:p};n.exports=u},16926:(n,o,r)=>{var a=r(91907),p=r(86625),h=r(96897),u=r(29747),f=r(15108),l=r(85896),d=function(v){return v===a.ORTHOGONAL?l:v===a.ISOMETRIC?h:v===a.HEXAGONAL?p:v===a.STAGGERED?f:u};n.exports=d},55762:(n,o,r)=>{var a=r(91907),p=r(20242),h=r(51900),u=r(63288),f=function(l){return l===a.ORTHOGONAL?u:l===a.STAGGERED?h:p};n.exports=f},45091:(n,o,r)=>{var a=r(62991),p=function(h,u,f){if(a(h,u,f)){var l=f.data[u][h];return l!==null&&l.index>-1}else return!1};n.exports=p},24152:(n,o,r)=>{var a=r(45091),p=r(26099),h=new p,u=function(f,l,d,v){v.tilemapLayer.worldToTileXY(f,l,!0,h,d);var c=h.x,m=h.y;return a(c,m,v)};n.exports=u},90454:(n,o,r)=>{var a=r(63448),p=r(56583),h=function(u,f){var l=u.tilemapLayer.tilemap,d=u.tilemapLayer,v=Math.floor(l.tileWidth*d.scaleX),c=Math.floor(l.tileHeight*d.scaleY),m=u.hexSideLength,g,y,x,C;if(u.staggerAxis==="y"){var S=(c-m)/2+m;g=p(f.worldView.x-d.x,v,0,!0)-d.cullPaddingX,y=a(f.worldView.right-d.x,v,0,!0)+d.cullPaddingX,x=p(f.worldView.y-d.y,S,0,!0)-d.cullPaddingY,C=a(f.worldView.bottom-d.y,S,0,!0)+d.cullPaddingY}else{var E=(v-m)/2+m;g=p(f.worldView.x-d.x,E,0,!0)-d.cullPaddingX,y=a(f.worldView.right-d.x,E,0,!0)+d.cullPaddingX,x=p(f.worldView.y-d.y,c,0,!0)-d.cullPaddingY,C=a(f.worldView.bottom-d.y,c,0,!0)+d.cullPaddingY}return{left:g,right:y,top:x,bottom:C}};n.exports=h},9474:(n,o,r)=>{var a=r(90454),p=r(32483),h=function(u,f,l,d){l===void 0&&(l=[]),d===void 0&&(d=0),l.length=0;var v=u.tilemapLayer,c=a(u,f);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(c.left=0,c.right=u.width,c.top=0,c.bottom=u.height),p(u,c,d,l),l};n.exports=h},27229:(n,o,r)=>{var a=r(19951),p=r(26099),h=new p,u=function(f,l,d,v){var c=v.baseTileWidth,m=v.baseTileHeight,g=v.tilemapLayer;g&&(c*=g.scaleX,m*=g.scaleY);var y=a(f,l,h,d,v),x=[],C=.5773502691896257,S,E;v.staggerAxis==="y"?(S=C*c,E=m/2):(S=c/2,E=C*m);for(var T=0;T<6;T++){var P=2*Math.PI*(.5-T)/6;x.push(new p(y.x+S*Math.cos(P),y.y+E*Math.sin(P)))}return x};n.exports=u},19951:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d){f||(f=new a);var v=d.baseTileWidth,c=d.baseTileHeight,m=d.tilemapLayer,g=0,y=0;m&&(l||(l=m.scene.cameras.main),g=m.x+l.scrollX*(1-m.scrollFactorX),y=m.y+l.scrollY*(1-m.scrollFactorY),v*=m.scaleX,c*=m.scaleY);var x=v/2,C=c/2,S,E,T=d.staggerAxis,P=d.staggerIndex;return T==="y"?(S=g+v*h+v,E=y+1.5*u*C+C,u%2===0&&(P==="odd"?S-=x:S+=x)):T==="x"&&P==="odd"&&(S=g+1.5*h*x+x,E=y+c*h+c,h%2===0&&(P==="odd"?E-=C:E+=C)),f.set(S,E)};n.exports=p},86625:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d,v){l||(l=new a);var c=v.baseTileWidth,m=v.baseTileHeight,g=v.tilemapLayer;g&&(d||(d=g.scene.cameras.main),h=h-(g.x+d.scrollX*(1-g.scrollFactorX)),u=u-(g.y+d.scrollY*(1-g.scrollFactorY)),c*=g.scaleX,m*=g.scaleY);var y=.5773502691896257,x=-.3333333333333333,C=0,S=.6666666666666666,E=c/2,T=m/2,P,M,w,b,I;v.staggerAxis==="y"?(P=(h-E)/(y*c),M=(u-T)/T,w=y*P+x*M,b=C*P+S*M):(P=(h-E)/E,M=(u-T)/(y*m),w=x*P+y*M,b=S*P+C*M),I=-w-b;var R=Math.round(w),A=Math.round(b),L=Math.round(I),O=Math.abs(R-w),F=Math.abs(A-b),G=Math.abs(L-I);O>F&&O>G?R=-A-L:F>G&&(A=-R-L);var U,z=A;return v.staggerIndex==="odd"?U=z%2===0?A/2+R:A/2+R-.5:U=z%2===0?A/2+R:A/2+R+.5,l.set(U,z)};n.exports=p},62991:n=>{var o=function(r,a,p){return r>=0&&r<p.width&&a>=0&&a<p.height};n.exports=o},14018:(n,o,r)=>{var a=r(33528),p=function(h,u,f,l){f===void 0&&(f=[]),l===void 0&&(l=0),f.length=0;var d=h.tilemapLayer,v=h.data,c=h.width,m=h.height,g=d.skipCull,y=0,x=c,C=0,S=m,E,T,P;if(l===0)for(T=C;T<S;T++)for(E=y;E<x;E++)P=v[T][E],!(!P||P.index===-1||!P.visible||P.alpha===0)&&(!g&&!a(E,T,h,u)||f.push(P));else if(l===1)for(T=C;T<S;T++)for(E=x;E>=y;E--)P=v[T][E],!(!P||P.index===-1||!P.visible||P.alpha===0)&&(!g&&!a(E,T,h,u)||f.push(P));else if(l===2)for(T=S;T>=C;T--)for(E=y;E<x;E++)P=v[T][E],!(!P||P.index===-1||!P.visible||P.alpha===0)&&(!g&&!a(E,T,h,u)||f.push(P));else if(l===3)for(T=S;T>=C;T--)for(E=x;E>=y;E--)P=v[T][E],!(!P||P.index===-1||!P.visible||P.alpha===0)&&(!g&&!a(E,T,h,u)||f.push(P));return d.tilesDrawn=f.length,d.tilesTotal=c*m,f};n.exports=p},14127:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d){f||(f=new a);var v=d.baseTileWidth,c=d.baseTileHeight,m=d.tilemapLayer,g=0,y=0;m&&(l||(l=m.scene.cameras.main),g=m.x+l.scrollX*(1-m.scrollFactorX),v*=m.scaleX,y=m.y+l.scrollY*(1-m.scrollFactorY),c*=m.scaleY);var x=g+(h-u)*(v/2),C=y+(h+u)*(c/2);return f.set(x,C)};n.exports=p},96897:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d,v,c){l||(l=new a);var m=v.baseTileWidth,g=v.baseTileHeight,y=v.tilemapLayer;y&&(d||(d=y.scene.cameras.main),u=u-(y.y+d.scrollY*(1-y.scrollFactorY)),g*=y.scaleY,h=h-(y.x+d.scrollX*(1-y.scrollFactorX)),m*=y.scaleX);var x=m/2,C=g/2;h=h-x,c||(u=u-g);var S=.5*(h/x+u/C),E=.5*(-h/x+u/C);return f&&(S=Math.floor(S),E=Math.floor(E)),l.set(S,E)};n.exports=p},71558:(n,o,r)=>{var a=r(23029),p=r(62991),h=r(72023),u=r(20576),f=function(l,d,v,c,m){if(c===void 0&&(c=!0),!p(d,v,m))return null;var g,y=m.data[v][d],x=y&&y.collides;l instanceof a?(m.data[v][d]===null&&(m.data[v][d]=new a(m,l.index,d,v,m.tileWidth,m.tileHeight)),m.data[v][d].copy(l)):(g=l,m.data[v][d]===null?m.data[v][d]=new a(m,g,d,v,m.tileWidth,m.tileHeight):m.data[v][d].index=g);var C=m.data[v][d],S=m.collideIndexes.indexOf(C.index)!==-1;if(g=l instanceof a?l.index:l,g===-1)C.width=m.tileWidth,C.height=m.tileHeight;else{var E=m.tilemapLayer.tilemap,T=E.tiles,P=T[g][2],M=E.tilesets[P];C.width=M.tileWidth,C.height=M.tileHeight}return u(C,S),c&&x!==C.collides&&h(d,v,m),C};n.exports=f},26303:(n,o,r)=>{var a=r(71558),p=r(26099),h=new p,u=function(f,l,d,v,c,m){return m.tilemapLayer.worldToTileXY(l,d,!0,h,c,m),a(f,h.x,h.y,v,m)};n.exports=u},14051:(n,o,r)=>{var a=r(42573),p=r(71558),h=function(u,f,l,d,v){if(d===void 0&&(d=!0),!Array.isArray(u))return null;Array.isArray(u[0])||(u=[u]);for(var c=u.length,m=u[0].length,g=0;g<c;g++)for(var y=0;y<m;y++){var x=u[g][y];p(x,f+y,l+g,!1,v)}d&&a(f-1,l-1,m+2,c+2,v)};n.exports=h},77389:(n,o,r)=>{var a=r(7386),p=r(26546),h=function(u,f,l,d,v,c){var m,g=a(u,f,l,d,{},c);if(!v)for(v=[],m=0;m<g.length;m++)v.indexOf(g[m].index)===-1&&v.push(g[m].index);for(m=0;m<g.length;m++)g[m].index=p(v)};n.exports=h},63557:(n,o,r)=>{var a=r(23029),p=r(62991),h=r(72023),u=function(f,l,d,v,c){if(d===void 0&&(d=!0),v===void 0&&(v=!0),!p(f,l,c))return null;var m=c.data[l][f];if(m)c.data[l][f]=d?null:new a(c,-1,f,l,c.tileWidth,c.tileHeight);else return null;return v&&m&&m.collides&&h(f,l,c),m};n.exports=u},94178:(n,o,r)=>{var a=r(63557),p=r(26099),h=new p,u=function(f,l,d,v,c,m){return m.tilemapLayer.worldToTileXY(f,l,!0,h,c,m),a(h.x,h.y,d,v,m)};n.exports=u},15533:(n,o,r)=>{var a=r(7386),p=r(3956),h=new p(105,210,231,150),u=new p(243,134,48,200),f=new p(40,39,37,150),l=function(d,v,c){v===void 0&&(v={});var m=v.tileColor!==void 0?v.tileColor:h,g=v.collidingTileColor!==void 0?v.collidingTileColor:u,y=v.faceColor!==void 0?v.faceColor:f,x=a(0,0,c.width,c.height,null,c);d.translateCanvas(c.tilemapLayer.x,c.tilemapLayer.y),d.scaleCanvas(c.tilemapLayer.scaleX,c.tilemapLayer.scaleY);for(var C=0;C<x.length;C++){var S=x[C],E=S.tileset?S.tileset.tileOffset:{x:0,y:0},T=S.width,P=S.height,M=S.pixelX-E.x,w=S.pixelY-E.y,b=S.collides?g:m;b!==null&&(d.fillStyle(b.color,b.alpha/255),d.fillRect(M,w,T,P)),M+=1,w+=1,T-=2,P-=2,y!==null&&(d.lineStyle(1,y.color,y.alpha/255),S.faceTop&&d.lineBetween(M,w,M+T,w),S.faceRight&&d.lineBetween(M+T,w,M+T,w+P),S.faceBottom&&d.lineBetween(M,w+P,M+T,w+P),S.faceLeft&&d.lineBetween(M,w,M,w+P))}};n.exports=l},27987:(n,o,r)=>{var a=r(7386),p=function(h,u,f,l,d,v,c){for(var m=a(f,l,d,v,null,c),g=0;g<m.length;g++)m[g]&&m[g].index===h&&(m[g].index=u)};n.exports=p},32483:n=>{var o=function(r,a,p,h){var u=r.data,f=r.width,l=r.height,d=r.tilemapLayer,v=Math.max(0,a.left),c=Math.min(f,a.right),m=Math.max(0,a.top),g=Math.min(l,a.bottom),y,x,C;if(p===0)for(x=m;x<g;x++)for(y=v;u[x]&&y<c;y++)C=u[x][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);else if(p===1)for(x=m;x<g;x++)for(y=c;u[x]&&y>=v;y--)C=u[x][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);else if(p===2)for(x=g;x>=m;x--)for(y=v;u[x]&&y<c;y++)C=u[x][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);else if(p===3)for(x=g;x>=m;x--)for(y=c;u[x]&&y>=v;y--)C=u[x][y],!(!C||C.index===-1||!C.visible||C.alpha===0)&&h.push(C);return d.tilesDrawn=h.length,d.tilesTotal=f*l,h};n.exports=o},57068:(n,o,r)=>{var a=r(20576),p=r(42573),h=r(9589),u=function(f,l,d,v,c){l===void 0&&(l=!0),d===void 0&&(d=!0),c===void 0&&(c=!0),Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++)h(f[m],l,v);if(c)for(var g=0;g<v.height;g++)for(var y=0;y<v.width;y++){var x=v.data[g][y];x&&f.indexOf(x.index)!==-1&&a(x,l)}d&&p(0,0,v.width,v.height,v)};n.exports=u},37266:(n,o,r)=>{var a=r(20576),p=r(42573),h=r(9589),u=function(f,l,d,v,c,m){if(d===void 0&&(d=!0),v===void 0&&(v=!0),m===void 0&&(m=!0),!(f>l)){for(var g=f;g<=l;g++)h(g,d,c);if(m)for(var y=0;y<c.height;y++)for(var x=0;x<c.width;x++){var C=c.data[y][x];C&&C.index>=f&&C.index<=l&&a(C,d)}v&&p(0,0,c.width,c.height,c)}};n.exports=u},75661:(n,o,r)=>{var a=r(20576),p=r(42573),h=r(9589),u=function(f,l,d,v){l===void 0&&(l=!0),d===void 0&&(d=!0),Array.isArray(f)||(f=[f]);for(var c=0;c<v.height;c++)for(var m=0;m<v.width;m++){var g=v.data[c][m];g&&f.indexOf(g.index)===-1&&(a(g,l),h(g.index,l,v))}d&&p(0,0,v.width,v.height,v)};n.exports=u},64740:(n,o,r)=>{var a=r(20576),p=r(42573),h=r(97022),u=function(f,l,d,v){l===void 0&&(l=!0),d===void 0&&(d=!0);for(var c=0;c<v.height;c++)for(var m=0;m<v.width;m++){var g=v.data[c][m];if(g){for(var y in f)if(h(g.properties,y)){var x=f[y];Array.isArray(x)||(x=[x]);for(var C=0;C<x.length;C++)g.properties[y]===x[C]&&a(g,l)}}}d&&p(0,0,v.width,v.height,v)};n.exports=u},63307:(n,o,r)=>{var a=r(20576),p=r(42573),h=function(u,f,l){u===void 0&&(u=!0),f===void 0&&(f=!0);for(var d=0;d<l.height;d++)for(var v=0;v<l.width;v++){var c=l.data[d][v];if(c){var m=c.getCollisionGroup();m&&m.objects&&m.objects.length>0&&a(c,u)}}f&&p(0,0,l.width,l.height,l)};n.exports=h},9589:n=>{var o=function(r,a,p){var h=p.collideIndexes.indexOf(r);a&&h===-1?p.collideIndexes.push(r):!a&&h!==-1&&p.collideIndexes.splice(h,1)};n.exports=o},20576:n=>{var o=function(r,a){a?r.setCollision(!0,!0,!0,!0,!1):r.resetCollision(!1)};n.exports=o},79583:n=>{var o=function(r,a,p,h){if(typeof r=="number")h.callbacks[r]=a!==null?{callback:a,callbackContext:p}:void 0;else for(var u=0,f=r.length;u<f;u++)h.callbacks[r[u]]=a!==null?{callback:a,callbackContext:p}:void 0};n.exports=o},93254:(n,o,r)=>{var a=r(7386),p=function(h,u,f,l,d,v,c){for(var m=a(h,u,f,l,null,c),g=0;g<m.length;g++)m[g].setCollisionCallback(d,v)};n.exports=p},32903:(n,o,r)=>{var a=r(7386),p=r(33680),h=function(u,f,l,d,v){var c=a(u,f,l,d,null,v),m=c.map(function(y){return y.index});p(m);for(var g=0;g<c.length;g++)c[g].index=m[g]};n.exports=h},61325:(n,o,r)=>{var a=r(63448),p=r(56583),h=function(u,f){var l=u.tilemapLayer.tilemap,d=u.tilemapLayer,v=Math.floor(l.tileWidth*d.scaleX),c=Math.floor(l.tileHeight*d.scaleY),m=p(f.worldView.x-d.x,v,0,!0)-d.cullPaddingX,g=a(f.worldView.right-d.x,v,0,!0)+d.cullPaddingX,y=p(f.worldView.y-d.y,c/2,0,!0)-d.cullPaddingY,x=a(f.worldView.bottom-d.y,c/2,0,!0)+d.cullPaddingY;return{left:m,right:g,top:y,bottom:x}};n.exports=h},54503:(n,o,r)=>{var a=r(61325),p=r(32483),h=function(u,f,l,d){l===void 0&&(l=[]),d===void 0&&(d=0),l.length=0;var v=u.tilemapLayer,c=a(u,f);return v.skipCull&&v.scrollFactorX===1&&v.scrollFactorY===1&&(c.left=0,c.right=u.width,c.top=0,c.bottom=u.height),p(u,c,d,l),l};n.exports=h},97202:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d){f||(f=new a);var v=d.baseTileWidth,c=d.baseTileHeight,m=d.tilemapLayer,g=0,y=0;m&&(l||(l=m.scene.cameras.main),g=m.x+l.scrollX*(1-m.scrollFactorX),v*=m.scaleX,y=m.y+l.scrollY*(1-m.scrollFactorY),c*=m.scaleY);var x=g+h*v+u%2*(v/2),C=y+u*(c/2);return f.set(x,C)};n.exports=p},28054:n=>{var o=function(r,a,p){var h=p.baseTileHeight,u=p.tilemapLayer,f=0;return u&&(a===void 0&&(a=u.scene.cameras.main),f=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY),f+r*(h/2)+h};n.exports=o},15108:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d,v){l||(l=new a);var c=v.baseTileWidth,m=v.baseTileHeight,g=v.tilemapLayer;g&&(d||(d=g.scene.cameras.main),u=u-(g.y+d.scrollY*(1-g.scrollFactorY)),m*=g.scaleY,h=h-(g.x+d.scrollX*(1-g.scrollFactorX)),c*=g.scaleX);var y=f?Math.floor(u/(m/2)):u/(m/2),x=f?Math.floor((h+y%2*.5*c)/c):(h+y%2*.5*c)/c;return l.set(x,y)};n.exports=p},51900:n=>{var o=function(r,a,p,h){var u=h.baseTileHeight,f=h.tilemapLayer;return f&&(p||(p=f.scene.cameras.main),r=r-(f.y+p.scrollY*(1-f.scrollFactorY)),u*=f.scaleY),a?Math.floor(r/(u/2)):r/(u/2)};n.exports=o},86560:(n,o,r)=>{var a=r(7386),p=function(h,u,f,l,d,v,c){for(var m=a(f,l,d,v,null,c),g=0;g<m.length;g++)m[g]&&(m[g].index===h?m[g].index=u:m[g].index===u&&(m[g].index=h))};n.exports=p},97281:n=>{var o=function(r,a,p){var h=p.baseTileWidth,u=p.tilemapLayer,f=0;return u&&(a||(a=u.scene.cameras.main),f=u.x+a.scrollX*(1-u.scrollFactorX),h*=u.scaleX),f+r*h};n.exports=o},70326:(n,o,r)=>{var a=r(97281),p=r(29650),h=r(26099),u=function(f,l,d,v,c){return d||(d=new h(0,0)),d.x=a(f,v,c),d.y=p(l,v,c),d};n.exports=u},29650:n=>{var o=function(r,a,p){var h=p.baseTileHeight,u=p.tilemapLayer,f=0;return u&&(a||(a=u.scene.cameras.main),f=u.y+a.scrollY*(1-u.scrollFactorY),h*=u.scaleY),f+r*h};n.exports=o},77366:(n,o,r)=>{var a=r(7386),p=r(75508),h=function(u,f,l,d,v,c){if(v){var m,g=a(u,f,l,d,null,c),y=0;for(m=0;m<v.length;m++)y+=v[m].weight;if(!(y<=0))for(m=0;m<g.length;m++){for(var x=p.RND.frac()*y,C=0,S=-1,E=0;E<v.length;E++)if(C+=v[E].weight,x<=C){var T=v[E].index;S=Array.isArray(T)?T[Math.floor(p.RND.frac()*T.length)]:T;break}g[m].index=S}}};n.exports=h},10095:(n,o,r)=>{var a=r(85896),p=r(26099),h=new p,u=function(f,l,d,v){return a(f,0,l,h,d,v),h.x};n.exports=u},85896:(n,o,r)=>{var a=r(26099),p=function(h,u,f,l,d,v){f===void 0&&(f=!0),l||(l=new a);var c=v.baseTileWidth,m=v.baseTileHeight,g=v.tilemapLayer;g&&(d||(d=g.scene.cameras.main),h=h-(g.x+d.scrollX*(1-g.scrollFactorX)),u=u-(g.y+d.scrollY*(1-g.scrollFactorY)),c*=g.scaleX,m*=g.scaleY);var y=h/c,x=u/m;return f&&(y=Math.floor(y),x=Math.floor(x)),l.set(y,x)};n.exports=p},63288:(n,o,r)=>{var a=r(85896),p=r(26099),h=new p,u=function(f,l,d,v){return a(0,f,l,h,d,v),h.y};n.exports=u},81086:(n,o,r)=>{n.exports={CalculateFacesAt:r(72023),CalculateFacesWithin:r(42573),CheckIsoBounds:r(33528),Copy:r(1785),CreateFromTiles:r(78419),CullBounds:r(19545),CullTiles:r(30003),Fill:r(35137),FilterTiles:r(40253),FindByIndex:r(52692),FindTile:r(66151),ForEachTile:r(97560),GetCullTilesFunction:r(43305),GetTileAt:r(7423),GetTileAtWorldXY:r(60540),GetTileCorners:r(55826),GetTileCornersFunction:r(11758),GetTilesWithin:r(7386),GetTilesWithinShape:r(91141),GetTilesWithinWorldXY:r(96523),GetTileToWorldXFunction:r(39167),GetTileToWorldXYFunction:r(62e3),GetTileToWorldYFunction:r(5984),GetWorldToTileXFunction:r(96113),GetWorldToTileXYFunction:r(16926),GetWorldToTileYFunction:r(55762),HasTileAt:r(45091),HasTileAtWorldXY:r(24152),HexagonalCullBounds:r(90454),HexagonalCullTiles:r(9474),HexagonalGetTileCorners:r(27229),HexagonalTileToWorldXY:r(19951),HexagonalWorldToTileXY:r(86625),IsInLayerBounds:r(62991),IsometricCullTiles:r(14018),IsometricTileToWorldXY:r(14127),IsometricWorldToTileXY:r(96897),PutTileAt:r(71558),PutTileAtWorldXY:r(26303),PutTilesAt:r(14051),Randomize:r(77389),RemoveTileAt:r(63557),RemoveTileAtWorldXY:r(94178),RenderDebug:r(15533),ReplaceByIndex:r(27987),RunCull:r(32483),SetCollision:r(57068),SetCollisionBetween:r(37266),SetCollisionByExclusion:r(75661),SetCollisionByProperty:r(64740),SetCollisionFromCollisionGroup:r(63307),SetLayerCollisionIndex:r(9589),SetTileCollision:r(20576),SetTileIndexCallback:r(79583),SetTileLocationCallback:r(93254),Shuffle:r(32903),StaggeredCullBounds:r(61325),StaggeredCullTiles:r(54503),StaggeredTileToWorldXY:r(97202),StaggeredTileToWorldY:r(28054),StaggeredWorldToTileXY:r(15108),StaggeredWorldToTileY:r(51900),SwapByIndex:r(86560),TileToWorldX:r(97281),TileToWorldXY:r(70326),TileToWorldY:r(29650),WeightedRandomize:r(77366),WorldToTileX:r(10095),WorldToTileXY:r(85896),WorldToTileY:r(63288)}},91907:n=>{n.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(n,o,r)=>{var a={ORIENTATION:r(91907)};n.exports=a},62501:(n,o,r)=>{var a=r(79291),p=r(21829),h={Components:r(81086),Parsers:r(57442),Formats:r(80341),ImageCollection:r(16536),ParseToTilemap:r(31989),Tile:r(23029),Tilemap:r(49075),TilemapCreator:r(45939),TilemapFactory:r(46029),Tileset:r(33629),TilemapLayer:r(20442),Orientation:r(91907),LayerData:r(14977),MapData:r(87010),ObjectLayer:r(48700)};h=a(!1,h,p.ORIENTATION),n.exports=h},14977:(n,o,r)=>{var a=r(83419),p=r(91907),h=r(95540),u=new a({initialize:function(l){l===void 0&&(l={}),this.name=h(l,"name","layer"),this.id=h(l,"id",0),this.x=h(l,"x",0),this.y=h(l,"y",0),this.width=h(l,"width",0),this.height=h(l,"height",0),this.tileWidth=h(l,"tileWidth",0),this.tileHeight=h(l,"tileHeight",0),this.baseTileWidth=h(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=h(l,"baseTileHeight",this.tileHeight),this.orientation=h(l,"orientation",p.ORTHOGONAL),this.widthInPixels=h(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=h(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=h(l,"alpha",1),this.visible=h(l,"visible",!0),this.properties=h(l,"properties",[]),this.indexes=h(l,"indexes",[]),this.collideIndexes=h(l,"collideIndexes",[]),this.callbacks=h(l,"callbacks",[]),this.bodies=h(l,"bodies",[]),this.data=h(l,"data",[]),this.tilemapLayer=h(l,"tilemapLayer",null),this.hexSideLength=h(l,"hexSideLength",0),this.staggerAxis=h(l,"staggerAxis","y"),this.staggerIndex=h(l,"staggerIndex","odd")}});n.exports=u},87010:(n,o,r)=>{var a=r(83419),p=r(91907),h=r(95540),u=new a({initialize:function(l){l===void 0&&(l={}),this.name=h(l,"name","map"),this.width=h(l,"width",0),this.height=h(l,"height",0),this.infinite=h(l,"infinite",!1),this.tileWidth=h(l,"tileWidth",0),this.tileHeight=h(l,"tileHeight",0),this.widthInPixels=h(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=h(l,"heightInPixels",this.height*this.tileHeight),this.format=h(l,"format",null),this.orientation=h(l,"orientation",p.ORTHOGONAL),this.renderOrder=h(l,"renderOrder","right-down"),this.version=h(l,"version","1"),this.properties=h(l,"properties",{}),this.layers=h(l,"layers",[]),this.images=h(l,"images",[]),this.objects=h(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=h(l,"collision",{}),this.tilesets=h(l,"tilesets",[]),this.imageCollections=h(l,"imageCollections",[]),this.tiles=h(l,"tiles",[]),this.hexSideLength=h(l,"hexSideLength",0),this.staggerAxis=h(l,"staggerAxis","y"),this.staggerIndex=h(l,"staggerIndex","odd")}});n.exports=u},48700:(n,o,r)=>{var a=r(83419),p=r(95540),h=new a({initialize:function(f){f===void 0&&(f={}),this.name=p(f,"name","object layer"),this.id=p(f,"id",0),this.opacity=p(f,"opacity",1),this.properties=p(f,"properties",{}),this.propertyTypes=p(f,"propertytypes",{}),this.type=p(f,"type","objectgroup"),this.visible=p(f,"visible",!0),this.objects=p(f,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});n.exports=h},6641:(n,o,r)=>{var a=r(91907),p=function(h){return h=h.toLowerCase(),h==="isometric"?a.ISOMETRIC:h==="staggered"?a.STAGGERED:h==="hexagonal"?a.HEXAGONAL:a.ORTHOGONAL};n.exports=p},46177:(n,o,r)=>{var a=r(80341),p=r(2342),h=r(82593),u=r(46594),f=r(87021),l=function(d,v,c,m,g,y){var x;switch(v){case a.ARRAY_2D:x=p(d,c,m,g,y);break;case a.CSV:x=h(d,c,m,g,y);break;case a.TILED_JSON:x=u(d,c,y);break;case a.WELTMEISTER:x=f(d,c,y);break;default:console.warn("Unrecognized tilemap data format: "+v),x=null}return x};n.exports=l},2342:(n,o,r)=>{var a=r(80341),p=r(14977),h=r(87010),u=r(23029),f=function(l,d,v,c,m){for(var g=new p({tileWidth:v,tileHeight:c}),y=new h({name:l,tileWidth:v,tileHeight:c,format:a.ARRAY_2D,layers:[g]}),x=[],C=d.length,S=0,E=0;E<d.length;E++){x[E]=[];for(var T=d[E],P=0;P<T.length;P++){var M=parseInt(T[P],10);isNaN(M)||M===-1?x[E][P]=m?null:new u(g,-1,P,E,v,c):x[E][P]=new u(g,M,P,E,v,c)}S===0&&(S=T.length)}return y.width=g.width=S,y.height=g.height=C,y.widthInPixels=g.widthInPixels=S*v,y.heightInPixels=g.heightInPixels=C*c,g.data=x,y};n.exports=f},82593:(n,o,r)=>{var a=r(80341),p=r(2342),h=function(u,f,l,d,v){var c=f.trim().split(`
`).map(function(g){return g.split(",")}),m=p(u,c,l,d,v);return m.format=a.CSV,m};n.exports=h},6656:(n,o,r)=>{var a=r(14977),p=r(23029),h=function(u,f){for(var l=[],d=0;d<u.layer.length;d++){for(var v=u.layer[d],c=new a({name:v.name,width:v.width,height:v.height,tileWidth:v.tilesize,tileHeight:v.tilesize,visible:v.visible===1}),m=[],g=[],y=0;y<v.data.length;y++){for(var x=0;x<v.data[y].length;x++){var C=v.data[y][x]-1,S;C>-1?S=new p(c,C,x,y,v.tilesize,v.tilesize):S=f?null:new p(c,-1,x,y,v.tilesize,v.tilesize),m.push(S)}g.push(m),m=[]}c.data=g,l.push(c)}return l};n.exports=h},96483:(n,o,r)=>{var a=r(33629),p=function(h){for(var u=[],f=[],l=0;l<h.layer.length;l++){var d=h.layer[l],v=d.tilesetName;v!==""&&f.indexOf(v)===-1&&(f.push(v),u.push(new a(v,0,d.tilesize,d.tilesize,0,0)))}return u};n.exports=p},87021:(n,o,r)=>{var a=r(80341),p=r(87010),h=r(6656),u=r(96483),f=function(l,d,v){if(d.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var c=0,m=0,g=0;g<d.layer.length;g++)d.layer[g].width>c&&(c=d.layer[g].width),d.layer[g].height>m&&(m=d.layer[g].height);var y=new p({width:c,height:m,name:l,tileWidth:d.layer[0].tilesize,tileHeight:d.layer[0].tilesize,format:a.WELTMEISTER});return y.layers=h(d,v),y.tilesets=u(d),y};n.exports=f},52833:(n,o,r)=>{n.exports={ParseTileLayers:r(6656),ParseTilesets:r(96483),ParseWeltmeister:r(87021)}},57442:(n,o,r)=>{n.exports={FromOrientationString:r(6641),Parse:r(46177),Parse2DArray:r(2342),ParseCSV:r(82593),Impact:r(52833),Tiled:r(96761)}},51233:(n,o,r)=>{var a=r(79291),p=function(h){for(var u,f,l,d,v,c=0;c<h.layers.length;c++){u=h.layers[c],d=null;for(var m=0;m<u.data.length;m++){v=u.data[m];for(var g=0;g<v.length;g++)f=v[g],!(f===null||f.index<0)&&(l=h.tiles[f.index][2],d=h.tilesets[l],f.width=d.tileWidth,f.height=d.tileHeight,d.tileProperties&&d.tileProperties[f.index-d.firstgid]&&(f.properties=a(f.properties,d.tileProperties[f.index-d.firstgid])))}}};n.exports=p},41868:n=>{var o=function(r){for(var a=window.atob(r),p=a.length,h=new Array(p/4),u=0;u<p;u+=4)h[u/4]=(a.charCodeAt(u)|a.charCodeAt(u+1)<<8|a.charCodeAt(u+2)<<16|a.charCodeAt(u+3)<<24)>>>0;return h};n.exports=o},84101:(n,o,r)=>{var a=r(33629),p=function(h){var u,f,l=[];for(u=0;u<h.imageCollections.length;u++)for(var d=h.imageCollections[u],v=d.images,c=0;c<v.length;c++){var m=v[c],g={x:0,y:m.height-h.tileHeight};f=new a(m.image,m.gid,m.width,m.height,0,0,void 0,void 0,g),f.updateTileData(m.width,m.height),h.tilesets.push(f)}for(u=0;u<h.tilesets.length;u++){f=h.tilesets[u];for(var y=f.tileMargin,x=f.tileMargin,C=0,S=0,E=0,T=f.firstgid;T<f.firstgid+f.total&&(l[T]=[y,x,u],y+=f.tileWidth+f.tileSpacing,C++,!(C===f.total||(S++,S===f.columns&&(y=f.tileMargin,x+=f.tileHeight+f.tileSpacing,S=0,E++,E===f.rows))));T++);}return l};n.exports=p},79677:(n,o,r)=>{var a=r(95540),p=function(h,u,f){if(!u)return{i:0,layers:h.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=u.x+a(u,"startx",0)*h.tilewidth+a(u,"offsetx",0),d=u.y+a(u,"starty",0)*h.tileheight+a(u,"offsety",0);return{i:0,layers:u.layers,name:f.name+u.name+"/",opacity:f.opacity*u.opacity,visible:f.visible&&u.visible,x:f.x+l,y:f.y+d}};n.exports=p},29920:n=>{var o=2147483648,r=1073741824,a=536870912,p=function(h){var u=!!(h&o),f=!!(h&r),l=!!(h&a);h=h&~(o|r|a);var d=0,v=!1;return u&&f&&l?(d=Math.PI/2,v=!0):u&&f&&!l?(d=Math.PI,v=!1):u&&!f&&l?(d=Math.PI/2,v=!1):u&&!f&&!l?(d=0,v=!0):!u&&f&&l?(d=3*Math.PI/2,v=!1):!u&&f&&!l?(d=Math.PI,v=!0):!u&&!f&&l?(d=3*Math.PI/2,v=!0):!u&&!f&&!l&&(d=0,v=!1),{gid:h,flippedHorizontal:u,flippedVertical:f,flippedAntiDiagonal:l,rotation:d,flipped:v}};n.exports=p},12635:(n,o,r)=>{var a=r(95540),p=r(79677),h=function(u){for(var f=[],l=[],d=p(u);d.i<d.layers.length||l.length>0;){if(d.i>=d.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=l.pop();continue}var v=d.layers[d.i];if(d.i++,v.type!=="imagelayer"){if(v.type==="group"){var c=p(u,v,d);l.push(d),d=c}continue}var m=a(v,"offsetx",0)+a(v,"startx",0),g=a(v,"offsety",0)+a(v,"starty",0);f.push({name:d.name+v.name,image:v.image,x:d.x+m+v.x,y:d.y+g+v.y,alpha:d.opacity*v.opacity,visible:d.visible&&v.visible,properties:a(v,"properties",{})})}return f};n.exports=h},46594:(n,o,r)=>{var a=r(51233),p=r(84101),h=r(91907),u=r(62644),f=r(80341),l=r(6641),d=r(87010),v=r(12635),c=r(22611),m=r(28200),g=r(24619),y=function(x,C,S){var E=u(C),T=new d({width:E.width,height:E.height,name:x,tileWidth:E.tilewidth,tileHeight:E.tileheight,orientation:l(E.orientation),format:f.TILED_JSON,version:E.version,properties:E.properties,renderOrder:E.renderorder,infinite:E.infinite});if(T.orientation===h.HEXAGONAL)if(T.hexSideLength=E.hexsidelength,T.staggerAxis=E.staggeraxis,T.staggerIndex=E.staggerindex,T.staggerAxis==="y"){var P=(T.tileHeight-T.hexSideLength)/2;T.widthInPixels=T.tileWidth*(T.width+.5),T.heightInPixels=T.height*(T.hexSideLength+P)+P}else{var M=(T.tileWidth-T.hexSideLength)/2;T.widthInPixels=T.width*(T.hexSideLength+M)+M,T.heightInPixels=T.tileHeight*(T.height+.5)}T.layers=m(E,S),T.images=v(E);var w=g(E);return T.tilesets=w.tilesets,T.imageCollections=w.imageCollections,T.objects=c(E),T.tiles=p(T),a(T),T};n.exports=y},52205:(n,o,r)=>{var a=r(18254),p=r(29920),h=function(l){return{x:l.x,y:l.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"],f=function(l,d,v){d===void 0&&(d=0),v===void 0&&(v=0);var c=a(l,u);if(c.x+=d,c.y+=v,l.gid){var m=p(l.gid);c.gid=m.gid,c.flippedHorizontal=m.flippedHorizontal,c.flippedVertical=m.flippedVertical,c.flippedAntiDiagonal=m.flippedAntiDiagonal}else l.polyline?c.polyline=l.polyline.map(h):l.polygon?c.polygon=l.polygon.map(h):l.ellipse?c.ellipse=l.ellipse:l.text?c.text=l.text:l.point?c.point=!0:c.rectangle=!0;return c};n.exports=f},22611:(n,o,r)=>{var a=r(95540),p=r(52205),h=r(48700),u=r(79677),f=function(l){for(var d=[],v=[],c=u(l);c.i<c.layers.length||v.length>0;){if(c.i>=c.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}c=v.pop();continue}var m=c.layers[c.i];if(c.i++,m.opacity*=c.opacity,m.visible=c.visible&&m.visible,m.type!=="objectgroup"){if(m.type==="group"){var g=u(l,m,c);v.push(c),c=g}continue}m.name=c.name+m.name;for(var y=c.x+a(m,"startx",0)+a(m,"offsetx",0),x=c.y+a(m,"starty",0)+a(m,"offsety",0),C=[],S=0;S<m.objects.length;S++){var E=p(m.objects[S],y,x);C.push(E)}var T=new h(m);T.objects=C,d.push(T)}return d};n.exports=f},28200:(n,o,r)=>{var a=r(41868),p=r(91907),h=r(79677),u=r(6641),f=r(95540),l=r(14977),d=r(29920),v=r(23029),c=function(m,g){for(var y=f(m,"infinite",!1),x=[],C=[],S=h(m);S.i<S.layers.length||C.length>0;){if(S.i>=S.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}S=C.pop();continue}var E=S.layers[S.i];if(S.i++,E.type!=="tilelayer"){if(E.type==="group"){var T=h(m,E,S);C.push(S),S=T}continue}if(E.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+E.name+"'");continue}else if(E.encoding&&E.encoding==="base64"){if(E.chunks)for(var P=0;P<E.chunks.length;P++)E.chunks[P].data=a(E.chunks[P].data);E.data&&(E.data=a(E.data)),delete E.encoding}var M,w,b,I,R,A,L=[],O=0;if(y){var F=f(E,"startx",0)+E.x,G=f(E,"starty",0)+E.y;M=new l({name:S.name+E.name,id:E.id,x:S.x+f(E,"offsetx",0)+F*m.tilewidth,y:S.y+f(E,"offsety",0)+G*m.tileheight,width:E.width,height:E.height,tileWidth:m.tilewidth,tileHeight:m.tileheight,alpha:S.opacity*E.opacity,visible:S.visible&&E.visible,properties:f(E,"properties",[]),orientation:u(m.orientation)}),M.orientation===p.HEXAGONAL&&(M.hexSideLength=m.hexsidelength,M.staggerAxis=m.staggeraxis,M.staggerIndex=m.staggerindex,M.staggerAxis==="y"?(R=(M.tileHeight-M.hexSideLength)/2,M.widthInPixels=M.tileWidth*(M.width+.5),M.heightInPixels=M.height*(M.hexSideLength+R)+R):(A=(M.tileWidth-M.hexSideLength)/2,M.widthInPixels=M.width*(M.hexSideLength+A)+A,M.heightInPixels=M.tileHeight*(M.height+.5)));for(var U=0;U<E.height;U++){L[U]=[null];for(var z=0;z<E.width;z++)L[U][z]=null}for(U=0,J=E.chunks.length;U<J;U++)for(var N=E.chunks[U],k=N.x-F,D=N.y-G,V=0,B=0,W=N.data.length;B<W;B++){var H=O+k,Y=V+D;w=d(N.data[B]),w.gid>0?(b=new v(M,w.gid,H,Y,m.tilewidth,m.tileheight),b.rotation=w.rotation,b.flipX=w.flipped,L[Y][H]=b):(I=g?null:new v(M,-1,H,Y,m.tilewidth,m.tileheight),L[Y][H]=I),O++,O===N.width&&(V++,O=0)}}else{M=new l({name:S.name+E.name,id:E.id,x:S.x+f(E,"offsetx",0)+E.x,y:S.y+f(E,"offsety",0)+E.y,width:E.width,height:E.height,tileWidth:m.tilewidth,tileHeight:m.tileheight,alpha:S.opacity*E.opacity,visible:S.visible&&E.visible,properties:f(E,"properties",[]),orientation:u(m.orientation)}),M.orientation===p.HEXAGONAL&&(M.hexSideLength=m.hexsidelength,M.staggerAxis=m.staggeraxis,M.staggerIndex=m.staggerindex,M.staggerAxis==="y"?(R=(M.tileHeight-M.hexSideLength)/2,M.widthInPixels=M.tileWidth*(M.width+.5),M.heightInPixels=M.height*(M.hexSideLength+R)+R):(A=(M.tileWidth-M.hexSideLength)/2,M.widthInPixels=M.width*(M.hexSideLength+A)+A,M.heightInPixels=M.tileHeight*(M.height+.5)));for(var X=[],$=0,J=E.data.length;$<J;$++)w=d(E.data[$]),w.gid>0?(b=new v(M,w.gid,O,L.length,m.tilewidth,m.tileheight),b.rotation=w.rotation,b.flipX=w.flipped,X.push(b)):(I=g?null:new v(M,-1,O,L.length,m.tilewidth,m.tileheight),X.push(I)),O++,O===E.width&&(L.push(X),O=0,X=[])}M.data=L,x.push(M)}return x};n.exports=c},24619:(n,o,r)=>{var a=r(33629),p=r(16536),h=r(52205),u=r(57880),f=function(l){for(var d=[],v=[],c=null,m,g=0;g<l.tilesets.length;g++){var y=l.tilesets[g];if(y.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(y.image){var x=new a(y.name,y.firstgid,y.tilewidth,y.tileheight,y.margin,y.spacing,void 0,void 0,y.tileoffset);if(l.version>1){var C=void 0,S=void 0;if(Array.isArray(y.tiles)){C=C||{},S=S||{};for(var E=0;E<y.tiles.length;E++){var T=y.tiles[E];if(T.properties){var P={};T.properties.forEach(function(U){P[U.name]=U.value}),S[T.id]=P}if(T.objectgroup&&((C[T.id]||(C[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var M=T.objectgroup.objects.map(function(U){return h(U)});C[T.id].objectgroup.objects=M}T.animation&&((C[T.id]||(C[T.id]={})).animation=T.animation),T.type&&((C[T.id]||(C[T.id]={})).type=T.type)}}Array.isArray(y.wangsets)&&(C=C||{},S=S||{},u(y.wangsets,C)),C&&(x.tileData=C,x.tileProperties=S)}else if(y.tileproperties&&(x.tileProperties=y.tileproperties),y.tiles){x.tileData=y.tiles;for(m in x.tileData){var w=x.tileData[m].objectgroup;if(w&&w.objects){var b=w.objects.map(function(U){return h(U)});x.tileData[m].objectgroup.objects=b}}}x.updateTileData(y.imagewidth,y.imageheight),d.push(x)}else{var I=new p(y.name,y.firstgid,y.tilewidth,y.tileheight,y.margin,y.spacing,y.properties),R=0;for(E=0;E<y.tiles.length;E++){T=y.tiles[E];var A=T.image,L=parseInt(T.id,10),O=y.firstgid+L,F=T.imagewidth,G=T.imageheight;I.addImage(O,A,F,G),R=Math.max(L,R)}I.maxId=R,v.push(I)}c&&(c.lastgid=y.firstgid-1),c=y}return{tilesets:d,imageCollections:v}};n.exports=f},57880:n=>{var o=function(r,a){for(var p=0;p<r.length;p++){var h=r[p],u=p;if(h.name&&h.name!==""&&(u=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var f={},l={},d,v,c;if(Array.isArray(h.edgecolors))for(d=0;d<h.edgecolors.length;d++)c=1+d,v=h.edgecolors[d],v.name!==""&&(f[c]=v.name);if(Array.isArray(h.cornercolors))for(d=0;d<h.cornercolors.length;d++)c=1+d,v=h.cornercolors[d],v.name!==""&&(l[c]=v.name);if(Array.isArray(h.colors))for(d=0;d<h.colors.length;d++)v=h.colors[d],c=1+d,v.name!==""&&(f[c]=l[c]=v.name);for(var m=[f,l,f,l,f,l,f,l],g=0;g<h.wangtiles.length;g++){var y=h.wangtiles[g],x=a[y.tileid]||(a[y.tileid]={});x=x.wangid||(x.wangid={});for(var C=[],S=0;S<Math.min(m.length,y.wangid.length);S++){if(v=y.wangid[S],v===0){C.push(void 0);continue}var E=m[S][v];if(E!==void 0){C.push(E);continue}C.push(v)}x[u]=C}}}};n.exports=o},96761:(n,o,r)=>{n.exports={AssignTileProperties:r(51233),Base64Decode:r(41868),BuildTilesetIndex:r(84101),CreateGroupLayer:r(79677),ParseGID:r(29920),ParseImageLayers:r(12635),ParseJSONTiled:r(46594),ParseObject:r(52205),ParseObjectLayers:r(22611),ParseTileLayers:r(28200),ParseTilesets:r(24619)}},33385:(n,o,r)=>{var a=r(83419),p=r(37277),h=r(44594),u=r(94880),f=r(72905),l=new a({initialize:function(v){this.scene=v,this.systems=v.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],v.sys.events.once(h.BOOT,this.boot,this),v.sys.events.on(h.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var d=this.systems.events;d.on(h.PRE_UPDATE,this.preUpdate,this),d.on(h.UPDATE,this.update,this),d.once(h.SHUTDOWN,this.shutdown,this)},addEvent:function(d){var v;if(d instanceof u){if(v=d,this.removeEvent(v),v.elapsed=v.startAt,v.hasDispatched=!1,v.repeatCount=v.repeat===-1||v.loop?999999999999:v.repeat,v.delay<=0&&v.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay")}else v=new u(d);return this._pendingInsertion.push(v),v},delayedCall:function(d,v,c,m){return this.addEvent({delay:d,callback:v,args:c,callbackScope:m})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(d){Array.isArray(d)||(d=[d]);for(var v=0;v<d.length;v++){var c=d[v];f(this._pendingRemoval,c),f(this._pendingInsertion,c),f(this._active,c)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var d=this._pendingRemoval.length,v=this._pendingInsertion.length;if(!(d===0&&v===0)){var c,m;for(c=0;c<d;c++){m=this._pendingRemoval[c];var g=this._active.indexOf(m);g>-1&&this._active.splice(g,1),m.destroy()}for(c=0;c<v;c++)m=this._pendingInsertion[c],this._active.push(m);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(d,v){if(this.now=d,!this.paused){v*=this.timeScale;for(var c=0;c<this._active.length;c++){var m=this._active[c];if(!m.paused&&(m.elapsed+=v*m.timeScale,m.elapsed>=m.delay)){var g=m.elapsed-m.delay;if(m.elapsed=m.delay,!m.hasDispatched&&m.callback&&(m.hasDispatched=!0,m.callback.apply(m.callbackScope,m.args)),m.repeatCount>0){if(m.repeatCount--,g>=m.delay)for(;g>=m.delay&&m.repeatCount>0;)m.callback&&m.callback.apply(m.callbackScope,m.args),g-=m.delay,m.repeatCount--;m.elapsed=g,m.hasDispatched=!1}else m.hasDispatched&&this._pendingRemoval.push(m)}}}},shutdown:function(){var d;for(d=0;d<this._pendingInsertion.length;d++)this._pendingInsertion[d].destroy();for(d=0;d<this._active.length;d++)this._active[d].destroy();for(d=0;d<this._pendingRemoval.length;d++)this._pendingRemoval[d].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var v=this.systems.events;v.off(h.PRE_UPDATE,this.preUpdate,this),v.off(h.UPDATE,this.update,this),v.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});p.register("Clock",l,"time"),n.exports=l},96120:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(39429),u=r(95540),f=r(44594),l=r(89809),d=new a({Extends:p,initialize:function(c,m){p.call(this),this.scene=c,this.systems=c.sys,this.elapsed=0,this.timeScale=1,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var g=this.systems.events;g.on(f.PRE_UPDATE,this.preUpdate,this),g.on(f.UPDATE,this.update,this),g.once(f.SHUTDOWN,this.destroy,this),m&&this.add(m)},preUpdate:function(v,c){this.paused||(this.elapsed+=c*this.timeScale)},update:function(){if(!(this.paused||this.complete)){var v,c=this.events,m=!1,g=this.systems,y;for(v=0;v<c.length;v++){var x=c[v];if(!x.complete&&x.time<=this.elapsed){if(x.complete=!0,this.totalComplete++,y=x.target?x.target:this,x.if&&!x.if.call(y,x))continue;if(x.once&&(m=!0),x.set&&x.target)for(var C in x.set)x.target[C]=x.set[C];this.iteration&&x.repeat++,x.loop&&x.repeat&&x.loop.call(y),x.tween&&(x.tweenInstance=g.tweens.add(x.tween)),x.sound&&(typeof x.sound=="string"?g.sound.play(x.sound):g.sound.play(x.sound.key,x.sound.config)),x.event&&this.emit(x.event,y),x.run&&x.run.call(y),x.stop&&this.stop()}}if(m)for(v=0;v<c.length;v++)c[v].complete&&c[v].once&&(c.splice(v,1),v--);this.totalComplete>=c.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(l.COMPLETE,this)}},play:function(v){return v===void 0&&(v=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,v&&this.reset(),this},pause:function(){this.paused=!0;for(var v=this.events,c=0;c<v.length;c++){var m=v[c];m.tweenInstance&&(m.tweenInstance.paused=!0)}return this},repeat:function(v){return(v===void 0||v===!0)&&(v=-1),v===!1&&(v=0),this.loop=v,this},resume:function(){this.paused=!1;for(var v=this.events,c=0;c<v.length;c++){var m=v[c];m.tweenInstance&&(m.tweenInstance.paused=!1)}return this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(v){v===void 0&&(v=!1),this.elapsed=0,v||(this.iteration=0);for(var c=this.events,m=0;m<c.length;m++){var g=c[m];g.complete=!1,v||(g.repeat=0),g.tweenInstance&&g.tweenInstance.stop()}return this.play(!1)},add:function(v){Array.isArray(v)||(v=[v]);var c=this.events,m=0;c.length>0&&(m=c[c.length-1].time);for(var g=0;g<v.length;g++){var y=v[g],x=u(y,"at",0),C=u(y,"in",null);C!==null&&(x=this.elapsed+C);var S=u(y,"from",null);S!==null&&(x=m+S),c.push({complete:!1,time:x,repeat:0,if:u(y,"if",null),run:u(y,"run",null),loop:u(y,"loop",null),event:u(y,"event",null),target:u(y,"target",null),set:u(y,"set",null),tween:u(y,"tween",null),sound:u(y,"sound",null),once:u(y,"once",!1),stop:u(y,"stop",!1)}),m=x}return this.complete=!1,this},clear:function(){for(var v=this.events,c=0;c<v.length;c++){var m=v[c];m.tweenInstance&&m.tweenInstance.stop()}return v=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var v=Math.min(this.totalComplete,this.events.length);return v/this.events.length},destroy:function(){var v=this.systems.events;v.off(f.PRE_UPDATE,this.preUpdate,this),v.off(f.UPDATE,this.update,this),v.off(f.SHUTDOWN,this.destroy,this),this.clear(),this.scene=null,this.systems=null}});h.register("timeline",function(v){return new d(this.scene,v)}),n.exports=d},94880:(n,o,r)=>{var a=r(83419),p=r(95540),h=new a({initialize:function(f){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(f)},reset:function(u){if(this.delay=p(u,"delay",0),this.repeat=p(u,"repeat",0),this.loop=p(u,"loop",!1),this.callback=p(u,"callback",void 0),this.callbackScope=p(u,"callbackScope",this),this.args=p(u,"args",[]),this.timeScale=p(u,"timeScale",1),this.startAt=p(u,"startAt",0),this.paused=p(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay<=0&&this.repeatCount>0)throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var u=this.delay+this.delay*this.repeat,f=this.elapsed+this.delay*(this.repeat-this.repeatCount);return f/u}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(u){u===void 0&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});n.exports=h},35945:n=>{n.exports="complete"},89809:(n,o,r)=>{n.exports={COMPLETE:r(35945)}},90291:(n,o,r)=>{n.exports={Clock:r(33385),Events:r(89809),Timeline:r(96120),TimerEvent:r(94880)}},40382:(n,o,r)=>{var a=r(72905),p=r(83419),h=r(43491),u=r(88032),f=r(37277),l=r(44594),d=r(93109),v=r(86081),c=r(8357),m=r(43960),g=r(26012),y=new p({initialize:function(C){this.scene=C,this.events=C.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(l.UPDATE,this.update,this),this.events.once(l.SHUTDOWN,this.shutdown,this)},create:function(x){Array.isArray(x)||(x=[x]);for(var C=[],S=0;S<x.length;S++){var E=x[S];E instanceof v||E instanceof m?C.push(E):Array.isArray(E.tweens)?C.push(g(this,E)):C.push(c(this,E))}return C.length===1?C[0]:C},add:function(x){var C=x,S=this.tweens;return C instanceof v||C instanceof m||(Array.isArray(C.tweens)?C=g(this,C):C=c(this,C)),S.push(C.reset()),C},addMultiple:function(x){for(var C,S=[],E=this.tweens,T=0;T<x.length;T++)C=x[T],C instanceof v||C instanceof m||(Array.isArray(C.tweens)?C=g(this,C):C=c(this,C)),E.push(C.reset()),S.push(C);return S},chain:function(x){var C=g(this,x);return this.tweens.push(C.init()),C},getChainedTweens:function(x){return x.getChainedTweens()},has:function(x){return this.tweens.indexOf(x)>-1},existing:function(x){return this.has(x)||this.tweens.push(x.reset()),this},addCounter:function(x){var C=u(this,x);return this.tweens.push(C.reset()),C},stagger:function(x,C){return d(x,C)},setLagSmooth:function(x,C){return x===void 0&&(x=1/1e-8),C===void 0&&(C=0),this.maxLag=x,this.lagSkip=Math.min(C,this.maxLag),this},setFps:function(x){return x===void 0&&(x=240),this.gap=1e3/x,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(x){var C=Date.now()-this.prevTime;C>this.maxLag&&(this.startTime+=C-this.lagSkip),this.prevTime+=C;var S=this.prevTime-this.startTime,E=S-this.nextTime,T=S-this.time*1e3;return E>0||x?(S/=1e3,this.time=S,this.nextTime+=E+(E>=this.gap?4:this.gap-E)):T=0,T},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(x){x===void 0&&(x=!1);var C=this.getDelta(x);if(!(C<=0)){this.processing=!0;var S,E,T=[],P=this.tweens;for(S=0;S<P.length;S++)E=P[S],E.update(C)&&T.push(E);var M=T.length;if(M&&P.length>0){for(S=0;S<M;S++){E=T[S];var w=P.indexOf(E);w>-1&&(E.isPendingRemove()||E.isDestroyed())&&(P.splice(w,1),E.destroy())}T.length=0}this.processing=!1}},remove:function(x){return this.processing?x.setPendingRemoveState():(a(this.tweens,x),x.setRemovedState()),this},reset:function(x){return this.existing(x),x.seek(),x.setActiveState(),this},makeActive:function(x){return this.existing(x),x.setActiveState(),this},each:function(x,C){var S,E=[null];for(S=1;S<arguments.length;S++)E.push(arguments[S]);return this.tweens.forEach(function(T){E[0]=T,x.apply(C,E)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(x){var C=[],S=this.tweens;Array.isArray(x)?x=h(x):x=[x];for(var E=x.length,T=0;T<S.length;T++)for(var P=S[T],M=0;M<E;M++)!P.isDestroyed()&&P.hasTarget(x[M])&&C.push(P);return C},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(x){return this.timeScale=x,this},isTweening:function(x){for(var C=this.tweens,S,E=0;E<C.length;E++)if(S=C[E],S.isPlaying()&&S.hasTarget(x))return!0;return!1},killAll:function(){for(var x=this.processing?this.getTweens():this.tweens,C=0;C<x.length;C++)x[C].destroy();return this.processing||(x.length=0),this},killTweensOf:function(x){for(var C=this.getTweensOf(x),S=0;S<C.length;S++)C[S].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(l.UPDATE,this.update,this),this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.events=null}});f.register("TweenManager",y,"tweens"),n.exports=y},57355:n=>{var o=function(r,a,p){return r&&r.hasOwnProperty(a)?r[a]:p};n.exports=o},6113:(n,o,r)=>{var a=r(62640),p=r(35355),h=function(u,f){var l=a.Power0;if(typeof u=="string")if(a.hasOwnProperty(u))l=a[u];else{var d="";if(u.indexOf(".")){d=u.substring(u.indexOf(".")+1);var v=d.toLowerCase();v==="in"?d="easeIn":v==="out"?d="easeOut":v==="inout"&&(d="easeInOut")}u=p(u.substring(0,u.indexOf(".")+1)+d),a.hasOwnProperty(u)&&(l=a[u])}else typeof u=="function"&&(l=u);if(!f)return l;var c=f.slice(0);return c.unshift(0),function(m){return c[0]=m,l.apply(this,c)}};n.exports=h},91389:(n,o,r)=>{var a=r(89318),p=r(77259),h=r(28392),u={bezier:a,catmull:p,catmullrom:p,linear:h},f=function(l){if(l===null)return null;var d=u.linear;return typeof l=="string"?u.hasOwnProperty(l)&&(d=u[l]):typeof l=="function"&&(d=l),d};n.exports=f},55292:n=>{var o=function(r,a,p){var h;if(r.hasOwnProperty(a)){var u=typeof r[a];u==="function"?h=function(f,l,d,v,c,m){return r[a](f,l,d,v,c,m)}:h=function(){return r[a]}}else typeof p=="function"?h=p:h=function(){return p};return h};n.exports=o},82985:(n,o,r)=>{var a=r(81076),p=function(h){var u,f=[];if(h.hasOwnProperty("props"))for(u in h.props)u.substring(0,1)!=="_"&&f.push({key:u,value:h.props[u]});else for(u in h)a.indexOf(u)===-1&&u.substring(0,1)!=="_"&&f.push({key:u,value:h[u]});return f};n.exports=p},62329:(n,o,r)=>{var a=r(35154),p=function(h){var u=a(h,"targets",null);return u===null||(typeof u=="function"&&(u=u.call()),Array.isArray(u)||(u=[u])),u};n.exports=p},17777:(n,o,r)=>{var a=r(30976),p=r(99472);function h(v){return!!v.getActive&&typeof v.getActive=="function"}function u(v){return!!v.getStart&&typeof v.getStart=="function"}function f(v){return!!v.getEnd&&typeof v.getEnd=="function"}function l(v){return u(v)||f(v)||h(v)}var d=function(v,c){var m,g=function(U,z,N){return N},y=function(U,z,N){return N},x=null,C=typeof c;if(C==="number")g=function(){return c};else if(Array.isArray(c))y=function(){return c[0]},g=function(){return c[c.length-1]};else if(C==="string"){var S=c.toLowerCase(),E=S.substring(0,6)==="random",T=S.substring(0,3)==="int";if(E||T){var P=S.indexOf("("),M=S.indexOf(")"),w=S.indexOf(",");if(P&&M&&w){var b=parseFloat(S.substring(P+1,w)),I=parseFloat(S.substring(w+1,M));E?g=function(){return p(b,I)}:g=function(){return a(b,I)}}else throw new Error("invalid random() format")}else{S=S[0];var R=parseFloat(c.substr(2));switch(S){case"+":g=function(U,z,N){return N+R};break;case"-":g=function(U,z,N){return N-R};break;case"*":g=function(U,z,N){return N*R};break;case"/":g=function(U,z,N){return N/R};break;default:g=function(){return parseFloat(c)}}}}else if(C==="function")g=c;else if(C==="object")if(l(c))h(c)&&(x=c.getActive),f(c)&&(g=c.getEnd),u(c)&&(y=c.getStart);else if(c.hasOwnProperty("value"))m=d(v,c.value);else{var A=c.hasOwnProperty("to"),L=c.hasOwnProperty("from"),O=c.hasOwnProperty("start");if(A&&(L||O)){if(m=d(v,c.to),O){var F=d(v,c.start);m.getActive=F.getEnd}if(L){var G=d(v,c.from);m.getStart=G.getEnd}}}return m||(m={getActive:x,getEnd:g,getStart:y}),m};n.exports=d},88032:(n,o,r)=>{var a=r(70402),p=r(69902),h=r(23568),u=r(57355),f=r(6113),l=r(95540),d=r(55292),v=r(35154),c=r(17777),m=r(269),g=r(86081),y=function(x,C,S){if(C instanceof g)return C.parent=x,C;S===void 0?S=p:S=m(p,S);var E=l(C,"from",0),T=l(C,"to",1),P=[{value:E}],M=l(C,"delay",S.delay),w=l(C,"easeParams",S.easeParams),b=l(C,"ease",S.ease),I=c("value",T),R=new g(x,P),A=R.add(0,"value",I.getEnd,I.getStart,I.getActive,f(l(C,"ease",b),l(C,"easeParams",w)),d(C,"delay",M),l(C,"duration",S.duration),u(C,"yoyo",S.yoyo),l(C,"hold",S.hold),l(C,"repeat",S.repeat),l(C,"repeatDelay",S.repeatDelay),!1,!1);A.start=E,A.current=E,R.completeDelay=h(C,"completeDelay",0),R.loop=Math.round(h(C,"loop",0)),R.loopDelay=Math.round(h(C,"loopDelay",0)),R.paused=u(C,"paused",!1),R.persist=u(C,"persist",!1),R.isNumberTween=!0,R.callbackScope=v(C,"callbackScope",R);for(var L=a.TYPES,O=0;O<L.length;O++){var F=L[O],G=v(C,F,!1);if(G){var U=v(C,F+"Params",[]);R.setCallback(F,G,U)}}return R};n.exports=y},93109:(n,o,r)=>{var a=r(6113),p=r(35154),h=r(36383),u=function(f,l){l===void 0&&(l={});var d,v=p(l,"start",0),c=p(l,"ease",null),m=p(l,"grid",null),g=p(l,"from",0),y=g==="first",x=g==="center",C=g==="last",S=typeof g=="number",E=Array.isArray(f),T=parseFloat(E?f[0]:f),P=E?parseFloat(f[1]):0,M=Math.max(T,P);if(E&&(v+=T),m){var w=m[0],b=m[1],I=0,R=0,A=0,L=0,O=[];C?(I=w-1,R=b-1):S?(I=g%w,R=Math.floor(g/w)):x&&(I=(w-1)/2,R=(b-1)/2);for(var F=h.MIN_SAFE_INTEGER,G=0;G<b;G++){O[G]=[];for(var U=0;U<w;U++){A=I-U,L=R-G;var z=Math.sqrt(A*A+L*L);z>F&&(F=z),O[G][U]=z}}}var N=c?a(c):null;return m?d=function(k,D,V,B){var W=0,H=B%w,Y=Math.floor(B/w);H>=0&&H<w&&Y>=0&&Y<b&&(W=O[Y][H]);var X;if(E){var $=P-T;N?X=W/F*$*N(W/F):X=W/F*$}else N?X=W*T*N(W/F):X=W*T;return X+v}:d=function(k,D,V,B,W){W--;var H;y?H=B:x?H=Math.abs(W/2-B):C?H=W-B:S&&(H=Math.abs(g-B));var Y;if(E){var X;x?X=(P-T)/W*(H*2):X=(P-T)/W*H,N?Y=X*N(H/W):Y=X}else N?Y=W*M*N(H/W):Y=H*T;return Y+v},d};n.exports=u},8357:(n,o,r)=>{var a=r(70402),p=r(69902),h=r(23568),u=r(57355),f=r(6113),l=r(95540),d=r(91389),v=r(55292),c=r(82985),m=r(62329),g=r(35154),y=r(17777),x=r(269),C=r(86081),S=function(E,T,P){if(T instanceof C)return T.parent=E,T;P===void 0?P=p:P=x(p,P);var M=m(T);!M&&P.targets&&(M=P.targets);for(var w=c(T),b=l(T,"delay",P.delay),I=l(T,"duration",P.duration),R=l(T,"easeParams",P.easeParams),A=l(T,"ease",P.ease),L=l(T,"hold",P.hold),O=l(T,"repeat",P.repeat),F=l(T,"repeatDelay",P.repeatDelay),G=u(T,"yoyo",P.yoyo),U=u(T,"flipX",P.flipX),z=u(T,"flipY",P.flipY),N=l(T,"interpolation",P.interpolation),k=function(Q,tt,rt,et){if(rt==="texture"){var ot=et,ut=void 0;Array.isArray(et)?(ot=et[0],ut=et[1]):et.hasOwnProperty("value")?(ot=et.value,Array.isArray(et.value)?(ot=et.value[0],ut=et.value[1]):typeof et.value=="string"&&(ot=et.value)):typeof et=="string"&&(ot=et),Q.addFrame(tt,ot,ut,v(et,"delay",b),l(et,"duration",I),l(et,"hold",L),l(et,"repeat",O),l(et,"repeatDelay",F),u(et,"flipX",U),u(et,"flipY",z))}else{var dt=y(rt,et),it=d(l(et,"interpolation",N));Q.add(tt,rt,dt.getEnd,dt.getStart,dt.getActive,f(l(et,"ease",A),l(et,"easeParams",R)),v(et,"delay",b),l(et,"duration",I),u(et,"yoyo",G),l(et,"hold",L),l(et,"repeat",O),l(et,"repeatDelay",F),u(et,"flipX",U),u(et,"flipY",z),it,it?et:null)}},D=new C(E,M),V=0;V<w.length;V++)for(var B=w[V].key,W=w[V].value,H=0;H<M.length;H++)B==="scale"&&!M[H].hasOwnProperty("scale")?(k(D,H,"scaleX",W),k(D,H,"scaleY",W)):k(D,H,B,W);D.completeDelay=h(T,"completeDelay",0),D.loop=Math.round(h(T,"loop",0)),D.loopDelay=Math.round(h(T,"loopDelay",0)),D.paused=u(T,"paused",!1),D.persist=u(T,"persist",!1),D.callbackScope=l(T,"callbackScope",D);for(var Y=a.TYPES,X=0;X<Y.length;X++){var $=Y[X],J=g(T,$,!1);if(J){var q=g(T,$+"Params",[]);D.setCallback($,J,q)}}return D};n.exports=S},26012:(n,o,r)=>{var a=r(70402),p=r(23568),h=r(57355),u=r(62329),f=r(35154),l=r(8357),d=r(43960),v=function(c,m){if(m instanceof d)return m.parent=c,m;var g=new d(c);g.startDelay=f(m,"delay",0),g.completeDelay=p(m,"completeDelay",0),g.loop=Math.round(p(m,"loop",f(m,"repeat",0))),g.loopDelay=Math.round(p(m,"loopDelay",f(m,"repeatDelay",0))),g.paused=h(m,"paused",!1),g.persist=h(m,"persist",!1),g.callbackScope=f(m,"callbackScope",g);var y,x=a.TYPES;for(y=0;y<x.length;y++){var C=x[y],S=f(m,C,!1);if(S){var E=f(m,C+"Params",[]);g.setCallback(C,S,E)}}var T=f(m,"tweens",null);if(Array.isArray(T)){var P=[],M=u(m),w=void 0;for(M&&(w={targets:M}),y=0;y<T.length;y++)P.push(l(g,T[y],w));g.add(P)}return g};n.exports=v},30231:(n,o,r)=>{n.exports={GetBoolean:r(57355),GetEaseFunction:r(6113),GetInterpolationFunction:r(91389),GetNewValue:r(55292),GetProps:r(82985),GetTargets:r(62329),GetValueOp:r(17777),NumberTweenBuilder:r(88032),StaggerBuilder:r(93109),TweenBuilder:r(8357)}},73685:n=>{n.exports="active"},98540:n=>{n.exports="complete"},67233:n=>{n.exports="loop"},2859:n=>{n.exports="pause"},98336:n=>{n.exports="repeat"},25764:n=>{n.exports="resume"},32193:n=>{n.exports="start"},84371:n=>{n.exports="stop"},70766:n=>{n.exports="update"},55659:n=>{n.exports="yoyo"},842:(n,o,r)=>{n.exports={TWEEN_ACTIVE:r(73685),TWEEN_COMPLETE:r(98540),TWEEN_LOOP:r(67233),TWEEN_PAUSE:r(2859),TWEEN_RESUME:r(25764),TWEEN_REPEAT:r(98336),TWEEN_START:r(32193),TWEEN_STOP:r(84371),TWEEN_UPDATE:r(70766),TWEEN_YOYO:r(55659)}},43066:(n,o,r)=>{var a={States:r(86353),Builders:r(30231),Events:r(842),TweenManager:r(40382),Tween:r(86081),TweenData:r(48177),TweenFrameData:r(42220),BaseTween:r(70402),TweenChain:r(43960)};n.exports=a},70402:(n,o,r)=>{var a=r(83419),p=r(50792),h=r(842),u=r(86353),f=new a({Extends:p,initialize:function(d){p.call(this),this.parent=d,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(l){return this.timeScale=l,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(h.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(h.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(h.TWEEN_COMPLETE,"onComplete")},complete:function(l){return l===void 0&&(l=0),l?(this.setCompleteDelayState(),this.countdown=l):this.onCompleteHandler(),this},completeAfterLoop:function(l){return l===void 0&&(l=0),this.loopCounter>l&&(this.loopCounter=l),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(h.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(l){this.countdown-=l,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(l){return this.countdown-=l,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(h.TWEEN_START,"onStart"),l=0),l},updateCompleteDelay:function(l){this.countdown-=l,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(l,d,v){return v===void 0&&(v=[]),this.callbacks.hasOwnProperty(l)&&(this.callbacks[l]={func:d,params:v}),this},setPendingState:function(){this.state=u.PENDING},setActiveState:function(){this.state=u.ACTIVE,this.hasStarted=!1},setLoopDelayState:function(){this.state=u.LOOP_DELAY},setCompleteDelayState:function(){this.state=u.COMPLETE_DELAY},setStartDelayState:function(){this.state=u.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=u.PENDING_REMOVE},setRemovedState:function(){this.state=u.REMOVED},setFinishedState:function(){this.state=u.FINISHED},setDestroyedState:function(){this.state=u.DESTROYED},isPending:function(){return this.state===u.PENDING},isActive:function(){return this.state===u.ACTIVE},isLoopDelayed:function(){return this.state===u.LOOP_DELAY},isCompleteDelayed:function(){return this.state===u.COMPLETE_DELAY},isStartDelayed:function(){return this.state===u.START_DELAY},isPendingRemove:function(){return this.state===u.PENDING_REMOVE},isRemoved:function(){return this.state===u.REMOVED},isFinished:function(){return this.state===u.FINISHED},isDestroyed:function(){return this.state===u.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(l){l.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});f.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],n.exports=f},95042:(n,o,r)=>{var a=r(83419),p=r(842),h=r(86353),u=new a({initialize:function(l,d,v,c,m,g,y,x,C,S){this.tween=l,this.targetIndex=d,this.duration=c<=0?.01:c,this.totalDuration=0,this.delay=0,this.getDelay=v,this.yoyo=m,this.hold=g,this.repeat=y,this.repeatDelay=x,this.repeatCounter=0,this.flipX=C,this.flipY=S,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(f){f===void 0&&(f=this.current),this.tween.targets[this.targetIndex][this.key]=f},setCreatedState:function(){this.state=h.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=h.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=h.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=h.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=h.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=h.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=h.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=h.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===h.CREATED},isDelayed:function(){return this.state===h.DELAY},isPendingRender:function(){return this.state===h.PENDING_RENDER},isPlayingForward:function(){return this.state===h.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===h.PLAYING_BACKWARD},isHolding:function(){return this.state===h.HOLD_DELAY},isRepeating:function(){return this.state===h.REPEAT_DELAY},isComplete:function(){return this.state===h.COMPLETE},setStateFromEnd:function(f){this.yoyo?this.onRepeat(f,!0,!0):this.repeatCounter>0?this.onRepeat(f,!0,!1):this.setCompleteState()},setStateFromStart:function(f){this.repeatCounter>0?this.onRepeat(f,!1):this.setCompleteState()},reset:function(){var f=this.tween,l=f.totalTargets,d=this.targetIndex,v=f.targets[d],c=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(v,c,0,d,l,f),this.repeatCounter=this.repeat===-1?h.MAX:this.repeat,this.setPendingRenderState();var m=this.duration+this.hold;this.yoyo&&(m+=this.duration);var g=m+this.repeatDelay;this.totalDuration=this.delay+m,this.repeat===-1?(this.totalDuration+=g*h.MAX,f.isInfinite=!0):this.repeat>0&&(this.totalDuration+=g*this.repeat),this.totalDuration>f.duration&&(f.duration=this.totalDuration),this.delay<f.startDelay&&(f.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(f,l,d){var v=this.tween,c=v.totalTargets,m=this.targetIndex,g=v.targets[m],y=this.key,x=y!=="texture";if(this.elapsed=f,this.progress=f/this.duration,this.flipX&&g.toggleFlipX(),this.flipY&&g.toggleFlipY(),x&&(l||d)&&(this.start=this.getStartValue(g,y,this.start,m,c,v)),d){this.setPlayingBackwardState(),this.dispatchEvent(p.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,x&&(this.end=this.getEndValue(g,y,this.start,m,c,v)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-f,x&&(this.current=this.start,g[y]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(p.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});n.exports=u},69902:n=>{var o={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};n.exports=o},81076:n=>{n.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(n,o,r)=>{var a=r(70402),p=r(83419),h=r(842),u=r(44603),f=r(39429),l=r(36383),d=r(86353),v=r(48177),c=r(42220),m=new p({Extends:a,initialize:function(y,x){a.call(this,y),this.targets=x,this.totalTargets=x.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.isNumberTween=!1},add:function(g,y,x,C,S,E,T,P,M,w,b,I,R,A,L,O){var F=new v(this,g,y,x,C,S,E,T,P,M,w,b,I,R,A,L,O);return this.totalData=this.data.push(F),F},addFrame:function(g,y,x,C,S,E,T,P,M,w){var b=new c(this,g,y,x,C,S,E,T,P,M,w);return this.totalData=this.data.push(b),b},getValue:function(g){g===void 0&&(g=0);var y=null;return this.data&&(y=this.data[g].current),y},hasTarget:function(g){return this.targets&&this.targets.indexOf(g)!==-1},updateTo:function(g,y,x){if(x===void 0&&(x=!1),g!=="texture")for(var C=0;C<this.totalData;C++){var S=this.data[C];S.key===g&&(S.isPlayingForward()||S.isPlayingBackward())&&(S.end=y,x&&(S.start=S.current))}return this},restart:function(){switch(this.state){case d.REMOVED:case d.FINISHED:this.seek(),this.parent.makeActive(this);break;case d.PENDING:case d.PENDING_REMOVE:this.parent.reset(this);break;case d.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(h.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,a.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(g,y,x){if(g===void 0&&(g=0),y===void 0&&(y=16.6),x===void 0&&(x=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;x||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive");var C=this.paused;if(this.paused=!1,g>0){for(var S=Math.floor(g/y),E=g-S*y,T=0;T<S;T++)this.update(y);E>0&&this.update(E)}return this.paused=C,this.isSeeking=!1,this},initTweenData:function(g){g===void 0&&(g=!1),this.duration=0,this.startDelay=l.MAX_SAFE_INTEGER;for(var y=this.data,x=0;x<this.totalData;x++)y[x].reset(g);this.duration=Math.max(this.duration,.01);var C=this.duration,S=this.completeDelay,E=this.loopCounter,T=this.loopDelay;E>0?this.totalDuration=C+S+(C+T)*E:this.totalDuration=C+S},reset:function(g){return g===void 0&&(g=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=d.MAX),g||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(h.TWEEN_ACTIVE,"onActive")),this},update:function(g){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.paused||this.isFinished())return!1;if(g*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(g),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(g),!1;this.hasStarted||(this.startDelay-=g,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(h.TWEEN_START,"onStart"),g=0));var y=!1;if(this.isActive())for(var x=this.data,C=0;C<this.totalData;C++)x[C].update(g)&&(y=!0);this.elapsed+=g,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=g,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),y||this.nextState();var S=this.isPendingRemove();return S&&this.persist&&(this.setFinishedState(),S=!1),S},forward:function(g){return this.update(g),this},rewind:function(g){return this.update(-g),this},dispatchEvent:function(g,y){if(!this.isSeeking){if(this.emit(g,this,this.targets),!this.callbacks)return;var x=this.callbacks[y];x&&x.func.apply(this.callbackScope,[this,this.targets].concat(x.params))}},destroy:function(){a.prototype.destroy.call(this),this.targets=null}});f.register("tween",function(g){return this.scene.sys.tweens.add(g)}),u.register("tween",function(g){return this.scene.sys.tweens.create(g)}),n.exports=m},43960:(n,o,r)=>{var a=r(72905),p=r(70402),h=r(83419),u=r(842),f=r(44603),l=r(39429),d=r(86353),v=new h({Extends:p,initialize:function(m){p.call(this,m),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?d.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this},add:function(c){var m=this.parent.create(c);Array.isArray(m)||(m=[m]);for(var g=this.data,y=0;y<m.length;y++){var x=m[y];x.parent=this,g.push(x.reset())}return this.totalData=g.length,this},remove:function(c){return a(this.data,c),c.setRemovedState(),c===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(c){for(var m=this.data,g=0;g<this.totalData;g++)if(m[g].hasTarget(c))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(c){return c.seek(),c.setActiveState(),this},makeActive:function(c){return c.reset(),c.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var c=this.data,m=this.totalData,g=0;g<m;g++)c[g].reset(!1);this.setCurrentTween(0)},update:function(c){if(this.isPendingRemove()||this.isDestroyed())return this.persist?(this.setFinishedState(),!1):!0;if(this.isFinished()||this.paused)return!1;if(c*=this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(c),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(c),!1;this.hasStarted||(this.startDelay-=c,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(u.TWEEN_START,"onStart"),c=0));var m=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(c)&&this.nextTween()&&this.nextState(),m=this.isPendingRemove(),m&&this.persist&&(this.setFinishedState(),m=!1)),m},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(c){this.currentIndex=c,this.currentTween=this.data[c],this.currentTween.setActiveState()},dispatchEvent:function(c,m){this.emit(c,this);var g=this.callbacks[m];g&&g.func.apply(this.callbackScope,[this].concat(g.params))},destroy:function(){p.prototype.destroy.call(this),this.currentTween=null}});l.register("tweenchain",function(c){return this.scene.sys.tweens.chain(c)}),f.register("tweenchain",function(c){return this.scene.sys.tweens.create(c)}),n.exports=v},48177:(n,o,r)=>{var a=r(95042),p=r(45319),h=r(83419),u=r(842),f=new h({Extends:a,initialize:function(d,v,c,m,g,y,x,C,S,E,T,P,M,w,b,I,R){a.call(this,d,v,C,S,E,T,P,M,w,b),this.key=c,this.getActiveValue=y,this.getEndValue=m,this.getStartValue=g,this.ease=x,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=I,this.interpolationData=R},reset:function(l){a.prototype.reset.call(this);var d=this.tween.targets[this.targetIndex],v=this.key;l&&(d[v]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(d[v]=this.getActiveValue(d,v,0))},update:function(l){var d=this.tween,v=d.totalTargets,c=this.targetIndex,m=d.targets[c],g=this.key;if(!m)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=l,this.elapsed<=0&&(this.elapsed=0,l=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(m,g,m[g],c,v,d),this.end=this.getEndValue(m,g,this.start,c,v,d),this.current=this.start,m[g]=this.start,this.setPlayingForwardState(),!0;var y=this.isPlayingForward(),x=this.isPlayingBackward();if(y||x){var C=this.elapsed,S=this.duration,E=0,T=!1;C+=l,C>=S?(E=C-S,C=S,T=!0):C<0&&(C=0);var P=p(C/S,0,1);this.elapsed=C,this.progress=P,this.previous=this.current,y||(P=1-P);var M=this.ease(P);this.interpolation?this.current=this.interpolation(this.interpolationData,M):this.current=this.start+(this.end-this.start)*M,m[g]=this.current,T&&(y?(d.isNumberTween&&(this.current=this.end,m[g]=this.current),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(E)):(d.isNumberTween&&(this.current=this.start,m[g]=this.current),this.setStateFromStart(E))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(l,d){var v=this.tween;if(!v.isSeeking){var c=v.targets[this.targetIndex],m=this.key,g=this.current,y=this.previous;v.emit(l,v,m,c,g,y);var x=v.callbacks[d];x&&x.func.apply(v.callbackScope,[v,c,m,g,y].concat(x.params))}},destroy:function(){a.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});n.exports=f},42220:(n,o,r)=>{var a=r(95042),p=r(45319),h=r(83419),u=r(842),f=new h({Extends:a,initialize:function(d,v,c,m,g,y,x,C,S,E,T){a.call(this,d,v,g,y,!1,x,C,S,E,T),this.key="texture",this.startTexture=null,this.endTexture=c,this.startFrame=null,this.endFrame=m,this.yoyo=C!==0},reset:function(l){a.prototype.reset.call(this);var d=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=d.texture.key,this.startFrame=d.frame.name),l&&d.setTexture(this.startTexture,this.startFrame)},update:function(l){var d=this.tween,v=this.targetIndex,c=d.targets[v];if(!c)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=l,this.elapsed<=0&&(this.elapsed=0,l=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&c.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var m=this.isPlayingForward(),g=this.isPlayingBackward();if(m||g){var y=this.elapsed,x=this.duration,C=0,S=!1;y+=l,y>=x?(C=y-x,y=x,S=!0):y<0&&(y=0);var E=p(y/x,0,1);this.elapsed=y,this.progress=E,S&&(m?(c.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(c.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(C))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(l,d){var v=this.tween;if(!v.isSeeking){var c=v.targets[this.targetIndex],m=this.key;v.emit(l,v,m,c);var g=v.callbacks[d];g&&g.func.apply(v.callbackScope,[v,c,m].concat(g.params))}},destroy:function(){a.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});n.exports=f},86353:n=>{var o={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};n.exports=o},83419:n=>{function o(f){return!!f.get&&typeof f.get=="function"||!!f.set&&typeof f.set=="function"}function r(f,l,d){var v=d?f[l]:Object.getOwnPropertyDescriptor(f,l);return!d&&v.value&&typeof v.value=="object"&&(v=v.value),v&&o(v)?(typeof v.enumerable>"u"&&(v.enumerable=!0),typeof v.configurable>"u"&&(v.configurable=!0),v):!1}function a(f,l){var d=Object.getOwnPropertyDescriptor(f,l);return d?(d.value&&typeof d.value=="object"&&(d=d.value),d.configurable===!1):!1}function p(f,l,d,v){for(var c in l)if(l.hasOwnProperty(c)){var m=r(l,c,d);if(m!==!1){var g=v||f;if(a(g.prototype,c)){if(u.ignoreFinals)continue;throw new Error("cannot override final property '"+c+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(f.prototype,c,m)}else f.prototype[c]=l[c]}}function h(f,l){if(l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++)p(f,l[d].prototype||l[d])}}function u(f){f||(f={});var l,d;if(f.initialize){if(typeof f.initialize!="function")throw new Error("initialize must be a function");l=f.initialize,delete f.initialize}else if(f.Extends){var v=f.Extends;l=function(){v.apply(this,arguments)}}else l=function(){};f.Extends?(l.prototype=Object.create(f.Extends.prototype),l.prototype.constructor=l,d=f.Extends,delete f.Extends):l.prototype.constructor=l;var c=null;return f.Mixins&&(c=f.Mixins,delete f.Mixins),h(l,c),p(l,f,!0,d),l}u.extend=p,u.mixin=h,u.ignoreFinals=!1,n.exports=u},29747:n=>{var o=function(){};n.exports=o},20242:n=>{var o=function(){return null};n.exports=o},71146:n=>{var o=function(r,a,p,h,u){if(u===void 0&&(u=r),p>0){var f=p-r.length;if(f<=0)return null}if(!Array.isArray(a))return r.indexOf(a)===-1?(r.push(a),h&&h.call(u,a),a):null;for(var l=a.length-1;l>=0;)r.indexOf(a[l])!==-1&&a.splice(l,1),l--;if(l=a.length,l===0)return null;p>0&&l>f&&(a.splice(f),l=f);for(var d=0;d<l;d++){var v=a[d];r.push(v),h&&h.call(u,v)}return a};n.exports=o},51067:n=>{var o=function(r,a,p,h,u,f){if(p===void 0&&(p=0),f===void 0&&(f=r),h>0){var l=h-r.length;if(l<=0)return null}if(!Array.isArray(a))return r.indexOf(a)===-1?(r.splice(p,0,a),u&&u.call(f,a),a):null;for(var d=a.length-1;d>=0;)r.indexOf(a[d])!==-1&&a.pop(),d--;if(d=a.length,d===0)return null;h>0&&d>l&&(a.splice(l),d=l);for(var v=d-1;v>=0;v--){var c=a[v];r.splice(p,0,c),u&&u.call(f,c)}return a};n.exports=o},66905:n=>{var o=function(r,a){var p=r.indexOf(a);return p!==-1&&p<r.length&&(r.splice(p,1),r.push(a)),a};n.exports=o},21612:(n,o,r)=>{var a=r(82011),p=function(h,u,f,l,d){l===void 0&&(l=0),d===void 0&&(d=h.length);var v=0;if(a(h,l,d))for(var c=l;c<d;c++){var m=h[c];m[u]===f&&v++}return v};n.exports=p},95428:n=>{var o=function(r,a,p){var h,u=[null];for(h=3;h<arguments.length;h++)u.push(arguments[h]);for(h=0;h<r.length;h++)u[0]=r[h],a.apply(p,u);return r};n.exports=o},36914:(n,o,r)=>{var a=r(82011),p=function(h,u,f,l,d){if(l===void 0&&(l=0),d===void 0&&(d=h.length),a(h,l,d)){var v,c=[null];for(v=5;v<arguments.length;v++)c.push(arguments[v]);for(v=l;v<d;v++)c[0]=h[v],u.apply(f,c)}return h};n.exports=p},81957:n=>{var o=function(r,a,p){if(a.length){if(a.length===1)return a[0]}else return NaN;var h=1,u,f;if(p){if(r<a[0][p])return a[0];for(;a[h][p]<r;)h++}else for(;a[h]<r;)h++;return h>a.length&&(h=a.length),p?(u=a[h-1][p],f=a[h][p],f-r<=r-u?a[h]:a[h-1]):(u=a[h-1],f=a[h],f-r<=r-u?f:u)};n.exports=o},43491:n=>{var o=function(r,a){a===void 0&&(a=[]);for(var p=0;p<r.length;p++)Array.isArray(r[p])?o(r[p],a):a.push(r[p]);return a};n.exports=o},46710:(n,o,r)=>{var a=r(82011),p=function(h,u,f,l,d){l===void 0&&(l=0),d===void 0&&(d=h.length);var v=[];if(a(h,l,d))for(var c=l;c<d;c++){var m=h[c];(!u||u&&f===void 0&&m.hasOwnProperty(u)||u&&f!==void 0&&m[u]===f)&&v.push(m)}return v};n.exports=p},58731:(n,o,r)=>{var a=r(82011),p=function(h,u,f,l,d){if(l===void 0&&(l=0),d===void 0&&(d=h.length),l!==-1){if(a(h,l,d))for(var v=l;v<d;v++){var c=h[v];if(!u||u&&f===void 0&&c.hasOwnProperty(u)||u&&f!==void 0&&c[u]===f)return c}}else if(a(h,0,d))for(var v=d;v>=0;v--){var c=h[v];if(!u||u&&f===void 0&&c.hasOwnProperty(u)||u&&f!==void 0&&c[u]===f)return c}return null};n.exports=p},26546:n=>{var o=function(r,a,p){a===void 0&&(a=0),p===void 0&&(p=r.length);var h=a+Math.floor(Math.random()*p);return r[h]===void 0?null:r[h]};n.exports=o},85835:n=>{var o=function(r,a,p){if(a===p)return r;var h=r.indexOf(a),u=r.indexOf(p);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h>u||(r.splice(h,1),u=r.indexOf(p),r.splice(u+1,0,a)),r};n.exports=o},83371:n=>{var o=function(r,a,p){if(a===p)return r;var h=r.indexOf(a),u=r.indexOf(p);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return h<u||(r.splice(h,1),u===0?r.unshift(a):r.splice(u,0,a)),r};n.exports=o},70864:n=>{var o=function(r,a){var p=r.indexOf(a);if(p>0){var h=r[p-1],u=r.indexOf(h);r[p]=h,r[u]=a}return r};n.exports=o},69693:n=>{var o=function(r,a,p){var h=r.indexOf(a);if(h===-1||p<0||p>=r.length)throw new Error("Supplied index out of bounds");return h!==p&&(r.splice(h,1),r.splice(p,0,a)),a};n.exports=o},40853:n=>{var o=function(r,a){var p=r.indexOf(a);if(p!==-1&&p<r.length-1){var h=r[p+1],u=r.indexOf(h);r[p]=h,r[u]=a}return r};n.exports=o},20283:n=>{var o=function(r,a,p,h){var u=[],f,l=!1;if((p||h)&&(l=!0,p||(p=""),h||(h="")),a<r)for(f=r;f>=a;f--)l?u.push(p+f.toString()+h):u.push(f);else for(f=r;f<=a;f++)l?u.push(p+f.toString()+h):u.push(f);return u};n.exports=o},593:(n,o,r)=>{var a=r(2284),p=function(h,u,f){h===void 0&&(h=0),u===void 0&&(u=null),f===void 0&&(f=1),u===null&&(u=h,h=0);for(var l=[],d=Math.max(a((u-h)/(f||1)),0),v=0;v<d;v++)l.push(h),h+=f;return l};n.exports=p},43886:n=>{function o(p,h,u){var f=p[h];p[h]=p[u],p[u]=f}function r(p,h){return p<h?-1:p>h?1:0}var a=function(p,h,u,f,l){for(u===void 0&&(u=0),f===void 0&&(f=p.length-1),l===void 0&&(l=r);f>u;){if(f-u>600){var d=f-u+1,v=h-u+1,c=Math.log(d),m=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*m*(d-m)/d)*(v-d/2<0?-1:1),y=Math.max(u,Math.floor(h-v*m/d+g)),x=Math.min(f,Math.floor(h+(d-v)*m/d+g));a(p,h,y,x,l)}var C=p[h],S=u,E=f;for(o(p,u,h),l(p[f],C)>0&&o(p,u,f);S<E;){for(o(p,S,E),S++,E--;l(p[S],C)<0;)S++;for(;l(p[E],C)>0;)E--}l(p[u],C)===0?o(p,u,E):(E++,o(p,E,f)),E<=h&&(u=E+1),h<=E&&(f=E-1)}};n.exports=a},88492:(n,o,r)=>{var a=r(35154),p=r(33680),h=function(f,l,d){for(var v=[],c=0;c<f.length;c++)for(var m=0;m<l.length;m++)for(var g=0;g<d;g++)v.push({a:f[c],b:l[m]});return v},u=function(f,l,d){var v=a(d,"max",0),c=a(d,"qty",1),m=a(d,"random",!1),g=a(d,"randomB",!1),y=a(d,"repeat",0),x=a(d,"yoyo",!1),C=[];if(g&&p(l),y===-1)if(v===0)y=0;else{var S=f.length*l.length*c;x&&(S*=2),y=Math.ceil(v/S)}for(var E=0;E<=y;E++){var T=h(f,l,c);m&&p(T),C=C.concat(T),x&&(T.reverse(),C=C.concat(T))}return v&&C.splice(v),C};n.exports=u},72905:(n,o,r)=>{var a=r(19133),p=function(h,u,f,l){l===void 0&&(l=h);var d;if(!Array.isArray(u))return d=h.indexOf(u),d!==-1?(a(h,d),f&&f.call(l,u),u):null;for(var v=u.length-1,c=[];v>=0;){var m=u[v];d=h.indexOf(m),d!==-1&&(a(h,d),c.push(m),f&&f.call(l,m)),v--}return c};n.exports=p},60248:(n,o,r)=>{var a=r(19133),p=function(h,u,f,l){if(l===void 0&&(l=h),u<0||u>h.length-1)throw new Error("Index out of bounds");var d=a(h,u);return f&&f.call(l,d),d};n.exports=p},81409:(n,o,r)=>{var a=r(82011),p=function(h,u,f,l,d){if(u===void 0&&(u=0),f===void 0&&(f=h.length),d===void 0&&(d=h),a(h,u,f)){var v=f-u,c=h.splice(u,v);if(l)for(var m=0;m<c.length;m++){var g=c[m];l.call(d,g)}return c}else return[]};n.exports=p},31856:(n,o,r)=>{var a=r(19133),p=function(h,u,f){u===void 0&&(u=0),f===void 0&&(f=h.length);var l=u+Math.floor(Math.random()*f);return a(h,l)};n.exports=p},42169:n=>{var o=function(r,a,p){var h=r.indexOf(a),u=r.indexOf(p);return h!==-1&&u===-1?(r[h]=p,!0):!1};n.exports=o},86003:n=>{var o=function(r,a){a===void 0&&(a=1);for(var p=null,h=0;h<a;h++)p=r.shift(),r.push(p);return p};n.exports=o},49498:n=>{var o=function(r,a){a===void 0&&(a=1);for(var p=null,h=0;h<a;h++)p=r.pop(),r.unshift(p);return p};n.exports=o},82011:n=>{var o=function(r,a,p,h){var u=r.length;if(a<0||a>=u||a>=p||p>u){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};n.exports=o},89545:n=>{var o=function(r,a){var p=r.indexOf(a);return p!==-1&&p>0&&(r.splice(p,1),r.unshift(a)),a};n.exports=o},17810:(n,o,r)=>{var a=r(82011),p=function(h,u,f,l,d){if(l===void 0&&(l=0),d===void 0&&(d=h.length),a(h,l,d))for(var v=l;v<d;v++){var c=h[v];c.hasOwnProperty(u)&&(c[u]=f)}return h};n.exports=p},33680:n=>{var o=function(r){for(var a=r.length-1;a>0;a--){var p=Math.floor(Math.random()*(a+1)),h=r[a];r[a]=r[p],r[p]=h}return r};n.exports=o},90126:n=>{var o=function(r){var a=/\D/g;return r.sort(function(p,h){return parseInt(p.replace(a,""),10)-parseInt(h.replace(a,""),10)}),r};n.exports=o},19133:n=>{var o=function(r,a){if(!(a>=r.length)){for(var p=r.length-1,h=r[a],u=a;u<p;u++)r[u]=r[u+1];return r.length=p,h}};n.exports=o},19186:(n,o,r)=>{var a=r(82264);function p(l,d){return String(l).localeCompare(d)}function h(l,d){var v=l.length;if(v<=1)return l;for(var c=new Array(v),m=1;m<v;m*=2){u(l,d,m,c);var g=l;l=c,c=g}return l}function u(l,d,v,c){var m=l.length,g=0,y=v*2,x,C,S,E,T;for(x=0;x<m;x+=y)for(C=x+v,S=C+v,C>m&&(C=m),S>m&&(S=m),E=x,T=C;;)if(E<C&&T<S)d(l[E],l[T])<=0?c[g++]=l[E++]:c[g++]=l[T++];else if(E<C)c[g++]=l[E++];else if(T<S)c[g++]=l[T++];else break}var f=function(l,d){if(d===void 0&&(d=p),!l||l.length<2)return l;if(a.features.stableSort)return l.sort(d);var v=h(l,d);return v!==l&&u(v,null,l.length,l),l};n.exports=f},25630:n=>{var o=function(r,a,p){if(a===p)return r;var h=r.indexOf(a),u=r.indexOf(p);if(h<0||u<0)throw new Error("Supplied items must be elements of the same array");return r[h]=p,r[u]=a,r};n.exports=o},37105:(n,o,r)=>{n.exports={Matrix:r(54915),Add:r(71146),AddAt:r(51067),BringToTop:r(66905),CountAllMatching:r(21612),Each:r(95428),EachInRange:r(36914),FindClosestInSorted:r(81957),Flatten:r(43491),GetAll:r(46710),GetFirst:r(58731),GetRandom:r(26546),MoveDown:r(70864),MoveTo:r(69693),MoveUp:r(40853),MoveAbove:r(85835),MoveBelow:r(83371),NumberArray:r(20283),NumberArrayStep:r(593),QuickSelect:r(43886),Range:r(88492),Remove:r(72905),RemoveAt:r(60248),RemoveBetween:r(81409),RemoveRandomElement:r(31856),Replace:r(42169),RotateLeft:r(86003),RotateRight:r(49498),SafeRange:r(82011),SendToBack:r(89545),SetAll:r(17810),Shuffle:r(33680),SortByDigits:r(90126),SpliceOne:r(19133),StableSort:r(19186),Swap:r(25630)}},86922:n=>{var o=function(r){if(!Array.isArray(r)||!Array.isArray(r[0]))return!1;for(var a=r[0].length,p=1;p<r.length;p++)if(r[p].length!==a)return!1;return!0};n.exports=o},63362:(n,o,r)=>{var a=r(41836),p=r(86922),h=function(u){var f="";if(!p(u))return f;for(var l=0;l<u.length;l++){for(var d=0;d<u[l].length;d++){var v=u[l][d].toString();v!=="undefined"?f+=a(v,2):f+="?",d<u[l].length-1&&(f+=" |")}if(l<u.length-1){f+=`
`;for(var c=0;c<u[l].length;c++)f+="---",c<u[l].length-1&&(f+="+");f+=`
`}}return f};n.exports=h},92598:n=>{var o=function(r){return r.reverse()};n.exports=o},21224:n=>{var o=function(r){for(var a=0;a<r.length;a++)r[a].reverse();return r};n.exports=o},98717:(n,o,r)=>{var a=r(37829),p=function(h){return a(h,180)};n.exports=p},44657:(n,o,r)=>{var a=r(37829),p=function(h,u){u===void 0&&(u=1);for(var f=0;f<u;f++)h=a(h,90);return h};n.exports=p},37829:(n,o,r)=>{var a=r(86922),p=r(2429),h=function(u,f){if(f===void 0&&(f=90),!a(u))return null;if(typeof f!="string"&&(f=(f%360+360)%360),f===90||f===-270||f==="rotateLeft")u=p(u),u.reverse();else if(f===-90||f===270||f==="rotateRight")u.reverse(),u=p(u);else if(Math.abs(f)===180||f==="rotate180"){for(var l=0;l<u.length;l++)u[l].reverse();u.reverse()}return u};n.exports=h},92632:(n,o,r)=>{var a=r(37829),p=function(h,u){u===void 0&&(u=1);for(var f=0;f<u;f++)h=a(h,-90);return h};n.exports=p},69512:(n,o,r)=>{var a=r(86003),p=r(49498),h=function(u,f,l){if(f===void 0&&(f=0),l===void 0&&(l=0),l!==0&&(l<0?a(u,Math.abs(l)):p(u,l)),f!==0)for(var d=0;d<u.length;d++){var v=u[d];f<0?a(v,Math.abs(f)):p(v,f)}return u};n.exports=h},2429:n=>{var o=function(r){for(var a=r.length,p=r[0].length,h=new Array(p),u=0;u<p;u++){h[u]=new Array(a);for(var f=a-1;f>-1;f--)h[u][f]=r[f][u]}return h};n.exports=o},54915:(n,o,r)=>{n.exports={CheckMatrix:r(86922),MatrixToString:r(63362),ReverseColumns:r(92598),ReverseRows:r(21224),Rotate180:r(98717),RotateLeft:r(44657),RotateMatrix:r(37829),RotateRight:r(92632),Translate:r(69512),TransposeMatrix:r(2429)}},71334:n=>{var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(a,p){for(var h=new Uint8Array(a),u=h.length,f=p?"data:"+p+";base64,":"",l=0;l<u;l+=3)f+=o[h[l]>>2],f+=o[(h[l]&3)<<4|h[l+1]>>4],f+=o[(h[l+1]&15)<<2|h[l+2]>>6],f+=o[h[l+2]&63];return u%3===2?f=f.substring(0,f.length-1)+"=":u%3===1&&(f=f.substring(0,f.length-2)+"=="),f};n.exports=r},53134:n=>{for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),a=0;a<o.length;a++)r[o.charCodeAt(a)]=a;var p=function(h){h=h.substr(h.indexOf(",")+1);var u=h.length,f=u*.75,l=0,d,v,c,m;h[u-1]==="="&&(f--,h[u-2]==="="&&f--);for(var g=new ArrayBuffer(f),y=new Uint8Array(g),x=0;x<u;x+=4)d=r[h.charCodeAt(x)],v=r[h.charCodeAt(x+1)],c=r[h.charCodeAt(x+2)],m=r[h.charCodeAt(x+3)],y[l++]=d<<2|v>>4,y[l++]=(v&15)<<4|c>>2,y[l++]=(c&3)<<6|m&63;return g};n.exports=p},65839:(n,o,r)=>{n.exports={ArrayBufferToBase64:r(71334),Base64ToArrayBuffer:r(53134)}},91799:(n,o,r)=>{n.exports={Array:r(37105),Base64:r(65839),Objects:r(1183),String:r(31749),NOOP:r(29747),NULL:r(20242)}},41786:n=>{var o=function(r){var a={};for(var p in r)Array.isArray(r[p])?a[p]=r[p].slice(0):a[p]=r[p];return a};n.exports=o},62644:n=>{var o=function(r){var a,p,h;if(typeof r!="object"||r===null)return r;a=Array.isArray(r)?[]:{};for(h in r)p=r[h],a[h]=o(p);return a};n.exports=o},79291:(n,o,r)=>{var a=r(41212),p=function(){var h,u,f,l,d,v,c=arguments[0]||{},m=1,g=arguments.length,y=!1;for(typeof c=="boolean"&&(y=c,c=arguments[1]||{},m=2),g===m&&(c=this,--m);m<g;m++)if((h=arguments[m])!=null)for(u in h)f=c[u],l=h[u],c!==l&&(y&&l&&(a(l)||(d=Array.isArray(l)))?(d?(d=!1,v=f&&Array.isArray(f)?f:[]):v=f&&a(f)?f:{},c[u]=p(y,v,l)):l!==void 0&&(c[u]=l));return c};n.exports=p},23568:(n,o,r)=>{var a=r(75508),p=r(35154),h=function(u,f,l){var d=p(u,f,null);if(d===null)return l;if(Array.isArray(d))return a.RND.pick(d);if(typeof d=="object"){if(d.hasOwnProperty("randInt"))return a.RND.integerInRange(d.randInt[0],d.randInt[1]);if(d.hasOwnProperty("randFloat"))return a.RND.realInRange(d.randFloat[0],d.randFloat[1])}else if(typeof d=="function")return d(f);return d};n.exports=h},95540:n=>{var o=function(r,a,p){var h=typeof r;return!r||h==="number"||h==="string"?p:r.hasOwnProperty(a)&&r[a]!==void 0?r[a]:p};n.exports=o},82840:(n,o,r)=>{var a=r(35154),p=r(45319),h=function(u,f,l,d,v){v===void 0&&(v=l);var c=a(u,f,v);return p(c,l,d)};n.exports=h},35154:n=>{var o=function(r,a,p,h){if(!r&&!h||typeof r=="number")return p;if(r&&r.hasOwnProperty(a))return r[a];if(h&&h.hasOwnProperty(a))return h[a];if(a.indexOf(".")!==-1){for(var u=a.split("."),f=r,l=h,d=p,v=p,c=!0,m=!0,g=0;g<u.length;g++)f&&f.hasOwnProperty(u[g])?(d=f[u[g]],f=f[u[g]]):c=!1,l&&l.hasOwnProperty(u[g])?(v=l[u[g]],l=l[u[g]]):m=!1;return c?d:m?v:p}else return p};n.exports=o},69036:n=>{var o=function(r,a){for(var p=0;p<a.length;p++)if(!r.hasOwnProperty(a[p]))return!1;return!0};n.exports=o},1985:n=>{var o=function(r,a){for(var p=0;p<a.length;p++)if(r.hasOwnProperty(a[p]))return!0;return!1};n.exports=o},97022:n=>{var o=function(r,a){return r.hasOwnProperty(a)};n.exports=o},41212:n=>{var o=function(r){if(!r||typeof r!="object"||r.nodeType||r===r.window)return!1;try{if(r.constructor&&!{}.hasOwnProperty.call(r.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};n.exports=o},46975:(n,o,r)=>{var a=r(41786),p=function(h,u){var f=a(h);for(var l in u)f.hasOwnProperty(l)||(f[l]=u[l]);return f};n.exports=p},269:(n,o,r)=>{var a=r(41786),p=function(h,u){var f=a(h);for(var l in u)f.hasOwnProperty(l)&&(f[l]=u[l]);return f};n.exports=p},18254:(n,o,r)=>{var a=r(97022),p=function(h,u){for(var f={},l=0;l<u.length;l++){var d=u[l];a(h,d)&&(f[d]=h[d])}return f};n.exports=p},61622:n=>{var o=function(r,a,p){if(!r||typeof r=="number")return!1;if(r.hasOwnProperty(a))return r[a]=p,!0;if(a.indexOf(".")!==-1){for(var h=a.split("."),u=r,f=r,l=0;l<h.length;l++)if(u.hasOwnProperty(h[l]))f=u,u=u[h[l]];else return!1;return f[h[h.length-1]]=p,!0}return!1};n.exports=o},1183:(n,o,r)=>{n.exports={Clone:r(41786),DeepCopy:r(62644),Extend:r(79291),GetAdvancedValue:r(23568),GetFastValue:r(95540),GetMinMaxValue:r(82840),GetValue:r(35154),HasAll:r(69036),HasAny:r(1985),HasValue:r(97022),IsPlainObject:r(41212),Merge:r(46975),MergeRight:r(269),Pick:r(18254),SetValue:r(61622)}},27902:n=>{var o=function(r,a){return r.replace(/%([0-9]+)/g,function(p,h){return a[Number(h)-1]})};n.exports=o},41836:n=>{var o=function(r,a,p,h){a===void 0&&(a=0),p===void 0&&(p=" "),h===void 0&&(h=3),r=r.toString();var u=0;if(a+1>=r.length)switch(h){case 1:r=new Array(a+1-r.length).join(p)+r;break;case 3:var f=Math.ceil((u=a-r.length)/2),l=u-f;r=new Array(l+1).join(p)+r+new Array(f+1).join(p);break;default:r=r+new Array(a+1-r.length).join(p);break}return r};n.exports=o},33628:n=>{var o=function(r,a){return a===0?r.slice(1):r.slice(0,a)+r.slice(a+1)};n.exports=o},27671:n=>{var o=function(r){return r.split("").reverse().join("")};n.exports=o},45650:n=>{var o=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var a=Math.random()*16|0,p=r==="x"?a:a&3|8;return p.toString(16)})};n.exports=o},35355:n=>{var o=function(r){return r&&r[0].toUpperCase()+r.slice(1)};n.exports=o},31749:(n,o,r)=>{n.exports={Format:r(27902),Pad:r(41836),RemoveAt:r(33628),Reverse:r(27671),UppercaseFirst:r(35355),UUID:r(45650)}}},t={};function i(n){var o=t[n];if(o!==void 0)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var s=i(85454);return s})())});var JG=sI((OZt,XP)=>{"use strict";var Fut=Object.prototype.hasOwnProperty,Oi="~";function ef(){}Object.create&&(ef.prototype=Object.create(null),new ef().__proto__||(Oi=!1));function But(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function KG(e,t,i,s,n){if(typeof i!="function")throw new TypeError("The listener must be a function");var o=new But(i,s||e,n),r=Oi?Oi+t:t;return e._events[r]?e._events[r].fn?e._events[r]=[e._events[r],o]:e._events[r].push(o):(e._events[r]=o,e._eventsCount++),e}function Rg(e,t){--e._eventsCount===0?e._events=new ef:delete e._events[t]}function gi(){this._events=new ef,this._eventsCount=0}gi.prototype.eventNames=function(){var t=[],i,s;if(this._eventsCount===0)return t;for(s in i=this._events)Fut.call(i,s)&&t.push(Oi?s.slice(1):s);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t};gi.prototype.listeners=function(t){var i=Oi?Oi+t:t,s=this._events[i];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,o=s.length,r=new Array(o);n<o;n++)r[n]=s[n].fn;return r};gi.prototype.listenerCount=function(t){var i=Oi?Oi+t:t,s=this._events[i];return s?s.fn?1:s.length:0};gi.prototype.emit=function(t,i,s,n,o,r){var a=Oi?Oi+t:t;if(!this._events[a])return!1;var p=this._events[a],h=arguments.length,u,f;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),h){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,i),!0;case 3:return p.fn.call(p.context,i,s),!0;case 4:return p.fn.call(p.context,i,s,n),!0;case 5:return p.fn.call(p.context,i,s,n,o),!0;case 6:return p.fn.call(p.context,i,s,n,o,r),!0}for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];p.fn.apply(p.context,u)}else{var l=p.length,d;for(f=0;f<l;f++)switch(p[f].once&&this.removeListener(t,p[f].fn,void 0,!0),h){case 1:p[f].fn.call(p[f].context);break;case 2:p[f].fn.call(p[f].context,i);break;case 3:p[f].fn.call(p[f].context,i,s);break;case 4:p[f].fn.call(p[f].context,i,s,n);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];p[f].fn.apply(p[f].context,u)}}return!0};gi.prototype.on=function(t,i,s){return KG(this,t,i,s,!1)};gi.prototype.once=function(t,i,s){return KG(this,t,i,s,!0)};gi.prototype.removeListener=function(t,i,s,n){var o=Oi?Oi+t:t;if(!this._events[o])return this;if(!i)return Rg(this,o),this;var r=this._events[o];if(r.fn)r.fn===i&&(!n||r.once)&&(!s||r.context===s)&&Rg(this,o);else{for(var a=0,p=[],h=r.length;a<h;a++)(r[a].fn!==i||n&&!r[a].once||s&&r[a].context!==s)&&p.push(r[a]);p.length?this._events[o]=p.length===1?p[0]:p:Rg(this,o)}return this};gi.prototype.removeAllListeners=function(t){var i;return t?(i=Oi?Oi+t:t,this._events[i]&&Rg(this,i)):(this._events=new ef,this._eventsCount=0),this};gi.prototype.off=gi.prototype.removeListener;gi.prototype.addListener=gi.prototype.on;gi.prefixed=Oi;gi.EventEmitter=gi;typeof XP<"u"&&(XP.exports=gi)});function aI(e,t){return Object.is(e,t)}var $e=null,Cc=!1,JC=1,rl=Symbol("SIGNAL");function ie(e){let t=$e;return $e=e,t}function QC(){return $e}var Sc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qC(e){if(Cc)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(e);let t=$e.nextProducerIndex++;if(Ec($e),t<$e.producerNode.length&&$e.producerNode[t]!==e&&Ju($e)){let i=$e.producerNode[t];Tc(i,$e.producerIndexOfThis[t])}$e.producerNode[t]!==e&&($e.producerNode[t]=e,$e.producerIndexOfThis[t]=Ju($e)?dI(e,$e,t):0),$e.producerLastReadVersion[t]=e.version}function oI(){JC++}function lI(e){if(!(Ju(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===JC)){if(!e.producerMustRecompute(e)&&!eS(e)){KC(e);return}e.producerRecomputeValue(e),KC(e)}}function _C(e){if(e.liveConsumerNode===void 0)return;let t=Cc;Cc=!0;try{for(let i of e.liveConsumerNode)i.dirty||vQ(i)}finally{Cc=t}}function hI(){return $e?.consumerAllowSignalWrites!==!1}function vQ(e){e.dirty=!0,_C(e),e.consumerMarkedDirty?.(e)}function KC(e){e.dirty=!1,e.lastCleanEpoch=JC}function tS(e){return e&&(e.nextProducerIndex=0),ie(e)}function uI(e,t){if(ie(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Ju(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)Tc(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function eS(e){Ec(e);for(let t=0;t<e.producerNode.length;t++){let i=e.producerNode[t],s=e.producerLastReadVersion[t];if(s!==i.version||(lI(i),s!==i.version))return!0}return!1}function iS(e){if(Ec(e),Ju(e))for(let t=0;t<e.producerNode.length;t++)Tc(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function dI(e,t,i){if(fI(e),e.liveConsumerNode.length===0&&cI(e))for(let s=0;s<e.producerNode.length;s++)e.producerIndexOfThis[s]=dI(e.producerNode[s],e,s);return e.liveConsumerIndexOfThis.push(i),e.liveConsumerNode.push(t)-1}function Tc(e,t){if(fI(e),e.liveConsumerNode.length===1&&cI(e))for(let s=0;s<e.producerNode.length;s++)Tc(e.producerNode[s],e.producerIndexOfThis[s]);let i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let s=e.liveConsumerIndexOfThis[t],n=e.liveConsumerNode[t];Ec(n),n.producerIndexOfThis[s]=t}}function Ju(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ec(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function fI(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function cI(e){return e.producerNode!==void 0}function mQ(){throw new Error}var pI=mQ;function gQ(e){pI(e)}function rS(e){pI=e}var xQ=null;function nS(e,t){hI()||gQ(e),e.equal(e.value,t)||(e.value=t,yQ(e))}var sS=At(_({},Sc),{equal:aI,value:void 0,kind:"signal"});function yQ(e){e.version++,oI(),_C(e),xQ?.()}var aS;function Qu(){return aS}function Zn(e){let t=aS;return aS=e,t}var Pc=Symbol("NotFound");function bt(e){return typeof e=="function"}function nl(e){let i=e(s=>{Error.call(s),s.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var Mc=nl(e=>function(i){e(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((s,n)=>`${n+1}) ${s.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function qu(e,t){if(e){let i=e.indexOf(t);0<=i&&e.splice(i,1)}}var Ve=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let o of i)o.remove(this);else i.remove(this);let{initialTeardown:s}=this;if(bt(s))try{s()}catch(o){t=o instanceof Mc?o.errors:[o]}let{_finalizers:n}=this;if(n){this._finalizers=null;for(let o of n)try{vI(o)}catch(r){t=t??[],r instanceof Mc?t=[...t,...r.errors]:t.push(r)}}if(t)throw new Mc(t)}}add(t){var i;if(t&&t!==this)if(this.closed)vI(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}}_hasParent(t){let{_parentage:i}=this;return i===t||Array.isArray(i)&&i.includes(t)}_addParent(t){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t}_removeParent(t){let{_parentage:i}=this;i===t?this._parentage=null:Array.isArray(i)&&qu(i,t)}remove(t){let{_finalizers:i}=this;i&&qu(i,t),t instanceof e&&t._removeParent(this)}};Ve.EMPTY=(()=>{let e=new Ve;return e.closed=!0,e})();var oS=Ve.EMPTY;function wc(e){return e instanceof Ve||e&&"closed"in e&&bt(e.remove)&&bt(e.add)&&bt(e.unsubscribe)}function vI(e){bt(e)?e():e.unsubscribe()}var Vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sl={setTimeout(e,t,...i){let{delegate:s}=sl;return s?.setTimeout?s.setTimeout(e,t,...i):setTimeout(e,t,...i)},clearTimeout(e){let{delegate:t}=sl;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function bc(e){sl.setTimeout(()=>{let{onUnhandledError:t}=Vr;if(t)t(e);else throw e})}function _u(){}var mI=lS("C",void 0,void 0);function gI(e){return lS("E",void 0,e)}function xI(e){return lS("N",e,void 0)}function lS(e,t,i){return{kind:e,value:t,error:i}}var Ya=null;function al(e){if(Vr.useDeprecatedSynchronousErrorHandling){let t=!Ya;if(t&&(Ya={errorThrown:!1,error:null}),e(),t){let{errorThrown:i,error:s}=Ya;if(Ya=null,i)throw s}}else e()}function yI(e){Vr.useDeprecatedSynchronousErrorHandling&&Ya&&(Ya.errorThrown=!0,Ya.error=e)}var Xa=class extends Ve{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,wc(t)&&t.add(this)):this.destination=IQ}static create(t,i,s){return new ol(t,i,s)}next(t){this.isStopped?uS(xI(t),this):this._next(t)}error(t){this.isStopped?uS(gI(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?uS(mI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bQ=Function.prototype.bind;function hS(e,t){return bQ.call(e,t)}var dS=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:i}=this;if(i.next)try{i.next(t)}catch(s){Rc(s)}}error(t){let{partialObserver:i}=this;if(i.error)try{i.error(t)}catch(s){Rc(s)}else Rc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(i){Rc(i)}}},ol=class extends Xa{constructor(t,i,s){super();let n;if(bt(t)||!t)n={next:t??void 0,error:i??void 0,complete:s??void 0};else{let o;this&&Vr.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),n={next:t.next&&hS(t.next,o),error:t.error&&hS(t.error,o),complete:t.complete&&hS(t.complete,o)}):n=t}this.destination=new dS(n)}};function Rc(e){Vr.useDeprecatedSynchronousErrorHandling?yI(e):bc(e)}function RQ(e){throw e}function uS(e,t){let{onStoppedNotification:i}=Vr;i&&sl.setTimeout(()=>i(e,t))}var IQ={closed:!0,next:_u,error:RQ,complete:_u};var ll=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xi(e){return e}function fS(...e){return cS(e)}function cS(e){return e.length===0?Xi:e.length===1?e[0]:function(i){return e.reduce((s,n)=>n(s),i)}}var ae=(()=>{class e{constructor(i){i&&(this._subscribe=i)}lift(i){let s=new e;return s.source=this,s.operator=i,s}subscribe(i,s,n){let o=OQ(i)?i:new ol(i,s,n);return al(()=>{let{operator:r,source:a}=this;o.add(r?r.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(i){try{return this._subscribe(i)}catch(s){i.error(s)}}forEach(i,s){return s=CI(s),new s((n,o)=>{let r=new ol({next:a=>{try{i(a)}catch(p){o(p),r.unsubscribe()}},error:o,complete:n});this.subscribe(r)})}_subscribe(i){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(i)}[ll](){return this}pipe(...i){return cS(i)(this)}toPromise(i){return i=CI(i),new i((s,n)=>{let o;this.subscribe(r=>o=r,r=>n(r),()=>s(o))})}}return e.create=t=>new e(t),e})();function CI(e){var t;return(t=e??Vr.Promise)!==null&&t!==void 0?t:Promise}function AQ(e){return e&&bt(e.next)&&bt(e.error)&&bt(e.complete)}function OQ(e){return e&&e instanceof Xa||AQ(e)&&wc(e)}function pS(e){return bt(e?.lift)}function Ut(e){return t=>{if(pS(t))return t.lift(function(i){try{return e(i,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function zt(e,t,i,s,n){return new vS(e,t,i,s,n)}var vS=class extends Xa{constructor(t,i,s,n,o,r){super(t),this.onFinalize=o,this.shouldUnsubscribe=r,this._next=i?function(a){try{i(a)}catch(p){t.error(p)}}:super._next,this._error=n?function(a){try{n(a)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function hl(){return Ut((e,t)=>{let i=null;e._refCount++;let s=zt(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){i=null;return}let n=e._connection,o=i;i=null,n&&(!o||n===o)&&n.unsubscribe(),t.unsubscribe()});e.subscribe(s),s.closed||(i=e.connect())})}var ul=class extends ae{constructor(t,i){super(),this.source=t,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,pS(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ve;let i=this.getSubject();t.add(this.source.subscribe(zt(i,void 0,()=>{this._teardown(),i.complete()},s=>{this._teardown(),i.error(s)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ve.EMPTY)}return t}refCount(){return hl()(this)}};var SI=nl(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var si=(()=>{class e extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let s=new Ic(this,this);return s.operator=i,s}_throwIfClosed(){if(this.closed)throw new SI}next(i){al(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let s of this.currentObservers)s.next(i)}})}error(i){al(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:s}=this;for(;s.length;)s.shift().error(i)}})}complete(){al(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:s,isStopped:n,observers:o}=this;return s||n?oS:(this.currentObservers=null,o.push(i),new Ve(()=>{this.currentObservers=null,qu(o,i)}))}_checkFinalizedStatuses(i){let{hasError:s,thrownError:n,isStopped:o}=this;s?i.error(n):o&&i.complete()}asObservable(){let i=new ae;return i.source=this,i}}return e.create=(t,i)=>new Ic(t,i),e})(),Ic=class extends si{constructor(t,i){super(),this.destination=t,this.source=i}next(t){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.next)===null||s===void 0||s.call(i,t)}error(t){var i,s;(s=(i=this.destination)===null||i===void 0?void 0:i.error)===null||s===void 0||s.call(i,t)}complete(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)}_subscribe(t){var i,s;return(s=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&s!==void 0?s:oS}};var ai=class extends si{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let i=super._subscribe(t);return!i.closed&&t.next(this._value),i}getValue(){let{hasError:t,thrownError:i,_value:s}=this;if(t)throw i;return this._throwIfClosed(),s}next(t){super.next(this._value=t)}};var Bi=new ae(e=>e.complete());function TI(e){return e&&bt(e.schedule)}function EI(e){return e[e.length-1]}function PI(e){return bt(EI(e))?e.pop():void 0}function Rs(e){return TI(EI(e))?e.pop():void 0}function wI(e,t,i,s){function n(o){return o instanceof i?o:new i(function(r){r(o)})}return new(i||(i=Promise))(function(o,r){function a(u){try{h(s.next(u))}catch(f){r(f)}}function p(u){try{h(s.throw(u))}catch(f){r(f)}}function h(u){u.done?o(u.value):n(u.value).then(a,p)}h((s=s.apply(e,t||[])).next())})}function MI(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $a(e){return this instanceof $a?(this.v=e,this):new $a(e)}function bI(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),n[Symbol.asyncIterator]=function(){return this},n;function r(d){return function(v){return Promise.resolve(v).then(d,f)}}function a(d,v){s[d]&&(n[d]=function(c){return new Promise(function(m,g){o.push([d,c,m,g])>1||p(d,c)})},v&&(n[d]=v(n[d])))}function p(d,v){try{h(s[d](v))}catch(c){l(o[0][3],c)}}function h(d){d.value instanceof $a?Promise.resolve(d.value.v).then(u,f):l(o[0][2],d)}function u(d){p("next",d)}function f(d){p("throw",d)}function l(d,v){d(v),o.shift(),o.length&&p(o[0][0],o[0][1])}}function RI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof MI=="function"?MI(e):e[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(o){i[o]=e[o]&&function(r){return new Promise(function(a,p){r=e[o](r),n(a,p,r.done,r.value)})}}function n(o,r,a,p){Promise.resolve(p).then(function(h){o({value:h,done:a})},r)}}var Ac=e=>e&&typeof e.length=="number"&&typeof e!="function";function Oc(e){return bt(e?.then)}function Dc(e){return bt(e[ll])}function Lc(e){return Symbol.asyncIterator&&bt(e?.[Symbol.asyncIterator])}function Fc(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function DQ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bc=DQ();function Nc(e){return bt(e?.[Bc])}function Gc(e){return bI(this,arguments,function*(){let i=e.getReader();try{for(;;){let{value:s,done:n}=yield $a(i.read());if(n)return yield $a(void 0);yield yield $a(s)}}finally{i.releaseLock()}})}function kc(e){return bt(e?.getReader)}function Qe(e){if(e instanceof ae)return e;if(e!=null){if(Dc(e))return LQ(e);if(Ac(e))return FQ(e);if(Oc(e))return BQ(e);if(Lc(e))return II(e);if(Nc(e))return NQ(e);if(kc(e))return GQ(e)}throw Fc(e)}function LQ(e){return new ae(t=>{let i=e[ll]();if(bt(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FQ(e){return new ae(t=>{for(let i=0;i<e.length&&!t.closed;i++)t.next(e[i]);t.complete()})}function BQ(e){return new ae(t=>{e.then(i=>{t.closed||(t.next(i),t.complete())},i=>t.error(i)).then(null,bc)})}function NQ(e){return new ae(t=>{for(let i of e)if(t.next(i),t.closed)return;t.complete()})}function II(e){return new ae(t=>{kQ(e,t).catch(i=>t.error(i))})}function GQ(e){return II(Gc(e))}function kQ(e,t){var i,s,n,o;return wI(this,void 0,void 0,function*(){try{for(i=RI(e);s=yield i.next(),!s.done;){let r=s.value;if(t.next(r),t.closed)return}}catch(r){n={error:r}}finally{try{s&&!s.done&&(o=i.return)&&(yield o.call(i))}finally{if(n)throw n.error}}t.complete()})}function Ni(e,t,i,s=0,n=!1){let o=t.schedule(function(){i(),n?e.add(this.schedule(null,s)):this.unsubscribe()},s);if(e.add(o),!n)return o}function Vc(e,t=0){return Ut((i,s)=>{i.subscribe(zt(s,n=>Ni(s,e,()=>s.next(n),t),()=>Ni(s,e,()=>s.complete(),t),n=>Ni(s,e,()=>s.error(n),t)))})}function Uc(e,t=0){return Ut((i,s)=>{s.add(e.schedule(()=>i.subscribe(s),t))})}function AI(e,t){return Qe(e).pipe(Uc(t),Vc(t))}function OI(e,t){return Qe(e).pipe(Uc(t),Vc(t))}function DI(e,t){return new ae(i=>{let s=0;return t.schedule(function(){s===e.length?i.complete():(i.next(e[s++]),i.closed||this.schedule())})})}function LI(e,t){return new ae(i=>{let s;return Ni(i,t,()=>{s=e[Bc](),Ni(i,t,()=>{let n,o;try{({value:n,done:o}=s.next())}catch(r){i.error(r);return}o?i.complete():i.next(n)},0,!0)}),()=>bt(s?.return)&&s.return()})}function zc(e,t){if(!e)throw new Error("Iterable cannot be null");return new ae(i=>{Ni(i,t,()=>{let s=e[Symbol.asyncIterator]();Ni(i,t,()=>{s.next().then(n=>{n.done?i.complete():i.next(n.value)})},0,!0)})})}function FI(e,t){return zc(Gc(e),t)}function BI(e,t){if(e!=null){if(Dc(e))return AI(e,t);if(Ac(e))return DI(e,t);if(Oc(e))return OI(e,t);if(Lc(e))return zc(e,t);if(Nc(e))return LI(e,t);if(kc(e))return FI(e,t)}throw Fc(e)}function Ue(e,t){return t?BI(e,t):Qe(e)}function Rt(...e){let t=Rs(e);return Ue(e,t)}function dl(e,t){let i=bt(e)?e:()=>e,s=n=>n.error(i());return new ae(t?n=>t.schedule(s,0,n):s)}function mS(e){return!!e&&(e instanceof ae||bt(e.lift)&&bt(e.subscribe))}var Kn=nl(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Xt(e,t){return Ut((i,s)=>{let n=0;i.subscribe(zt(s,o=>{s.next(e.call(t,o,n++))}))})}var{isArray:VQ}=Array;function UQ(e,t){return VQ(t)?e(...t):e(t)}function NI(e){return Xt(t=>UQ(e,t))}var{isArray:zQ}=Array,{getPrototypeOf:WQ,prototype:HQ,keys:YQ}=Object;function GI(e){if(e.length===1){let t=e[0];if(zQ(t))return{args:t,keys:null};if(XQ(t)){let i=YQ(t);return{args:i.map(s=>t[s]),keys:i}}}return{args:e,keys:null}}function XQ(e){return e&&typeof e=="object"&&WQ(e)===HQ}function kI(e,t){return e.reduce((i,s,n)=>(i[s]=t[n],i),{})}function Wc(...e){let t=Rs(e),i=PI(e),{args:s,keys:n}=GI(e);if(s.length===0)return Ue([],t);let o=new ae($Q(s,t,n?r=>kI(n,r):Xi));return i?o.pipe(NI(i)):o}function $Q(e,t,i=Xi){return s=>{VI(t,()=>{let{length:n}=e,o=new Array(n),r=n,a=n;for(let p=0;p<n;p++)VI(t,()=>{let h=Ue(e[p],t),u=!1;h.subscribe(zt(s,f=>{o[p]=f,u||(u=!0,a--),a||s.next(i(o.slice()))},()=>{--r||s.complete()}))},s)},s)}}function VI(e,t,i){e?Ni(i,e,t):t()}function UI(e,t,i,s,n,o,r,a){let p=[],h=0,u=0,f=!1,l=()=>{f&&!p.length&&!h&&t.complete()},d=c=>h<s?v(c):p.push(c),v=c=>{o&&t.next(c),h++;let m=!1;Qe(i(c,u++)).subscribe(zt(t,g=>{n?.(g),o?d(g):t.next(g)},()=>{m=!0},void 0,()=>{if(m)try{for(h--;p.length&&h<s;){let g=p.shift();r?Ni(t,r,()=>v(g)):v(g)}l()}catch(g){t.error(g)}}))};return e.subscribe(zt(t,d,()=>{f=!0,l()})),()=>{a?.()}}function je(e,t,i=1/0){return bt(t)?je((s,n)=>Xt((o,r)=>t(s,o,n,r))(Qe(e(s,n))),i):(typeof t=="number"&&(i=t),Ut((s,n)=>UI(s,n,e,i)))}function zI(e=1/0){return je(Xi,e)}function WI(){return zI(1)}function fl(...e){return WI()(Ue(e,Rs(e)))}function Hc(e){return new ae(t=>{Qe(e()).subscribe(t)})}function Ur(e,t){return Ut((i,s)=>{let n=0;i.subscribe(zt(s,o=>e.call(t,o,n++)&&s.next(o)))})}function Is(e){return Ut((t,i)=>{let s=null,n=!1,o;s=t.subscribe(zt(i,void 0,void 0,r=>{o=Qe(e(r,Is(e)(t))),s?(s.unsubscribe(),s=null,o.subscribe(i)):n=!0})),n&&(s.unsubscribe(),s=null,o.subscribe(i))})}function HI(e,t,i,s,n){return(o,r)=>{let a=i,p=t,h=0;o.subscribe(zt(r,u=>{let f=h++;p=a?e(p,u,f):(a=!0,u),s&&r.next(p)},n&&(()=>{a&&r.next(p),r.complete()})))}}function cl(e,t){return bt(t)?je(e,t,1):je(e,1)}function As(e){return Ut((t,i)=>{let s=!1;t.subscribe(zt(i,n=>{s=!0,i.next(n)},()=>{s||i.next(e),i.complete()}))})}function Jn(e){return e<=0?()=>Bi:Ut((t,i)=>{let s=0;t.subscribe(zt(i,n=>{++s<=e&&(i.next(n),e<=s&&i.complete())}))})}function Yc(e=jQ){return Ut((t,i)=>{let s=!1;t.subscribe(zt(i,n=>{s=!0,i.next(n)},()=>s?i.complete():i.error(e())))})}function jQ(){return new Kn}function td(e){return Ut((t,i)=>{try{t.subscribe(i)}finally{i.add(e)}})}function Qn(e,t){let i=arguments.length>=2;return s=>s.pipe(e?Ur((n,o)=>e(n,o,s)):Xi,Jn(1),i?As(t):Yc(()=>new Kn))}function pl(e){return e<=0?()=>Bi:Ut((t,i)=>{let s=[];t.subscribe(zt(i,n=>{s.push(n),e<s.length&&s.shift()},()=>{for(let n of s)i.next(n);i.complete()},void 0,()=>{s=null}))})}function gS(e,t){let i=arguments.length>=2;return s=>s.pipe(e?Ur((n,o)=>e(n,o,s)):Xi,pl(1),i?As(t):Yc(()=>new Kn))}function xS(e,t){return Ut(HI(e,t,arguments.length>=2,!0))}function yS(...e){let t=Rs(e);return Ut((i,s)=>{(t?fl(e,i,t):fl(e,i)).subscribe(s)})}function zr(e,t){return Ut((i,s)=>{let n=null,o=0,r=!1,a=()=>r&&!n&&s.complete();i.subscribe(zt(s,p=>{n?.unsubscribe();let h=0,u=o++;Qe(e(p,u)).subscribe(n=zt(s,f=>s.next(t?t(p,f,u,h++):f),()=>{n=null,a()}))},()=>{r=!0,a()}))})}function CS(e){return Ut((t,i)=>{Qe(e).subscribe(zt(i,()=>i.complete(),_u)),!i.closed&&t.subscribe(i)})}function oi(e,t,i){let s=bt(e)||t||i?{next:e,error:t,complete:i}:e;return s?Ut((n,o)=>{var r;(r=s.subscribe)===null||r===void 0||r.call(s);let a=!0;n.subscribe(zt(o,p=>{var h;(h=s.next)===null||h===void 0||h.call(s,p),o.next(p)},()=>{var p;a=!1,(p=s.complete)===null||p===void 0||p.call(s),o.complete()},p=>{var h;a=!1,(h=s.error)===null||h===void 0||h.call(s,p),o.error(p)},()=>{var p,h;a&&((p=s.unsubscribe)===null||p===void 0||p.call(s)),(h=s.finalize)===null||h===void 0||h.call(s)}))}):Xi}var Ct=class extends Error{code;constructor(t,i){super(KQ(t,i)),this.code=t}};function ZQ(e){return`NG0${Math.abs(e)}`}function KQ(e,t){return`${ZQ(e)}${t?": "+t:""}`}var bA=Symbol("InputSignalNode#UNSET"),JQ=At(_({},sS),{transformFn:void 0,applyValueToInputSignal(e,t){nS(e,t)}});function RA(e,t){let i=Object.create(JQ);i.value=e,i.transformFn=t?.transform;function s(){if(qC(i),i.value===bA){let n=null;throw new Ct(-950,n)}return i.value}return s[rl]=i,s}function oT(e){return{toString:e}.toString()}function ue(e){for(let t in e)if(e[t]===ue)return t;throw Error("Could not find renamed property on target object.")}function $i(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map($i).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let i=e.toString();if(i==null)return""+i;let s=i.indexOf(`
`);return s>=0?i.slice(0,s):i}function YI(e,t){return e?t?`${e} ${t}`:e:t||""}var QQ=ue({__forward_ref__:ue});function IA(e){return e.__forward_ref__=IA,e.toString=function(){return $i(this())},e}function fr(e){return AA(e)?e():e}function AA(e){return typeof e=="function"&&e.hasOwnProperty(QQ)&&e.__forward_ref__===IA}function Mt(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function mp(e){return XI(e,DA)||XI(e,LA)}function OA(e){return mp(e)!==null}function XI(e,t){return e.hasOwnProperty(t)?e[t]:null}function qQ(e){let t=e&&(e[DA]||e[LA]);return t||null}function $I(e){return e&&(e.hasOwnProperty(jI)||e.hasOwnProperty(_Q))?e[jI]:null}var DA=ue({\u0275prov:ue}),jI=ue({\u0275inj:ue}),LA=ue({ngInjectableDef:ue}),_Q=ue({ngInjectorDef:ue}),Tt=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,i){this._desc=t,this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=Mt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function FA(e){return e&&!!e.\u0275providers}var tq=ue({\u0275cmp:ue}),eq=ue({\u0275dir:ue}),iq=ue({\u0275pipe:ue}),rq=ue({\u0275mod:ue}),Jc=ue({\u0275fac:ue}),nd=ue({__NG_ELEMENT_ID__:ue}),ZI=ue({__NG_ENV_ID__:ue});function nq(e){return typeof e=="string"?e:e==null?"":String(e)}function sq(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():nq(e)}function BA(e,t){throw new Ct(-200,e)}function lT(e,t){throw new Ct(-201,!1)}var Bt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Bt||{}),IS;function NA(){return IS}function dr(e){let t=IS;return IS=e,t}function GA(e,t,i){let s=mp(e);if(s&&s.providedIn=="root")return s.value===void 0?s.value=s.factory():s.value;if(i&Bt.Optional)return null;if(t!==void 0)return t;lT(e,"Injector")}var aq={},ja=aq,oq="__NG_DI_FLAG__",Qc=class{injector;constructor(t){this.injector=t}retrieve(t,i){let s=i;return this.injector.get(t,s.optional?Pc:ja,s)}},qc="ngTempTokenPath",lq="ngTokenPath",hq=/\n/gm,uq="\u0275",KI="__source";function dq(e,t=Bt.Default){if(Qu()===void 0)throw new Ct(-203,!1);if(Qu()===null)return GA(e,void 0,t);{let i=Qu(),s;return i instanceof Qc?s=i.injector:s=i,s.get(e,t&Bt.Optional?null:void 0,t)}}function Gt(e,t=Bt.Default){return(NA()||dq)(fr(e),t)}function lt(e,t=Bt.Default){return Gt(e,gp(t))}function gp(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function AS(e){let t=[];for(let i=0;i<e.length;i++){let s=fr(e[i]);if(Array.isArray(s)){if(s.length===0)throw new Ct(900,!1);let n,o=Bt.Default;for(let r=0;r<s.length;r++){let a=s[r],p=fq(a);typeof p=="number"?p===-1?n=a.token:o|=p:n=a}t.push(Gt(n,o))}else t.push(Gt(s))}return t}function fq(e){return e[oq]}function cq(e,t,i,s){let n=e[qc];throw t[KI]&&n.unshift(t[KI]),e.message=pq(`
`+e.message,n,i,s),e[lq]=n,e[qc]=null,e}function pq(e,t,i,s=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==uq?e.slice(2):e;let n=$i(t);if(Array.isArray(t))n=t.map($i).join(" -> ");else if(typeof t=="object"){let o=[];for(let r in t)if(t.hasOwnProperty(r)){let a=t[r];o.push(r+":"+(typeof a=="string"?JSON.stringify(a):$i(a)))}n=`{${o.join(", ")}}`}return`${i}${s?"("+s+")":""}[${n}]: ${e.replace(hq,`
  `)}`}function yl(e,t){let i=e.hasOwnProperty(Jc);return i?e[Jc]:null}function hT(e,t){e.forEach(i=>Array.isArray(i)?hT(i,t):t(i))}function kA(e,t,i){t>=e.length?e.push(i):e.splice(t,0,i)}function _c(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var Cl={},Sl=[],sd=new Tt(""),VA=new Tt("",-1),UA=new Tt(""),tp=class{get(t,i=ja){if(i===ja){let s=new Error(`NullInjectorError: No provider for ${$i(t)}!`);throw s.name="NullInjectorError",s}return i}};function zA(e,t){let i=e[rq]||null;if(!i&&t===!0)throw new Error(`Type ${$i(e)} does not have '\u0275mod' property.`);return i}function Tl(e){return e[tq]||null}function vq(e){return e[eq]||null}function mq(e){return e[iq]||null}function uT(e){return{\u0275providers:e}}function gq(...e){return{\u0275providers:WA(!0,e),\u0275fromNgModule:!0}}function WA(e,...t){let i=[],s=new Set,n,o=r=>{i.push(r)};return hT(t,r=>{let a=r;OS(a,o,[],s)&&(n||=[],n.push(a))}),n!==void 0&&HA(n,o),i}function HA(e,t){for(let i=0;i<e.length;i++){let{ngModule:s,providers:n}=e[i];dT(n,o=>{t(o,s)})}}function OS(e,t,i,s){if(e=fr(e),!e)return!1;let n=null,o=$I(e),r=!o&&Tl(e);if(!o&&!r){let p=e.ngModule;if(o=$I(p),o)n=p;else return!1}else{if(r&&!r.standalone)return!1;n=e}let a=s.has(n);if(r){if(a)return!1;if(s.add(n),r.dependencies){let p=typeof r.dependencies=="function"?r.dependencies():r.dependencies;for(let h of p)OS(h,t,i,s)}}else if(o){if(o.imports!=null&&!a){s.add(n);let h;try{hT(o.imports,u=>{OS(u,t,i,s)&&(h||=[],h.push(u))})}finally{}h!==void 0&&HA(h,t)}if(!a){let h=yl(n)||(()=>new n);t({provide:n,useFactory:h,deps:Sl},n),t({provide:UA,useValue:n,multi:!0},n),t({provide:sd,useValue:()=>Gt(n),multi:!0},n)}let p=o.providers;if(p!=null&&!a){let h=e;dT(p,u=>{t(u,h)})}}else return!1;return n!==e&&e.providers!==void 0}function dT(e,t){for(let i of e)FA(i)&&(i=i.\u0275providers),Array.isArray(i)?dT(i,t):t(i)}var xq=ue({provide:String,useValue:ue});function YA(e){return e!==null&&typeof e=="object"&&xq in e}function yq(e){return!!(e&&e.useExisting)}function Cq(e){return!!(e&&e.useFactory)}function DS(e){return typeof e=="function"}var xp=new Tt(""),Xc={},JI={},SS;function fT(){return SS===void 0&&(SS=new tp),SS}var vr=class{},ad=class extends vr{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,i,s,n){super(),this.parent=i,this.source=s,this.scopes=n,FS(t,r=>this.processProvider(r)),this.records.set(VA,vl(void 0,this)),n.has("environment")&&this.records.set(vr,vl(void 0,this));let o=this.records.get(xp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(UA,Sl,Bt.Self))}retrieve(t,i){let s=i;return this.get(t,s.optional?Pc:ja,s)}destroy(){id(this),this._destroyed=!0;let t=ie(null);try{for(let s of this._ngOnDestroyHooks)s.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(t)}}onDestroy(t){return id(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){id(this);let i=Zn(this),s=dr(void 0),n;try{return t()}finally{Zn(i),dr(s)}}get(t,i=ja,s=Bt.Default){if(id(this),t.hasOwnProperty(ZI))return t[ZI](this);s=gp(s);let n,o=Zn(this),r=dr(void 0);try{if(!(s&Bt.SkipSelf)){let p=this.records.get(t);if(p===void 0){let h=wq(t)&&mp(t);h&&this.injectableDefInScope(h)?p=vl(LS(t),Xc):p=null,this.records.set(t,p)}if(p!=null)return this.hydrate(t,p)}let a=s&Bt.Self?fT():this.parent;return i=s&Bt.Optional&&i===ja?null:i,a.get(t,i)}catch(a){if(a.name==="NullInjectorError"){if((a[qc]=a[qc]||[]).unshift($i(t)),o)throw a;return cq(a,t,"R3InjectorError",this.source)}else throw a}finally{dr(r),Zn(o)}}resolveInjectorInitializers(){let t=ie(null),i=Zn(this),s=dr(void 0),n;try{let o=this.get(sd,Sl,Bt.Self);for(let r of o)r()}finally{Zn(i),dr(s),ie(t)}}toString(){let t=[],i=this.records;for(let s of i.keys())t.push($i(s));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=fr(t);let i=DS(t)?t:fr(t&&t.provide),s=Tq(t);if(!DS(t)&&t.multi===!0){let n=this.records.get(i);n||(n=vl(void 0,Xc,!0),n.factory=()=>AS(n.multi),this.records.set(i,n)),i=t,n.multi.push(t)}this.records.set(i,s)}hydrate(t,i){let s=ie(null);try{return i.value===JI?BA($i(t)):i.value===Xc&&(i.value=JI,i.value=i.factory()),typeof i.value=="object"&&i.value&&Mq(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{ie(s)}}injectableDefInScope(t){if(!t.providedIn)return!1;let i=fr(t.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(t){let i=this._onDestroyHooks.indexOf(t);i!==-1&&this._onDestroyHooks.splice(i,1)}};function LS(e){let t=mp(e),i=t!==null?t.factory:yl(e);if(i!==null)return i;if(e instanceof Tt)throw new Ct(204,!1);if(e instanceof Function)return Sq(e);throw new Ct(204,!1)}function Sq(e){if(e.length>0)throw new Ct(204,!1);let i=qQ(e);return i!==null?()=>i.factory(e):()=>new e}function Tq(e){if(YA(e))return vl(void 0,e.useValue);{let t=Eq(e);return vl(t,Xc)}}function Eq(e,t,i){let s;if(DS(e)){let n=fr(e);return yl(n)||LS(n)}else if(YA(e))s=()=>fr(e.useValue);else if(Cq(e))s=()=>e.useFactory(...AS(e.deps||[]));else if(yq(e))s=()=>Gt(fr(e.useExisting));else{let n=fr(e&&(e.useClass||e.provide));if(Pq(e))s=()=>new n(...AS(e.deps));else return yl(n)||LS(n)}return s}function id(e){if(e.destroyed)throw new Ct(205,!1)}function vl(e,t,i=!1){return{factory:e,value:t,multi:i?[]:void 0}}function Pq(e){return!!e.deps}function Mq(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function wq(e){return typeof e=="function"||typeof e=="object"&&e instanceof Tt}function FS(e,t){for(let i of e)Array.isArray(i)?FS(i,t):i&&FA(i)?FS(i.\u0275providers,t):t(i)}function Xr(e,t){let i;e instanceof ad?(id(e),i=e):i=new Qc(e);let s,n=Zn(i),o=dr(void 0);try{return t()}finally{Zn(n),dr(o)}}function bq(){return NA()!==void 0||Qu()!=null}function Rq(e){return typeof e=="function"}var ts=0,$t=1,Nt=2,wi=3,Hr=4,$r=5,ep=6,QI=7,Yr=8,od=9,Ds=10,qn=11,ld=12,qI=13,pd=14,hn=15,hd=16,ml=17,yp=18,Cp=19,XA=20,Os=21,TS=22,ip=23,cr=24,ES=25,Ja=26,$A=1;var Qa=7,rp=8,np=9,pr=10;function Za(e){return Array.isArray(e)&&typeof e[$A]=="object"}function es(e){return Array.isArray(e)&&e[$A]===!0}function jA(e){return(e.flags&4)!==0}function Sp(e){return e.componentOffset>-1}function Iq(e){return(e.flags&1)===1}function io(e){return!!e.template}function sp(e){return(e[Nt]&512)!==0}function vd(e){return(e[Nt]&256)===256}var BS=class{previousValue;currentValue;firstChange;constructor(t,i,s){this.previousValue=t,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}};function ZA(e,t,i,s){t!==null?t.applyValueToInputSignal(t,s):e[i]=s}var KA=(()=>{let e=()=>JA;return e.ngInherit=!0,e})();function JA(e){return e.type.prototype.ngOnChanges&&(e.setInput=Oq),Aq}function Aq(){let e=qA(this),t=e?.current;if(t){let i=e.previous;if(i===Cl)e.previous=t;else for(let s in t)i[s]=t[s];e.current=null,this.ngOnChanges(t)}}function Oq(e,t,i,s,n){let o=this.declaredInputs[s],r=qA(e)||Dq(e,{previous:Cl,current:null}),a=r.current||(r.current={}),p=r.previous,h=p[o];a[o]=new BS(h&&h.currentValue,i,p===Cl),ZA(e,t,n,i)}var QA="__ngSimpleChanges__";function qA(e){return e[QA]||null}function Dq(e,t){return e[QA]=t}var _I=null;var Ce=function(e,t=null,i){_I?.(e,t,i)},Lq="svg",Fq="math";function Ls(e){for(;Array.isArray(e);)e=e[ts];return e}function ro(e,t){return Ls(t[e.index])}function Bq(e,t){return e.data[t]}function qa(e,t){let i=t[e];return Za(i)?i:i[ts]}function cT(e){return(e[Nt]&128)===128}function Nq(e){return es(e[wi])}function tA(e,t){return t==null?null:e[t]}function _A(e){e[ml]=0}function tO(e){e[Nt]&1024||(e[Nt]|=1024,cT(e)&&Ep(e))}function Tp(e){return!!(e[Nt]&9216||e[cr]?.dirty)}function NS(e){e[Ds].changeDetectionScheduler?.notify(8),e[Nt]&64&&(e[Nt]|=1024),Tp(e)&&Ep(e)}function Ep(e){e[Ds].changeDetectionScheduler?.notify(0);let t=_a(e);for(;t!==null&&!(t[Nt]&8192||(t[Nt]|=8192,!cT(t)));)t=_a(t)}function eO(e,t){if(vd(e))throw new Ct(911,!1);e[Os]===null&&(e[Os]=[]),e[Os].push(t)}function Gq(e,t){if(e[Os]===null)return;let i=e[Os].indexOf(t);i!==-1&&e[Os].splice(i,1)}function _a(e){let t=e[wi];return es(t)?t[wi]:t}var oe={lFrame:hO(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var GS=!1;function kq(){return oe.lFrame.elementDepthCount}function Vq(){oe.lFrame.elementDepthCount++}function Uq(){oe.lFrame.elementDepthCount--}function zq(){return oe.bindingsEnabled}function Wq(){return oe.skipHydrationRootTNode!==null}function Hq(e){return oe.skipHydrationRootTNode===e}function Yq(){oe.skipHydrationRootTNode=null}function _n(){return oe.lFrame.lView}function iO(){return oe.lFrame.tView}function no(){let e=rO();for(;e!==null&&e.type===64;)e=e.parent;return e}function rO(){return oe.lFrame.currentTNode}function Xq(){let e=oe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function pT(e,t){let i=oe.lFrame;i.currentTNode=e,i.isParent=t}function nO(){return oe.lFrame.isParent}function $q(){oe.lFrame.isParent=!1}function sO(){return GS}function eA(e){let t=GS;return GS=e,t}function jq(e){return oe.lFrame.bindingIndex=e}function Zq(){return oe.lFrame.inI18n}function Kq(e,t){let i=oe.lFrame;i.bindingIndex=i.bindingRootIndex=e,kS(t)}function Jq(){return oe.lFrame.currentDirectiveIndex}function kS(e){oe.lFrame.currentDirectiveIndex=e}function aO(e){oe.lFrame.currentQueryIndex=e}function Qq(e){let t=e[$t];return t.type===2?t.declTNode:t.type===1?e[$r]:null}function oO(e,t,i){if(i&Bt.SkipSelf){let n=t,o=e;for(;n=n.parent,n===null&&!(i&Bt.Host);)if(n=Qq(o),n===null||(o=o[pd],n.type&10))break;if(n===null)return!1;t=n,e=o}let s=oe.lFrame=lO();return s.currentTNode=t,s.lView=e,!0}function vT(e){let t=lO(),i=e[$t];oe.lFrame=t,t.currentTNode=i.firstChild,t.lView=e,t.tView=i,t.contextLView=e,t.bindingIndex=i.bindingStartIndex,t.inI18n=!1}function lO(){let e=oe.lFrame,t=e===null?null:e.child;return t===null?hO(e):t}function hO(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function uO(){let e=oe.lFrame;return oe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var dO=uO;function mT(){let e=uO();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qq(){return oe.lFrame.selectedIndex}function to(e){oe.lFrame.selectedIndex=e}function _q(){return oe.lFrame.currentNamespace}var fO=!0;function t_(){return fO}function e_(e){fO=e}function i_(e,t,i){let{ngOnChanges:s,ngOnInit:n,ngDoCheck:o}=t.type.prototype;if(s){let r=JA(t);(i.preOrderHooks??=[]).push(e,r),(i.preOrderCheckHooks??=[]).push(e,r)}n&&(i.preOrderHooks??=[]).push(0-e,n),o&&((i.preOrderHooks??=[]).push(e,o),(i.preOrderCheckHooks??=[]).push(e,o))}function r_(e,t){for(let i=t.directiveStart,s=t.directiveEnd;i<s;i++){let o=e.data[i].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:a,ngAfterViewInit:p,ngAfterViewChecked:h,ngOnDestroy:u}=o;r&&(e.contentHooks??=[]).push(-i,r),a&&((e.contentHooks??=[]).push(i,a),(e.contentCheckHooks??=[]).push(i,a)),p&&(e.viewHooks??=[]).push(-i,p),h&&((e.viewHooks??=[]).push(i,h),(e.viewCheckHooks??=[]).push(i,h)),u!=null&&(e.destroyHooks??=[]).push(i,u)}}function $c(e,t,i){cO(e,t,3,i)}function jc(e,t,i,s){(e[Nt]&3)===i&&cO(e,t,i,s)}function PS(e,t){let i=e[Nt];(i&3)===t&&(i&=16383,i+=1,e[Nt]=i)}function cO(e,t,i,s){let n=s!==void 0?e[ml]&65535:0,o=s??-1,r=t.length-1,a=0;for(let p=n;p<r;p++)if(typeof t[p+1]=="number"){if(a=t[p],s!=null&&a>=s)break}else t[p]<0&&(e[ml]+=65536),(a<o||o==-1)&&(n_(e,i,t,p),e[ml]=(e[ml]&4294901760)+p+2),p++}function iA(e,t){Ce(4,e,t);let i=ie(null);try{t.call(e)}finally{ie(i),Ce(5,e,t)}}function n_(e,t,i,s){let n=i[s]<0,o=i[s+1],r=n?-i[s]:i[s],a=e[r];n?e[Nt]>>14<e[ml]>>16&&(e[Nt]&3)===t&&(e[Nt]+=16384,iA(a,o)):iA(a,o)}var xl=-1,ud=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,i,s){this.factory=t,this.canSeeViewProviders=i,this.injectImpl=s}};function s_(e){return(e.flags&8)!==0}function a_(e){return(e.flags&16)!==0}function o_(e,t,i){let s=0;for(;s<i.length;){let n=i[s];if(typeof n=="number"){if(n!==0)break;s++;let o=i[s++],r=i[s++],a=i[s++];e.setAttribute(t,r,a,o)}else{let o=n,r=i[++s];h_(o)?e.setProperty(t,o,r):e.setAttribute(t,o,r),s++}}return s}function l_(e){return e===3||e===4||e===6}function h_(e){return e.charCodeAt(0)===64}function pO(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let i=-1;for(let s=0;s<t.length;s++){let n=t[s];typeof n=="number"?i=n:i===0||(i===-1||i===2?rA(e,i,n,null,t[++s]):rA(e,i,n,null,null))}}return e}function rA(e,t,i,s,n){let o=0,r=e.length;if(t===-1)r=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){r=-1;break}else if(a>t){r=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===i){n!==null&&(e[o+1]=n);return}o++,n!==null&&o++}r!==-1&&(e.splice(r,0,t),o=r+1),e.splice(o++,0,i),n!==null&&e.splice(o++,0,n)}function vO(e){return e!==xl}function ap(e){return e&32767}function u_(e){return e>>16}function op(e,t){let i=u_(e),s=t;for(;i>0;)s=s[pd],i--;return s}var VS=!0;function nA(e){let t=VS;return VS=e,t}var d_=256,mO=d_-1,gO=5,f_=0,ln={};function c_(e,t,i){let s;typeof i=="string"?s=i.charCodeAt(0)||0:i.hasOwnProperty(nd)&&(s=i[nd]),s==null&&(s=i[nd]=f_++);let n=s&mO,o=1<<n;t.data[e+(n>>gO)]|=o}function xO(e,t){let i=yO(e,t);if(i!==-1)return i;let s=t[$t];s.firstCreatePass&&(e.injectorIndex=t.length,MS(s.data,e),MS(t,null),MS(s.blueprint,null));let n=gT(e,t),o=e.injectorIndex;if(vO(n)){let r=ap(n),a=op(n,t),p=a[$t].data;for(let h=0;h<8;h++)t[o+h]=a[r+h]|p[r+h]}return t[o+8]=n,o}function MS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function yO(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function gT(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let i=0,s=null,n=t;for(;n!==null;){if(s=PO(n),s===null)return xl;if(i++,n=n[pd],s.injectorIndex!==-1)return s.injectorIndex|i<<16}return xl}function p_(e,t,i){c_(e,t,i)}function CO(e,t,i){if(i&Bt.Optional||e!==void 0)return e;lT(t,"NodeInjector")}function SO(e,t,i,s){if(i&Bt.Optional&&s===void 0&&(s=null),(i&(Bt.Self|Bt.Host))===0){let n=e[od],o=dr(void 0);try{return n?n.get(t,s,i&Bt.Optional):GA(t,s,i&Bt.Optional)}finally{dr(o)}}return CO(s,t,i)}function TO(e,t,i,s=Bt.Default,n){if(e!==null){if(t[Nt]&2048&&!(s&Bt.Self)){let r=y_(e,t,i,s,ln);if(r!==ln)return r}let o=EO(e,t,i,s,ln);if(o!==ln)return o}return SO(t,i,s,n)}function EO(e,t,i,s,n){let o=g_(i);if(typeof o=="function"){if(!oO(t,e,s))return s&Bt.Host?CO(n,i,s):SO(t,i,s,n);try{let r;if(r=o(s),r==null&&!(s&Bt.Optional))lT(i);else return r}finally{dO()}}else if(typeof o=="number"){let r=null,a=yO(e,t),p=xl,h=s&Bt.Host?t[hn][$r]:null;for((a===-1||s&Bt.SkipSelf)&&(p=a===-1?gT(e,t):t[a+8],p===xl||!aA(s,!1)?a=-1:(r=t[$t],a=ap(p),t=op(p,t)));a!==-1;){let u=t[$t];if(sA(o,a,u.data)){let f=v_(a,t,i,r,s,h);if(f!==ln)return f}p=t[a+8],p!==xl&&aA(s,t[$t].data[a+8]===h)&&sA(o,a,t)?(r=u,a=ap(p),t=op(p,t)):a=-1}}return n}function v_(e,t,i,s,n,o){let r=t[$t],a=r.data[e+8],p=s==null?Sp(a)&&VS:s!=r&&(a.type&3)!==0,h=n&Bt.Host&&o===a,u=m_(a,r,i,p,h);return u!==null?US(t,r,u,a):ln}function m_(e,t,i,s,n){let o=e.providerIndexes,r=t.data,a=o&1048575,p=e.directiveStart,h=e.directiveEnd,u=o>>20,f=s?a:a+u,l=n?a+u:h;for(let d=f;d<l;d++){let v=r[d];if(d<p&&i===v||d>=p&&v.type===i)return d}if(n){let d=r[p];if(d&&io(d)&&d.type===i)return p}return null}function US(e,t,i,s){let n=e[i],o=t.data;if(n instanceof ud){let r=n;r.resolving&&BA(sq(o[i]));let a=nA(r.canSeeViewProviders);r.resolving=!0;let p,h=r.injectImpl?dr(r.injectImpl):null,u=oO(e,s,Bt.Default);try{n=e[i]=r.factory(void 0,o,e,s),t.firstCreatePass&&i>=s.directiveStart&&i_(i,o[i],t)}finally{h!==null&&dr(h),nA(a),r.resolving=!1,dO()}}return n}function g_(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(nd)?e[nd]:void 0;return typeof t=="number"?t>=0?t&mO:x_:t}function sA(e,t,i){let s=1<<e;return!!(i[t+(e>>gO)]&s)}function aA(e,t){return!(e&Bt.Self)&&!(e&Bt.Host&&t)}var Ka=class{_tNode;_lView;constructor(t,i){this._tNode=t,this._lView=i}get(t,i,s){return TO(this._tNode,this._lView,t,gp(s),i)}};function x_(){return new Ka(no(),_n())}function xT(e){return oT(()=>{let t=e.prototype.constructor,i=t[Jc]||zS(t),s=Object.prototype,n=Object.getPrototypeOf(e.prototype).constructor;for(;n&&n!==s;){let o=n[Jc]||zS(n);if(o&&o!==i)return o;n=Object.getPrototypeOf(n)}return o=>new o})}function zS(e){return AA(e)?()=>{let t=zS(fr(e));return t&&t()}:yl(e)}function y_(e,t,i,s,n){let o=e,r=t;for(;o!==null&&r!==null&&r[Nt]&2048&&!sp(r);){let a=EO(o,r,i,s|Bt.Self,ln);if(a!==ln)return a;let p=o.parent;if(!p){let h=r[XA];if(h){let u=h.get(i,ln,s);if(u!==ln)return u}p=PO(r),r=r[pd]}o=p}return n}function PO(e){let t=e[$t],i=t.type;return i===2?t.declTNode:i===1?e[$r]:null}function oA(e,t=null,i=null,s){let n=MO(e,t,i,s);return n.resolveInjectorInitializers(),n}function MO(e,t=null,i=null,s,n=new Set){let o=[i||Sl,gq(e)];return s=s||(typeof e=="object"?void 0:$i(e)),new ad(o,t||fT(),s||null,n)}var Fs=class e{static THROW_IF_NOT_FOUND=ja;static NULL=new tp;static create(t,i){if(Array.isArray(t))return oA({name:""},i,t,"");{let s=t.name??"";return oA({name:s},t.parent,t.providers,s)}}static \u0275prov=Mt({token:e,providedIn:"any",factory:()=>Gt(VA)});static __NG_ELEMENT_ID__=-1};var C_=new Tt("");C_.__NG_ELEMENT_ID__=e=>{let t=no();if(t===null)throw new Ct(204,!1);if(t.type&2)return t.value;if(e&Bt.Optional)return null;throw new Ct(204,!1)};var wO=!1,Pp=(()=>{class e{static __NG_ELEMENT_ID__=S_;static __NG_ENV_ID__=i=>i}return e})(),WS=class extends Pp{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return eO(this._lView,t),()=>Gq(this._lView,t)}};function S_(){return new WS(_n())}var dd=class{},yT=new Tt("",{providedIn:"root",factory:()=>!1});var bO=new Tt(""),RO=new Tt(""),Pl=(()=>{class e{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ai(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}has(i){return this.pendingTasks.has(i)}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Mt({token:e,providedIn:"root",factory:()=>new e})}return e})();var HS=class extends si{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,bq()&&(this.destroyRef=lt(Pp,{optional:!0})??void 0,this.pendingTasks=lt(Pl,{optional:!0})??void 0)}emit(t){let i=ie(null);try{super.next(t)}finally{ie(i)}}subscribe(t,i,s){let n=t,o=i||(()=>null),r=s;if(t&&typeof t=="object"){let p=t;n=p.next?.bind(p),o=p.error?.bind(p),r=p.complete?.bind(p)}this.__isAsync&&(o=this.wrapInTimeout(o),n&&(n=this.wrapInTimeout(n)),r&&(r=this.wrapInTimeout(r)));let a=super.subscribe({next:n,error:o,complete:r});return t instanceof Ve&&t.add(a),a}wrapInTimeout(t){return i=>{let s=this.pendingTasks?.add();setTimeout(()=>{t(i),s!==void 0&&this.pendingTasks?.remove(s)})}}},Gi=HS;function lp(...e){}function IO(e){let t,i;function s(){e=lp;try{i!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(i),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),s()}),typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(()=>{e(),s()})),()=>s()}function lA(e){return queueMicrotask(()=>e()),()=>{e=lp}}var CT="isAngularZone",hp=CT+"_ID",T_=0,qe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Gi(!1);onMicrotaskEmpty=new Gi(!1);onStable=new Gi(!1);onError=new Gi(!1);constructor(t){let{enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:n=!1,scheduleInRootZone:o=wO}=t;if(typeof Zone>"u")throw new Ct(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&s,r.shouldCoalesceRunChangeDetection=n,r.callbackScheduled=!1,r.scheduleInRootZone=o,M_(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(CT)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Ct(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Ct(909,!1)}run(t,i,s){return this._inner.run(t,i,s)}runTask(t,i,s,n){let o=this._inner,r=o.scheduleEventTask("NgZoneEvent: "+n,t,E_,lp,lp);try{return o.runTask(r,i,s)}finally{o.cancelTask(r)}}runGuarded(t,i,s){return this._inner.runGuarded(t,i,s)}runOutsideAngular(t){return this._outer.run(t)}},E_={};function ST(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function P_(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){IO(()=>{e.callbackScheduled=!1,YS(e),e.isCheckStableRunning=!0,ST(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),YS(e)}function M_(e){let t=()=>{P_(e)},i=T_++;e._inner=e._inner.fork({name:"angular",properties:{[CT]:!0,[hp]:i,[hp+i]:!0},onInvokeTask:(s,n,o,r,a,p)=>{if(w_(p))return s.invokeTask(o,r,a,p);try{return hA(e),s.invokeTask(o,r,a,p)}finally{(e.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),uA(e)}},onInvoke:(s,n,o,r,a,p,h)=>{try{return hA(e),s.invoke(o,r,a,p,h)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!b_(p)&&t(),uA(e)}},onHasTask:(s,n,o,r)=>{s.hasTask(o,r),n===o&&(r.change=="microTask"?(e._hasPendingMicrotasks=r.microTask,YS(e),ST(e)):r.change=="macroTask"&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(s,n,o,r)=>(s.handleError(o,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}function YS(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function hA(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function uA(e){e._nesting--,ST(e)}var XS=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Gi;onMicrotaskEmpty=new Gi;onStable=new Gi;onError=new Gi;run(t,i,s){return t.apply(i,s)}runGuarded(t,i,s){return t.apply(i,s)}runOutsideAngular(t){return t()}runTask(t,i,s,n){return t.apply(i,s)}};function w_(e){return AO(e,"__ignore_ng_zone__")}function b_(e){return AO(e,"__scheduler_tick__")}function AO(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Bs=class{_console=console;handleError(t){this._console.error("ERROR",t)}},R_=new Tt("",{providedIn:"root",factory:()=>{let e=lt(qe),t=lt(Bs);return i=>e.runOutsideAngular(()=>t.handleError(i))}});function dA(e,t){return RA(e,t)}function I_(e){return RA(bA,e)}var OO=(dA.required=I_,dA);function A_(){return TT(no(),_n())}function TT(e,t){return new O_(ro(e,t))}var O_=(()=>{class e{nativeElement;constructor(i){this.nativeElement=i}static __NG_ELEMENT_ID__=A_}return e})();function DO(e){return(e.flags&128)===128}var LO=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(LO||{}),FO=new Map,D_=0;function L_(){return D_++}function F_(e){FO.set(e[Cp],e)}function $S(e){FO.delete(e[Cp])}var fA="__ngContext__";function Mp(e,t){Za(t)?(e[fA]=t[Cp],F_(t)):e[fA]=t}function BO(e){return GO(e[ld])}function NO(e){return GO(e[Hr])}function GO(e){for(;e!==null&&!es(e);)e=e[Hr];return e}var jS;function kO(e){jS=e}function B_(){if(jS!==void 0)return jS;if(typeof document<"u")return document;throw new Ct(210,!1)}var ET=new Tt("",{providedIn:"root",factory:()=>N_}),N_="ng",PT=new Tt(""),md=new Tt("",{providedIn:"platform",factory:()=>"unknown"});var MT=new Tt("",{providedIn:"root",factory:()=>B_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var G_="h",k_="b";var VO=!1,V_=new Tt("",{providedIn:"root",factory:()=>VO});var UO=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(UO||{}),wp=new Tt(""),cA=new Set;function wT(e){cA.has(e)||(cA.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var U_=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=Mt({token:e,providedIn:"root",factory:()=>new e})}return e})();var z_=()=>null;function zO(e,t,i=!1){return z_(e,t,i)}function WO(e,t){let i=e.contentQueries;if(i!==null){let s=ie(null);try{for(let n=0;n<i.length;n+=2){let o=i[n],r=i[n+1];if(r!==-1){let a=e.data[r];aO(o),a.contentQueries(2,t[r],r)}}}finally{ie(s)}}}function ZS(e,t,i){aO(0);let s=ie(null);try{t(e,i)}finally{ie(s)}}function HO(e,t,i){if(jA(t)){let s=ie(null);try{let n=t.directiveStart,o=t.directiveEnd;for(let r=n;r<o;r++){let a=e.data[r];if(a.contentQueries){let p=i[r];a.contentQueries(1,p,r)}}}finally{ie(s)}}}var un=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(un||{});function YO(e){return e instanceof Function?e():e}function W_(e,t,i){let s=e.length;for(;;){let n=e.indexOf(t,i);if(n===-1)return n;if(n===0||e.charCodeAt(n-1)<=32){let o=t.length;if(n+o===s||e.charCodeAt(n+o)<=32)return n}i=n+1}}var XO="ng-template";function H_(e,t,i,s){let n=0;if(s){for(;n<t.length&&typeof t[n]=="string";n+=2)if(t[n]==="class"&&W_(t[n+1].toLowerCase(),i,0)!==-1)return!0}else if(bT(e))return!1;if(n=t.indexOf(1,n),n>-1){let o;for(;++n<t.length&&typeof(o=t[n])=="string";)if(o.toLowerCase()===i)return!0}return!1}function bT(e){return e.type===4&&e.value!==XO}function Y_(e,t,i){let s=e.type===4&&!i?XO:e.value;return t===s}function X_(e,t,i){let s=4,n=e.attrs,o=n!==null?Z_(n):0,r=!1;for(let a=0;a<t.length;a++){let p=t[a];if(typeof p=="number"){if(!r&&!Wr(s)&&!Wr(p))return!1;if(r&&Wr(p))continue;r=!1,s=p|s&1;continue}if(!r)if(s&4){if(s=2|s&1,p!==""&&!Y_(e,p,i)||p===""&&t.length===1){if(Wr(s))return!1;r=!0}}else if(s&8){if(n===null||!H_(e,n,p,i)){if(Wr(s))return!1;r=!0}}else{let h=t[++a],u=$_(p,n,bT(e),i);if(u===-1){if(Wr(s))return!1;r=!0;continue}if(h!==""){let f;if(u>o?f="":f=n[u+1].toLowerCase(),s&2&&h!==f){if(Wr(s))return!1;r=!0}}}}return Wr(s)||r}function Wr(e){return(e&1)===0}function $_(e,t,i,s){if(t===null)return-1;let n=0;if(s||!i){let o=!1;for(;n<t.length;){let r=t[n];if(r===e)return n;if(r===3||r===6)o=!0;else if(r===1||r===2){let a=t[++n];for(;typeof a=="string";)a=t[++n];continue}else{if(r===4)break;if(r===0){n+=4;continue}}n+=o?1:2}return-1}else return K_(t,e)}function j_(e,t,i=!1){for(let s=0;s<t.length;s++)if(X_(e,t[s],i))return!0;return!1}function Z_(e){for(let t=0;t<e.length;t++){let i=e[t];if(l_(i))return t}return e.length}function K_(e,t){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){let s=e[i];if(typeof s=="number")return-1;if(s===t)return i;i++}return-1}function pA(e,t){return e?":not("+t.trim()+")":t}function J_(e){let t=e[0],i=1,s=2,n="",o=!1;for(;i<e.length;){let r=e[i];if(typeof r=="string")if(s&2){let a=e[++i];n+="["+r+(a.length>0?'="'+a+'"':"")+"]"}else s&8?n+="."+r:s&4&&(n+=" "+r);else n!==""&&!Wr(r)&&(t+=pA(o,n),n=""),s=r,o=o||!Wr(s);i++}return n!==""&&(t+=pA(o,n)),t}function Q_(e){return e.map(J_).join(",")}function q_(e){let t=[],i=[],s=1,n=2;for(;s<e.length;){let o=e[s];if(typeof o=="string")n===2?o!==""&&t.push(o,e[++s]):n===8&&i.push(o);else{if(!Wr(n))break;n=o}s++}return i.length&&t.push(1,...i),t}var $O={};function jO(e,t,i){return e.createElement(t,i)}function up(e,t,i,s,n){e.insertBefore(t,i,s,n)}function ZO(e,t,i){e.appendChild(t,i)}function vA(e,t,i,s,n){s!==null?up(e,t,i,s,n):ZO(e,t,i)}function __(e,t,i){e.removeChild(null,t,i)}function ttt(e,t,i){e.setAttribute(t,"style",i)}function ett(e,t,i){i===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",i)}function KO(e,t,i){let{mergedAttrs:s,classes:n,styles:o}=i;s!==null&&o_(e,t,s),n!==null&&ett(e,t,n),o!==null&&ttt(e,t,o)}function JO(e,t,i,s,n,o,r,a,p,h,u){let f=Ja+s,l=f+n,d=itt(f,l),v=typeof h=="function"?h():h;return d[$t]={type:e,blueprint:d,template:i,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:l,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof r=="function"?r():r,firstChild:null,schemas:p,consts:v,incompleteFirstPass:!1,ssrId:u}}function itt(e,t){let i=[];for(let s=0;s<t;s++)i.push(s<e?null:$O);return i}function rtt(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=JO(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function QO(e,t,i,s,n,o,r,a,p,h,u){let f=t.blueprint.slice();return f[ts]=n,f[Nt]=s|4|128|8|64|1024,(h!==null||e&&e[Nt]&2048)&&(f[Nt]|=2048),_A(f),f[wi]=f[pd]=e,f[Yr]=i,f[Ds]=r||e&&e[Ds],f[qn]=a||e&&e[qn],f[od]=p||e&&e[od]||null,f[$r]=o,f[Cp]=L_(),f[ep]=u,f[XA]=h,f[hn]=t.type==2?e[hn]:f,f}function ntt(e,t,i){let s=ro(t,e),n=rtt(i),o=e[Ds].rendererFactory,r=tD(e,QO(e,n,null,qO(i),s,t,null,o.createRenderer(s,i),null,null,null));return e[t.index]=r}function qO(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function _O(e,t,i,s){if(i===0)return-1;let n=t.length;for(let o=0;o<i;o++)t.push(s),e.blueprint.push(s),e.data.push(null);return n}function tD(e,t){return e[ld]?e[qI][Hr]=t:e[ld]=t,e[qI]=t,t}function stt(e,t,i,s){if(!s)if((t[Nt]&3)===3){let o=e.preOrderCheckHooks;o!==null&&$c(t,o,i)}else{let o=e.preOrderHooks;o!==null&&jc(t,o,0,i)}to(i)}var bp=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(bp||{});function KS(e,t,i,s){let n=ie(null);try{let[o,r,a]=e.inputs[i],p=null;(r&bp.SignalBased)!==0&&(p=t[o][rl]),p!==null&&p.transformFn!==void 0?s=p.transformFn(s):a!==null&&(s=a.call(t,s)),e.setInput!==null?e.setInput(t,p,s,i,o):ZA(t,p,o,s)}finally{ie(n)}}function eD(e,t,i,s,n){let o=qq(),r=s&2;try{to(-1),r&&t.length>Ja&&stt(e,t,Ja,!1),Ce(r?2:0,n),i(s,n)}finally{to(o),Ce(r?3:1,n)}}function iD(e,t,i){utt(e,t,i),(i.flags&64)===64&&dtt(e,t,i)}function att(e,t,i=ro){let s=t.localNames;if(s!==null){let n=t.index+1;for(let o=0;o<s.length;o+=2){let r=s[o+1],a=r===-1?i(t,e):e[r];e[n++]=a}}}function ott(e,t,i,s){let o=s.get(V_,VO)||i===un.ShadowDom,r=e.selectRootElement(t,o);return ltt(r),r}function ltt(e){htt(e)}var htt=()=>null;function utt(e,t,i){let s=i.directiveStart,n=i.directiveEnd;Sp(i)&&ntt(t,i,e.data[s+i.componentOffset]),e.firstCreatePass||xO(i,t);let o=i.initialInputs;for(let r=s;r<n;r++){let a=e.data[r],p=US(t,e,r,i);if(Mp(p,t),o!==null&&ptt(t,r-s,p,a,i,o),io(a)){let h=qa(i.index,t);h[Yr]=US(t,e,r,i)}}}function dtt(e,t,i){let s=i.directiveStart,n=i.directiveEnd,o=i.index,r=Jq();try{to(o);for(let a=s;a<n;a++){let p=e.data[a],h=t[a];kS(a),(p.hostBindings!==null||p.hostVars!==0||p.hostAttrs!==null)&&ftt(p,h)}}finally{to(-1),kS(r)}}function ftt(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function ctt(e,t){let i=e.directiveRegistry,s=null;if(i)for(let n=0;n<i.length;n++){let o=i[n];j_(t,o.selectors,!1)&&(s??=[],io(o)?s.unshift(o):s.push(o))}return s}function ptt(e,t,i,s,n,o){let r=o[t];if(r!==null)for(let a=0;a<r.length;a+=2){let p=r[a],h=r[a+1];KS(s,i,p,h)}}function vtt(e,t){let i=e[od],s=i?i.get(Bs,null):null;s&&s.handleError(t)}function rD(e,t,i,s,n){let o=e.inputs?.[s],r=e.hostDirectiveInputs?.[s],a=!1;if(r)for(let p=0;p<r.length;p+=2){let h=r[p],u=r[p+1],f=t.data[h];KS(f,i[h],u,n),a=!0}if(o)for(let p of o){let h=i[p],u=t.data[p];KS(u,h,s,n),a=!0}return a}function mtt(e,t){let i=qa(t,e),s=i[$t];gtt(s,i);let n=i[ts];n!==null&&i[ep]===null&&(i[ep]=zO(n,i[od])),Ce(18),nD(s,i,i[Yr]),Ce(19,i[Yr])}function gtt(e,t){for(let i=t.length;i<e.blueprint.length;i++)t.push(e.blueprint[i])}function nD(e,t,i){vT(t);try{let s=e.viewQuery;s!==null&&ZS(1,s,i);let n=e.template;n!==null&&eD(e,t,n,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),t[yp]?.finishViewCreation(e),e.staticContentQueries&&WO(e,t),e.staticViewQueries&&ZS(2,e.viewQuery,i);let o=e.components;o!==null&&xtt(t,o)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{t[Nt]&=-5,mT()}}function xtt(e,t){for(let i=0;i<t.length;i++)mtt(e,t[i])}function mA(e,t){return!t||t.firstChild===null||DO(e)}var ytt;function RT(e,t){return ytt(e,t)}var Ml=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ml||{});function sD(e){return(e.flags&32)===32}function gl(e,t,i,s,n){if(s!=null){let o,r=!1;es(s)?o=s:Za(s)&&(r=!0,s=s[ts]);let a=Ls(s);e===0&&i!==null?n==null?ZO(t,i,a):up(t,i,a,n||null,!0):e===1&&i!==null?up(t,i,a,n||null,!0):e===2?__(t,a,r):e===3&&t.destroyNode(a),o!=null&&Dtt(t,e,o,i,n)}}function Ctt(e,t){aD(e,t),t[ts]=null,t[$r]=null}function Stt(e,t,i,s,n,o){s[ts]=n,s[$r]=t,Rp(e,s,i,1,n,o)}function aD(e,t){t[Ds].changeDetectionScheduler?.notify(9),Rp(e,t,t[qn],2,null,null)}function Ttt(e){let t=e[ld];if(!t)return wS(e[$t],e);for(;t;){let i=null;if(Za(t))i=t[ld];else{let s=t[pr];s&&(i=s)}if(!i){for(;t&&!t[Hr]&&t!==e;)Za(t)&&wS(t[$t],t),t=t[wi];t===null&&(t=e),Za(t)&&wS(t[$t],t),i=t&&t[Hr]}t=i}}function IT(e,t){let i=e[np],s=i.indexOf(t);i.splice(s,1)}function oD(e,t){if(vd(t))return;let i=t[qn];i.destroyNode&&Rp(e,t,i,3,null,null),Ttt(t)}function wS(e,t){if(vd(t))return;let i=ie(null);try{t[Nt]&=-129,t[Nt]|=256,t[cr]&&iS(t[cr]),Ptt(e,t),Ett(e,t),t[$t].type===1&&t[qn].destroy();let s=t[hd];if(s!==null&&es(t[wi])){s!==t[wi]&&IT(s,t);let n=t[yp];n!==null&&n.detachView(e)}$S(t)}finally{ie(i)}}function Ett(e,t){let i=e.cleanup,s=t[QI];if(i!==null)for(let r=0;r<i.length-1;r+=2)if(typeof i[r]=="string"){let a=i[r+3];a>=0?s[a]():s[-a].unsubscribe(),r+=2}else{let a=s[i[r+1]];i[r].call(a)}s!==null&&(t[QI]=null);let n=t[Os];if(n!==null){t[Os]=null;for(let r=0;r<n.length;r++){let a=n[r];a()}}let o=t[ip];if(o!==null){t[ip]=null;for(let r of o)r.destroy()}}function Ptt(e,t){let i;if(e!=null&&(i=e.destroyHooks)!=null)for(let s=0;s<i.length;s+=2){let n=t[i[s]];if(!(n instanceof ud)){let o=i[s+1];if(Array.isArray(o))for(let r=0;r<o.length;r+=2){let a=n[o[r]],p=o[r+1];Ce(4,a,p);try{p.call(a)}finally{Ce(5,a,p)}}else{Ce(4,n,o);try{o.call(n)}finally{Ce(5,n,o)}}}}}function Mtt(e,t,i){return wtt(e,t.parent,i)}function wtt(e,t,i){let s=t;for(;s!==null&&s.type&168;)t=s,s=t.parent;if(s===null)return i[ts];if(Sp(s)){let{encapsulation:n}=e.data[s.directiveStart+s.componentOffset];if(n===un.None||n===un.Emulated)return null}return ro(s,i)}function btt(e,t,i){return Itt(e,t,i)}function Rtt(e,t,i){return e.type&40?ro(e,i):null}var Itt=Rtt,gA;function Att(e,t,i,s){let n=Mtt(e,s,t),o=t[qn],r=s.parent||t[$r],a=btt(r,s,t);if(n!=null)if(Array.isArray(i))for(let p=0;p<i.length;p++)vA(o,n,i[p],a,!1);else vA(o,n,i,a,!1);gA!==void 0&&gA(o,s,t,i,n)}function rd(e,t){if(t!==null){let i=t.type;if(i&3)return ro(t,e);if(i&4)return JS(-1,e[t.index]);if(i&8){let s=t.child;if(s!==null)return rd(e,s);{let n=e[t.index];return es(n)?JS(-1,n):Ls(n)}}else{if(i&128)return rd(e,t.next);if(i&32)return RT(t,e)()||Ls(e[t.index]);{let s=lD(e,t);if(s!==null){if(Array.isArray(s))return s[0];let n=_a(e[hn]);return rd(n,s)}else return rd(e,t.next)}}}return null}function lD(e,t){if(t!==null){let s=e[hn][$r],n=t.projection;return s.projection[n]}return null}function JS(e,t){let i=pr+e+1;if(i<t.length){let s=t[i],n=s[$t].firstChild;if(n!==null)return rd(s,n)}return t[Qa]}function AT(e,t,i,s,n,o,r){for(;i!=null;){if(i.type===128){i=i.next;continue}let a=s[i.index],p=i.type;if(r&&t===0&&(a&&Mp(Ls(a),s),i.flags|=2),!sD(i))if(p&8)AT(e,t,i.child,s,n,o,!1),gl(t,e,n,a,o);else if(p&32){let h=RT(i,s),u;for(;u=h();)gl(t,e,n,u,o);gl(t,e,n,a,o)}else p&16?Ott(e,t,s,i,n,o):gl(t,e,n,a,o);i=r?i.projectionNext:i.next}}function Rp(e,t,i,s,n,o){AT(i,s,e.firstChild,t,n,o,!1)}function Ott(e,t,i,s,n,o){let r=i[hn],p=r[$r].projection[s.projection];if(Array.isArray(p))for(let h=0;h<p.length;h++){let u=p[h];gl(t,e,n,u,o)}else{let h=p,u=r[wi];DO(s)&&(h.flags|=128),AT(e,t,h,u,n,o,!0)}}function Dtt(e,t,i,s,n){let o=i[Qa],r=Ls(i);o!==r&&gl(t,e,s,o,n);for(let a=pr;a<i.length;a++){let p=i[a];Rp(p[$t],p,e,t,s,o)}}function dp(e,t,i,s,n=!1){for(;i!==null;){if(i.type===128){i=n?i.projectionNext:i.next;continue}let o=t[i.index];o!==null&&s.push(Ls(o)),es(o)&&Ltt(o,s);let r=i.type;if(r&8)dp(e,t,i.child,s);else if(r&32){let a=RT(i,t),p;for(;p=a();)s.push(p)}else if(r&16){let a=lD(t,i);if(Array.isArray(a))s.push(...a);else{let p=_a(t[hn]);dp(p[$t],p,a,s,!0)}}i=n?i.projectionNext:i.next}return s}function Ltt(e,t){for(let i=pr;i<e.length;i++){let s=e[i],n=s[$t].firstChild;n!==null&&dp(s[$t],s,n,t)}e[Qa]!==e[ts]&&t.push(e[Qa])}function hD(e){if(e[ES]!==null){for(let t of e[ES])t.impl.addSequence(t);e[ES].length=0}}var uD=[];function Ftt(e){return e[cr]??Btt(e)}function Btt(e){let t=uD.pop()??Object.create(Gtt);return t.lView=e,t}function Ntt(e){e.lView[cr]!==e&&(e.lView=null,uD.push(e))}var Gtt=At(_({},Sc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Ep(e.lView)},consumerOnSignalRead(){this.lView[cr]=this}});function ktt(e){let t=e[cr]??Object.create(Vtt);return t.lView=e,t}var Vtt=At(_({},Sc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=_a(e.lView);for(;t&&!dD(t[$t]);)t=_a(t);t&&tO(t)},consumerOnSignalRead(){this.lView[cr]=this}});function dD(e){return e.type!==2}function fD(e){if(e[ip]===null)return;let t=!0;for(;t;){let i=!1;for(let s of e[ip])s.dirty&&(i=!0,s.zone===null||Zone.current===s.zone?s.run():s.zone.run(()=>s.run()));t=i&&!!(e[Nt]&8192)}}var Utt=100;function cD(e,t=!0,i=0){let n=e[Ds].rendererFactory,o=!1;o||n.begin?.();try{ztt(e,i)}catch(r){throw t&&vtt(e,r),r}finally{o||n.end?.()}}function ztt(e,t){let i=sO();try{eA(!0),QS(e,t);let s=0;for(;Tp(e);){if(s===Utt)throw new Ct(103,!1);s++,QS(e,1)}}finally{eA(i)}}function Wtt(e,t,i,s){if(vd(t))return;let n=t[Nt],o=!1,r=!1;vT(t);let a=!0,p=null,h=null;o||(dD(e)?(h=Ftt(t),p=tS(h)):QC()===null?(a=!1,h=ktt(t),p=tS(h)):t[cr]&&(iS(t[cr]),t[cr]=null));try{_A(t),jq(e.bindingStartIndex),i!==null&&eD(e,t,i,2,s);let u=(n&3)===3;if(!o)if(u){let d=e.preOrderCheckHooks;d!==null&&$c(t,d,null)}else{let d=e.preOrderHooks;d!==null&&jc(t,d,0,null),PS(t,0)}if(r||Htt(t),fD(t),pD(t,0),e.contentQueries!==null&&WO(e,t),!o)if(u){let d=e.contentCheckHooks;d!==null&&$c(t,d)}else{let d=e.contentHooks;d!==null&&jc(t,d,1),PS(t,1)}Xtt(e,t);let f=e.components;f!==null&&mD(t,f,0);let l=e.viewQuery;if(l!==null&&ZS(2,l,s),!o)if(u){let d=e.viewCheckHooks;d!==null&&$c(t,d)}else{let d=e.viewHooks;d!==null&&jc(t,d,2),PS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[TS]){for(let d of t[TS])d();t[TS]=null}o||(hD(t),t[Nt]&=-73)}catch(u){throw o||Ep(t),u}finally{h!==null&&(uI(h,p),a&&Ntt(h)),mT()}}function pD(e,t){for(let i=BO(e);i!==null;i=NO(i))for(let s=pr;s<i.length;s++){let n=i[s];vD(n,t)}}function Htt(e){for(let t=BO(e);t!==null;t=NO(t)){if(!(t[Nt]&2))continue;let i=t[np];for(let s=0;s<i.length;s++){let n=i[s];tO(n)}}}function Ytt(e,t,i){Ce(18);let s=qa(t,e);vD(s,i),Ce(19,s[Yr])}function vD(e,t){cT(e)&&QS(e,t)}function QS(e,t){let s=e[$t],n=e[Nt],o=e[cr],r=!!(t===0&&n&16);if(r||=!!(n&64&&t===0),r||=!!(n&1024),r||=!!(o?.dirty&&eS(o)),r||=!1,o&&(o.dirty=!1),e[Nt]&=-9217,r)Wtt(s,e,s.template,e[Yr]);else if(n&8192){fD(e),pD(e,1);let a=s.components;a!==null&&mD(e,a,1),hD(e)}}function mD(e,t,i){for(let s=0;s<t.length;s++)Ytt(e,t[s],i)}function Xtt(e,t){let i=e.hostBindingOpCodes;if(i!==null)try{for(let s=0;s<i.length;s++){let n=i[s];if(n<0)to(~n);else{let o=n,r=i[++s],a=i[++s];Kq(r,o);let p=t[o];Ce(24,p),a(2,p),Ce(25,p)}}}finally{to(-1)}}function gD(e,t){let i=sO()?64:1088;for(e[Ds].changeDetectionScheduler?.notify(t);e;){e[Nt]|=i;let s=_a(e);if(sp(e)&&!s)return e;e=s}return null}function $tt(e,t,i,s){return[e,!0,0,t,null,s,null,i,null,null]}function jtt(e,t,i,s=!0){let n=t[$t];if(Ztt(n,t,e,i),s){let r=JS(i,e),a=t[qn],p=a.parentNode(e[Qa]);p!==null&&Stt(n,e[$r],a,t,p,r)}let o=t[ep];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qS(e,t){if(e.length<=pr)return;let i=pr+t,s=e[i];if(s){let n=s[hd];n!==null&&n!==e&&IT(n,s),t>0&&(e[i-1][Hr]=s[Hr]);let o=_c(e,pr+t);Ctt(s[$t],s);let r=o[yp];r!==null&&r.detachView(o[$t]),s[wi]=null,s[Hr]=null,s[Nt]&=-129}return s}function Ztt(e,t,i,s){let n=pr+s,o=i.length;s>0&&(i[n-1][Hr]=t),s<o-pr?(t[Hr]=i[n],kA(i,pr+s,t)):(i.push(t),t[Hr]=null),t[wi]=i;let r=t[hd];r!==null&&i!==r&&xD(r,t);let a=t[yp];a!==null&&a.insertView(e),NS(t),t[Nt]|=128}function xD(e,t){let i=e[np],s=t[wi];if(Za(s))e[Nt]|=2;else{let n=s[wi][hn];t[hn]!==n&&(e[Nt]|=2)}i===null?e[np]=[t]:i.push(t)}var fp=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,i=t[$t];return dp(i,t,i.firstChild,[])}constructor(t,i,s=!0){this._lView=t,this._cdRefInjectingView=i,this.notifyErrorHandler=s}get context(){return this._lView[Yr]}set context(t){this._lView[Yr]=t}get destroyed(){return vd(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[wi];if(es(t)){let i=t[rp],s=i?i.indexOf(this):-1;s>-1&&(qS(t,s),_c(i,s))}this._attachedToViewContainer=!1}oD(this._lView[$t],this._lView)}onDestroy(t){eO(this._lView,t)}markForCheck(){gD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Nt]&=-129}reattach(){NS(this._lView),this._lView[Nt]|=128}detectChanges(){this._lView[Nt]|=1024,cD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=sp(this._lView),i=this._lView[hd];i!==null&&!t&&IT(i,this._lView),aD(this._lView[$t],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ct(902,!1);this._appRef=t;let i=sp(this._lView),s=this._lView[hd];s!==null&&!i&&xD(s,this._lView),NS(this._lView)}};function Ktt(e,t,i,s,n){let o=e.data[t];if(o===null)o=Jtt(e,t,i,s,n),Zq()&&(o.flags|=32);else if(o.type&64){o.type=i,o.value=s,o.attrs=n;let r=Xq();o.injectorIndex=r===null?-1:r.injectorIndex}return pT(o,!0),o}function Jtt(e,t,i,s,n){let o=rO(),r=nO(),a=r?o:o&&o.parent,p=e.data[t]=qtt(e,a,i,t,s,n);return Qtt(e,p,o,r),p}function Qtt(e,t,i,s){e.firstChild===null&&(e.firstChild=t),i!==null&&(s?i.child==null&&t.parent!==null&&(i.child=t):i.next===null&&(i.next=t,t.prev=i))}function qtt(e,t,i,s,n,o){let r=t?t.injectorIndex:-1,a=0;return Wq()&&(a|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:r,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:n,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var fFt=new RegExp(`^(\\d+)*(${k_}|${G_})*(.*)`);var _tt=()=>null;function xA(e,t){return _tt(e,t)}var tet=class{},yD=class{},_S=class{resolveComponentFactory(t){throw Error(`No component factory found for ${$i(t)}.`)}},Ip=class{static NULL=new _S},El=class{};var eet=(()=>{class e{static \u0275prov=Mt({token:e,providedIn:"root",factory:()=>null})}return e})();var bS={},tT=class{injector;parentInjector;constructor(t,i){this.injector=t,this.parentInjector=i}get(t,i,s){s=gp(s);let n=this.injector.get(t,bS,s);return n!==bS||i===bS?n:this.parentInjector.get(t,i,s)}};function yA(e,t,i){let s=i?e.styles:null,n=i?e.classes:null,o=0;if(t!==null)for(let r=0;r<t.length;r++){let a=t[r];if(typeof a=="number")o=a;else if(o==1)n=YI(n,a);else if(o==2){let p=a,h=t[++r];s=YI(s,p+": "+h+";")}}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=n:e.classesWithoutHost=n}function iet(e,t=Bt.Default){let i=_n();if(i===null)return Gt(e,t);let s=no();return TO(s,i,fr(e),t)}function ret(e,t,i,s,n){let o=s===null?null:{"":-1},r=n(e,i);if(r!==null){let a,p=null,h=null,u=set(r);u===null?a=r:[a,p,h]=u,het(e,t,i,a,o,p,h)}o!==null&&s!==null&&net(i,s,o)}function net(e,t,i){let s=e.localNames=[];for(let n=0;n<t.length;n+=2){let o=i[t[n+1]];if(o==null)throw new Ct(-301,!1);s.push(t[n],o)}}function set(e){let t=null,i=!1;for(let r=0;r<e.length;r++){let a=e[r];if(r===0&&io(a)&&(t=a),a.findHostDirectiveDefs!==null){i=!0;break}}if(!i)return null;let s=null,n=null,o=null;for(let r of e)r.findHostDirectiveDefs!==null&&(s??=[],n??=new Map,o??=new Map,aet(r,s,o,n)),r===t&&(s??=[],s.push(r));return s!==null?(s.push(...t===null?e:e.slice(1)),[s,n,o]):null}function aet(e,t,i,s){let n=t.length;e.findHostDirectiveDefs(e,t,s),i.set(e,[n,t.length-1])}function oet(e,t,i){t.componentOffset=i,(e.components??=[]).push(t.index)}function het(e,t,i,s,n,o,r){let a=s.length,p=!1;for(let l=0;l<a;l++){let d=s[l];!p&&io(d)&&(p=!0,oet(e,i,l)),p_(xO(i,t),e,d.type)}vet(i,e.data.length,a);for(let l=0;l<a;l++){let d=s[l];d.providersResolver&&d.providersResolver(d)}let h=!1,u=!1,f=_O(e,t,a,null);a>0&&(i.directiveToIndex=new Map);for(let l=0;l<a;l++){let d=s[l];if(i.mergedAttrs=pO(i.mergedAttrs,d.hostAttrs),det(e,i,t,f,d),pet(f,d,n),r!==null&&r.has(d)){let[c,m]=r.get(d);i.directiveToIndex.set(d.type,[f,c+i.directiveStart,m+i.directiveStart])}else(o===null||!o.has(d))&&i.directiveToIndex.set(d.type,f);d.contentQueries!==null&&(i.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(i.flags|=64);let v=d.type.prototype;!h&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),h=!0),!u&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),u=!0),f++}uet(e,i,o)}function uet(e,t,i){for(let s=t.directiveStart;s<t.directiveEnd;s++){let n=e.data[s];if(i===null||!i.has(n))CA(0,t,n,s),CA(1,t,n,s),TA(t,s,!1);else{let o=i.get(n);SA(0,t,o,s),SA(1,t,o,s),TA(t,s,!0)}}}function CA(e,t,i,s){let n=e===0?i.inputs:i.outputs;for(let o in n)if(n.hasOwnProperty(o)){let r;e===0?r=t.inputs??={}:r=t.outputs??={},r[o]??=[],r[o].push(s),CD(t,o)}}function SA(e,t,i,s){let n=e===0?i.inputs:i.outputs;for(let o in n)if(n.hasOwnProperty(o)){let r=n[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[r]??=[],a[r].push(s,o),CD(t,r)}}function CD(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function TA(e,t,i){let{attrs:s,inputs:n,hostDirectiveInputs:o}=e;if(s===null||!i&&n===null||i&&o===null||bT(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let r=null,a=0;for(;a<s.length;){let p=s[a];if(p===0){a+=4;continue}else if(p===5){a+=2;continue}else if(typeof p=="number")break;if(!i&&n.hasOwnProperty(p)){let h=n[p];for(let u of h)if(u===t){r??=[],r.push(p,s[a+1]);break}}else if(i&&o.hasOwnProperty(p)){let h=o[p];for(let u=0;u<h.length;u+=2)if(h[u]===t){r??=[],r.push(h[u+1],s[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(r)}function det(e,t,i,s,n){e.data[s]=n;let o=n.factory||(n.factory=yl(n.type,!0)),r=new ud(o,io(n),iet);e.blueprint[s]=r,i[s]=r,fet(e,t,s,_O(e,i,n.hostVars,$O),n)}function fet(e,t,i,s,n){let o=n.hostBindings;if(o){let r=e.hostBindingOpCodes;r===null&&(r=e.hostBindingOpCodes=[]);let a=~t.index;cet(r)!=a&&r.push(a),r.push(i,s,o)}}function cet(e){let t=e.length;for(;t>0;){let i=e[--t];if(typeof i=="number"&&i<0)return i}return 0}function pet(e,t,i){if(i){if(t.exportAs)for(let s=0;s<t.exportAs.length;s++)i[t.exportAs[s]]=e;io(t)&&(i[""]=e)}}function vet(e,t,i){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+i,e.providerIndexes=t}function SD(e,t,i,s,n,o,r,a){let p=t.consts,h=tA(p,r),u=Ktt(t,e,2,s,h);return o&&ret(t,i,u,tA(p,a),n),u.mergedAttrs=pO(u.mergedAttrs,u.attrs),u.attrs!==null&&yA(u,u.attrs,!1),u.mergedAttrs!==null&&yA(u,u.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,u),u}function TD(e,t){r_(e,t),jA(t)&&e.queries.elementEnd(t)}var cp=class extends Ip{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let i=Tl(t);return new fd(i,this.ngModule)}};function met(e){return Object.keys(e).map(t=>{let[i,s,n]=e[t],o={propName:i,templateName:t,isSignal:(s&bp.SignalBased)!==0};return n&&(o.transform=n),o})}function get(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function xet(e,t,i){let s=t instanceof vr?t:t?.injector;return s&&e.getStandaloneInjector!==null&&(s=e.getStandaloneInjector(s)||s),s?new tT(i,s):i}function yet(e){let t=e.get(El,null);if(t===null)throw new Ct(407,!1);let i=e.get(eet,null),s=e.get(dd,null);return{rendererFactory:t,sanitizer:i,changeDetectionScheduler:s}}function Cet(e,t){let i=(e.selectors[0][0]||"div").toLowerCase();return jO(t,i,i==="svg"?Lq:i==="math"?Fq:null)}var fd=class extends yD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=met(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=get(this.componentDef.outputs),this.cachedOutputs}constructor(t,i){super(),this.componentDef=t,this.ngModule=i,this.componentType=t.type,this.selector=Q_(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!i}create(t,i,s,n){Ce(22);let o=ie(null);try{let r=this.componentDef,a=s?["ng-version","19.2.7"]:q_(this.componentDef.selectors[0]),p=JO(0,null,null,1,0,null,null,null,null,[a],null),h=xet(r,n||this.ngModule,t),u=yet(h),f=u.rendererFactory.createRenderer(null,r),l=s?ott(f,s,r.encapsulation,h):Cet(r,f),d=QO(null,p,null,512|qO(r),null,null,u,f,h,null,zO(l,h,!0));d[Ja]=l,vT(d);let v=null;try{let c=SD(Ja,p,d,"#host",()=>[this.componentDef],!0,0);l&&(KO(f,l,c),Mp(l,d)),iD(p,d,c),HO(p,c,d),TD(p,c),i!==void 0&&Tet(c,this.ngContentSelectors,i),v=qa(c.index,d),d[Yr]=v[Yr],nD(p,d,null)}catch(c){throw v!==null&&$S(v),$S(d),c}finally{Ce(23),mT()}return new eT(this.componentType,d)}finally{ie(o)}}},eT=class extends tet{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,i){super(),this._rootLView=i,this._tNode=Bq(i[$t],Ja),this.location=TT(this._tNode,i),this.instance=qa(this._tNode.index,i)[Yr],this.hostView=this.changeDetectorRef=new fp(i,void 0,!1),this.componentType=t}setInput(t,i){let s=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),i))return;let n=this._rootLView,o=rD(s,n[$t],n,t,i);this.previousInputValues.set(t,i);let r=qa(s.index,n);gD(r,1)}get injector(){return new Ka(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Tet(e,t,i){let s=e.projection=[];for(let n=0;n<t.length;n++){let o=i[n];s.push(o!=null&&o.length?Array.from(o):null)}}var OT=(()=>{class e{static __NG_ELEMENT_ID__=Eet}return e})();function Eet(){let e=no();return Met(e,_n())}var Pet=OT,ED=class extends Pet{_lContainer;_hostTNode;_hostLView;constructor(t,i,s){super(),this._lContainer=t,this._hostTNode=i,this._hostLView=s}get element(){return TT(this._hostTNode,this._hostLView)}get injector(){return new Ka(this._hostTNode,this._hostLView)}get parentInjector(){let t=gT(this._hostTNode,this._hostLView);if(vO(t)){let i=op(t,this._hostLView),s=ap(t),n=i[$t].data[s+8];return new Ka(n,i)}else return new Ka(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let i=EA(this._lContainer);return i!==null&&i[t]||null}get length(){return this._lContainer.length-pr}createEmbeddedView(t,i,s){let n,o;typeof s=="number"?n=s:s!=null&&(n=s.index,o=s.injector);let r=xA(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(i||{},o,r);return this.insertImpl(a,n,mA(this._hostTNode,r)),a}createComponent(t,i,s,n,o){let r=t&&!Rq(t),a;if(r)a=i;else{let v=i||{};a=v.index,s=v.injector,n=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef}let p=r?t:new fd(Tl(t)),h=s||this.parentInjector;if(!o&&p.ngModule==null){let c=(r?h:this.parentInjector).get(vr,null);c&&(o=c)}let u=Tl(p.componentType??{}),f=xA(this._lContainer,u?.id??null),l=f?.firstChild??null,d=p.create(h,n,l,o);return this.insertImpl(d.hostView,a,mA(this._hostTNode,f)),d}insert(t,i){return this.insertImpl(t,i,!0)}insertImpl(t,i,s){let n=t._lView;if(Nq(n)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let p=n[wi],h=new ED(p,p[$r],p[wi]);h.detach(h.indexOf(t))}}let o=this._adjustIndex(i),r=this._lContainer;return jtt(r,n,o,s),t.attachToViewContainerRef(),kA(RS(r),o,t),t}move(t,i){return this.insert(t,i)}indexOf(t){let i=EA(this._lContainer);return i!==null?i.indexOf(t):-1}remove(t){let i=this._adjustIndex(t,-1),s=qS(this._lContainer,i);s&&(_c(RS(this._lContainer),i),oD(s[$t],s))}detach(t){let i=this._adjustIndex(t,-1),s=qS(this._lContainer,i);return s&&_c(RS(this._lContainer),i)!=null?new fp(s):null}_adjustIndex(t,i=0){return t??this.length+i}};function EA(e){return e[rp]}function RS(e){return e[rp]||(e[rp]=[])}function Met(e,t){let i,s=t[e.index];return es(s)?i=s:(i=$tt(s,t,null,e),t[e.index]=i,tD(t,i)),bet(i,t,e,s),new ED(i,e,t)}function wet(e,t){let i=e[qn],s=i.createComment(""),n=ro(t,e),o=i.parentNode(n);return up(i,o,s,i.nextSibling(n),!1),s}var bet=Ret;function Ret(e,t,i,s){if(e[Qa])return;let n;i.type&8?n=Ls(s):n=wet(t,i),e[Qa]=n}var cd=class{},DT=class{};var iT=class extends cd{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new cp(this);constructor(t,i,s,n=!0){super(),this.ngModuleType=t,this._parent=i;let o=zA(t);this._bootstrapComponents=YO(o.bootstrap),this._r3Injector=MO(t,i,[{provide:cd,useValue:this},{provide:Ip,useValue:this.componentFactoryResolver},...s],$i(t),new Set(["environment"])),n&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},rT=class extends DT{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new iT(this.moduleType,t,[])}};var pp=class extends cd{injector;componentFactoryResolver=new cp(this);instance=null;constructor(t){super();let i=new ad([...t.providers,{provide:cd,useValue:this},{provide:Ip,useValue:this.componentFactoryResolver}],t.parent||fT(),t.debugName,new Set(["environment"]));this.injector=i,t.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ap(e,t,i=null){return new pp({providers:e,parent:t,debugName:i,runEnvironmentInitializers:!0}).injector}var Iet=(()=>{class e{_injector;cachedInjectors=new Map;constructor(i){this._injector=i}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let s=WA(!1,i.type),n=s.length>0?Ap([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,n)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Mt({token:e,providedIn:"environment",factory:()=>new e(Gt(vr))})}return e})();function wl(e){return oT(()=>{let t=MD(e),i=At(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===LO.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?n=>n.get(Iet).getOrCreateStandaloneInjector(i):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||un.Emulated,styles:e.styles||Sl,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&wT("NgStandalone"),wD(i);let s=e.dependencies;return i.directiveDefs=PA(s,!1),i.pipeDefs=PA(s,!0),i.id=Fet(i),i})}function Aet(e){return Tl(e)||vq(e)}function Oet(e){return e!==null}function Det(e,t){if(e==null)return Cl;let i={};for(let s in e)if(e.hasOwnProperty(s)){let n=e[s],o,r,a,p;Array.isArray(n)?(a=n[0],o=n[1],r=n[2]??o,p=n[3]||null):(o=n,r=n,a=bp.None,p=null),i[o]=[s,a,p],t[o]=r}return i}function Let(e){if(e==null)return Cl;let t={};for(let i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}function PD(e){return oT(()=>{let t=MD(e);return wD(t),t})}function MD(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Cl,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Sl,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Det(e.inputs,t),outputs:Let(e.outputs),debugInfo:null}}function wD(e){e.features?.forEach(t=>t(e))}function PA(e,t){if(!e)return null;let i=t?mq:Aet;return()=>(typeof e=="function"?e():e).map(s=>i(s)).filter(Oet)}function Fet(e){let t=0,i=typeof e.consts=="function"?"":e.consts,s=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,i,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of s.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var bD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var RD=new Tt("");var Bet=(()=>{class e{static \u0275prov=Mt({token:e,providedIn:"root",factory:()=>new nT})}return e})(),nT=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let i=t.zone,s=this.queues.get(i);s.has(t)&&(s.delete(t),this.queuedEffectCount--)}enqueue(t){let i=t.zone;this.queues.has(i)||this.queues.set(i,new Set);let s=this.queues.get(i);s.has(t)||(this.queuedEffectCount++,s.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,i]of this.queues)t===null?this.flushQueue(i):t.run(()=>this.flushQueue(i))}flushQueue(t){for(let i of t)t.delete(i),this.queuedEffectCount--,i.run()}};function Op(e){return!!e&&typeof e.then=="function"}function Net(e){return!!e&&typeof e.subscribe=="function"}var Get=new Tt("");var ID=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s});appInits=lt(Get,{optional:!0})??[];injector=lt(Fs);constructor(){}runInitializers(){if(this.initialized)return;let i=[];for(let n of this.appInits){let o=Xr(this.injector,n);if(Op(o))i.push(o);else if(Net(o)){let r=new Promise((a,p)=>{o.subscribe({complete:a,error:p})});i.push(r)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(n=>{this.reject(n)}),i.length===0&&s(),this.initialized=!0}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),LT=new Tt("");function ket(){rS(()=>{throw new Ct(600,!1)})}function Vet(e){return e.isBoundToModule}var Uet=10;var eo=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=lt(R_);afterRenderManager=lt(U_);zonelessEnabled=lt(yT);rootEffectScheduler=lt(Bet);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new si;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=lt(Pl).hasPendingTasks.pipe(Xt(i=>!i));constructor(){lt(wp,{optional:!0})}whenStable(){let i;return new Promise(s=>{i=this.isStable.subscribe({next:n=>{n&&s()}})}).finally(()=>{i.unsubscribe()})}_injector=lt(vr);_rendererFactory=null;get injector(){return this._injector}bootstrap(i,s){return this.bootstrapImpl(i,s)}bootstrapImpl(i,s,n=Fs.NULL){Ce(10);let o=i instanceof yD;if(!this._injector.get(ID).done){let d="";throw new Ct(405,d)}let a;o?a=i:a=this._injector.get(Ip).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let p=Vet(a)?void 0:this._injector.get(cd),h=s||a.selector,u=a.create(n,[],h,p),f=u.location.nativeElement,l=u.injector.get(RD,null);return l?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),Zc(this.components,u),l?.unregisterApplication(f)}),this._loadComponent(u),Ce(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ce(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(UO.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Ct(101,!1);let i=ie(null);try{this._runningTick=!0,this.synchronize()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(i),this.afterTick.next(),Ce(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(El,null,{optional:!0}));let i=0;for(;this.dirtyFlags!==0&&i++<Uet;)Ce(14),this.synchronizeOnce(),Ce(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:s,notifyErrorHandler:n}of this.allViews)zet(s,n,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:i})=>Tp(i))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(i){let s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){let s=i;Zc(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i),this._injector.get(LT,[]).forEach(n=>n(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Zc(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Ct(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Zc(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function zet(e,t,i,s){if(!i&&!Tp(e))return;cD(e,t,i&&!s?0:1)}function MA(e,t,i,s,n){rD(t,e,i,n?"class":"style",s)}function Dp(e,t,i,s){let n=_n(),o=iO(),r=Ja+e,a=n[qn],p=o.firstCreatePass?SD(r,o,n,t,ctt,zq(),i,s):o.data[r],h=Wet(o,n,p,a,t,e);n[r]=h;let u=Iq(p);return pT(p,!0),KO(a,h,p),!sD(p)&&t_()&&Att(o,n,h,p),(kq()===0||u)&&Mp(h,n),Vq(),u&&(iD(o,n,p),HO(o,p,n)),s!==null&&att(n,p),Dp}function Lp(){let e=no();nO()?$q():(e=e.parent,pT(e,!1));let t=e;Hq(t)&&Yq(),Uq();let i=iO();return i.firstCreatePass&&TD(i,t),t.classesWithoutHost!=null&&s_(t)&&MA(i,t,_n(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&a_(t)&&MA(i,t,_n(),t.stylesWithoutHost,!1),Lp}function so(e,t,i,s){return Dp(e,t,i,s),Lp(),so}var Wet=(e,t,i,s,n,o)=>(e_(!0),jO(s,n,_q()));var vp="en-US";var Het=vp;function Yet(e){typeof e=="string"&&(Het=e.toLowerCase().replace(/_/g,"-"))}var sT=class{ngModuleFactory;componentFactories;constructor(t,i){this.ngModuleFactory=t,this.componentFactories=i}},AD=(()=>{class e{compileModuleSync(i){return new rT(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let s=this.compileModuleSync(i),n=zA(i),o=YO(n.declarations).reduce((r,a)=>{let p=Tl(a);return p&&r.push(new fd(p)),r},[]);return new sT(s,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Xet=(()=>{class e{zone=lt(qe);changeDetectionScheduler=lt(dd);applicationRef=lt(eo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),$et=new Tt("",{factory:()=>!1});function OD({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:i}){return e??=()=>new qe(At(_({},LD()),{scheduleInRootZone:i})),[{provide:qe,useFactory:e},{provide:sd,multi:!0,useFactory:()=>{let s=lt(Xet,{optional:!0});return()=>s.initialize()}},{provide:sd,multi:!0,useFactory:()=>{let s=lt(jet);return()=>{s.initialize()}}},t===!0?{provide:bO,useValue:!0}:[],{provide:RO,useValue:i??wO}]}function DD(e){let t=e?.ignoreChangesOutsideZone,i=e?.scheduleInRootZone,s=OD({ngZoneFactory:()=>{let n=LD(e);return n.scheduleInRootZone=i,n.shouldCoalesceEventChangeDetection&&wT("NgZone_CoalesceEvent"),new qe(n)},ignoreChangesOutsideZone:t,scheduleInRootZone:i});return uT([{provide:$et,useValue:!0},{provide:yT,useValue:!1},s])}function LD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var jet=(()=>{class e{subscription=new Ve;initialized=!1;zone=lt(qe);pendingTasks=lt(Pl);initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qe.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Zet=(()=>{class e{appRef=lt(eo);taskService=lt(Pl);ngZone=lt(qe);zonelessEnabled=lt(yT);tracing=lt(wp,{optional:!0});disableScheduling=lt(bO,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(hp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(lt(RO,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof XS||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;let s=!1;switch(i){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,s=!0;break}case 12:{this.appRef.dirtyFlags|=16,s=!0;break}case 13:{this.appRef.dirtyFlags|=2,s=!0;break}case 11:{s=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(s))return;let n=this.useMicrotaskScheduler?lA:IO;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>n(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>n(()=>this.tick()))}shouldScheduleTick(i){return!(this.disableScheduling&&!i||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(hp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,lA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ket(){return typeof $localize<"u"&&$localize.locale||vp}var FD=new Tt("",{providedIn:"root",factory:()=>lt(FD,Bt.Optional|Bt.SkipSelf)||Ket()});var aT=new Tt(""),Jet=new Tt("");function ed(e){return!e.moduleRef}function Qet(e){let t=ed(e)?e.r3Injector:e.moduleRef.injector,i=t.get(qe);return i.run(()=>{ed(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let s=t.get(Bs,null),n;if(i.runOutsideAngular(()=>{n=i.onError.subscribe({next:o=>{s.handleError(o)}})}),ed(e)){let o=()=>t.destroy(),r=e.platformInjector.get(aT);r.add(o),t.onDestroy(()=>{n.unsubscribe(),r.delete(o)})}else{let o=()=>e.moduleRef.destroy(),r=e.platformInjector.get(aT);r.add(o),e.moduleRef.onDestroy(()=>{Zc(e.allPlatformModules,e.moduleRef),n.unsubscribe(),r.delete(o)})}return _et(s,i,()=>{let o=t.get(ID);return o.runInitializers(),o.donePromise.then(()=>{let r=t.get(FD,vp);if(Yet(r||vp),!t.get(Jet,!0))return ed(e)?t.get(eo):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ed(e)){let p=t.get(eo);return e.rootComponent!==void 0&&p.bootstrap(e.rootComponent),p}else return qet(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function qet(e,t){let i=e.injector.get(eo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(i);else throw new Ct(-403,!1);t.push(e)}function _et(e,t,i){try{let s=i();return Op(s)?s.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):s}catch(s){throw t.runOutsideAngular(()=>e.handleError(s)),s}}var Kc=null;function tit(e=[],t){return Fs.create({name:t,providers:[{provide:xp,useValue:"platform"},{provide:aT,useValue:new Set([()=>Kc=null])},...e]})}function eit(e=[]){if(Kc)return Kc;let t=tit(e);return Kc=t,ket(),iit(t),t}function iit(e){let t=e.get(PT,null);Xr(e,()=>{t?.forEach(i=>i())})}var BD=(()=>{class e{static __NG_ELEMENT_ID__=rit}return e})();function rit(e){return nit(no(),_n(),(e&16)===16)}function nit(e,t,i){if(Sp(e)&&!i){let s=qa(e.index,t);return new fp(s,s)}else if(e.type&175){let s=t[hn];return new fp(s,t)}return null}function ND(e){Ce(8);try{let{rootComponent:t,appProviders:i,platformProviders:s}=e,n=eit(s),o=[OD({}),{provide:dd,useExisting:Zet},...i||[]],r=new pp({providers:o,parent:n,debugName:"",runEnvironmentInitializers:!1});return Qet({r3Injector:r.injector,platformInjector:n,rootComponent:t})}catch(t){return Promise.reject(t)}finally{Ce(9)}}var wA=class{[rl];constructor(t){this[rl]=t}destroy(){this[rl].destroy()}};var vi=new Tt("");var VD=null;function is(){return VD}function FT(e){VD??=e}var gd=class{},BT=(()=>{class e{historyGo(i){throw new Error("")}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>lt(UD),providedIn:"platform"})}return e})();var UD=(()=>{class e extends BT{_location;_history;_doc=lt(vi);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return is().getBaseHref(this._doc)}onPopState(i){let s=is().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",i,!1),()=>s.removeEventListener("popstate",i)}onHashChange(i){let s=is().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",i,!1),()=>s.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,s,n){this._history.pushState(i,s,n)}replaceState(i,s,n){this._history.replaceState(i,s,n)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function zD(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function GD(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function Ns(e){return e&&e[0]!=="?"?`?${e}`:e}var Fp=(()=>{class e{historyGo(i){throw new Error("")}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>lt(HD),providedIn:"root"})}return e})(),WD=new Tt(""),HD=(()=>{class e extends Fp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(i,s){super(),this._platformLocation=i,this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??lt(vi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return zD(this._baseHref,i)}path(i=!1){let s=this._platformLocation.pathname+Ns(this._platformLocation.search),n=this._platformLocation.hash;return n&&i?`${s}${n}`:s}pushState(i,s,n,o){let r=this.prepareExternalUrl(n+Ns(o));this._platformLocation.pushState(i,s,r)}replaceState(i,s,n,o){let r=this.prepareExternalUrl(n+Ns(o));this._platformLocation.replaceState(i,s,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}static \u0275fac=function(s){return new(s||e)(Gt(BT),Gt(WD,8))};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bl=(()=>{class e{_subject=new si;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(i){this._locationStrategy=i;let s=this._locationStrategy.getBaseHref();this._basePath=oit(GD(kD(s))),this._locationStrategy.onPopState(n=>{this._subject.next({url:this.path(!0),pop:!0,state:n.state,type:n.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,s=""){return this.path()==this.normalize(i+Ns(s))}normalize(i){return e.stripTrailingSlash(ait(this._basePath,kD(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,s="",n=null){this._locationStrategy.pushState(n,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ns(s)),n)}replaceState(i,s="",n=null){this._locationStrategy.replaceState(n,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Ns(s)),n)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",s){this._urlChangeListeners.forEach(n=>n(i,s))}subscribe(i,s,n){return this._subject.subscribe({next:i,error:s??void 0,complete:n??void 0})}static normalizeQueryParams=Ns;static joinWithSlash=zD;static stripTrailingSlash=GD;static \u0275fac=function(s){return new(s||e)(Gt(Fp))};static \u0275prov=Mt({token:e,factory:()=>sit(),providedIn:"root"})}return e})();function sit(){return new bl(Gt(Fp))}function ait(e,t){if(!e||!t.startsWith(e))return t;let i=t.substring(e.length);return i===""||["/",";","?","#"].includes(i[0])?i:t}function kD(e){return e.replace(/\/index.html$/,"")}function oit(e){if(new RegExp("^(https?:)?//").test(e)){let[,i]=e.split(/\/\/[^\/]+/);return i}return e}function NT(e,t){t=encodeURIComponent(t);for(let i of e.split(";")){let s=i.indexOf("="),[n,o]=s==-1?[i,""]:[i.slice(0,s),i.slice(s+1)];if(n.trim()===t)return decodeURIComponent(o)}return null}var GT="browser",YD="server";function Bp(e){return e===YD}var xd=class{};var kp=new Tt(""),zT=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(i,s){this._zone=s,i.forEach(n=>{n.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,s,n,o){return this._findPluginFor(s).addEventListener(i,s,n,o)}getZone(){return this._zone}_findPluginFor(i){let s=this._eventNameToPlugin.get(i);if(s)return s;if(s=this._plugins.find(o=>o.supports(i)),!s)throw new Ct(5101,!1);return this._eventNameToPlugin.set(i,s),s}static \u0275fac=function(s){return new(s||e)(Gt(kp),Gt(qe))};static \u0275prov=Mt({token:e,factory:e.\u0275fac})}return e})(),yd=class{_doc;constructor(t){this._doc=t}manager},Np="ng-app-id";function XD(e){for(let t of e)t.remove()}function $D(e,t){let i=t.createElement("style");return i.textContent=e,i}function lit(e,t,i,s){let n=e.head?.querySelectorAll(`style[${Np}="${t}"],link[${Np}="${t}"]`);if(n)for(let o of n)o.removeAttribute(Np),o instanceof HTMLLinkElement?s.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&i.set(o.textContent,{usage:0,elements:[o]})}function VT(e,t){let i=t.createElement("link");return i.setAttribute("rel","stylesheet"),i.setAttribute("href",e),i}var WT=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(i,s,n,o={}){this.doc=i,this.appId=s,this.nonce=n,this.isServer=Bp(o),lit(i,s,this.inline,this.external),this.hosts.add(i.head)}addStyles(i,s){for(let n of i)this.addUsage(n,this.inline,$D);s?.forEach(n=>this.addUsage(n,this.external,VT))}removeStyles(i,s){for(let n of i)this.removeUsage(n,this.inline);s?.forEach(n=>this.removeUsage(n,this.external))}addUsage(i,s,n){let o=s.get(i);o?o.usage++:s.set(i,{usage:1,elements:[...this.hosts].map(r=>this.addElement(r,n(i,this.doc)))})}removeUsage(i,s){let n=s.get(i);n&&(n.usage--,n.usage<=0&&(XD(n.elements),s.delete(i)))}ngOnDestroy(){for(let[,{elements:i}]of[...this.inline,...this.external])XD(i);this.hosts.clear()}addHost(i){this.hosts.add(i);for(let[s,{elements:n}]of this.inline)n.push(this.addElement(i,$D(s,this.doc)));for(let[s,{elements:n}]of this.external)n.push(this.addElement(i,VT(s,this.doc)))}removeHost(i){this.hosts.delete(i)}addElement(i,s){return this.nonce&&s.setAttribute("nonce",this.nonce),this.isServer&&s.setAttribute(Np,this.appId),i.appendChild(s)}static \u0275fac=function(s){return new(s||e)(Gt(vi),Gt(ET),Gt(MT,8),Gt(md))};static \u0275prov=Mt({token:e,factory:e.\u0275fac})}return e})(),kT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},HT=/%COMP%/g;var ZD="%COMP%",hit=`_nghost-${ZD}`,uit=`_ngcontent-${ZD}`,dit=!0,fit=new Tt("",{providedIn:"root",factory:()=>dit});function cit(e){return uit.replace(HT,e)}function pit(e){return hit.replace(HT,e)}function KD(e,t){return t.map(i=>i.replace(HT,e))}var YT=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(i,s,n,o,r,a,p,h=null,u=null){this.eventManager=i,this.sharedStylesHost=s,this.appId=n,this.removeStylesOnCompDestroy=o,this.doc=r,this.platformId=a,this.ngZone=p,this.nonce=h,this.tracingService=u,this.platformIsServer=Bp(a),this.defaultRenderer=new Cd(i,r,p,this.platformIsServer,this.tracingService)}createRenderer(i,s){if(!i||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===un.ShadowDom&&(s=At(_({},s),{encapsulation:un.Emulated}));let n=this.getOrCreateRenderer(i,s);return n instanceof Gp?n.applyToHost(i):n instanceof Sd&&n.applyStyles(),n}getOrCreateRenderer(i,s){let n=this.rendererByCompId,o=n.get(s.id);if(!o){let r=this.doc,a=this.ngZone,p=this.eventManager,h=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,l=this.tracingService;switch(s.encapsulation){case un.Emulated:o=new Gp(p,h,s,this.appId,u,r,a,f,l);break;case un.ShadowDom:return new UT(p,h,i,s,r,a,this.nonce,f,l);default:o=new Sd(p,h,s,u,r,a,f,l);break}n.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(i){this.rendererByCompId.delete(i)}static \u0275fac=function(s){return new(s||e)(Gt(zT),Gt(WT),Gt(ET),Gt(fit),Gt(vi),Gt(md),Gt(qe),Gt(MT),Gt(wp,8))};static \u0275prov=Mt({token:e,factory:e.\u0275fac})}return e})(),Cd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,i,s,n,o){this.eventManager=t,this.doc=i,this.ngZone=s,this.platformIsServer=n,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,i){return i?this.doc.createElementNS(kT[i]||i,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,i){(jD(t)?t.content:t).appendChild(i)}insertBefore(t,i,s){t&&(jD(t)?t.content:t).insertBefore(i,s)}removeChild(t,i){i.remove()}selectRootElement(t,i){let s=typeof t=="string"?this.doc.querySelector(t):t;if(!s)throw new Ct(-5104,!1);return i||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,i,s,n){if(n){i=n+":"+i;let o=kT[n];o?t.setAttributeNS(o,i,s):t.setAttribute(i,s)}else t.setAttribute(i,s)}removeAttribute(t,i,s){if(s){let n=kT[s];n?t.removeAttributeNS(n,i):t.removeAttribute(`${s}:${i}`)}else t.removeAttribute(i)}addClass(t,i){t.classList.add(i)}removeClass(t,i){t.classList.remove(i)}setStyle(t,i,s,n){n&(Ml.DashCase|Ml.Important)?t.style.setProperty(i,s,n&Ml.Important?"important":""):t.style[i]=s}removeStyle(t,i,s){s&Ml.DashCase?t.style.removeProperty(i):t.style[i]=""}setProperty(t,i,s){t!=null&&(t[i]=s)}setValue(t,i){t.nodeValue=i}listen(t,i,s,n){if(typeof t=="string"&&(t=is().getGlobalEventTarget(this.doc,t),!t))throw new Ct(5102,!1);let o=this.decoratePreventDefault(s);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,i,o)),this.eventManager.addEventListener(t,i,o,n)}decoratePreventDefault(t){return i=>{if(i==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(i)):t(i))===!1&&i.preventDefault()}}};function jD(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var UT=class extends Cd{sharedStylesHost;hostEl;shadowRoot;constructor(t,i,s,n,o,r,a,p,h){super(t,o,r,p,h),this.sharedStylesHost=i,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=n.styles;u=KD(n.id,u);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}let f=n.getExternalStyles?.();if(f)for(let l of f){let d=VT(l,o);a&&d.setAttribute("nonce",a),this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,i){return super.appendChild(this.nodeOrShadowRoot(t),i)}insertBefore(t,i,s){return super.insertBefore(this.nodeOrShadowRoot(t),i,s)}removeChild(t,i){return super.removeChild(null,i)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sd=class extends Cd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,i,s,n,o,r,a,p,h){super(t,o,r,a,p),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=n;let u=s.styles;this.styles=h?KD(h,u):u,this.styleUrls=s.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gp=class extends Sd{contentAttr;hostAttr;constructor(t,i,s,n,o,r,a,p,h){let u=n+"-"+s.id;super(t,i,s,o,r,a,p,h,u),this.contentAttr=cit(u),this.hostAttr=pit(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,i){let s=super.createElement(t,i);return super.setAttribute(s,this.contentAttr,""),s}};var Vp=class e extends gd{supportsDOMEvents=!0;static makeCurrent(){FT(new e)}onAndCancel(t,i,s,n){return t.addEventListener(i,s,n),()=>{t.removeEventListener(i,s,n)}}dispatchEvent(t,i){t.dispatchEvent(i)}remove(t){t.remove()}createElement(t,i){return i=i||this.getDefaultDocument(),i.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,i){return i==="window"?window:i==="document"?t:i==="body"?t.body:null}getBaseHref(t){let i=git();return i==null?null:xit(i)}resetBaseElement(){Td=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return NT(document.cookie,t)}},Td=null;function git(){return Td=Td||document.querySelector("base"),Td?Td.getAttribute("href"):null}function xit(e){return new URL(e,document.baseURI).pathname}var yit=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac})}return e})(),QD=(()=>{class e extends yd{constructor(i){super(i)}supports(i){return!0}addEventListener(i,s,n,o){return i.addEventListener(s,n,o),()=>this.removeEventListener(i,s,n,o)}removeEventListener(i,s,n,o){return i.removeEventListener(s,n,o)}static \u0275fac=function(s){return new(s||e)(Gt(vi))};static \u0275prov=Mt({token:e,factory:e.\u0275fac})}return e})(),JD=["alt","control","meta","shift"],Cit={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sit={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},qD=(()=>{class e extends yd{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,s,n,o){let r=e.parseEventName(s),a=e.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>is().onAndCancel(i,r.domEventName,a,o))}static parseEventName(i){let s=i.toLowerCase().split("."),n=s.shift();if(s.length===0||!(n==="keydown"||n==="keyup"))return null;let o=e._normalizeKey(s.pop()),r="",a=s.indexOf("code");if(a>-1&&(s.splice(a,1),r="code."),JD.forEach(h=>{let u=s.indexOf(h);u>-1&&(s.splice(u,1),r+=h+".")}),r+=o,s.length!=0||o.length===0)return null;let p={};return p.domEventName=n,p.fullKey=r,p}static matchEventFullKeyCode(i,s){let n=Cit[i.key]||i.key,o="";return s.indexOf("code.")>-1&&(n=i.code,o="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),JD.forEach(r=>{if(r!==n){let a=Sit[r];a(i)&&(o+=r+".")}}),o+=n,o===s)}static eventCallback(i,s,n){return o=>{e.matchEventFullKeyCode(o,i)&&n.runGuarded(()=>s(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}static \u0275fac=function(s){return new(s||e)(Gt(vi))};static \u0275prov=Mt({token:e,factory:e.\u0275fac})}return e})();function XT(e,t){return ND(_({rootComponent:e},Tit(t)))}function Tit(e){return{appProviders:[...bit,...e?.providers??[]],platformProviders:wit}}function Eit(){Vp.makeCurrent()}function Pit(){return new Bs}function Mit(){return kO(document),document}var wit=[{provide:md,useValue:GT},{provide:PT,useValue:Eit,multi:!0},{provide:vi,useFactory:Mit}];var bit=[{provide:xp,useValue:"root"},{provide:Bs,useFactory:Pit},{provide:kp,useClass:QD,multi:!0,deps:[vi]},{provide:kp,useClass:qD,multi:!0,deps:[vi]},YT,WT,zT,{provide:El,useExisting:YT},{provide:xd,useClass:yit},[]];var _D=(()=>{class e{_doc;constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}static \u0275fac=function(s){return new(s||e)(Gt(vi))};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Lt="primary",Fd=Symbol("RouteTitle"),JT=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i[0]:i}return null}getAll(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Ll(e){return new JT(e)}function Iit(e,t,i){let s=i.path.split("/");if(s.length>e.length||i.pathMatch==="full"&&(t.hasChildren()||s.length<e.length))return null;let n={};for(let o=0;o<s.length;o++){let r=s[o],a=e[o];if(r[0]===":")n[r.substring(1)]=a;else if(r!==a.path)return null}return{consumed:e.slice(0,s.length),posParams:n}}function Ait(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!dn(e[i],t[i]))return!1;return!0}function dn(e,t){let i=e?QT(e):void 0,s=t?QT(t):void 0;if(!i||!s||i.length!=s.length)return!1;let n;for(let o=0;o<i.length;o++)if(n=i[o],!o2(e[n],t[n]))return!1;return!0}function QT(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function o2(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let i=[...e].sort(),s=[...t].sort();return i.every((n,o)=>s[o]===n)}else return e===t}function l2(e){return e.length>0?e[e.length-1]:null}function Vs(e){return mS(e)?e:Op(e)?Ue(Promise.resolve(e)):Rt(e)}var Oit={exact:u2,subset:d2},h2={exact:Dit,subset:Lit,ignored:()=>!0};function t2(e,t,i){return Oit[i.paths](e.root,t.root,i.matrixParams)&&h2[i.queryParams](e.queryParams,t.queryParams)&&!(i.fragment==="exact"&&e.fragment!==t.fragment)}function Dit(e,t){return dn(e,t)}function u2(e,t,i){if(!lo(e.segments,t.segments)||!Wp(e.segments,t.segments,i)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let s in t.children)if(!e.children[s]||!u2(e.children[s],t.children[s],i))return!1;return!0}function Lit(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>o2(e[i],t[i]))}function d2(e,t,i){return f2(e,t,t.segments,i)}function f2(e,t,i,s){if(e.segments.length>i.length){let n=e.segments.slice(0,i.length);return!(!lo(n,i)||t.hasChildren()||!Wp(n,i,s))}else if(e.segments.length===i.length){if(!lo(e.segments,i)||!Wp(e.segments,i,s))return!1;for(let n in t.children)if(!e.children[n]||!d2(e.children[n],t.children[n],s))return!1;return!0}else{let n=i.slice(0,e.segments.length),o=i.slice(e.segments.length);return!lo(e.segments,n)||!Wp(e.segments,n,s)||!e.children[Lt]?!1:f2(e.children[Lt],t,o,s)}}function Wp(e,t,i){return t.every((s,n)=>h2[i](e[n].parameters,s.parameters))}var ns=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Qt([],{}),i={},s=null){this.root=t,this.queryParams=i,this.fragment=s}get queryParamMap(){return this._queryParamMap??=Ll(this.queryParams),this._queryParamMap}toString(){return Nit.serialize(this)}},Qt=class{segments;children;parent=null;constructor(t,i){this.segments=t,this.children=i,Object.values(i).forEach(s=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hp(this)}},oo=class{path;parameters;_parameterMap;constructor(t,i){this.path=t,this.parameters=i}get parameterMap(){return this._parameterMap??=Ll(this.parameters),this._parameterMap}toString(){return p2(this)}};function Fit(e,t){return lo(e,t)&&e.every((i,s)=>dn(i.parameters,t[s].parameters))}function lo(e,t){return e.length!==t.length?!1:e.every((i,s)=>i.path===t[s].path)}function Bit(e,t){let i=[];return Object.entries(e.children).forEach(([s,n])=>{s===Lt&&(i=i.concat(t(n,s)))}),Object.entries(e.children).forEach(([s,n])=>{s!==Lt&&(i=i.concat(t(n,s)))}),i}var iv=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>new Fl,providedIn:"root"})}return e})(),Fl=class{parse(t){let i=new _T(t);return new ns(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(t){let i=`/${Ed(t.root,!0)}`,s=Vit(t.queryParams),n=typeof t.fragment=="string"?`#${Git(t.fragment)}`:"";return`${i}${s}${n}`}},Nit=new Fl;function Hp(e){return e.segments.map(t=>p2(t)).join("/")}function Ed(e,t){if(!e.hasChildren())return Hp(e);if(t){let i=e.children[Lt]?Ed(e.children[Lt],!1):"",s=[];return Object.entries(e.children).forEach(([n,o])=>{n!==Lt&&s.push(`${n}:${Ed(o,!1)}`)}),s.length>0?`${i}(${s.join("//")})`:i}else{let i=Bit(e,(s,n)=>n===Lt?[Ed(e.children[Lt],!1)]:[`${n}:${Ed(s,!1)}`]);return Object.keys(e.children).length===1&&e.children[Lt]!=null?`${Hp(e)}/${i[0]}`:`${Hp(e)}/(${i.join("//")})`}}function c2(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Up(e){return c2(e).replace(/%3B/gi,";")}function Git(e){return encodeURI(e)}function qT(e){return c2(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yp(e){return decodeURIComponent(e)}function e2(e){return Yp(e.replace(/\+/g,"%20"))}function p2(e){return`${qT(e.path)}${kit(e.parameters)}`}function kit(e){return Object.entries(e).map(([t,i])=>`;${qT(t)}=${qT(i)}`).join("")}function Vit(e){let t=Object.entries(e).map(([i,s])=>Array.isArray(s)?s.map(n=>`${Up(i)}=${Up(n)}`).join("&"):`${Up(i)}=${Up(s)}`).filter(i=>i);return t.length?`?${t.join("&")}`:""}var Uit=/^[^\/()?;#]+/;function $T(e){let t=e.match(Uit);return t?t[0]:""}var zit=/^[^\/()?;=#]+/;function Wit(e){let t=e.match(zit);return t?t[0]:""}var Hit=/^[^=?&#]+/;function Yit(e){let t=e.match(Hit);return t?t[0]:""}var Xit=/^[^&#]+/;function $it(e){let t=e.match(Xit);return t?t[0]:""}var _T=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(t.length>0||Object.keys(i).length>0)&&(s[Lt]=new Qt(t,i)),s}parseSegment(){let t=$T(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ct(4009,!1);return this.capture(t),new oo(Yp(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let i=Wit(this.remaining);if(!i)return;this.capture(i);let s="";if(this.consumeOptional("=")){let n=$T(this.remaining);n&&(s=n,this.capture(s))}t[Yp(i)]=Yp(s)}parseQueryParam(t){let i=Yit(this.remaining);if(!i)return;this.capture(i);let s="";if(this.consumeOptional("=")){let r=$it(this.remaining);r&&(s=r,this.capture(s))}let n=e2(i),o=e2(s);if(t.hasOwnProperty(n)){let r=t[n];Array.isArray(r)||(r=[r],t[n]=r),r.push(o)}else t[n]=o}parseParens(t){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let s=$T(this.remaining),n=this.remaining[s.length];if(n!=="/"&&n!==")"&&n!==";")throw new Ct(4010,!1);let o;s.indexOf(":")>-1?(o=s.slice(0,s.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Lt);let r=this.parseChildren();i[o]=Object.keys(r).length===1?r[Lt]:new Qt([],r),this.consumeOptional("//")}return i}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ct(4011,!1)}};function v2(e){return e.segments.length>0?new Qt([],{[Lt]:e}):e}function m2(e){let t={};for(let[s,n]of Object.entries(e.children)){let o=m2(n);if(s===Lt&&o.segments.length===0&&o.hasChildren())for(let[r,a]of Object.entries(o.children))t[r]=a;else(o.segments.length>0||o.hasChildren())&&(t[s]=o)}let i=new Qt(e.segments,t);return jit(i)}function jit(e){if(e.numberOfChildren===1&&e.children[Lt]){let t=e.children[Lt];return new Qt(e.segments.concat(t.segments),t.children)}return e}function Bl(e){return e instanceof ns}function Zit(e,t,i=null,s=null){let n=g2(e);return x2(n,t,i,s)}function g2(e){let t;function i(o){let r={};for(let p of o.children){let h=i(p);r[p.outlet]=h}let a=new Qt(o.url,r);return o===e&&(t=a),a}let s=i(e.root),n=v2(s);return t??n}function x2(e,t,i,s){let n=e;for(;n.parent;)n=n.parent;if(t.length===0)return jT(n,n,n,i,s);let o=Kit(t);if(o.toRoot())return jT(n,n,new Qt([],{}),i,s);let r=Jit(o,n,e),a=r.processChildren?Md(r.segmentGroup,r.index,o.commands):C2(r.segmentGroup,r.index,o.commands);return jT(n,r.segmentGroup,a,i,s)}function $p(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function bd(e){return typeof e=="object"&&e!=null&&e.outlets}function jT(e,t,i,s,n){let o={};s&&Object.entries(s).forEach(([p,h])=>{o[p]=Array.isArray(h)?h.map(u=>`${u}`):`${h}`});let r;e===t?r=i:r=y2(e,t,i);let a=v2(m2(r));return new ns(a,o,n)}function y2(e,t,i){let s={};return Object.entries(e.children).forEach(([n,o])=>{o===t?s[n]=i:s[n]=y2(o,t,i)}),new Qt(e.segments,s)}var jp=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,i,s){if(this.isAbsolute=t,this.numberOfDoubleDots=i,this.commands=s,t&&s.length>0&&$p(s[0]))throw new Ct(4003,!1);let n=s.find(bd);if(n&&n!==l2(s))throw new Ct(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Kit(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new jp(!0,0,e);let t=0,i=!1,s=e.reduce((n,o,r)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([p,h])=>{a[p]=typeof h=="string"?h.split("/"):h}),[...n,{outlets:a}]}if(o.segmentPath)return[...n,o.segmentPath]}return typeof o!="string"?[...n,o]:r===0?(o.split("/").forEach((a,p)=>{p==0&&a==="."||(p==0&&a===""?i=!0:a===".."?t++:a!=""&&n.push(a))}),n):[...n,o]},[]);return new jp(i,t,s)}var Al=class{segmentGroup;processChildren;index;constructor(t,i,s){this.segmentGroup=t,this.processChildren=i,this.index=s}};function Jit(e,t,i){if(e.isAbsolute)return new Al(t,!0,0);if(!i)return new Al(t,!1,NaN);if(i.parent===null)return new Al(i,!0,0);let s=$p(e.commands[0])?0:1,n=i.segments.length-1+s;return Qit(i,n,e.numberOfDoubleDots)}function Qit(e,t,i){let s=e,n=t,o=i;for(;o>n;){if(o-=n,s=s.parent,!s)throw new Ct(4005,!1);n=s.segments.length}return new Al(s,!1,n-o)}function qit(e){return bd(e[0])?e[0].outlets:{[Lt]:e}}function C2(e,t,i){if(e??=new Qt([],{}),e.segments.length===0&&e.hasChildren())return Md(e,t,i);let s=_it(e,t,i),n=i.slice(s.commandIndex);if(s.match&&s.pathIndex<e.segments.length){let o=new Qt(e.segments.slice(0,s.pathIndex),{});return o.children[Lt]=new Qt(e.segments.slice(s.pathIndex),e.children),Md(o,0,n)}else return s.match&&n.length===0?new Qt(e.segments,{}):s.match&&!e.hasChildren()?tE(e,t,i):s.match?Md(e,0,n):tE(e,t,i)}function Md(e,t,i){if(i.length===0)return new Qt(e.segments,{});{let s=qit(i),n={};if(Object.keys(s).some(o=>o!==Lt)&&e.children[Lt]&&e.numberOfChildren===1&&e.children[Lt].segments.length===0){let o=Md(e.children[Lt],t,i);return new Qt(e.segments,o.children)}return Object.entries(s).forEach(([o,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(n[o]=C2(e.children[o],t,r))}),Object.entries(e.children).forEach(([o,r])=>{s[o]===void 0&&(n[o]=r)}),new Qt(e.segments,n)}}function _it(e,t,i){let s=0,n=t,o={match:!1,pathIndex:0,commandIndex:0};for(;n<e.segments.length;){if(s>=i.length)return o;let r=e.segments[n],a=i[s];if(bd(a))break;let p=`${a}`,h=s<i.length-1?i[s+1]:null;if(n>0&&p===void 0)break;if(p&&h&&typeof h=="object"&&h.outlets===void 0){if(!r2(p,h,r))return o;s+=2}else{if(!r2(p,{},r))return o;s++}n++}return{match:!0,pathIndex:n,commandIndex:s}}function tE(e,t,i){let s=e.segments.slice(0,t),n=0;for(;n<i.length;){let o=i[n];if(bd(o)){let p=trt(o.outlets);return new Qt(s,p)}if(n===0&&$p(i[0])){let p=e.segments[t];s.push(new oo(p.path,i2(i[0]))),n++;continue}let r=bd(o)?o.outlets[Lt]:`${o}`,a=n<i.length-1?i[n+1]:null;r&&a&&$p(a)?(s.push(new oo(r,i2(a))),n+=2):(s.push(new oo(r,{})),n++)}return new Qt(s,{})}function trt(e){let t={};return Object.entries(e).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(t[i]=tE(new Qt([],{}),0,s))}),t}function i2(e){let t={};return Object.entries(e).forEach(([i,s])=>t[i]=`${s}`),t}function r2(e,t,i){return e==i.path&&dn(t,i.parameters)}var Xp="imperative",li=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(li||{}),mr=class{id;url;constructor(t,i){this.id=t,this.url=i}},Nl=class extends mr{type=li.NavigationStart;navigationTrigger;restoredState;constructor(t,i,s="imperative",n=null){super(t,i),this.navigationTrigger=s,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gs=class extends mr{urlAfterRedirects;type=li.NavigationEnd;constructor(t,i,s){super(t,i),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zi=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Zi||{}),Zp=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Zp||{}),rs=class extends mr{reason;code;type=li.NavigationCancel;constructor(t,i,s,n){super(t,i),this.reason=s,this.code=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ks=class extends mr{reason;code;type=li.NavigationSkipped;constructor(t,i,s,n){super(t,i),this.reason=s,this.code=n}},Rd=class extends mr{error;target;type=li.NavigationError;constructor(t,i,s,n){super(t,i),this.error=s,this.target=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kp=class extends mr{urlAfterRedirects;state;type=li.RoutesRecognized;constructor(t,i,s,n){super(t,i),this.urlAfterRedirects=s,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eE=class extends mr{urlAfterRedirects;state;type=li.GuardsCheckStart;constructor(t,i,s,n){super(t,i),this.urlAfterRedirects=s,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iE=class extends mr{urlAfterRedirects;state;shouldActivate;type=li.GuardsCheckEnd;constructor(t,i,s,n,o){super(t,i),this.urlAfterRedirects=s,this.state=n,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rE=class extends mr{urlAfterRedirects;state;type=li.ResolveStart;constructor(t,i,s,n){super(t,i),this.urlAfterRedirects=s,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nE=class extends mr{urlAfterRedirects;state;type=li.ResolveEnd;constructor(t,i,s,n){super(t,i),this.urlAfterRedirects=s,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sE=class{route;type=li.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},aE=class{route;type=li.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},oE=class{snapshot;type=li.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lE=class{snapshot;type=li.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hE=class{snapshot;type=li.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uE=class{snapshot;type=li.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Id=class{},Gl=class{url;navigationBehaviorOptions;constructor(t,i){this.url=t,this.navigationBehaviorOptions=i}};function ert(e,t){return e.providers&&!e._injector&&(e._injector=Ap(e.providers,t,`Route: ${e.path}`)),e._injector??t}function jr(e){return e.outlet||Lt}function irt(e,t){let i=e.filter(s=>jr(s)===t);return i.push(...e.filter(s=>jr(s)!==t)),i}function Bd(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let i=t.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var dE=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Bd(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Nd(this.rootInjector)}},Nd=(()=>{class e{rootInjector;contexts=new Map;constructor(i){this.rootInjector=i}onChildOutletCreated(i,s){let n=this.getOrCreateContext(i);n.outlet=s,this.contexts.set(i,n)}onChildOutletDestroyed(i){let s=this.getContext(i);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let s=this.getContext(i);return s||(s=new dE(this.rootInjector),this.contexts.set(i,s)),s}getContext(i){return this.contexts.get(i)||null}static \u0275fac=function(s){return new(s||e)(Gt(vr))};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Jp=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let i=this.pathFromRoot(t);return i.length>1?i[i.length-2]:null}children(t){let i=fE(t,this._root);return i?i.children.map(s=>s.value):[]}firstChild(t){let i=fE(t,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(t){let i=cE(t,this._root);return i.length<2?[]:i[i.length-2].children.map(n=>n.value).filter(n=>n!==t)}pathFromRoot(t){return cE(t,this._root).map(i=>i.value)}};function fE(e,t){if(e===t.value)return t;for(let i of t.children){let s=fE(e,i);if(s)return s}return null}function cE(e,t){if(e===t.value)return[t];for(let i of t.children){let s=cE(e,i);if(s.length)return s.unshift(t),s}return[]}var ji=class{value;children;constructor(t,i){this.value=t,this.children=i}toString(){return`TreeNode(${this.value})`}};function Il(e){let t={};return e&&e.children.forEach(i=>t[i.value.outlet]=i),t}var Qp=class extends Jp{snapshot;constructor(t,i){super(t),this.snapshot=i,TE(this,t)}toString(){return this.snapshot.toString()}};function S2(e){let t=rrt(e),i=new ai([new oo("",{})]),s=new ai({}),n=new ai({}),o=new ai({}),r=new ai(""),a=new ho(i,s,o,r,n,Lt,e,t.root);return a.snapshot=t.root,new Qp(new ji(a,[]),t)}function rrt(e){let t={},i={},s={},n="",o=new Ol([],t,s,n,i,Lt,e,null,{});return new _p("",new ji(o,[]))}var ho=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,i,s,n,o,r,a,p){this.urlSubject=t,this.paramsSubject=i,this.queryParamsSubject=s,this.fragmentSubject=n,this.dataSubject=o,this.outlet=r,this.component=a,this._futureSnapshot=p,this.title=this.dataSubject?.pipe(Xt(h=>h[Fd]))??Rt(void 0),this.url=t,this.params=i,this.queryParams=s,this.fragment=n,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Xt(t=>Ll(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Xt(t=>Ll(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qp(e,t,i="emptyOnly"){let s,{routeConfig:n}=e;return t!==null&&(i==="always"||n?.path===""||!t.component&&!t.routeConfig?.loadComponent)?s={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),n?.data),e._resolvedData)}:s={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},n&&E2(n)&&(s.resolve[Fd]=n.title),s}var Ol=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Fd]}constructor(t,i,s,n,o,r,a,p,h){this.url=t,this.params=i,this.queryParams=s,this.fragment=n,this.data=o,this.outlet=r,this.component=a,this.routeConfig=p,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ll(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ll(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(s=>s.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${i}')`}},_p=class extends Jp{url;constructor(t,i){super(i),this.url=t,TE(this,i)}toString(){return T2(this._root)}};function TE(e,t){t.value._routerState=e,t.children.forEach(i=>TE(e,i))}function T2(e){let t=e.children.length>0?` { ${e.children.map(T2).join(", ")} } `:"";return`${e.value}${t}`}function ZT(e){if(e.snapshot){let t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,dn(t.queryParams,i.queryParams)||e.queryParamsSubject.next(i.queryParams),t.fragment!==i.fragment&&e.fragmentSubject.next(i.fragment),dn(t.params,i.params)||e.paramsSubject.next(i.params),Ait(t.url,i.url)||e.urlSubject.next(i.url),dn(t.data,i.data)||e.dataSubject.next(i.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function pE(e,t){let i=dn(e.params,t.params)&&Fit(e.url,t.url),s=!e.parent!=!t.parent;return i&&!s&&(!e.parent||pE(e.parent,t.parent))}function E2(e){return typeof e.title=="string"||e.title===null}var nrt=new Tt(""),P2=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Lt;activateEvents=new Gi;deactivateEvents=new Gi;attachEvents=new Gi;detachEvents=new Gi;routerOutletData=OO(void 0);parentContexts=lt(Nd);location=lt(OT);changeDetector=lt(BD);inputBinder=lt(rv,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(i){if(i.name){let{firstChange:s,previousValue:n}=i.name;if(s)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ct(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ct(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ct(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,s){this.activated=i,this._activatedRoute=s,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,s){if(this.isActivated)throw new Ct(4013,!1);this._activatedRoute=i;let n=this.location,r=i.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,p=new vE(i,a,n.injector,this.routerOutletData);this.activated=n.createComponent(r,{index:n.length,injector:p,environmentInjector:s}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(s){return new(s||e)};static \u0275dir=PD({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[KA]})}return e})(),vE=class{route;childContexts;parent;outletData;constructor(t,i,s,n){this.route=t,this.childContexts=i,this.parent=s,this.outletData=n}get(t,i){return t===ho?this.route:t===Nd?this.childContexts:t===nrt?this.outletData:this.parent.get(t,i)}},rv=new Tt("");function srt(e,t,i){let s=Ad(e,t._root,i?i._root:void 0);return new Qp(s,t)}function Ad(e,t,i){if(i&&e.shouldReuseRoute(t.value,i.value.snapshot)){let s=i.value;s._futureSnapshot=t.value;let n=art(e,t,i);return new ji(s,n)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let r=o.route;return r.value._futureSnapshot=t.value,r.children=t.children.map(a=>Ad(e,a)),r}}let s=ort(t.value),n=t.children.map(o=>Ad(e,o));return new ji(s,n)}}function art(e,t,i){return t.children.map(s=>{for(let n of i.children)if(e.shouldReuseRoute(s.value,n.value.snapshot))return Ad(e,s,n);return Ad(e,s)})}function ort(e){return new ho(new ai(e.url),new ai(e.params),new ai(e.queryParams),new ai(e.fragment),new ai(e.data),e.outlet,e.component,e)}var Od=class{redirectTo;navigationBehaviorOptions;constructor(t,i){this.redirectTo=t,this.navigationBehaviorOptions=i}},M2="ngNavigationCancelingError";function tv(e,t){let{redirectTo:i,navigationBehaviorOptions:s}=Bl(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,n=w2(!1,Zi.Redirect);return n.url=i,n.navigationBehaviorOptions=s,n}function w2(e,t){let i=new Error(`NavigationCancelingError: ${e||""}`);return i[M2]=!0,i.cancellationCode=t,i}function lrt(e){return b2(e)&&Bl(e.url)}function b2(e){return!!e&&e[M2]}var hrt=(e,t,i,s)=>Xt(n=>(new mE(t,n.targetRouterState,n.currentRouterState,i,s).activate(e),n)),mE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,i,s,n,o){this.routeReuseStrategy=t,this.futureState=i,this.currState=s,this.forwardEvent=n,this.inputBindingEnabled=o}activate(t){let i=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,s,t),ZT(this.futureState.root),this.activateChildRoutes(i,s,t)}deactivateChildRoutes(t,i,s){let n=Il(i);t.children.forEach(o=>{let r=o.value.outlet;this.deactivateRoutes(o,n[r],s),delete n[r]}),Object.values(n).forEach(o=>{this.deactivateRouteAndItsChildren(o,s)})}deactivateRoutes(t,i,s){let n=t.value,o=i?i.value:null;if(n===o)if(n.component){let r=s.getContext(n.outlet);r&&this.deactivateChildRoutes(t,i,r.children)}else this.deactivateChildRoutes(t,i,s);else o&&this.deactivateRouteAndItsChildren(i,s)}deactivateRouteAndItsChildren(t,i){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,i):this.deactivateRouteAndOutlet(t,i)}detachAndStoreRouteSubtree(t,i){let s=i.getContext(t.value.outlet),n=s&&t.value.component?s.children:i,o=Il(t);for(let r of Object.values(o))this.deactivateRouteAndItsChildren(r,n);if(s&&s.outlet){let r=s.outlet.detach(),a=s.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:a})}}deactivateRouteAndOutlet(t,i){let s=i.getContext(t.value.outlet),n=s&&t.value.component?s.children:i,o=Il(t);for(let r of Object.values(o))this.deactivateRouteAndItsChildren(r,n);s&&(s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated()),s.attachRef=null,s.route=null)}activateChildRoutes(t,i,s){let n=Il(i);t.children.forEach(o=>{this.activateRoutes(o,n[o.value.outlet],s),this.forwardEvent(new uE(o.value.snapshot))}),t.children.length&&this.forwardEvent(new lE(t.value.snapshot))}activateRoutes(t,i,s){let n=t.value,o=i?i.value:null;if(ZT(n),n===o)if(n.component){let r=s.getOrCreateContext(n.outlet);this.activateChildRoutes(t,i,r.children)}else this.activateChildRoutes(t,i,s);else if(n.component){let r=s.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),r.children.onOutletReAttached(a.contexts),r.attachRef=a.componentRef,r.route=a.route.value,r.outlet&&r.outlet.attach(a.componentRef,a.route.value),ZT(a.route.value),this.activateChildRoutes(t,null,r.children)}else r.attachRef=null,r.route=n,r.outlet&&r.outlet.activateWith(n,r.injector),this.activateChildRoutes(t,null,r.children)}else this.activateChildRoutes(t,null,s)}},ev=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Dl=class{component;route;constructor(t,i){this.component=t,this.route=i}};function urt(e,t,i){let s=e._root,n=t?t._root:null;return Pd(s,n,i,[s.value])}function drt(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Vl(e,t){let i=Symbol(),s=t.get(e,i);return s===i?typeof e=="function"&&!OA(e)?e:t.get(e):s}function Pd(e,t,i,s,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=Il(t);return e.children.forEach(r=>{frt(r,o[r.value.outlet],i,s.concat([r.value]),n),delete o[r.value.outlet]}),Object.entries(o).forEach(([r,a])=>wd(a,i.getContext(r),n)),n}function frt(e,t,i,s,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,r=t?t.value:null,a=i?i.getContext(e.value.outlet):null;if(r&&o.routeConfig===r.routeConfig){let p=crt(r,o,o.routeConfig.runGuardsAndResolvers);p?n.canActivateChecks.push(new ev(s)):(o.data=r.data,o._resolvedData=r._resolvedData),o.component?Pd(e,t,a?a.children:null,s,n):Pd(e,t,i,s,n),p&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new Dl(a.outlet.component,r))}else r&&wd(t,a,n),n.canActivateChecks.push(new ev(s)),o.component?Pd(e,null,a?a.children:null,s,n):Pd(e,null,i,s,n);return n}function crt(e,t,i){if(typeof i=="function")return i(e,t);switch(i){case"pathParamsChange":return!lo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!lo(e.url,t.url)||!dn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pE(e,t)||!dn(e.queryParams,t.queryParams);case"paramsChange":default:return!pE(e,t)}}function wd(e,t,i){let s=Il(e),n=e.value;Object.entries(s).forEach(([o,r])=>{n.component?t?wd(r,t.children.getContext(o),i):wd(r,null,i):wd(r,t,i)}),n.component?t&&t.outlet&&t.outlet.isActivated?i.canDeactivateChecks.push(new Dl(t.outlet.component,n)):i.canDeactivateChecks.push(new Dl(null,n)):i.canDeactivateChecks.push(new Dl(null,n))}function Gd(e){return typeof e=="function"}function prt(e){return typeof e=="boolean"}function vrt(e){return e&&Gd(e.canLoad)}function mrt(e){return e&&Gd(e.canActivate)}function grt(e){return e&&Gd(e.canActivateChild)}function xrt(e){return e&&Gd(e.canDeactivate)}function yrt(e){return e&&Gd(e.canMatch)}function R2(e){return e instanceof Kn||e?.name==="EmptyError"}var zp=Symbol("INITIAL_VALUE");function kl(){return zr(e=>Wc(e.map(t=>t.pipe(Jn(1),yS(zp)))).pipe(Xt(t=>{for(let i of t)if(i!==!0){if(i===zp)return zp;if(i===!1||Crt(i))return i}return!0}),Ur(t=>t!==zp),Jn(1)))}function Crt(e){return Bl(e)||e instanceof Od}function Srt(e,t){return je(i=>{let{targetSnapshot:s,currentSnapshot:n,guards:{canActivateChecks:o,canDeactivateChecks:r}}=i;return r.length===0&&o.length===0?Rt(At(_({},i),{guardsResult:!0})):Trt(r,s,n,e).pipe(je(a=>a&&prt(a)?Ert(s,o,e,t):Rt(a)),Xt(a=>At(_({},i),{guardsResult:a})))})}function Trt(e,t,i,s){return Ue(e).pipe(je(n=>Rrt(n.component,n.route,i,t,s)),Qn(n=>n!==!0,!0))}function Ert(e,t,i,s){return Ue(t).pipe(cl(n=>fl(Mrt(n.route.parent,s),Prt(n.route,s),brt(e,n.path,i),wrt(e,n.route,i))),Qn(n=>n!==!0,!0))}function Prt(e,t){return e!==null&&t&&t(new hE(e)),Rt(!0)}function Mrt(e,t){return e!==null&&t&&t(new oE(e)),Rt(!0)}function wrt(e,t,i){let s=t.routeConfig?t.routeConfig.canActivate:null;if(!s||s.length===0)return Rt(!0);let n=s.map(o=>Hc(()=>{let r=Bd(t)??i,a=Vl(o,r),p=mrt(a)?a.canActivate(t,e):Xr(r,()=>a(t,e));return Vs(p).pipe(Qn())}));return Rt(n).pipe(kl())}function brt(e,t,i){let s=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(r=>drt(r)).filter(r=>r!==null).map(r=>Hc(()=>{let a=r.guards.map(p=>{let h=Bd(r.node)??i,u=Vl(p,h),f=grt(u)?u.canActivateChild(s,e):Xr(h,()=>u(s,e));return Vs(f).pipe(Qn())});return Rt(a).pipe(kl())}));return Rt(o).pipe(kl())}function Rrt(e,t,i,s,n){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Rt(!0);let r=o.map(a=>{let p=Bd(t)??n,h=Vl(a,p),u=xrt(h)?h.canDeactivate(e,t,i,s):Xr(p,()=>h(e,t,i,s));return Vs(u).pipe(Qn())});return Rt(r).pipe(kl())}function Irt(e,t,i,s){let n=t.canLoad;if(n===void 0||n.length===0)return Rt(!0);let o=n.map(r=>{let a=Vl(r,e),p=vrt(a)?a.canLoad(t,i):Xr(e,()=>a(t,i));return Vs(p)});return Rt(o).pipe(kl(),I2(s))}function I2(e){return fS(oi(t=>{if(typeof t!="boolean")throw tv(e,t)}),Xt(t=>t===!0))}function Art(e,t,i,s){let n=t.canMatch;if(!n||n.length===0)return Rt(!0);let o=n.map(r=>{let a=Vl(r,e),p=yrt(a)?a.canMatch(t,i):Xr(e,()=>a(t,i));return Vs(p)});return Rt(o).pipe(kl(),I2(s))}var Dd=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ld=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Rl(e){return dl(new Dd(e))}function Ort(e){return dl(new Ct(4e3,!1))}function Drt(e){return dl(w2(!1,Zi.GuardRejected))}var gE=class{urlSerializer;urlTree;constructor(t,i){this.urlSerializer=t,this.urlTree=i}lineralizeSegments(t,i){let s=[],n=i.root;for(;;){if(s=s.concat(n.segments),n.numberOfChildren===0)return Rt(s);if(n.numberOfChildren>1||!n.children[Lt])return Ort(`${t.redirectTo}`);n=n.children[Lt]}}applyRedirectCommands(t,i,s,n,o){if(typeof i!="string"){let a=i,{queryParams:p,fragment:h,routeConfig:u,url:f,outlet:l,params:d,data:v,title:c}=n,m=Xr(o,()=>a({params:d,data:v,queryParams:p,fragment:h,routeConfig:u,url:f,outlet:l,title:c}));if(m instanceof ns)throw new Ld(m);i=m}let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),t,s);if(i[0]==="/")throw new Ld(r);return r}applyRedirectCreateUrlTree(t,i,s,n){let o=this.createSegmentGroup(t,i.root,s,n);return new ns(o,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(t,i){let s={};return Object.entries(t).forEach(([n,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);s[n]=i[a]}else s[n]=o}),s}createSegmentGroup(t,i,s,n){let o=this.createSegments(t,i.segments,s,n),r={};return Object.entries(i.children).forEach(([a,p])=>{r[a]=this.createSegmentGroup(t,p,s,n)}),new Qt(o,r)}createSegments(t,i,s,n){return i.map(o=>o.path[0]===":"?this.findPosParam(t,o,n):this.findOrReturn(o,s))}findPosParam(t,i,s){let n=s[i.path.substring(1)];if(!n)throw new Ct(4001,!1);return n}findOrReturn(t,i){let s=0;for(let n of i){if(n.path===t.path)return i.splice(s),n;s++}return t}},xE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lrt(e,t,i,s,n){let o=A2(e,t,i);return o.matched?(s=ert(t,s),Art(s,t,i,n).pipe(Xt(r=>r===!0?o:_({},xE)))):Rt(o)}function A2(e,t,i){if(t.path==="**")return Frt(i);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||i.length>0)?_({},xE):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let n=(t.matcher||Iit)(i,e,t);if(!n)return _({},xE);let o={};Object.entries(n.posParams??{}).forEach(([a,p])=>{o[a]=p.path});let r=n.consumed.length>0?_(_({},o),n.consumed[n.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:n.consumed,remainingSegments:i.slice(n.consumed.length),parameters:r,positionalParamSegments:n.posParams??{}}}function Frt(e){return{matched:!0,parameters:e.length>0?l2(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function n2(e,t,i,s){return i.length>0&&Grt(e,i,s)?{segmentGroup:new Qt(t,Nrt(s,new Qt(i,e.children))),slicedSegments:[]}:i.length===0&&krt(e,i,s)?{segmentGroup:new Qt(e.segments,Brt(e,i,s,e.children)),slicedSegments:i}:{segmentGroup:new Qt(e.segments,e.children),slicedSegments:i}}function Brt(e,t,i,s){let n={};for(let o of i)if(nv(e,t,o)&&!s[jr(o)]){let r=new Qt([],{});n[jr(o)]=r}return _(_({},s),n)}function Nrt(e,t){let i={};i[Lt]=t;for(let s of e)if(s.path===""&&jr(s)!==Lt){let n=new Qt([],{});i[jr(s)]=n}return i}function Grt(e,t,i){return i.some(s=>nv(e,t,s)&&jr(s)!==Lt)}function krt(e,t,i){return i.some(s=>nv(e,t,s))}function nv(e,t,i){return(e.hasChildren()||t.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Vrt(e,t,i){return t.length===0&&!e.children[i]}var yE=class{};function Urt(e,t,i,s,n,o,r="emptyOnly"){return new CE(e,t,i,s,n,r,o).recognize()}var zrt=31,CE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,i,s,n,o,r,a){this.injector=t,this.configLoader=i,this.rootComponentType=s,this.config=n,this.urlTree=o,this.paramsInheritanceStrategy=r,this.urlSerializer=a,this.applyRedirects=new gE(this.urlSerializer,this.urlTree)}noMatchError(t){return new Ct(4002,`'${t.segmentGroup}'`)}recognize(){let t=n2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Xt(({children:i,rootSnapshot:s})=>{let n=new ji(s,i),o=new _p("",n),r=Zit(s,[],this.urlTree.queryParams,this.urlTree.fragment);return r.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(r),{state:o,tree:r}}))}match(t){let i=new Ol([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Lt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Lt,i).pipe(Xt(s=>({children:s,rootSnapshot:i})),Is(s=>{if(s instanceof Ld)return this.urlTree=s.urlTree,this.match(s.urlTree.root);throw s instanceof Dd?this.noMatchError(s):s}))}processSegmentGroup(t,i,s,n,o){return s.segments.length===0&&s.hasChildren()?this.processChildren(t,i,s,o):this.processSegment(t,i,s,s.segments,n,!0,o).pipe(Xt(r=>r instanceof ji?[r]:[]))}processChildren(t,i,s,n){let o=[];for(let r of Object.keys(s.children))r==="primary"?o.unshift(r):o.push(r);return Ue(o).pipe(cl(r=>{let a=s.children[r],p=irt(i,r);return this.processSegmentGroup(t,p,a,r,n)}),xS((r,a)=>(r.push(...a),r)),As(null),gS(),je(r=>{if(r===null)return Rl(s);let a=O2(r);return Wrt(a),Rt(a)}))}processSegment(t,i,s,n,o,r,a){return Ue(i).pipe(cl(p=>this.processSegmentAgainstRoute(p._injector??t,i,p,s,n,o,r,a).pipe(Is(h=>{if(h instanceof Dd)return Rt(null);throw h}))),Qn(p=>!!p),Is(p=>{if(R2(p))return Vrt(s,n,o)?Rt(new yE):Rl(s);throw p}))}processSegmentAgainstRoute(t,i,s,n,o,r,a,p){return jr(s)!==r&&(r===Lt||!nv(n,o,s))?Rl(n):s.redirectTo===void 0?this.matchSegmentAgainstRoute(t,n,s,o,r,p):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,n,i,s,o,r,p):Rl(n)}expandSegmentAgainstRouteUsingRedirect(t,i,s,n,o,r,a){let{matched:p,parameters:h,consumedSegments:u,positionalParamSegments:f,remainingSegments:l}=A2(i,n,o);if(!p)return Rl(i);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zrt&&(this.allowRedirects=!1));let d=new Ol(o,h,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,s2(n),jr(n),n.component??n._loadedComponent??null,n,a2(n)),v=qp(d,a,this.paramsInheritanceStrategy);d.params=Object.freeze(v.params),d.data=Object.freeze(v.data);let c=this.applyRedirects.applyRedirectCommands(u,n.redirectTo,f,d,t);return this.applyRedirects.lineralizeSegments(n,c).pipe(je(m=>this.processSegment(t,s,i,m.concat(l),r,!1,a)))}matchSegmentAgainstRoute(t,i,s,n,o,r){let a=Lrt(i,s,n,t,this.urlSerializer);return s.path==="**"&&(i.children={}),a.pipe(zr(p=>p.matched?(t=s._injector??t,this.getChildConfig(t,s,n).pipe(zr(({routes:h})=>{let u=s._loadedInjector??t,{parameters:f,consumedSegments:l,remainingSegments:d}=p,v=new Ol(l,f,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,s2(s),jr(s),s.component??s._loadedComponent??null,s,a2(s)),c=qp(v,r,this.paramsInheritanceStrategy);v.params=Object.freeze(c.params),v.data=Object.freeze(c.data);let{segmentGroup:m,slicedSegments:g}=n2(i,l,d,h);if(g.length===0&&m.hasChildren())return this.processChildren(u,h,m,v).pipe(Xt(x=>new ji(v,x)));if(h.length===0&&g.length===0)return Rt(new ji(v,[]));let y=jr(s)===o;return this.processSegment(u,h,m,g,y?Lt:o,!0,v).pipe(Xt(x=>new ji(v,x instanceof ji?[x]:[])))}))):Rl(i)))}getChildConfig(t,i,s){return i.children?Rt({routes:i.children,injector:t}):i.loadChildren?i._loadedRoutes!==void 0?Rt({routes:i._loadedRoutes,injector:i._loadedInjector}):Irt(t,i,s,this.urlSerializer).pipe(je(n=>n?this.configLoader.loadChildren(t,i).pipe(oi(o=>{i._loadedRoutes=o.routes,i._loadedInjector=o.injector})):Drt(i))):Rt({routes:[],injector:t})}};function Wrt(e){e.sort((t,i)=>t.value.outlet===Lt?-1:i.value.outlet===Lt?1:t.value.outlet.localeCompare(i.value.outlet))}function Hrt(e){let t=e.value.routeConfig;return t&&t.path===""}function O2(e){let t=[],i=new Set;for(let s of e){if(!Hrt(s)){t.push(s);continue}let n=t.find(o=>s.value.routeConfig===o.value.routeConfig);n!==void 0?(n.children.push(...s.children),i.add(n)):t.push(s)}for(let s of i){let n=O2(s.children);t.push(new ji(s.value,n))}return t.filter(s=>!i.has(s))}function s2(e){return e.data||{}}function a2(e){return e.resolve||{}}function Yrt(e,t,i,s,n,o){return je(r=>Urt(e,t,i,s,r.extractedUrl,n,o).pipe(Xt(({state:a,tree:p})=>At(_({},r),{targetSnapshot:a,urlAfterRedirects:p}))))}function Xrt(e,t){return je(i=>{let{targetSnapshot:s,guards:{canActivateChecks:n}}=i;if(!n.length)return Rt(i);let o=new Set(n.map(p=>p.route)),r=new Set;for(let p of o)if(!r.has(p))for(let h of D2(p))r.add(h);let a=0;return Ue(r).pipe(cl(p=>o.has(p)?$rt(p,s,e,t):(p.data=qp(p,p.parent,e).resolve,Rt(void 0))),oi(()=>a++),pl(1),je(p=>a===r.size?Rt(i):Bi))})}function D2(e){let t=e.children.map(i=>D2(i)).flat();return[e,...t]}function $rt(e,t,i,s){let n=e.routeConfig,o=e._resolve;return n?.title!==void 0&&!E2(n)&&(o[Fd]=n.title),jrt(o,e,t,s).pipe(Xt(r=>(e._resolvedData=r,e.data=qp(e,e.parent,i).resolve,null)))}function jrt(e,t,i,s){let n=QT(e);if(n.length===0)return Rt({});let o={};return Ue(n).pipe(je(r=>Zrt(e[r],t,i,s).pipe(Qn(),oi(a=>{if(a instanceof Od)throw tv(new Fl,a);o[r]=a}))),pl(1),Xt(()=>o),Is(r=>R2(r)?Bi:dl(r)))}function Zrt(e,t,i,s){let n=Bd(t)??s,o=Vl(e,n),r=o.resolve?o.resolve(t,i):Xr(n,()=>o(t,i));return Vs(r)}function KT(e){return zr(t=>{let i=e(t);return i?Ue(i).pipe(Xt(()=>t)):Rt(t)})}var L2=(()=>{class e{buildTitle(i){let s,n=i.root;for(;n!==void 0;)s=this.getResolvedTitleForRoute(n)??s,n=n.children.find(o=>o.outlet===Lt);return s}getResolvedTitleForRoute(i){return i.data[Fd]}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>lt(Krt),providedIn:"root"})}return e})(),Krt=(()=>{class e extends L2{title;constructor(i){super(),this.title=i}updateTitle(i){let s=this.buildTitle(i);s!==void 0&&this.title.setTitle(s)}static \u0275fac=function(s){return new(s||e)(Gt(_D))};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sv=new Tt("",{providedIn:"root",factory:()=>({})}),F2=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275cmp=wl({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(s,n){s&1&&so(0,"router-outlet")},dependencies:[P2],encapsulation:2})}return e})();function EE(e){let t=e.children&&e.children.map(EE),i=t?At(_({},e),{children:t}):_({},e);return!i.component&&!i.loadComponent&&(t||i.loadChildren)&&i.outlet&&i.outlet!==Lt&&(i.component=F2),i}var av=new Tt(""),B2=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=lt(AD);loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Rt(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let s=Vs(i.loadComponent()).pipe(Xt(N2),oi(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),td(()=>{this.componentLoaders.delete(i)})),n=new ul(s,()=>new si).pipe(hl());return this.componentLoaders.set(i,n),n}loadChildren(i,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Rt({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=Jrt(s,this.compiler,i,this.onLoadEndListener).pipe(td(()=>{this.childrenLoaders.delete(s)})),r=new ul(o,()=>new si).pipe(hl());return this.childrenLoaders.set(s,r),r}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Jrt(e,t,i,s){return Vs(e.loadChildren()).pipe(Xt(N2),je(n=>n instanceof DT||Array.isArray(n)?Rt(n):Ue(t.compileModuleAsync(n))),Xt(n=>{s&&s(e);let o,r,a=!1;return Array.isArray(n)?(r=n,a=!0):(o=n.create(i).injector,r=o.get(av,[],{optional:!0,self:!0}).flat()),{routes:r.map(EE),injector:o}}))}function Qrt(e){return e&&typeof e=="object"&&"default"in e}function N2(e){return Qrt(e)?e.default:e}var PE=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>lt(qrt),providedIn:"root"})}return e})(),qrt=(()=>{class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,s){return i}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),G2=new Tt("");var k2=new Tt(""),V2=(()=>{class e{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new si;transitionAbortSubject=new si;configLoader=lt(B2);environmentInjector=lt(vr);destroyRef=lt(Pp);urlSerializer=lt(iv);rootContexts=lt(Nd);location=lt(bl);inputBindingEnabled=lt(rv,{optional:!0})!==null;titleStrategy=lt(L2);options=lt(sv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=lt(PE);createViewTransition=lt(G2,{optional:!0});navigationErrorHandler=lt(k2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Rt(void 0);rootComponentType=null;destroyed=!1;constructor(){let i=n=>this.events.next(new sE(n)),s=n=>this.events.next(new aE(n));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=i,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(i){let s=++this.navigationId;this.transitions?.next(At(_({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:s}))}setupNavigations(i){return this.transitions=new ai(null),this.transitions.pipe(Ur(s=>s!==null),zr(s=>{let n=!1,o=!1;return Rt(s).pipe(zr(r=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Zi.SupersededByNewNavigation),Bi;this.currentTransition=s,this.currentNavigation={id:r.id,initialUrl:r.rawUrl,extractedUrl:r.extractedUrl,targetBrowserUrl:typeof r.extras.browserUrl=="string"?this.urlSerializer.parse(r.extras.browserUrl):r.extras.browserUrl,trigger:r.source,extras:r.extras,previousNavigation:this.lastSuccessfulNavigation?At(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=r.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!a&&p!=="reload"){let h="";return this.events.next(new ks(r.id,this.urlSerializer.serialize(r.rawUrl),h,Zp.IgnoredSameUrlNavigation)),r.resolve(!1),Bi}if(this.urlHandlingStrategy.shouldProcessUrl(r.rawUrl))return Rt(r).pipe(zr(h=>(this.events.next(new Nl(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Bi:Promise.resolve(h))),Yrt(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),oi(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=At(_({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let u=new Kp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(r.currentRawUrl)){let{id:h,extractedUrl:u,source:f,restoredState:l,extras:d}=r,v=new Nl(h,this.urlSerializer.serialize(u),f,l);this.events.next(v);let c=S2(this.rootComponentType).snapshot;return this.currentTransition=s=At(_({},r),{targetSnapshot:c,urlAfterRedirects:u,extras:At(_({},d),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Rt(s)}else{let h="";return this.events.next(new ks(r.id,this.urlSerializer.serialize(r.extractedUrl),h,Zp.IgnoredByUrlHandlingStrategy)),r.resolve(!1),Bi}}),oi(r=>{let a=new eE(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot);this.events.next(a)}),Xt(r=>(this.currentTransition=s=At(_({},r),{guards:urt(r.targetSnapshot,r.currentSnapshot,this.rootContexts)}),s)),Srt(this.environmentInjector,r=>this.events.next(r)),oi(r=>{if(s.guardsResult=r.guardsResult,r.guardsResult&&typeof r.guardsResult!="boolean")throw tv(this.urlSerializer,r.guardsResult);let a=new iE(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects),r.targetSnapshot,!!r.guardsResult);this.events.next(a)}),Ur(r=>r.guardsResult?!0:(this.cancelNavigationTransition(r,"",Zi.GuardRejected),!1)),KT(r=>{if(r.guards.canActivateChecks.length!==0)return Rt(r).pipe(oi(a=>{let p=new rE(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(p)}),zr(a=>{let p=!1;return Rt(a).pipe(Xrt(this.paramsInheritanceStrategy,this.environmentInjector),oi({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(a,"",Zi.NoDataFromResolver)}}))}),oi(a=>{let p=new nE(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(p)}))}),KT(r=>{let a=p=>{let h=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(p.routeConfig).pipe(oi(u=>{p.component=u}),Xt(()=>{})));for(let u of p.children)h.push(...a(u));return h};return Wc(a(r.targetSnapshot.root)).pipe(As(null),Jn(1))}),KT(()=>this.afterPreactivation()),zr(()=>{let{currentSnapshot:r,targetSnapshot:a}=s,p=this.createViewTransition?.(this.environmentInjector,r.root,a.root);return p?Ue(p).pipe(Xt(()=>s)):Rt(s)}),Xt(r=>{let a=srt(i.routeReuseStrategy,r.targetSnapshot,r.currentRouterState);return this.currentTransition=s=At(_({},r),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,s}),oi(()=>{this.events.next(new Id)}),hrt(this.rootContexts,i.routeReuseStrategy,r=>this.events.next(r),this.inputBindingEnabled),Jn(1),oi({next:r=>{n=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gs(r.id,this.urlSerializer.serialize(r.extractedUrl),this.urlSerializer.serialize(r.urlAfterRedirects))),this.titleStrategy?.updateTitle(r.targetRouterState.snapshot),r.resolve(!0)},complete:()=>{n=!0}}),CS(this.transitionAbortSubject.pipe(oi(r=>{throw r}))),td(()=>{!n&&!o&&this.cancelNavigationTransition(s,"",Zi.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Is(r=>{if(this.destroyed)return s.resolve(!1),Bi;if(o=!0,b2(r))this.events.next(new rs(s.id,this.urlSerializer.serialize(s.extractedUrl),r.message,r.cancellationCode)),lrt(r)?this.events.next(new Gl(r.url,r.navigationBehaviorOptions)):s.resolve(!1);else{let a=new Rd(s.id,this.urlSerializer.serialize(s.extractedUrl),r,s.targetSnapshot??void 0);try{let p=Xr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(p instanceof Od){let{message:h,cancellationCode:u}=tv(this.urlSerializer,p);this.events.next(new rs(s.id,this.urlSerializer.serialize(s.extractedUrl),h,u)),this.events.next(new Gl(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(a),r}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return Bi}))}))}cancelNavigationTransition(i,s,n){let o=new rs(i.id,this.urlSerializer.serialize(i.extractedUrl),s,n);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),s=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==s?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _rt(e){return e!==Xp}var tnt=(()=>{class e{static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>lt(ent),providedIn:"root"})}return e})(),SE=class{shouldDetach(t){return!1}store(t,i){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,i){return t.routeConfig===i.routeConfig}},ent=(()=>{class e extends SE{static \u0275fac=(()=>{let i;return function(n){return(i||(i=xT(e)))(n||e)}})();static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),U2=(()=>{class e{urlSerializer=lt(iv);options=lt(sv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=lt(bl);urlHandlingStrategy=lt(PE);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ns;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:i,initialUrl:s,targetBrowserUrl:n}){let o=i!==void 0?this.urlHandlingStrategy.merge(i,s):s,r=n??o;return r instanceof ns?this.urlSerializer.serialize(r):r}commitTransition({targetRouterState:i,finalUrl:s,initialUrl:n}){s&&i?(this.currentUrlTree=s,this.rawUrlTree=this.urlHandlingStrategy.merge(s,n),this.routerState=i):this.rawUrlTree=n}routerState=S2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:i}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i??this.rawUrlTree)}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:()=>lt(int),providedIn:"root"})}return e})(),int=(()=>{class e extends U2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(s=>{s.type==="popstate"&&setTimeout(()=>{i(s.url,s.state,"popstate")})})}handleRouterEvent(i,s){i instanceof Nl?this.updateStateMemento():i instanceof ks?this.commitTransition(s):i instanceof Kp?this.urlUpdateStrategy==="eager"&&(s.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(s),s)):i instanceof Id?(this.commitTransition(s),this.urlUpdateStrategy==="deferred"&&!s.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(s),s)):i instanceof rs&&(i.code===Zi.GuardRejected||i.code===Zi.NoDataFromResolver)?this.restoreHistory(s):i instanceof Rd?this.restoreHistory(s,!0):i instanceof Gs&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,{extras:s,id:n}){let{replaceUrl:o,state:r}=s;if(this.location.isCurrentPathEqualTo(i)||o){let a=this.browserPageId,p=_(_({},r),this.generateNgRouterState(n,a));this.location.replaceState(i,"",p)}else{let a=_(_({},r),this.generateNgRouterState(n,this.browserPageId+1));this.location.go(i,"",a)}}restoreHistory(i,s=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,o=this.currentPageId-n;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===i.finalUrl&&o===0&&(this.resetInternalState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetInternalState(i),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,s){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:s}:{navigationId:i}}static \u0275fac=(()=>{let i;return function(n){return(i||(i=xT(e)))(n||e)}})();static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function z2(e,t){e.events.pipe(Ur(i=>i instanceof Gs||i instanceof rs||i instanceof Rd||i instanceof ks),Xt(i=>i instanceof Gs||i instanceof ks?0:(i instanceof rs?i.code===Zi.Redirect||i.code===Zi.SupersededByNewNavigation:!1)?2:1),Ur(i=>i!==2),Jn(1)).subscribe(()=>{t()})}var rnt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nnt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ME=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=lt(bD);stateManager=lt(U2);options=lt(sv,{optional:!0})||{};pendingTasks=lt(Pl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=lt(V2);urlSerializer=lt(iv);location=lt(bl);urlHandlingStrategy=lt(PE);_events=new si;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=lt(tnt);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=lt(av,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!lt(rv,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(s=>{try{let n=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(n!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof rs&&s.code!==Zi.Redirect&&s.code!==Zi.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof Gs)this.navigated=!0;else if(s instanceof Gl){let r=s.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(s.url,n.currentRawUrl),p=_({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_rt(n.source)},r);this.scheduleNavigation(a,Xp,null,p,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}ant(s)&&this._events.next(s)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,s,n)=>{this.navigateToSyncWithBrowser(i,n,s)})}navigateToSyncWithBrowser(i,s,n){let o={replaceUrl:!0},r=n?.navigationId?n:null;if(n){let p=_({},n);delete p.navigationId,delete p.\u0275routerPageId,Object.keys(p).length!==0&&(o.state=p)}let a=this.parseUrl(i);this.scheduleNavigation(a,s,r,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(EE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,s={}){let{relativeTo:n,queryParams:o,fragment:r,queryParamsHandling:a,preserveFragment:p}=s,h=p?this.currentUrlTree.fragment:r,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let l=n?n.snapshot:this.routerState.snapshot.root;f=g2(l)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),f=this.currentUrlTree.root}return x2(f,i,u,h??null)}navigateByUrl(i,s={skipLocationChange:!1}){let n=Bl(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(o,Xp,null,s)}navigate(i,s={skipLocationChange:!1}){return snt(i),this.navigateByUrl(this.createUrlTree(i,s),s)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,s){let n;if(s===!0?n=_({},rnt):s===!1?n=_({},nnt):n=s,Bl(i))return t2(this.currentUrlTree,i,n);let o=this.parseUrl(i);return t2(this.currentUrlTree,o,n)}removeEmptyProps(i){return Object.entries(i).reduce((s,[n,o])=>(o!=null&&(s[n]=o),s),{})}scheduleNavigation(i,s,n,o,r){if(this.disposed)return Promise.resolve(!1);let a,p,h;r?(a=r.resolve,p=r.reject,h=r.promise):h=new Promise((f,l)=>{a=f,p=l});let u=this.pendingTasks.add();return z2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:a,reject:p,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(f=>Promise.reject(f))}static \u0275fac=function(s){return new(s||e)};static \u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function snt(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Ct(4008,!1)}function ant(e){return!(e instanceof Id)&&!(e instanceof Gl)}var ont=new Tt("");function wE(e,...t){return uT([{provide:av,multi:!0,useValue:e},[],{provide:ho,useFactory:lnt,deps:[ME]},{provide:LT,multi:!0,useFactory:hnt},t.map(i=>i.\u0275providers)])}function lnt(e){return e.routerState.root}function hnt(){let e=lt(Fs);return t=>{let i=e.get(eo);if(t!==i.components[0])return;let s=e.get(ME),n=e.get(unt);e.get(dnt)===1&&s.initialNavigation(),e.get(fnt,null,Bt.Optional)?.setUpPreloading(),e.get(ont,null,Bt.Optional)?.init(),s.resetRootComponentType(i.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var unt=new Tt("",{factory:()=>new si}),dnt=new Tt("",{providedIn:"root",factory:()=>1});var fnt=new Tt("");var W2=[];var H2={providers:[DD({eventCoalescing:!0}),wE(W2)]};var Z2=il(Ul());var Y2=il(Ul()),j=new Y2.Events.EventEmitter;var X2=il(Ul());var ov=class{constructor(t,i){this.isGrounded=!1;this.facingDirection=1;this.lastGroundedTime=0;this.lastJumpTime=0;this.jumpBuffer=0;this.wallBounceCount=0;this.speedMultiplier=1;this.jumpMultiplier=1;this.doubleJumpEnabled=!1;this.doubleJumpUsed=!1;this.momentumKeepingEnabled=!1;this.JUMP_BUFFER_TIME=100;this.COYOTE_TIME=100;this.JUMP_COOLDOWN=150;this.WALL_BOUNCE_COOLDOWN=100;this.body=t,this.gameConfig=i,this.config=i.physics,this.wallConfig=i.walls,j.emit("movement-controller-ready",this),this.setupPhysicsBody()}setupPhysicsBody(){this.body.setCollideWorldBounds(!0),this.body.setDragX(this.config.horizontalDrag),this.body.setMaxVelocity(this.config.maxHorizontalSpeed,1e4),this.body.setBounce(0,0)}update(t){this.updateGroundedState(),this.updateJumpBuffer(t),this.emitMovementState()}moveLeft(){this.body.setAccelerationX(-this.config.horizontalAcceleration),this.facingDirection=-1,j.emit("player-movement-input",{direction:"left",facingDirection:this.facingDirection})}moveRight(){this.body.setAccelerationX(this.config.horizontalAcceleration),this.facingDirection=1,j.emit("player-movement-input",{direction:"right",facingDirection:this.facingDirection})}stopHorizontalMovement(){this.body.setAccelerationX(0),j.emit("player-movement-input",{direction:"stop",facingDirection:this.facingDirection})}requestJump(){this.jumpBuffer<=0&&(this.jumpBuffer=this.JUMP_BUFFER_TIME,this.attemptJump())}attemptJump(){let t=this.canJump(),i=Date.now(),s=i-this.lastJumpTime;return s<this.JUMP_COOLDOWN?(console.log(`\u{1F6AB} Jump blocked by cooldown: ${s}ms < ${this.JUMP_COOLDOWN}ms`),!1):t?(this.performCoupledJump(),this.lastJumpTime=i,this.jumpBuffer=0,!0):!1}performCoupledJump(){let t=this.body.velocity.x,i=this.gameConfig.calculateJumpMetrics(t);this.body.setVelocityY(-i.verticalSpeed),this.body.setVelocityX(i.horizontalSpeedAfterJump),this.isGrounded=!1,console.log(`\u{1F680} Momentum exchange jump: H-speed ${t.toFixed(1)} \u2192 ${i.horizontalSpeedAfterJump.toFixed(1)}, V-speed: ${i.verticalSpeed.toFixed(1)}`),j.emit("player-jumped",At(_({},i),{position:{x:this.body.x,y:this.body.y},timestamp:Date.now()}))}canJump(){let i=Date.now()-this.lastGroundedTime<=this.COYOTE_TIME;return this.isGrounded||i}updateGroundedState(){let t=this.isGrounded;this.isGrounded=this.body.touching.down||this.body.blocked.down,!t&&this.isGrounded?this.onLanding():t&&!this.isGrounded&&this.onTakeoff()}onLanding(){this.lastGroundedTime=Date.now(),this.wallBounceCount=0,this.jumpBuffer>0&&(this.attemptJump(),this.jumpBuffer=0);let t={horizontalSpeed:this.body.velocity.x,verticalSpeed:this.body.velocity.y,position:{x:this.body.x,y:this.body.y},timestamp:Date.now()};j.emit("player-landed",t)}onTakeoff(){j.emit("player-takeoff",{horizontalSpeed:this.body.velocity.x,verticalSpeed:this.body.velocity.y,position:{x:this.body.x,y:this.body.y},timestamp:Date.now()})}updateJumpBuffer(t){this.jumpBuffer>0&&(this.jumpBuffer-=t,this.jumpBuffer<=0&&(this.jumpBuffer=0))}emitMovementState(){let t={isGrounded:this.isGrounded,isMoving:Math.abs(this.body.velocity.x)>10,horizontalSpeed:this.body.velocity.x,verticalSpeed:this.body.velocity.y,facingDirection:this.facingDirection,momentum:Math.abs(this.body.velocity.x),wallBounceCount:this.wallBounceCount};j.emit("movement-state-updated",t)}getMovementState(){return{isGrounded:this.isGrounded,isMoving:Math.abs(this.body.velocity.x)>10,horizontalSpeed:this.body.velocity.x,verticalSpeed:this.body.velocity.y,facingDirection:this.facingDirection,momentum:Math.abs(this.body.velocity.x),wallBounceCount:this.wallBounceCount}}getJumpPreview(){let t=this.body.velocity.x,i=this.gameConfig.calculateJumpMetrics(t);return At(_({},i),{horizontalSpeed:t})}setGrounded(t){this.isGrounded=t,t&&(this.lastGroundedTime=Date.now())}resetWallBounceCount(){this.wallBounceCount=0}getWallBounceCount(){return this.wallBounceCount}incrementWallBounceCount(){this.wallBounceCount++}updateConfiguration(t){this.gameConfig=t,this.config=t.physics,this.wallConfig=t.walls,this.setupPhysicsBody()}reset(){this.isGrounded=!1,this.facingDirection=1,this.lastGroundedTime=0,this.lastJumpTime=0,this.jumpBuffer=0,this.wallBounceCount=0,this.speedMultiplier=1,this.jumpMultiplier=1,this.doubleJumpEnabled=!1,this.doubleJumpUsed=!1,this.momentumKeepingEnabled=!1,this.body.setVelocity(0,0),this.body.setAcceleration(0,0),console.log("\u{1F504} MovementController: Reset complete")}setSpeedMultiplier(t){this.speedMultiplier=t,console.log(`\u{1F3C3} Speed multiplier set to: ${t}`)}setJumpMultiplier(t){this.jumpMultiplier=t,console.log(`\u{1F998} Jump multiplier set to: ${t}`)}setDoubleJumpEnabled(t){this.doubleJumpEnabled=t,t&&(this.doubleJumpUsed=!1),console.log(`\u{1F985} Double jump ${t?"enabled":"disabled"}`)}setMomentumKeepingEnabled(t){this.momentumKeepingEnabled=t,console.log(`\u{1F3AF} Momentum keeping ${t?"enabled":"disabled"}`)}getSpeedMultiplier(){return this.speedMultiplier}getJumpMultiplier(){return this.jumpMultiplier}isDoubleJumpEnabled(){return this.doubleJumpEnabled}isMomentumKeepingEnabled(){return this.momentumKeepingEnabled}getConfiguration(){return _({},this.config)}};var ss=class{constructor(t,i){this.activeTouches=new Map;this.movementDirection="none";this.jumpActive=!1;this.mobileUIEnabled=!0;this.debugMode=!1;this.scene=t,this.config=i.mobile,this.currentInputs={leftPressed:!1,rightPressed:!1,jumpPressed:!1},this.setupTouchZones(),this.setupInputHandlers(),this.createMobileUI()}static isMobileDevice(){let t="ontouchstart"in window||navigator.maxTouchPoints>0,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=window.screen.width<=768||window.screen.height<=1024;return t&&(i||s)}setupTouchZones(){let t=this.scene.scale.width,i=this.scene.scale.height,s=t*this.config.leftZonePercent;this.leftZone={bounds:new Phaser.Geom.Rectangle(0,0,s,i),active:!1,pointers:new Set};let n=t*this.config.rightZonePercent;this.rightZone={bounds:new Phaser.Geom.Rectangle(s,0,n,i),active:!1,pointers:new Set},console.log(`\u{1F3AE} Mobile touch zones setup: Left(${s}x${i}), Right(${n}x${i})`)}setupInputHandlers(){this.scene.input.on("pointerdown",t=>{this.onTouchStart(t)}),this.scene.input.on("pointermove",t=>{this.onTouchMove(t)}),this.scene.input.on("pointerup",t=>{this.onTouchEnd(t)}),this.scene.input.on("pointercancel",t=>{this.onTouchEnd(t)})}onTouchStart(t){let i={x:t.x,y:t.y};this.activeTouches.set(t.id,t),this.leftZone.bounds.contains(i.x,i.y)?this.handleLeftZoneTouch(t,"start"):this.rightZone.bounds.contains(i.x,i.y)&&this.handleRightZoneTouch(t,"start"),this.updateInputState(),this.updateMobileUI(),j.emit("mobile-touch-start",{zone:this.getTouchZone(i),position:i,pointerId:t.id})}onTouchMove(t){if(!this.activeTouches.has(t.id))return;let i={x:t.x,y:t.y};this.leftZone.bounds.contains(i.x,i.y)?(this.rightZone.pointers.has(t.id)&&(this.rightZone.pointers.delete(t.id),this.rightZone.active=this.rightZone.pointers.size>0,this.rightZone.active||(this.jumpActive=!1)),this.handleLeftZoneTouch(t,"move")):this.rightZone.bounds.contains(i.x,i.y)?(this.leftZone.pointers.has(t.id)&&(this.leftZone.pointers.delete(t.id),this.leftZone.active=this.leftZone.pointers.size>0,this.leftZone.active||(this.movementDirection="none")),this.handleRightZoneTouch(t,"start")):(this.leftZone.pointers.has(t.id)&&(this.leftZone.pointers.delete(t.id),this.leftZone.active=this.leftZone.pointers.size>0,this.leftZone.active||(this.movementDirection="none")),this.rightZone.pointers.has(t.id)&&(this.rightZone.pointers.delete(t.id),this.rightZone.active=this.rightZone.pointers.size>0,this.rightZone.active||(this.jumpActive=!1))),this.updateInputState()}onTouchEnd(t){this.activeTouches.delete(t.id),this.leftZone.pointers.has(t.id)&&(this.leftZone.pointers.delete(t.id),this.leftZone.active=this.leftZone.pointers.size>0,this.leftZone.active||(this.movementDirection="none")),this.rightZone.pointers.has(t.id)&&(this.rightZone.pointers.delete(t.id),this.rightZone.active=this.rightZone.pointers.size>0,this.rightZone.active||(this.jumpActive=!1)),this.updateInputState(),this.updateMobileUI(),j.emit("mobile-touch-end",{zone:this.getTouchZone({x:t.x,y:t.y}),pointerId:t.id})}handleLeftZoneTouch(t,i){this.leftZone.pointers.add(t.id),this.leftZone.active=this.leftZone.pointers.size>0;let s=this.leftZone.bounds.centerX,n=t.x;n<s-this.config.deadZoneRadius?this.movementDirection="left":n>s+this.config.deadZoneRadius?this.movementDirection="right":this.movementDirection="none",i==="start"&&console.log(`\u{1F448} Left zone touch: ${this.movementDirection} at (${n.toFixed(0)}, center: ${s.toFixed(0)}) [${this.leftZone.pointers.size} pointers]`)}handleRightZoneTouch(t,i){this.rightZone.pointers.add(t.id),this.rightZone.active=this.rightZone.pointers.size>0,this.jumpActive=!0,console.log(`\u{1F446} Right zone touch: jump activated [${this.rightZone.pointers.size} pointers]`)}updateInputState(){this.currentInputs.leftPressed=this.movementDirection==="left",this.currentInputs.rightPressed=this.movementDirection==="right",this.currentInputs.jumpPressed=this.jumpActive}getTouchZone(t){return this.leftZone.bounds.contains(t.x,t.y)?"left":this.rightZone.bounds.contains(t.x,t.y)?"right":"none"}createMobileUI(){this.mobileUIEnabled&&(this.leftZoneGraphics=this.scene.add.graphics(),this.rightZoneGraphics=this.scene.add.graphics(),this.leftZoneGraphics.setScrollFactor(0),this.rightZoneGraphics.setScrollFactor(0),this.leftZoneGraphics.setDepth(999),this.rightZoneGraphics.setDepth(999),this.updateMobileUI())}updateMobileUI(){if(!this.mobileUIEnabled||!this.leftZoneGraphics||!this.rightZoneGraphics)return;this.leftZoneGraphics.clear(),this.rightZoneGraphics.clear();let t=.08,i=.2,s=this.leftZone.active?i:t,n=this.movementDirection==="left"?5025616:this.movementDirection==="right"?2201331:10395294;this.leftZoneGraphics.fillStyle(n,s),this.leftZoneGraphics.fillRectShape(this.leftZone.bounds),this.leftZoneGraphics.lineStyle(1,n,.3),this.leftZoneGraphics.strokeRectShape(this.leftZone.bounds);let o=this.rightZone.active?i:t,r=this.jumpActive?16733986:10395294;this.rightZoneGraphics.fillStyle(r,o),this.rightZoneGraphics.fillRectShape(this.rightZone.bounds),this.rightZoneGraphics.lineStyle(1,r,.3),this.rightZoneGraphics.strokeRectShape(this.rightZone.bounds);let a=this.leftZone.bounds.centerX,p=this.leftZone.bounds.bottom-60,h=this.rightZone.bounds.centerX,u=this.rightZone.bounds.bottom-60;this.leftZoneGraphics.fillStyle(16777215,.4),this.leftZoneGraphics.fillTriangle(a-30,p,a-10,p-10,a-10,p+10),this.leftZoneGraphics.fillTriangle(a+30,p,a+10,p-10,a+10,p+10),this.rightZoneGraphics.fillStyle(16777215,.4),this.rightZoneGraphics.fillTriangle(h,u-15,h-12,u+5,h+12,u+5),this.debugMode&&this.addDebugDetails()}addDebugDetails(){if(!this.leftZoneGraphics||!this.rightZoneGraphics)return;let t=this.leftZone.bounds.centerX,i=this.leftZone.bounds.centerY,s=this.config.deadZoneRadius;this.leftZoneGraphics.lineStyle(2,16777215,.5),this.leftZoneGraphics.strokeCircle(t,i,s),this.activeTouches.forEach((r,a)=>{let p=this.leftZone.bounds.contains(r.x,r.y),h=this.rightZone.bounds.contains(r.x,r.y),u=this.leftZoneGraphics,f=16776960;p?(u=this.leftZoneGraphics,f=65280):h&&(u=this.rightZoneGraphics,f=16711680),u.fillStyle(f,.8),u.fillCircle(r.x,r.y,12),u.lineStyle(2,0,1),u.strokeCircle(r.x,r.y,12),u.fillStyle(0,1),u.fillCircle(r.x,r.y,6)});let n=this.leftZone.pointers.size,o=this.rightZone.pointers.size;n>0&&(this.leftZoneGraphics.fillStyle(16777215,.8),this.leftZoneGraphics.fillRect(10,10,80,20),this.leftZoneGraphics.fillStyle(0,1)),o>0&&(this.rightZoneGraphics.fillStyle(16777215,.8),this.rightZoneGraphics.fillRect(this.rightZone.bounds.right-90,10,80,20),this.rightZoneGraphics.fillStyle(0,1))}getInputState(){return _({},this.currentInputs)}setDebugMode(t){this.debugMode=t,this.updateMobileUI()}setMobileUIEnabled(t){this.mobileUIEnabled=t,t&&!this.leftZoneGraphics?this.createMobileUI():!t&&this.leftZoneGraphics&&(this.leftZoneGraphics.destroy(),this.rightZoneGraphics?.destroy(),this.leftZoneGraphics=void 0,this.rightZoneGraphics=void 0)}updateConfiguration(t){this.config=t.mobile,this.setupTouchZones(),this.updateMobileUI()}destroy(){this.scene.input.off("pointerdown"),this.scene.input.off("pointermove"),this.scene.input.off("pointerup"),this.scene.input.off("pointercancel"),this.leftZoneGraphics?.destroy(),this.rightZoneGraphics?.destroy(),this.activeTouches.clear(),this.leftZone.pointers.clear(),this.rightZone.pointers.clear(),console.log("\u{1F3AE} MobileInputController destroyed")}};var zl=class extends X2.Physics.Arcade.Sprite{constructor(i,s,n,o){super(i,s,n,"character");this.lastJumpVerticalSpeed=0;this.itemKeysPreviousState={Q:!1,E:!1};this.isMobileDevice=!1;this.mobileInputController=null;this.demoMode=!1;this.aiController=null;this.WALK_ANIMATION_FRAME_RATE=8;this.gameConfig=o,i.add.existing(this),i.physics.add.existing(this),this.setupPhysics(),this.setupMovementController(),this.setupInput(),this.setupMobileInput(),this.setupAnimations(),this.setupEventListeners(),this.setTexture("character","character_beige_idle");let r=this.gameConfig.player;this.setScale(r.scale)}setupPhysics(){let i=this.body;i.setCollideWorldBounds(!0),i.world.setBounds(0,-1e6,this.scene.scale.width,2e6);let s=this.gameConfig.player,n=s.baseBodyWidth*s.scale,o=s.baseBodyHeight*s.scale,r=s.baseOffsetX+s.baseBodyWidth*(1-s.scale)/2,a=s.baseOffsetY+s.baseBodyHeight*(1-s.scale)/2;i.setSize(n,o),i.setOffset(r,a)}setupMovementController(){let i=this.body;this.movementController=new ov(i,this.gameConfig)}setupInput(){this.cursors=this.scene.input.keyboard.createCursorKeys(),this.wasd=this.scene.input.keyboard.addKeys("W,S,A,D,SPACE,Q,E")}setupMobileInput(){this.isMobileDevice=ss.isMobileDevice(),this.isMobileDevice?(this.mobileInputController=new ss(this.scene,this.gameConfig),console.log("\u{1F4F1} Mobile device detected - mobile controls enabled"),this.gameConfig.debug.enabled&&this.mobileInputController.setDebugMode(!0)):console.log("\u{1F5A5}\uFE0F Desktop device detected - keyboard controls active")}setupEventListeners(){j.on("player-jumped",this.onJump.bind(this)),j.on("player-movement-input",this.onMovementInput.bind(this)),j.on("player-wall-bounce",this.onWallBounce.bind(this))}setupAnimations(){this.scene.anims.exists("player-idle")||this.scene.anims.create({key:"player-idle",frames:[{key:"character",frame:"character_beige_idle"}],frameRate:1,repeat:-1}),this.scene.anims.exists("player-walk")||this.scene.anims.create({key:"player-walk",frames:[{key:"character",frame:"character_beige_walk_a"},{key:"character",frame:"character_beige_walk_b"}],frameRate:this.WALK_ANIMATION_FRAME_RATE,repeat:-1}),this.scene.anims.exists("player-jump")||this.scene.anims.create({key:"player-jump",frames:[{key:"character",frame:"character_beige_jump"}],frameRate:1,repeat:-1}),this.play("player-idle")}update(i){this.movementController.update(i),this.handleInput(),this.updateAnimation(),this.updateRotationEffect(i)}handleInput(){let i,s,n,o,r;if(this.demoMode&&this.aiController){let a=this.aiController.update(16.67);i=a.left,s=a.right,n=a.jump,o=!1,r=!1}else if(this.isMobileDevice&&this.mobileInputController){let a=this.mobileInputController.getInputState();i=a.leftPressed,s=a.rightPressed,n=a.jumpPressed,o=!1,r=!1}else i=this.cursors.left?.isDown||this.wasd.A.isDown,s=this.cursors.right?.isDown||this.wasd.D.isDown,n=this.cursors.up?.isDown||this.wasd.W.isDown||this.wasd.SPACE.isDown,o=this.wasd.Q.isDown,r=this.wasd.E.isDown;i?this.movementController.moveLeft():s?this.movementController.moveRight():this.movementController.stopHorizontalMovement(),n&&this.movementController.requestJump(),o&&!this.itemKeysPreviousState.Q&&this.handleItemUse("Q"),r&&!this.itemKeysPreviousState.E&&this.handleItemUse("E"),this.itemKeysPreviousState.Q=o,this.itemKeysPreviousState.E=r}updateAnimation(){let i=this.movementController.getMovementState();i.isGrounded?i.isMoving?this.play("player-walk",!0):this.play("player-idle",!0):this.play("player-jump",!0)}updateRotationEffect(i){let s=this.movementController.getMovementState(),n=this.lastJumpVerticalSpeed,o=400,r=1200,a=150;if(!s.isGrounded&&n>o){let p=Math.min((n-o)/(r-o),1),u=Math.pow(p,1.5)*35,f=s.facingDirection;this.rotation+=u*f*(i/1e3),console.log(`\u{1F32A}\uFE0F Jump-based rotation: initial=${n.toFixed(0)}, facing=${f>0?"right":"left"}, rotation=${(this.rotation*180/Math.PI).toFixed(0)}\xB0`);let l=Math.abs(s.horizontalSpeed);l>=a&&u>=5&&j.emit("player-spinning",{rotationSpeed:u,horizontalSpeed:l,playerPosition:{x:this.x,y:this.y}})}else j.emit("player-spinning-stop"),Math.abs(this.rotation)>.01?this.rotation=Phaser.Math.Angle.RotateTo(this.rotation,0,.15):(this.rotation=0,s.isGrounded&&(this.lastJumpVerticalSpeed=0))}onJump(i){this.lastJumpVerticalSpeed=i.verticalSpeed,console.log(`\u{1F680} Jump captured: initial v-speed=${this.lastJumpVerticalSpeed.toFixed(0)} for rotation`)}onWallBounce(i){let s=Math.abs(i.newSpeed||0);this.lastJumpVerticalSpeed=s,console.log(`\u{1F3C0} Wall bounce captured: redirected speed=${s.toFixed(0)} for rotation`)}onMovementInput(i){this.setFlipX(i.facingDirection===-1)}handleItemUse(i){j.emit("player-use-item",{slotKey:i}),console.log(`\u{1F3AE} Player requested to use item in slot ${i}`)}setGrounded(i){this.movementController.setGrounded(i)}getMovementState(){return this.movementController.getMovementState()}getJumpPreview(){return this.movementController.getJumpPreview()}updateConfiguration(i){this.gameConfig=i,this.movementController.updateConfiguration(i),this.mobileInputController&&(this.mobileInputController.updateConfiguration(i),this.mobileInputController.setDebugMode(i.debug.enabled));let s=i.player;this.setScale(s.scale);let n=this.body,o=s.baseBodyWidth*s.scale,r=s.baseBodyHeight*s.scale,a=s.baseOffsetX+s.baseBodyWidth*(1-s.scale)/2,p=s.baseOffsetY+s.baseBodyHeight*(1-s.scale)/2;n.setSize(o,r),n.setOffset(a,p)}getMovementController(){return this.movementController}setDemoMode(i){this.demoMode=i,console.log(`\u{1F916} Player demo mode ${i?"enabled":"disabled"}`)}setAIController(i){this.aiController=i,console.log("\u{1F916} AI controller connected to player")}isDemoMode(){return this.demoMode}isMobile(){return this.isMobileDevice}toggleMobileDebugMode(){if(this.mobileInputController){let i=this.gameConfig.debug.enabled;this.mobileInputController.setDebugMode(!i),console.log(`\u{1F4F1} Mobile debug mode ${i?"disabled":"enabled"}`)}}destroy(){this.mobileInputController&&(this.mobileInputController.destroy(),this.mobileInputController=null),j.off("player-jumped",this.onJump.bind(this)),j.off("player-movement-input",this.onMovementInput.bind(this)),j.off("player-wall-bounce",this.onWallBounce.bind(this)),super.destroy()}};var Wl=class{constructor(t,i){this.currentBiome=null;this.platformGenerationEnabled=!0;this.generatedPlatforms=new Map;this.highestGeneratedY=0;this.nextPlatformY=0;this.platformIdCounter=0;this.platformCount=0;this.checkpoints=[];this.CHECKPOINT_INTERVAL=100;this.PRE_CHECKPOINT_DIFFICULTY_ZONE=10;this.currentMode="tight";this.modeCounter=0;this.modeDirection=1;this.processors=[];this.GENERATION_DISTANCE=1500;this.CLEANUP_DISTANCE=1e3;this.scene=t,this.platforms=t.physics.add.staticGroup(),this.config=i.platforms,this.boundTogglePlatformGeneration=this.togglePlatformGeneration.bind(this),this.boundOnCameraStateUpdated=this.onCameraStateUpdated.bind(this),this.boundOnBiomeChanged=this.onBiomeChanged.bind(this),this.initializePlatformGenerationSystem(),this.setupEventListeners()}initializePlatformGenerationSystem(){this.modeSwitchInterval=this.config.generation.modeSwitchInterval;let t=["tight","snake","scattered","staircase"];this.currentMode=t[Math.floor(Math.random()*t.length)],this.registerProcessor({name:"PlatformDeletionProcessor",priority:100,process:this.processPlatformDeletion.bind(this)}),console.log(`\u{1F3AE} Platform generation initialized with mode: ${this.currentMode}, switching every ${this.modeSwitchInterval} platforms`)}registerProcessor(t){this.processors.push(t),this.processors.sort((i,s)=>i.priority-s.priority)}setupEventListeners(){j.on("debug-toggle-platforms",this.boundTogglePlatformGeneration),j.on("camera-state-updated",this.boundOnCameraStateUpdated),j.on("biome-changed",this.boundOnBiomeChanged)}togglePlatformGeneration(){this.platformGenerationEnabled=!this.platformGenerationEnabled,this.platformGenerationEnabled?(this.generatedPlatforms.forEach((t,i)=>{t.group.setVisible(!0)}),console.log("\u2705 Platform generation ENABLED - normal gameplay mode")):(this.generatedPlatforms.forEach((t,i)=>{t.isCheckpoint||t.group.setVisible(!1)}),console.log("\u{1F6AB} Platform generation DISABLED - wall bounce testing mode"))}createPlatform(t,i,s){if(!this.scene.physics||!this.scene.physics.add)return console.warn("PlatformManager: Physics system not ready during createPlatform"),{group:null,platformId:`platform_${Date.now()}`};(!this.platforms||!this.platforms.children)&&(console.warn("PlatformManager: Main platforms group corrupted, reinitializing"),this.platforms=this.scene.physics.add.staticGroup());let n=64,o=Math.max(1,Math.floor((s-2*n)/n)),r=(o+2)*n,a=t-r/2,p=this.scene.physics.add.staticGroup();if(!p||!p.children)return console.error("PlatformManager: Failed to create platform group"),{group:null,platformId:`platform_${Date.now()}`};let h=this.getCurrentPlatformTextures();p.create(a,i,"tiles",h.left).setOrigin(0,.5).refreshBody();for(let u=0;u<o;u++)p.create(a+n+u*n,i,"tiles",h.middle).setOrigin(0,.5).refreshBody();p.create(a+n+o*n,i,"tiles",h.right).setOrigin(0,.5).refreshBody();try{this.platforms.children&&p.children?this.platforms.addMultiple(p.children.entries):console.warn("PlatformManager: Cannot add platform children - children property undefined")}catch(u){console.error("PlatformManager: Error adding platform to main group:",u)}return j.emit("platform-created",{group:p,x:t,y:i,width:r,tileWidth:n}),{group:p,platformId:`platform_${Date.now()}`}}createGroundPlatform(){let t=this.scene.scale.height-32,i=this.scene.scale.width,s=this.scene.scale.width/2;this.highestGeneratedY=t,this.nextPlatformY=t-this.config.verticalSpacing.min;let n=this.createPlatform(s,t,i);return this.trackPlatform(n.group,n.platformId,t,i,!0),n}getPlatforms(){return this.platforms}destroyPlatform(t){t.destroy()}clear(){this.platforms.clear(!0,!0),this.generatedPlatforms.clear(),this.highestGeneratedY=0,this.nextPlatformY=0,this.platformIdCounter=0,this.platformCount=0,this.checkpoints=[],this.modeCounter=0,this.modeDirection=1,this.processors.length=0;let t=["tight","snake","scattered","staircase"];this.currentMode=t[Math.floor(Math.random()*t.length)],this.initializePlatformGenerationSystem(),console.log("\u{1F504} PlatformManager: Cleared platforms and reset all internal state")}reset(){console.log("\u{1F504} PlatformManager: Full reset initiated"),this.clear(),console.log("\u2705 PlatformManager: Reset complete")}onCameraStateUpdated(t){this.updateInfinitePlatforms(t.scrollY)}onBiomeChanged(t){this.currentBiome=t.currentBiome,console.log(`\u{1F3D7}\uFE0F PlatformManager: Biome changed to ${this.currentBiome?.name}`)}getCurrentPlatformTextures(){return this.currentBiome?this.currentBiome.platformTextures:{left:"terrain_grass_cloud_left",middle:"terrain_grass_cloud_middle",right:"terrain_grass_cloud_right"}}updateInfinitePlatforms(t){this.generatePlatformsAhead(t),this.cleanupPlatformsBehind(t)}generatePlatformsAhead(t){if(!this.platformGenerationEnabled)return;let i=t-this.GENERATION_DISTANCE;for(;this.nextPlatformY>i;)this.generateNextPlatform()}generateNextPlatform(){this.platformCount++,this.modeCounter++,this.modeCounter>=this.modeSwitchInterval&&(this.switchGenerationMode(),this.modeCounter=0);let t=this.platformCount%this.CHECKPOINT_INTERVAL===0,i=this.CHECKPOINT_INTERVAL-this.platformCount%this.CHECKPOINT_INTERVAL,s=i<=this.PRE_CHECKPOINT_DIFFICULTY_ZONE&&i>0;t?(this.generateSinglePlatform(this.scene.scale.width,this.scene.scale.width/2,!0),console.log(`\u{1F3C1} Generated checkpoint platform #${this.platformCount}`)):this.generatePlatformsWithMode(s,i),this.highestGeneratedY=this.nextPlatformY,this.nextPlatformY-=this.generateVerticalSpacing()}switchGenerationMode(){let t=["tight","snake","scattered","staircase"],i=t.indexOf(this.currentMode),s;do s=t[Math.floor(Math.random()*t.length)];while(s===this.currentMode&&t.length>1);this.currentMode=s,this.modeDirection=Math.random()<.5?-1:1,console.log(`\u{1F504} Switched to ${this.currentMode} generation mode`),j.emit("generation-mode-changed",{newMode:this.currentMode,platformCount:this.platformCount,height:Math.abs(this.nextPlatformY)})}generatePlatformsWithMode(t,i){let s=Math.abs(this.nextPlatformY),n={y:this.nextPlatformY,height:s,mode:this.currentMode,platformCount:this.platformCount,isCheckpoint:!1,isInDifficultyZone:t,platformsUntilCheckpoint:i},o=[];switch(this.currentMode){case"tight":o=this.generateTightMode(n);break;case"snake":o=this.generateSnakeMode(n);break;case"scattered":o=this.generateScatteredMode(n);break;case"staircase":o=this.generateStaircaseMode(n);break}for(let r of this.processors)o=r.process(o,n);this.createPlatformsFromGenerated(o)}generateTightMode(t){let i=this.getHeightDifficultyMultiplier(t.height),s=64,n=t.isInDifficultyZone?1:2,o=Math.max(1,Math.floor(4-i)),r=Phaser.Math.Between(n,Math.max(n,o)),a=r*s,p=this.scene.scale.width,h=100,f=Math.max(80,150-i*40),l=[],d=Math.random()<.6?1:2;for(let v=0;v<d;v++){let c=a/2,m=h+c,g=p-h-c,y;if(d===1)y=Phaser.Math.Between(m,g);else{let x=p/2,C=(v===0?-1:1)*(f/2);y=Math.max(m,Math.min(g,x+C))}l.push({x:y,y:t.y,width:a,shouldGenerate:!0,metadata:{tiles:r,mode:"tight",platformIndex:v}})}return l}generateSnakeMode(t){let i=this.getHeightDifficultyMultiplier(t.height),s=64,n=t.isInDifficultyZone?Phaser.Math.Between(1,3):Phaser.Math.Between(3,Math.max(3,6-Math.floor(i))),o=n*s,r=this.scene.scale.width,a=100,p=o/2,h=(r-2*a)/2,u=a+h/2,f=r-a-h/2,l=this.modeCounter%2===0==(this.modeDirection===1),d=l?u:f,v=Math.min(50,h/4),c=d+Phaser.Math.Between(-v,v);return[{x:Math.max(a+p,Math.min(r-a-p,c)),y:t.y,width:o,shouldGenerate:!0,metadata:{tiles:n,mode:"snake",side:l?"left":"right"}}]}generateScatteredMode(t){let i=this.getHeightDifficultyMultiplier(t.height),s=64,n=t.isInDifficultyZone?2:4,o=Math.max(n,Math.floor(8-i)),r=Phaser.Math.Between(n,o),a=r*s,p=this.scene.scale.width,h=120,u=a/2,f=h+u,l=p-h-u;return[{x:Phaser.Math.Between(f,l),y:t.y,width:a,shouldGenerate:!0,metadata:{tiles:r,mode:"scattered",requiresMomentum:!0}}]}generateStaircaseMode(t){let i=this.getHeightDifficultyMultiplier(t.height),s=64,n=t.isInDifficultyZone?Phaser.Math.Between(1,2):Phaser.Math.Between(2,Math.max(2,5-Math.floor(i))),o=n*s,r=this.scene.scale.width,a=100,p=this.modeCounter%4<2,h=p?this.modeDirection:-this.modeDirection,u=r/2,f=r/2-a-o/2,l=Math.min(f/3,80),d=this.modeCounter%4*h,v=u+d*l;return[{x:Math.max(a+o/2,Math.min(r-a-o/2,v)),y:t.y,width:o,shouldGenerate:!0,metadata:{tiles:n,mode:"staircase",step:d,ascending:p}}]}getHeightDifficultyMultiplier(t){let s=t/1e3*this.config.generation.heightDifficultyScaling;return Math.min(3,s)}processPlatformDeletion(t,i){let s=this.config.generation,n=0;if(i.height>s.deletionStartHeight){let a=(i.height-s.deletionStartHeight)/2500;n=Math.min(s.maxDeletionChance,a*s.maxDeletionChance),n*=s.heightDifficultyScaling,i.isInDifficultyZone&&(n*=.5)}let o=t.map(a=>Math.random()<n?(console.log(`\u{1F5D1}\uFE0F Deleted platform at height ${Math.abs(i.y).toFixed(0)}m (${(n*100).toFixed(1)}% chance)`),At(_({},a),{shouldGenerate:!1})):a),r=o.filter(a=>a.shouldGenerate);if(r.length===0&&t.length>0){let a=Math.floor(Math.random()*o.length);return o[a].shouldGenerate=!0,console.log(`\u{1F6E1}\uFE0F Force-preserved platform at height ${Math.abs(i.y).toFixed(0)}m to prevent gap`),o.filter(p=>p.shouldGenerate)}return r}createPlatformsFromGenerated(t){t.forEach(i=>{if(i.shouldGenerate){let s=this.createPlatform(i.x,i.y,i.width);this.trackPlatform(s.group,s.platformId,i.y,i.width,!1),s.group&&j.emit("platform-generated",{id:s.platformId,x:i.x,y:i.y,width:i.width,group:s.group,mode:i.metadata?.mode,metadata:i.metadata})}})}generateSinglePlatform(t,i,s){let n=this.createPlatform(i,this.nextPlatformY,t);this.trackPlatform(n.group,n.platformId,this.nextPlatformY,t,s),n.group&&j.emit("platform-generated",{id:n.platformId,x:i,y:this.nextPlatformY,width:t,group:n.group,isCheckpoint:s})}generateVerticalSpacing(){return Phaser.Math.Between(this.config.verticalSpacing.min,this.config.verticalSpacing.max)}cleanupPlatformsBehind(t){let i=t+this.CLEANUP_DISTANCE,s=null;for(let o of this.checkpoints)if(o.y>i){s=o;break}if(!s)return;let n=[];this.generatedPlatforms.forEach((o,r)=>{o.y>s.y&&n.push(r)}),n.forEach(o=>{let r=this.generatedPlatforms.get(o);if(r&&(j.emit("platform-cleaned-up",{id:o,y:r.y,group:r.group}),r.group.children.entries.forEach(a=>{this.platforms.remove(a,!0,!0)}),r.group.destroy(),this.generatedPlatforms.delete(o),r.isCheckpoint)){let a=this.checkpoints.findIndex(p=>p.id===o);a!==-1&&(this.checkpoints.splice(a,1),console.log(`\u{1F9F9} Checkpoint cleaned up at height ${Math.abs(r.y).toFixed(0)}m`))}})}trackPlatform(t,i,s,n,o=!1){let r={group:t,id:i,y:s,width:n,created:Date.now(),isCheckpoint:o};this.generatedPlatforms.set(i,r),o&&(this.checkpoints.push(r),console.log(`\u{1F3C1} Checkpoint created at height ${Math.abs(s).toFixed(0)}m`))}updateConfiguration(t){this.config=t.platforms,this.modeSwitchInterval=this.config.generation.modeSwitchInterval}getPlatformCount(){return this.generatedPlatforms.size}getHighestPlatformY(){return this.highestGeneratedY}destroy(){j.off("camera-state-updated",this.boundOnCameraStateUpdated),j.off("debug-toggle-platforms",this.boundTogglePlatformGeneration),j.off("biome-changed",this.boundOnBiomeChanged),this.generatedPlatforms.forEach((t,i)=>{try{t.group&&t.group.children&&(t.group.children.entries.forEach(s=>{this.platforms&&this.platforms.children&&this.platforms.remove(s,!0,!0)}),t.group.destroy())}catch(s){console.warn(`Failed to destroy platform ${i}:`,s)}}),this.generatedPlatforms.clear(),this.checkpoints.length=0,this.modeCounter=0,this.modeDirection=1,this.processors.length=0,this.platforms&&this.platforms.children&&this.platforms.clear(!0,!0)}};var Us={physics:{baseJumpSpeed:200,momentumCouplingFactor:2,jumpScalingExponent:1,horizontalRetentionFactor:.6,gravity:800,horizontalAcceleration:600,maxHorizontalSpeed:1350,horizontalDrag:300},platforms:{minPlatformGap:120,maxPlatformGap:320,platformWidth:200,platformHeightVariance:80,verticalSpacing:{min:100,max:160},generation:{modeSwitchInterval:15,heightDifficultyScaling:1,deletionStartHeight:500,maxDeletionChance:.5}},combos:{comboWindowTime:2e3,baseScore:10,comboMultiplier:1.5,exponentialScaling:1.2},camera:{cameraFollowSmoothing:.1},deathLine:{riseSpeed:50,startDelay:3e4,minHeight:300,warningDistance:300,visualOpacity:.7},walls:{enabled:!0,baseBounceEfficiency:.95,maxBounceEfficiency:1.3,minSpeedForBounce:20,segmentHeight:640,tileHeight:64,generateDistance:3e3,cleanupDistance:1500},player:{scale:.7,baseBodyWidth:108,baseBodyHeight:128,baseOffsetX:10,baseOffsetY:14},mobile:{leftZonePercent:.6,rightZonePercent:.4,deadZoneRadius:40,touchSensitivity:1,hapticFeedback:!0,extendedCoyoteTime:200,extendedJumpBuffer:150,collisionTolerance:5},debug:{enabled:!1}},Hl=class e{constructor(t){this.config=this.mergeConfigs(Us,t)}static getPreset(t){return{beginner:{walls:At(_({},Us.walls),{baseBounceEfficiency:.9,maxBounceEfficiency:1.15,minSpeedForBounce:30}),physics:At(_({},Us.physics),{momentumCouplingFactor:.4,jumpScalingExponent:1.3,horizontalRetentionFactor:.2,maxHorizontalSpeed:600})},classic:Us,expert:{walls:At(_({},Us.walls),{baseBounceEfficiency:.75,maxBounceEfficiency:1.3,minSpeedForBounce:60}),physics:At(_({},Us.physics),{momentumCouplingFactor:.25,jumpScalingExponent:1.7,horizontalRetentionFactor:.05,maxHorizontalSpeed:800})},speedrun:{walls:At(_({},Us.walls),{baseBounceEfficiency:.8,maxBounceEfficiency:1.4,minSpeedForBounce:50}),physics:At(_({},Us.physics),{momentumCouplingFactor:.35,jumpScalingExponent:1.8,horizontalRetentionFactor:0,maxHorizontalSpeed:1e3,gravity:900})}}[t]}applyPreset(t){let i=e.getPreset(t);this.config=this.mergeConfigs(this.config,i),console.log(`\u{1F3AE} Applied ${t} physics preset`)}get physics(){return _({},this.config.physics)}get platforms(){return _({},this.config.platforms)}get combos(){return _({},this.config.combos)}get camera(){return _({},this.config.camera)}get deathLine(){return _({},this.config.deathLine)}get walls(){return _({},this.config.walls)}get player(){return _({},this.config.player)}get mobile(){return _({},this.config.mobile)}get debug(){return _({},this.config.debug)}updatePhysics(t){this.config.physics=_(_({},this.config.physics),t)}updatePlatforms(t){this.config.platforms=_(_({},this.config.platforms),t)}updateCombos(t){this.config.combos=_(_({},this.config.combos),t)}updateCamera(t){this.config.camera=_(_({},this.config.camera),t)}updateWalls(t){this.config.walls=_(_({},this.config.walls),t)}updatePlayer(t){this.config.player=_(_({},this.config.player),t)}updateMobile(t){this.config.mobile=_(_({},this.config.mobile),t)}updateDebug(t){this.config.debug=_(_({},this.config.debug),t)}calculateJumpMetrics(t){let{baseJumpSpeed:i,momentumCouplingFactor:s,jumpScalingExponent:n,horizontalRetentionFactor:o,gravity:r}=this.config.physics,a=Math.abs(t),p=this.config.physics.maxHorizontalSpeed,h=Math.min(a/p,1),u=1,l=u+(1.25-u)*h,d=a*l,v=i+d,c=t*o,m=2*v/r,g=v*v/(2*r),y=Math.abs(c)*m;return{verticalSpeed:v,flightTime:m,maxHeight:g,horizontalRange:y,momentumBoost:d,horizontalSpeedAfterJump:c}}isGapReachable(t,i){let{horizontalRange:s}=this.calculateJumpMetrics(i);return s>=t}getRequiredSpeedForGap(t){let{baseJumpSpeed:i,momentumCouplingFactor:s,gravity:n}=this.config.physics;if(s===0){let h=2*i/n;return t/h}let o=2*s/n,r=2*i/n,a=-t,p=r*r-4*o*a;return p<0?1/0:(-r+Math.sqrt(p))/(2*o)}mergeConfigs(t,i){return i?{physics:_(_({},t.physics),i.physics),platforms:_(_({},t.platforms),i.platforms),combos:_(_({},t.combos),i.combos),camera:_(_({},t.camera),i.camera),deathLine:_(_({},t.deathLine),i.deathLine),walls:_(_({},t.walls),i.walls),player:_(_({},t.player),i.player),mobile:_(_({},t.mobile),i.mobile),debug:_(_({},t.debug),i.debug)}:_({},t)}};var Yl=class{constructor(t,i){this.platformSpringsActive=!1;this.springsEndTime=0;this.scene=t,this.player=i,this.initializePlatforms(),this.setupCollision(),this.setupEventListeners()}initializePlatforms(){this.scene.physics&&this.scene.physics.add?(this.platforms=this.scene.physics.add.staticGroup(),this.platforms.children||(console.warn("OneWayPlatform: Platform group created but children property is undefined"),this.platforms=null)):console.warn("OneWayPlatform: Physics system not ready, deferring platform group creation")}setupCollision(){if(!this.platforms||!this.platforms.children){console.warn("OneWayPlatform: Deferring collision setup - platforms group not ready");return}if(!this.scene.physics||!this.scene.physics.add){console.warn("OneWayPlatform: Physics system not ready, cannot setup collisions");return}if(!this.player||!this.player.body){console.warn("OneWayPlatform: Player not ready, cannot setup collisions");return}try{this.scene.physics.add.overlap(this.player,this.platforms,(t,i)=>this.handlePlatformCollision(t,i),(t,i)=>this.shouldCollideWithPlatform(t,i),this.scene)}catch(t){console.error("OneWayPlatform: Failed to setup collision:",t)}}shouldCollideWithPlatform(t,i){let s=t.body,n=i.body,o=s.velocity.y>0,r=s.bottom,a=n.top,p=s.prev.y+s.height<=a+10;return o&&p&&r>a}handlePlatformCollision(t,i){let s=t.body,n=i.body;if(this.platformSpringsActive&&Date.now()<this.springsEndTime){let r=s.velocity.x,p=-400*1.5;s.setVelocityY(p),s.setVelocityX(r),console.log(`\u{1F338} Platform spring boost applied: ${p} vertical velocity`),j.emit("platform-spring-boost",{player:t,platform:i,boostMultiplier:1.5,jumpPower:p})}else s.y=n.top-s.height,s.setVelocityY(0),t.setGrounded(!0);this.scene.events.emit("player-landed-on-platform",{player:t,platform:i,landingSpeed:{x:s.velocity.x,y:s.velocity.y},springBoosted:this.platformSpringsActive&&Date.now()<this.springsEndTime})}addPlatform(t,i,s,n){let o=this.platforms.create(t,i,s,n);return o.setOrigin(0,.5),o.refreshBody(),o}addPlatformGroup(t){if(!t||!t.children||!t.children.entries){console.warn("OneWayPlatform: Invalid group passed to addPlatformGroup",t);return}if(!this.platforms){if(this.initializePlatforms(),!this.platforms){console.warn("OneWayPlatform: Cannot add platform group - platforms group not initialized");return}this.setupCollision()}t.children.entries.forEach(i=>{if(i){if(!this.platforms.children){console.error("OneWayPlatform: Platform group children property is undefined during add operation");return}this.platforms.add(i)}})}getPlatforms(){return this.platforms}clear(){this.platforms.clear(!0,!0)}setupEventListeners(){j.on("platform-generated",this.onPlatformGenerated.bind(this)),j.on("platform-cleaned-up",this.onPlatformCleanedUp.bind(this)),j.on("platform-springs-active",this.onPlatformSpringsActive.bind(this))}onPlatformGenerated(t){this.addPlatformGroup(t.group)}onPlatformCleanedUp(t){t.group&&t.group.children&&t.group.children.entries&&t.group.children.entries.forEach(i=>{this.platforms.remove(i,!1,!1)})}onPlatformSpringsActive(t){this.platformSpringsActive=!0,this.springsEndTime=Date.now()+t.duration,console.log(`\u{1F338} Platform springs activated for ${t.duration/1e3} seconds`)}destroy(){if(j.off("platform-generated",this.onPlatformGenerated.bind(this)),j.off("platform-cleaned-up",this.onPlatformCleanedUp.bind(this)),j.off("platform-springs-active",this.onPlatformSpringsActive.bind(this)),this.platforms)try{this.platforms.children&&this.platforms.clear(!0,!0),this.platforms=null}catch(t){console.warn("OneWayPlatform: Error during destroy:",t),this.platforms=null}}};var Xl=class{constructor(t,i){this.currentBiome=null;this.wallSegments=new Map;this.segmentIdCounter=0;this.lastCameraY=0;this.TILE_WIDTH=64;this.scene=t,this.gameConfig=i,this.config=i.walls,this.setupWallGroups(),this.setupEventListeners(),this.generateInitialWalls()}setupWallGroups(){this.leftWalls=this.scene.physics.add.staticGroup(),this.rightWalls=this.scene.physics.add.staticGroup()}setupEventListeners(){j.on("biome-changed",this.onBiomeChanged.bind(this)),j.on("platform-cleaned-up",this.onPlatformCleanedUp.bind(this))}onBiomeChanged(t){this.currentBiome=t.currentBiome,console.log(`\u{1F9F1} WallManager: Biome changed to ${this.currentBiome?.name}`)}onPlatformCleanedUp(t){this.cleanupWallsBelowY(t.y)}enforceWallCountLimit(){if(this.wallSegments.size>100){let s=Array.from(this.wallSegments.entries()).sort(([,n],[,o])=>o.bottomY-n.bottomY).slice(0,this.wallSegments.size-100);console.log(`\u{1F9F9} WallManager: Wall count limit exceeded (${this.wallSegments.size}), removing ${s.length} oldest segments`),s.forEach(([n])=>{this.removeWallSegment(n)}),console.log(`\u{1F4CA} Wall count after cleanup: ${this.wallSegments.size}`),j.emit("walls-updated")}}cleanupWallsBelowY(t){let i=[],s=this.wallSegments.size;this.wallSegments.forEach((n,o)=>{n.bottomY>t&&i.push(o)}),i.length>0?(console.log(`\u{1F9F9} WallManager: Cleaning up ${i.length} wall segments below checkpoint at Y=${t.toFixed(0)}`),console.log(`\u{1F4CA} Wall count before cleanup: ${s}`),i.forEach(n=>{this.removeWallSegment(n)}),console.log(`\u{1F4CA} Wall count after cleanup: ${this.wallSegments.size}`),j.emit("walls-updated")):console.log(`\u{1F9F9} WallManager: No walls to cleanup below Y=${t.toFixed(0)} (Total walls: ${s})`)}getCurrentWallTextures(){return this.currentBiome?this.currentBiome.wallTextures:{top:"terrain_grass_vertical_top",middle:"terrain_grass_vertical_middle",bottom:"terrain_grass_vertical_bottom"}}generateInitialWalls(){let i=this.scene.scale.height-32,s=-this.config.generateDistance;console.log(`\u{1F3D7}\uFE0F Generating initial walls from Y=${i} to Y=${s}`),console.log(`\u{1F3D7}\uFE0F Screen width: ${this.scene.scale.width}, tile width: ${this.TILE_WIDTH}`),this.generateWallSegments("left",0,i,s),this.generateWallSegments("right",this.scene.scale.width-this.TILE_WIDTH,i,s),console.log(`\u{1F3D7}\uFE0F Wall generation complete. Left walls: ${this.leftWalls.children.size}, Right walls: ${this.rightWalls.children.size}`)}generateWallSegments(t,i,s,n){let o=s;for(;o>n;){let r=o,a=o-this.config.segmentHeight,p=this.createWallSegment(t,i,a,r);this.wallSegments.set(p.id,p),o=a}}createWallSegment(t,i,s,n){let o=`wall_${t}_${this.segmentIdCounter++}`,r=this.scene.physics.add.staticGroup(),a=n-s,p=Math.ceil(a/this.config.tileHeight),h=this.getCurrentWallTextures();for(let f=0;f<p;f++){let l=s+f*this.config.tileHeight,d;f===0?d=h.top:f===p-1?d=h.bottom:d=h.middle;let v=r.create(i,l,"tiles",d);v.setOrigin(0,0),v.refreshBody(),t==="left"?this.leftWalls.add(v):this.rightWalls.add(v)}let u={id:o,group:r,topY:s,bottomY:n,side:t};return j.emit("wall-segment-created",u),u}update(t){if(!this.scene||!this.scene.scene?.isActive()||!this.scene.physics?.world){console.warn("\u{1F6A7} WallManager: Scene or physics world not available, skipping update");return}if(Math.abs(t-this.lastCameraY)<50)return;this.generateWallsAbove(t)&&(console.log("\u{1F504} WallManager: Walls generated above, updating collision system"),j.emit("walls-updated")),this.lastCameraY=t}generateWallsAbove(t){let i=!1,s=t-this.config.generateDistance,n=this.wallSegments.size,o=this.getHighestWallSegment("left"),r=this.getHighestWallSegment("right");if(!o||o.topY>s){let a=o?o.topY:t;this.generateWallSegments("left",0,a,s),i=!0}if(!r||r.topY>s){let a=r?r.topY:t;this.generateWallSegments("right",this.scene.scale.width-this.TILE_WIDTH,a,s),i=!0}return i&&(console.log(`\u{1F3D7}\uFE0F WallManager: Generated walls above camera. Total walls: ${n} \u2192 ${this.wallSegments.size}`),this.enforceWallCountLimit()),i}getHighestWallSegment(t){let i=null;return this.wallSegments.forEach(s=>{s.side===t&&(!i||s.topY<i.topY)&&(i=s)}),i}removeWallSegment(t){let i=this.wallSegments.get(t);i&&(i.group.children.entries.forEach(s=>{i.side==="left"?this.leftWalls.remove(s):this.rightWalls.remove(s)}),i.group.clear(!0,!0),this.wallSegments.delete(t),j.emit("wall-segment-removed",i))}getLeftWalls(){return this.leftWalls}getRightWalls(){return this.rightWalls}getWallConfig(){return this.config}getAllWalls(){let t=this.scene.physics.add.staticGroup();return this.leftWalls.children.entries.forEach(i=>t.add(i)),this.rightWalls.children.entries.forEach(i=>t.add(i)),t}getWallSegments(){return Array.from(this.wallSegments.values())}updateConfiguration(t){this.gameConfig=t,this.config=t.walls}reset(){console.log("\u{1F504} WallManager: Resetting wall system"),this.clear(),this.segmentIdCounter=0,this.lastCameraY=0,this.setupWallGroups(),this.generateInitialWalls(),console.log("\u2705 WallManager: Reset complete - walls regenerated")}clear(){this.wallSegments.forEach((t,i)=>{this.removeWallSegment(i)}),this.leftWalls.clear(!0,!0),this.rightWalls.clear(!0,!0),this.wallSegments.clear()}destroy(){j.off("biome-changed",this.onBiomeChanged.bind(this)),j.off("platform-cleaned-up",this.onPlatformCleanedUp.bind(this)),this.clear()}};var $l=class{constructor(t,i,s,n){this.leftWallCollider=null;this.rightWallCollider=null;this.lastWallBounceTime=0;this.wallBounceCooldown=500;this.lastBounceSide=null;this.wallMagnetismActive=!1;this.magnetismEndTime=0;this.basePerfectTimingWindow=50;this.debugGraphics=null;this.gracePeriodIndicator=null;this.velocityArrow=null;this.debugEnabled=!0;this.updateCallCount=0;this.scene=t,this.player=i,this.wallManager=s,this.gameConfig=n,this.setupWallCollision(),this.setupEventListeners(),this.setupVisualDebugging()}setupEventListeners(){j.on("walls-updated",this.onWallsUpdated.bind(this)),j.on("wall-bounce-timing-extended",this.onWallMagnetismActive.bind(this)),this.scene.input.keyboard?.on("keydown-V",()=>{this.gameConfig.debug.enabled&&(this.debugEnabled=!this.debugEnabled,console.log(`\u{1F527} Wall bounce visual debugging: ${this.debugEnabled?"ENABLED":"DISABLED"}`),this.debugEnabled||(this.debugGraphics&&this.debugGraphics.setVisible(!1),this.gracePeriodIndicator&&this.gracePeriodIndicator.setVisible(!1),this.velocityArrow&&this.velocityArrow.setVisible(!1)))})}onWallsUpdated(){console.log("\u{1F504} WallCollision: Received walls-updated event, recreating colliders"),this.updateWallCollision()}onWallMagnetismActive(t){this.wallMagnetismActive=!0,this.magnetismEndTime=Date.now()+t.duration,console.log(`\u{1F9F2} Wall magnetism activated: timing window extended by ${t.multiplier}x for ${t.duration/1e3} seconds`)}setupWallCollision(){this.leftWallCollider=this.scene.physics.add.collider(this.player,this.wallManager.getLeftWalls(),(t,i)=>this.onCollideAfterSeparation(t,i,"left"),(t,i)=>this.capturePreCollisionVelocity(t,i,"left"),this.scene),this.rightWallCollider=this.scene.physics.add.collider(this.player,this.wallManager.getRightWalls(),(t,i)=>this.onCollideAfterSeparation(t,i,"right"),(t,i)=>this.capturePreCollisionVelocity(t,i,"right"),this.scene)}capturePreCollisionVelocity(t,i,s){let n=t.body,r=Date.now()-this.lastWallBounceTime;t.preHitVel=n.velocity.clone();let a=this.getEffectiveTimingWindow();t.effectiveTimingWindow=a,console.log(`\u26A1 ProcessCallback (BEFORE separation): ${s} wall, velocity X=${n.velocity.x.toFixed(1)}, Y=${n.velocity.y.toFixed(1)}, timing window: ${a}ms`);let p=200,h=this.lastBounceSide!==null&&this.lastBounceSide!==s,u=r<p;return h&&u?(console.log(`\u{1F31F} Wall collision BYPASSED: ${s} side (grace period: ${r}ms < ${p}ms, last bounce: ${this.lastBounceSide})`),!1):!0}onCollideAfterSeparation(t,i,s){let n=t.preHitVel;if(!n){console.log(`\u26A0\uFE0F No pre-hit velocity captured for ${s} wall collision`);return}console.log(`\u{1F3AF} CollideCallback (AFTER separation): ${s} wall, using captured velocity X=${n.x.toFixed(1)}, Y=${n.y.toFixed(1)}`);let o=this.wallManager.getWallConfig(),r={horizontalSpeed:n.x,verticalSpeed:n.y,isGrounded:t.getMovementState().isGrounded,wallBounceCount:t.getMovementState().wallBounceCount};this.canWallBounce(r,s,o)?(console.log(`\u2705 Wall bounce approved: ${s} side`),this.attemptWallBounce(r,s,o),this.emitWallContactEffects(s)):console.log(`\u274C Wall bounce rejected: ${s} side`),t.preHitVel=null}canWallBounce(t,i,s){let n=Date.now(),o=Math.abs(t.horizontalSpeed),r=n-this.lastWallBounceTime;return r<this.wallBounceCooldown?(console.log(`\u23F0 Rejected: Cooldown (${r}ms < ${this.wallBounceCooldown}ms)`),!1):o<20?(console.log(`\u{1F40C} Rejected: Too slow (${o.toFixed(1)} < 20)`),!1):(i==="left"?t.horizontalSpeed<0:t.horizontalSpeed>0)?(console.log(`\u{1F3AF} Wall bounce approved! Speed: ${o.toFixed(1)}, Direction: ${i}, Grounded: ${t.isGrounded}`),!0):(console.log(`\u21A9\uFE0F Rejected: Moving away from wall (${i}, speed: ${t.horizontalSpeed.toFixed(1)})`),!1)}attemptWallBounce(t,i,s){let n=this.samplePlayerInput();console.log(`\u{1F3AE} Input sample: left=${n.left}, right=${n.right}, up=${n.up}`);let o=this.calculateBounceEfficiency(t,i,n,s);console.log(`\u26A1 Calculated efficiency: ${o.toFixed(3)}`),o>0?this.executeWallBounce(t,i,o):console.log(`\u{1F4A5} Bounce cancelled: efficiency too low (${o.toFixed(3)})`)}samplePlayerInput(){let t=this.scene.input.keyboard?.createCursorKeys(),i=this.scene.input.keyboard?.addKeys("W,A,S,D");return{left:t?.left?.isDown||i?.A?.isDown||!1,right:t?.right?.isDown||i?.D?.isDown||!1,up:t?.up?.isDown||i?.W?.isDown||!1}}calculateBounceEfficiency(t,i,s,n){let o=.6,r=i==="left"?s.left:s.right,a=i==="left"?s.right:s.left;return r?(o=.4,console.log(`\u26A0\uFE0F Penalty applied: pressing INTO ${i} wall (efficiency: 0.4)`)):a?(o=.8,console.log(`\u{1F680} Bonus applied: pressing AWAY from ${i} wall (efficiency: 0.8)`)):(o=.6,console.log("\u27A1\uFE0F Neutral redirect: no relevant input (efficiency: 0.6)")),o}executeWallBounce(t,i,s){let n=this.player.body,o=Math.abs(t.horizontalSpeed),r=t.verticalSpeed,a=this.calculateRedirectedHorizontalSpeed(o,i,s),p=this.calculateVerticalMomentumTransfer(o,r,s),h=this.applyMomentumLimits(a),u=this.applyVerticalLimits(r+p);n.setVelocityX(h),n.setVelocityY(u);let f=50;i==="left"?n.x+=f:n.x-=f,console.log(`\u{1F44B} Nudged player away from ${i} wall by ${f}px`),console.log(`\u{1F680} Final velocity applied: X=${h}, Y=${u}`),console.log(`\u{1F4CD} Player position after bounce: X=${n.x.toFixed(1)}, Y=${n.y.toFixed(1)}`),this.scene.time.delayedCall(50,()=>{let d=n.velocity;console.log(`\u{1F50D} 50ms after bounce: velocity X=${d.x.toFixed(1)}, Y=${d.y.toFixed(1)}, position X=${n.x.toFixed(1)}`),Math.abs(d.x)<10&&console.log("\u26A0\uFE0F WARNING: Horizontal velocity dropped to near zero after bounce - possible immediate opposite wall collision")}),this.lastWallBounceTime=Date.now(),this.lastBounceSide=i;let l=this.player.getMovementController();l&&typeof l.incrementWallBounceCount=="function"&&l.incrementWallBounceCount(),j.emit("player-wall-bounce",{side:i,efficiency:s,oldSpeed:o,newSpeed:Math.abs(h),verticalGain:Math.abs(p),position:{x:this.player.x,y:this.player.y},bounceCount:t.wallBounceCount+1}),console.log(`\u{1F680} WALL BOUNCE EXECUTED! ${i} side, efficiency: ${s.toFixed(2)}, speed: ${o.toFixed(0)} \u2192 ${Math.abs(h).toFixed(0)}, vertical gain: ${Math.abs(p).toFixed(0)}`)}calculateRedirectedHorizontalSpeed(t,i,s){let n=Math.abs(t)*s,o=60;n<o&&(n=o,console.log(`\u26A1 Boosted bounce speed to minimum: ${o}`));let r=n*(i==="left"?1:-1);return console.log(`\u{1FA9E} Wall kick redirect: ${t.toFixed(1)} \u2192 ${r.toFixed(1)} (${i} wall, efficiency: ${s.toFixed(2)})`),r}calculateVerticalMomentumTransfer(t,i,s){return console.log("\u2194\uFE0F Pure horizontal redirect: no vertical momentum transfer"),0}applyMomentumLimits(t){return Math.abs(t)>800?800*Math.sign(t):t}applyVerticalLimits(t){return Math.max(-600,Math.min(600,t))}emitWallContactEffects(t){j.emit("wall-contact-effects",{side:t,playerPosition:{x:this.player.x,y:this.player.y},timestamp:Date.now()})}updateWallCollision(){if(!this.scene.physics?.world){console.warn("\u{1F6A7} WallCollision: Physics world not available, skipping collision update");return}this.leftWallCollider&&this.scene.physics.world.removeCollider(this.leftWallCollider),this.rightWallCollider&&this.scene.physics.world.removeCollider(this.rightWallCollider),this.setupWallCollision()}reset(){this.lastWallBounceTime=0,this.lastBounceSide=null,this.wallMagnetismActive=!1,this.magnetismEndTime=0,console.log("\u{1F504} WallCollision: Recreating colliders after reset"),this.updateWallCollision()}setupVisualDebugging(){this.debugEnabled&&(console.log("\u{1F527} Setting up wall bounce visual debugging..."),this.debugGraphics=this.scene.add.graphics(),this.debugGraphics.setDepth(1e3),this.debugGraphics.setScrollFactor(1,1),this.gracePeriodIndicator=this.scene.add.rectangle(0,0,100,20,65280,.7),this.gracePeriodIndicator.setDepth(1001),this.gracePeriodIndicator.setVisible(!1),this.gracePeriodIndicator.setScrollFactor(0,0),this.velocityArrow=this.scene.add.graphics(),this.velocityArrow.setDepth(1002),this.velocityArrow.setScrollFactor(1,1),console.log("\u2705 Wall bounce visual debugging setup complete"))}update(){this.debugEnabled&&(this.updateCallCount===0&&console.log("\u{1F527} Wall collision visual debugging update started"),this.updateCallCount++,this.updateVisualDebugging())}updateVisualDebugging(){if(!this.debugGraphics||!this.gracePeriodIndicator||!this.velocityArrow)return;let t=this.player.body,i=this.player.getMovementState(),n=Date.now()-this.lastWallBounceTime;this.debugGraphics.clear(),this.velocityArrow.clear();let o=200,r=n<o;if(this.lastBounceSide!==null&&r){let a=n/o,p=this.lastBounceSide==="left"?this.scene.scale.width:0;this.debugGraphics.lineStyle(8,65280,.5),this.debugGraphics.moveTo(p,this.scene.cameras.main.scrollY-200),this.debugGraphics.lineTo(p,this.scene.cameras.main.scrollY+this.scene.scale.height+200)}else this.gracePeriodIndicator.setVisible(!1)}destroy(){j.off("walls-updated",this.onWallsUpdated.bind(this)),j.off("wall-bounce-timing-extended",this.onWallMagnetismActive.bind(this)),this.leftWallCollider&&this.scene.physics.world.removeCollider(this.leftWallCollider),this.rightWallCollider&&this.scene.physics.world.removeCollider(this.rightWallCollider),this.debugGraphics&&this.debugGraphics.destroy(),this.gracePeriodIndicator&&this.gracePeriodIndicator.destroy(),this.velocityArrow&&this.velocityArrow.destroy(),this.reset()}getEffectiveTimingWindow(){return this.wallMagnetismActive&&Date.now()<this.magnetismEndTime?this.basePerfectTimingWindow*2:this.basePerfectTimingWindow}};var jl=class{constructor(t){this.wallContactEmitter=null;this.successEmitter=null;this.scene=t,this.setupVisualEffects(),this.setupEventListeners()}setupVisualEffects(){this.initializeParticleEmitters()}initializeParticleEmitters(){if(!this.scene.textures.exists("character")){console.warn("WallBounceEffects: Character texture not ready, deferring particle emitter creation");return}try{this.wallContactEmitter=this.scene.add.particles(0,0,"character",{frame:"character_beige_idle",scale:{start:.05,end:0},speed:{min:100,max:200},lifespan:200,quantity:8,tint:16755200,emitting:!1}),this.wallContactEmitter.setDepth(400),this.successEmitter=this.scene.add.particles(0,0,"character",{frame:"character_beige_idle",scale:{start:.08,end:0},speed:{min:150,max:300},lifespan:400,quantity:15,tint:65280,emitting:!1}),this.successEmitter.setDepth(400)}catch(t){console.warn("WallBounceEffects: Failed to create particle emitters:",t),this.wallContactEmitter=null,this.successEmitter=null}}setupEventListeners(){j.on("player-wall-bounce",this.onSuccessfulBounce.bind(this)),j.on("wall-contact-effects",this.onWallContact.bind(this))}onWallContact(t){if(this.wallContactEmitter)try{this.wallContactEmitter.active?this.wallContactEmitter.setPosition(t.playerPosition.x,t.playerPosition.y):(console.warn("WallBounceEffects: Wall contact emitter not ready or corrupted, reinitializing..."),this.initializeParticleEmitters())}catch(i){console.warn("WallBounceEffects: Error in wall contact particles:",i),this.initializeParticleEmitters()}else this.initializeParticleEmitters()}onSuccessfulBounce(t){let i=t.efficiency||.8;if(console.log(`\u{1F3A8} Wall bounce visual effect: efficiency=${i.toFixed(2)}`),this.successEmitter)try{if(this.successEmitter.active){let s=65280;i>1?s=16766720:i<.8&&(s=16711680),console.log(`\u{1F3A8} Using particle color: ${i<.8?"RED":i>1?"GOLD":"GREEN"} (efficiency: ${i.toFixed(2)})`),this.successEmitter.setConfig({tint:s}),this.successEmitter.setPosition(t.position.x,t.position.y)}else console.warn("WallBounceEffects: Success emitter not ready or corrupted, reinitializing..."),this.initializeParticleEmitters()}catch(s){console.warn("WallBounceEffects: Error in success particles:",s),this.initializeParticleEmitters()}else this.initializeParticleEmitters()}destroy(){if(j.off("player-wall-bounce",this.onSuccessfulBounce.bind(this)),j.off("wall-contact-effects",this.onWallContact.bind(this)),this.wallContactEmitter){try{this.wallContactEmitter.destroy()}catch(t){console.warn("WallBounceEffects: Error destroying wall contact emitter:",t)}this.wallContactEmitter=null}if(this.successEmitter){try{this.successEmitter.destroy()}catch(t){console.warn("WallBounceEffects: Error destroying success emitter:",t)}this.successEmitter=null}}};var Zl=class{constructor(t){this.particleLayer=null;this.particles=[];this.currentlySpinning=!1;this.lastPlayerPosition=new Phaser.Math.Vector2;this.currentParticleIndex=0;this.MAX_PARTICLES=800;this.PARTICLES_PER_FRAME=3;this.LIFESPAN=8e3;this.scene=t,this.boundOnPlayerSpinning=this.onPlayerSpinning.bind(this),this.boundOnPlayerSpinningStop=this.onPlayerSpinningStop.bind(this),this.setupParticleEffects(),this.setupEventListeners()}setupParticleEffects(){this.initializeParticlePool()}initializeParticlePool(){let t=this.scene.textures.exists("star")?"star":"character",i=t==="character"?"character_beige_idle":void 0;if(!this.scene.textures.exists(t)){console.warn("SpinningParticleEffects: Required texture not ready, deferring particle creation");return}try{this.particleLayer=this.scene.add.group();for(let s=0;s<this.MAX_PARTICLES;s++){let n=this.scene.add.sprite(0,0,t,i);n.setDepth(-10),n.setVisible(!1),n.setScale(.1),n.setBlendMode(Phaser.BlendModes.ADD),this.particles.push(n),this.particleLayer.add(n)}console.log(`\u2728 Created GPU particle pool with ${this.MAX_PARTICLES} particles`)}catch(s){console.warn("SpinningParticleEffects: Failed to create particle pool:",s),this.particleLayer=null}}setupEventListeners(){j.on("player-spinning",this.boundOnPlayerSpinning),j.on("player-spinning-stop",this.boundOnPlayerSpinningStop)}onPlayerSpinning(t){if(!this.particleLayer||!this.particles.length){this.initializeParticlePool();return}this.currentlySpinning=!0;let i=new Phaser.Math.Vector2(t.playerPosition.x,t.playerPosition.y);this.createTrailParticles(this.lastPlayerPosition,i,t.rotationSpeed),this.lastPlayerPosition.copy(i)}createTrailParticles(t,i,s){let n=Math.min(s/35,1),o=16768256;n>.8?o=16724736:n>.5?o=16737792:n>.2?o=16755200:o=8969727;let r=0,a=this.PARTICLES_PER_FRAME*2.5,h=Math.pow(n,.8)*a,u=Math.floor(h),f=h-u;if(r=u,Math.random()<f&&(r+=1),n<=.05&&r===0){let l=n*2;Math.random()<l&&(r=1)}for(let l=0;l<r;l++){this.currentParticleIndex=(this.currentParticleIndex+1)%this.MAX_PARTICLES;let d=this.particles[this.currentParticleIndex];this.scene.tweens.killTweensOf(d);let v=l/r,c=Phaser.Math.LinearXY(t,i,v),m=30,g=40;c.x+=(Math.random()-.5)*m,c.y+=(Math.random()-.5)*g,d.setPosition(c.x,c.y),d.setTint(o),d.setScale(.15+n*.1),d.setRotation(0),d.setVisible(!0),d.setAlpha(.8);let y=d.x,x=d.y,C=(Math.random()-.5)*120,S=(Math.random()-.5)*120;this.scene.tweens.add({targets:d,alpha:0,scaleX:.05,scaleY:.05,x:y+C,y:x+S+60,duration:this.LIFESPAN,ease:"Power2",onComplete:()=>{d.setVisible(!1),d.setAlpha(1),d.setScale(.1)}})}console.log(`\u2728 Trail particles: intensity=${n.toFixed(2)}, color=${o.toString(16)}, particles=${r}`)}onPlayerSpinningStop(){this.currentlySpinning=!1,console.log("\u{1F6D1} Stopped spinning particle trail")}destroy(){j.off("player-spinning",this.boundOnPlayerSpinning),j.off("player-spinning-stop",this.boundOnPlayerSpinningStop),this.particleLayer&&(this.particleLayer.destroy(!0),this.particleLayer=null),this.particles=[],this.currentlySpinning=!1}};var Kl=class{constructor(t,i,s,n){this.highestPlayerY=0;this.cameraTargetY=0;this.initialCameraY=0;this.minCameraY=0;this.scene=t,this.player=i,this.camera=t.cameras.main,this.config=s.camera,this.gameStateManager=n,this.setupCamera(),this.setupEventListeners()}setupCamera(){this.initialCameraY=this.camera.scrollY,this.highestPlayerY=this.player.y,this.cameraTargetY=this.initialCameraY;let t=this.scene.scale.height-32;this.minCameraY=t-this.scene.scale.height,this.camera.setBounds(0,-1/0,this.scene.scale.width,1/0),this.camera.startFollow(this.player,!1,this.config.cameraFollowSmoothing,this.config.cameraFollowSmoothing),this.camera.setDeadzone(this.scene.scale.width*.3,this.scene.scale.height*.2),this.camera.setFollowOffset(0,-this.scene.scale.height*.2)}setupEventListeners(){j.on("player-height-changed",this.onPlayerHeightChanged.bind(this)),j.on("camera-shake",this.onCameraShake.bind(this)),j.on("death-line-activated",this.onDeathLineActivated.bind(this))}update(t){if(!this.camera||!this.scene||!this.scene.scene?.isActive()){console.warn("\u{1F6A7} CameraManager: Camera or scene not available, skipping update");return}this.gameStateManager&&!this.gameStateManager.allowsCameraMovement()||(this.camera.scrollY>this.minCameraY&&this.camera.setScroll(this.camera.scrollX,this.minCameraY),this.trackPlayerHeight(),this.emitCameraState())}trackPlayerHeight(){let t=this.player.y;t<this.highestPlayerY&&(this.highestPlayerY=t,j.emit("player-height-record",{height:this.getPlayerHeight(),position:{x:this.player.x,y:this.player.y},timestamp:Date.now()}))}onPlayerHeightChanged(t){j.emit("height-milestone",t)}onCameraShake(t){this.camera.shake(t.duration,t.intensity*.01)}emitCameraState(){if(!this.camera||!this.scene||!this.scene.scene?.isActive()){console.warn("\u{1F6A7} CameraManager: Camera or scene not available, skipping state emit");return}let t={scrollY:this.camera.scrollY,playerHeight:this.getPlayerHeight(),highestHeight:this.getHighestHeight(),isPlayerAboveCamera:this.player.y<this.camera.scrollY-this.scene.scale.height*.1};j.emit("camera-state-updated",t)}getPlayerHeight(){return Math.max(0,this.initialCameraY+this.scene.scale.height*.7-this.player.y)}getHighestHeight(){return Math.max(0,this.initialCameraY+this.scene.scale.height*.7-this.highestPlayerY)}getCameraViewBounds(){return{top:this.camera.scrollY,bottom:this.camera.scrollY+this.scene.scale.height,left:this.camera.scrollX,right:this.camera.scrollX+this.scene.scale.width}}onDeathLineActivated(){console.log("\u{1F4F7} Death line activated, camera continues pure Phaser following")}focusOnPlayer(){this.camera.centerOn(this.player.x,this.player.y)}updateConfiguration(t){this.config=t.camera,this.camera.setLerp(this.config.cameraFollowSmoothing,this.config.cameraFollowSmoothing)}reset(){console.log("\u{1F504} CameraManager: Resetting camera system"),this.highestPlayerY=this.player.y,this.cameraTargetY=this.initialCameraY,this.camera.setScroll(0,this.initialCameraY),this.camera.startFollow(this.player,!1,this.config.cameraFollowSmoothing,this.config.cameraFollowSmoothing),this.camera.setDeadzone(this.scene.scale.width*.3,this.scene.scale.height*.2),this.camera.setFollowOffset(0,this.scene.scale.height*.1),console.log("\u2705 CameraManager: Reset complete - pure Phaser following")}destroy(){j.off("player-height-changed",this.onPlayerHeightChanged.bind(this)),j.off("camera-shake",this.onCameraShake.bind(this)),j.off("death-line-activated",this.onDeathLineActivated.bind(this))}};var Jl=class{constructor(t,i,s){this.emberParticles=null;this.sparkParticles=null;this.smokeParticles=null;this.deathLineY=0;this.gameStartTime=0;this.isGameOver=!1;this.deathLineActive=!1;this.highestPlayerY=0;this.initialPlayerY=0;this.demoMode=!1;this.playerInvincible=!1;this.invincibilityEndTime=0;this.pulseIntensity=0;this.lastWarningTime=0;this.PULSE_SPEED=3;this.scene=t,this.player=i,this.config=s.deathLine,this.gameStartTime=Date.now(),this.initialPlayerY=i.y,this.highestPlayerY=i.y,this.setupVisuals(),this.setupParticleSystem(),this.setupEventListeners()}setupVisuals(){this.deathLineGraphics=this.scene.add.graphics(),this.deathLineGraphics.setDepth(800),this.warningZone=this.scene.add.graphics(),this.warningZone.setDepth(700),this.warningZone.setAlpha(.3),this.warningText=this.scene.add.text(this.scene.scale.width/2,this.scene.scale.height*.8,"DANGER! CLIMB HIGHER!",{fontSize:"32px",color:"#ff0000",fontStyle:"bold",stroke:"#000000",strokeThickness:4}),this.warningText.setOrigin(.5,.5),this.warningText.setDepth(900),this.warningText.setVisible(!1),this.warningText.setScrollFactor(0)}setupParticleSystem(){this.createParticleTextures(),this.createParticleEmitters()}createParticleTextures(){let t=this.scene.add.graphics();t.fillStyle(16729088,1),t.fillCircle(4,4,4),t.generateTexture("ember-particle",8,8),t.destroy();let i=this.scene.add.graphics();i.fillStyle(16776960,1),i.fillCircle(2,2,2),i.generateTexture("spark-particle",4,4),i.destroy();let s=this.scene.add.graphics();s.fillStyle(4473924,.6),s.fillCircle(6,6,6),s.generateTexture("smoke-particle",12,12),s.destroy()}createParticleEmitters(){this.emberParticles=this.scene.add.particles(0,0,"ember-particle",{x:{min:0,max:this.scene.scale.width},y:0,speedX:{min:-20,max:20},speedY:{min:-80,max:-120},scale:{start:.5,end:.1},alpha:{start:1,end:0},lifespan:3e3,frequency:100,quantity:2}).setDepth(750).stop(),this.sparkParticles=this.scene.add.particles(0,0,"spark-particle",{x:{min:0,max:this.scene.scale.width},y:0,speedX:{min:-60,max:60},speedY:{min:-200,max:-300},scale:{start:1,end:0},alpha:{start:1,end:0},lifespan:800,frequency:200,quantity:1}).setDepth(760).stop(),this.smokeParticles=this.scene.add.particles(0,0,"smoke-particle",{x:{min:0,max:this.scene.scale.width},y:0,speedX:{min:-10,max:10},speedY:{min:-30,max:-60},scale:{start:.3,end:.8},alpha:{start:.3,end:0},lifespan:4e3,frequency:150,quantity:1}).setDepth(740).stop()}setupEventListeners(){j.on("player-invincibility-start",this.onInvincibilityStart.bind(this))}update(t){this.isGameOver||(this.demoMode||this.updateDeathLineActivation(),this.deathLineActive&&!this.demoMode?(this.updateDeathLinePosition(t),this.updateVisuals(),this.checkPlayerCollision(),this.updateWarningSystem()):(this.deathLineGraphics.clear(),this.warningZone.clear(),this.warningText.setVisible(!1)))}updateDeathLineActivation(){if(this.deathLineActive)return;this.player.y<this.highestPlayerY&&(this.highestPlayerY=this.player.y);let t=Date.now()-this.gameStartTime,i=Math.max(0,this.initialPlayerY-this.highestPlayerY),s=t>=this.config.startDelay,n=i>=this.config.minHeight;(s||n)&&(this.deathLineActive=!0,this.deathLineY=this.initialPlayerY+200,console.log(`\u{1F480} Death line activated! Time: ${(t/1e3).toFixed(1)}s, Height: ${i.toFixed(0)}px`),j.emit("death-line-activated"))}updateDeathLinePosition(t){let i=this.config.riseSpeed*(t/1e3);this.deathLineY-=i}updateVisuals(){let t=this.scene.cameras.main,i=t.scrollY+this.scene.scale.height,s=t.scrollY;this.deathLineGraphics.clear(),this.warningZone.clear(),this.deathLineActive&&(this.drawFireWall(t),this.drawWarningEffects(t)),this.pulseIntensity+=this.PULSE_SPEED*(1/60),this.pulseIntensity>Math.PI*2&&(this.pulseIntensity-=Math.PI*2)}drawFireWall(t){let i=this.scene.scale.width,s=this.scene.scale.height,n=t.scrollY+s,o=this.deathLineY-this.player.y,r=Math.max(0,Math.min(1,(1e3-o)/1e3)),a=80+r*120,p;o<300?p=n-a:p=Math.max(n-a,this.deathLineY-a);let h=Math.floor(200+r*55),u=Math.floor(50+r*50),l=h<<16|u<<8|0,d=.7+Math.sin(this.pulseIntensity*1.5)*.3+r*.3;this.deathLineGraphics.fillStyle(l,d),this.deathLineGraphics.fillRect(0,p,i,a),this.drawFireFlames(p,i,r),this.drawFireBorder(p,i,r),this.updateParticleEffects(p,r)}drawFireFlames(t,i,s){let n=Math.floor(i/25),o=30+s*40;this.deathLineGraphics.lineStyle(3,16737792,.8+s*.2);for(let r=0;r<n;r++){let a=r*25+Math.sin(this.pulseIntensity+r)*3,p=o*.5+Math.sin(this.pulseIntensity*2+r*.5)*(o*.5);this.deathLineGraphics.beginPath(),this.deathLineGraphics.moveTo(a,t),this.deathLineGraphics.lineTo(a+8,t-p*.7),this.deathLineGraphics.lineTo(a+12,t-p),this.deathLineGraphics.lineTo(a+16,t-p*.8),this.deathLineGraphics.lineTo(a+20,t),this.deathLineGraphics.strokePath(),s>.3&&(this.deathLineGraphics.lineStyle(1,16776960,s),this.deathLineGraphics.beginPath(),this.deathLineGraphics.moveTo(a+4,t),this.deathLineGraphics.lineTo(a+10,t-p*.8),this.deathLineGraphics.lineTo(a+16,t),this.deathLineGraphics.strokePath())}}drawFireBorder(t,i,s){let n=3+s*4,o=Math.sin(this.pulseIntensity*3)*(1+s);this.deathLineGraphics.lineStyle(n+o,16724736,.9),this.deathLineGraphics.beginPath(),this.deathLineGraphics.moveTo(0,t),this.deathLineGraphics.lineTo(i,t),this.deathLineGraphics.strokePath()}updateParticleEffects(t,i){!this.emberParticles||!this.sparkParticles||!this.smokeParticles||(i>.1?(this.emberParticles.setPosition(0,t),this.sparkParticles.setPosition(0,t),this.smokeParticles.setPosition(0,t),this.updateEmberParticles(i),this.updateSparkParticles(i),this.updateSmokeParticles(i),this.emberParticles.emitting||this.emberParticles.start(),this.sparkParticles.emitting||this.sparkParticles.start(),this.smokeParticles.emitting||this.smokeParticles.start()):(this.emberParticles.emitting&&this.emberParticles.stop(),this.sparkParticles.emitting&&this.sparkParticles.stop(),this.smokeParticles.emitting&&this.smokeParticles.stop()))}updateEmberParticles(t){if(!this.emberParticles)return;let i=Math.max(50,200-t*150),s=Math.floor(1+t*3);this.emberParticles.setFrequency(i),this.emberParticles.setQuantity(s)}updateSparkParticles(t){if(this.sparkParticles)if(t>.5){let i=Math.max(80,300-t*220),s=Math.floor(1+t*2);this.sparkParticles.setFrequency(i),this.sparkParticles.setQuantity(s)}else this.sparkParticles.setFrequency(400),this.sparkParticles.setQuantity(1)}updateSmokeParticles(t){if(!this.smokeParticles)return;let i=Math.max(100,250-t*100),s=Math.floor(1+t*2);this.smokeParticles.setFrequency(i),this.smokeParticles.setQuantity(s)}drawWarningEffects(t){let i=this.deathLineY-this.player.y,s=Math.max(0,Math.min(1,(1e3-i)/1e3));i>1e3||(s>.1&&this.drawScreenTint(t,s),s>.5&&this.drawHeatShimmer(t,s))}drawScreenTint(t,i){let s=this.scene.scale.width,n=this.scene.scale.height,o=i*.3;this.warningZone.fillStyle(16724736,o),this.warningZone.fillRect(t.scrollX,t.scrollY,s,n)}drawHeatShimmer(t,i){let s=this.scene.scale.width,n=this.scene.scale.height,o=n*.3;this.warningZone.lineStyle(1,16737792,i*.4);let r=15;for(let a=0;a<r;a++){let p=t.scrollY+n-o*(a/r);this.warningZone.beginPath();for(let h=0;h<s;h+=5){let u=Math.sin(this.pulseIntensity*3+h*.02+a*.3)*(2+i*3),f=p+u;h===0?this.warningZone.moveTo(t.scrollX+h,f):this.warningZone.lineTo(t.scrollX+h,f)}this.warningZone.strokePath()}}checkPlayerCollision(){if(this.isGameOver)return;this.playerInvincible&&Date.now()>=this.invincibilityEndTime&&(this.playerInvincible=!1,console.log("\u{1F6E1}\uFE0F Player invincibility expired"),j.emit("player-invincibility-end"));let t=this.player.y+this.player.body.height;t>=this.deathLineY&&!this.playerInvincible?this.triggerGameOver():t>=this.deathLineY&&this.playerInvincible&&console.log("\u{1F4AB} Player saved by invincibility!")}updateWarningSystem(){let t=this.deathLineY-this.player.y,i=Math.max(0,Math.min(1,(1e3-t)/1e3));if(this.playerInvincible){let u=Math.max(0,this.invincibilityEndTime-Date.now());this.warningText.setVisible(!0),this.warningText.setText(`\u{1F6E1}\uFE0F INVINCIBLE: ${Math.ceil(u/1e3)}s`),this.warningText.setColor("#00ff00"),this.warningText.setAlpha(.8+Math.sin(this.pulseIntensity*4)*.2),this.warningText.setScale(1.2);return}let s,n,o;if(t>800){s="safe",this.warningText.setVisible(!1);return}else t>400?(s="aware",n=`Fire Rising - ${Math.floor(t)}px below`,o="#ffaa00"):t>200?(s="caution",n="CAUTION - Fire Approaching!",o="#ff6600"):t>100?(s="danger",n="DANGER - CLIMB NOW!",o="#ff3300"):(s="critical",n="\u{1F525} CRITICAL - ESCAPE! \u{1F525}",o="#ff0000");this.warningText.setVisible(!0),this.warningText.setText(n),this.warningText.setColor(o);let r=1;s==="critical"?r=4:s==="danger"?r=2.5:s==="caution"&&(r=1.5);let a=Math.sin(this.pulseIntensity*r)*.4+.6;this.warningText.setAlpha(a);let p=1;s==="critical"?p=1.5:s==="danger"?p=1.3:s==="caution"&&(p=1.1),this.warningText.setScale(p);let h=Date.now();h-this.lastWarningTime>2e3&&(this.lastWarningTime=h,j.emit("death-line-warning",{distance:t,threatLevel:s,proximityFactor:i,playerPosition:{x:this.player.x,y:this.player.y}})),s==="critical"&&h-this.lastWarningTime>1e3&&j.emit("camera-shake",{intensity:2,duration:200})}triggerGameOver(){this.isGameOver||(this.isGameOver=!0,this.player.setVelocity(0,0),j.emit("game-over",{cause:"death-line",survivalTime:Date.now()-this.gameStartTime,finalHeight:this.getPlayerDistanceFromDeathLine(),playerPosition:{x:this.player.x,y:this.player.y},timestamp:Date.now()}),this.scene.time.delayedCall(16,()=>{j.emit("request-game-stats")}),this.scene.cameras.main.shake(300,.01))}getDeathLineY(){return this.deathLineY}getPlayerDistanceFromDeathLine(){return Math.max(0,this.deathLineY-this.player.y)}isPlayerInDanger(){return this.getPlayerDistanceFromDeathLine()<=this.config.warningDistance}isPlayerDead(){return this.isGameOver}reset(){console.log("\u{1F504} DeathLine: Resetting death line system"),this.isGameOver=!1,this.deathLineActive=!1,this.gameStartTime=Date.now(),this.playerInvincible=!1,this.invincibilityEndTime=0,this.initialPlayerY=this.player.y,this.highestPlayerY=this.player.y,this.deathLineY=this.player.y+500,this.pulseIntensity=0,this.lastWarningTime=0,this.emberParticles&&this.emberParticles.emitting&&this.emberParticles.stop(),this.sparkParticles&&this.sparkParticles.emitting&&this.sparkParticles.stop(),this.smokeParticles&&this.smokeParticles.emitting&&this.smokeParticles.stop(),this.warningText.setVisible(!1),this.deathLineGraphics.clear(),this.warningZone.clear(),console.log(`\u2705 DeathLine: Reset complete - death line deactivated, player at Y: ${this.player.y}, deathLine at Y: ${this.deathLineY}`)}updateConfiguration(t){this.config=t.deathLine}onInvincibilityStart(t){this.playerInvincible=!0,this.invincibilityEndTime=Date.now()+t.duration,console.log(`\u{1F6E1}\uFE0F Player invincibility started for ${t.duration/1e3} seconds`)}setDemoMode(t){this.demoMode=t,console.log(`\u{1F916} DeathLine demo mode ${t?"enabled":"disabled"}`),t&&(this.deathLineActive=!1,this.deathLineGraphics.clear(),this.warningZone.clear(),this.warningText.setVisible(!1),this.emberParticles&&this.emberParticles.emitting&&this.emberParticles.stop(),this.sparkParticles&&this.sparkParticles.emitting&&this.sparkParticles.stop(),this.smokeParticles&&this.smokeParticles.emitting&&this.smokeParticles.stop())}destroy(){j.off("player-invincibility-start",this.onInvincibilityStart.bind(this)),this.deathLineGraphics&&this.deathLineGraphics.destroy(),this.warningZone&&this.warningZone.destroy(),this.warningText&&this.warningText.destroy(),this.emberParticles&&(this.emberParticles.destroy(),this.emberParticles=null),this.sparkParticles&&(this.sparkParticles.destroy(),this.sparkParticles=null),this.smokeParticles&&(this.smokeParticles.destroy(),this.smokeParticles=null)}};var Ql=class{constructor(t,i){this.heightScore=0;this.comboScore=0;this.currentHeight=0;this.highestHeight=0;this.currentMultiplier=1;this.lastScoredHeight=0;this.HEIGHT_SCORE_INTERVAL=10;this.HEIGHT_POINT_VALUE=1;this.comboChain=0;this.lastComboTime=0;this.COMBO_TIMEOUT=3e3;this.heightMilestones=[100,250,500,1e3,2e3,5e3,1e4];this.reachedMilestones=new Set;this.heightScoreMultiplier=1;this.scene=t,this.player=i,this.setupEventListeners(),j.emit("score-system-ready",this),console.log("\u{1F4CA} ScoreSystem initialized")}setupEventListeners(){j.on("camera-state-updated",this.onCameraStateUpdated.bind(this)),j.on("player-wall-bounce",this.onPlayerWallBounce.bind(this)),j.on("player-landed",this.onPlayerLanded.bind(this)),j.on("player-height-record",this.onPlayerHeightRecord.bind(this))}onCameraStateUpdated(t){this.currentHeight=t.playerHeight,this.updateHeightScore()}onPlayerHeightRecord(t){let i=t.height;i>this.highestHeight&&(this.highestHeight=i,this.checkHeightMilestones(i))}updateHeightScore(){let t=Math.floor(this.currentHeight/this.HEIGHT_SCORE_INTERVAL)*this.HEIGHT_SCORE_INTERVAL;if(t>this.lastScoredHeight){let s=(t-this.lastScoredHeight)/this.HEIGHT_SCORE_INTERVAL*this.HEIGHT_POINT_VALUE;this.heightScore+=Math.round(s*this.currentMultiplier),this.lastScoredHeight=t,j.emit("score-height-gained",{points:Math.round(s*this.currentMultiplier),height:this.currentHeight,multiplier:this.currentMultiplier})}}checkHeightMilestones(t){this.heightMilestones.forEach(i=>{if(t>=i&&!this.reachedMilestones.has(i)){this.reachedMilestones.add(i);let s=i;this.heightScore+=s,j.emit("height-milestone-reached",{milestone:i,bonusPoints:s,totalHeightScore:this.heightScore,height:t})}})}onPlayerWallBounce(t){this.updateCombo("wall-bounce",t)}onPlayerLanded(t){this.resetCombo()}updateCombo(t,i){let s=Date.now();s-this.lastComboTime>this.COMBO_TIMEOUT&&(this.comboChain=0),this.comboChain++,this.lastComboTime=s,this.currentMultiplier=1+this.comboChain*.1;let n=this.comboChain*10;this.comboScore+=n,j.emit("combo-updated",{type:t,chain:this.comboChain,multiplier:this.currentMultiplier,points:n,data:i})}resetCombo(){this.comboChain>0&&j.emit("combo-broken",{finalChain:this.comboChain,finalMultiplier:this.currentMultiplier,totalComboScore:this.comboScore}),this.comboChain=0,this.currentMultiplier=1}getScoreData(){return{heightScore:this.heightScore,comboScore:this.comboScore,totalScore:this.heightScore+this.comboScore,currentHeight:this.currentHeight,highestHeight:this.highestHeight,multiplier:this.currentMultiplier}}getTotalScore(){return this.heightScore+this.comboScore}getHeightScore(){return this.heightScore}getComboScore(){return this.comboScore}getCurrentHeight(){return this.currentHeight}getHighestHeight(){return this.highestHeight}getCurrentMultiplier(){return this.currentMultiplier}getComboChain(){return this.comboChain}reset(){this.heightScore=0,this.comboScore=0,this.currentHeight=0,this.highestHeight=0,this.currentMultiplier=1,this.lastScoredHeight=0,this.comboChain=0,this.lastComboTime=0,this.reachedMilestones.clear(),this.heightScoreMultiplier=1,j.emit("score-reset")}setHeightScoreMultiplier(t){this.heightScoreMultiplier=t,console.log(`\u{1F4CA} Height score multiplier set to: ${t}x`)}getHeightScoreMultiplier(){return this.heightScoreMultiplier}getStats(){return{totalScore:this.getTotalScore(),heightScore:this.getHeightScore(),comboScore:this.getComboScore(),currentHeight:this.currentHeight,highestHeight:this.highestHeight}}destroy(){j.off("camera-state-updated",this.onCameraStateUpdated.bind(this)),j.off("player-wall-bounce",this.onPlayerWallBounce.bind(this)),j.off("player-landed",this.onPlayerLanded.bind(this)),j.off("player-height-record",this.onPlayerHeightRecord.bind(this))}};var ql=class{constructor(t,i){this.currentCombo=[];this.comboStartTime=0;this.lastEventTime=0;this.comboMultiplier=1;this.COMBO_TIMEOUT=2500;this.MAX_COMBO_MULTIPLIER=5;this.MULTIPLIER_INCREMENT=.2;this.comboMultiplierBonus=1;this.goldenTouchEnabled=!1;this.POINT_VALUES={"wall-bounce":50,"perfect-wall-bounce":150,"multi-platform-jump":75,"air-time":25,"speed-bonus":100};this.airTimeStart=0;this.lastGroundedTime=0;this.minAirTimeForCombo=1e3;this.lastPlatformLanding=0;this.platformsSkipped=0;this.scene=t,this.player=i,this.setupEventListeners(),j.emit("combo-system-ready",this),console.log("\u26D3\uFE0F ComboSystem initialized")}setupEventListeners(){j.on("player-wall-bounce",this.onWallBounce.bind(this)),j.on("player-landed",this.onPlayerLanded.bind(this)),j.on("player-takeoff",this.onPlayerTakeoff.bind(this)),j.on("player-height-record",this.onHeightRecord.bind(this)),j.on("movement-state-updated",this.onMovementStateUpdated.bind(this))}update(t){this.checkComboTimeout(),this.updateAirTimeTracking()}onWallBounce(t){let i=t.efficiency||.8,s=i>1?"perfect-wall-bounce":"wall-bounce";console.log("\u{1F3AF} Wall Bounce Event:",{type:s,side:t.side,efficiency:i,speedGained:t.newSpeed-t.oldSpeed,bounceCount:t.bounceCount}),this.addComboEvent(s,{side:t.side,efficiency:i,speedGained:t.newSpeed-t.oldSpeed,bounceCount:t.bounceCount})}onPlayerLanded(t){let i=Date.now();if(console.log("\u{1F6EC} Player Landed:",{horizontalSpeed:t?.horizontalSpeed,airTimeStart:this.airTimeStart,platformsSkipped:this.platformsSkipped}),this.airTimeStart>0){let n=i-this.airTimeStart;n>=this.minAirTimeForCombo&&(console.log("\u23F1\uFE0F Air Time Combo:",{airTime:n,threshold:this.minAirTimeForCombo}),this.addComboEvent("air-time",{airTime:n,landingSpeed:t.horizontalSpeed}))}let s=i-this.lastPlatformLanding;s>500&&this.platformsSkipped>0&&(console.log("\u{1F3D7}\uFE0F Multi-Platform Jump:",{platformsSkipped:this.platformsSkipped,timeSinceLastLanding:s}),this.addComboEvent("multi-platform-jump",{platformsSkipped:this.platformsSkipped,jumpDistance:s})),this.lastPlatformLanding=i,this.platformsSkipped=0,this.lastGroundedTime=i,this.airTimeStart=0}onPlayerTakeoff(t){console.log("\u{1F680} Player Takeoff"),this.airTimeStart=Date.now()}onHeightRecord(t){let i=Math.abs(t.horizontalSpeed||0);i>400&&(console.log("\u26A1 Speed Bonus:",{speed:i,threshold:400,height:t.height}),this.addComboEvent("speed-bonus",{speed:i,height:t.height}))}onMovementStateUpdated(t){if(!t.isGrounded&&this.lastGroundedTime>0){let i=Date.now()-this.lastGroundedTime;if(i>200){let s=Math.floor(i/500);this.platformsSkipped=Math.max(this.platformsSkipped,s)}}}addComboEvent(t,i){let s=Date.now();(this.currentCombo.length===0||s-this.lastEventTime>this.COMBO_TIMEOUT)&&this.startNewCombo();let n=this.POINT_VALUES[t]||0,o=Math.round(n*this.comboMultiplier),r={type:t,timestamp:s,data:i,points:o};this.currentCombo.push(r),this.lastEventTime=s,this.comboMultiplier=Math.min(this.comboMultiplier+this.MULTIPLIER_INCREMENT,this.MAX_COMBO_MULTIPLIER),console.log("\u{1F525} COMBO EVENT ADDED:",{type:t,points:o,comboLength:this.currentCombo.length,multiplier:this.comboMultiplier.toFixed(2),totalComboPoints:this.getCurrentComboPoints()}),j.emit("combo-event-added",{event:r,comboLength:this.currentCombo.length,multiplier:this.comboMultiplier,totalComboPoints:this.getCurrentComboPoints()})}startNewCombo(){this.currentCombo.length>0&&this.finalizeCombo(),this.currentCombo=[],this.comboStartTime=Date.now(),this.comboMultiplier=1}checkComboTimeout(){this.currentCombo.length>0&&Date.now()-this.lastEventTime>this.COMBO_TIMEOUT&&this.finalizeCombo()}finalizeCombo(){if(this.currentCombo.length===0)return;let t={events:[...this.currentCombo],startTime:this.comboStartTime,endTime:Date.now(),totalPoints:this.getCurrentComboPoints(),multiplier:this.comboMultiplier,chain:this.currentCombo.length};console.log("\u2705 COMBO COMPLETED:",{chain:t.chain,totalPoints:t.totalPoints,duration:t.endTime-t.startTime,finalMultiplier:t.multiplier.toFixed(2)}),j.emit("combo-completed",t),this.currentCombo=[],this.comboMultiplier=1}updateAirTimeTracking(){}getCurrentComboPoints(){return this.currentCombo.reduce((t,i)=>t+i.points,0)}getCurrentCombo(){return[...this.currentCombo]}getCurrentComboLength(){return this.currentCombo.length}getCurrentMultiplier(){return this.comboMultiplier}isComboActive(){return this.currentCombo.length>0}getTimeSinceLastEvent(){return this.lastEventTime>0?Date.now()-this.lastEventTime:0}getComboTimeRemaining(){return this.isComboActive()?Math.max(0,this.COMBO_TIMEOUT-this.getTimeSinceLastEvent()):0}breakCombo(t){this.currentCombo.length>0&&(console.log("\u{1F4A5} COMBO BROKEN:",{reason:t||"manual",finalCombo:this.currentCombo.length,finalPoints:this.getCurrentComboPoints(),finalMultiplier:this.comboMultiplier.toFixed(2)}),j.emit("combo-broken",{reason:t||"manual",finalCombo:this.getCurrentCombo(),finalPoints:this.getCurrentComboPoints(),finalMultiplier:this.comboMultiplier}),this.currentCombo=[],this.comboMultiplier=1)}getStats(){let t=0,i=0,s=0,n=0;return this.isComboActive()&&(t=Math.max(t,this.getCurrentComboLength())),this.currentCombo.forEach(o=>{o.type==="wall-bounce"&&(n++,o.data&&o.data.efficiency>1&&s++)}),{longestCombo:Math.max(t,this.getCurrentComboLength()),totalCombos:this.isComboActive()?1:0,perfectWallBounces:s,totalWallBounces:n}}reset(){this.currentCombo=[],this.comboStartTime=0,this.lastEventTime=0,this.comboMultiplier=1,this.airTimeStart=0,this.lastGroundedTime=0,this.lastPlatformLanding=0,this.platformsSkipped=0,this.comboMultiplierBonus=1,this.goldenTouchEnabled=!1}setComboMultiplierBonus(t){this.comboMultiplierBonus=t,console.log(`\u26D3\uFE0F Combo multiplier bonus set to: ${t}x`)}setGoldenTouchEnabled(t){this.goldenTouchEnabled=t,console.log(`\u{1F4B0} Golden touch ${t?"enabled":"disabled"}`)}getComboMultiplierBonus(){return this.comboMultiplierBonus}isGoldenTouchEnabled(){return this.goldenTouchEnabled}destroy(){j.off("player-wall-bounce",this.onWallBounce.bind(this)),j.off("player-landed",this.onPlayerLanded.bind(this)),j.off("player-takeoff",this.onPlayerTakeoff.bind(this)),j.off("player-height-record",this.onHeightRecord.bind(this)),j.off("movement-state-updated",this.onMovementStateUpdated.bind(this))}};var _l=class{constructor(t,i,s){this.comboVisible=!1;this.comboFadeOut=null;this.scene=t,this.scoreSystem=i,this.comboSystem=s,this.setupUI(),this.setupEventListeners(),this.scene.time.delayedCall(50,()=>{this.updateDisplay()})}setupUI(){let t=this.scene.scale.width,i=this.scene.scale.height;this.setupMainHUD(),this.setupComboDisplay()}setupMainHUD(){this.heightText=this.scene.add.text(0,0,"\u{1F3D4}\uFE0F 0m",{fontSize:28,color:"#00FFFF",fontStyle:"bold",fontFamily:"monospace",stroke:"#003366",strokeThickness:2,resolution:2}),this.scoreText=this.scene.add.text(0,0,"\u{1F4B0} 0pts",{fontSize:"20px",color:"#FFD700",fontStyle:"bold",fontFamily:"monospace",stroke:"#664400",strokeThickness:1}),this.multiplierText=this.scene.add.text(0,0,"\u26A1 1.0x",{fontSize:"20px",color:"#FFFFFF",fontStyle:"bold",fontFamily:"monospace",stroke:"#333333",strokeThickness:1}),this.mainHUD=this.scene.rexUI.add.sizer({x:20,y:20,orientation:"vertical",background:this.scene.rexUI.add.roundRectangle(0,0,2,2,12,4403,.85).setStrokeStyle(2,26316,.9),space:{left:16,right:16,top:12,bottom:12,item:6},anchor:{left:"left",top:"top"}}).add(this.heightText,{align:"left"}).add(this.scoreText,{align:"left"}).add(this.multiplierText,{align:"left"}).setDepth(1100).setScrollFactor(0).layout()}setupComboDisplay(){}setupEventListeners(){j.on("score-height-gained",this.onScoreUpdate.bind(this)),j.on("height-milestone-reached",this.onHeightMilestone.bind(this)),j.on("combo-event-added",this.onComboEventAdded.bind(this)),j.on("combo-completed",this.onComboCompleted.bind(this)),j.on("combo-broken",this.onComboBroken.bind(this)),j.on("camera-state-updated",this.onCameraUpdate.bind(this))}onScoreUpdate(){this.updateDisplay()}onHeightMilestone(t){this.showMilestoneNotification(t.milestone,t.bonusPoints),this.updateDisplay()}onComboEventAdded(t){this.showComboDisplay(),this.updateComboDisplay()}onComboCompleted(t){this.showComboCompletedEffect(t),this.hideComboDisplay()}onComboBroken(t){this.showComboBrokenEffect(),this.hideComboDisplay()}onCameraUpdate(){this.updateDisplay()}updateDisplay(){if(!(!this.scoreSystem||!this.mainHUD||!this.heightText||!this.scoreText||!this.multiplierText)&&!(!this.scene||!this.scene.scene||!this.scene.scene.isActive()))try{this.currentScore=this.scoreSystem.getScoreData();let i=Math.round(this.currentScore.currentHeight/49);this.heightText.setText(`\u{1F3D4}\uFE0F ${i}m`);let s=this.currentScore.totalScore;this.scoreText.setText(`\u{1F4B0} ${s.toLocaleString()}pts`);let n=this.comboSystem.getCurrentMultiplier();this.multiplierText.setText(`\u26A1 ${n.toFixed(1)}x`),n>=2?(this.multiplierText.setColor("#FF6600"),this.multiplierText.setStroke("#662200",2)):n>1?(this.multiplierText.setColor("#FFD700"),this.multiplierText.setStroke("#664400",1)):(this.multiplierText.setColor("#FFFFFF"),this.multiplierText.setStroke("#333333",1)),this.mainHUD.layout(),this.updateComboDisplay()}catch(t){console.warn("GameUI updateDisplay failed, HUD objects not ready yet:",t)}}showComboDisplay(){if(!this.comboVisible&&this.comboSystem.isComboActive()){this.comboVisible=!0;let t=this.scene.scale.width/2,i=this.scene.scale.height*.75,s=this.comboSystem.getCurrentComboLength(),n=this.comboSystem.getCurrentMultiplier();this.comboProgressBar&&(this.comboProgressBar.destroy(),this.comboProgressBar=null),this.comboProgressBar=this.scene.rexUI.add.circularProgress({radius:12,barColor:16737792,trackColor:3342336,centerColor:0,thickness:.3,startAngle:Phaser.Math.DegToRad(270),anticlockwise:!1}).setScrollFactor(0),this.comboToast=this.scene.rexUI.add.sizer({x:t,y:i,orientation:"vertical",background:this.scene.rexUI.add.roundRectangle(0,0,2,2,15,3342336,.95).setStrokeStyle(3,16737792,1),space:{left:20,right:20,top:15,bottom:15,item:8}}).add(this.scene.add.text(0,0,`\u{1F525} ${s}-HIT COMBO! \u{1F525}`,{fontSize:"24px",color:"#FF6600",fontStyle:"bold",fontFamily:"monospace",align:"center"}).setScrollFactor(0),{align:"center"}).add(this.scene.add.text(0,0,`${n.toFixed(1)}x MULTIPLIER`,{fontSize:"20px",color:"#FFD700",fontStyle:"bold",fontFamily:"monospace",align:"center"}).setScrollFactor(0),{align:"center"}).add(this.comboProgressBar,{align:"center"}).setDepth(1300).setScrollFactor(0).layout(),this.comboToast.setAlpha(0).setScale(.5),this.scene.tweens.add({targets:this.comboToast,alpha:1,scaleX:1,scaleY:1,duration:300,ease:"Back.out"})}}hideComboDisplay(){this.comboVisible&&this.comboToast&&(this.comboFadeOut=this.scene.tweens.add({targets:this.comboToast,alpha:0,scaleX:.8,scaleY:.8,duration:400,ease:"Power2.out",onComplete:()=>{this.comboToast?.destroy(),this.comboToast=null,this.comboVisible=!1,this.comboFadeOut=null,this.comboProgressBar&&(this.comboProgressBar.destroy(),this.comboProgressBar=null)}}))}updateComboDisplay(){if(!(!this.comboSystem||!this.comboProgressBar))try{let t=this.comboSystem.isComboActive(),i=this.comboSystem.getComboTimeRemaining();if(t&&!this.comboVisible?this.showComboDisplay():!t&&this.comboVisible&&this.hideComboDisplay(),t&&this.comboToast&&this.comboProgressBar){let s=Math.max(0,i/2500),n=65280;s<.3?n=16711680:s<.6&&(n=16737792),this.comboProgressBar.setBarColor(n),this.comboProgressBar.setValue(s);let o=this.comboSystem.getCurrentComboLength(),r=this.comboSystem.getCurrentMultiplier(),a=this.comboToast.getElement("items")[0],p=this.comboToast.getElement("items")[1];a&&a.setText(`\u{1F525} ${o}-HIT COMBO! \u{1F525}`),p&&p.setText(`${r.toFixed(1)}x MULTIPLIER`),this.comboToast.layout()}}catch(t){console.warn("GameUI updateComboDisplay failed, combo objects not ready yet:",t)}}showMilestoneNotification(t,i){let s=this.scene.scale.width/2,n=this.scene.scale.height*.3,o=this.scene.rexUI.add.toast({x:s,y:n,background:this.scene.rexUI.add.roundRectangle(0,0,2,2,18,4403,.95).setStrokeStyle(4,65535,1),text:this.scene.add.text(0,0,`\u{1F3AF} HEIGHT MILESTONE! \u{1F3AF}
\u{1F3D4}\uFE0F ${t}m REACHED! \u{1F3D4}\uFE0F
+${i.toLocaleString()} bonus points!`,{fontSize:"32px",color:"#00FFFF",fontStyle:"bold",fontFamily:"monospace",align:"center",lineSpacing:12,stroke:"#003366",strokeThickness:2}),space:{left:30,right:30,top:25,bottom:25},duration:{in:400,hold:2500,out:500},transitIn:"popup",transitOut:"scaleDown",destroy:!0}).setDepth(1400).setScrollFactor(0).showMessage()}showComboCompletedEffect(t){let i=this.scene.scale.width/2,s=this.scene.scale.height*.4,n=this.scene.rexUI.add.toast({x:i,y:s,background:this.scene.rexUI.add.roundRectangle(0,0,2,2,15,3342336,.95).setStrokeStyle(3,16737792,1),text:this.scene.add.text(0,0,`\u{1F525} COMBO COMPLETE! \u{1F525}
${t.chain}-HIT CHAIN
+${t.totalPoints.toLocaleString()} points!`,{fontSize:"28px",color:"#FF6600",fontStyle:"bold",fontFamily:"monospace",align:"center",lineSpacing:8,stroke:"#662200",strokeThickness:2}),space:{left:25,right:25,top:18,bottom:18},duration:{in:250,hold:2e3,out:350},transitIn:"popup",transitOut:"fadeOut",destroy:!0}).setDepth(1350).setScrollFactor(0).showMessage()}showComboBrokenEffect(){let t=this.scene.scale.width/2,i=this.scene.scale.height*.4,s=this.scene.rexUI.add.toast({x:t,y:i,background:this.scene.rexUI.add.roundRectangle(0,0,2,2,12,4403,.9).setStrokeStyle(2,4491519,1),text:this.scene.add.text(0,0,"\u2744\uFE0F COMBO COOLED DOWN \u2744\uFE0F",{fontSize:"24px",color:"#4488FF",fontStyle:"bold",fontFamily:"monospace",align:"center",stroke:"#002266",strokeThickness:1}),space:{left:20,right:20,top:15,bottom:15},duration:{in:200,hold:1200,out:300},transitIn:"popup",transitOut:"scaleDown",destroy:!0}).setDepth(1300).setScrollFactor(0).showMessage()}update(t){this.updateComboDisplay()}destroy(){j.off("score-height-gained",this.onScoreUpdate.bind(this)),j.off("height-milestone-reached",this.onHeightMilestone.bind(this)),j.off("combo-event-added",this.onComboEventAdded.bind(this)),j.off("combo-completed",this.onComboCompleted.bind(this)),j.off("combo-broken",this.onComboBroken.bind(this)),j.off("camera-state-updated",this.onCameraUpdate.bind(this)),this.comboFadeOut&&this.comboFadeOut.destroy(),this.mainHUD?.destroy(),this.heightText?.destroy(),this.scoreText?.destroy(),this.multiplierText?.destroy(),this.comboToast?.destroy(),this.comboProgressBar?.destroy()}};var lv=class{constructor(t,i,s){this.cameraState=null;this.platformCount=0;this.configTexts=new Map;this.configValues=new Map;this.isVisible=!1;this.updateInterval=100;this.lastUpdate=0;this.scene=t,this.player=i,this.gameConfig=s,this.setupDebugDisplay(),this.setupConfigPanel(),this.setupControls(),this.setupEventListeners(),this.initializeConfigValues()}setupDebugDisplay(){this.debugText=this.scene.add.text(10,10,"",{fontSize:"14px",color:"#ffffff",backgroundColor:"#000000",padding:{x:8,y:4}}).setDepth(1e3).setScrollFactor(0).setVisible(this.isVisible)}setupConfigPanel(){this.configPanel=this.scene.add.container(10,200),this.configPanel.setDepth(1e3).setScrollFactor(0).setVisible(this.isVisible);let t=this.scene.add.rectangle(0,0,300,450,0,.8);t.setOrigin(0,0),this.configPanel.add(t);let i=this.scene.add.text(10,10,"Physics Config (Press C to toggle)",{fontSize:"16px",color:"#ffff00"});this.configPanel.add(i),this.createConfigControl("Base Jump Speed","baseJumpSpeed",50,400,10),this.createConfigControl("Coupling Factor (k)","momentumCouplingFactor",60,.1,.8,.05),this.createConfigControl("Max H Speed","maxHorizontalSpeed",90,200,1e3,50),this.createConfigControl("H Acceleration","horizontalAcceleration",120,400,2e3,100),this.createConfigControl("H Drag","horizontalDrag",150,200,1500,50),this.createConfigControl("Gravity","gravity",180,400,1200,50);let s=this.scene.add.text(10,220,"Wall Bounce Config",{fontSize:"14px",color:"#00ffff"});this.configPanel.add(s),this.createWallConfigControl("Base Efficiency","baseBounceEfficiency",250,.5,1,.05),this.createWallConfigControl("Max Efficiency","maxBounceEfficiency",280,.8,1.5,.05),this.createWallConfigControl("Min Speed for Bounce","minSpeedForBounce",310,10,80,5)}createConfigControl(t,i,s,n,o,r=10){let a=this.scene.add.text(10,s,t,{fontSize:"12px",color:"#ffffff"});this.configPanel.add(a);let p=this.scene.add.text(200,s,"0",{fontSize:"12px",color:"#00ff00"});this.configPanel.add(p),this.configTexts.set(i,p);let h=this.scene.add.text(10,s+15,"- (Q/A)",{fontSize:"10px",color:"#ff6666"}).setInteractive(),u=this.scene.add.text(100,s+15,"+ (W/S)",{fontSize:"10px",color:"#66ff66"}).setInteractive();this.configPanel.add(h),this.configPanel.add(u),h.on("pointerdown",()=>this.adjustConfig(i,-r,n,o)),u.on("pointerdown",()=>this.adjustConfig(i,r,n,o)),h.configKey=i,h.step=-r,h.min=n,h.max=o,u.configKey=i,u.step=r,u.min=n,u.max=o}createWallConfigControl(t,i,s,n,o,r=.1){let a=this.scene.add.text(10,s,t,{fontSize:"12px",color:"#ffffff"});this.configPanel.add(a);let p=this.scene.add.text(200,s,"0",{fontSize:"12px",color:"#00ffff"});this.configPanel.add(p),this.configTexts.set(i,p);let h=this.scene.add.text(10,s+15,"- (T/Y)",{fontSize:"10px",color:"#ff6666"}).setInteractive(),u=this.scene.add.text(100,s+15,"+ (U/I)",{fontSize:"10px",color:"#66ff66"}).setInteractive();this.configPanel.add(h),this.configPanel.add(u),h.on("pointerdown",()=>this.adjustWallConfig(i,-r,n,o)),u.on("pointerdown",()=>this.adjustWallConfig(i,r,n,o))}setupEventListeners(){j.on("camera-state-updated",t=>{this.cameraState=t}),j.on("platform-generated",t=>{this.platformCount++}),j.on("platform-cleaned-up",t=>{this.platformCount--})}setupControls(){let t=this.scene.input.keyboard.addKeys("C,Q,W,A,S,E,R,T,Y,U,I,ONE,TWO,THREE,FOUR,D,COMMA");t.D.on("down",()=>{this.gameConfig.debug.enabled&&this.toggleDebugUI()}),t.C.on("down",()=>{this.gameConfig.debug.enabled&&this.toggleConfigPanel()}),t.COMMA.on("down",()=>{this.gameConfig.debug.enabled&&this.togglePlatforms()}),t.ONE.on("down",()=>{this.gameConfig.debug.enabled&&this.setPreset("beginner")}),t.TWO.on("down",()=>{this.gameConfig.debug.enabled&&this.setPreset("classic")}),t.THREE.on("down",()=>{this.gameConfig.debug.enabled&&this.setPreset("expert")}),t.FOUR.on("down",()=>{this.gameConfig.debug.enabled&&this.setPreset("speedrun")}),t.Q.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustConfig("momentumCouplingFactor",-.05,.1,.8)}),t.W.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustConfig("momentumCouplingFactor",.05,.1,.8)}),t.A.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustConfig("baseJumpSpeed",-25,200,600)}),t.S.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustConfig("baseJumpSpeed",25,200,600)}),t.E.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustConfig("maxHorizontalSpeed",-50,300,1e3)}),t.R.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustConfig("maxHorizontalSpeed",50,300,1e3)}),t.T.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustWallConfig("baseBounceEfficiency",-.05,.5,1)}),t.Y.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustWallConfig("baseBounceEfficiency",.05,.5,1)}),t.U.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustWallConfig("maxBounceEfficiency",-.05,.8,1.5)}),t.I.on("down",()=>{this.gameConfig.debug.enabled&&this.adjustWallConfig("maxBounceEfficiency",.05,.8,1.5)})}initializeConfigValues(){let t=this.gameConfig.physics,i=this.gameConfig.walls;this.configValues.set("baseJumpSpeed",t.baseJumpSpeed),this.configValues.set("momentumCouplingFactor",t.momentumCouplingFactor),this.configValues.set("maxHorizontalSpeed",t.maxHorizontalSpeed),this.configValues.set("horizontalAcceleration",t.horizontalAcceleration),this.configValues.set("horizontalDrag",t.horizontalDrag),this.configValues.set("gravity",t.gravity),this.configValues.set("baseBounceEfficiency",i.baseBounceEfficiency),this.configValues.set("maxBounceEfficiency",i.maxBounceEfficiency),this.configValues.set("minSpeedForBounce",i.minSpeedForBounce),this.updateConfigDisplay()}adjustConfig(t,i,s,n){let o=this.configValues.get(t)||0,r=Math.max(s,Math.min(n,o+i));this.configValues.set(t,r),this.gameConfig.updatePhysics({[t]:r}),this.player.updateConfiguration(this.gameConfig),this.updateConfigDisplay(),j.emit("config-updated",{key:t,value:r})}adjustWallConfig(t,i,s,n){let o=this.configValues.get(t)||0,r=Math.max(s,Math.min(n,o+i));this.configValues.set(t,r),this.gameConfig.updateWalls({[t]:r}),this.player.updateConfiguration(this.gameConfig),this.updateConfigDisplay(),j.emit("wall-config-updated",{key:t,value:r})}setPreset(t){this.gameConfig.applyPreset(t),this.player.updateConfiguration(this.gameConfig),this.initializeConfigValues(),this.updateConfigDisplay(),console.log(`\u{1F3AE} Applied ${t} physics preset for optimized gameplay`)}togglePlatforms(){j.emit("debug-toggle-platforms"),console.log("\u{1F3D7}\uFE0F Toggled platform generation for wall bounce testing")}updateConfigDisplay(){this.configValues.forEach((t,i)=>{let s=this.configTexts.get(i);s&&(i==="momentumCouplingFactor"||i==="baseBounceEfficiency"||i==="maxBounceEfficiency"?s.setText(t.toFixed(3)):s.setText(Math.round(t).toString()))})}toggleDebugUI(){this.isVisible=!this.isVisible,this.debugText.setVisible(this.isVisible),this.configPanel.setVisible(this.isVisible)}toggleConfigPanel(){this.isVisible&&this.configPanel.setVisible(!this.configPanel.visible)}update(t){this.isVisible&&t-this.lastUpdate>this.updateInterval&&(this.updateDebugInfo(),this.lastUpdate=t)}updateDebugInfo(){let t=this.player.getMovementState(),i=this.player.getJumpPreview(),s={bounceCount:t.wallBounceCount,contactSide:"None"},n=this.player.body,o=this.gameConfig.physics,r=this.gameConfig.walls,a=o.momentumCouplingFactor*Math.abs(t.horizontalSpeed),p=o.baseJumpSpeed+a,h=this.scene.game,u=Math.round(h.loop.actualFps),f=h.loop.targetFps,l=["=== PERFORMANCE ===",`FPS: ${u}/${f} (${u<f*.9?"POOR":"GOOD"})`,`Frame Time: ${Math.round(h.loop.delta)}ms`,"","=== CAMERA & HEIGHT ===",`Player Height: ${this.cameraState?Math.round(this.cameraState.playerHeight):0}px`,`Highest Height: ${this.cameraState?Math.round(this.cameraState.highestHeight):0}px`,`Camera Y: ${Math.round(this.scene.cameras.main.scrollY)}`,`Death Line Y: ${this.cameraState?Math.round(this.cameraState.deathLineY):0}`,"","=== PLATFORMS ===",`Active Platforms: ${this.platformCount}`,`Generation: ${this.platformCount>1?"ACTIVE":"WAITING"}`,"","=== PLAYER STATE ===",`Position: (${Math.round(n.x)}, ${Math.round(n.y)})`,`Velocity: (${Math.round(t.horizontalSpeed)}, ${Math.round(t.verticalSpeed)})`,`Grounded: ${t.isGrounded?"YES":"NO"}`,`Moving: ${t.isMoving?"YES":"NO"}`,"","=== JUMP PHYSICS ===",`Base Jump Speed: ${o.baseJumpSpeed}`,`Coupling Factor (k): ${o.momentumCouplingFactor.toFixed(3)}`,`Momentum Boost: +${Math.round(a)}`,`Expected Jump Speed: ${Math.round(p)}`,"","=== JUMP PREVIEW ===",`Flight Time: ${i.flightTime.toFixed(2)}s`,`Max Height: ${Math.round(i.maxHeight)}px`,`Horizontal Range: ${Math.round(i.horizontalRange)}px`,"","=== WALL BOUNCE ===",`Bounce Count: ${s.bounceCount}`,`Contact Side: ${s.contactSide||"None"}`,`Base Efficiency: ${r.baseBounceEfficiency.toFixed(2)}`,`Max Efficiency: ${r.maxBounceEfficiency.toFixed(2)}`,`Min Speed: ${r.minSpeedForBounce}px/s`,"","=== BOUNCE ELIGIBILITY ===",`Speed: ${Math.round(Math.abs(t.horizontalSpeed))}/${r.minSpeedForBounce} ${Math.abs(t.horizontalSpeed)>=r.minSpeedForBounce?"\u2713":"\u2717"}`,`Direction: ${t.horizontalSpeed<-10?"LEFT \u2713":t.horizontalSpeed>10?"RIGHT \u2713":"SLOW \u2717"}`,`Ready: ${Math.abs(t.horizontalSpeed)>=r.minSpeedForBounce&&Math.abs(t.horizontalSpeed)>10?"YES":"NO"}`,"","=== DEBUG INFO ===",`Exact H Speed: ${t.horizontalSpeed.toFixed(1)}`,`Grounded State: ${t.isGrounded?"GROUND":"AIR"}`,`Wall Bounce Ready: ${Math.abs(t.horizontalSpeed)>=r.minSpeedForBounce?"YES":"NO"}`,"","=== CONTROLS ===","C: Toggle Config Panel","Q/W: Adjust Coupling Factor","A/S: Adjust Base Jump Speed","E/R: Adjust Max H Speed","T/Y: Adjust Base Efficiency","U/I: Adjust Max Efficiency",",: Toggle Platforms","1: Beginner Preset","2: Classic Preset","3: Expert Preset","4: Speedrun Preset"].join(`
`);this.debugText.setText(l)}setVisible(t){this.isVisible=t,this.debugText.setVisible(t),this.configPanel.setVisible(t&&this.configPanel.visible)}destroy(){j.off("camera-state-updated"),j.off("platform-generated"),j.off("platform-cleaned-up"),this.debugText.destroy(),this.configPanel.destroy()}};var hv=class{constructor(t){this.isVisible=!1;this.scene=t,this.loadHighScores(),this.createUI(),this.setupEventListeners(),this.setupMobileInput()}createUI(){this.container=this.scene.add.container(0,0),this.container.setDepth(1e3),this.container.setVisible(!1),this.container.setScrollFactor(0),this.background=this.scene.add.graphics(),this.background.fillStyle(0,.8),this.background.fillRect(0,0,this.scene.scale.width,this.scene.scale.height),this.container.add(this.background),this.titleText=this.scene.add.text(this.scene.scale.width/2,100,"GAME OVER",{fontSize:"48px",color:"#ff6b6b",fontStyle:"bold",stroke:"#000000",strokeThickness:4,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:4,fill:!0}}),this.titleText.setOrigin(.5,.5),this.container.add(this.titleText),this.statsContainer=this.scene.add.container(this.scene.scale.width/2,250),this.container.add(this.statsContainer),this.highScoreContainer=this.scene.add.container(this.scene.scale.width/2,450),this.container.add(this.highScoreContainer);let t=ss.isMobileDevice()?"Tap anywhere to play again":"Press any movement key to play again";this.restartText=this.scene.add.text(this.scene.scale.width/2,this.scene.scale.height-80,t,{fontSize:"24px",color:"#ffffff",fontStyle:"italic",stroke:"#000000",strokeThickness:2}),this.restartText.setOrigin(.5,.5),this.container.add(this.restartText),this.scene.tweens.add({targets:this.restartText,alpha:.5,duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}setupEventListeners(){j.on("game-over",this.onGameOver.bind(this)),j.on("game-stats-collected",this.onGameStatsCollected.bind(this)),j.on("game-reset-starting",this.onGameReset.bind(this)),j.on("game-state-changed",this.onGameStateChanged.bind(this))}setupMobileInput(){ss.isMobileDevice()&&this.scene.input.on("pointerdown",this.onTouchRestart.bind(this))}onTouchRestart(t){this.isVisible&&(console.log("\u{1F4F1} Touch restart triggered on game over screen"),j.emit("request-game-restart"))}onGameOver(t){this.stats={finalHeight:Math.round(t.finalHeight||0),survivalTime:t.survivalTime||0,totalScore:0,comboScore:0,heightScore:0,longestCombo:0,totalCombos:0,perfectWallBounces:0,totalWallBounces:0}}onGameStatsCollected(t){this.stats&&(this.stats.totalScore=t.totalScore||0,this.stats.comboScore=t.comboScore||0,this.stats.heightScore=t.heightScore||0,this.stats.longestCombo=t.longestCombo||0,this.stats.totalCombos=t.totalCombos||0,this.stats.perfectWallBounces=t.perfectWallBounces||0,this.stats.totalWallBounces=t.totalWallBounces||0,this.updateHighScores(),this.updateStatsDisplay(),this.updateHighScoreDisplay(),this.show())}onGameReset(){console.log("\u{1F504} GameOverScreen: Game reset detected, hiding screen"),this.hide()}onGameStateChanged(t){t.newState==="playing"&&this.isVisible&&(console.log("\u{1F504} GameOverScreen: Game state changed to playing, hiding screen"),this.hide())}show(){this.isVisible=!0,this.container.setVisible(!0),this.container.setAlpha(0),this.scene.tweens.add({targets:this.container,alpha:1,duration:500,ease:"Power2.easeOut"}),this.titleText.setScale(0),this.scene.tweens.add({targets:this.titleText,scaleX:1,scaleY:1,duration:600,delay:200,ease:"Back.easeOut"}),this.statsContainer.setY(this.statsContainer.y+50),this.statsContainer.setAlpha(0),this.scene.tweens.add({targets:this.statsContainer,y:this.statsContainer.y-50,alpha:1,duration:500,delay:400,ease:"Power2.easeOut"}),this.highScoreContainer.setY(this.highScoreContainer.y+50),this.highScoreContainer.setAlpha(0),this.scene.tweens.add({targets:this.highScoreContainer,y:this.highScoreContainer.y-50,alpha:1,duration:500,delay:600,ease:"Power2.easeOut"})}hide(){this.isVisible&&(this.isVisible=!1,this.scene.tweens.add({targets:this.container,alpha:0,duration:300,ease:"Power2.easeIn",onComplete:()=>{this.container.setVisible(!1)}}))}updateStatsDisplay(){this.statsContainer.removeAll(!0);let t=0,i=-80,s=this.scene.add.text(t,i,"YOUR PERFORMANCE",{fontSize:"28px",color:"#4ecdc4",fontStyle:"bold",stroke:"#000000",strokeThickness:2});s.setOrigin(.5,.5),this.statsContainer.add(s),i+=50;let n=[{label:"Final Height",value:`${this.stats.finalHeight}m`,highlight:!0},{label:"Total Score",value:this.formatNumber(this.stats.totalScore),highlight:!0},{label:"Survival Time",value:this.formatTime(this.stats.survivalTime)},{label:"Height Score",value:this.formatNumber(this.stats.heightScore)},{label:"Combo Score",value:this.formatNumber(this.stats.comboScore)}];if(n.forEach((o,r)=>{let a=this.createStatRow(o.label,o.value,o.highlight);a.y=i+r*35,this.statsContainer.add(a)}),i+=n.length*35+30,this.stats.totalCombos>0||this.stats.longestCombo>0){let o=this.scene.add.text(t,i,"COMBO PERFORMANCE",{fontSize:"24px",color:"#feca57",fontStyle:"bold",stroke:"#000000",strokeThickness:2});o.setOrigin(.5,.5),this.statsContainer.add(o),i+=40;let r=[{label:"Longest Combo",value:`${this.stats.longestCombo}x`},{label:"Total Combos",value:this.stats.totalCombos.toString()}];this.stats.totalWallBounces>0&&r.push({label:"Perfect Wall Bounces",value:`${this.stats.perfectWallBounces}/${this.stats.totalWallBounces}`}),r.forEach((a,p)=>{let h=this.createStatRow(a.label,a.value);h.y=i+p*30,this.statsContainer.add(h)})}}updateHighScoreDisplay(){this.highScoreContainer.removeAll(!0);let t=0,i=-60,s=this.scene.add.text(t,i,"PERSONAL RECORDS",{fontSize:"28px",color:"#ff9ff3",fontStyle:"bold",stroke:"#000000",strokeThickness:2});s.setOrigin(.5,.5),this.highScoreContainer.add(s),i+=50,[{label:"Best Height",value:`${this.highScores.bestHeight}m`,isNew:this.stats.finalHeight>=this.highScores.bestHeight},{label:"Best Score",value:this.formatNumber(this.highScores.bestScore),isNew:this.stats.totalScore>=this.highScores.bestScore},{label:"Best Survival Time",value:this.formatTime(this.highScores.bestSurvivalTime),isNew:this.stats.survivalTime>=this.highScores.bestSurvivalTime},{label:"Best Combo",value:`${this.highScores.bestCombo}x`,isNew:this.stats.longestCombo>=this.highScores.bestCombo},{label:"Games Played",value:this.highScores.totalGamesPlayed.toString()}].forEach((o,r)=>{let a=this.createStatRow(o.label,o.value,!1,o.isNew);a.y=i+r*35,this.highScoreContainer.add(a)})}createStatRow(t,i,s=!1,n=!1){let o=this.scene.add.container(0,0),r=s?"#ffffff":"#cccccc",a=s?"#4ecdc4":n?"#ff6b6b":"#ffffff",p=this.scene.add.text(-150,0,t,{fontSize:s?"22px":"18px",color:r,fontStyle:s?"bold":"normal",stroke:"#000000",strokeThickness:1});p.setOrigin(0,.5);let h=this.scene.add.text(150,0,i,{fontSize:s?"22px":"18px",color:a,fontStyle:s||n?"bold":"normal",stroke:"#000000",strokeThickness:1});if(h.setOrigin(1,.5),o.add([p,h]),n){let u=this.scene.add.text(170,0,"NEW!",{fontSize:"14px",color:"#ff6b6b",fontStyle:"bold",stroke:"#000000",strokeThickness:1});u.setOrigin(0,.5),o.add(u),this.scene.tweens.add({targets:u,scaleX:1.2,scaleY:1.2,duration:500,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}return o}formatNumber(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}formatTime(t){let i=Math.floor(t/1e3),s=Math.floor(i/60),n=i%60;return s>0?`${s}m ${n}s`:`${n}s`}loadHighScores(){try{let t=localStorage.getItem("icyTowerHighScores");t?this.highScores=JSON.parse(t):this.resetHighScores()}catch(t){console.warn("Failed to load high scores:",t),this.resetHighScores()}}resetHighScores(){this.highScores={bestHeight:0,bestScore:0,bestSurvivalTime:0,bestCombo:0,totalGamesPlayed:0}}updateHighScores(){let t=!1;this.stats.finalHeight>this.highScores.bestHeight&&(this.highScores.bestHeight=this.stats.finalHeight,t=!0),this.stats.totalScore>this.highScores.bestScore&&(this.highScores.bestScore=this.stats.totalScore,t=!0),this.stats.survivalTime>this.highScores.bestSurvivalTime&&(this.highScores.bestSurvivalTime=this.stats.survivalTime,t=!0),this.stats.longestCombo>this.highScores.bestCombo&&(this.highScores.bestCombo=this.stats.longestCombo,t=!0),this.highScores.totalGamesPlayed++,this.saveHighScores(),t&&console.log("\u{1F3C6} New personal record achieved!")}saveHighScores(){try{localStorage.setItem("icyTowerHighScores",JSON.stringify(this.highScores))}catch(t){console.warn("Failed to save high scores:",t)}}isShowing(){return this.isVisible}destroy(){j.off("game-over",this.onGameOver.bind(this)),j.off("game-stats-collected",this.onGameStatsCollected.bind(this)),j.off("game-reset-starting",this.onGameReset.bind(this)),j.off("game-state-changed",this.onGameStateChanged.bind(this)),ss.isMobileDevice()&&this.scene.input.off("pointerdown",this.onTouchRestart.bind(this)),this.container&&this.container.destroy()}};var th=class{constructor(){this.currentState="playing";this.previousState="playing";this.setupEventListeners()}setupEventListeners(){j.on("game-over",this.onGameOver.bind(this))}onGameOver(){this.setState("game_over")}setState(t){t!==this.currentState&&(this.previousState=this.currentState,this.currentState=t,console.log(`\u{1F3AE} Game State: ${this.previousState} \u2192 ${this.currentState}`),j.emit("game-state-changed",{newState:this.currentState,previousState:this.previousState}))}getState(){return this.currentState}getPreviousState(){return this.previousState}isPlaying(){return this.currentState==="playing"}isPaused(){return this.currentState==="paused"}isGameOver(){return this.currentState==="game_over"}allowsGameplayUpdates(){return this.currentState==="playing"}allowsPlayerInput(){return this.currentState==="playing"}allowsCameraMovement(){return this.currentState==="playing"}allowsPhysicsUpdates(){return this.currentState==="playing"}pause(){this.currentState==="playing"&&this.setState("paused")}resume(){this.currentState==="paused"&&this.setState("playing")}gameOver(){this.setState("game_over")}reset(){console.log("\u{1F504} GameStateManager: Initiating controlled reset");let t=this.currentState;j.emit("game-reset-starting",{fromState:this.currentState,timestamp:Date.now()}),this.setState("playing"),j.emit("game-reset-complete",{fromState:t,newState:this.currentState,timestamp:Date.now()}),console.log("\u2705 GameStateManager: Reset complete")}destroy(){j.off("game-over",this.onGameOver.bind(this))}};var eh=class{constructor(t){this.soundEffects=new Map;this.activeSounds=new Set;this.SOUND_MAPPINGS={"jump-normal":"sfx_jump","jump-high":"sfx_jump-high","wall-bounce":"sfx_bump","wall-bounce-perfect":"sfx_gem","combo-complete":"sfx_coin","combo-broken":"sfx_disappear",milestone:"sfx_magic","game-over":"sfx_hurt","ui-select":"sfx_select","special-effect":"sfx_throw"};this.scene=t,this.settings={masterVolume:0,sfxVolume:.8,musicVolume:.6,enabled:!0},this.loadSettings(),this.loadSoundMappings(),this.setupEventListeners()}loadSettings(){try{let t=localStorage.getItem("icy-tower-audio-settings");t&&(this.settings=_(_({},this.settings),JSON.parse(t)))}catch(t){console.warn("AudioManager: Failed to load audio settings:",t)}}saveSettings(){try{localStorage.setItem("icy-tower-audio-settings",JSON.stringify(this.settings))}catch(t){console.warn("AudioManager: Failed to save audio settings:",t)}}setupEventListeners(){j.on("player-jumped",this.onPlayerJump.bind(this)),j.on("player-wall-bounce",this.onWallBounce.bind(this)),j.on("combo-event-added",this.onComboEvent.bind(this)),j.on("combo-completed",this.onComboCompleted.bind(this)),j.on("combo-broken",this.onComboBroken.bind(this)),j.on("height-milestone-reached",this.onHeightMilestone.bind(this)),j.on("game-over",this.onGameOver.bind(this))}onPlayerJump(t){let{horizontalSpeed:i,jumpPower:s}=t;i>300||s>600?this.playSound("jump-high",{volume:.7,rate:1+i/1e3}):this.playSound("jump-normal",{volume:.6,rate:.9+i/1500})}onWallBounce(t){let{timingQuality:i,momentumPreserved:s}=t;i==="perfect"?this.playSound("wall-bounce-perfect",{volume:.8,rate:1.2}):this.playSound("wall-bounce",{volume:.7,rate:1+s/1e3})}onComboEvent(t){this.playSound("ui-select",{volume:.3,rate:1.5})}onComboCompleted(t){let{chain:i}=t;this.playSound("combo-complete",{volume:Math.min(.8,.4+i*.1),rate:Math.min(1.5,1+i*.1)})}onComboBroken(){this.playSound("combo-broken",{volume:.5,rate:.8})}onHeightMilestone(t){let{milestone:i}=t;this.playSound("milestone",{volume:.9,rate:1+i/1e4})}onGameOver(){this.playSound("game-over",{volume:.8,rate:.9})}playSound(t,i={}){if(!this.settings.enabled)return;let s=this.SOUND_MAPPINGS[t]||t;if(!this.scene.cache.audio.exists(s)){console.warn(`AudioManager: Sound '${s}' not found`);return}try{let n=this.scene.sound.add(s,{volume:this.calculateVolume(i.volume||1),rate:i.rate||1,detune:i.detune||0,loop:i.loop||!1});n.play(),this.activeSounds.add(n),n.once("complete",()=>{this.activeSounds.delete(n),n.destroy()})}catch(n){console.warn(`AudioManager: Failed to play sound '${s}':`,n)}}calculateVolume(t){return t*this.settings.sfxVolume*this.settings.masterVolume}getSettings(){return _({},this.settings)}updateSettings(t){this.settings=_(_({},this.settings),t),this.saveSettings(),j.emit("audio-settings-changed",this.settings)}setMasterVolume(t){this.updateSettings({masterVolume:Math.max(0,Math.min(1,t))})}setSfxVolume(t){this.updateSettings({sfxVolume:Math.max(0,Math.min(1,t))})}setEnabled(t){this.updateSettings({enabled:t}),t||this.stopAllSounds()}updateSoundMapping(t,i){this.SOUND_MAPPINGS[t]=i;try{let s=localStorage.getItem("icy-tower-sound-mappings"),n=s?JSON.parse(s):{};n[t]=i,localStorage.setItem("icy-tower-sound-mappings",JSON.stringify(n))}catch(s){console.warn("AudioManager: Failed to save sound mapping:",s)}}loadSoundMappings(){try{let t=localStorage.getItem("icy-tower-sound-mappings");if(t){let i=JSON.parse(t);Object.assign(this.SOUND_MAPPINGS,i)}}catch(t){console.warn("AudioManager: Failed to load sound mappings:",t)}}stopAllSounds(){this.activeSounds.forEach(t=>{t.isPlaying&&t.stop()}),this.activeSounds.clear()}pauseAllSounds(){this.activeSounds.forEach(t=>{t.isPlaying&&t.pause()})}resumeAllSounds(){this.activeSounds.forEach(t=>{t.isPaused&&t.resume()})}playJumpSound(t=0){this.onPlayerJump({horizontalSpeed:t,jumpPower:500})}playWallBounceSound(t=!1){this.onWallBounce({timingQuality:t?"perfect":"good",momentumPreserved:t?800:600})}playComboSound(t=1){this.onComboCompleted({chain:t})}destroy(){j.off("player-jumped",this.onPlayerJump.bind(this)),j.off("player-wall-bounce",this.onWallBounce.bind(this)),j.off("combo-event-added",this.onComboEvent.bind(this)),j.off("combo-completed",this.onComboCompleted.bind(this)),j.off("combo-broken",this.onComboBroken.bind(this)),j.off("height-milestone-reached",this.onHeightMilestone.bind(this)),j.off("game-over",this.onGameOver.bind(this)),this.stopAllSounds(),this.soundEffects.clear()}};var uv=class{constructor(t,i){this.isVisible=!1;this.currentMenu="main";this.AVAILABLE_SOUNDS=[{label:"Jump Sound",value:"sfx_jump"},{label:"High Jump Sound",value:"sfx_jump-high"},{label:"Bump Sound",value:"sfx_bump"},{label:"Coin Sound",value:"sfx_coin"},{label:"Disappear Sound",value:"sfx_disappear"},{label:"Gem Sound",value:"sfx_gem"},{label:"Hurt Sound",value:"sfx_hurt"},{label:"Magic Sound",value:"sfx_magic"},{label:"Select Sound",value:"sfx_select"},{label:"Throw Sound",value:"sfx_throw"}];this.SOUND_EVENTS=[{key:"jump-normal",label:"Normal Jump",defaultSound:"sfx_jump"},{key:"jump-high",label:"High Speed Jump",defaultSound:"sfx_jump-high"},{key:"wall-bounce",label:"Wall Bounce",defaultSound:"sfx_bump"},{key:"wall-bounce-perfect",label:"Perfect Wall Bounce",defaultSound:"sfx_gem"},{key:"combo-complete",label:"Combo Complete",defaultSound:"sfx_coin"},{key:"combo-broken",label:"Combo Broken",defaultSound:"sfx_disappear"},{key:"milestone",label:"Height Milestone",defaultSound:"sfx_magic"},{key:"game-over",label:"Game Over",defaultSound:"sfx_hurt"},{key:"ui-select",label:"UI Selection",defaultSound:"sfx_select"}];this.scene=t,this.audioManager=i,this.setupInputHandlers()}setupInputHandlers(){this.scene.input.keyboard?.on("keydown-ESC",t=>{console.log("ESC pressed, menu visible:",this.isVisible),this.isVisible?this.hideMenu():this.showMenu()})}showMenu(){this.isVisible||(this.isVisible=!0,this.currentMenu="main",j.emit("game-paused",!0),this.createMenuBackground(),this.createMainMenu())}hideMenu(){this.isVisible&&(this.isVisible=!1,j.emit("game-paused",!1),this.destroyMenus())}createMenuBackground(){this.menuBackground=this.scene.add.rectangle(this.scene.scale.width/2,this.scene.scale.height/2,this.scene.scale.width,this.scene.scale.height,0,.7).setDepth(2e3).setScrollFactor(0).setInteractive().on("pointerdown",(t,i,s,n)=>{console.log("Background clicked - closing menu"),n.stopPropagation(),this.hideMenu()})}createMainMenu(){let t=this.scene.scale.width/2,i=this.scene.scale.height/2;this.mainMenu=this.scene.rexUI.add.sizer({x:t,y:i,orientation:"vertical",space:{item:20}});let s=this.scene.rexUI.add.label({background:this.scene.rexUI.add.roundRectangle(0,0,2,2,10,3355443,.9),text:this.scene.add.text(0,0,"\u23F8\uFE0F GAME PAUSED",{fontSize:32,resolution:2,color:"#ffffff",fontStyle:"bold"}),space:{left:20,right:20,top:15,bottom:15}}),n=this.createButton("\u25B6\uFE0F Resume Game",()=>{this.hideMenu()}),o=this.createButton("\u2699\uFE0F Audio Settings",()=>{this.showSettingsMenu()}),r=this.createButton("\u{1F504} Restart Game",()=>{this.hideMenu(),j.emit("request-game-restart")});this.mainMenu.add(s,{align:"center"}).add(n,{align:"center"}).add(o,{align:"center"}).add(r,{align:"center"}).setDepth(2100).setScrollFactor(0).layout()}showSettingsMenu(){this.currentMenu="settings",this.mainMenu.setVisible(!1),this.createSettingsMenu()}createSettingsMenu(){let t=this.scene.scale.width/2,i=this.scene.scale.height/2;this.settingsMenu=this.scene.rexUI.add.scrollablePanel({x:t,y:i,width:600,height:500,scrollMode:"vertical",background:this.scene.rexUI.add.roundRectangle(0,0,2,2,15,2236962,.95).setStrokeStyle(2,16755200,1),panel:{child:this.createSettingsContent(),mask:{padding:1}},slider:{track:this.scene.rexUI.add.roundRectangle(0,0,20,10,6,5592405),thumb:this.scene.rexUI.add.roundRectangle(0,0,20,20,8,16755200)},space:{left:20,right:20,top:20,bottom:20,panel:10}}).setDepth(2100).setScrollFactor(0).layout()}createSettingsContent(){let t=this.scene.rexUI.add.sizer({orientation:"vertical",space:{item:15}}),i=this.scene.add.text(0,0,"\u{1F50A} Audio Settings",{fontSize:28,resolution:2,color:"#ffaa00",fontStyle:"bold"});t.add(i,{align:"center"}),t.add(this.createVolumeSlider("Master Volume",this.audioManager.getSettings().masterVolume,o=>this.audioManager.setMasterVolume(o)),{align:"center"}),t.add(this.createVolumeSlider("Sound Effects Volume",this.audioManager.getSettings().sfxVolume,o=>this.audioManager.setSfxVolume(o)),{align:"center"});let s=this.scene.add.text(0,0,"\u{1F3B5} Sound Event Assignments",{fontSize:22,resolution:2,color:"#ffffff",fontStyle:"bold"});t.add(s,{align:"center"}),this.SOUND_EVENTS.forEach(o=>{t.add(this.createSoundEventRow(o),{align:"center"})});let n=this.createButton("\u2B05\uFE0F Back to Menu",()=>{this.showMainMenu()});return t.add(n,{align:"center"}),t}createVolumeSlider(t,i,s){return this.scene.rexUI.add.sizer({orientation:"horizontal",space:{item:10}}).add(this.scene.add.text(0,0,t,{fontSize:16,resolution:2,color:"#ffffff"}),{proportion:0,align:"center-left"}).add(this.scene.rexUI.add.slider({width:200,height:20,orientation:"horizontal",track:this.scene.rexUI.add.roundRectangle(0,0,2,2,6,5592405),thumb:this.scene.rexUI.add.roundRectangle(0,0,20,20,10,16755200),value:i,valuechangeCallback:s}),{proportion:0,align:"center"}).layout()}createSoundEventRow(t){let i=this.scene.rexUI.add.sizer({orientation:"horizontal",space:{item:10}}),s=this.scene.add.text(0,0,t.label,{fontSize:14,color:"#ffffff",resolution:2});i.add(s,{proportion:1,align:"center-left"});let n=this.scene.rexUI.add.dropDownList({background:this.scene.rexUI.add.roundRectangle(0,0,2,2,5,4473924).setStrokeStyle(1,8947848),text:this.scene.add.text(0,0,this.getSoundLabel(t.defaultSound),{fontSize:12,color:"#ffffff",resolution:2}),space:{left:8,right:8,top:5,bottom:5},options:this.AVAILABLE_SOUNDS.map(r=>({text:r.label,value:r.value})),list:{createBackgroundCallback:()=>this.scene.rexUI.add.roundRectangle(0,0,2,2,5,3355443,.95).setStrokeStyle(1,8947848).setDepth(2300),createButtonCallback:(r,a)=>r.rexUI.add.label({background:r.rexUI.add.roundRectangle(0,0,2,2,0,4473924,.01),text:r.add.text(0,0,a.text,{fontSize:12,color:"#ffffff",resolution:2}),space:{left:8,right:8,top:4,bottom:4}}).setDepth(2350),onButtonClick:(r,a,p,h)=>{let u=this.AVAILABLE_SOUNDS[a];this.audioManager.updateSoundMapping(t.key,u.value),console.log(`Sound mapping updated: ${t.key} -> ${u.value}`),n.getElement("text").setText(u.label),n.layout(),h&&h.stopPropagation()}}}).setDepth(2200).on("pointerdown",(r,a,p,h)=>{h&&h.stopPropagation()});i.add(n,{proportion:0,align:"center"});let o=this.scene.rexUI.add.label({background:this.scene.rexUI.add.roundRectangle(0,0,2,2,5,6710886).setStrokeStyle(1,11184810),text:this.scene.add.text(0,0,"\u{1F50A}",{fontSize:12,resolution:2}),space:{left:6,right:6,top:4,bottom:4}}).setInteractive().on("pointerdown",(r,a,p,h)=>{console.log(`Playing preview sound for: ${t.key}`),this.audioManager.playSound(t.key),h&&h.stopPropagation()});return i.add(o,{proportion:0,align:"center"}),i.layout()}getSoundLabel(t){let i=this.AVAILABLE_SOUNDS.find(s=>s.value===t);return i?i.label:t}showMainMenu(){this.currentMenu="main",this.settingsMenu?.setVisible(!1),this.mainMenu.setVisible(!0)}createButton(t,i){let s=this.scene.rexUI.add.label({background:this.scene.rexUI.add.roundRectangle(0,0,2,2,8,4473924).setStrokeStyle(2,16755200),text:this.scene.add.text(0,0,t,{fontSize:18,color:"#ffffff",fontStyle:"bold",resolution:2}),space:{left:20,right:20,top:10,bottom:10}});return s.setInteractive(),s.on("pointerdown",(n,o,r,a)=>{console.log("Button clicked:",t),a&&a.stopPropagation(),i()}),s.on("pointerover",()=>{s.getElement("background").setFillStyle(6710886)}),s.on("pointerout",()=>{s.getElement("background").setFillStyle(4473924)}),s}destroyMenus(){this.menuBackground?.destroy(),this.mainMenu?.destroy(),this.settingsMenu?.destroy(),this.menuBackground=null,this.mainMenu=null,this.settingsMenu=null}isMenuVisible(){return this.isVisible}destroy(){this.destroyMenus(),this.scene.input.keyboard?.off("keydown-ESC")}};var ih=class{constructor(t){this.currentBiomeIndex=0;this.platformCount=0;this.BIOME_TRANSITION_POINTS=[25,50,75,100];this.BIOME_THEMES=[{id:"grassland",name:"Grassland Plains",backgroundTexture:"background-grass",platformTextures:{left:"terrain_grass_cloud_left",middle:"terrain_grass_cloud_middle",right:"terrain_grass_cloud_right"},wallTextures:{top:"terrain_grass_vertical_top",middle:"terrain_grass_vertical_middle",bottom:"terrain_grass_vertical_bottom"},colors:{primary:"#4a7c59",secondary:"#8fbc8f"}},{id:"desert",name:"Desert Dunes",backgroundTexture:"background-sand",platformTextures:{left:"terrain_sand_cloud_left",middle:"terrain_sand_cloud_middle",right:"terrain_sand_cloud_right"},wallTextures:{top:"terrain_sand_vertical_top",middle:"terrain_sand_vertical_middle",bottom:"terrain_sand_vertical_bottom"},colors:{primary:"#c4a484",secondary:"#f4e4bc"}},{id:"underground",name:"Underground Caverns",backgroundTexture:"background-dirt",platformTextures:{left:"terrain_dirt_cloud_left",middle:"terrain_dirt_cloud_middle",right:"terrain_dirt_cloud_right"},wallTextures:{top:"terrain_dirt_vertical_top",middle:"terrain_dirt_vertical_middle",bottom:"terrain_dirt_vertical_bottom"},colors:{primary:"#654321",secondary:"#8b6914"}},{id:"mystical",name:"Mystical Mushroom Forest",backgroundTexture:"background-mushrooms",platformTextures:{left:"terrain_purple_cloud_left",middle:"terrain_purple_cloud_middle",right:"terrain_purple_cloud_right"},wallTextures:{top:"terrain_purple_vertical_top",middle:"terrain_purple_vertical_middle",bottom:"terrain_purple_vertical_bottom"},colors:{primary:"#8a2be2",secondary:"#dda0dd"}},{id:"winter",name:"Frozen Peaks",backgroundTexture:"background-cloud",platformTextures:{left:"terrain_snow_cloud_left",middle:"terrain_snow_cloud_middle",right:"terrain_snow_cloud_right"},wallTextures:{top:"terrain_snow_vertical_top",middle:"terrain_snow_vertical_middle",bottom:"terrain_snow_vertical_bottom"},colors:{primary:"#b0e0e6",secondary:"#f0f8ff"}},{id:"fortress",name:"Stone Fortress",backgroundTexture:"background-sky",platformTextures:{left:"terrain_stone_cloud_left",middle:"terrain_stone_cloud_middle",right:"terrain_stone_cloud_right"},wallTextures:{top:"terrain_stone_vertical_top",middle:"terrain_stone_vertical_middle",bottom:"terrain_stone_vertical_bottom"},colors:{primary:"#696969",secondary:"#a9a9a9"}}];this.scene=t,this.currentBiome=this.BIOME_THEMES[0],this.setupEventListeners(),console.log(`\u{1F30D} BiomeManager initialized - Starting biome: ${this.currentBiome.name}`),this.emitBiomeChanged()}setupEventListeners(){j.on("platform-generated",this.onPlatformGenerated.bind(this)),j.on("game-fully-reset",this.onGameReset.bind(this))}onPlatformGenerated(){this.platformCount++,this.shouldTransitionAtCurrentCount()&&this.transitionToNextBiome()}shouldTransitionAtCurrentCount(){return!!(this.BIOME_TRANSITION_POINTS.includes(this.platformCount)||this.platformCount>100&&(this.platformCount-100)%50===0)}onGameReset(){this.platformCount=0,this.currentBiomeIndex=0,this.currentBiome=this.BIOME_THEMES[0],console.log("\u{1F30D} BiomeManager reset to starting biome"),this.emitBiomeChanged()}transitionToNextBiome(){let t=this.currentBiome;this.currentBiomeIndex=(this.currentBiomeIndex+1)%this.BIOME_THEMES.length,this.currentBiome=this.BIOME_THEMES[this.currentBiomeIndex],console.log(`\u{1F30D} Biome transition: ${t.name} \u2192 ${this.currentBiome.name} (Platform ${this.platformCount})`),this.emitBiomeChanged()}emitBiomeChanged(){j.emit("biome-changed",{previousBiome:this.currentBiomeIndex>0?this.BIOME_THEMES[this.currentBiomeIndex-1]:null,currentBiome:this.currentBiome,platformCount:this.platformCount,biomeIndex:this.currentBiomeIndex})}getCurrentBiome(){return _({},this.currentBiome)}getBiomeByIndex(t){let i=t%this.BIOME_THEMES.length;return _({},this.BIOME_THEMES[i])}getBiomeForPlatformCount(t){let i=this.calculateBiomeIndexForPlatformCount(t);return _({},this.BIOME_THEMES[i])}getCurrentBiomeIndex(){return this.currentBiomeIndex}getPlatformCount(){return this.platformCount}getPlatformsUntilNextBiome(){if(this.platformCount<100){for(let i of this.BIOME_TRANSITION_POINTS)if(this.platformCount<i)return i-this.platformCount}return Math.ceil((this.platformCount-100)/50)*50+100-this.platformCount}getAllBiomes(){return this.BIOME_THEMES.map(t=>_({},t))}forceBiomeTransition(t){t!==void 0?this.currentBiomeIndex=Math.max(0,t%this.BIOME_THEMES.length):this.currentBiomeIndex=(this.currentBiomeIndex+1)%this.BIOME_THEMES.length,this.currentBiome=this.BIOME_THEMES[this.currentBiomeIndex],console.log(`\u{1F30D} [DEBUG] Force biome transition to: ${this.currentBiome.name}`),this.emitBiomeChanged()}setPlatformCount(t){this.platformCount=Math.max(0,t);let i=this.calculateBiomeIndexForPlatformCount(t);i!==this.currentBiomeIndex&&(this.currentBiomeIndex=i,this.currentBiome=this.BIOME_THEMES[this.currentBiomeIndex],console.log(`\u{1F30D} [DEBUG] Platform count set to ${t}, biome: ${this.currentBiome.name}`),this.emitBiomeChanged())}calculateBiomeIndexForPlatformCount(t){let i=0;for(let s of this.BIOME_TRANSITION_POINTS)if(t>=s)i++;else break;if(t>100){let s=Math.floor((t-100)/50);i+=s}return i%this.BIOME_THEMES.length}getDebugInfo(){return{currentBiome:this.currentBiome.name,biomeIndex:this.currentBiomeIndex,platformCount:this.platformCount,platformsUntilNext:this.getPlatformsUntilNextBiome(),totalBiomes:this.BIOME_THEMES.length}}destroy(){j.off("platform-generated",this.onPlatformGenerated.bind(this)),j.off("game-fully-reset",this.onGameReset.bind(this))}};var rh=class{constructor(t,i){this.platformCount=0;this.lastUpdateHeight=0;this.UPDATE_THRESHOLD=8;this.currentColorHex="#4a7c59";this.targetColorHex="#4a7c59";this.SMOOTHING_FACTOR=.02;this.scene=t,this.biomeManager=i,this.boundOnBiomeChanged=this.onBiomeChanged.bind(this),this.boundOnCameraStateUpdated=this.onCameraStateUpdated.bind(this),this.boundOnGameReset=this.onGameReset.bind(this),this.initializeColors(),this.setupEventListeners(),console.log("\u{1F3A8} BackgroundColorManager initialized")}initializeColors(){this.currentBiome=this.biomeManager.getCurrentBiome(),this.nextBiome=this.getNextBiome(),this.currentColorHex=this.currentBiome.colors.primary,this.targetColorHex=this.currentBiome.colors.primary,this.scene.cameras.main.setBackgroundColor(this.currentColorHex)}setupEventListeners(){j.on("biome-changed",this.boundOnBiomeChanged),j.on("camera-state-updated",this.boundOnCameraStateUpdated),j.on("game-fully-reset",this.boundOnGameReset)}onBiomeChanged(t){console.log(`\u{1F3A8} Biome changed: ${t.currentBiome.name} - updating background colors`),this.currentBiome=t.currentBiome,this.nextBiome=this.getNextBiome(),this.platformCount=t.platformCount,this.updateTargetColor()}onCameraStateUpdated(t){if(!this.scene||!this.scene.scene?.isActive()){console.warn("\u{1F3A8} BackgroundColorManager: Scene not active, ignoring camera update");return}if(!this.scene.cameras?.main){console.warn("\u{1F3A8} BackgroundColorManager: Camera not available during update, ignoring");return}Math.abs(t.playerHeight-this.lastUpdateHeight)>=this.UPDATE_THRESHOLD&&(this.lastUpdateHeight=t.playerHeight,this.updateTargetColor()),this.smoothBackgroundColor()}onGameReset(){this.platformCount=0,this.lastUpdateHeight=0,this.initializeColors(),console.log("\u{1F3A8} BackgroundColorManager reset")}updateTargetColor(){this.targetColorHex=this.calculateInterpolatedColor()}smoothBackgroundColor(){if(this.currentColorHex===this.targetColorHex||!this.scene||!this.scene.scene?.isActive()||!this.scene.cameras?.main)return;let t=this.hexToRgb(this.currentColorHex),i=this.hexToRgb(this.targetColorHex),s={r:Phaser.Math.Linear(t.r,i.r,this.SMOOTHING_FACTOR),g:Phaser.Math.Linear(t.g,i.g,this.SMOOTHING_FACTOR),b:Phaser.Math.Linear(t.b,i.b,this.SMOOTHING_FACTOR)};this.currentColorHex=this.rgbToHex(s),this.scene.cameras.main.setBackgroundColor(this.currentColorHex)}calculateInterpolatedColor(){let t=this.getBiomeProgress(),i=this.getTransitionProgress(),s=this.hexToRgb(this.currentBiome.colors.primary),n=this.hexToRgb(this.currentBiome.colors.secondary),o=this.hexToRgb(this.nextBiome.colors.primary),r=t*.3,a=this.interpolateRgb(s,n,r);if(i>.4){let h=(i-.4)/.6*.5,u=this.interpolateRgb(a,o,h);return this.rgbToHex(u)}return this.rgbToHex(a)}hexToRgb(t){let i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:{r:0,g:0,b:0}}rgbToHex(t){let i=s=>{let n=Math.round(Math.max(0,Math.min(255,s))).toString(16);return n.length===1?"0"+n:n};return`#${i(t.r)}${i(t.g)}${i(t.b)}`}interpolateRgb(t,i,s){return{r:t.r+(i.r-t.r)*s,g:t.g+(i.g-t.g)*s,b:t.b+(i.b-t.b)*s}}getBiomeProgress(){let t=this.lastUpdateHeight%400;return Math.min(1,t/400)}getTransitionProgress(){let t=this.biomeManager.getPlatformsUntilNextBiome(),i=this.calculateCurrentBiomeLength();if(i<=0)return 0;let s=1-t/i;return Math.max(0,Math.min(1,s))}calculateCurrentBiomeLength(){let t=this.biomeManager.getPlatformCount();return t<25||t<50||t<75||t<100?25:50}getNextBiome(){let t=this.biomeManager.getAllBiomes(),s=(this.biomeManager.getCurrentBiomeIndex()+1)%t.length;return t[s]}forceColorUpdate(){this.updateTargetColor(),console.log(`\u{1F3A8} [DEBUG] Background color updated - Current biome: ${this.currentBiome.name}`)}getColorDebugInfo(){let t=this.calculateInterpolatedColor(),i=this.hexToRgb(this.currentColorHex),s=this.hexToRgb(t);return{currentBiome:this.currentBiome.name,nextBiome:this.nextBiome.name,biomeProgress:this.getBiomeProgress(),transitionProgress:this.getTransitionProgress(),currentColor:{hex:this.currentColorHex,r:i.r,g:i.g,b:i.b},targetColor:{hex:t,r:s.r,g:s.g,b:s.b},platformCount:this.platformCount,lastUpdateHeight:this.lastUpdateHeight,smoothingFactor:this.SMOOTHING_FACTOR}}destroy(){console.log("\u{1F3A8} BackgroundColorManager destroy() called - removing EventBus listeners"),j.off("biome-changed",this.boundOnBiomeChanged),j.off("camera-state-updated",this.boundOnCameraStateUpdated),j.off("game-fully-reset",this.boundOnGameReset),this.scene=null,this.biomeManager=null,console.log("\u2705 BackgroundColorManager destroyed and EventBus listeners removed")}};var nh=(u=>(u.SPEED_BOOST="speed_boost",u.JUMP_AMPLIFIER="jump_amplifier",u.COMBO_MULTIPLIER="combo_multiplier",u.INVINCIBILITY="invincibility",u.DOUBLE_JUMP="double_jump",u.WALL_MAGNETISM="wall_magnetism",u.GOLDEN_TOUCH="golden_touch",u.PLATFORM_SPRINGS="platform_springs",u.MOMENTUM_KEEPER="momentum_keeper",u.HIGH_SCORE_MULTIPLIER="high_score_multiplier",u))(nh||{}),as={speed_boost:{type:"speed_boost",name:"Velocity Gem",description:"Increases movement speed by 50%",assetKey:"gem_blue",audioKey:"sfx_gem",duration:15e3,rarity:2,visualEffect:!0,effectColor:4491519,glowIntensity:.7},jump_amplifier:{type:"jump_amplifier",name:"Super Spring",description:"Jump power increased by 250%",assetKey:"gem_green",audioKey:"sfx_jump-high",duration:2e4,rarity:2,visualEffect:!0,effectColor:4521796,glowIntensity:.6},combo_multiplier:{type:"combo_multiplier",name:"Chain Master",description:"Combo multiplier increased by 2x",assetKey:"star",audioKey:"sfx_magic",duration:3e4,rarity:4,visualEffect:!0,effectColor:16755200,glowIntensity:.9},invincibility:{type:"invincibility",name:"Guardian Shield",description:"Immunity to death line for 10 seconds",assetKey:"heart",audioKey:"sfx_magic",duration:1e4,rarity:5,visualEffect:!0,effectColor:16729156,glowIntensity:1},double_jump:{type:"double_jump",name:"Air Walker",description:"Grants double jump ability",assetKey:"key_yellow",audioKey:"sfx_jump",rarity:3,visualEffect:!1},wall_magnetism:{type:"wall_magnetism",name:"Wall Grip",description:"Perfect wall bounce timing window doubled",assetKey:"key_blue",audioKey:"sfx_coin",duration:25e3,rarity:3,visualEffect:!0,effectColor:35071,glowIntensity:.5},golden_touch:{type:"golden_touch",name:"Midas Touch",description:"All combos give double score points",assetKey:"coin_gold",audioKey:"sfx_coin",rarity:4,visualEffect:!1},platform_springs:{type:"platform_springs",name:"Bouncy Platforms",description:"All platform landings boost jump height",assetKey:"gem_red",audioKey:"sfx_jump-high",duration:18e3,rarity:2,visualEffect:!0,effectColor:16729224,glowIntensity:.6},momentum_keeper:{type:"momentum_keeper",name:"Momentum Lock",description:"Horizontal momentum never decreases",assetKey:"key_green",audioKey:"sfx_magic",rarity:5,visualEffect:!1},high_score_multiplier:{type:"high_score_multiplier",name:"Score Storm",description:"All height gains worth 3x points",assetKey:"coin_silver",audioKey:"sfx_select",duration:12e3,rarity:4,visualEffect:!0,effectColor:13421772,glowIntensity:.8}};var dv=class extends Phaser.GameObjects.Sprite{constructor(i,s,n,o){let r=as[o];super(i,s,n,r.assetKey);this.collected=!1;this.config=r,this.baseY=n,i.add.existing(this),i.physics.add.existing(this);let a=this.body;a.setSize(this.width*.8,this.height*.8),a.setImmovable(!0),a.setGravityY(0),a.checkCollision.none=!0,a.moves=!1,this.setDepth(100),this.setupVisualEffects(),this.startFloatingAnimation(),console.log(`\u{1F48E} Powerup created: ${r.name} at (${s}, ${n})`)}setupVisualEffects(){if(this.config.visualEffect&&this.config.effectColor&&this.config.glowIntensity){this.glowEffect=this.scene.add.graphics(),this.glowEffect.setDepth(this.depth-1);let i=Math.max(this.width,this.height)*.8;this.glowEffect.fillStyle(this.config.effectColor,this.config.glowIntensity*.3),this.glowEffect.fillCircle(0,0,i),this.scene.add.existing(this.glowEffect),this.glowEffect.setPosition(this.x,this.y),this.scene.tweens.add({targets:this.glowEffect,alpha:{from:.3,to:.8},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}this.setScale(1.2)}startFloatingAnimation(){this.floatTween=this.scene.tweens.add({targets:this,y:this.baseY-8,duration:2e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"})}checkCollision(i){if(this.collected)return!1;let s=Phaser.Math.Distance.Between(this.x,this.y,i.x,i.y),n=(this.width+this.height)/4;return s<n}collect(i){if(this.collected)return;this.collected=!0,console.log(`\u2728 Powerup collected: ${this.config.name}`),this.scene.sound.play(this.config.audioKey,{volume:.6});let s={type:this.config.type,config:this.config,startTime:this.scene.time.now,player:i};j.emit("powerup-collected",s),this.playCollectionAnimation()}playCollectionAnimation(){this.floatTween&&this.floatTween.destroy(),this.scene.tweens.add({targets:this,scaleX:2,scaleY:2,alpha:0,duration:300,ease:"Back.easeOut",onComplete:()=>{this.destroy()}}),this.createSparkleEffect()}createSparkleEffect(){let s=[];for(let n=0;n<8;n++){let o=this.scene.add.graphics();o.fillStyle(this.config.effectColor||16777215,.8),o.fillCircle(0,0,3),o.setPosition(this.x,this.y),o.setDepth(this.depth+10);let r=n/8*Math.PI*2,a=40;this.scene.tweens.add({targets:o,x:this.x+Math.cos(r)*a,y:this.y+Math.sin(r)*a,alpha:0,duration:500,ease:"Power2.easeOut",onComplete:()=>{o.destroy()}}),s.push(o)}}getType(){return this.config.type}getConfig(){return this.config}isCollected(){return this.collected}update(){this.glowEffect&&!this.collected&&this.glowEffect.setPosition(this.x,this.y)}destroy(){this.floatTween&&this.floatTween.destroy(),this.glowEffect&&this.glowEffect.destroy(),super.destroy()}};var fv=class{constructor(t,i,s){this.platformCount=0;this.SPAWN_INTERVAL=30;this.lastSpawnPlatform=0;this.scene=t,this.player=i,this.gameConfig=s,this.activePowerups=t.add.group(),this.setupEventListeners(),console.log("\u{1F48E} PowerupManager initialized")}setupEventListeners(){j.on("platform-created",this.onPlatformCreated.bind(this)),j.on("game-fully-reset",this.onGameReset.bind(this))}onPlatformCreated(t){this.platformCount++,this.platformCount-this.lastSpawnPlatform>=this.SPAWN_INTERVAL&&(this.spawnPowerupNearPlatform(t),this.lastSpawnPlatform=this.platformCount)}spawnPowerupNearPlatform(t){if(!t||!t.x||!t.y){console.warn("\u26A0\uFE0F Invalid platform data for powerup spawn");return}let i=this.selectRandomPowerupType(),s=t.x+(Math.random()-.5)*100,n=t.y-60,o=new dv(this.scene,s,n,i);this.activePowerups.add(o),console.log(`\u{1F48E} Spawned ${as[i].name} at platform ${this.platformCount}`)}selectRandomPowerupType(){let t=[];Object.values(nh).forEach(s=>{let o=6-as[s].rarity;for(let r=0;r<o;r++)t.push(s)});let i=Math.floor(Math.random()*t.length);return t[i]}update(){this.activePowerups.children.entries.forEach(t=>{let i=t;!i.isCollected()&&i.checkCollision(this.player)?i.collect(this.player):i.update()}),this.cleanupCollectedPowerups()}cleanupCollectedPowerups(){let t=[];this.activePowerups.children.entries.forEach(i=>{let s=i;s.isCollected()&&t.push(s)}),t.forEach(i=>{this.activePowerups.remove(i)})}onGameReset(){this.reset()}reset(){console.log("\u{1F504} PowerupManager reset"),this.activePowerups.clear(!0,!0),this.platformCount=0,this.lastSpawnPlatform=0}getPowerupCount(){return this.activePowerups.children.size}getActivePowerups(){return this.activePowerups}destroy(){j.off("platform-created",this.onPlatformCreated.bind(this)),j.off("game-fully-reset",this.onGameReset.bind(this)),this.activePowerups.destroy(!0),console.log("\u{1F48E} PowerupManager destroyed")}};var cv=class{constructor(t,i){this.activeEffects=new Map;this.originalMoveSpeed=0;this.originalJumpPower=0;this.doubleJumpAvailable=!1;this.originalWallBounceWindow=0;this.scene=t,this.player=i,this.boundOnPowerupCollected=this.onPowerupCollected.bind(this),this.boundOnGameReset=this.onGameReset.bind(this),this.setupEventListeners(),console.log("\u2728 PowerupEffectSystem initialized")}setupEventListeners(){j.on("powerup-collected",this.boundOnPowerupCollected),j.on("game-fully-reset",this.boundOnGameReset),j.on("movement-controller-ready",t=>{this.movementController=t,console.log("\u{1F527} PowerupEffectSystem: MovementController connected")}),j.on("combo-system-ready",t=>{this.comboSystem=t,console.log("\u{1F527} PowerupEffectSystem: ComboSystem connected")}),j.on("score-system-ready",t=>{this.scoreSystem=t,console.log("\u{1F527} PowerupEffectSystem: ScoreSystem connected")}),j.on("wall-collision-ready",t=>{this.wallCollision=t,console.log("\u{1F527} PowerupEffectSystem: WallCollision connected")})}onPowerupCollected(t){console.log(`\u2728 Applying powerup effect: ${t.config.name}`);let i={type:t.type,config:t.config,startTime:t.startTime,endTime:t.config.duration?t.startTime+t.config.duration:void 0,applied:!1};this.activeEffects.set(t.type,i),this.applyPowerupEffect(i),t.config.visualEffect&&this.createPlayerVisualEffect(i),j.emit("powerup-effect-applied",{type:t.type,name:t.config.name,duration:t.config.duration})}applyPowerupEffect(t){if(!t.applied){switch(t.type){case"speed_boost":this.applySpeedBoost();break;case"jump_amplifier":this.applyJumpAmplifier();break;case"combo_multiplier":this.applyComboMultiplier();break;case"invincibility":this.applyInvincibility();break;case"double_jump":this.applyDoubleJump();break;case"wall_magnetism":this.applyWallMagnetism();break;case"golden_touch":this.applyGoldenTouch();break;case"platform_springs":this.applyPlatformSprings();break;case"momentum_keeper":this.applyMomentumKeeper();break;case"high_score_multiplier":this.applyHighScoreMultiplier();break;default:console.warn(`Unknown powerup type: ${t.type}`)}t.applied=!0}}applySpeedBoost(){if(!this.movementController){console.warn("\u26A0\uFE0F Speed boost failed: MovementController not ready");return}this.movementController.setSpeedMultiplier(1.5),console.log("\u{1F3C3} Speed boost applied: 1.5x multiplier")}applyJumpAmplifier(){if(!this.movementController){console.warn("\u26A0\uFE0F Jump amplifier failed: MovementController not ready");return}this.movementController.setJumpMultiplier(3.5),console.log("\u{1F998} Jump amplifier applied: 3.5x multiplier")}applyComboMultiplier(){if(!this.comboSystem){console.warn("\u26A0\uFE0F Combo multiplier failed: ComboSystem not ready");return}this.comboSystem.setComboMultiplierBonus(2),console.log("\u26D3\uFE0F Combo multiplier applied: 2x bonus")}applyInvincibility(){console.log("\u{1F6E1}\uFE0F Invincibility applied: Death line immunity"),j.emit("player-invincibility-start",{duration:1e4,timestamp:Date.now()})}applyDoubleJump(){if(!this.movementController){console.warn("\u26A0\uFE0F Double jump failed: MovementController not ready");return}this.movementController.setDoubleJumpEnabled(!0),this.doubleJumpAvailable=!0,console.log("\u{1F985} Double jump applied: Additional jump available")}applyWallMagnetism(){console.log("\u{1F9F2} Wall magnetism applied: Extended wall bounce timing window"),j.emit("wall-bounce-timing-extended",{multiplier:2,duration:25e3,timestamp:Date.now()})}applyGoldenTouch(){if(!this.comboSystem){console.warn("\u26A0\uFE0F Golden touch failed: ComboSystem not ready");return}this.comboSystem.setGoldenTouchEnabled(!0),console.log("\u{1F4B0} Golden touch applied: Double score for combos")}applyPlatformSprings(){console.log("\u{1F338} Platform springs applied: Bounce boost on landing"),j.emit("platform-springs-active",{boostMultiplier:1.5,duration:18e3,timestamp:Date.now()})}applyMomentumKeeper(){if(!this.movementController){console.warn("\u26A0\uFE0F Momentum keeper failed: MovementController not ready");return}this.movementController.setMomentumKeepingEnabled(!0),console.log("\u{1F3AF} Momentum keeper applied: Horizontal momentum preserved")}applyHighScoreMultiplier(){if(!this.scoreSystem){console.warn("\u26A0\uFE0F High score multiplier failed: ScoreSystem not ready");return}this.scoreSystem.setHeightScoreMultiplier(3),console.log("\u2B50 High score multiplier applied: 3x height points")}createPlayerVisualEffect(t){if(!t.config.effectColor)return;let i=40,s=this.scene.add.graphics();s.setDepth(50),s.lineStyle(4,t.config.effectColor,.6),s.strokeCircle(0,0,i),this.scene.tweens.add({targets:s,alpha:{from:.3,to:.8},scaleX:{from:.8,to:1.2},scaleY:{from:.8,to:1.2},duration:1e3,yoyo:!0,repeat:-1,ease:"Sine.easeInOut"}),t.visualEffect=s}update(t){let i=this.scene.time.now,s=[];this.activeEffects.forEach((n,o)=>{n.visualEffect&&n.visualEffect.setPosition(this.player.x,this.player.y),n.endTime&&i>=n.endTime&&s.push(o)}),s.forEach(n=>{this.removeEffect(n)})}removeEffect(t){let i=this.activeEffects.get(t);i&&(console.log(`\u23F0 Powerup effect expired: ${i.config.name}`),i.visualEffect&&i.visualEffect.destroy(),this.revertPowerupEffect(t),this.activeEffects.delete(t),j.emit("powerup-effect-removed",{type:t}))}revertPowerupEffect(t){switch(t){case"speed_boost":this.movementController&&this.movementController.setSpeedMultiplier(1);break;case"jump_amplifier":this.movementController&&this.movementController.setJumpMultiplier(1);break;case"wall_magnetism":break;case"combo_multiplier":this.comboSystem&&this.comboSystem.setComboMultiplierBonus(1);break;case"high_score_multiplier":this.scoreSystem&&this.scoreSystem.setHeightScoreMultiplier(1);break}}hasEffect(t){return this.activeEffects.has(t)}getActiveEffects(){return Array.from(this.activeEffects.keys())}getEffectTimeRemaining(t){let i=this.activeEffects.get(t);if(!i||!i.endTime)return null;let s=i.endTime-this.scene.time.now;return Math.max(0,s)}onGameReset(){this.reset()}reset(){console.log("\u{1F504} PowerupEffectSystem reset"),this.activeEffects.forEach(t=>{t.visualEffect&&t.visualEffect.destroy()}),this.activeEffects.clear(),this.originalMoveSpeed=0,this.originalJumpPower=0,this.doubleJumpAvailable=!1,this.originalWallBounceWindow=0,this.movementController&&(this.movementController.setSpeedMultiplier(1),this.movementController.setJumpMultiplier(1),this.movementController.setDoubleJumpEnabled(!1),this.movementController.setMomentumKeepingEnabled(!1)),this.comboSystem&&(this.comboSystem.setComboMultiplierBonus(1),this.comboSystem.setGoldenTouchEnabled(!1)),this.scoreSystem&&this.scoreSystem.setHeightScoreMultiplier(1)}destroy(){j.off("powerup-collected",this.boundOnPowerupCollected),j.off("game-fully-reset",this.boundOnGameReset),this.reset(),console.log("\u2728 PowerupEffectSystem destroyed")}};var pv=class{constructor(t,i){this.activePowerupDisplays=new Map;this.UI_DEPTH=1e3;this.POWERUP_PANEL_WIDTH=220;this.POWERUP_PANEL_HEIGHT=60;this.PANEL_SPACING=5;this.scene=t,this.effectSystem=i,this.setupEventListeners(),console.log("\u{1F3A8} PowerupUI initialized")}setupEventListeners(){j.on("powerup-effect-applied",this.onPowerupEffectApplied.bind(this)),j.on("powerup-effect-removed",this.onPowerupEffectRemoved.bind(this)),j.on("game-fully-reset",this.onGameReset.bind(this))}onPowerupEffectApplied(t){this.addPowerupDisplay(t.type,t.name,t.duration)}onPowerupEffectRemoved(t){this.removePowerupDisplay(t.type)}addPowerupDisplay(t,i,s){this.activePowerupDisplays.has(t)&&this.removePowerupDisplay(t);let n=as[t],o=this.activePowerupDisplays.size,r=this.scene.scale.width-this.POWERUP_PANEL_WIDTH-10,a=20+o*(this.POWERUP_PANEL_HEIGHT+this.PANEL_SPACING),p=this.scene.add.container(r,a);p.setDepth(this.UI_DEPTH),p.setScrollFactor(0,0);let h=this.scene.add.graphics(),u=n.effectColor||4473924;h.fillStyle(u,.8),h.fillRoundedRect(0,0,this.POWERUP_PANEL_WIDTH,this.POWERUP_PANEL_HEIGHT,8),h.lineStyle(2,16777215,.6),h.strokeRoundedRect(0,0,this.POWERUP_PANEL_WIDTH,this.POWERUP_PANEL_HEIGHT,8);let f=this.scene.add.sprite(15,this.POWERUP_PANEL_HEIGHT/2,n.assetKey);f.setScale(.8),f.setOrigin(0,.5);let l=this.scene.add.text(45,12,i,{fontSize:"14px",color:"#ffffff",fontStyle:"bold"}),d,v;if(s)d=this.scene.add.text(45,32,this.formatTime(s),{fontSize:"12px",color:"#cccccc"}),v=this.scene.add.graphics(),v.fillStyle(3355443,.8),v.fillRect(45,45,this.POWERUP_PANEL_WIDTH-55,8),v.fillStyle(16777215,1),v.fillRect(45,45,this.POWERUP_PANEL_WIDTH-55,8);else{let m=this.scene.add.text(45,32,"\u221E PERMANENT",{fontSize:"11px",color:"#ffdd00",fontStyle:"bold"});p.add(m)}p.add([h,f,l]),d&&p.add(d),v&&p.add(v);let c={type:t,name:i,duration:s,container:p,background:h,icon:f,nameText:l,timerText:d,timerBar:v,startTime:this.scene.time.now};this.activePowerupDisplays.set(t,c),this.playEntranceAnimation(p)}removePowerupDisplay(t){let i=this.activePowerupDisplays.get(t);i&&this.playExitAnimation(i.container,()=>{i.container.destroy(),this.activePowerupDisplays.delete(t),this.repositionDisplays()})}playEntranceAnimation(t){t.setX(t.x+250),t.setAlpha(0),this.scene.tweens.add({targets:t,x:this.scene.scale.width-this.POWERUP_PANEL_WIDTH-10,alpha:1,duration:400,ease:"Back.easeOut"})}playExitAnimation(t,i){this.scene.tweens.add({targets:t,x:t.x+250,alpha:0,duration:300,ease:"Back.easeIn",onComplete:i})}repositionDisplays(){let t=0,i=this.scene.scale.width-this.POWERUP_PANEL_WIDTH-10;this.activePowerupDisplays.forEach(s=>{let n=20+t*(this.POWERUP_PANEL_HEIGHT+this.PANEL_SPACING);this.scene.tweens.add({targets:s.container,x:i,y:n,duration:200,ease:"Power2.easeOut"}),t++})}update(){let t=this.scene.time.now;this.activePowerupDisplays.forEach((i,s)=>{if(!i.duration||!i.timerText||!i.timerBar)return;let n=t-i.startTime,o=Math.max(0,i.duration-n),r=1-o/i.duration;if(i.timerText.setText(this.formatTime(o)),i.timerBar){i.timerBar.clear(),i.timerBar.fillStyle(3355443,.8),i.timerBar.fillRect(45,45,this.POWERUP_PANEL_WIDTH-55,8);let a=(this.POWERUP_PANEL_WIDTH-55)*(1-r);a>0&&(i.timerBar.fillStyle(16777215,1),i.timerBar.fillRect(45,45,a,8))}if(o<=3e3&&o>0){let a=Math.sin(t*.01)*.3+.7;i.container.setAlpha(a)}else i.container.setAlpha(1)})}formatTime(t){let i=Math.ceil(t/1e3);if(i>=60){let s=Math.floor(i/60),n=i%60;return`${s}:${n.toString().padStart(2,"0")}`}return`${i}s`}onGameReset(){this.reset()}reset(){console.log("\u{1F504} PowerupUI reset"),this.activePowerupDisplays.forEach(t=>{t.container.destroy()}),this.activePowerupDisplays.clear()}destroy(){j.off("powerup-effect-applied",this.onPowerupEffectApplied.bind(this)),j.off("powerup-effect-removed",this.onPowerupEffectRemoved.bind(this)),j.off("game-fully-reset",this.onGameReset.bind(this)),this.reset(),console.log("\u{1F3A8} PowerupUI destroyed")}};var $2={platform_spawner:{type:"platform_spawner",name:"Platform Kit",description:"Spawn a 3-tile platform at your location",assetKey:"key_yellow",maxUses:1,rarity:2,soundKey:"sfx_select"}};var sh=class e{constructor(t,i){this.type=t,this.config=$2[t],this.remainingUses=this.config.maxUses||1/0,this.id=i||`item_${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getType(){return this.type}getConfig(){return this.config}getId(){return this.id}getRemainingUses(){return this.remainingUses}canUse(){return this.remainingUses>0}use(){return this.canUse()?(this.remainingUses!==1/0&&this.remainingUses--,console.log(`\u{1F527} Used ${this.config.name}, ${this.remainingUses} uses remaining`),!0):!1}isConsumed(){return this.remainingUses<=0}clone(){let t=new e(this.type);return t.remainingUses=this.remainingUses,t}};var vv=class{constructor(t){this.slots=new Map;this.scene=t,this.slots.set("Q",{item:null,key:"Q"}),this.slots.set("E",{item:null,key:"E"}),this.setupEventListeners(),console.log("\u{1F392} InventorySystem initialized with Q and E slots")}setupEventListeners(){j.on("game-fully-reset",this.onGameReset.bind(this)),j.on("player-use-item",this.onPlayerUseItem.bind(this))}onPlayerUseItem(t){console.log(`\u{1F392} Received request to use item in slot ${t.slotKey}`),this.useItem(t.slotKey)}addItem(t){for(let[i,s]of this.slots)if(s.item===null)return s.item=t,console.log(`\u{1F392} Added ${t.getConfig().name} to slot ${i}`),j.emit("inventory-slot-changed",{slotKey:i,item:t,isEmpty:!1}),!0;return console.warn("\u{1F392} Inventory full, cannot add item"),!1}useItem(t){let i=this.slots.get(t);if(!i||!i.item)return console.warn(`\u{1F392} No item in slot ${t}`),!1;let s=i.item,n=s.getType();if(!s.canUse())return console.warn(`\u{1F392} Item ${s.getConfig().name} cannot be used`),!1;let o=s.use();return o&&(console.log(`\u{1F392} Used item ${s.getConfig().name} from slot ${t}`),j.emit("item-used",{slotKey:t,itemType:n,item:s}),s.isConsumed()?this.removeItemFromSlot(t):j.emit("inventory-slot-changed",{slotKey:t,item:s,isEmpty:!1})),o}removeItemFromSlot(t){let i=this.slots.get(t);return!i||!i.item?!1:(console.log(`\u{1F392} Removed ${i.item.getConfig().name} from slot ${t}`),i.item=null,j.emit("inventory-slot-changed",{slotKey:t,item:null,isEmpty:!0}),!0)}getItem(t){let i=this.slots.get(t);return i?i.item:null}getSlots(){return new Map(this.slots)}hasSpace(){return Array.from(this.slots.values()).some(t=>t.item===null)}getEmptySlotKeys(){return Array.from(this.slots.entries()).filter(([t,i])=>i.item===null).map(([t,i])=>t)}isSlotEmpty(t){let i=this.slots.get(t);return i?i.item===null:!0}onGameReset(){this.reset()}reset(){console.log("\u{1F504} InventorySystem reset");for(let[i,s]of this.slots)s.item&&(s.item=null,j.emit("inventory-slot-changed",{slotKey:i,item:null,isEmpty:!0}));let t=new sh("platform_spawner");this.addItem(t),console.log("\u{1F392} Given starter platform spawner item after reset")}destroy(){j.off("game-fully-reset",this.onGameReset.bind(this)),console.log("\u{1F392} InventorySystem destroyed")}};var mv=class{constructor(t,i){this.slotContainers=new Map;this.UI_DEPTH=1e3;this.SLOT_SIZE=50;this.SLOT_SPACING=60;this.scene=t,this.inventorySystem=i,this.setupUI(),this.setupEventListeners(),console.log("\u{1F3A8} InventoryUI initialized")}setupEventListeners(){j.on("inventory-slot-changed",this.onSlotChanged.bind(this)),j.on("game-fully-reset",this.onGameReset.bind(this))}setupUI(){let i=this.scene.scale.height-80;this.container=this.scene.add.container(20,i),this.container.setDepth(this.UI_DEPTH),this.container.setScrollFactor(0,0),this.createSlot("Q",0),this.createSlot("E",this.SLOT_SPACING)}createSlot(t,i){let s=this.scene.add.container(i,0),n=this.scene.add.graphics();n.fillStyle(3355443,.8),n.fillRoundedRect(-this.SLOT_SIZE/2,-this.SLOT_SIZE/2,this.SLOT_SIZE,this.SLOT_SIZE,8),n.lineStyle(2,6710886,1),n.strokeRoundedRect(-this.SLOT_SIZE/2,-this.SLOT_SIZE/2,this.SLOT_SIZE,this.SLOT_SIZE,8);let o=this.scene.add.text(0,this.SLOT_SIZE/2+10,t,{fontSize:"14px",color:"#ffffff",fontStyle:"bold",fontFamily:"monospace"});o.setOrigin(.5,0);let r=this.scene.add.text(0,-2,"?",{fontSize:"24px",color:"#666666",fontStyle:"bold"});r.setOrigin(.5,.5),s.add([n,o,r]),this.container.add(s),this.slotContainers.set(t,s)}onSlotChanged(t){this.updateSlotDisplay(t.slotKey,t.item)}updateSlotDisplay(t,i){let s=this.slotContainers.get(t);if(!s)return;let n=s.getAll(),o=n[0],r=n[1];if(s.removeAll(),s.add([o,r]),i){let a=this.scene.add.sprite(0,-2,i.getConfig().assetKey);a.setScale(.7),a.setOrigin(.5,.5);let p=i.getConfig().maxUses;if(p&&p>1){let h=this.scene.add.text(18,-18,i.getRemainingUses().toString(),{fontSize:"12px",color:"#ffff00",fontStyle:"bold",backgroundColor:"#000000",padding:{x:3,y:1}});h.setOrigin(.5,.5),s.add(h)}s.add(a)}else{let a=this.scene.add.text(0,-2,"?",{fontSize:"24px",color:"#666666",fontStyle:"bold"});a.setOrigin(.5,.5),s.add(a)}}onGameReset(){this.reset()}reset(){console.log("\u{1F504} InventoryUI reset")}destroy(){j.off("inventory-slot-changed",this.onSlotChanged.bind(this)),j.off("game-fully-reset",this.onGameReset.bind(this)),this.container&&this.container.destroy(),console.log("\u{1F3A8} InventoryUI destroyed")}};var gv=class{constructor(t,i){this.scene=t,this.inventorySystem=i,this.setupEventListeners(),console.log("\u{1F3AE} ItemManager initialized")}setupEventListeners(){j.on("player-use-item",this.onPlayerUseItem.bind(this)),j.on("game-fully-reset",this.onGameReset.bind(this))}onPlayerUseItem(t){this.inventorySystem.useItem(t.slotKey)||console.log(`\u{1F3AE} No item to use in slot ${t.slotKey}`)}givePlayerItem(t){let i=new sh(t);return this.inventorySystem.addItem(i)}getInventorySystem(){return this.inventorySystem}onGameReset(){}destroy(){j.off("player-use-item",this.onPlayerUseItem.bind(this)),j.off("game-fully-reset",this.onGameReset.bind(this)),console.log("\u{1F3AE} ItemManager destroyed")}};var xv=class{constructor(t,i,s){this.PLATFORM_WIDTH=192;this.SPAWN_OFFSET_Y=10;this.scene=t,this.player=i,this.platformManager=s,this.setupEventListeners(),console.log("\u{1F3D7}\uFE0F PlatformSpawner initialized")}setupEventListeners(){j.on("item-used",this.onItemUsed.bind(this))}onItemUsed(t){t.itemType==="platform_spawner"&&this.spawnPlatformAtPlayer()}spawnPlatformAtPlayer(){let t=this.player.x,i=this.player.body,s=this.player.y+i.height/2+this.SPAWN_OFFSET_Y,n=this.scene.scale.width,o=this.PLATFORM_WIDTH/2,r=t;r-o<0?r=o:r+o>n&&(r=n-o),console.log(`\u{1F3D7}\uFE0F Spawning platform at player feet (${r.toFixed(0)}, ${s.toFixed(0)})`);try{let a=this.platformManager.createPlatform(r,s,this.PLATFORM_WIDTH);a&&a.group?(j.emit("platform-generated",{group:a.group}),this.scene.sound.play("sfx_select",{volume:.5}),j.emit("platform-spawned",{x:r,y:s,width:this.PLATFORM_WIDTH,platformId:a.platformId}),console.log(`\u2705 Platform spawned successfully at feet: ${a.platformId}`)):console.error("\u274C Failed to spawn platform - invalid result from PlatformManager")}catch(a){console.error("\u274C Error spawning platform:",a)}}destroy(){j.off("item-used",this.onItemUsed.bind(this)),console.log("\u{1F3D7}\uFE0F PlatformSpawner destroyed")}};var yv=class extends Z2.Scene{constructor(){super("Game");this.isGameOver=!1;this.gameConfig=new Hl}preload(){this.load.setPath("assets/kenney_new-platformer-pack-1.0"),this.load.atlasXML("character","Spritesheets/spritesheet-characters-default.png","Spritesheets/spritesheet-characters-default.xml"),this.load.atlasXML("tiles","Spritesheets/spritesheet-tiles-default.png","Spritesheets/spritesheet-tiles-default.xml"),this.load.image("background-grass","Sprites/Backgrounds/Default/background_solid_grass.png"),this.load.image("background-sand","Sprites/Backgrounds/Default/background_solid_sand.png"),this.load.image("background-dirt","Sprites/Backgrounds/Default/background_solid_dirt.png"),this.load.image("background-mushrooms","Sprites/Backgrounds/Default/background_color_mushrooms.png"),this.load.image("background-cloud","Sprites/Backgrounds/Default/background_solid_cloud.png"),this.load.image("background-sky","Sprites/Backgrounds/Default/background_solid_sky.png"),this.load.image("star","Sprites/Tiles/Default/star.png"),this.load.image("gem_blue","Sprites/Tiles/Default/gem_blue.png"),this.load.image("gem_green","Sprites/Tiles/Default/gem_green.png"),this.load.image("gem_red","Sprites/Tiles/Default/gem_red.png"),this.load.image("gem_yellow","Sprites/Tiles/Default/gem_yellow.png"),this.load.image("coin_gold","Sprites/Tiles/Default/coin_gold.png"),this.load.image("coin_silver","Sprites/Tiles/Default/coin_silver.png"),this.load.image("coin_bronze","Sprites/Tiles/Default/coin_bronze.png"),this.load.image("heart","Sprites/Tiles/Default/heart.png"),this.load.image("key_blue","Sprites/Tiles/Default/key_blue.png"),this.load.image("key_green","Sprites/Tiles/Default/key_green.png"),this.load.image("key_yellow","Sprites/Tiles/Default/key_yellow.png"),this.load.audio("sfx_jump","Sounds/sfx_jump.ogg"),this.load.audio("sfx_jump-high","Sounds/sfx_jump-high.ogg"),this.load.audio("sfx_bump","Sounds/sfx_bump.ogg"),this.load.audio("sfx_coin","Sounds/sfx_coin.ogg"),this.load.audio("sfx_disappear","Sounds/sfx_disappear.ogg"),this.load.audio("sfx_gem","Sounds/sfx_gem.ogg"),this.load.audio("sfx_hurt","Sounds/sfx_hurt.ogg"),this.load.audio("sfx_magic","Sounds/sfx_magic.ogg"),this.load.audio("sfx_select","Sounds/sfx_select.ogg"),this.load.audio("sfx_throw","Sounds/sfx_throw.ogg")}create(){console.log("\u{1F3AE} Game scene create() called"),this.setupBackground(),console.log("\u2705 Background setup complete"),this.setupPlayer(),console.log("\u2705 Player setup complete"),this.setupPlatforms(),console.log("\u2705 Platforms setup complete"),this.setupWalls(),this.setupCollisions(),this.setupGameStateManager(),console.log("\u2705 GameStateManager setup complete"),this.setupBiomeManager(),console.log("\u2705 BiomeManager setup complete"),this.setupBackgroundColorManager(),console.log("\u2705 BackgroundColorManager setup complete"),this.setupPowerupSystems(),console.log("\u2705 Powerup systems setup complete"),this.setupItemSystems(),console.log("\u2705 Item systems setup complete"),this.setupCamera(),console.log("\u2705 Camera setup complete"),this.setupGameSystems(),this.setupEffects(),this.setupUI(),this.setupDebugUI(),this.setupGameOverScreen(),this.setupGameMenu(),this.setupEventListeners(),console.log("\u{1F3AE} Game scene initialization complete"),this.addSceneFadeIn(),j.emit("current-scene-ready",this)}update(i,s){if(!(!this.scene||!this.scene.isActive())&&(this.debugUI&&this.debugUI.update(i),!(this.gameMenu&&this.gameMenu.isMenuVisible())&&!(this.gameStateManager&&!this.gameStateManager.allowsGameplayUpdates())))try{this.player&&this.player.update(s),this.wallManager&&this.wallManager.update(this.player.y),this.wallCollision&&this.wallCollision.update(),this.cameraManager&&this.cameraManager.update(s),this.deathLine&&this.deathLine.update(s),this.comboSystem&&this.comboSystem.update(s),this.gameUI&&this.gameUI.update(s),this.powerupManager&&this.powerupManager.update(),this.powerupEffectSystem&&this.powerupEffectSystem.update(s),this.powerupUI&&this.powerupUI.update()}catch(n){console.error("\u{1F6A8} Game update error caught:",n)}}setupBackground(){console.log("\u2705 Background setup complete - using dynamic color system")}setupPlatforms(){this.platformManager=new Wl(this,this.gameConfig),this.platformManager.createGroundPlatform()}setupPlayer(){let i=this.scale.height-100,s=this.scale.width/2,n=i-100;this.player=new zl(this,s,n,this.gameConfig)}setupWalls(){this.wallManager=new Xl(this,this.gameConfig)}setupCollisions(){this.time.delayedCall(100,()=>{this.oneWayPlatforms=new Yl(this,this.player);let i=this.platformManager.getPlatforms();this.oneWayPlatforms.addPlatformGroup(i)}),this.wallCollision=new $l(this,this.player,this.wallManager,this.gameConfig)}setupCamera(){this.cameraManager=new Kl(this,this.player,this.gameConfig,this.gameStateManager)}setupEffects(){this.wallBounceEffects=new jl(this),this.spinningParticleEffects=new Zl(this)}setupGameSystems(){this.deathLine=new Jl(this,this.player,this.gameConfig),this.scoreSystem=new Ql(this,this.player),this.comboSystem=new ql(this,this.player),this.audioManager=new eh(this)}setupUI(){this.gameUI=new _l(this,this.scoreSystem,this.comboSystem)}setupDebugUI(){this.debugUI=new lv(this,this.player,this.gameConfig)}setupGameOverScreen(){this.gameOverScreen=new hv(this)}setupGameMenu(){this.gameMenu=new uv(this,this.audioManager)}setupGameStateManager(){this.gameStateManager=new th}setupBiomeManager(){this.biomeManager=new ih(this)}setupBackgroundColorManager(){this.backgroundColorManager=new rh(this,this.biomeManager)}setupPowerupSystems(){this.powerupEffectSystem=new cv(this,this.player),this.powerupManager=new fv(this,this.player,this.gameConfig),this.powerupUI=new pv(this,this.powerupEffectSystem)}setupItemSystems(){this.inventorySystem=new vv(this),this.itemManager=new gv(this,this.inventorySystem),this.platformSpawner=new xv(this,this.player,this.platformManager),this.inventoryUI=new mv(this,this.inventorySystem),this.itemManager.givePlayerItem("platform_spawner")}setupEventListeners(){j.on("game-over",this.onGameOver.bind(this)),j.on("request-game-stats",this.onRequestGameStats.bind(this)),j.on("game-paused",this.onGamePaused.bind(this)),j.on("request-game-restart",this.onRequestRestart.bind(this)),this.input.keyboard?.on("keydown",this.onKeyDown.bind(this))}onGameOver(i){this.isGameOver=!0,console.log("\u{1F3AE} Game Over triggered")}onRequestGameStats(){let i=this.comboSystem?this.comboSystem.getStats():{},s=this.scoreSystem?this.scoreSystem.getStats():{};j.emit("game-stats-collected",_(_({},i),s))}onGamePaused(i){console.log("Game paused state:",i)}onRequestRestart(){this.restartGame()}onKeyDown(i){if(i.code==="KeyR"){if(!this.gameConfig.debug.enabled)return;console.log("\u{1F527} Debug restart triggered by R key"),this.restartGame();return}if(this.gameStateManager.isPlaying()||!this.gameOverScreen.isShowing())return;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","KeyW","KeyA","KeyS","KeyD","Space"].includes(i.code)&&(console.log("\u{1F3AE} Movement key restart triggered"),this.restartGame())}restartGame(){console.log("\u{1F504} Restarting game..."),console.log("\u{1F504} Current game state:",this.gameStateManager?this.gameStateManager.getState():"undefined"),console.log("\u{1F504} Game over screen showing:",this.gameOverScreen?this.gameOverScreen.isShowing():"undefined"),this.resetGameSystems()}resetGameSystems(){console.log("\u{1F504} Starting custom game reset...");try{this.gameStateManager&&this.gameStateManager.reset(),this.resetCameraState(),this.resetGameplayState(),this.resetPlayerState(),this.resetWorldState(),this.resetUIState(),this.reinitializeGameSystems(),console.log("\u2705 Custom game reset complete"),this.platformManager&&console.log(`\u{1F50D} Platform count after reset: ${this.platformManager.getPlatformCount()}`)}catch(i){console.error("\u274C Error during custom reset, falling back to scene restart:",i),this.scene.restart()}}resetCameraState(){console.log("\u{1F504} Resetting camera state first..."),this.cameraManager&&this.cameraManager.reset()}resetGameplayState(){console.log("\u{1F504} Resetting gameplay state..."),this.isGameOver=!1,this.scoreSystem&&this.scoreSystem.reset(),this.comboSystem&&this.comboSystem.reset(),this.deathLine&&this.deathLine.reset(),this.audioManager&&this.audioManager.stopAllSounds()}resetPlayerState(){if(console.log("\u{1F504} Resetting player state..."),this.player){let i=this.scale.height-100,s=this.scale.width/2,n=i-100;this.player.setPosition(s,n),this.player.setVelocity(0,0),this.player.setGrounded(!0);let o=this.player.getMovementController();o&&typeof o.reset=="function"&&o.reset()}}resetWorldState(){if(console.log("\u{1F504} Resetting world state..."),this.platformManager&&(this.platformManager.reset(),this.platformManager.createGroundPlatform(),this.oneWayPlatforms)){let i=this.platformManager.getPlatforms();this.oneWayPlatforms.addPlatformGroup(i)}this.wallManager&&this.wallManager.reset(),this.powerupManager&&this.powerupManager.reset(),this.powerupEffectSystem&&this.powerupEffectSystem.reset(),this.powerupUI&&this.powerupUI.reset(),this.wallCollision&&this.wallCollision.reset()}resetUIState(){console.log("\u{1F504} Resetting UI state..."),this.gameUI,this.gameOverScreen&&this.gameOverScreen.isShowing()}reinitializeGameSystems(){if(console.log("\u{1F504} Reinitializing game systems..."),this.biomeManager?(console.log("\u{1F30D} BiomeManager exists, manually resetting state"),this.biomeManager.setPlatformCount(0)):(this.setupBiomeManager(),console.log("\u{1F30D} BiomeManager recreated during reset")),this.backgroundColorManager||(this.setupBackgroundColorManager(),console.log("\u{1F3A8} BackgroundColorManager recreated during reset")),j.emit("game-fully-reset",{timestamp:Date.now(),playerPosition:this.player?{x:this.player.x,y:this.player.y}:null}),this.oneWayPlatforms&&this.platformManager){let i=this.platformManager.getPlatforms();i&&i.children}this.cameraManager&&this.player&&this.cameraManager.focusOnPlayer()}destroy(){console.log("\u{1F9F9} Game scene destroy() called - cleaning up all systems"),j.off("game-over",this.onGameOver.bind(this)),j.off("request-game-stats",this.onRequestGameStats.bind(this)),j.off("game-paused",this.onGamePaused.bind(this)),j.off("request-game-restart",this.onRequestRestart.bind(this)),this.input&&this.input.keyboard&&(this.input.keyboard.removeAllListeners(),this.input.keyboard.off("keydown",this.onKeyDown.bind(this))),this.gameOverScreen&&(this.gameOverScreen.destroy(),this.gameOverScreen=null),this.debugUI&&(this.debugUI.destroy(),this.debugUI=null),this.gameUI&&(this.gameUI.destroy(),this.gameUI=null),this.comboSystem&&(this.comboSystem.destroy(),this.comboSystem=null),this.scoreSystem&&(this.scoreSystem.destroy(),this.scoreSystem=null),this.deathLine&&(this.deathLine.destroy(),this.deathLine=null),this.wallBounceEffects&&(this.wallBounceEffects.destroy(),this.wallBounceEffects=null),this.wallCollision&&(this.wallCollision.destroy(),this.wallCollision=null),this.oneWayPlatforms&&(this.oneWayPlatforms.destroy(),this.oneWayPlatforms=null),this.cameraManager&&(this.cameraManager.destroy(),this.cameraManager=null),this.wallManager&&(this.wallManager.destroy(),this.wallManager=null),this.platformManager&&(this.platformManager.destroy(),this.platformManager=null),this.player&&(this.player.destroy(),this.player=null),this.gameStateManager&&(this.gameStateManager.destroy(),this.gameStateManager=null),this.audioManager&&(this.audioManager.destroy(),this.audioManager=null),this.gameMenu&&(this.gameMenu.destroy(),this.gameMenu=null),this.biomeManager&&(this.biomeManager.destroy(),this.biomeManager=null),this.backgroundColorManager&&(this.backgroundColorManager.destroy(),this.backgroundColorManager=null),this.powerupManager&&(this.powerupManager.destroy(),this.powerupManager=null),this.powerupEffectSystem&&(this.powerupEffectSystem.destroy(),this.powerupEffectSystem=null),this.powerupUI&&(this.powerupUI.destroy(),this.powerupUI=null),this.isGameOver=!1,console.log("\u2705 Game scene destruction complete")}addSceneFadeIn(){let i=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,1);i.setOrigin(0,0),i.setDepth(3e3),this.tweens.add({targets:i,alpha:0,duration:500,ease:"Power2",onComplete:()=>{i.destroy()}}),console.log("\u{1F3AC} Game scene fade-in effect applied")}returnToMenu(){console.log("\u{1F3AE} Returning to menu..."),this.audioManager&&this.audioManager.stopAllSounds();let i=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,0);i.setOrigin(0,0),i.setDepth(3e3),this.tweens.add({targets:i,alpha:1,duration:500,ease:"Power2",onComplete:()=>{this.scene.start("MenuScene")}})}};var J2=il(Ul());var K2=(o=>(o.SAFE_CLIMBING="safe_climbing",o.COMBO_SEEKER="combo_seeker",o.WALL_BOUNCER="wall_bouncer",o.SPEED_DEMON="speed_demon",o.SHOWOFF="showoff",o))(K2||{}),Cv=class{constructor(t,i,s,n,o){this.behaviorMode="safe_climbing";this.currentInput={left:!1,right:!1,jump:!1};this.lastDecisionTime=0;this.decisionCooldown=100;this.targetPlatform=null;this.stuckTimer=0;this.lastPlayerY=0;this.behaviorTimer=0;this.consecutiveWallBounces=0;this.MIN_PLATFORM_GAP=50;this.MAX_PLATFORM_SEARCH_DISTANCE=300;this.STUCK_THRESHOLD=2e3;this.BEHAVIOR_SWITCH_TIME=5e3;this.WALL_BOUNCE_PROXIMITY=100;this.scene=t,this.player=i,this.platformManager=s,this.wallManager=n,this.gameConfig=o,this.setupEventListeners(),this.switchBehaviorMode()}setupEventListeners(){j.on("player-landed",this.onPlayerLanded.bind(this)),j.on("player-wall-bounce",this.onWallBounce.bind(this))}onPlayerLanded(){this.targetPlatform=null,this.stuckTimer=0}onWallBounce(){this.consecutiveWallBounces++,this.consecutiveWallBounces>=3&&(this.behaviorMode="combo_seeker",this.consecutiveWallBounces=0)}update(t){let i=Date.now();if(this.behaviorTimer+=t,this.behaviorTimer>=this.BEHAVIOR_SWITCH_TIME&&(this.switchBehaviorMode(),this.behaviorTimer=0),i-this.lastDecisionTime<this.decisionCooldown)return this.currentInput;let s=this.analyzeGameState();this.updateStuckDetection(s,t);let n=this.makeDecision(s);return this.currentInput=n,this.lastDecisionTime=i,this.currentInput}analyzeGameState(){let t=this.player.getMovementState(),i=this.player.body,s=this.findNearbyPlatforms(this.player.x,this.player.y),n=0,o=this.scene.scale.width,r=this.player.y+400;return{playerX:this.player.x,playerY:this.player.y,playerVelocityX:t.horizontalSpeed,playerVelocityY:t.verticalSpeed,isGrounded:t.isGrounded,nearestPlatforms:s,wallLeft:n,wallRight:o,deathLineY:r,targetDirection:this.player.x<this.scene.scale.width/2?1:-1}}findNearbyPlatforms(t,i){let s=[],n=this.platformManager.getPlatforms();return n?(n.children.entries.forEach(o=>{let r=Phaser.Math.Distance.Between(t,i,o.x,o.y);r<=this.MAX_PLATFORM_SEARCH_DISTANCE&&s.push({x:o.x,y:o.y,width:o.width||100,distance:r})}),s.sort((o,r)=>o.distance-r.distance),s.slice(0,10)):s}updateStuckDetection(t,i){this.lastPlayerY-t.playerY>5?this.stuckTimer=0:this.stuckTimer+=i,this.lastPlayerY=t.playerY,this.stuckTimer>=this.STUCK_THRESHOLD&&(this.behaviorMode="wall_bouncer",this.stuckTimer=0)}makeDecision(t){switch(this.behaviorMode){case"safe_climbing":return this.safeCimbingBehavior(t);case"combo_seeker":return this.comboSeekerBehavior(t);case"wall_bouncer":return this.wallBouncerBehavior(t);case"speed_demon":return this.speedDemonBehavior(t);case"showoff":return this.showoffBehavior(t);default:return this.safeCimbingBehavior(t)}}safeCimbingBehavior(t){let i=this.findBestPlatformToClimb(t);if(!i)return{left:t.targetDirection===-1,right:t.targetDirection===1,jump:!1};let s=i.x-t.playerX;if(i.y-t.playerY<-20&&t.isGrounded){let o=Math.abs(s)/.5;if(Math.abs(t.playerVelocityX)>=o*.8)return{left:!1,right:!1,jump:!0}}return{left:s<-10,right:s>10,jump:!1}}comboSeekerBehavior(t){let i=t.nearestPlatforms.filter(s=>s.y<t.playerY-50);if(i.length>=2){let n=i[0].x-t.playerX;if(Math.abs(t.playerVelocityX)<300&&t.isGrounded)return{left:n<0,right:n>0,jump:!1};if(t.isGrounded&&Math.abs(n)<150)return{left:!1,right:!1,jump:!0}}return this.safeCimbingBehavior(t)}wallBouncerBehavior(t){let i=t.playerX-t.wallLeft,s=t.wallRight-t.playerX;return i<this.WALL_BOUNCE_PROXIMITY&&t.playerVelocityX<-50?{left:!0,right:!1,jump:!t.isGrounded}:s<this.WALL_BOUNCE_PROXIMITY&&t.playerVelocityX>50?{left:!1,right:!0,jump:!t.isGrounded}:i<s?{left:!0,right:!1,jump:t.isGrounded}:{left:!1,right:!0,jump:t.isGrounded}}speedDemonBehavior(t){let i=Math.abs(t.playerVelocityX),s=450;if(!t.isGrounded&&i>200){let n=t.playerVelocityX>0?1:-1;return{left:n===-1,right:n===1,jump:!1}}if(t.isGrounded&&i<s){let n=this.scene.scale.width/2,o=t.playerX<n;return{left:!o,right:o,jump:!1}}return i>=250&&t.nearestPlatforms.filter(o=>o.y<t.playerY-30).length>0&&t.isGrounded?{left:!1,right:!1,jump:!0}:{left:t.targetDirection===-1,right:t.targetDirection===1,jump:!1}}showoffBehavior(t){let i=Math.random();return i<.2?this.wallBouncerBehavior(t):i<.4?this.comboSeekerBehavior(t):i<.7?this.speedDemonBehavior(t):t.isGrounded&&Math.abs(t.playerVelocityX)<400?{left:t.targetDirection===-1,right:t.targetDirection===1,jump:!1}:{left:t.targetDirection===-1,right:t.targetDirection===1,jump:Math.random()<.6}}findBestPlatformToClimb(t){let i=t.nearestPlatforms.filter(s=>{let n=Math.abs(s.x-t.playerX),o=t.playerY-s.y;if(o<20||n>200)return!1;let r=this.gameConfig.calculateJumpMetrics(t.playerVelocityX),a=r.horizontalRange>=n,p=r.maxHeight>=o;return a&&p});return i.length===0?null:(i.sort((s,n)=>s.y-n.y),i[0])}switchBehaviorMode(){let t=Object.values(K2),s=(t.indexOf(this.behaviorMode)+1)%t.length;this.behaviorMode=t[s],console.log(`\u{1F916} AI switching to behavior: ${this.behaviorMode}`),this.targetPlatform=null,this.consecutiveWallBounces=0}reset(){this.currentInput={left:!1,right:!1,jump:!1},this.targetPlatform=null,this.stuckTimer=0,this.lastPlayerY=0,this.behaviorTimer=0,this.consecutiveWallBounces=0,this.behaviorMode="safe_climbing"}setBehaviorMode(t){this.behaviorMode=t,this.behaviorTimer=0}getCurrentBehavior(){return this.behaviorMode}destroy(){j.off("player-landed",this.onPlayerLanded.bind(this)),j.off("player-wall-bounce",this.onWallBounce.bind(this))}};var Sv=class extends J2.Scene{constructor(){super("MenuScene");this.blinkTimer=0;this.showInstructions=!0;this.demoResetTimer=0;this.DEMO_RESET_TIME=3e4;this.gameConfig=new Hl}preload(){this.load.setPath("assets/kenney_new-platformer-pack-1.0"),this.load.atlasXML("character","Spritesheets/spritesheet-characters-default.png","Spritesheets/spritesheet-characters-default.xml"),this.load.atlasXML("tiles","Spritesheets/spritesheet-tiles-default.png","Spritesheets/spritesheet-tiles-default.xml"),this.load.image("background-grass","Sprites/Backgrounds/Default/background_solid_grass.png"),this.load.image("background-sand","Sprites/Backgrounds/Default/background_solid_sand.png"),this.load.image("background-dirt","Sprites/Backgrounds/Default/background_solid_dirt.png"),this.load.image("background-mushrooms","Sprites/Backgrounds/Default/background_color_mushrooms.png"),this.load.image("background-cloud","Sprites/Backgrounds/Default/background_solid_cloud.png"),this.load.image("background-sky","Sprites/Backgrounds/Default/background_solid_sky.png"),this.load.image("star","Sprites/Tiles/Default/star.png"),this.load.image("gem_blue","Sprites/Tiles/Default/gem_blue.png"),this.load.image("gem_green","Sprites/Tiles/Default/gem_green.png"),this.load.image("gem_red","Sprites/Tiles/Default/gem_red.png"),this.load.image("gem_yellow","Sprites/Tiles/Default/gem_yellow.png"),this.load.image("coin_gold","Sprites/Tiles/Default/coin_gold.png"),this.load.image("coin_silver","Sprites/Tiles/Default/coin_silver.png"),this.load.image("coin_bronze","Sprites/Tiles/Default/coin_bronze.png"),this.load.image("heart","Sprites/Tiles/Default/heart.png"),this.load.image("key_blue","Sprites/Tiles/Default/key_blue.png"),this.load.image("key_green","Sprites/Tiles/Default/key_green.png"),this.load.image("key_yellow","Sprites/Tiles/Default/key_yellow.png"),this.load.audio("sfx_jump","Sounds/sfx_jump.ogg"),this.load.audio("sfx_jump-high","Sounds/sfx_jump-high.ogg"),this.load.audio("sfx_bump","Sounds/sfx_bump.ogg"),this.load.audio("sfx_coin","Sounds/sfx_coin.ogg"),this.load.audio("sfx_disappear","Sounds/sfx_disappear.ogg"),this.load.audio("sfx_gem","Sounds/sfx_gem.ogg"),this.load.audio("sfx_hurt","Sounds/sfx_hurt.ogg"),this.load.audio("sfx_magic","Sounds/sfx_magic.ogg"),this.load.audio("sfx_select","Sounds/sfx_select.ogg"),this.load.audio("sfx_throw","Sounds/sfx_throw.ogg")}create(){console.log("\u{1F3AE} MenuScene create() called"),this.setupBackground(),this.setupPlayer(),this.setupPlatforms(),this.setupWalls(),this.setupCollisions(),this.setupGameStateManager(),this.setupBiomeManager(),this.setupBackgroundColorManager(),this.setupCamera(),this.setupGameSystems(),this.setupEffects(),this.setupUI(),this.setupAIController(),this.setupMenuUI(),this.setupMenuInput(),console.log("\u{1F3AE} MenuScene initialization complete"),j.emit("current-scene-ready",this)}update(i,s){if(this.demoResetTimer+=s,this.demoResetTimer>=this.DEMO_RESET_TIME&&(this.resetDemo(),this.demoResetTimer=0),this.updateInstructionBlink(s),this.player&&this.player.update(s),this.wallManager&&this.wallManager.update(this.player.y),this.wallCollision&&this.wallCollision.update(),this.cameraManager&&this.cameraManager.update(s),this.deathLine&&this.deathLine.update(s),this.comboSystem&&this.comboSystem.update(s),this.gameUI&&this.gameUI.update(s),this.aiController&&this.currentBehaviorText){let n=this.aiController.getCurrentBehavior();this.currentBehaviorText.setText(`AI Mode: ${n.replace("_"," ").toUpperCase()}`)}}setupBackground(){console.log("\u2705 Background setup complete - using dynamic color system")}setupPlatforms(){this.platformManager=new Wl(this,this.gameConfig),this.platformManager.createGroundPlatform()}setupPlayer(){let i=this.scale.height-100,s=this.scale.width/2,n=i-100;this.player=new zl(this,s,n,this.gameConfig),this.player.setDemoMode(!0)}setupWalls(){this.wallManager=new Xl(this,this.gameConfig)}setupCollisions(){this.time.delayedCall(100,()=>{this.oneWayPlatforms=new Yl(this,this.player);let i=this.platformManager.getPlatforms();this.oneWayPlatforms.addPlatformGroup(i)}),this.wallCollision=new $l(this,this.player,this.wallManager,this.gameConfig)}setupCamera(){this.cameraManager=new Kl(this,this.player,this.gameConfig,this.gameStateManager)}setupEffects(){this.wallBounceEffects=new jl(this),this.spinningParticleEffects=new Zl(this)}setupGameSystems(){this.deathLine=new Jl(this,this.player,this.gameConfig),this.deathLine.setDemoMode(!0),this.scoreSystem=new Ql(this,this.player),this.comboSystem=new ql(this,this.player),this.audioManager=new eh(this)}setupUI(){this.gameUI=new _l(this,this.scoreSystem,this.comboSystem)}setupGameStateManager(){this.gameStateManager=new th}setupBiomeManager(){this.biomeManager=new ih(this)}setupBackgroundColorManager(){this.backgroundColorManager=new rh(this,this.biomeManager)}setupAIController(){this.aiController=new Cv(this,this.player,this.platformManager,this.wallManager,this.gameConfig),this.player.setAIController(this.aiController)}setupMenuUI(){this.menuUI=this.add.container(0,0);let i=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,.4);i.setOrigin(0,0),this.menuUI.add(i),this.titleText=this.add.text(this.scale.width/2,120,"ENDLESS TOWER",{fontFamily:"Arial, sans-serif",fontSize:72,color:"#FFFFFF",stroke:"#000000",strokeThickness:4,resolution:2}),this.titleText.setOrigin(.5),this.menuUI.add(this.titleText),this.instructionText=this.add.text(this.scale.width/2,this.scale.height-100,"PRESS ANY KEY TO START",{fontFamily:"Arial, sans-serif",fontSize:28,color:"#FFFF00",stroke:"#000000",strokeThickness:3,resolution:2}),this.instructionText.setOrigin(.5),this.menuUI.add(this.instructionText);let s=this.add.text(this.scale.width/2,this.scale.height-60,"ARROW KEYS / WASD TO MOVE \u2022 SPACE / UP TO JUMP",{fontFamily:"Arial, sans-serif",fontSize:16,color:"#AAAAAA",stroke:"#000000",strokeThickness:2,resolution:2});s.setOrigin(.5),this.menuUI.add(s),this.currentBehaviorText=this.add.text(20,20,"AI Mode: SAFE CLIMBING",{fontFamily:"Arial, sans-serif",fontSize:14,color:"#00FF00",stroke:"#000000",strokeThickness:2,resolution:2}),this.currentBehaviorText.setOrigin(0,0),this.menuUI.add(this.currentBehaviorText),this.menuUI.setDepth(1e3),this.menuUI.setScrollFactor(0,0),this.setupPowerupLegend()}setupPowerupLegend(){let i=this.add.container(this.scale.width/2,180);i.setScrollFactor(0,0),i.setDepth(9999);let s=this.add.text(0,0,"POWERUPS",{fontFamily:"Arial, sans-serif",fontSize:24,color:"#FFFF00",stroke:"#000000",strokeThickness:3,resolution:2});s.setOrigin(.5,0),i.add(s);let n=Object.values(nh),o=5,r=280,a=40;n.forEach((p,h)=>{let u=as[p],f=Math.floor(h/o),l=h%o,d=f*r-r*.75,v=35+l*a,c=this.add.sprite(d,v,u.assetKey);c.setScale(.6),c.setOrigin(0,.5);let m=this.add.text(d+30,v-8,u.name,{fontFamily:"Arial, sans-serif",fontSize:12,color:"#FFFFFF",fontStyle:"bold",resolution:2});m.setOrigin(0,0);let g=this.add.text(d+30,v+6,u.description,{fontFamily:"Arial, sans-serif",fontSize:10,color:"#CCCCCC",resolution:2});if(g.setOrigin(0,0),u.duration){let y=this.add.text(d+30,v+18,`${Math.round(u.duration/1e3)}s`,{fontFamily:"Arial, sans-serif",fontSize:9,color:"#888888",fontStyle:"italic",resolution:2});y.setOrigin(0,0),i.add(y)}else{let y=this.add.text(d+30,v+18,"PERMANENT",{fontFamily:"Arial, sans-serif",fontSize:9,color:"#FFAA00",fontStyle:"italic",resolution:2});y.setOrigin(0,0),i.add(y)}i.add([c,m,g])}),this.menuUI.add(i)}setupMenuInput(){this.input.keyboard?.on("keydown",this.onKeyPressed.bind(this)),this.input.on("pointerdown",this.onPointerPressed.bind(this))}onKeyPressed(i){console.log("\u{1F3AE} Key pressed in menu, starting game..."),this.startGame()}onPointerPressed(){console.log("\u{1F3AE} Pointer pressed in menu, starting game..."),this.startGame()}startGame(){if(console.log("\u{1F3AE} Starting transition to game..."),this.audioManager)try{this.sound.play("sfx_select")}catch{console.log("Menu selection sound not available")}this.input.keyboard?.removeAllListeners(),this.input.removeAllListeners(),this.backgroundColorManager&&(console.log("\u{1F3A8} MenuScene: Destroying BackgroundColorManager during transition"),this.backgroundColorManager.destroy(),this.backgroundColorManager=null);let i=this.add.rectangle(0,0,this.scale.width,this.scale.height,0,0);i.setOrigin(0,0),i.setDepth(2e3),this.tweens.add({targets:i,alpha:1,duration:500,ease:"Power2",onComplete:()=>{console.log("\u{1F3AC} MenuScene: Starting proper scene transition"),this.scene.stop("MenuScene"),this.scene.start("Game")}}),this.tweens.add({targets:this.menuUI,alpha:0,duration:300,ease:"Power2"})}updateInstructionBlink(i){this.blinkTimer+=i,this.blinkTimer>=800&&(this.showInstructions=!this.showInstructions,this.instructionText.setVisible(this.showInstructions),this.blinkTimer=0)}resetDemo(){console.log("\u{1F504} Resetting demo...");let i=this.scale.height-100,s=this.scale.width/2,n=i-100;if(this.player.setPosition(s,n),this.player.setVelocity(0,0),this.player.setGrounded(!0),this.scoreSystem&&this.scoreSystem.reset(),this.comboSystem&&this.comboSystem.reset(),this.deathLine&&this.deathLine.reset(),this.cameraManager&&this.cameraManager.reset(),this.aiController&&this.aiController.reset(),this.platformManager&&(this.platformManager.clear(),this.platformManager.createGroundPlatform(),this.oneWayPlatforms)){let o=this.platformManager.getPlatforms();this.oneWayPlatforms.addPlatformGroup(o)}this.wallManager&&this.wallManager.reset(),this.biomeManager&&this.biomeManager.setPlatformCount(0),console.log("\u2705 Demo reset complete")}destroy(){console.log("\u{1F9F9} MenuScene destroy() called"),this.tweens.killAll(),this.input&&this.input.keyboard&&this.input.keyboard.removeAllListeners(),this.input&&this.input.removeAllListeners(),this.aiController&&(this.aiController.destroy(),this.aiController=null),this.spinningParticleEffects&&(this.spinningParticleEffects.destroy(),this.spinningParticleEffects=null),this.gameUI&&this.gameUI.destroy(),this.comboSystem&&this.comboSystem.destroy(),this.scoreSystem&&this.scoreSystem.destroy(),this.deathLine&&this.deathLine.destroy(),this.wallBounceEffects&&this.wallBounceEffects.destroy(),this.wallCollision&&this.wallCollision.destroy(),this.oneWayPlatforms&&this.oneWayPlatforms.destroy(),this.cameraManager&&this.cameraManager.destroy(),this.wallManager&&this.wallManager.destroy(),this.platformManager&&this.platformManager.destroy(),this.player&&this.player.destroy(),this.gameStateManager&&this.gameStateManager.destroy(),this.audioManager&&this.audioManager.destroy(),this.biomeManager&&this.biomeManager.destroy(),this.backgroundColorManager&&this.backgroundColorManager.destroy(),console.log("\u2705 MenuScene destruction complete")}};var XC=il(Ul());var RE=class e{constructor(t){this.scene=t,t.events.once("destroy",this.destroy,this)}destroy(){this.scene=null}static register(t,i){e.prototype[t]=i}},K=RE;var pnt=function(e){return e===void 0&&(e=vnt),this.getFrameNameCallback=e,this},vnt=function(e,t,i){return i==="__BASE"?`${e},${t}`:`${i}:${e},${t}`},Q2=pnt;function IE(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(i=>IE(i));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;let t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=IE(e[i]));return t}var qt=IE;var mnt=function(e,t,i,s){Array.isArray(t)&&(s=i,i=t,t=void 0),t==null&&(t="__BASE"),typeof i=="number"&&arguments.length>=6?(i=[arguments[2],void 0,arguments[3]],s=[arguments[4],void 0,arguments[5]]):i===void 0&&s===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(i=this.columns.data,s=this.rows.data):(i=qt(i),s=qt(s)),this.textureKey=e,this.baseFrameName=t,this.columns.data=i,this.columns.count=i?i.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=s,this.rows.count=s?s.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var n=this.scene.sys.textures.get(e);if(!n)return this.clear(),this;if(!i||!s)return this.clear(),this;for(var o=n.get(t),r=o.width,a=0,p=0,h=i.length;p<h;p++)i[p]===void 0?a++:typeof i[p]=="number"?r-=i[p]:r-=i[p].width;for(var u=a>0?r/a:0,f=o.height,l=0,p=0,h=s.length;p<h;p++)s[p]===void 0?l++:typeof s[p]=="number"?f-=s[p]:f-=s[p].width;for(var d=l?f/l:0,v,c,m,g,y,x=0,C=0,S=0,E=s.length;S<E;S++){s[S]===void 0&&(s[S]=d),typeof s[S]=="number"&&(s[S]={height:s[S],stretch:S%2}),v=s[S],m=v.height,this.rows.stretch+=v.stretch|0,this.rows.minHeight+=v.stretch>0?0:m,x=0;for(var p=0,T=i.length;p<T;p++){if(i[p]===void 0&&(i[p]=u),typeof i[p]=="number"&&(i[p]={width:i[p],stretch:p%2}),c=i[p],g=c.width,S===0&&(this.columns.stretch+=c.stretch|0,this.columns.minWidth+=c.stretch>0?0:g),g>=1&&m>=1){y=this.getFrameNameCallback(p,S,t);var P=typeof y;(P==="string"||P==="number")&&n.add(y,0,x+o.cutX,C+o.cutY,g,m)}x+=g}C+=m}return this.updateTexture(),this},q2=mnt;var gnt=function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t=this.columns.minWidth*this.maxFixedPartScaleX,i=this.rows.minHeight*this.maxFixedPartScaleY,s=this.width-t,n=this.height-i,o=s>=0?this.maxFixedPartScaleX:this.width/t,r=n>=0?this.maxFixedPartScaleY:this.height/i;if(this.preserveRatio){var a=Math.min(o,r);if(o>a){var p=(o-a)*t;s>=0?s+=p:s=p,o=a}if(r>a){var h=(r-a)*i;n>=0?n+=h:n=h,r=a}}this.columns.scale=o,this.rows.scale=r;var u;s>0?u=this.columns.stretch>0?s/this.columns.stretch:0:u=0;var f;n>0?f=this.rows.stretch>0?n/this.rows.stretch:0:f=0;var l,d,v,c,m,g=0,y=0,x;this._beginDraw();for(var C=0,S=this.rows.count;C<S;C++){v=this.rows.data[C],m=v.stretch===0?v.height*r:f*v.stretch,g=0;for(var E=0,T=this.columns.count;E<T;E++)d=this.columns.data[E],c=d.stretch===0?d.width*o:u*d.stretch,l=this.getFrameNameCallback(E,C,this.baseFrameName),e.has(l)&&c>0&&m>0&&(v.stretch===0&&d.stretch===0||this.getStretchMode(E,C)===0?x=0:x=1,x===0?this._drawImage(this.textureKey,l,g,y,c,m):this._drawTileSprite(this.textureKey,l,g,y,c,m)),g+=c;y+=m}this._endDraw()},_2=gnt;var xnt=Phaser.Utils.Objects.IsPlainObject,tL=Phaser.Utils.Objects.GetValue,ynt=function(e){return xnt(e)?(this.stretchMode.edge=AE(tL(e,"edge",0)),this.stretchMode.internal=AE(tL(e,"internal",0))):(e=AE(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},AE=function(e){return typeof e=="string"&&(e=Cnt[e]),e},Cnt={scale:0,repeat:1},eL=ynt;var Snt=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},iL=Snt;var Tnt=function(e,t){return iL.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},rL=Tnt;var Ent=function(e){return e==null&&(e=!0),this.preserveRatio=e,this},nL=Ent;var Pnt=function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this},sL=Pnt;var Mnt=function(){},re=Mnt;var aL={_beginDraw:re,_drawImage:re,_drawTileSprite:re,_endDraw:re,setGetFrameNameCallback:Q2,setBaseTexture:q2,updateTexture:_2,setStretchMode:eL,getStretchMode:rL,setPreserveRatio:nL,setMaxFixedPartScale:sL};var Vd=Phaser.Utils.Objects.IsPlainObject,Vt=Phaser.Utils.Objects.GetValue,wnt=function(e,t){class i extends e{constructor(n,o,r,a,p,h,u,f,l,d){if(Vd(o)?(d=o,o=Vt(d,"x",0),r=Vt(d,"y",0),a=Vt(d,"width",1),p=Vt(d,"height",1),h=Vt(d,"key",void 0),u=Vt(d,"baseFrame",void 0),f=Vt(d,"columns",void 0),l=Vt(d,"rows",void 0)):Vd(a)?(d=a,a=Vt(d,"width",1),p=Vt(d,"height",1),h=Vt(d,"key",void 0),u=Vt(d,"baseFrame",void 0),f=Vt(d,"columns",void 0),l=Vt(d,"rows",void 0)):Vd(h)?(d=h,h=Vt(d,"key",void 0),u=Vt(d,"baseFrame",void 0),f=Vt(d,"columns",void 0),l=Vt(d,"rows",void 0)):Vd(u)?(d=u,u=Vt(d,"baseFrame",void 0),f=Vt(d,"columns",void 0),l=Vt(d,"rows",void 0)):Array.isArray(u)?(d=l,l=f,f=u,u=Vt(d,"baseFrame",void 0)):Vd(f)&&(d=f,f=Vt(d,"columns",void 0),l=Vt(d,"rows",void 0)),u===void 0&&(u=Vt(d,"frame",void 0)),f===void 0){var v=Vt(d,"leftWidth",void 0),c=Vt(d,"rightWidth",void 0);v!==void 0&&c!==void 0&&(f=[v,void 0,c])}if(l===void 0){var m=Vt(d,"topHeight",void 0),g=Vt(d,"bottomHeight",void 0);m!==void 0&&g!==void 0&&(l=[m,void 0,g])}super(n),this.type=t,this.setPosition(o,r).setSize(a,p).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(Vt(d,"getFrameNameCallback",void 0)),this.setStretchMode(Vt(d,"stretchMode",0)),this.setPreserveRatio(Vt(d,"preserveRatio",!0));var y=Vt(d,"maxFixedPartScale",1),x=Vt(d,"maxFixedPartScaleX",y),C=Vt(d,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(x,C),this.setBaseTexture(h,u,f,l)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(n,o){return this.width===n&&this.height===o?this:(super.resize?super.resize(n,o):super.setSize(n,o),this.updateTexture(),this)}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(i.prototype,aL),i},Tv=wnt;var bnt=Phaser.Game,Rnt=function(e){return e instanceof bnt},OE=Rnt;var Int=Phaser.Scene,Ant=function(e){return e instanceof Int},Zr=Ant;var Ont=function(e){if(e==null||typeof e!="object")return null;if(OE(e))return e;if(OE(e.game))return e.game;if(Zr(e))return e.sys.game;if(Zr(e.scene))return e.scene.sys.game},Ki=Ont;var Dnt=Phaser.GameObjects,zs=void 0,Lnt=function(e,t){if(zs||(zs={},Ki(e).events.once("destroy",function(){for(var s in zs)zs[s].destroy();zs=void 0})),!zs.hasOwnProperty(t)){var i=Ki(e).scene.systemScene,e=new Dnt[t](i);e.setOrigin(0),zs[t]=e}return zs[t]},Ev=Lnt;var Fnt=function(e,t,i,s,n,o){var r=Ev(this,"Image").setTexture(e,t).setDisplaySize(n,o);this.draw(r,i,s)},oL=Fnt;var Bnt=function(e,t,i,s,n,o){var r=Ev(this,"TileSprite").setTexture(e,t).setSize(n,o);this.draw(r,i,s)},lL=Bnt;var Nnt=Phaser.GameObjects.RenderTexture,Pv=class extends Tv(Nnt,"rexNinePatch"){},Gnt={_drawImage:oL,_drawTileSprite:lL};Object.assign(Pv.prototype,Gnt);var hL=Pv;var uL=hL;var Ud=uL;var dL=function(e){return e==null||e===""||e.length===0},knt=function(e,t,i){var s=e;if(!dL(t)){typeof t=="string"&&(t=t.split("."));for(var n,o=0,r=t.length;o<r;o++){if(n=t[o],s[n]==null||typeof s[n]!="object"){var a;o===r-1?i===void 0?a={}:a=i:a={},s[n]=a}s=s[n]}}return s},Vnt=function(e,t,i,s){if(s===void 0&&(s="."),typeof e=="object"){if(dL(t)){if(i==null)return;typeof i=="object"&&(e=i)}else{typeof t=="string"&&(t=t.split(s));var n=t.pop(),o=knt(e,t);o[n]=i}return e}},Z=Vnt;K.register("ninePatch",function(e,t,i,s,n,o,r,a){var p=new Ud(this.scene,e,t,i,s,n,o,r,a);return this.scene.add.existing(p),p});Z(window,"RexPlugins.UI.NinePatch",Ud);var Unt=Phaser.GameObjects.GetCalcMatrix,znt=function(e,t,i,s){var n=t.getRenderList();if(n.length!==0){i.addToRenderList(t);var o=e.pipelines.set(t.pipeline),r=t.frame.glTexture,a=o.setGameObject(t),p=i.roundPixels,h=Unt(t,i,s),u=o.calcMatrix.copyFrom(h.calc),f=t._displayOriginX,l=t._displayOriginY,d=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var v=0,c=n.length;v<c;v++)n[v].webglRender(o,u,d,f,l,r,a,p);e.pipelines.postBatch(t)}},fL=znt;var Wnt=Phaser.Renderer.Canvas.SetTransform,Hnt=function(e,t,i,s){var n=e.currentContext,o=t.getRenderList();if(!(o.length===0||!Wnt(e,n,t,i,s))){i.addToRenderList(t);var r=i.roundPixels,a=-t._displayOriginX,p=-t._displayOriginY;n.translate(a,p);for(var h=0,u=o.length;h<u;h++)o[h].canvasRender(n,a,p,r);n.restore()}},cL=Hnt;var pL={renderWebGL:fL,renderCanvas:cL};var Ynt=function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},vL=Ynt;var Xnt=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=e,i.hitArea.height=t),this},DE=Xnt;var $nt=function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this},mL=$nt;var jnt=Phaser.Utils.Array.Remove,Znt=function(e){return this.poolManager&&this.poolManager.free(e),jnt(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},gL=Znt;var Knt=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this},LE=Knt;var Jnt=function(){return this.lastAppendedChildren},xL=Jnt;var Qnt=function(){return this.children.list},yL=Qnt;var CL={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var SL={setTexture:vL,resize:DE,setSize:DE,addChild:mL,removeChild:gL,removeChildren:LE,clear:LE,getLastAppendedChildren:xL,getChildren:yL};Object.assign(SL,CL);var TL=SL;var FE=class{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}},EL=FE;var hi=EL;var qnt=Phaser.Utils.Objects.GetValue,_nt={},BE=class{constructor(t){this.pools=qnt(t,"pools",_nt)}destroy(){this.pools=void 0}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new hi),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,s=t.length;i<s;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}},PL=BE;var ML=!1,tst=function(e){if(!ML){e===void 0&&(e=60);var t=Phaser.VERSION.split("."),i=parseInt(t[0]);if(i===3){var s=parseInt(t[1]);s<e&&console.error(`Minimum supported version : ${i}.${s}`)}else console.error(`Can't supported version : ${i}`);ML=!0}},Ws=tst;Ws();var est=Phaser.GameObjects.GameObject,ist=Phaser.Utils.Objects.IsPlainObject,zd=Phaser.Utils.Objects.GetValue,rst=Phaser.Structs.List,nst=Phaser.Utils.Array.StableSort,Mv=class extends est{constructor(t,i,s,n,o,r){ist(i)&&(r=i,i=zd(r,"x",0),s=zd(r,"y",0),n=zd(r,"texture"),o=zd(r,"frame")),i===void 0&&(i=0),s===void 0&&(s=0),super(t,"rexBlitter"),this.children=new rst,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var a=zd(r,"reuseBob",!0);this.poolManager=a?new PL(r):void 0,this.setTexture(n,o),this.setPosition(i,s),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,i=this.children.list,s=0,n=i.length;s<n;s++){var o=i[s];sst(o)&&(this.renderList.push(o),t||(t=o.depth!==0))}t&&nst(this.renderList,ast),this.displayListDirty=!1}return this.renderList}},sst=function(e){return e.active&&e.visible&&e.alpha>0},ast=function(e,t){return e._depth-t._depth},gr=Phaser.GameObjects.Components;Phaser.Class.mixin(Mv,[gr.Alpha,gr.BlendMode,gr.ComputedSize,gr.Depth,gr.GetBounds,gr.Mask,gr.Origin,gr.Pipeline,gr.PostPipeline,gr.ScrollFactor,gr.Transform,gr.Visible,pL,TL]);var wL=Mv;var wv="image";var ost=function(e,t,i){if(!e||typeof e=="number")return i;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")!==-1)t=t.split(".");else return i}for(var s=t,n=e,o=i,r=0;r<s.length;r++)if(t=s[r],n.hasOwnProperty(t))o=n[t],n=o;else{o=i;break}return o},Ot=ost;var lst=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e},Ji=lst;var Hs={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var i=e;for(e in i)this.data[e]=i[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:Ot(this.data,e,t)},incData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)+t),this},mulData(e,t,i){return i===void 0&&(i=0),this.enableData(),this.setData(e,this.getData(e,i)*t),this},clearData(){return this.data&&Ji(this.data),this}};var bv=class{constructor(t,i){this.type=i,this.data=void 0,this.setParent(t).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(t){return this.parent=t,this}setDisplayListDirty(t){return t&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(t){this.setDisplayListDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(bv.prototype,Hs);var bL=bv;var hst=Phaser.Math.DegToRad,ust=Phaser.Math.RadToDeg,ah=Phaser.Utils.Objects.GetValue,NE=class extends bL{get visible(){return this._visible}set visible(t){this.setDisplayListDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDisplayListDirty(!!this._alpha!=!!t),this._alpha=t}setAlpha(t){return this.alpha=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setRotation(t){return this.rotation=t,this}get angle(){return ust(this.rotation)}set angle(t){this.rotation=hst(t)}setAngle(t){return this.angle=t,this}setScaleX(t){return this.scaleX=t,this}get width(){return this._width}set width(t){this._width=t}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}setScaleY(t){return this.scaleY=t,this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get height(){return this._height}set height(t){this._height=t}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(t){this.scaleX=t/this._width}setDisplayWidth(t,i){return i===void 0&&(i=!1),this.displayWidth=t,i&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(t){this.scaleY=t/this._height}setDisplayHeight(t,i){return i===void 0&&(i=!1),this.displayHeight=t,i&&(this.scaleX=this.scaleY),this}setOriginX(t){return this.originX=t,this._displayOriginX=this.width*t,this}setOriginY(t){return this.originY=t,this._displayOriginY=this.height*t,this}setOrigin(t,i){return i===void 0&&(i=t),this.setOriginX(t).setOriginY(i),this}get depth(){return this._depth}set depth(t){this.setDisplayListDirty(this._depth!=t),this._depth=t}setDepth(t){return t===void 0&&(t=0),this.depth=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=ah(t,"width",void 0),s=ah(t,"height",void 0),n=ah(t,"scale",void 0),o=ah(t,"scaleX",n),r=ah(t,"scaleY",n);i!==void 0?s===void 0&&r===void 0?this.setWidth(i,!0):this.setWidth(i):o!==void 0?this.setScaleX(o):t.hasOwnProperty("displayWidth")&&this.setDisplayWidth(t.displayWidth),s!==void 0?i===void 0&&o===void 0?this.setHeight(s,!0):this.setHeight(s):r!==void 0?this.setScaleY(r):t.hasOwnProperty("displayHeight")&&this.setDisplayHeight(t.displayHeight);var a=ah(t,"origin",void 0);return a!==void 0?this.setOrigin(a):(t.hasOwnProperty("originX")&&this.setOriginX(t.originX),t.hasOwnProperty("originY")&&this.setOriginY(t.originY)),t.hasOwnProperty("depth")&&this.setDepth(t.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(t,i,s,n,o,r,a,p){}canvasRender(t,i,s,n){}},RL=NE;var dst=Phaser.GameObjects.Components.TransformMatrix,fst=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Rv=new dst,cst=function(e,t,i,s,n,o,r,a){var p=this.frame;if(p){var h=this._width,u=this._height,f=h*this.originX,l=u*this.originY,d=this.x-s,v=this.y-n,c,m,g,y,x,C,S,E;if(this.isCropped){var T=this._crop;(T.flipX!==this.flipX||T.flipY!==this.flipY)&&p.updateCropUVs(T,this.flipX,this.flipY),c=T.u0,m=T.v0,g=T.u1,y=T.v1,S=T.width,E=T.height,x=T.x,C=T.y}else c=this.frame.u0,m=this.frame.v0,g=this.frame.u1,y=this.frame.v1,S=h,E=u,x=0,C=0;var P=1,M=1;this.flipX&&(d+=h-f*2,P=-1),this.flipY&&(v+=u-l*2,M=-1),Rv.applyITRS(d,v,this.rotation,this.scaleX*P,this.scaleY*M),t.multiply(Rv,Rv);var w=-f+x,b=-l+C,I=w+S,R=b+E,A=Rv.setQuad(w,b,I,R,a),L=fst(this.tint,this.alpha*i);e.batchQuad(this.parent,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],c,m,g,y,L,L,L,L,this.tintFill,o,r)}},IL=cst;var pst=function(e,t,i,s){var n=this.frame;if(n){e.save();var o=this._width,r=this._height,a=o*this.originX,p=r*this.originY,h=this.x-a,u=this.y-p,f,l,d,v;if(this.isCropped){var c=this._crop;(c.flipX!==this.flipX||c.flipY!==this.flipY)&&n.updateCropUVs(c,this.flipX,this.flipY),d=c.cw,v=c.ch,f=c.cx,l=c.cy}else d=n.cutWidth,v=n.cutHeight,f=n.cutX,l=n.cutY;var m=1,g=1;this.flipX&&(h+=o,m=-1),this.flipY&&(u+=r,g=-1);var y=n.source.resolution,x=d/y,C=v/y;s&&(h=Math.floor(h+.5),u=Math.floor(u+.5),x+=.5,C+=.5),e.translate(h,u),e.rotate(this.rotation),e.scale(this.scaleX*m,this.scaleY*g),e.drawImage(n.source.image,f,l,d,v,0,0,x,C),e.restore()}},AL=pst;var vst=Phaser.Utils.Objects.IsPlainObject,Iv=class extends RL{constructor(t,i){super(t,wv),this._crop=mst(),this.setFrame(i)}get width(){return this._width}set width(t){}get height(){return this._height}set height(t){}setFrame(t){return arguments.length>0&&!vst(t)&&(t=this.parent.texture.get(t)),this.frame=t,t?(this._width=t.realWidth,this._height=t.realHeight):(this._width=0,this._height=0),this}setFlipX(t){return t===void 0&&(t=!0),this.flipX=t,this}setFlipY(t){return t===void 0&&(t=!0),this.flipY=t,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(t){this._tint=t}setTint(t){return this.tint=t,this.tintFill=!1,this}setTintFill(t){return this.tint=t,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(t){this._tintFill=t}setCrop(t,i,s,n){return t===void 0?(this.isCropped=!1,this):this.frame?t===0&&i===0&&s===this._width&&n===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,t,i,s,n,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(t){return t?(t.hasOwnProperty("width")&&(t.displayWidth=t.width,delete t.width),t.hasOwnProperty("height")&&(t.displayHeight=t.height,delete t.height),t.hasOwnProperty("frame")&&this.setFrame(t.frame),super.modifyPorperties(t),t.hasOwnProperty("flipX")&&this.setFlipX(t.flipX),t.hasOwnProperty("flipY")&&this.setFlipY(t.flipY),t.hasOwnProperty("tint")&&this.setTint(t.tint),t.hasOwnProperty("tintFill")&&this.setTintFill(t.tintFill),this):this}},mst=function(e){return e===void 0&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},gst={webglRender:IL,canvasRender:AL};Object.assign(Iv.prototype,gst);var OL=Iv;var xst=function(e,t){typeof t=="string"&&(t={frame:t});var i=e.poolManager?e.poolManager.allocate(wv):null;return i===null?i=new OL(e):i.setParent(e).setActive(),i.modifyPorperties(t),e.addChild(i),i},Av=xst;var yst=function(e,t,i,s,n,o){Av(this,{frame:t,x:i,y:s,width:n,height:o})},DL=yst;var Cst=function(e,t,i,s,n,o){var r=this.texture.get(t),a=r.width,p=r.height,h=n%a,u=o%p;h===0&&(h=a),u===0&&(u=p);for(var f=Math.ceil(n/a),l=Math.ceil(o/p),d=f-1,v=l-1,c=0;c<f;c++)for(var m=0;m<l;m++){let x=Av(this,{frame:t,x:i+c*a,y:s+m*p});var g=c===d?h:a,y=m===v?u:p;(g!==a||y!==p)&&x.setCrop(0,0,g,y)}},LL=Cst;var FL={_drawImage:DL,_drawTileSprite:LL};var Ov=class extends Tv(wL,"rexNinePatch2"){setBaseTexture(t,i,s,n){return this.setTexture(t,i),super.setBaseTexture(t,i,s,n),this}};Object.assign(Ov.prototype,FL);var BL=Ov;var NL=BL;var GE=NL;K.register("ninePatch2",function(e,t,i,s,n,o,r,a){var p=new GE(this.scene,e,t,i,s,n,o,r,a);return this.scene.add.existing(p),p});Z(window,"RexPlugins.UI.NinePatch2",GE);var Sst=Phaser.Renderer.WebGL.Utils,Tst=function(e,t,i,s,n,o){for(var r=Sst.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*s),a=i.pathData,p=i.pathIndexes,h=0;h<p.length;h+=3){var u=p[h]*2,f=p[h+1]*2,l=p[h+2]*2,d=a[u+0]-n,v=a[u+1]-o,c=a[f+0]-n,m=a[f+1]-o,g=a[l+0]-n,y=a[l+1]-o,x=t.getX(d,v),C=t.getY(d,v),S=t.getX(c,m),E=t.getY(c,m),T=t.getX(g,y),P=t.getY(g,y);e.batchTri(i,x,C,S,E,T,P,0,0,1,1,r,r,r,2)}},Dv=Tst;var Est=Phaser.Renderer.WebGL.Utils,Pst=function(e,t,i,s,n){var o=e.strokeTint,r=Est.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*i);o.TL=r,o.TR=r,o.BL=r,o.BR=r;var a=t.pathData,p=a.length-1,h=t.lineWidth,u=h/2,f=a[0]-s,l=a[1]-n;t.closePath||(p-=2);for(var d=2;d<p;d+=2){var v=a[d]-s,c=a[d+1]-n;e.batchLine(f,l,v,c,u,u,h,d-2,t.closePath?d===p-1:!1),f=v,l=c}},Ys=Pst;var Mst=Phaser.GameObjects.GetCalcMatrix,wst=function(e,t,i,s){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var n=e.pipelines.set(t.pipeline),o=Mst(t,i,s),r=n.calcMatrix.copyFrom(o.calc),a=t._displayOriginX,p=t._displayOriginY,h=i.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&Dv(n,r,t,h,a,p),t.isStroked&&Ys(n,t,h,a,p),e.pipelines.postBatch(t)},GL=wst;var bst=function(e,t,i,s){var n=i||t.fillColor,o=s||t.fillAlpha,r=(n&16711680)>>>16,a=(n&65280)>>>8,p=n&255;e.fillStyle="rgba("+r+","+a+","+p+","+o+")"},fn=bst;var Rst=function(e,t,i,s){var n=i||t.strokeColor,o=s||t.strokeAlpha,r=(n&16711680)>>>16,a=(n&65280)>>>8,p=n&255;e.strokeStyle="rgba("+r+","+a+","+p+","+o+")",e.lineWidth=t.lineWidth},cn=Rst;var Ist=Phaser.Renderer.Canvas.SetTransform,Ast=function(e,t,i,s){t.dirty&&(t.updateData(),t.dirty=!1),i.addToRenderList(t);var n=e.currentContext;if(Ist(e,n,t,i,s)){var o=t._displayOriginX,r=t._displayOriginY,a=t.pathData,p=a.length-1,h=a[0]-o,u=a[1]-r;n.beginPath(),n.moveTo(h,u),t.closePath||(p-=2);for(var f=2;f<p;f+=2){var l=a[f]-o,d=a[f+1]-r;n.lineTo(l,d)}n.closePath(),t.isFilled&&(fn(n,t),n.fill()),t.isStroked&&(cn(n,t),n.stroke()),n.restore()}},kL=Ast;var VL={renderWebGL:GL,renderCanvas:kL};var Ost=Phaser.GameObjects.Shape,Lv=class extends Ost{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,i){return i===void 0&&(i=1),this.fillColor=t,this.fillAlpha=i,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,i,s){return s===void 0&&(s=1),this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=s,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,i){var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}};Object.assign(Lv.prototype,VL);var Fv=Lv;var Xs=Phaser.Utils.Objects.GetValue,kE=class{constructor(t,i,s,n,o){t===void 0&&(t=0),i===void 0&&(i=t),s===void 0&&(s=0),n===void 0&&(n=0),o===void 0&&(o=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(t,i,s,n,o)}setTo(t,i,s,n,o){return this.setPosition(t,i),this.setRadius(o),this.setSize(s,n),this}setPosition(t,i){return this.x=t,this.y=i,this}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setSize(t,i){return this.width=t,this.height=i,this}get minWidth(){var t=this.cornerRadius;return Math.max(t.tl.x+t.tr.x,t.bl.x+t.br.x)}get minHeight(){var t=this.cornerRadius;return Math.max(t.tl.y+t.bl.y,t.tr.y+t.br.y)}get width(){return this._width}set width(t){t==null&&(t=0),this._width=Math.max(t,this.minWidth)}get height(){return this._height}set height(t){t==null&&(t=0),this._height=Math.max(t,this.minHeight)}get radius(){var t=this.cornerRadius;return Math.max(t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y)}set radius(t){var i,s;typeof t=="number"?(i=t,s=t):(i=Xs(t,"x",0),s=Xs(t,"y",0));var n=this.cornerRadius;n.tl=Bv(Xs(t,"tl",void 0),i,s),n.tr=Bv(Xs(t,"tr",void 0),i,s),n.bl=Bv(Xs(t,"bl",void 0),i,s),n.br=Bv(Xs(t,"br",void 0),i,s)}get radiusTL(){var t=this.cornerRadius.tl;return Math.max(t.x,t.y)}set radiusTL(t){Nv(this.cornerRadius.tl,t)}get radiusTR(){var t=this.cornerRadius.tr;return Math.max(t.x,t.y)}set radiusTR(t){Nv(this.cornerRadius.tr,t)}get radiusBL(){var t=this.cornerRadius.bl;return Math.max(t.x,t.y)}set radiusBL(t){Nv(this.cornerRadius.bl,t)}get radiusBR(){var t=this.cornerRadius.br;return Math.max(t.x,t.y)}set radiusBR(t){Nv(this.cornerRadius.br,t)}},Bv=function(e,t,i){return e===void 0?e={x:t,y:i}:typeof e=="number"&&(e={x:e,y:e}),UL(e),e},Nv=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=Xs(t,"x",0),e.y=Xs(t,"y",0)),UL(e)},UL=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)},oh=kE;var Dst=function(e){return e.x>0&&e.y>0},_t=Dst;var Lst=function(e,t,i){var s=i.length;if(s>=2){var n=i[s-2],o=i[s-1];if(e===n&&t===o)return i}return i.push(e,t),i},Ee=Lst;var zL=Phaser.Math.DegToRad,Fst=function(e,t,i,s,n,o,r,a,p){r&&o>n?o-=360:!r&&o<n&&(o+=360);var h=o-n,u=zL(h)/a;n=zL(n);for(var f=0;f<=a;f++){var l=n+u*f,d=e+i*Math.cos(l),v=t+s*Math.sin(l);Ee(d,v,p)}return p},Re=Fst;var Bst=Phaser.Utils.Objects.IsPlainObject,WL=Phaser.Utils.Objects.GetValue,Nst=Phaser.Geom.Polygon.Earcut,VE=class extends Fv{constructor(t,i,s,n,o,r,a,p){var h,u,f,l;if(Bst(i)){var d=i;i=d.x,s=d.y,n=d.width,o=d.height,r=d.radius,a=d.color,p=d.alpha,h=d.strokeColor,u=d.strokeAlpha,f=d.strokeWidth,l=d.shape}i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=n),r===void 0&&(r=0),l===void 0&&(l=0);var v=new oh;if(super(t,"rexRoundRectangleShape",v),this.setShapeType(l),this.shapeType===0){var c=WL(r,"radius",r);v.setTo(0,0,n,o,c)}else{var c={x:n/2,y:o/2};v.setTo(0,0,n,o,c)}this.setIteration(WL(r,"iteration",void 0)),this.setPosition(i,s),this.setFillStyle(a,p),f===void 0&&(f=2),this.setStrokeStyle(f,h,u),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var s=t.width,n=t.height,o=t.cornerRadius,r,a=this.iteration+1;if(r=o.tl,_t(r))if(r.convex){var p=r.x,h=r.y;Re(p,h,r.x,r.y,180,270,!1,a,i)}else{var p=0,h=0;Re(p,h,r.x,r.y,90,0,!0,a,i)}else Ee(0,0,i);if(r=o.tr,_t(r))if(r.convex){var p=s-r.x,h=r.y;Re(p,h,r.x,r.y,270,360,!1,a,i)}else{var p=s,h=0;Re(p,h,r.x,r.y,180,90,!0,a,i)}else Ee(s,0,i);if(r=o.br,_t(r))if(r.convex){var p=s-r.x,h=n-r.y;Re(p,h,r.x,r.y,0,90,!1,a,i)}else{var p=s,h=n;Re(p,h,r.x,r.y,270,180,!0,a,i)}else Ee(s,n,i);if(r=o.bl,_t(r))if(r.convex){var p=r.x,h=n-r.y;Re(p,h,r.x,r.y,90,180,!1,a,i)}else{var p=0,h=n;Re(p,h,r.x,r.y,360,270,!0,a,i)}else Ee(0,n,i);return i.push(i[0],i[1]),this.pathIndexes=Nst(i),this}setShapeType(t){return typeof t=="string"&&(t=Gst[t]),this.shapeType=t,this}setSize(t,i){return i===void 0&&(i=t),this.geom.width===t&&this.geom.height===i?this:(this.geom.setSize(t,i),this.shapeType===1&&this.setRadius({x:t/2,y:i/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(t,i),this)}get radius(){return this.geom.radius}set radius(t){this.geom.setRadius(t),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(t){this.geom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(t){this.geom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(t){this.geom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(t){this.geom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}},Gst={rectangle:0,circle:1},HL=VE;var YL=HL;var Qi=YL;K.register("roundRectangle",function(e,t,i,s,n,o,r){var a=new Qi(this.scene,e,t,i,s,n,o,r);return this.scene.add.existing(a),a});Z(window,"RexPlugins.UI.RoundRectangle",Qi);var kst=Phaser.Renderer.WebGL.Utils,Vst=function(e,t,i,s){if(t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)){i.addToRenderList(t);var n=t.frame,o=n.width,r=n.height,a=kst.getTintAppendFloatAlpha,p=e.pipelines.set(t.pipeline,t),h=p.setTexture2D(n.glTexture,t);e.pipelines.preBatch(t),p.batchTexture(t,n.glTexture,o,r,t.x,t.y,o/t.resolution,r/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,o,r,a(t.tintTopLeft,i.alpha*t._alphaTL),a(t.tintTopRight,i.alpha*t._alphaTR),a(t.tintBottomLeft,i.alpha*t._alphaBL),a(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,s,!1,h),e.pipelines.postBatch(t)}},XL=Vst;var Ust=function(e,t,i,s){t.dirty&&(t.updateTexture(),t.dirty=!1),!(t.width===0||t.height===0)&&(i.addToRenderList(t),e.batchSprite(t,t.frame,i,s))},$L=Ust;var jL={renderWebGL:XL,renderCanvas:$L};var zst=Phaser.Display.Color,ZL={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,i,s,n,o,r,a,p,h){var u=this.scene.sys.textures.getFrame(e,t);if(!u)return this;var f=u.cutWidth,l=u.cutHeight;i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=f),o===void 0&&(o=l),r===void 0&&(r=0),a===void 0&&(a=0),p===void 0&&(p=f),h===void 0&&(h=l);var d=u.cutX+r,v=u.cutY+a;return this.context.drawImage(u.source.image,d,v,p,h,i,s,n,o),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,i){i===void 0&&(i=new zst);var s=this.context.getImageData(e,t,1,1);return i.setTo(s.data[0],s.data[1],s.data[2],s.data[3]),i},setPixel(e,t,i,s,n,o){if(typeof i!="number"){var r=i;i=r.red,s=r.green,n=r.blue,o=r.alpha}o===void 0&&(o=i!==0||s!==0||n!==0?255:0);var a=this.context.createImageData(1,1);return a.data[0]=i,a.data[1]=s,a.data[2]=n,a.data[3]=o,this.context.putImageData(a,e,t),this.dirty=!0,this}};var Wst=function(e,t,i,s,n,o,r){var a=e.sys.textures,p=e.renderer;s===void 0&&(s=0),n===void 0&&(n=0),o===void 0&&(o=t.width),r===void 0&&(r=t.height);var h;a.exists(i)?h=a.get(i):h=a.createCanvas(i,o,r);var u=h.getSourceImage();u.width!==o&&(u.width=o),u.height!==r&&(u.height=r);var f=u.getContext("2d",{willReadFrequently:!0});f.clearRect(0,0,o,r),f.drawImage(t,s,n,o,r),p.gl&&h&&p.canvasToTexture(u,h.source[0].glTexture,!0,0)},Gv=Wst;var KL={updateTexture(e,t){if(e){var i=this.resolution;i!==1&&(this.context.save(),this.context.scale(i,i)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),i!==1&&this.context.restore()}(this.canvas.width!==this.frame.width||this.canvas.height!==this.frame.height)&&this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(e,t,i,s,n){var o=this.canvas;return s===void 0?s=o.width:s*=this.resolution,n===void 0?n=o.height:n*=this.resolution,Gv(this.scene,o,e,t,i,s,n),this},loadTexture(e,t){var i=this.scene.sys.textures.getFrame(e,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.setSize(i.cutWidth,i.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};Ws();var JL=Phaser.Display.Canvas.CanvasPool,Hst=Phaser.GameObjects.GameObject,Yst=Phaser.Utils.String.UUID,kv=class extends Hst{constructor(t,i,s,n,o,r){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=1),r===void 0&&(r=1),super(t,"rexCanvas"),this.renderer=t.sys.game.renderer,this._width=n,this._height=o,this.resolution=r,n=Math.max(Math.ceil(n*this.resolution),1),o=Math.max(Math.ceil(o*this.resolution),1),this.canvas=JL.create(this,n,o),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(i,s),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=Yst(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){JL.remove(this.canvas),this.canvas=null,this.context=null;var t=this.texture;t&&t.destroy()}setResolution(t){if(this.resolution===t)return this;this.resolution=t;var i=Math.max(Math.ceil(this.width*t),1),s=Math.max(Math.ceil(this.height*t),1);return this.canvas.width=i,this.canvas.height=s,this.frame.source.resolution=t,this.dirty=!0,this}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setCanvasSize(t,i){return this._width===t&&this._height===i?this:(this._width=t,this._height=i,this.updateDisplayOrigin(),t=Math.max(Math.ceil(t*this.resolution),1),i=Math.max(Math.ceil(i*this.resolution),1),this.canvas.width=t,this.canvas.height=i,this.frame.setSize(t,i),this.dirty=!0,this)}setSize(t,i){return this.setCanvasSize(t,i),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(t){this.scaleX=t/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(t){this.scaleY=t/this._height}setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}getCanvas(t){return t||(this.dirty=!0),this.canvas}getContext(t){return t||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(t,i){return this.setSize(t,i),this}},ki=Phaser.GameObjects.Components;Phaser.Class.mixin(kv,[ki.Alpha,ki.BlendMode,ki.Crop,ki.Depth,ki.Flip,ki.GetBounds,ki.Mask,ki.Origin,ki.Pipeline,ki.PostPipeline,ki.ScrollFactor,ki.Tint,ki.Transform,ki.Visible,jL,ZL,KL]);var Vi=kv;var Xst=Phaser.Utils.String.Pad,$st=function(e,t,i){if(e==null)return e;switch(typeof e){case"string":return e;case"number":return`#${Xst(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,i);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e;default:return e}},vt=$st;var QL=Phaser.Math.DegToRad,jst=function(e,t,i,s,n,o,r){var a=new oh(t,i,s,n,o),p=a.minWidth,h=a.minHeight,u=s>=p?1:s/p,f=n>=h?1:n/h,l=a.cornerRadius,d,v,c,m,g,y,x;e.save(),e.beginPath(),e.translate(t,i),d=l.tl,Uv(d)?(v=d.x*u,c=d.y*f,Vv(d)?(m=v,g=c,$s(e,m,g,v,c,180,270,!1,r)):(m=0,g=0,$s(e,m,g,v,c,90,0,!0,r)),y=0,x=c):(e.lineTo(0,0),y=0,x=0),d=l.tr,Uv(d)?(v=d.x*u,c=d.y*f,Vv(d)?(m=s-v,g=c,$s(e,m,g,v,c,270,360,!1,r)):(m=s,g=0,$s(e,m,g,v,c,180,90,!0,r))):e.lineTo(s,0),d=l.br,Uv(d)?(v=d.x*u,c=d.y*f,Vv(d)?(m=s-v,g=n-c,$s(e,m,g,v,c,0,90,!1,r)):(m=s,g=n,$s(e,m,g,v,c,270,180,!0,r))):e.lineTo(s,n),d=l.bl,Uv(d)?(v=d.x*u,c=d.y*f,Vv(d)?(m=v,g=n-c,$s(e,m,g,v,c,90,180,!1,r)):(m=0,g=n,$s(e,m,g,v,c,360,270,!0,r))):e.lineTo(0,n),e.lineTo(y,x),e.closePath(),e.restore()},Vv=function(e){return!e.hasOwnProperty("convex")||e.convex},Uv=function(e){return e.x>0&&e.y>0},$s=function(e,t,i,s,n,o,r,a,p){if(a&&r>o?r-=360:!a&&r<o&&(r+=360),o=QL(o),r=QL(r),p==null)e.ellipse(t,i,s,n,0,o,r,a);else{p+=1;for(var h,u,f,l=(r-o)/p,d=0;d<=p;d++)f=o+l*d,h=t+s*Math.cos(f),u=i+n*Math.sin(f),e.lineTo(h,u)}},zv=jst;var Zst=function(e,t,i,s,n,o,r,a,p,h,u,f,l){if(zv(t,i,s,n,o,r,l),a!=null){if(u!=null){var d;f?d=t.createLinearGradient(0,0,n,0):d=t.createLinearGradient(0,0,0,o),d.addColorStop(0,a),d.addColorStop(1,u),a=d}t.fillStyle=a,t.fill()}p!=null&&h>0&&(t.strokeStyle=p,t.lineWidth=h,t.stroke())},qL=Zst;var Kst=function(e,t,i,s,n,o,r,a){if(!(t==null&&i==null)){var p=e.canvas.width,h=e.canvas.height;i==null&&(s=0);var u=s/2;p=Math.max(1,p-s),h=Math.max(1,h-s),qL(e.canvas,e.context,u,u,p,h,n,t,i,s,o,r,a)}},lh=Kst;var Jst=function(){lh(this,this.fillStyle,this.strokeStyle,this.lineWidth,this.radius,this.fillColor2,this.isHorizontalGradient,this.iteration)},_L=Jst;var tF=Phaser.Utils.Objects.GetValue,UE=class extends Vi{constructor(t,i,s,n,o,r,a,p,h,u,f,l){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=n),r===void 0&&(r=0),l===void 0&&(l=1),super(t,i,s,n,o,l),this.type="rexRoundRectangleCanvas";var d=tF(r,"radius",r),v=tF(r,"iteration",void 0);this.setRadius(d),this.setIteration(v),this.setFillStyle(a,u,f),this.setStrokeStyle(p,h)}get radius(){return this._radius}set radius(t){this.dirty|=this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this}get iteration(){return this._iteration}set iteration(t){this.dirty|=this._iteration!=t,this._iteration=t}setIteration(t){return this.iteration=t,this}get fillStyle(){return this._fillStyle}set fillStyle(t){t=vt(t,this.canvas,this.context),this.dirty|=this._fillStyle!=t,this._fillStyle=t}get fillColor2(){return this._fillColor2}set fillColor2(t){t=vt(t,this.canvas,this.context),this.dirty|=this._fillColor2!=t,this._fillColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setFillStyle(t,i,s){return s===void 0&&(s=!0),this.fillStyle=t,this.fillColor2=i,this.isHorizontalGradient=s,this}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){t=vt(t,this.canvas,this.context),this.dirty|=this._strokeStyle!=t,this._strokeStyle=t}get lineWidth(){return this._lineWidth}set lineWidth(t){this.dirty|=this._lineWidth!=t,this._lineWidth=t}setStrokeStyle(t,i){return this.strokeStyle=t,this.lineWidth=i,this}updateTexture(){return super.updateTexture(function(){this.clear(),_L.call(this)},this),this}},eF=UE;var iF=eF;var zE=iF;K.register("roundRectangleCanvas",function(e,t,i,s,n,o,r,a,p,h){var u=new zE(this.scene,e,t,i,s,n,o,r,a,p,h);return this.scene.add.existing(u),u});Z(window,"RexPlugins.UI.RoundRectangleCanvas",zE);var Qst=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},ct=Qst;var js=function(e,t,i){!t||ct(e,`${t}X`)||(Object.defineProperty(e,`${t}X`,{get:function(){return i.x},set:function(s){i.x=s,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return i.y},set:function(s){i.y=s,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return i.t},set:function(s){i.t=s,e.dirty=!0}}))},rF={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,i,s){var n=this.geom.topSidePoints;if(Array.isArray(e))for(var n=e,o,r=0,a=n.length;r<a;r++)o=n[r],this.geom.insertTopSidePoint(o.t,o.x,o.y),js(this,o.key,n[n.length-1]);else this.geom.insertTopSidePoint(e,t,i),js(this,s,n[n.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,i,s){var n=this.geom.rightSidePoints;if(Array.isArray(e))for(var n=e,o,r=0,a=n.length;r<a;r++)o=n[r],this.geom.insertRightSidePoint(o.t,o.x,o.y),js(this,o.key,n[n.length-1]);else this.geom.insertRightSidePoint(e,t,i),js(this,s,n[n.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,i,s){var n=this.geom.bottomSidePoints;if(Array.isArray(e))for(var n=e,o,r=0,a=n.length;r<a;r++)o=n[r],this.geom.insertBottomSidePoint(o.t,o.x,o.y),js(this,o.key,n[n.length-1]);else this.geom.insertBottomSidePoint(e,t,i),js(this,s,n[n.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,i,s){var n=this.geom.leftSidePoints;if(Array.isArray(e))for(var n=e,o,r=0,a=n.length;r<a;r++)o=n[r],this.geom.insertLeftSidePoint(o.t,o.x,o.y),js(this,o.key,n[n.length-1]);else this.geom.insertLeftSidePoint(e,t,i),js(this,s,n[n.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};var WE=class{constructor(t,i,s,n){t===void 0&&(t=0),i===void 0&&(i=t),s===void 0&&(s=0),n===void 0&&(n=0),this.setTo(t,i,s,n),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,i,s,n){return this.setPosition(t,i),this.setSize(s,n),this}setPosition(t,i){return this.x=t,this.y=i,this}setSize(t,i){return this.width=t,this.height=i,this}setTLPosition(t,i){return this.tlx=t,this.tly=i,this}setTRPosition(t,i){return this.trx=t,this.try=i,this}setBLPosition(t,i){return this.blx=t,this.bly=i,this}setBRPosition(t,i){return this.brx=t,this.bry=i,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,i,s){return Wv(this.topSidePoints,t,i,s),this}insertRightSidePoint(t,i,s){return Wv(this.rightSidePoints,t,i,s),this}insertBottomSidePoint(t,i,s){return Wv(this.bottomSidePoints,t,i,s),this}insertLeftSidePoint(t,i,s){return Wv(this.leftSidePoints,t,i,s),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}},Wv=function(e,t,i,s){if(typeof t!="number"){var n=t;t=n.t,i=n.x,s=n.y}e.push({t,x:i,y:s})},nF=WE;var qst=Phaser.Utils.Objects.IsPlainObject,xr=Phaser.Utils.Objects.GetValue,Zs=Phaser.Math.Linear,_st=Phaser.Geom.Polygon.Earcut,Yv=class extends Fv{constructor(t,i,s,n,o,r,a){var p,h,u;if(qst(i)){var f=i;i=f.x,s=f.y,n=f.width,o=f.height,r=f.color,a=f.alpha,p=f.strokeColor,h=f.strokeAlpha,u=f.strokeWidth}i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=n);var l=new nF;super(t,"rexQuadShape",l),l.setTo(0,0,n,o),this.setPosition(i,s),this.setFillStyle(r,a),p!==void 0&&u===void 0&&(u=2),this.setStrokeStyle(u,p,h),this.setTLPosition(xr(f,"tlx",0),xr(f,"tly",0)).setTRPosition(xr(f,"trx",0),xr(f,"try",0)).setBLPosition(xr(f,"blx",0),xr(f,"bly",0)).setBRPosition(xr(f,"brx",0),xr(f,"bry",0));var d=xr(f,"leftSidePoints");d&&this.insertLeftSidePoint(d);var v=xr(f,"topSidePoints");v&&this.insertTopSidePoint(v);var c=xr(f,"rightSidePoints");c&&this.insertRightSidePoint(c);var m=xr(f,"bottomSidePoints");m&&this.insertBottomSidePoint(m),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var t=this.geom,i=this.pathData;i.length=0;var s=t.width,n=t.height,o=0+t.tlx,r=0+t.tly,a=s+t.trx,p=0+t.try,h=s+t.brx,u=n+t.bry,f=0+t.blx,l=n+t.bly,d=t.topSidePoints,v=t.rightSidePoints,c=t.bottomSidePoints,m=t.leftSidePoints;Ee(o,r,i),Hv(d);for(var g=0,y=d.length;g<y;g++){var x=d[g],C=Zs(o,a,x.t)+x.x,S=Zs(r,p,x.t)+x.y;Ee(C,S,i)}Ee(a,p,i),Hv(v);for(var g=0,y=v.length;g<y;g++){var x=v[g],C=Zs(a,h,x.t)+x.x,S=Zs(p,u,x.t)+x.y;Ee(C,S,i)}Ee(h,u,i),Hv(c);for(var g=c.length-1;g>=0;g--){var x=c[g],C=Zs(f,h,x.t)+x.x,S=Zs(l,u,x.t)+x.y;Ee(C,S,i)}Ee(f,l,i),Hv(m);for(var g=m.length-1;g>=0;g--){var x=m[g],C=Zs(o,f,x.t)+x.x,S=Zs(r,l,x.t)+x.y;Ee(C,S,i)}return i.push(i[0],i[1]),this.pathIndexes=_st(i),this}get tlx(){return this.geom.tlx}set tlx(t){this.geom.tlx=t,this.dirty=!0}get tly(){return this.geom.tly}set tly(t){this.geom.tly=t,this.dirty=!0}get trx(){return this.geom.trx}set trx(t){this.geom.trx=t,this.dirty=!0}get try(){return this.geom.try}set try(t){this.geom.try=t,this.dirty=!0}get blx(){return this.geom.blx}set blx(t){this.geom.blx=t,this.dirty=!0}get bly(){return this.geom.bly}set bly(t){this.geom.bly=t,this.dirty=!0}get brx(){return this.geom.brx}set brx(t){this.geom.brx=t,this.dirty=!0}get bry(){return this.geom.bry}set bry(t){this.geom.bry=t,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}},Hv=function(e){e.length<=1||e.sort(function(t,i){return t.t-i.t})};Object.assign(Yv.prototype,rF);var sF=Yv;var aF=sF;var HE=aF;K.register("QuadShape",function(e,t,i,s,n,o){var r=new HE(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.QuadShape",HE);var tat=Phaser.Renderer.WebGL.Utils,eat=function(e,t,i,s){if(!(t.width===0||t.height===0)){i.addToRenderList(t);var n=t.frame,o=n.width,r=n.height,a=tat.getTintAppendFloatAlpha,p=e.pipelines.set(t.pipeline,t),h=p.setTexture2D(n.glTexture,t);e.pipelines.preBatch(t),p.batchTexture(t,n.glTexture,o,r,t.x,t.y,o/t.style.resolution,r/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,o,r,a(t.tintTopLeft,i.alpha*t._alphaTL),a(t.tintTopRight,i.alpha*t._alphaTR),a(t.tintBottomLeft,i.alpha*t._alphaBL),a(t.tintBottomRight,i.alpha*t._alphaBR),t.tintFill,0,0,i,s,!1,h),e.pipelines.postBatch(t)}},oF=eat;var iat=function(e,t,i,s){t.width===0||t.height===0||(i.addToRenderList(t),e.batchSprite(t,t.frame,i,s))},lF=iat;var hF={renderWebGL:oF,renderCanvas:lF};var YE=Phaser.Display.Canvas.CanvasPool,rat=function(e,t,i){i===void 0&&(i={});var s=YE.create(this),n=s.getContext("2d",{willReadFrequently:!0});e.syncFont(s,n);var o=n.measureText(t),r=Math.ceil(o.width*e.baselineX),a=r,p=2*a;if(a=a*e.baselineY|0,s.width=r,s.height=p,n.fillStyle="#f00",n.fillRect(0,0,r,p),n.font=e._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(e.testString,0,a),i.left=0,r===0||p===0||!n.getImageData(0,0,r,p))return YE.remove(s),i;for(var h=n.getImageData(0,0,r,p).data,u=!1,f=0;f<r;f++){for(var l=0;l<p;l++){var d=(l*r+f)*4;if(h[d]!==255){i.left=f,u=!0;break}}if(u)break}return YE.remove(s),i},uF=rat;Ws();var nat=Phaser.GameObjects.GameObject,Xv=class extends nat{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,i){return this.style.setFixedSize(t,i)}setBackgroundColor(t,i,s){return this.style.setBackgroundColor(t,i,s)}setBackgroundStrokeColor(t,i){return this.style.setBackgroundStrokeColor(t,i)}setBackgroundCornerRadius(t,i){return this.style.setBackgroundCornerRadius(t,i)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,i){return this.style.setStroke(t,i)}setShadow(t,i,s,n,o,r){return this.style.setShadow(t,i,s,n,o,r)}setShadowOffset(t,i){return this.style.setShadowOffset(t,i)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setUnderline(t,i,s){return this.style.setUnderline(t,i,s)}setUnderlineColor(t){return this.style.setUnderlineColor(t)}setUnderlineThickness(t){return this.style.setUnderlineThickness(t)}setUnderlineOffset(t){return this.style.setUnderlineOffset(t)}setStrikethrough(t,i,s){return this.style.setStrikethrough(t,i,s)}setStrikethroughColor(t){return this.style.setStrikethroughColor(t)}setStrikethroughThickness(t){return this.style.setStrikethroughThickness(t)}setStrikethroughOffset(t){return this.style.setStrikethroughOffset(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(t){this.style.lineSpacing=t}setLineSpacing(t){return this.style.lineSpacing=t,this.updateText(!0),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,i){return this.style.setTextMetrics(t,i)}measureTextMargins(t,i){return uF(this.style,t,i)}},bi=Phaser.GameObjects.Components;Phaser.Class.mixin(Xv,[bi.Alpha,bi.BlendMode,bi.ComputedSize,bi.Crop,bi.Depth,bi.Flip,bi.GetBounds,bi.Mask,bi.Origin,bi.Pipeline,bi.PostPipeline,bi.ScrollFactor,bi.Tint,bi.Transform,bi.Visible,hF]);var dF=Xv;var sat={backgroundColor:["backgroundColor",null,vt],backgroundColor2:["backgroundColor2",null,vt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,vt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",vt],stroke:["stroke","#fff",vt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",vt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",vt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",vt],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|M\xC3\u2030qgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]},fF=sat;var $v=Phaser.Display.Canvas.CanvasPool,aat=function(e){var t=$v.create(this),i=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,i);var s=i.measureText(e.testString);if("actualBoundingBoxAscent"in s){var n=s.actualBoundingBoxAscent,o=s.actualBoundingBoxDescent,h={ascent:n,descent:o,fontSize:n+o};return $v.remove(t),h}var r=Math.ceil(s.width*e.baselineX),a=r,p=2*a;a=a*e.baselineY|0,t.width=r,t.height=p,i.fillStyle="#f00",i.fillRect(0,0,r,p),i.font=e._font,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(e.testString,0,a);var h={ascent:0,descent:0,fontSize:0};if(!i.getImageData(0,0,r,p))return h.ascent=a,h.descent=a+6,h.fontSize=h.ascent+h.descent,$v.remove(t),h;var u=i.getImageData(0,0,r,p).data,f=u.length,l=r*4,d,v,c=0,m=!1;for(d=0;d<a;d++){for(v=0;v<l;v+=4)if(u[c+v]!==255){m=!0;break}if(!m)c+=l;else break}for(h.ascent=a-d,c=f-l,m=!1,d=p;d>a;d--){for(v=0;v<l;v+=4)if(u[c+v]!==255){m=!0;break}if(!m)c-=l;else break}return h.descent=d-a,h.fontSize=h.ascent+h.descent,$v.remove(t),h},XE=aat;var oat={NO_NEWLINE:0,RAW_NEWLINE:1,WRAPPED_NEWLINE:2,NO_WRAP:0,WORD_WRAP:1,CHAR_WRAP:2,MIX_WRAP:3,SPLITREGEXP:/(?:\r\n|\r|\n)/},te=oat;var lat={none:te.NO_WRAP,word:te.WORD_WRAP,char:te.CHAR_WRAP,character:te.CHAR_WRAP,mix:te.MIX_WRAP},hh=lat;var hat=Phaser.Utils.Objects.GetAdvancedValue,qi=Phaser.Utils.Objects.GetValue,$E=class{constructor(t,i,s){this.parent=t,s===void 0&&(s=fF),this.propertyMap=s,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(i,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==te.NO_WRAP&&this.wrapWidth===0}setStyle(t,i,s){if(i===void 0&&(i=!0),s===void 0&&(s=!1),t&&t.hasOwnProperty("wordWrap")){var n=t.wordWrap;n.hasOwnProperty("width")&&(t.wrap={mode:"word",width:n.width})}if(t&&t.hasOwnProperty("wrap")){var o=t.wrap;if(o.hasOwnProperty("mode")){var r=o.mode;typeof r=="string"&&(o.mode=hh[r])}else o.hasOwnProperty("width")&&(o.mode=1)}t&&t.rtl&&s&&!t.hasOwnProperty("halign")&&(t.halign="right"),t&&t.hasOwnProperty("fontSize")&&typeof t.fontSize=="number"&&(t.fontSize=t.fontSize.toString()+"px");var a=this.propertyMap;for(var p in a){var h=a[p],u=h[0],f=s?h[1]:this[p],l=h[2];if(p==="wrapCallback"||p==="wrapCallbackScope")this[p]=qi(t,u,f);else{var d=hat(t,u,f);l&&(d=l(d)),this[p]=d}}var v=qi(t,"font",null);v===null?this._font=this.fontStyle+" "+this.fontSize+" "+this.fontFamily:this._font=v;var c=qi(t,"fill",null);c!==null&&(this.color=vt(c));var m=qi(t,"metrics",!1);return m?this.metrics={ascent:qi(m,"ascent",0),descent:qi(m,"descent",0),fontSize:qi(m,"fontSize",0)}:(i||!this.metrics)&&(this.metrics=XE(this)),i?this.parent.updateText():this.parent}syncFont(t,i){i.font=this._font}syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"}syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)}update(t){return t&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=XE(this)),this.parent.updateText(t)}buildFont(){var t=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return t!==this._font&&(this._font=t),this}setFont(t){return typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=qi(t,"fontFamily","Courier"),this.fontSize=qi(t,"fontSize","16px"),this.fontStyle=qi(t,"fontStyle","")),this.update(!0)}setFontFamily(t){return this.fontFamily=t,this.update(!0)}setFontStyle(t){return this.fontStyle=t,this.update(!0)}setFontSize(t){return typeof t=="number"&&(t=t.toString()+"px"),this.fontSize=t,this.update(!0)}setTestString(t){return this.testString=t,this.update(!0)}setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(this.isWrapFitMode)}setResolution(t){return this.resolution=t,this.update(!1)}setXOffset(t){return this.xOffset=t,this.update(!1)}setBackgroundColor(t,i,s){return s===void 0&&(s=!0),this.backgroundColor=vt(t,this.parent.canvas,this.parent.context),this.backgroundColor2=vt(i,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=s,this.update(!1)}setBackgroundStrokeColor(t,i){return this.backgroundStrokeColor=vt(t,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=i,this.update(!1)}setBackgroundCornerRadius(t,i){return this.backgroundCornerRadius=t,this.backgroundCornerIteration=i,this.update(!1)}setFill(t){return this.color=vt(t,this.parent.canvas,this.parent.context),this.update(!1)}setColor(t){return this.color=vt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(t,i){return t===void 0?this.strokeThickness=0:(i===void 0&&(i=this.strokeThickness),this.stroke=vt(t,this.parent.canvas,this.parent.context),this.strokeThickness=i),this.update(!0)}setShadow(t,i,s,n,o,r){return t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s="#000"),n===void 0&&(n=0),o===void 0&&(o=!1),r===void 0&&(r=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=vt(s,this.parent.canvas,this.parent.context),this.shadowBlur=n,this.shadowStroke=o,this.shadowFill=r,this.update(!1)}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)}setShadowColor(t){return t===void 0&&(t="#000"),this.shadowColor=vt(t,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(t){return t===void 0&&(t=0),this.shadowBlur=t,this.update(!1)}setShadowStroke(t){return this.shadowStroke=t,this.update(!1)}setShadowFill(t){return this.shadowFill=t,this.update(!1)}setUnderline(t,i,s){return t===void 0&&(t="#000"),i===void 0&&(i=0),s===void 0&&(s=0),this.underlineColor=vt(t,this.parent.canvas,this.parent.context),this.underlineThickness=i,this.underlineOffset=s,this.update(!1)}setUnderlineColor(t){return t===void 0&&(t="#000"),this.underlineColor=vt(t,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(t){return t===void 0&&(t=0),this.underlineThickness=t,this.update(!1)}setUnderlineOffset(t){return t===void 0&&(t=0),this.underlineOffset=t,this.update(!1)}setStrikethrough(t,i,s){return t===void 0&&(t="#000"),i===void 0&&(i=0),s===void 0&&(s=0),this.strikethroughColor=vt(t,this.parent.canvas,this.parent.context),this.strikethroughThickness=i,this.strikethroughOffset=s,this.update(!1)}setStrikethroughColor(t){return t===void 0&&(t="#000"),this.strikethroughColor=vt(t,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(t){return t===void 0&&(t=0),this.strikethroughThickness=t,this.update(!1)}setStrikethroughOffset(t){return t===void 0&&(t=0),this.strikethroughOffset=t,this.update(!1)}setWrapMode(t){return typeof t=="string"&&(t=hh[t.toLowerCase()]||0),this.wrapMode=t,this.update(!0)}setWrapWidth(t){return this.wrapWidth=t,this.update(!1)}setAlign(t,i){return t===void 0&&(t="left"),i===void 0&&(i="top"),this.halign=t,this.valign=i,this.update(!1)}setHAlign(t){return t===void 0&&(t="left"),this.halign=t,this.update(!1)}setVAlign(t){return t===void 0&&(t="top"),this.valign=t,this.update(!1)}setMaxLines(t){return t===void 0&&(t=0),this.maxLines=t,this.update(!1)}getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}}setTextMetrics(t,i){return this.metrics.ascent=t.ascent,this.metrics.descent=t.descent,this.metrics.fontSize=t.fontSize,i&&(typeof i=="string"?(this.fontFamily=i,this.fontSize="",this.fontStyle=""):(this.fontFamily=qi(i,"fontFamily",this.fontFamily),this.fontSize=qi(i,"fontSize",this.fontSize),this.fontStyle=qi(i,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var t={},i=this.propertyMap;for(var s in i)t[s]=this[s];return t.metrics=this.getTextMetrics(),t}destroy(){this.parent=void 0}},uh=$E;var uat=function(e){return e==null?e="":Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e},pn=uat;var cF={draw(e,t,i,s){var n=this.penManager;this.hitAreaManager.clear();var o=this.context;o.save();var r=this.defaultStyle;this.clear(),lh(this,r.backgroundColor,r.backgroundStrokeColor,r.backgroundStrokeLineWidth,r.backgroundCornerRadius,r.backgroundColor2,r.backgroundHorizontalGradient,r.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var a=r.halign,p=r.valign,h,u=r.lineHeight,f=n.lines,l=f.length,d=r.maxLines,v,c,m;d>0&&l>d?(v=d,p==="center"?c=Math.floor((l-v)/2):p==="bottom"?c=l-v:c=0):(v=l,c=0),m=c+v;var g,y,x=this.rtl,C=x?this.parent.width:void 0;p==="center"?y=Math.max((s-v*u)/2,0):p==="bottom"?y=Math.max(s-v*u-2,0):y=0,y+=t;for(var S=c;S<m;S++)if(h=n.getLineWidth(S),h!==0){for(var E=f[S],T=E.length,P=a,M=0;M<T;M++){var w=E[M].prop.align;if(w!==void 0){P=w;break}}P==="center"?g=(i-h)/2:P==="right"?g=x?0:i-h:g=x?i-h:0,g+=e;for(var M=0;M<T;M++)this.drawPen(E[M],g,y,C)}o.restore()},drawPen(e,t,i,s){t+=e.x,i+=e.y+(e.prop.y||0),s!==void 0&&(t=s-t);var n=this.canvas,o=this.context;o.save();var r=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(r.bgcolor!==null&&e.width>0){var a=this.defaultStyle.metrics,p=i-a.ascent,h=a.fontSize;this.drawRectangle(t,p,e.width,h,r.bgcolor,r)}if(r.underlineThickness>0&&e.width>0){var u=i+r.underlineOffset-r.underlineThickness/2;this.drawLine(t,u,e.width,r.underlineThickness,r.underlineColor,r)}if(e.isTextPen&&(r.buildFont(),r.syncFont(n,o),r.syncStyle(n,o),this.drawText(t,i,e.text,r)),e.isImagePen&&this.drawImage(t,i,e.prop.img,e.prop.color,r),r.strikethroughThickness>0&&e.width>0){var u=i+r.strikethroughOffset-r.strikethroughThickness/2;this.drawLine(t,u,e.width,r.strikethroughThickness,r.strikethroughColor,r)}if(o.restore(),e.hasAreaMarker&&e.width>0){var f,l=e.prop.area;if(l)f={key:l};else{var d=e.prop.url;f={key:`url:${d}`,url:d}}this.hitAreaManager.add(t,i-this.startYOffset,e.width,this.defaultStyle.lineHeight,f)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,i,s,n,o){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;r.fillStyle=n,r.fillRect(e,t,i,s)},drawLine(e,t,i,s,n,o){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;o.syncShadow(r,o.shadowStroke);var a=r.lineCap;r.lineCap="butt",r.strokeStyle=n,r.lineWidth=s,r.beginPath(),r.moveTo(e,t),r.lineTo(e+i,t),r.stroke(),r.lineCap=a},drawText(e,t,i,s){this.autoRound&&(e=Math.round(e),t=Math.round(t));var n=this.context;s.stroke&&s.stroke!=="none"&&s.strokeThickness>0&&(s.syncShadow(n,s.shadowStroke),n.strokeText(i,e,t)),s.color&&s.color!=="none"&&(s.syncShadow(n,s.shadowFill),n.fillText(i,e,t))},drawImage(e,t,i,s,n){t-=this.startYOffset,this.parent.imageManager.draw(i,this.context,e,t,s,this.autoRound)}};var uo=Phaser.Utils.Objects.GetValue,dat=te.NO_NEWLINE,pF=te.RAW_NEWLINE,jE=class{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=uo(t,"text",""),this.x=uo(t,"x",0),this.y=uo(t,"y",0),this.width=uo(t,"width",0);var i=uo(t,"prop",null);i===null&&(i={}),this.prop=i,this.newLineMode=uo(t,"newLineMode",0),this.startIndex=uo(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===pF&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==dat&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===pF&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}},vF=jE;var fat=function(e,t){var i=Array.isArray(e);if(t===void 0?t=i?[]:{}:Ji(t),i){t.length=e.length;for(var s=0,n=e.length;s<n;s++)t[s]=e[s]}else for(var o in e)t[o]=e[o];return t},ze=fat;var mF=Phaser.Utils.Objects.GetFastValue,gF=te.NO_NEWLINE,cat=te.WRAPPED_NEWLINE,ZE=class e{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=mF(t,"tagToText",re),this.tagToTextScope=mF(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,i=this.lines.length;t<i;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,i,s,n,o,r){var a=this.pensPool.pop();return a==null&&(a=new vF),fo.text=t,fo.x=i,fo.y=s,fo.width=n,fo.prop=o,fo.newLineMode=r,a.resetFromJSON(fo),this.addPen(a),this}addImagePen(t,i,s,n){return this.addTextPen("",t,i,s,n,gF),this}addNewLinePen(){var t=this.lastPen,i=t?t.lastX:0,s=t?t.y:0,n=t?ze(t.prop):null;return this.addTextPen("",i,s,0,n,cat),this}addPen(t){var i=this.lastPen;i==null?t.startIndex=0:t.startIndex=i.endIndex,this.pens.push(t);var s=this.lastLine;s==null&&(s=this.linesPool.pop()||[],this.lines.push(s)),s.push(t),t.newLineMode!==gF&&(s=this.linesPool.pop()||[],this.lines.push(s)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new e),t.clear();for(var i=0,s=this.lines.length;i<s;i++)for(var n=this.lines[i],o=0,r=n.length;o<r;o++){var a=n[o];t.addPen(a.text,a.x,a.y,a.width,ze(a.prop),a.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var i=this.lines[t];return i&&i[0]?i[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var i,s=!1,n;for(i=t;i>=0&&(n=this.lines[i],s=n!=null&&n.length>0,!s);i--);if(!s)return 0;var o=n[n.length-1];return o.endIndex}getLineWidth(t){var i=this.lines[t];if(!i)return 0;var s=i[i.length-1];if(s==null)return 0;var n=s.lastX;return n}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,i=0,s=0,n=this.lines.length;s<n;s++)t=this.getLineWidth(s),t>i&&(i=t);return this.maxLinesWidth=i,i}getLineWidths(){for(var t=[],i=0,s=this.lines.length;i<s;i++)t.push(this.getLineWidth(i));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",i=this.pens,s=0,n=i.length;s<n;s++)t+=i[s].plainText;return t}get rawTextLength(){for(var t=0,i=this.pens,s=0,n=this.pens.length;s<n;s++)t+=i[s].rawTextLength;return t}getSliceTagText(t,i,s){var n=this.lastPen;if(n==null)return"";var o=n.endIndex;(t===void 0||t===0)&&(t=-1),(i===void 0||i===o)&&(i=o+1),s===void 0&&(s=!1);for(var r="",a,p,h,u,f,l,d,v,c=0,m=this.pens.length;c<m&&(p=this.pens[c],f=p.endIndex,!(!(f<=t)&&(p=this.pens[c],h=s?p.wrapText:p.plainText,d=p.prop,u=p.startIndex,l=u>=t&&f<=i,l||(h=h.substring(t-u,i-u)),this.tagToTextScope?r+=this.tagToText.call(this.tagToTextScope,h,d,v):r+=this.tagToText(h,d,v),v=d,f>=i)));c++);return r}get length(){return this.lines.length}set length(t){this.clear()}},fo={},xF=ZE;var pat=Phaser.Geom.Rectangle,yF=new hi,KE=class{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,i=this.hitAreas.length;t<i;t++)this.hitAreas[t].data=null;return yF.pushMultiple(this.hitAreas),this}add(t,i,s,n,o){o===void 0&&(o={});var r=yF.pop();return r===null?r=new pat(t,i,s,n):r.setTo(t,i,s,n),r.data=o,this.hitAreas.push(r),this}getFirst(t,i){for(var s=0,n=this.hitAreas.length;s<n;s++){var o=this.hitAreas[s];if(o.contains(t,i))return o}return null}getByKey(t){for(var i=0,s=this.hitAreas.length;i<s;i++){var n=this.hitAreas[i];if(n.data.key===t)return n}return null}drawBounds(t,i,s){i===void 0&&(i=16777215),s&&t.save().translateCanvas(s.x,s.y).rotateCanvas(s.rotation).scaleCanvas(s.scaleX,s.scaleY);for(var n=0,o=this.hitAreas.length;n<o;n++){var r=this.hitAreas[n];t.lineStyle(1,i).strokeRect(r.x,r.y,r.width,r.height)}return s&&t.restore(),this}},CF=KE;var vat=function(){this.parent.on("pointerdown",mat,this).on("pointerup",gat,this).on("pointermove",JE,this).on("pointerover",JE,this).on("pointerout",function(e,t){JE.call(this,e,null,null,t)},this)},mat=function(e,t,i,s){var n=this.hitAreaManager.getFirst(t,i);if(n!==null){var o=n.data.key;dh.call(this,"areadown",o,e,t,i,s),n.data&&(n.data.isDown=!0)}},gat=function(e,t,i,s){var n=this.hitAreaManager.getFirst(t,i);if(n!==null){var o=n.data.key;if(dh.call(this,"areaup",o,e,t,i,s),!!n.data){if(n.data.isDown){if(dh.call(this,"areaclick",o,e,t,i,s),!n.data)return;var r=n.data.url;r&&window.open(r,"_blank")}n.data.isDown=!1}}},JE=function(e,t,i,s){if(t===null){if(this.lastHitAreaKey!==null){dh.call(this,"areaout",this.lastHitAreaKey,e,t,i,s);var n=this.hitAreaManager.getByKey(this.lastHitAreaKey);n&&n.data&&(n.data.isDown=!1),this.lastHitAreaKey=null}return}var n=this.hitAreaManager.getFirst(t,i),o=n?n.data.key:null;if(this.lastHitAreaKey!==o){if(this.lastHitAreaKey!==null){dh.call(this,"areaout",this.lastHitAreaKey,e,t,i,s);var r=this.hitAreaManager.getByKey(this.lastHitAreaKey);r&&(this.urlTagCursorStyle&&SF(this.scene,r,""),r.data.isDown=!1)}o!==null&&(dh.call(this,"areaover",o,e,t,i,s),n.data&&this.urlTagCursorStyle&&SF(this.scene,n,this.urlTagCursorStyle)),this.lastHitAreaKey=o}},dh=function(e,t,i,s,n,o){this.parent.emit(`${e}-${t}`,i,s,n,o),this.parent.emit(e,t,i,s,n,o)},SF=function(e,t,i){!t||!t.data||!t.data.url||(e.input.manager.canvas.style.cursor=i)},TF=vat;var EF=Phaser.GameObjects.Components.TransformMatrix,xat=Phaser.Math.TransformXY,yat=function(e,t,i,s,n){s===void 0&&(s=e.scene.cameras.main),n===void 0?n={}:n===!0&&(n=Cat);var o=s.scrollX,r=s.scrollY,a=t+o*e.scrollFactorX-o,p=i+r*e.scrollFactorY-r;return e.parentContainer?(jv===void 0&&(jv=new EF,PF=new EF),e.getWorldTransformMatrix(jv,PF),jv.applyInverse(a,p,n)):xat(a,p,e.x,e.y,e.rotation,e.scaleX,e.scaleY,n),n.x+=e.displayOriginX,n.y+=e.displayOriginY,n},jv,PF,Cat={},Zv=yat;var Sat=function(e,t,i){var s=Zv(this.parent,e,t,i,!0),n=this.hitAreaManager.getFirst(s.x,s.y);if(n!==null)return n.data.key},MF=Sat;var Tat=/^[\x00-\x7F]+$/,Eat=function(e){return Tat.test(e)},Ks=Eat;var Pat=te.NO_NEWLINE,Mat=te.RAW_NEWLINE,QE=te.WRAPPED_NEWLINE,wF=te.NO_WRAP,wat=te.WORD_WRAP,bF=te.CHAR_WRAP,HVt=te.MIX_WRAP,bat=te.SPLITREGEXP,RF=function(e,t,i,s,n,o){s<=0&&(i=wF);var r=[];if(!e||!e.length)return r;for(var a=i===wF,p=e.split(bat),h,u,f,l=0,d=p.length;l<d;l++){if(h=p[l],f=l===d-1?Pat:Mat,a){var v=t.measureText(h).width;r.push(o.getLine(h,v,f));continue}if(u=l===0?s-n:s,h.length<=100){var v=t.measureText(h).width;if(v<=u){r.push(o.getLine(h,v,f));continue}}for(var c=Rat(h,i),m,g,y,x="",C=0,S,E=0,T=c.length;E<T;E++){if(m=c[E],g=t.measureText(m).width,g>s&&Iat(m)){x!==""?r.push(o.getLine(x,C,QE)):E===0&&n>0&&r.push(o.getLine("",0,QE)),r.push(...RF(m,t,bF,s,0,o));var P=r.pop();x=P.text,C=P.width,o.freeLine(P),x===" "&&(x="",C=0);continue}S=C+g,S>u?(r.push(o.getLine(x,C,QE)),x=m,C=g,u=s):(x+=m,C=S),E===T-1&&r.push(o.getLine(x,C,f))}}return r},Rat=function(e,t){var i;switch(t){case wat:i=[],e=e.split(" ");for(var s=0,n=e.length;s<n;s++){var o=e[s];s<n-1?i.push(o+" "):o!==""&&i.push(o)}break;case bF:i=e.split("");break;default:i=[],e=e.split(" ");for(var s=0,n=e.length;s<n;s++){var o=e[s];s<n-1?Ks(o)?i.push(o+" "):(i.push(...o.split("")),i.push(" ")):o!==""&&(Ks(o)?i.push(o):i.push(...o.split("")))}break}return i},Iat=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}},IF=RF;var qE=Phaser.Utils.Objects.GetValue,Aat=te.NO_WRAP,AF=te.NO_NEWLINE,_Vt=te.RAW_NEWLINE,Oat=te.WRAPPED_NEWLINE,Kv=class{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=qE(t,"context",null),this.canvas=this.context.canvas,this.parser=qE(t,"parser",null),this.defaultStyle=qE(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new CF,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,i,s,n,o){if(o===void 0&&(o=this.penManager),o.clear(),t==="")return o;var r=this.parent.style;if(r.isWrapFitMode){var a=this.parent.padding;s=r.fixedWidth-a.left-a.right}for(var p=this.canvas,h=this.context,u=0,f=0,l=r.wrapCallback,d=r.wrapCallbackScope,v=!0,c,m,g,y=this.parser.splitText(t),x,C,S=this.wrapTextLinesPool,E=0,T=y.length;E<T;E++)if(x=this.parser.tagTextToProp(y[E],m),c=x.plainText,m=x.prop,m.img){var P=this.imageManager.getOuterWidth(m.img);s>0&&i!==Aat&&s<u+P&&(o.addNewLinePen(),f+=n,u=0),o.addImagePen(u,f,P,ze(m)),u+=P}else if(c!==""){if(h.save(),g=this.parser.propToContextStyle(this.defaultStyle,m),g.buildFont(),g.syncFont(p,h),g.syncStyle(p,h),!l)C=IF(c,h,i,s,u,S);else{C=l.call(d,c,h,s,u),typeof C=="string"&&(C=C.split(`
`));for(var b,M=0,w=C.length;M<w;M++)b=C[M],typeof b=="string"?C[M]=S.getLine(b,h.measureText(b).width,M<w-1?Oat:AF):v=!1}for(var b,M=0,w=C.length;M<w;M++)b=C[M],o.addTextPen(b.text,u,f,b.width,ze(m),b.newLineMode),b.newLineMode!==AF?(u=0,f+=n):u+=b.width;v&&S.freeLines(C),C=null,h.restore()}for(var E=0,T=this.lines.length;E<T;E++){var I=this.lines[E],R=I[I.length-1];R&&(R.width+=this.parser.getStrokeThinkness(this.defaultStyle,R.prop))}return o}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var t=this.penManager.linesCount,i=this.defaultStyle.maxLines;return i>0&&t>i&&(t=i),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.displayLinesCount,i=this.defaultStyle.lineHeight*t;return t>0&&(i-=this.defaultStyle.lineSpacing),i}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new xF({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,i,s){var n;if(t==null)n=this.penManager.plainText;else{var o,r=this.parser.splitText(t,1);n="";for(var a=0,p=r.length;a<p;a++)n+=r[a]}return(i!=null||s!=null)&&(i==null&&(i=0),s==null&&(s=n.length),n=n.substring(i,s)),n}getPenManager(t,i){if(t===void 0)return this.copyPenManager(i,this.penManager);i===void 0&&(i=this.newPenManager());var s=this.defaultStyle;return this.updatePenManager(t,s.wrapMode,s.wrapWidth,s.lineHeight,i),i}getText(t,i,s,n){if(t==null)return this.penManager.getSliceTagText(i,s,n);var o=this.tmpPenManager,r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,o),o.getSliceTagText(i,s,n)}copyPenManager(t,i){return i===void 0&&(i=this.penManager),i.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}},Dat={setInteractive:TF,getHitArea:MF};Object.assign(Kv.prototype,cF,Dat);var OF=Kv;var _E=class extends hi{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,i,s){var n=this.pop();return n===null&&(n={}),n.text=t,n.width=i,n.newLineMode=s,n}},tP=_E;var Lat=Phaser.Utils.Objects.IsPlainObject,fh=Phaser.Utils.Objects.GetValue,Fat=function(e,t){Lat(e)?(t=e,e=t.key):t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var i=t.key,s=t.frame,n=t.width,o=t.height;if(n===void 0||o===void 0){var r=this.textureManager.getFrame(i,s),a=r?r.cutWidth:0,p=r?r.cutHeight:0;n===void 0&&o===void 0?(n=a,o=p):n===void 0?n=a*(o/p):o===void 0&&(o=p*(n/a))}this.images[e]={key:i,frame:s,width:n,height:o,y:fh(t,"y",0),left:fh(t,"left",0),right:fh(t,"right",0),originX:fh(t,"originX",0),originY:fh(t,"originY",0),tintFill:fh(t,"tintFill",!1)}},Jv=Fat;var DF=Phaser.Display.Canvas.CanvasPool,Bat=function(e,t,i,s,n,o,r,a){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=e.cutWidth),o===void 0&&(o=e.cutHeight),a===void 0&&(a=!1),a&&(i=Math.round(i),s=Math.round(s));var p=t.getContext("2d",{willReadFrequently:!0});if(r){var h=DF.create(null,n,o,Phaser.CANVAS,!0),u=h.getContext("2d",{willReadFrequently:!0});u.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,n,o),u.globalCompositeOperation="source-in",u.fillStyle=r,u.fillRect(0,0,n,o),p.drawImage(h,0,0,n,o,i,s,n,o),DF.remove(h)}else p.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,i,s,n,o)},Qv=Bat;var Nat=function(e,t,i,s,n,o){var r=this.get(e);if(r){var a=this.textureManager.getFrame(r.key,r.frame),p=r.width,h=r.height;i+=r.left-r.originX*p,s+=r.y-r.originY*h,r.tintFill||(n=void 0),Qv(a,t.canvas,i,s,p,h,n,o)}},LF=Nat;var qv=class{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,i){if(typeof t=="string")Jv.call(this,t,i);else if(Array.isArray(t))for(var s=t,n=0,o=s.length;n<o;n++)Jv.call(this,s[n]);else{var s=t;for(var t in s)Jv.call(this,t,s[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var i=this.get(t);return i?i.width+i.left+i.right:0}getFrame(t){var i=this.get(t);return i?this.textureManager.getFrame(i.key,i.frame):void 0}hasTexture(t){return!!this.getFrame(t)}},Gat={draw:LF};Object.assign(qv.prototype,Gat);var _v=qv;var kat=function(e,t){!e&&e!==0&&(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`));var i;return t?i=`${this.text}
${e}`:i=`${this.text}${e}`,i!=this.text&&this.setText(i),this},tm=kat;var Vat=Phaser.Utils.Objects.IsPlainObject,FF=Phaser.DOM.AddToDOM,BF=Phaser.Display.Canvas.CanvasPool,Uat=Phaser.GameObjects.GameObject,Ui=Phaser.Utils.Objects.GetValue,zat=Phaser.DOM.RemoveFromDOM,Wat=te.SPLITREGEXP,Hat=Phaser.Utils.String.UUID,ch=null,eP=null,iP=null,em=class extends dF{constructor(t,i,s,n,o,r,a){if(Vat(i)){var p=i;i=Ui(p,"x",0),s=Ui(p,"y",0),n=Ui(p,"text",""),o=Ui(p,"style")}if(i===void 0&&(i=0),s===void 0&&(s=0),super(t,r),this.renderer=t.sys.game.renderer,this.setPosition(i,s),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=BF.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,o){if(o.hasOwnProperty("align")){var h=o.align;delete o.align,o.halign=h}o.hasOwnProperty("stroke")&&!o.hasOwnProperty("strokeThickness")&&(o.strokeThickness=1)}this.style=new uh(this,o);var u=Ui(o,"images",void 0);u&&this.addImage(u),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=Hat(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);var f=Ui(o,"sharedPool",!0),l,d,v;f?(ch||(ch={},eP=new hi,iP=new tP,this.scene.game.events.once("destroy",function(){ch=null,eP=null,iP=null})),ch.hasOwnProperty(r)||(ch[r]=new hi),l=ch[r],d=eP,v=iP):(l=new hi,d=new hi,v=new tP),this.canvasText=new OF({parent:this,context:this.context,parser:a,style:this.style,pensPool:l,linesPool:d,wrapTextLinesPool:v}),this.parser=a,this.initRTL(),o&&o.padding&&this.setPadding(o.padding),this.setText(n),this.setUrlTagCursorStyle(Ui(o,"urlTagCursorStyle","pointer")),Ui(o,"interactive",!1)&&this.setInteractive()}preDestroy(){zat(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),BF.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",FF(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var i=this.style;if(i.rtl===t)return this;if(i.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",FF(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),i.halign==="left"?i.halign="right":i.halign==="right"&&(i.halign="left"),this._imageManager){var s=this._imageManager.images;for(var n in s)s[n].originX=1-s[n].originX}return this}setText(t){return t=pn(t),t===this._text?this:(this._text=t,this.updateText(),this)}setPadding(t,i,s,n){if(typeof t=="object"){var o=t,r=Ui(o,"x",null);r!==null?(t=r,s=r):(t=Ui(o,"left",0),s=Ui(o,"right",t));var a=Ui(o,"y",null);a!==null?(i=a,n=a):(i=Ui(o,"top",0),n=Ui(o,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),s===void 0&&(s=t),n===void 0&&(n=i);return this.padding.left=t,this.padding.top=i,this.padding.right=s,this.padding.bottom=n,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var i=this.canvasText,s=this.style;t&&i.updatePenManager(this._text,s.wrapMode,s.wrapWidth,s.lineHeight);var n=this.padding,o,r,a=Math.ceil(i.linesWidth);s.fixedWidth===0?(this.width=a+n.left+n.right,o=a):(this.width=s.fixedWidth,o=this.width-n.left-n.right,o<a&&(o=a)),s.fixedHeight===0?(this.height=i.linesHeight+n.top+n.bottom,r=i.linesHeight):(this.height=s.fixedHeight,r=this.height-n.top-n.bottom,r<i.linesHeight&&(r=i.linesHeight));var p=this.width,h=this.height;this.updateDisplayOrigin();var u=s.resolution;p*=u,h*=u,p=Math.max(Math.ceil(p),1),h=Math.max(Math.ceil(h),1);var f=this.canvas,l=this.context;f.width!==p||f.height!==h?(f.width=p,f.height=h,this.frame.setSize(p,h)):l.clearRect(0,0,p,h),l.save(),l.scale(u,u);var d=this.style.rtl?n.right:n.left,v=n.top;i.draw(d,v,o,r),l.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=this.width,c.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t}setInteractive(t,i,s){var n=!!this.input;return Uat.prototype.setInteractive.call(this,t,i,s),n||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,i,s){return typeof t=="number"&&(s=i,i=t,t=void 0),t=this.canvasText.getText(t,i,s,!0),t.split(Wat)}getPlainText(t,i,s){return typeof t=="number"&&(s=i,i=t,t=void 0),this.canvasText.getPlainText(t,i,s)}getText(t,i,s,n){return typeof t=="number"&&(n=s,s=i,i=t,t=void 0),n===void 0&&(n=!1),this.canvasText.getText(t,i,s,n)}getSubString(t,i,s){return typeof t=="number"&&(s=i,i=t,t=void 0),this.getText(t,i,s)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,i){return this.canvasText.getPenManager(t,i)}setSize(t,i){return this.setFixedSize(t,i)}resize(t,i){return this.setFixedSize(t,i)}get imageManager(){return this._imageManager||(this._imageManager=new _v(this.scene)),this._imageManager}addImage(t,i){return this.imageManager.add(t,i),this}drawAreaBounds(t,i){return this.canvasText.hitAreaManager.drawBounds(t,i,this),this}generateTexture(t,i,s,n,o){var r=this.canvas;return n===void 0?n=r.width:n*=this.resolution,o===void 0?o=r.height:o*=this.resolution,Gv(this.scene,r,t,i,s,n,o),this}getHitArea(t,i,s){return this.canvasText.getHitArea(t,i,s)}},Yat={appendText:tm};Object.assign(em.prototype,Yat);var im=em;var Xat=function(e,t){for(var i=this.tagRegex,s=[],n=0,o=!1,r=!1;;){var a=i.RE_SPLITTEXT.exec(e);if(!a)break;var p=a[0];if(r)if(i.RE_ESC_CLOSE.test(p))r=!1;else continue;else if(o)if(i.RE_RAW_CLOSE.test(p))o=!1;else continue;else i.RE_ESC_OPEN.test(p)?r=!0:i.RE_RAW_OPEN.test(p)&&(o=!0);var h=i.RE_SPLITTEXT.lastIndex,u=h-p.length;if(n<u){var f=e.substring(n,u);s.push(f)}t===void 0&&s.push(p),n=h}var l=e.length;return n<l&&s.push(e.substring(n,l)),s},NF=Xat;var $at={plainText:null,prevProp:null},jat=function(e,t){var i=this.tagRegex;t==null&&(t={});var s="";if(t.img&&Pt(t,!1,"img"),t.esc)i.RE_ESC_CLOSE.test(e)?Pt(t,!1,"esc"):s=e;else if(t.raw)i.RE_RAW_CLOSE.test(e)?Pt(t,!1,"raw"):s=e;else if(i.RE_ESC_OPEN.test(e))Pt(t,!0,"esc",!0);else if(i.RE_ESC_CLOSE.test(e))Pt(t,!1,"esc");else if(i.RE_RAW_OPEN.test(e))Pt(t,!0,"raw",!0);else if(i.RE_RAW_CLOSE.test(e))Pt(t,!1,"raw");else if(i.RE_BLOD_OPEN.test(e))Pt(t,!0,"b",!0);else if(i.RE_BLOD_CLOSE.test(e))Pt(t,!1,"b");else if(i.RE_ITALICS_OPEN.test(e))Pt(t,!0,"i",!0);else if(i.RE_ITALICS_CLOSE.test(e))Pt(t,!1,"i");else if(i.RE_WEIGHT_OPEN.test(e)){var n=e.match(i.RE_WEIGHT_OPEN);Pt(t,!0,"weight",n[1])}else if(i.RE_WEIGHT_CLOSE.test(e))Pt(t,!1,"weight");else if(i.RE_SIZE_OPEN.test(e)){var n=e.match(i.RE_SIZE_OPEN);Pt(t,!0,"size",`${n[1]}px`)}else if(i.RE_SIZE_CLOSE.test(e))Pt(t,!1,"size");else if(i.RE_FAMILY_OPEN.test(e)){var n=e.match(i.RE_FAMILY_OPEN);Pt(t,!0,"family",n[1])}else if(i.RE_FAMILY_CLOSE.test(e))Pt(t,!1,"family");else if(i.RE_COLOR_OPEN.test(e)){var n=e.match(i.RE_COLOR_OPEN);Pt(t,!0,"color",n[1])}else if(i.RE_COLOR_CLOSE.test(e))Pt(t,!1,"color");else if(i.RE_UNDERLINE_OPEN.test(e))Pt(t,!0,"u",!0);else if(i.RE_UNDERLINE_OPENC.test(e)){var n=e.match(i.RE_UNDERLINE_OPENC);Pt(t,!0,"u",n[1])}else if(i.RE_UNDERLINE_CLOSE.test(e))Pt(t,!1,"u");else if(i.RE_STRIKETHROUGH_OPEN.test(e))Pt(t,!0,"s",!0);else if(i.RE_STRIKETHROUGH_OPENC.test(e)){var n=e.match(i.RE_STRIKETHROUGH_OPENC);Pt(t,!0,"s",n[1])}else if(i.RE_STRIKETHROUGH_CLOSE.test(e))Pt(t,!1,"s");else if(i.RE_SHADOW_OPEN.test(e))Pt(t,!0,"shadow",!0);else if(i.RE_SHADOW_OPENC.test(e)){var n=e.match(i.RE_SHADOW_OPENC);Pt(t,!0,"shadow",n[1])}else if(i.RE_SHADOW_CLOSE.test(e))Pt(t,!1,"shadow");else if(i.RE_STROKE_OPEN.test(e))Pt(t,!0,"stroke",!0);else if(i.RE_STROKE_OPENC.test(e)){var n=e.match(i.RE_STROKE_OPENC);Pt(t,!0,"stroke",n[1])}else if(i.RE_STROKE_CLOSE.test(e))Pt(t,!1,"stroke");else if(i.RE_BGCOLOR_OPEN.test(e)){var n=e.match(i.RE_BGCOLOR_OPEN);Pt(t,!0,"bgcolor",n[1])}else if(i.RE_BGCOLOR_CLOSE.test(e))Pt(t,!1,"bgcolor");else if(i.RE_OFFSETY_OPEN.test(e)){var n=e.match(i.RE_OFFSETY_OPEN);Pt(t,!0,"y",parseFloat(n[1]))}else if(i.RE_OFFSETY_CLOSE.test(e))Pt(t,!1,"y");else if(i.RE_IMAGE_OPEN.test(e)){var n=e.match(i.RE_IMAGE_OPEN);Pt(t,!0,"img",n[1])}else if(i.RE_IMAGE_CLOSE.test(e))Pt(t,!1,"img");else if(i.RE_AREA_OPEN.test(e)){var n=e.match(i.RE_AREA_OPEN);Pt(t,!0,"area",n[1])}else if(i.RE_AREA_CLOSE.test(e))Pt(t,!1,"area");else if(i.RE_URL_OPEN.test(e)){var n=e.match(i.RE_URL_OPEN);Pt(t,!0,"url",n[1])}else if(i.RE_URL_CLOSE.test(e))Pt(t,!1,"url");else if(i.RE_ALIGN_OPEN.test(e)){var n=e.match(i.RE_ALIGN_OPEN);Pt(t,!0,"align",n[1])}else if(i.RE_ALIGN_CLOSE.test(e))Pt(t,!1,"align");else if(i.RE_ID_OPEN.test(e)){var n=e.match(i.RE_ID_OPEN);Pt(t,!0,"id",n[1])}else i.RE_ID_CLOSE.test(e)?Pt(t,!1,"id"):s=e;var o=$at;return o.plainText=s,o.prop=t,o},Pt=function(e,t,i,s){return t===!0?e[i]=s:e.hasOwnProperty(i)&&delete e[i],e},GF=jat;var Zat=function(e,t){var i=Jat;if(t.hasOwnProperty("img"))i.image=t.img;else{if(i.image=null,t.hasOwnProperty("family")?i.fontFamily=t.family:i.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var s=t.size;typeof s=="number"&&(s=`${s}px`),i.fontSize=s}else i.fontSize=e.fontSize;i.fontStyle=Kat(t),t.hasOwnProperty("color")?i.color=t.color:i.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(i.stroke=e.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=t.stroke,i.strokeThickness=e.strokeThickness):(i.stroke=e.stroke,i.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(i.shadowColor=e.shadowColor,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor=t.shadow,i.shadowOffsetX=e.shadowOffsetX,i.shadowOffsetY=e.shadowOffsetY,i.shadowBlur=e.shadowBlur,i.shadowStroke=!0,i.shadowFill=!0):(i.shadowColor="#000",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,i.shadowStroke=!1,i.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(i.underlineColor=e.underlineColor,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor=t.u,i.underlineThickness=e.underlineThickness,i.underlineOffset=e.underlineOffset):(i.underlineColor="#000",i.underlineThickness=0,i.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(i.strikethroughColor=e.strikethroughColor,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor=t.s,i.strikethroughThickness=e.strikethroughThickness,i.strikethroughOffset=e.strikethroughOffset):(i.strikethroughColor="#000",i.strikethroughThickness=0,i.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?i.bgcolor=t.bgcolor:i.bgcolor=null,i},Kat=function(e){var t=e.b,i=e.weight,s=e.i;return t||i||s?s?t?"bold italic":i?`${i} italic`:"italic":t?"bold":i.toString():""},Jat=new uh,kF=Zat;var Qat=function(e,t,i){i==null&&(i=qat);var s=this.delimiters[0],n=this.delimiters[1],o=[];for(var r in i)t.hasOwnProperty(r)||o.push(`${s}/${r}${n}`);for(var r in t){var a=t[r];if(r!=="img"){if(i[r]===a)continue}switch(r){case"size":o.push(`${s}size=${a.replace("px","")}${n}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":o.push(`${s}${r}=${a}${n}`);break;case"u":case"s":a===!0?o.push(`${s}${r}${n}`):o.push(`${s}${r}=${a}${n}`);break;default:o.push(`${s}${r}${n}`);break}}return o.push(e),o.join("")},qat={},VF=Qat;var _at=function(e){return e.replace(tot,"\\$&").replace(eot,"\\x2d")},tot=/[|\\{}()[\]^$+*?.]/g,eot=/-/g,os=_at;var UF,zF,wt={},Pe=function(e,t,i,s){return s===void 0?`${e}${i}${t}`:`${e}${i}=(${s})${t}`},Ze=function(e,t,i){return`${e}/${i}${t}`},iot=function(e){return`[^${e}]+`},rP="[-.0-9]+",rot=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"],ph=rot.join("|"),nP=function(e,t){if(t===void 0){var i=e;e=i[0],t=i[1]}if(UF===e&&zF===t)return!1;UF=e,zF=t,e=os(e),t=os(t);var s=iot(t),n="esc",o=Pe(e,t,n),r=Ze(e,t,n),a="raw",p=Pe(e,t,a),h=Ze(e,t,a),u="b",f=Pe(e,t,u),l=Ze(e,t,u),d="i",v=Pe(e,t,d),c=Ze(e,t,d),m="weight",g=Pe(e,t,m,rP),y=Ze(e,t,m),x="size",C=Pe(e,t,x,rP),S=Ze(e,t,x),E="family",T=Pe(e,t,E,s),P=Ze(e,t,E),M="color",w=Pe(e,t,M,ph),b=Ze(e,t,M),I="u",R=Pe(e,t,I),A=Pe(e,t,I,ph),L=Ze(e,t,I),O="s",F=Pe(e,t,O),G=Pe(e,t,O,ph),U=Ze(e,t,O),z="shadow",N=Pe(e,t,z),k=Pe(e,t,z,ph),D=Ze(e,t,z),V="stroke",B=Pe(e,t,V),W=Pe(e,t,V,ph),H=Ze(e,t,V),Y="bgcolor",X=Pe(e,t,Y,ph),$=Ze(e,t,Y),J="y",q=Pe(e,t,J,rP),Q=Ze(e,t,J),tt="img",rt=Pe(e,t,tt,s),et=Ze(e,t,tt),ot="area",ut=Pe(e,t,ot,s),dt=Ze(e,t,ot),it="url",st=Pe(e,t,it,s),at=Ze(e,t,it),yt="align",Ft=Pe(e,t,yt,s),ee=Ze(e,t,yt),It="id",Dt=Pe(e,t,It,s),he=Ze(e,t,It);return wt.RE_ESC_OPEN=new RegExp(o,"i"),wt.RE_ESC_CLOSE=new RegExp(r,"i"),wt.RE_RAW_OPEN=new RegExp(p,"i"),wt.RE_RAW_CLOSE=new RegExp(h,"i"),wt.RE_BLOD_OPEN=new RegExp(f,"i"),wt.RE_BLOD_CLOSE=new RegExp(l,"i"),wt.RE_ITALICS_OPEN=new RegExp(v,"i"),wt.RE_ITALICS_CLOSE=new RegExp(c,"i"),wt.RE_WEIGHT_OPEN=new RegExp(g,"i"),wt.RE_WEIGHT_CLOSE=new RegExp(y,"i"),wt.RE_SIZE_OPEN=new RegExp(C,"i"),wt.RE_SIZE_CLOSE=new RegExp(S,"i"),wt.RE_FAMILY_OPEN=new RegExp(T,"i"),wt.RE_FAMILY_CLOSE=new RegExp(P,"i"),wt.RE_COLOR_OPEN=new RegExp(w,"i"),wt.RE_COLOR_CLOSE=new RegExp(b,"i"),wt.RE_UNDERLINE_OPEN=new RegExp(R,"i"),wt.RE_UNDERLINE_OPENC=new RegExp(A,"i"),wt.RE_UNDERLINE_CLOSE=new RegExp(L,"i"),wt.RE_STRIKETHROUGH_OPEN=new RegExp(F,"i"),wt.RE_STRIKETHROUGH_OPENC=new RegExp(G,"i"),wt.RE_STRIKETHROUGH_CLOSE=new RegExp(U,"i"),wt.RE_SHADOW_OPEN=new RegExp(N,"i"),wt.RE_SHADOW_OPENC=new RegExp(k,"i"),wt.RE_SHADOW_CLOSE=new RegExp(D,"i"),wt.RE_STROKE_OPEN=new RegExp(B,"i"),wt.RE_STROKE_OPENC=new RegExp(W,"i"),wt.RE_STROKE_CLOSE=new RegExp(H,"i"),wt.RE_BGCOLOR_OPEN=new RegExp(X,"i"),wt.RE_BGCOLOR_CLOSE=new RegExp($,"i"),wt.RE_OFFSETY_OPEN=new RegExp(q,"i"),wt.RE_OFFSETY_CLOSE=new RegExp(Q,"i"),wt.RE_IMAGE_OPEN=new RegExp(rt,"i"),wt.RE_IMAGE_CLOSE=new RegExp(et,"i"),wt.RE_AREA_OPEN=new RegExp(ut,"i"),wt.RE_AREA_CLOSE=new RegExp(dt,"i"),wt.RE_URL_OPEN=new RegExp(st,"i"),wt.RE_URL_CLOSE=new RegExp(at,"i"),wt.RE_ALIGN_OPEN=new RegExp(Ft,"i"),wt.RE_ALIGN_CLOSE=new RegExp(ee,"i"),wt.RE_ID_OPEN=new RegExp(Dt,"i"),wt.RE_ID_CLOSE=new RegExp(he,"i"),wt.RE_SPLITTEXT=new RegExp([p,h,o,r,f,l,v,c,g,y,C,S,T,P,w,b,R,A,L,F,G,U,N,k,D,B,W,H,X,$,q,Q,rt,et,ut,dt,st,at,Ft,ee,Dt,he].join("|"),"ig"),!0},sP=function(e,t){return e!==void 0&&nP(e,t),Object.assign({},wt)};var not=Phaser.Utils.Objects.GetValue,rm=class{constructor(t){var i=not(t,"delimiters","[]");this.tagRegex=sP(i),this.delimiters=i}getStrokeThinkness(t,i){var s;return i.hasOwnProperty("stroke")?s=t.strokeThickness:s=0,s}setDelimiters(t,i){return nP(t,i)&&(this.tagRegex=sP()),this}},sot={splitText:NF,tagTextToProp:GF,propToContextStyle:kF,propToTagText:VF};Object.assign(rm.prototype,sot);var WF=rm;var aP=class extends im{constructor(t,i,s,n,o){var r=new WF(o);super(t,i,s,n,o,"rexBBCodeText",r)}setDelimiters(t,i){return this.parser.setDelimiters(t,i),this}},HF=aP;var YF=HF;var Wd=YF;K.register("BBCodeText",function(e,t,i,s){var n=new Wd(this.scene,e,t,i,s);return this.scene.add.existing(n),n});Z(window,"RexPlugins.UI.BBCodeText",Wd);var aot={plainText:null,prevProp:null},oot=new uh,lP=class{constructor(t){t===void 0&&(t={}),this.tags=t}addTag(t,i){this.tags[t]=i}getTag(t){return this.tags[t]}splitText(t,i){for(var s=[],n=0;;){var o=oP.exec(t);if(!o)break;var r=o[0],a=oP.lastIndex-r.length;if(n<a&&s.push(t.substring(n,a)),i===void 0)s.push(r);else if(i===1){if($F.test(r)){var p=r.match(jF);s.push(p[2])}else if(ZF.test(r)){var p=r.match(KF);s.push(p[2])}}n=oP.lastIndex}var h=t.length;return n<h&&s.push(t.substring(n,h)),s}tagTextToProp(t,i){var s,n;if($F.test(t)){var o=t.match(jF);if(o!=null){var r=o[1],a=this.tags;a.hasOwnProperty(r)?n=a[r]:n={},n._class=r,s=o[2]}}else if(ZF.test(t)){var o=t.match(KF);if(o!=null){var p=o[1];n=lot(p),n._style=p,s=o[2]}}s==null&&(s=t),n==null&&(n={});var h=aot;return h.plainText=s,h.prop=n,h}propToContextStyle(t,i){var s=oot;if(i.hasOwnProperty("img"))s.image=i.img;else{if(s.image=null,i.hasOwnProperty("family")||i.hasOwnProperty("fontFamily")||i.hasOwnProperty("font-family")){var n=i.hasOwnProperty("family")?i.family:i.hasOwnProperty("fontFamily")?i.fontFamily:i["font-family"];s.fontFamily=n}else s.fontFamily=t.fontFamily;if(i.hasOwnProperty("size")||i.hasOwnProperty("fontSize")||i.hasOwnProperty("font-size")){var o=i.hasOwnProperty("size")?i.size:i.hasOwnProperty("fontSize")?i.fontSize:i["font-size"];typeof o=="number"&&(o=`${o}px`),s.fontSize=o}else s.fontSize=t.fontSize;if(i.hasOwnProperty("style")||i.hasOwnProperty("fontStyle")||i.hasOwnProperty("font-style")){var r=i.hasOwnProperty("style")?i.style:i.hasOwnProperty("fontStyle")?i.fontStyle:i["font-style"];s.fontStyle=r}else s.fontStyle=t.fontStyle;if(i.hasOwnProperty("color")||i.hasOwnProperty("font-color")){var a=i.hasOwnProperty("color")?i.color:i["font-color"];s.color=a}else s.color=t.color;if(i.hasOwnProperty("stroke")){var p=i.stroke;s.stroke=p.hasOwnProperty("color")?p.color:t.stroke,s.strokeThickness=p.hasOwnProperty("thickness")?p.thickness:t.strokeThickness}else s.stroke=t.stroke,s.strokeThickness=t.strokeThickness}if(i.hasOwnProperty("shadow")){var h=i.shadow;s.shadowColor=h.hasOwnProperty("color")?h.color:t.shadowColor,s.shadowOffsetX=h.hasOwnProperty("offsetX")?h.offsetX:t.shadowOffsetX,s.shadowOffsetY=h.hasOwnProperty("offsetY")?h.offsetY:t.shadowOffsetY,s.shadowBlur=h.hasOwnProperty("blur")?h.blur:t.shadowBlur,s.shadowStroke=!0,s.shadowFill=!0}else s.shadowColor=t.shadowColor,s.shadowOffsetX=t.shadowOffsetX,s.shadowOffsetY=t.shadowOffsetY,s.shadowBlur=t.shadowBlur,s.shadowStroke=t.shadowStroke,s.shadowFill=t.shadowFill;if(i.hasOwnProperty("u")||i.hasOwnProperty("underline")){var u=i.hasOwnProperty("u")?i.u:i.underline;s.underlineColor=u.hasOwnProperty("color")?u.color:t.underlineColor,s.underlineThickness=u.hasOwnProperty("thickness")?u.thickness:t.underlineThickness,s.underlineOffset=u.hasOwnProperty("offset")?u.offset:t.underlineOffset}else s.underlineColor=t.underlineColor,s.underlineThickness=t.underlineThickness,s.underlineOffset=t.underlineOffset;if(i.hasOwnProperty("s")||i.hasOwnProperty("strikethrough")){var f=i.hasOwnProperty("s")?i.s:i.strikethrough;s.strikethroughColor=f.hasOwnProperty("color")?f.color:t.strikethroughColor,s.strikethroughThickness=f.hasOwnProperty("thickness")?f.thickness:t.strikethroughThickness,s.strikethroughOffset=f.hasOwnProperty("offset")?f.offset:t.strikethroughOffset}else s.strikethroughColor=t.strikethroughColor,s.strikethroughThickness=t.strikethroughThickness,s.strikethroughOffset=t.strikethroughOffset;return s}getStrokeThinkness(t,i){var s;if(i.hasOwnProperty("stroke")){var n=i.stroke;s=n.hasOwnProperty("thickness")?n.thickness:t.strokeThickness}else s=t.strokeThickness;return s}propToTagText(t,i,s){return i.hasOwnProperty("_class")?t===""&&this.isTextTag(i._class)?"":`<class='${i._class}'>${t}</class>`:i.hasOwnProperty("_style")?`<style='${i._style}'>${t}</style>`:t}destroy(){this.tags=void 0}isTextTag(t){var i=this.tags[t];return i?i.img==null:!1}},lot=function(e){e=e.split(";");for(var t={},i,s,n,o=0,r=e.length;o<r;o++)if(i=e[o].split(":"),s=i[0],n=i[1],!(XF(s)||XF(n))){switch(s){case"stroke":var a=n.split(" "),p=a.length;n={},p>=1&&(n.color=a[0]),p>=2&&(n.thickness=parseInt(a[1].replace("px","")));break;case"shadow":var a=n.split(" "),p=a.length;n={},p>=1&&(n.color=a[0]),p>=2&&(n.offsetX=parseInt(a[1].replace("px",""))),p>=3&&(n.offsetY=parseInt(a[2].replace("px",""))),p>=4&&(n.blur=parseInt(a[3].replace("px","")));break;case"u":case"underline":case"s":case"strikethrough":var a=n.split(" "),p=a.length;n={},p>=1&&(n.color=a[0]),p>=2&&(n.thickness=parseInt(a[1].replace("px",""))),p>=3&&(n.offset=parseInt(a[2].replace("px",""))),s==="underline"?s="u":s==="strikethrough"&&(s="s");break;case"y":n=parseFloat(n);break}t[s]=n}return t},XF=function(e){return e=e.replace(hot,""),e.length===0},oP=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>|<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/g,$F=/<\s*class=/i,jF=/<\s*class=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/class\s*\>/,ZF=/<\s*style=/i,KF=/<\s*style=["|']([^"|']+)["|']\s*\>([\s\S]*?)<\s*\/style\s*\>/,hot=/^\s+|\s+$/,JF=lP;var uot=Phaser.Utils.Objects.GetValue,hP=class extends im{constructor(t,i,s,n,o){var r=uot(o,"tags",void 0),a=new JF(r);super(t,i,s,n,o,"rexTagText",a)}addTag(t,i){return this.parser.addTag(t,i),this.updateText(!0)}addTags(t){for(var i in t)this.parser.addTag(i,t[i]);return this.updateText(!0)}getTag(t){return this.parser.getTag(t)}preDestroy(){super.preDestroy(),this.parser.destroy(),this.parser=void 0}},QF=hP;var qF=QF;var uP=qF;K.register("tagText",function(e,t,i,s){var n=new uP(this.scene,e,t,i,s);return this.scene.add.existing(n),n});Z(window,"RexPlugins.UI.TagText",uP);var nm=Phaser.Utils.Objects.GetValue,vh=function(e,t){return t===void 0?e:e[t]},_i=function(e,t,i){e===void 0&&(e={}),t===void 0&&(t=0);var s=typeof t;return s==="string"?e[t]=i:s==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=nm(t,"left",0),e.right=nm(t,"right",0),e.top=nm(t,"top",0),e.bottom=nm(t,"bottom",0)),e};var sm=class{constructor(t,i){this.setParent(t),this.type=i,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(t){return this.parent=t,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(t){return t&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(t){this.setDirty(this._active!=t),this._active=t}setActive(t){return t===void 0&&(t=!0),this.active=t,this}modifyPorperties(t){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(t,i){return!1}};Object.assign(sm.prototype,Hs);var am=sm;var _F={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,i=this.drawY;this.autoRound&&(t=Math.round(t),i=Math.round(i)),e.translate(t,i),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}};var dot=Phaser.Math.RotateAround,fot=function(e,t,i,s){return s===void 0?s={}:s===!0&&(dP===void 0&&(dP={}),s=dP),s.x=(e-i.drawX)/i.scaleX,s.y=(t-i.drawY)/i.scaleY,i.rotation!==0&&dot(s,0,0,-i.rotation),s},dP,tB=fot;var cot=Phaser.Geom.Rectangle,pot=function(e,t){if(this.width===0||this.height===0)return!1;var i=tB(e,t,this,!0);return vot(this).contains(i.x,i.y)},vot=function(e){om===void 0&&(om=new cot);var t=e.drawTLX,i=e.drawTLY;return om.setTo(t,i,e.drawTRX-t,e.drawBLY-i),om},om,eB=pot;var mot=Phaser.Math.RotateAround,got=function(e,t,i,s){return s===void 0?s={}:s===!0&&(fP===void 0&&(fP={}),s=fP),s.x=t,s.y=i,e.rotation!==0&&mot(s,0,0,e.rotation),s.x=s.x*e.scaleX+e.drawX,s.y=s.y*e.scaleY+e.drawY,s},fP,lm=got;var iB=Phaser.GameObjects.Components.TransformMatrix,xot=function(e,t,i,s){s===void 0?s={}:s===!0&&(s=yot);var n=t-e.width*e.originX,o=i-e.height*e.originY;return Hd===void 0&&(Hd=new iB,rB=new iB),e.parentContainer?e.getWorldTransformMatrix(Hd,rB):Hd.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),Hd.transformPoint(n,o,s),s},Hd,rB,yot={},nB=xot;var Cot=function(e,t,i,s,n){var o=lm(t,i,s,!0),r=nB(e,o.x,o.y,n);return r},sB=Cot;var Sot=function(e,t,i,s,n){typeof i!="number"&&(n=i,i=0,s=0);var o=t.drawCenterX+i,r=t.drawCenterY+s;return sB(e,t,o,r,n)},hm=Sot;var Tot=function(e,t,i){return hm(this.parent,this,e,t,i)},aB=Tot;var oB={contains:eB,getWorldPosition:aB};Object.assign(oB,_F);var lB=oB;var Eot=Phaser.Math.DegToRad,Pot=Phaser.Math.RadToDeg,um=Phaser.Utils.Objects.GetValue,dm=class extends am{constructor(t,i){super(t,i),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,i){return this.x=t,this.y=i,this}setInitialPosition(t,i){return this.x0=t,this.y0=i,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,i){return i===void 0&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return Pot(this._rotation)}set angle(t){this.rotation=Eot(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,i){return i===void 0&&(i=!1),this.width=t,i&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setScale(t,i){return i===void 0&&(i=t),this.scaleX=t,this.scaleY=i,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var i=um(t,"width",void 0),s=um(t,"height",void 0),n=um(t,"scaleX",void 0),o=um(t,"scaleY",void 0);return i!==void 0?s===void 0&&o===void 0?this.setWidth(i,!0):this.setWidth(i):n!==void 0&&this.setScaleX(n),s!==void 0?i===void 0&&n===void 0?this.setHeight(s,!0):this.setHeight(s):o!==void 0&&this.setScaleY(o),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}};Object.assign(dm.prototype,lB);var yr=dm;var Mot=function(e,t,i){return t.hasOwnProperty(e)?t[e]:i[e]},vn=Mot;var co=Phaser.Utils.Objects.GetValue,cP=class extends yr{constructor(t,i){super(t,"background"),this.setScrollFactor(0),this.setColor(co(i,"color",null),co(i,"color2",null),co(i,"horizontalGradient",!0)),this.setStroke(co(i,"stroke",null),co(i,"strokeThickness",2)),this.setCornerRadius(co(i,"cornerRadius",0),co(i,"cornerIteration",null))}set color(t){t=vt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=vt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,s){return s===void 0&&(s=!0),this.color=t,this.color2=i,this.horizontalGradient=s,this}set stroke(t){t=vt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,vn("color2",t,this),vn("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,vn("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,vn("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,i){return this.cornerRadius=t,this.cornerIteration=i,this}renderContent(){lh(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}},hB=cP;var Js=Phaser.Utils.Objects.GetValue,pP=class extends yr{constructor(t,i){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(Js(i,"color",null),Js(i,"color2",null),Js(i,"horizontalGradient",!0)),this.setStroke(Js(i,"stroke",null),Js(i,"strokeThickness",2))}set color(t){t=vt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=vt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,i,s){return s===void 0&&(s=!0),this.color=t,this.color2=i,this.horizontalGradient=s,this}set stroke(t){t=vt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,i){return t!=null&&i===void 0&&(i=2),this.stroke=t,this.strokeThickness=i,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Js(t,"color2",null),Js(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Js(t,"strokeThickness",2))}renderContent(){var t=this.parent.padding,i=t.left,s=t.top,n=this.parent.width-t.left-t.right,o=this.parent.height-t.top-t.bottom,r=this.context;if(this.color!=null){var a;if(this.color2!=null){var p;this.horizontalGradient?p=r.createLinearGradient(0,0,n,0):p=r.createLinearGradient(0,0,0,o),p.addColorStop(0,this.color),p.addColorStop(1,this.color2),a=p}else a=this.color;r.fillStyle=a,r.fillRect(i,s,n,o)}this.stroke!=null&&this.strokeThickness>0&&(r.strokeStyle=this.stroke,r.lineWidth=this.strokeThickness,r.strokeRect(i,s,n,o))}},uB=pP;var Le=Phaser.Utils.Objects.GetValue,vP=class e{constructor(t,i){this.parent=t,this.set(i)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Le(t,"bold",!1)),this.setItalic(Le(t,"italic",!1)),this.setFontSize(Le(t,"fontSize","16px")),this.setFontFamily(Le(t,"fontFamily","Courier")),this.setColor(Le(t,"color","#fff")),this.setStrokeStyle(Le(t,"stroke",null),Le(t,"strokeThickness",0)),this.setShadow(Le(t,"shadowColor",null),Le(t,"shadowOffsetX",0),Le(t,"shadowOffsetY",0),Le(t,"shadowBlur",0)),this.setOffset(Le(t,"offsetX",0),Le(t,"offsetY",0)),this.setSpace(Le(t,"leftSpace",0),Le(t,"rightSpace",0)),this.setAlign(Le(t,"align",void 0)),this.setBackgroundColor(Le(t,"backgroundColor",null)),this.setBackgroundHeight(Le(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Le(t,"backgroundBottomY",void 0)),this.setBackgroundLeftX(Le(t,"backgroundLeftX",0)),this.setBackgroundRightX(Le(t,"backgroundRightX",0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(vn("stroke",t,this),vn("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(vn("shadowOffsetX",t,this),vn("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),t.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(t.backgroundLeftX),t.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(t.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new e(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=vt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,i){return this.stroke=vt(t),i!==void 0&&(this.strokeThickness=i),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=vt(t),this}setShadowOffset(t,i){return t===void 0&&(t=0),i===void 0&&(i=0),this.shadowOffsetX=t,this.shadowOffsetY=i,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,i,s,n){return this.setShadowColor(t).setShadowOffset(i,s).setShadowBlur(n),this}setBackgroundColor(t){return this.backgroundColor=vt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setBackgroundLeftX(t){return this.backgroundLeftX=t,this}setBackgroundRightX(t){return this.backgroundRightX=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,i){return this.setOffsetX(t).setOffsetY(i),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,i){return this.setLeftSpace(t).setRightSpace(i),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var i=this.hasFill,s=this.hasStroke;return t.fillStyle=i?this.color:"#000",t.strokeStyle=s?this.stroke:"#000",t.lineWidth=s?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,i){return this.syncFont(t).syncStyle(t),t.measureText(i)}},fm=vP;var wot=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t?this:(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height),this)},dB=wot;var bot=function(e,t){var i=this.padding,s=i.left,n=i.right,o=i.top,r=i.bottom;return _i(i,e,t),this.dirty=this.dirty||s!=i.left||n!=i.right||o!=i.top||r!=i.bottom,this},fB=bot;var Rot=function(e){return vh(this.padding,e)},cB=Rot;var Iot=function(e){return this.textStyle.modify(e),this},pB=Iot;var Aot=function(e){return this.defaultTextStyle.modify(e),this},vB=Aot;var Oot=function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},mB=Oot;var Dot=function(e){return this.testString=e,this},gB=Dot;var Lot=Phaser.Utils.Array.Remove,Fot=function(e){return this.poolManager.free(e),Lot(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},xB=Fot;var Bot=function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},yB=Bot;var Not=Phaser.Utils.Array.Remove,Got=function(e){return Not(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},CB=Got;var kot=function(){return this.setText(),this},SB=kot;var Vot=function(e,t){var i=Array.isArray(e);return t===void 0||t===this.children.length?i?this.children.push(...e):this.children.push(e):i?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,i?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this},TB=Vot;var tr="text",cm="image",pm="drawer",vm="space",Yd="command",mm=function(e){return e.type===tr&&e.text===`
`},gm=function(e){return e.type===tr&&e.text==="\f"},EB=function(e){return e.type===tr&&e.text===" "},Cr=function(e){return e.type===tr},PB=function(e){return e.type===Yd};var mP=class extends yr{constructor(t,i,s){super(t,tr),this.updateTextFlag=!1,this.style=new fm(this,s),this.setText(i)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var i=this.style.getTextMetrics(this.context,this.text);this.textWidth=i.width;var s,n;"actualBoundingBoxAscent"in i?(s=i.actualBoundingBoxAscent,n=i.actualBoundingBoxDescent):(s=0,n=0),this.textHeight=s+n,this.ascent=s,this.descent=n}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth===0?!1:super.willRender}renderContent(){var t=this.context,i=this.style;if(i.hasBackgroundColor){t.fillStyle=i.backgroundColor;var s=this.drawTLX+i.backgroundLeftX,n=this.drawTRX+i.backgroundRightX,o=s,r=n-s+1;if(r>0){var a=i.backgroundBottomY;a==null&&(a=this.drawBLY);var p=i.backgroundHeight;p==null&&(p=a-this.drawTLY);var h=a-p;t.fillRect(o,h,r,p)}}var u=i.hasFill,f=i.hasStroke;!u&&!f||(i.syncFont(t).syncStyle(t),f&&(i.syncShadow(t),t.strokeText(this.text,0,0)),u&&(i.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}},xm=mP;var Uot=function(e,t){t&&this.textStyle.modify(t);var i=this.poolManager.allocate(tr);return i===null?i=new xm(this,e,this.textStyle):i.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),i},MB=Uot;var zot=function(e,t){t&&this.textStyle.modify(t);for(var i=[],s=0,n=e.length;s<n;s++){var o=e.charAt(s),r=this.poolManager.allocate(tr);r===null?r=new xm(this,o,this.textStyle):r.setParent(this).setActive().modifyStyle(this.textStyle).setText(o),i.push(r)}return i},wB=zot;var Wot=function(e,t){var i=this.createCharChildren(e,t);return this.addChild(i),this},mn=Wot;var Hot=function(e,t){return e===void 0&&(e=""),this.removeChildren(),mn.call(this,e,t),this.dirty=!0,this},bB=Hot;var Yot=function(e,t,i){var s=this.createCharChildren(t,i);return e=this.getCharChildIndex(e,!0),this.addChild(s,e),this},RB=Yot;var Xot=function(e,t){t===void 0&&(t=1);for(var i=0;i<t;i++){var s=this.getCharChildIndex(e,!0);if(s===void 0)break;this.removeChild(this.children[s])}return this},IB=Xot;var $ot=function(e){var t="";return this.forEachCharChild(function(i){t+=i.text},void 0,e),t},AB=$ot;var S6t=Phaser.Display.Canvas.CanvasPool,gP=class extends yr{constructor(t,i,s){super(t,cm),this.setTexture(i,s),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,i){return this.key=t,this.frame=i,this.frameObj=this.scene.sys.textures.getFrame(t,i),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,i){return i===void 0&&(i=!1),this.height=t,i&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){Qv(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}},OB=gP;var jot=function(e,t,i){var s=this.poolManager.allocate(cm);return s===null?s=new OB(this,e,t):s.setParent(this).setActive().setTexture(e,t),s.modifyPorperties(i),s},DB=jot;var Zot=function(e,t,i){var s=this.createImageChild(e,t,i);return this.addChild(s),this},ym=Zot;var xP=class extends yr{constructor(t,i,s,n){super(t,pm),this.setRenderCallback(i),this.setDrawerSize(s,n)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,i){return t===!0?(this.toLocalPosition=!1,t=void 0,i=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),i===void 0&&(i=t),this.drawerWidth=t,this.drawerHeight=i,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}},LB=xP;var Kot=function(e,t,i){var s=this.poolManager.allocate(pm);return s===null?s=new LB(this,e,t,i):s.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,i),s},FB=Kot;var Jot=function(e,t,i){var s=this.createDrawerChild(e,t,i);return this.addChild(s),this},BB=Jot;var yP=class extends yr{constructor(t,i){super(t,vm),this.setSpaceWidth(i)}get width(){return this.spaceWidth*this.scaleX}set width(t){this.spaceWidth>0?this.scaleX=t/this.spaceWidth:this.scaleX=1}setSpaceWidth(t){return this.spaceWidth=t,this}},NB=yP;var Qot=function(e){var t=this.poolManager.allocate(vm);return t===null?t=new NB(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},GB=Qot;var qot=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this},Cm=qot;var CP=class extends am{constructor(t,i,s,n,o){super(t,Yd),this.setName(i).setParameter(n).setCallback(s,o)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,i){return this.callback=t,this.scope=i,this}exec(){var t;return this.scope?t=this.callback.call(this.scope,this.param,this.name):t=this.callback(this.param,this.name),t}onFree(){super.onFree(),this.setName().setCallback().setParameter()}},kB=CP;var _ot=function(e,t,i,s){var n=this.poolManager.allocate(Yd);return n===null?n=new kB(this,e,t,i,s):n.setParent(this).setActive().setName(e).setCallback(t,s).setParameter(i),n},VB=_ot;var tlt=function(e,t,i,s){var n=this.createCommandChild(e,t,i,s);return this.addChild(n),this},nt=tlt;var elt=function(e){return e===void 0?e={}:typeof e=="object"&&(e=qt(e)),this.wrapConfig=e,this},UB=elt;var ilt=function(e){var t={callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0};return Object.assign(t,e)},Sm=ilt;var zB={none:0,word:1,char:2,character:2,mix:3};var rlt=function(e,t,i,s){s===void 0&&(s={word:[],width:0}),s.word.length=0;for(var n=i===2,o=i===3,r=!n&&!o,a=e.length,p=t,h=s.word,u=0,f=!1;p<a;){var l=e[p];if(!l.renderable){h.push(l),p++;continue}var d=l.type===tr?l.text:null;if(d===null||d===`
`||d==="\f"){p===t&&(h.push(l),u+=l.outerWidth);break}if(r){if(h.push(l),u+=l.outerWidth,d===" ")break;p++}else if(n){h.push(l),u+=l.outerWidth;break}else if(o)if(Ks(d)){if(h.push(l),u+=l.outerWidth,d===" ")break;p++,f=!0}else{if(f)break;h.push(l),u+=l.outerWidth;var v=e[p+1];v&&v.type===tr&&v.text===" "&&(h.push(v),u+=v.outerWidth);break}}return s.width=u,s},WB=rlt;var nlt=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];if(s.align!==void 0)return s.align}},Tm=nlt;var slt=function(e,t,i){if(!(t===0&&i===0))for(var s=0,n=e.length;s<n;s++){var o=e[s];o.renderable&&(o.x+=t,o.y+=i)}},Em=slt;var alt=function(e,t,i){for(var s=e.hAlign,n=e.vAlign,o=e.justifyPercentage,r=e.lines,a,p,h=0,u=r.length;h<u;h++){var f=r[h],l=f.width,d=f.children,v=Tm(d);switch(v===void 0&&(v=s),v){case 0:case"left":a=0;break;case 1:case"center":var c=t-l;a=c/2;break;case 2:case"right":var c=t-l;a=c;break;case 3:case"justify":case"justify-left":var c=t-l,m=c/t;m<o&&SP(d,c),a=0;break;case 4:case"justify-center":var c=t-l,m=c/t;m<o?(SP(d,c),a=0):a=c/2;break;case 5:case"justify-right":var c=t-l,m=c/t;m<o?(SP(d,c),a=0):a=c;break;default:a=0;break}var g=e.linesHeight;switch(n){case 1:case"center":p=(i-g)/2;break;case 2:case"bottom":p=i-g;break;default:p=0;break}Em(d,a,p)}},SP=function(e,t){for(var i=t/e.length,s=0,n=e.length;s<n;s++){var o=e[s];o.renderable&&(o.x+=i*s)}},HB=alt;var olt=function(){var e=this.defaultTextStyle.getTextMetrics(this.context,this.testString),t,i;return"actualBoundingBoxAscent"in e?(t=e.actualBoundingBoxAscent,i=e.actualBoundingBoxDescent):(t=0,i=0),Pm.ascent=t,Pm.descent=i,Pm.height=t+i,Pm},Pm={},TP=olt;var Ri=Phaser.Utils.Objects.GetValue,llt=function(e){var t=Ri(e,"start",0);_i(this.wrapPadding,Ri(e,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,s=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,n=Ri(e,"lineHeight"),o=Ri(e,"ascent",n),r;if(n===void 0){var a=Ri(e,"useDefaultTextHeight",!1);if(r=Ri(e,"maxLines",0),this.fixedHeight>0&&!a){var $=this.fixedHeight-i;if(r>0)n=$/r;else{var p=TP.call(this);n=p.height,o=p.ascent,r=Math.floor(($-o)/n)}}else{var p=TP.call(this);n=p.height,o=p.ascent}}else if(this.fixedHeight>0){if(r=Ri(e,"maxLines"),r===void 0){var $=this.fixedHeight-i;r=Math.floor($/n)}}else r=Ri(e,"maxLines",0);o===void 0&&(o=n);var h=r===0,u=Ri(e,"wrapMode");if(u===void 0){var f=Ri(e,"charWrap",!1);u=f?"char":"word"}typeof u=="string"&&(u=zB[u]);var l=Ri(e,"wrapWidth",void 0);l===void 0&&(this.fixedWidth>0?l=this.fixedWidth-s:(l=1/0,u=0));for(var d=Ri(e,"letterSpacing",0),v=Ri(e,"hAlign",0),c=Ri(e,"vAlign",0),m=Ri(e,"justifyPercentage",.25),g=Sm({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:d,maxLines:r,hAlign:v,vAlign:c,justifyPercentage:m,ascent:o,lineHeight:n,wrapWidth:l,wrapMode:u}),y=this.children,x=0,C=y.length;x<C;x++)y[x].setActive(!1);l+=d;for(var S=this.padding.left+this.wrapPadding.left,E=this.padding.top+this.wrapPadding.top+o,T=S,P=E,M=l,w=t,b=y.length,I=g.children,R=g.lines,A=[],L=0,O=0,F,G=!1;w<b;){F=WB(y,w,u,F);var U=F.word,z=U.length,N=F.width+z*d;w+=z;var k=mm(U[0]);G=gm(U[0]);var D=k||G;if(M<N||D){if(D){var V=U[0];V.setActive().setPosition(T,P),I.push(V),A.push(V)}T=S,P+=n,M=l,R.push({children:A,width:L}),O=Math.max(O,L),L=0,A=[];var B=G||!h&&R.length===r;if(B)break;if(D)continue}M-=N,L+=N;for(var x=0,C=U.length;x<C;x++){var W=U[x];W.setActive(),I.push(W),A.push(W),W.renderable&&(W.setPosition(T,P),T+=W.outerWidth+d)}}A.length>0&&(R.push({children:A,width:L}),O=Math.max(O,L)),g.start+=I.length,g.isLastPage=!G&&g.start===b,g.maxLineWidth=O,g.linesHeight=R.length*n;var H=this.fixedWidth>0?this.fixedWidth:g.maxLineWidth+s,Y=this.fixedHeight>0?this.fixedHeight:g.linesHeight+i,X=H-s,$=Y-i;HB(g,X,$),this.setCanvasSize(H,Y);for(var x=0,C=I.length;x<C;x++){var W=I[x];W.renderable&&(W.x0=W.x,W.y0=W.y)}return g},YB=llt;var hlt=Phaser.Utils.Objects.Merge,ult=function(e){return e===void 0&&(e={}),YB.call(this,hlt(e,this.wrapConfig))},XB=ult;var dlt=function(e,t,i){var s=e.hAlign,n=e.vAlign,o,r,a=e.rtl,p=e.lines,h=e.lineWidth,u=e.linesWidth;switch(s){case 1:case"center":o=(t-u)/2;break;case 2:case"right":o=t-u;break;default:o=0;break}a&&(o+=h);for(var f=0,l=p.length;f<l;f++){var d=p[a?l-f-1:f],v=d.children,c=d.height,m=Tm(v);switch(m===void 0&&(m=n),m){case 1:case"center":r=(i-c)/2;break;case 2:case"bottom":r=i-c;break;default:r=0;break}Em(v,o,r),o+=h}},$B=dlt;var er=Phaser.Utils.Objects.GetValue,flt=function(e){var t=er(e,"start",0);_i(this.wrapPadding,er(e,"padding",0));var i=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,s=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,n=er(e,"lineWidth",void 0),o;if(n===void 0)if(o=er(e,"maxLines",0),this.fixedWidth>0){var k=this.fixedWidth-s;n=k/o}else n=0;else if(this.fixedWidth>0){if(o=er(e,"maxLines",void 0),o===void 0){var k=this.fixedWidth-s;o=Math.floor(k/n)+1}}else o=er(e,"maxLines",0);var r=o===0,a=er(e,"fixedCharacterHeight",void 0);if(a===void 0){var p=er(e,"charPerLine",void 0);if(p!==void 0){var D=this.fixedHeight-i;a=Math.floor(D/p)}}var h=er(e,"wrapHeight",void 0);h===void 0&&(this.fixedHeight>0?h=this.fixedHeight-i:h=1/0);for(var u=er(e,"letterSpacing",0),f=er(e,"rtl",!0),l=er(e,"hAlign",f?2:0),d=er(e,"vAlign",0),v=Sm({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:u,maxLines:o,hAlign:l,vAlign:d,lineWidth:n,fixedCharacterHeight:a,wrapHeight:h,rtl:f}),c=this.children,m=0,g=c.length;m<g;m++)c[m].setActive(!1);h+=u;for(var y=this.padding.left+this.wrapPadding.left,x=this.padding.top+this.wrapPadding.top,C=y,S=x,E=h,T=t,P=c.length,M=v.children,w=v.lines,b=[],I=0,R=0;T<P;){var A=c[T];if(T++,!A.renderable){A.setActive(),M.push(A),b.push(A);continue}var L=(a!==void 0?a:A.height)+u,O=mm(A),F=gm(A),G=O||F;if(E<L||G){O&&(A.setActive().setPosition(C,S).setOrigin(.5),M.push(A),b.push(A)),C=y,S=x,E=h,w.push({children:b,height:I}),R=Math.max(R,I),I=0,b=[];var U=F||!r&&w.length===o;if(U)break;if(G)continue}E-=L,I+=L,A.setActive().setPosition(C,S).setOrigin(.5),M.push(A),b.push(A),S+=L}b.length>0&&(w.push({children:b,height:I}),R=Math.max(R,I)),v.start+=M.length,v.isLastPage=v.start===P,v.maxLineHeight=R,v.linesWidth=w.length*n;var z=this.fixedWidth>0?this.fixedWidth:v.linesWidth+s,N=this.fixedHeight>0?this.fixedHeight:v.maxLineHeight+i,k=z-s,D=N-i;$B(v,k,D),this.setCanvasSize(z,N);for(var m=0,g=M.length;m<g;m++){var A=M[m];A.renderable&&(A.x0=A.x,A.y0=A.y)}return v},jB=flt;var clt=Phaser.Utils.Objects.Merge,plt=function(e){return e===void 0&&(e={}),jB.call(this,clt(e,this.wrapConfig))},ZB=plt;var KB=Phaser.Utils.Objects.GetValue,vlt=function(e){var t=KB(this.wrapConfig,"callback");return t||(t=KB(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)},JB=vlt;var QB={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}};var qB={setTextOX(e){return e===this._textOX?this:(this._textOX=e,this)},setTextOY(e){return e===this._textOY?this:(this._textOY=e,this)},setTextOXY(e,t){if(!(e===this._textOX&&t===this._textOY))return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}};var mlt=function(){this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var e,t=0,i=this.children.length;t<i;t++)e=this.children[t],e.active&&e.render();this.innerBounds.active&&this.innerBounds.render()},_B=mlt;var glt=function(e,t,i){i===void 0&&(i=!0);for(var s=this.children.filter(function(p){return!(i&&!p.active)}),n=0,o=s.length;n<o;n++){var r=s[n],a;if(t?a=e.call(this,r,n,s):a=e(r,n,s),a)break}return this},tN=glt;var xlt=function(e,t,i){i===void 0&&(i=!0);for(var s=this.children.filter(function(p){return!(i&&!p.active||!p.renderable||p.removed)}),n=0,o=s.length;n<o;n++){var r=s[n],a;if(t?a=e.call(this,r,n,s):a=e(r,n,s),a)break}return this},eN=xlt;var ylt=function(e,t,i){i===void 0&&(i=!0);for(var s=this.children.filter(function(p){return!(i&&!p.active||!Cr(p)||p.removed)}),n=0,o=s.length;n<o;n++){var r=s[n],a;if(t?a=e.call(this,r,n,s):a=e(r,n,s),a)break}return this},iN=ylt;var Clt=function(){return this.children},rN=Clt;var Slt=Phaser.Utils.Array.GetAll,Tlt=function(){return Slt(this.children,"active",!0)},nN=Tlt;var Elt=function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(i){t.push(i)},void 0,e),t},sN=Elt;var Plt=function(){return this.lastAppendedChildren},aN=Plt;var Mlt=function(e,t,i,s){typeof t!="number"&&(s=t,t=0,i=0);var n=e.drawCenterX+t,o=e.drawCenterY+i;return lm(e,n,o,s)},oN=Mlt;var wlt=Phaser.Math.Distance.BetweenPointsSquared,blt=function(e,t){var i={x:e,y:t},s=1/0,n=null;return this.forEachRenderableChild(function(o){var r=wlt(i,oN(o,!0));s>r&&(s=r,n=o)}),n},lN=blt;var Rlt=function(e,t,i,s){return typeof e=="number"&&(e=this.getCharChild(e,!0)),hm(this,e,t,i,s)},hN=Rlt;var Ilt=function(){for(var e=this.children,t=0,i=0,s=0,n=e.length;s<n;s++){var o=e[s];if(!(!o.renderable||!o.active||!o.visible)){var r=o.x0!==void 0?o.x0:o.x,a=o.y0!==void 0?o.y0:o.y;t=Math.max(t,r),i=Math.max(i,a)}}var p=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,h=i+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return(this.width!==p||this.height!==h)&&(this.dirty=!0,this.setCanvasSize(p,h)),this},uN=Ilt;var Alt=function(e,t){t===void 0&&(t=!0);for(var i=this.children,s=0,n=i.length;s<n;s++){var o=i[s];if(!(t&&!o.active)&&Cr(o)&&!o.removed){if(e===0)return s;e--}}},dN=Alt;var Olt=function(e,t){t===void 0&&(t=!0);for(var i=this.children,s=0,n=i.length;s<n;s++){var o=i[s];if(!(t&&!o.active)&&Cr(o)&&!o.removed){if(e===0)return o;e--}}},fN=Olt;var Dlt=function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e),e<0))return null;t===void 0&&(t=!0);var i=this.children;e>=i.length&&(e=i.length);for(var s=0,n=0;n<e;n++){var o=i[n];t&&!o.active||Cr(o)&&!o.removed&&s++}return s},cN=Dlt;var Llt=function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},pN=Llt;var Flt=function(s,t,i){for(var s=s,n=0,o=s.length;n<o;n++){var r=s[n];if(!(!r.active||!r.renderable)&&r.contains(t,i))return r}return null},Mm=Flt;var Blt=function(){return this.on("pointerdown",Nlt,this).on("pointerdown",Glt,this).on("pointermove",EP,this).on("pointerover",EP,this).on("pointerout",function(e,t){EP.call(this,e,null,null,t)},this),this},Nlt=function(e,t,i,s){if(this.childrenInteractiveEnable){var n=Mm(this.children,t,i);n&&this.emit("child.pointerdown",n,e,t,i,s)}},Glt=function(e,t,i,s){if(this.childrenInteractiveEnable){var n=Mm(this.children,t,i);n&&this.emit("child.pointerup",n,e,t,i,s)}},EP=function(e,t,i,s){if(this.childrenInteractiveEnable){if(t===null){this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,i,s),this.lastOverChild=null);return}var n=Mm(this.children,t,i);n!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,i,s),n!==null&&this.emit("child.pointerover",n,e,t,i,s),this.lastOverChild=n)}},vN=Blt;var klt=Phaser.GameObjects.GameObject,Vlt=function(e,t,i){var s=!!this.input;return klt.prototype.setInteractive.call(this,e,t,i),s||vN.call(this),this},mN=Vlt;var Ult=Phaser.Utils.Array.BringToTop,zlt=Phaser.Utils.Array.SendToBack,Wlt=Phaser.Utils.Array.MoveUp,Hlt=Phaser.Utils.Array.MoveDown,Ylt=Phaser.Utils.Array.MoveAbove,Xlt=Phaser.Utils.Array.MoveBelow,gN={moveChildToFist(e){return zlt(this.children,e),this},moveChildToLast(e){return Ult(this.children,e),this},movechildUp(e){return Wlt(this.children,e),this},movechildDown(e){return Hlt(this.children,e),this},movechildAbove(e,t){return Ylt(this.children,e,t),this},movechildBelow(e,t){return Xlt(this.children,e,t),this}};var xN={setBackgroundColor(e,t,i){return this.background.setColor(e,t,i),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}};var yN={setInnerBoundsColor(e,t,i){return this.innerBounds.setColor(e,t,i),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}};var CN={setFixedSize:dB,setPadding:fB,getPadding:cB,modifyTextStyle:pB,modifyDefaultTextStyle:vB,resetTextStyle:mB,setTestString:gB,removeChild:xB,removeChildren:yB,popChild:CB,clearContent:SB,addChild:TB,createCharChild:MB,createCharChildren:wB,setText:bB,appendText:mn,insertText:RB,removeText:IB,getText:AB,createImageChild:DB,appendImage:ym,createDrawerChild:FB,appendDrawer:BB,createSpaceChild:GB,appendSpace:Cm,createCommandChild:VB,appendCommand:nt,setWrapConfig:UB,runWordWrap:XB,runVerticalWrap:ZB,runWrap:JB,renderContent:_B,forEachChild:tN,forEachRenderableChild:eN,forEachCharChild:iN,getChildren:rN,getActiveChildren:nN,getCharChildren:sN,getLastAppendedChildren:aN,getNearestChild:lN,getCharWorldPosition:hN,setToMinSize:uN,getCharChildIndex:dN,getCharChild:fN,getCharIndex:cN,setChildrenInteractiveEnable:pN,setInteractive:mN};Object.assign(CN,gN,xN,yN,QB,qB);var SN=CN;var $lt=Phaser.Utils.Objects.GetFastValue,jlt={},PP=class{constructor(t){this.pools=$lt(t,"pools",jlt)}free(t){if(!this.pools)return this;var i=t.type;return this.pools.hasOwnProperty(i)||(this.pools[i]=new hi),this.pools[i].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var i=0,s=t.length;i<s;i++)this.free(t[i]);return this}allocate(t){return!this.pools||!this.pools.hasOwnProperty(t)?null:this.pools[t].pop()}},TN=PP;var MP=Phaser.Utils.Objects.IsPlainObject,ui=Phaser.Utils.Objects.GetValue,wm=class extends Vi{constructor(t,i,s,n,o,r,a){MP(i)?(a=i,i=ui(a,"x",0),s=ui(a,"y",0),n=ui(a,"width",0),o=ui(a,"height",0),r=ui(a,"resolution",1)):MP(n)?(a=n,n=ui(a,"width",0),o=ui(a,"height",0),r=ui(a,"resolution",1)):MP(r)&&(a=r,r=ui(a,"resolution",1));var p=n===0?1:n,h=o===0?1:o;super(t,i,s,p,h,r),this.type="rexDynamicText",this.autoRound=!0,this.padding=_i(),this.wrapPadding=_i();var u=ui(a,"style",void 0);this.defaultTextStyle=new fm(null,u),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(ui(a,"testString","|M\xC9qgy")),this._textOX=0,this._textOY=0,this.background=new hB(this,ui(a,"background",void 0)),this.innerBounds=new uB(this,ui(a,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new TN(a),this.setFixedSize(n,o),this.setPadding(ui(a,"padding",0)),this.setWrapConfig(ui(a,"wrap",void 0)),this.setChildrenInteractiveEnable(ui(a,"childrenInteractive",!1));var f=ui(a,"text",void 0);f&&this.setText(f)}updateTexture(){return super.updateTexture(function(){this.renderContent()},this),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,i){return this.setFixedSize(t,i),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}};Object.assign(wm.prototype,SN);var mh=wm;var EN=mh;var Xd=EN;K.register("dynamicText",function(e,t,i,s,n){var o=new Xd(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.DynamicText",Xd);var gn={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var PN={hasProperty(e){var t=this.gameObject;if(t.hasOwnProperty(e))return!0;var i=t[e];return i!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(l){var t=l.property,i=l.value,s=l.duration,n=l.delay,o=l.ease,r=l.repeat,a=l.yoyo,p=l.from,h=l.complete,u=l.target;if(s===void 0&&(s=1e3),n===void 0&&(n=0),o===void 0&&(o="Linear"),r===void 0&&(r=0),a===void 0&&(a=!1),u===void 0&&(u=this.gameObject),p){var f=i;i=u[t],u[t]=f}var l={targets:u,duration:s,delay:n,ease:o,repeat:r,yoyo:a,onComplete:h};return l[t]=i,this.addTweenTask(t,l),this},addTweenTask(e,t){var i=this.tweens,s=i[e];s&&s.remove();var n=t.onComplete;return t.onComplete=function(){i[e].remove(),i[e]=null,n&&n(t.targets,e)},s=this.scene.tweens.add(t),s.timeScale=this.timeScale,i[e]=s,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e=this.tweens,t;for(var i in e)t=e[i],t&&t.remove(),e[i]=null;return this}};var MN={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var i=this.gameObject;return i[e].apply(i,t),this}};var wN={hasData(e){var t=this.gameObject;return t.data?t.data.has(e):!1},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};var bm=class{constructor(t,i,s){this.GOManager=t,this.tweens={},this.effects={},this.setGO(i,s)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,i){return t.goName=i,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=i,this.freeTweens(),this}setTimeScale(t){var i=this.tweens;for(var s in i){var n=i[s];n&&(n.timeScale=t)}return this}};Object.assign(bm.prototype,PN,MN,wN);var Rm=bm;var Zlt=function(e){for(var t in e)return!1;return!0},xn=Zlt;var Klt=function(e){return e&&e.charAt(0)!=="!"},Kr=Klt;var bN={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(Kr(e))return this.bobs[e];t===void 0&&(t=[]),e&&(e=e.substring(1));for(var i in this.bobs)e&&i===e||t.push(this.bobs[i]);return t},getFitst(e){e&&e.charAt(0)==="!"&&(e=e.substring(1));for(var t in this.bobs)if(!(e&&e===t))return this.bobs[t];return null},getGO(e,t){var i=this.get(e);if(i)if(Array.isArray(i)){t===void 0&&(t=[]);var s=i;return s.forEach(function(n){t.push(n.gameObject)}),t}else return i.gameObject;else return null},forEachGO(e,t){for(var i in this.bobs){var s=this.bobs[i].gameObject,n;if(t?n=e.call(t,s,i,this):n=e(s,i,this),n)break}return this},getAllGO(e){e===void 0&&(e=[]);for(var t in this.bobs){var i=this.bobs[t].gameObject;e.push(i)}return e}};var Qs=function(e){return e>>16&255},qs=function(e){return e>>8&255},_s=function(e){return e&255},wP=function(e,t){return t===void 0&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=e&255,t};var RN=function(e,t){return(t&255)<<16|e&65535},IN=function(e,t){return(t&255)<<8|e&16711935},AN=function(e,t){return t&255|e&16776960},ON=function(e,t,i,s){return(t&255)<<16|(i&255)<<8|s&255};var Jlt=function(e,t){if(e.hasOwnProperty("tintR"))return e;t===void 0&&(t=16777215);var i=Qs(t),s=qs(t),n=_s(t);return Object.defineProperty(e,"tint",{get:function(){return t},set:function(o){o=Math.floor(o)&16777215,e.setTint&&e.setTint(o),t!==o&&(t=o,i=Qs(t),s=qs(t),n=_s(t))}}),Object.defineProperty(e,"tintR",{get:function(){return i},set:function(o){o=Math.floor(o)&255,i!==o&&(i=o,e.tint=RN(t,o))}}),Object.defineProperty(e,"tintG",{get:function(){return s},set:function(o){o=Math.floor(o)&255,s!==o&&(s=o,e.tint=IN(t,o))}}),Object.defineProperty(e,"tintB",{get:function(){return n},set:function(o){o=Math.floor(o)&255,n!==o&&(n=o,e.tint=AN(t,o))}}),Object.defineProperty(e,"tintGray",{get:function(){return Math.floor((i+s+n)/3)},set:function(o){o=Math.floor(o)&255,(i!==o||s!==o||n!==o)&&(i=o,s=o,n=o,e.tint=ON(t,o,o,o))}}),e.tint=t,e},DN=Jlt;var Qlt=Phaser.Events.EventEmitter,qlt=function(e){if(e.events)return e;var t=new Qlt,i=e.x;Object.defineProperty(e,"x",{get:function(){return i},set:function(r){i!==r&&(i=r,t.emit("update",e))}});var s=e.y;Object.defineProperty(e,"y",{get:function(){return s},set:function(r){s!==r&&(s=r,t.emit("update",e))}});var n=e.width;Object.defineProperty(e,"width",{get:function(){return n},set:function(r){n!==r&&(n=r,t.emit("update",e))}});var o=e.height;return Object.defineProperty(e,"height",{get:function(){return o},set:function(r){o!==r&&(o=r,t.emit("update",e))}}),e.events=t,e},LN=qlt;var _lt=function(e,t,i,s,n,o){return o===void 0?o={}:o===!0&&(o=tht),typeof i!="number"&&(i=0,s=0),o.x=n.x+n.width*e+i,o.y=n.y+n.height*t+s,o},tht={},FN=_lt;var eht=function(e,t,i,s,n,o,r){if(e.hasOwnProperty("vp"))return e;typeof i=="function"&&(r=i,i=void 0),typeof n=="function"&&(r=n,n=void 0),i===void 0&&(i=.5),s===void 0&&(s=.5),n===void 0&&(n=0),o===void 0&&(o=0),r===void 0&&(r=FN),LN(t);var a=t.events;e.vp=t;var p=function(){r(i,s,n,o,t,e)};a.on("update",p),e.once("destroy",function(){a.off("update",p),e.vp=void 0}),Object.defineProperty(e,"vpx",{get:function(){return i},set:function(h){i!==h&&(i=h,p())}}),Object.defineProperty(e,"vpy",{get:function(){return s},set:function(h){s!==h&&(s=h,p())}}),Object.defineProperty(e,"vpxOffset",{get:function(){return n},set:function(h){n!==h&&(n=h,p())}}),Object.defineProperty(e,"vpyOffset",{get:function(){return o},set:function(h){o!==h&&(o=h,p())}}),p()},BN=eht;var iht=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},jt=iht;var rht=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var i=e._effectSwitchNames,s=0,n=i.length;s<n;s++)e[i[s]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},kt=rht;var nht=function(e){if(ct(e,"barrel"))return e;var t=jt(e);if(!t)return e;var i;return Object.defineProperty(e,"barrel",{get:function(){return i},set:function(s){i!==s&&(i=s,i===null||i===!1?e._barrelEffect&&(t.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=t.addBarrel()),e._barrelEffect.amount=i))}}),e.barrel=null,kt(e,"barrel"),e},Im=nht;var sht=function(e,t,i){if(ct(e,t))return e;var s=jt(e);if(!s)return e;var n=`_${t}Effect`,o;return Object.defineProperty(e,t,{get:function(){return o},set:function(r){if(o!==r)if(o=r,o===null||o===!1)e[n]&&(s.remove(e[n]),e[n]=void 0);else{e[n]||(e[n]=s.addColorMatrix());var a=e[n];a[t](i===1?r:void 0)}}}),e[t]=null,kt(e,t),e},Wt=sht;var aht=function(e){return Wt(e,"blackWhite"),e},Am=aht;var oht=function(e){if(ct(e,"bloomColor"))return e;var t=jt(e);if(!t)return e;var i,s=1,n=1,o=1,r=1,a=4;return Object.defineProperty(e,"bloomColor",{get:function(){return i},set:function(p){i!==p&&(i=p,i===null||i===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(i,s,n,o,r,a),t.setPadding(Math.max(s,n)+1)),e._bloom.color=i))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return s},set:function(p){if(s!==p&&(s=p,e._bloom)){var h=Math.max(s,n);t.setPadding(h+1),e._bloom.offsetX=s}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return n},set:function(p){if(n!==p&&(n=p,e._bloom)){var h=Math.max(s,n);t.setPadding(h+1),e._bloom.offsetY=n}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return o},set:function(p){o!==p&&(o=p,e._bloom&&(e._bloom.blurStrength=o))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return r},set:function(p){r!==p&&(r=p,e._bloom&&(e._bloom.strength=r))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return a},set:function(p){a!==p&&(a=p,e._bloom&&(e._bloom.steps=a))}}),e.bloomColor=null,kt(e,"bloomColor"),e},Om=oht;var lht=function(e){if(ct(e,"blurColor"))return e;var t=jt(e);if(!t)return e;var i,s=0,n=1,o=1,r=1,a=4;return Object.defineProperty(e,"blurColor",{get:function(){return i},set:function(p){i!==p&&(i=p,i===null||i===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(s,n,o,r,i,a),t.setPadding(Math.max(n,o)+1)),e._blur.color=i))}}),Object.defineProperty(e,"blurQuality",{get:function(){return s},set:function(p){s!==p&&(s=p,e._blur&&(e._blur.quality=s))}}),Object.defineProperty(e,"blurX",{get:function(){return n},set:function(p){if(n!==p&&(n=p,e._blur)){var h=Math.max(n,o);t.setPadding(h+1),e._blur.x=n}}}),Object.defineProperty(e,"blurY",{get:function(){return o},set:function(p){if(o!==p&&(o=p,e._blur)){var h=Math.max(n,o);t.setPadding(h+1),e._blur.y=o}}}),Object.defineProperty(e,"blurStrength",{get:function(){return r},set:function(p){r!==p&&(r=p,e._blur&&(e._blur.strength=r))}}),Object.defineProperty(e,"blurSteps",{get:function(){return a},set:function(p){a!==p&&(a=p,e._blur&&(e._blur.steps=a))}}),e.blurColor=null,kt(e,"blurColor"),e},Dm=lht;var hht=function(e){if(ct(e,"bokehRadius"))return e;var t=jt(e);if(!t)return e;var i,s=1,n=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return i},set:function(o){i!==o&&(i=o,i===null||i===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(i,s,n)),e._bokeh.radius=i))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return s},set:function(o){s!==o&&(s=o,e._bokeh&&(e._bokeh.amount=s))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return n},set:function(o){n!==o&&(n=o,e._bokeh&&(e._bokeh.contrast=n))}}),e.bokehRadius=null,kt(e,"bokehRadius"),e},Lm=hht;var uht=function(e){return Wt(e,"brightness",1),e},Fm=uht;var dht=function(e){return Wt(e,"brown"),e},Bm=dht;var fht=function(e){if(ct(e,"circleColor"))return e;var t=jt(e);if(!t)return e;var i,s=8,n=0,o=.4,r=1,a=.005;return Object.defineProperty(e,"circleColor",{get:function(){return i},set:function(p){i!==p&&(i=p,i===null||i===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(s,i,n,r,a),e.circleBackgroundAlpha=o),e._circle.color=i))}}),Object.defineProperty(e,"circleThickness",{get:function(){return s},set:function(p){s!==p&&(s=p,e._circle&&(e._circle.thickness=s))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return n},set:function(p){n!==p&&(n=p,e._circle&&(e._circle.backgroundColor=n))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return o},set:function(p){o!==p&&(o=p,e._circle&&(e._circle.glcolor2[3]=o))}}),Object.defineProperty(e,"circleScale",{get:function(){return r},set:function(p){r!==p&&(r=p,e._circle&&(e._circle.scale=r))}}),Object.defineProperty(e,"circleFeather",{get:function(){return a},set:function(p){a!==p&&(a=p,e._circle&&(e._circle.feather=a))}}),e.circleColor=null,kt(e,"circleColor"),e},Nm=fht;var cht=function(e){return Wt(e,"contrast",1),e},Gm=cht;var pht=function(e){return Wt(e,"desaturate",1),e},km=pht;var vht=function(e){return Wt(e,"desaturateLuminance"),e},Vm=vht;var mht=function(e){if(ct(e,"displacementKey"))return e;var t=jt(e);if(!t)return e;var i,s=.005,n=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return i},set:function(o){i!==o&&(i=o,i===null||i===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(i,s,n)),e._displacement.setTexture(i)))}}),Object.defineProperty(e,"displacementX",{get:function(){return s},set:function(o){s!==o&&(s=o,e._displacement&&(e._displacement.x=s))}}),Object.defineProperty(e,"displacementY",{get:function(){return n},set:function(o){n!==o&&(n=o,e._displacement&&(e._displacement.y=n))}}),e.displacementKey=null,kt(e,"displacementKey"),e},Um=mht;var ght=function(e){if(ct(e,"glowColor"))return e;var t=jt(e);if(!t)return e;var i,s=4,n=0;return Object.defineProperty(e,"glowColor",{get:function(){return i},set:function(o){i!==o&&(i=o,i===null||i===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(i,s,n),t.setPadding(s+1)),e._glow.color=i))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return s},set:function(o){s!==o&&(s=o,e._glow&&(t.setPadding(s+1),e._glow.outerStrength=s))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return n},set:function(o){n!==o&&(n=o,e._glow&&(e._glow.innerStrength=n))}}),e.glowColor=null,kt(e,"glowColor"),e},zm=ght;var xht=function(e){if(ct(e,"gradientColor"))return e;var t=jt(e);if(!t)return e;var i,s,n=.5,o=0,r=0,a=0,p=1,h=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[i,s]},set:function(u){var f,l;u===null||u===!1?(f=null,l=null):(f=u[0],l=u[1]),!(i===f&&s===l)&&(i=f,s=l,i===null||i===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(i,s,n,o,r,a,p,h)),e._gradient.color1=i,e._gradient.color2=s))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return i},set:function(u){if(u===null||u===!1){e.gradientColor=u;return}i!==u&&(i=u,e._gradient&&(e._gradient.color1=i))}}),Object.defineProperty(e,"gradientColor2",{get:function(){return s},set:function(u){if(u===null||u===!1){e.gradientColor=u;return}s!==u&&(s=u,e._gradient&&(e._gradient.color2=s))}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return n},set:function(u){n!==u&&(n=u,e._gradient&&(e._gradient.alpha=n))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return o},set:function(u){o!==u&&(o=u,e._gradient&&(e._gradient.fromX=o))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return r},set:function(u){r!==u&&(r=u,e._gradient&&(e._gradient.fromY=r))}}),Object.defineProperty(e,"gradientToX",{get:function(){return a},set:function(u){a!==u&&(a=u,e._gradient&&(e._gradient.toX=a))}}),Object.defineProperty(e,"gradientToY",{get:function(){return p},set:function(u){p!==u&&(p=u,e._gradient&&(e._gradient.toY=p))}}),Object.defineProperty(e,"gradientSize",{get:function(){return h},set:function(u){h!==u&&(h=u,e._gradient&&(e._gradient.size=h))}}),e.gradientColor=null,kt(e,"gradientColor"),e},Wm=xht;var yht=function(e){return Wt(e,"grayscale",1),e},Hm=yht;var Cht=function(e){return Wt(e,"hue",1),e},Ym=Cht;var Sht=function(e){return Wt(e,"kodachrome"),e},Xm=Sht;var Tht=function(e){return Wt(e,"lsd"),e},$m=Tht;var Eht=function(e){return Wt(e,"negative"),e},jm=Eht;var Pht=function(e){if(ct(e,"pixelate"))return e;var t=jt(e);if(!t)return e;var i;return Object.defineProperty(e,"pixelate",{get:function(){return i},set:function(s){i!==s&&(i=s,i===null||i===!1?e._pixelateEffect&&(t.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=t.addPixelate()),e._pixelateEffect.amount=i))}}),e.pixelate=null,kt(e,"pixelate"),e},Zm=Pht;var Mht=function(e){return Wt(e,"polaroid"),e},Km=Mht;var wht=function(e){if(ct(e,"revealLeft"))return e;var t=jt(e);if(!t)return e;var i,s,n,o,r=.1,a=function(){i=null,s=null,n=null,o=null},p=function(h){h._revealEffect&&(t.remove(h._revealEffect),h._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return i},set:function(h){i!==h&&(a(),i=h,i===null||i===!1?p(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=i))}}),Object.defineProperty(e,"revealRight",{get:function(){return s},set:function(h){s!==h&&(a(),s=h,s===null||s===!1?p(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealUp",{get:function(){return n},set:function(h){n!==h&&(a(),n=h,n===null||n===!1?p(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=n))}}),Object.defineProperty(e,"revealDown",{get:function(){return o},set:function(h){o!==h&&(a(),o=h,o===null||o===!1?p(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=o))}}),Object.defineProperty(e,"revealWidth",{get:function(){return r},set:function(h){r!==h&&(r=h,e._revealEffect&&(e._revealEffect.wipeWidth=r))}}),e.revealLeft=null,kt(e,"revealLeft"),kt(e,"revealRight"),kt(e,"revealUp"),kt(e,"revealDown"),e},Jm=wht;var bht=function(e){return Wt(e,"saturate",1),e},Qm=bht;var Rht=function(e){return Wt(e,"sepia"),e},qm=Rht;var Iht=function(e){if(ct(e,"shadowColor"))return e;var t=jt(e);if(!t)return e;var i,s=0,n=0,o=.1,r=1,a=6,p=1;return Object.defineProperty(e,"shadowColor",{get:function(){return i},set:function(h){i!==h&&(i=h,i===null||i===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(s,n,o,r,i,a,p)),e._shadow.color=i))}}),Object.defineProperty(e,"shadowX",{get:function(){return s},set:function(h){s!==h&&(s=h,e._shadow&&(e._shadow.x=s))}}),Object.defineProperty(e,"shadowY",{get:function(){return n},set:function(h){n!==h&&(n=h,e._shadow&&(e._shadow.y=n))}}),Object.defineProperty(e,"decay",{get:function(){return o},set:function(h){o!==h&&(o=h,e._shadow&&(e._shadow.decay=o))}}),Object.defineProperty(e,"shadowPower",{get:function(){return r},set:function(h){r!==h&&(r=h,e._shadow&&(e._shadow.power=r))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return a},set:function(h){a!==h&&(a=h,e._shadow&&(e._shadow.samples=a))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return p},set:function(h){p!==h&&(p=h,e._shadow&&(e._shadow.intensity=p))}}),e.shadowColor=null,kt(e,"shadowColor"),e},_m=Iht;var Aht=function(e){return Wt(e,"shiftToBGR"),e},tg=Aht;var Oht=function(e){if(ct(e,"shineSpeed"))return e;var t=jt(e);if(!t)return e;var i,s=.5,n=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return i},set:function(o){i!==o&&(i=o,i===null||i===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(i,s,n)),e._shine.speed=i))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return s},set:function(o){s!==o&&(s=o,e._shine&&(e._shine.lineWidth=s))}}),Object.defineProperty(e,"shineGradient",{get:function(){return n},set:function(o){n!==o&&(n=o,e._shine&&(e._shine.gradient=n))}}),e.shineSpeed=null,kt(e,"shineSpeed"),e},eg=Oht;var Dht=function(e){return Wt(e,"technicolor"),e},ig=Dht;var Lht=function(e){if(ct(e,"tiltShiftRadius"))return e;var t=jt(e);if(!t)return e;var i,s=1,n=.2,o=1,r=1,a=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return i},set:function(p){i!==p&&(i=p,i===null||i===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(i,s,n,o,r,a)),e._tiltShift.radius=i))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return s},set:function(p){s!==p&&(s=p,e._tiltShift&&(e._tiltShift.amount=s))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return n},set:function(p){n!==p&&(n=p,e._tiltShift&&(e._tiltShift.contrast=n))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return o},set:function(p){o!==p&&(o=p,e._tiltShift&&(e._tiltShift.blurX=o))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return r},set:function(p){r!==p&&(r=p,e._tiltShift&&(e._tiltShift.blurY=r))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return a},set:function(p){a!==p&&(a=p,e._tiltShift&&(e._tiltShift.strength=a))}}),e.tiltShiftRadius=null,kt(e,"tiltShiftRadius"),e},rg=Lht;var Fht=function(e){if(ct(e,"vignetteRadius"))return e;var t=jt(e);if(!t)return e;var i,s=.5,n=.5,o=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return i},set:function(r){i!==r&&(i=r,i===null||i===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(s,n,i,o)),e._vignette.radius=i))}}),Object.defineProperty(e,"vignetteX",{get:function(){return s},set:function(r){s!==r&&(s=r,e._vignette&&(e._vignette.x=s))}}),Object.defineProperty(e,"vignetteY",{get:function(){return n},set:function(r){n!==r&&(n=r,e._vignette&&(e._vignette.y=n))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return o},set:function(r){o!==r&&(o=r,e._vignette&&(e._vignette.strength=o))}}),e.vignetteRadius=null,kt(e,"vignetteRadius"),e},ng=Fht;var Bht=function(e){return Wt(e,"vintagePinhole"),e},sg=Bht;var Nht=function(e){if(ct(e,"wipeLeft"))return e;var t=jt(e);if(!t)return e;var i,s,n,o,r=.1,a=function(){i=null,s=null,n=null,o=null},p=function(h){h._wipeEffect&&(t.remove(h._wipeEffect),h._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return i},set:function(h){i!==h&&(a(),i=h,i===null||i===!1?p(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=i))}}),Object.defineProperty(e,"wipeRight",{get:function(){return s},set:function(h){s!==h&&(a(),s=h,s===null||s===!1?p(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeUp",{get:function(){return n},set:function(h){n!==h&&(a(),n=h,n===null||n===!1?p(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=n))}}),Object.defineProperty(e,"wipeDown",{get:function(){return o},set:function(h){o!==h&&(a(),o=h,o===null||o===!1?p(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=o))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return r},set:function(h){r!==h&&(r=h,e._wipeEffect&&(e._wipeEffect.wipeWidth=r))}}),e.wipeLeft=null,kt(e,"wipeLeft"),kt(e,"wipeRight"),kt(e,"wipeUp"),kt(e,"wipeDown"),e},ag=Nht;var kht={barrel:Im,blackWhite:Am,bloom:Om,blur:Dm,bokeh:Lm,brightness:Fm,brown:Bm,circle:Nm,contrast:Gm,desaturate:km,desaturateLuminance:Vm,displacement:Um,glow:zm,gradient:Wm,grayscale:Hm,hue:Ym,kodachrome:Xm,lsd:$m,negative:jm,pixelate:Zm,polaroid:Km,reveal:Jm,saturate:Qm,sepia:qm,shadow:_m,shiftToBGR:tg,shine:eg,technicolor:ig,tiltShift:rg,vignette:ng,vintagePinhole:sg,wipe:ag},$d=kht;var Vht=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var i=t,t={},s=0,n=i.length;s<n;s++)t[i[s]]=!0;if(t===!0)for(var o in $d)$d[o](e);else for(var o in t)t[o]&&$d[o]&&$d[o](e);return e},gh=Vht;var Uht=Phaser.Utils.Array.Remove,NN={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&DN(t),this.viewportCoordinateEnable&&BN(t,this.viewport),this.effectPropertiesConfig&&gh(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){Uht(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var i=new this.BobClass(this,t,e);return this.bobs[e]=i,this},add(e,...t){var i=this.createGameObjectCallback,s=this.createGameObjectScope,n=i.call(s,this.scene,...t);this.addGO(e,n),this.gameObjectDepth!=null&&n.setDepth(this.gameObjectDepth);var o=this.get(e);return this.fadeBob(o,0,1),this}};var GN={remove(e,t){var i=this.get(e);if(i)Array.isArray(i)||(i=[i]);else return this;var s=this;return i.forEach(function(n){delete s.bobs[n.name];var o=n.gameObject;s.removedGOs.push(o),o.setName(),t?n.destroy():s.fadeBob(n,void 0,0,function(){n.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var i in t)e&&t[i].destroy(),delete t[i];return this.removedGOs.length=0,this}};var kN={hasProperty(e,t){var i=Kr(e)?this.get(e):this.getFitst(e);return i?i.hasProperty(t):!1},getProperty(e,t){var i=Kr(e)?this.get(e):this.getFitst(e);if(i)return i.getProperty(t)},isNumberProperty(e,t){var i=this.getProperty(e,t);return typeof i=="number"},setProperty(e,t,i){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;return this.symbols&&typeof i=="string"&&this.isNumberProperty(e,t)&&(i in this.symbols?i=this.symbols[i]:console.warn(`Can't find symbol ${i}`)),s.forEach(function(n){n.setProperty(t,i)}),this},easeProperty(e,t){var i=this.get(e);if(i)Array.isArray(i)||(i=[i]);else return this;var s=t.value,n=t.property;return this.symbols&&typeof s=="string"&&this.isNumberProperty(e,n)&&s in this.symbols&&(t.value=this.symbols[s]),i.forEach(function(o){o.easeProperty(t)}),this},hasTweenTask(e,t){var i=Kr(e)?this.get(e):this.getFitst(e);return i?i.tweens.hasOwnProperty(t):!1},getTweenTask(e,t){var i=Kr(e)?this.get(e):this.getFitst(e);return i&&i.tweens[t]||null}};var VN={hasMethod(e,t){var i=Kr(e)?this.get(e):this.getFitst(e);return i?i.hasMethod(t):!1},call(e,t,...i){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;return s.forEach(function(n){n.call(t,...i)}),this}};var UN={hasData(e,t){var i=Kr(e)?this.get(e):this.getFitst(e);return i?i.hasData(t):!1},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,i){var s=this.get(e);if(s)Array.isArray(s)||(s=[s]);else return this;return s.forEach(function(n){n.setData(t,i)}),this}};var zN=0,WN=1,bP=2,HN=3,YN=4,RP=5,zht={tint:zN,alpha:WN,revealUp:bP,revealDown:HN,revealLeft:YN,revealRight:RP},XN={setGOFadeMode(e){return typeof e=="string"&&(e=zht[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===zN)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===WN)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=bP&&this.fadeMode<=RP&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,i,s){var n=e.gameObject;if(this.useTintFadeEffect(n))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*i),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s});else if(this.useAlphaFadeEffect(n))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s});else if(this.useRevealEffect(n)){gh(n,"reveal");var o;switch(this.fadeMode){case bP:o="revealUp";break;case HN:o="revealDown";break;case YN:o="revealLeft";break;case RP:o="revealRight";break}t===void 0&&(t=0),n[o]=t,e.easeProperty({property:o,value:i,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s}),e.getTweenTask(o).once("complete",function(){n[o]=null})}else s&&s(n);return this}};var mt=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},gt=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};var $N=Phaser.Geom.Rectangle,yn=Phaser.Math.Vector2,Wht=Phaser.Math.RotateAround,Hht=Phaser.GameObjects.Container,xh=function(e,t){if(t===void 0?t=new $N:t===!0&&(IP===void 0&&(IP=new $N),t=IP),e.getBounds&&!(e instanceof Hht))return e.getBounds(t);var i,s,n,o,r,a,p,h;if(e.parentContainer){var u=e.parentContainer.getBoundsTransformMatrix();ls(e,t),u.transformPoint(t.x,t.y,t),i=t.x,s=t.y,po(e,t),u.transformPoint(t.x,t.y,t),n=t.x,o=t.y,vo(e,t),u.transformPoint(t.x,t.y,t),r=t.x,a=t.y,og(e,t),u.transformPoint(t.x,t.y,t),p=t.x,h=t.y}else ls(e,t),i=t.x,s=t.y,po(e,t),n=t.x,o=t.y,vo(e,t),r=t.x,a=t.y,og(e,t),p=t.x,h=t.y;return t.x=Math.min(i,n,r,p),t.y=Math.min(s,o,a,h),t.width=Math.max(i,n,r,p)-t.x,t.height=Math.max(s,o,a,h)-t.y,t},IP=void 0,ls=function(e,t,i){return t===void 0?t=new yn:t===!0&&(Ii===void 0&&(Ii=new yn),t=Ii),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-mt(e)*e.originX,t.y=e.y-gt(e)*e.originY,jd(e,t,i))},po=function(e,t,i){return t===void 0?t=new yn:t===!0&&(Ii===void 0&&(Ii=new yn),t=Ii),e.getTopRight?e.getTopRight(t):(t.x=e.x-mt(e)*e.originX+mt(e),t.y=e.y-gt(e)*e.originY,jd(e,t,i))},vo=function(e,t,i){return t===void 0?t=new yn:t===!0&&(Ii===void 0&&(Ii=new yn),t=Ii),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-mt(e)*e.originX,t.y=e.y-gt(e)*e.originY+gt(e),jd(e,t,i))},og=function(e,t,i){return t===void 0?t=new yn:t===!0&&(Ii===void 0&&(Ii=new yn),t=Ii),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-mt(e)*e.originX+mt(e),t.y=e.y-gt(e)*e.originY+gt(e),jd(e,t,i))};var AP=function(e,t,i){t===void 0?t=new yn:t===!0&&(Ii===void 0&&(Ii=new yn),t=Ii);var s=mt(e),n=gt(e);return t.x=e.x+s*(.5-e.originX),t.y=e.y+n*(.5-e.originY),jd(e,t,i)},Ii=void 0,jd=function(e,t,i){if(i===void 0&&(i=!1),e.rotation!==0&&Wht(t,e.x,e.y,e.rotation),i&&e.parentContainer){var s=e.parentContainer.getBoundsTransformMatrix();s.transformPoint(t.x,t.y,t)}return t};var Zd=Phaser.Utils.Objects.GetValue,Yht=function(e,t,i){var s,n,o,r,a;if(typeof i=="number"?s=i:(s=Zd(i,"color"),n=Zd(i,"lineWidth"),o=Zd(i,"fillColor"),r=Zd(i,"fillAlpha",1),a=Zd(i,"padding",0)),Array.isArray(e))for(var p=0,h=e.length;p<h;p++)jN(e[p],t,s,n,o,r,a);else jN(e,t,s,n,o,r,a)},jN=function(e,t,i,s,n,o,r){var a=e.getBounds||e.width!==void 0&&e.height!==void 0;if(a){i===void 0&&(i=16777215),s===void 0&&(s=1),n===void 0&&(n=null),o===void 0&&(o=1),r===void 0&&(r=0);var p=ls(e,yh[0]);p.x-=r,p.y-=r;var h=po(e,yh[1]);h.x+=r,h.y-=r;var u=og(e,yh[2]);u.x+=r,u.y+=r;var f=vo(e,yh[3]);f.x-=r,f.y+=r,n!==null&&t.fillStyle(n,o).fillPoints(yh,!0,!0),i!==null&&t.lineStyle(s,i).strokePoints(yh,!0,!0)}},yh=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],lg=Yht;var Xht=function(e,t){return this.forEachGO(function(i){i.drawBounds?i.drawBounds(e,t):lg(i,e,t)}),this},ZN=Xht;var $ht=function(e,t){var i=e.cameras,s;if(t===void 0)s=i.main;else{var n=typeof t;switch(n){case"string":s=i.getCamera(t);break;case"number":s=i.cameras[t];break;default:s=t;break}}return s},hg=$ht;var KN={setCamera(e,t){var i=this.get(e);if(!i)return this;var s=hg(this.scene,t);return s?(i.gameObject.cameraFilter=4294967295^s.id,i.camera=s,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}};var JN={drawGameObjectsBounds:ZN};Object.assign(JN,bN,NN,GN,kN,VN,UN,XN,KN);var QN=JN;var jht=Phaser.Cameras.Scene2D.BaseCamera,Zht=function(e){return e instanceof jht},qN=Zht;var _N=Phaser.Geom.Rectangle,Kht=function(e,t,i){return qN(t)||(i=t,t=void 0),i===void 0?i=new _N:i===!0&&(i=Jht),t?e.scale.getViewPort(t,i):e.scale.getViewPort(i)},Jht=new _N,Sr=Kht;var zi=Phaser.Utils.Objects.GetValue,ug=class{constructor(t,i){this.scene=t,this.BobClass=zi(i,"BobClass",Rm),this.setCreateGameObjectCallback(zi(i,"createGameObject"),zi(i,"createGameObjectScope")),this.setEventEmitter(zi(i,"eventEmitter",void 0)),this.setGameObjectDepth(zi(i,"depth",void 0));var s=zi(i,"fade",500);typeof s=="number"?(this.setGOFadeMode(),this.setGOFadeTime(s)):(this.setGOFadeMode(zi(s,"mode")),this.setGOFadeTime(zi(s,"time",500)));var n=zi(i,"viewportCoordinate",!1);n!==!1?(this.setViewportCoordinateEnable(zi(i,"enable",!0)),this.setViewport(zi(n,"viewport"))):this.setViewportCoordinateEnable(!1);var o=zi(i,"effectProperties",!1);this.setEffectPropertiesConfig(o),this.setSymbols(zi(i,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=zi(i,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var i=this.bobs;for(var s in i)i[s].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,i){return this.createGameObjectCallback=t,this.createGameObjectScope=i,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=Sr(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return xn(this.bobs)&&this.removedGOs.length===0}};Object.assign(ug.prototype,gn,QN);var hs=ug;var Qht=Phaser.GameObjects.GameObject,qht=Phaser.GameObjects.Layer,_ht=function(e){return e instanceof Qht||e instanceof qht},de=_ht;var tut=Phaser.GameObjects.Layer,eut=function(e){return e instanceof tut},ta=eut;var iut=function(e){var t=e.displayList;return ta(t)?t:null},dg=iut;var rut=function(e,t){if(e.length<=1)return e;t===void 0&&(t=!1);for(var i,s=0,n=e.length;s<n;s++){var o=e[s];if(o.displayList?i=o.displayList:o.parentContainer&&(i=o.parentContainer.list),i)break}return i||(i=o.scene.sys.displayList),i.depthSort&&(i.depthSort(),i=i.list),t?e.sort(function(r,a){return i.indexOf(a)-i.indexOf(r)}):e.sort(function(r,a){return i.indexOf(r)-i.indexOf(a)}),e},mi=rut;var tG={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),mi(e,!1),e},addToLayer(e,t){var i=this.getGO(e);if(!i){console.warn(`[LayerManager] Can't get layer "${e}"`);return}Array.isArray(t)||(t=[t]);for(var s=0,n=t.length;s<n;s++){var o=t[s];o.isRexContainerLite?o.addToLayer(i):i.add(o)}return i.scrollFactorX!==void 0&&o.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),i=t[t.length-1];return this.addToLayer(i.goName,e),this},removeFromLayer(e,t,i){var s=this.getGO(e);if(!s){console.warn(`[LayerManager] Can't get layer "${e}"`);return}return i===void 0&&(i=!0),t.isRexContainerLite?t.removeFromLayer(s,i):(s.remove(t),i&&t.addToDisplayList()),this},clearLayer(e,t){t===void 0&&(t=!0);var i=this.getGO(e);if(!i){console.warn(`Can't get layer "${e}"`);return}if(t)for(var s=i.getAll(),n=0,o=s.length;n<o;n++)s[n].destroy();else i.removeAll();return this}};var eG={setScrollFactor(e,t,i){i===void 0&&(i=t);var s=this.getLayer(e);if(!s)return this;s.scrollFactorX=t,s.scrollFactorY=i;for(var n=s.getAll(),o=0,r=n.length;o<r;o++)n[o].setScrollFactor(t,i);return this}};var fg=Phaser.Utils.Array,nut=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(fg.BringToTop(e,this),this):this},sut=function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(fg.SendToBack(e,this),this):this},OP=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&e.parentContainer.add(this)):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&e.displayList.add(this)),t?(fg.MoveBelow(t,this,e),this):this},DP=function(e){var t;return e.parentContainer?(t=e.parentContainer.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e))):e.displayList&&(t=e.displayList.list,t.indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e))),t?(fg.MoveAbove(t,this,e),this):this},Kd={bringMeToTop:nut,sendMeToBack:sut,moveMyDepthBelow:OP,moveMyDepthAbove:DP};var iG={bringLayerToTop(e){var t=this.getLayer(e);return t?(Kd.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(Kd.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var i=this.getLayer(e),s=this.getLayer(t);return!i||!s?this:(Kd.moveMyDepthBelow.call(i,s),this)},moveLayerAbove(e,t){if(e===t)return this;var i=this.getLayer(e),s=this.getLayer(t);return!i||!s?this:(Kd.moveMyDepthAbove.call(i,s),this)}};var aut=hs.prototype.setCamera,rG={setCamera(e,t){var i=hg(this.scene,t);return i||(i=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),aut.call(this,e,i),this}};var nG={};Object.assign(nG,tG,eG,iG,rG);var sG=nG;var cg=Phaser.Utils.Objects.GetValue,pg=class extends hs{constructor(t,i){i===void 0?i={}:Array.isArray(i)&&(i={layers:i}),i.hasOwnProperty("fade")||(i.fade=0),i.viewportCoordinate=!1,super(t,i);var s=cg(i,"rootLayer");this.setRootLayer(s);var n=cg(i,"layers");if(n)for(var o=0,r=n.length;o<r;o++){var a=n[o];if(typeof a=="string")this.add(a);else{var p=a.name;this.add(p);var h=a.scrollFactor,u=cg(a,"scrollFactorX",h),f=cg(a,"scrollFactorY",h);u!==void 0&&this.setScrollFactor(p,u,f),this.setCamera(p,a.cameraName)}}}setCreateGameObjectCallback(t,i){return t||(t=out),super.setCreateGameObjectCallback(t,i),this}setRootLayer(t){if(t===this.rootLayer)return this;var i=this.getAllGO();return t?t.add(i):this.scene.displayList.add(i),this.rootLayer=t,this}addGO(t,i){return super.addGO(t,i),i.name=t,this.rootLayer&&this.rootLayer.add(i),this}get(t,i){if(de(t)){var s=dg(t);if(!s||(t=s.name,!t))return}return super.get(t,i)}},out=function(e,t){var i=e.add.layer();return t!==void 0&&i.setDepth(t),i};Object.assign(pg.prototype,sG);var vg=pg;var lut=function(e){return Zr(e)?e.sys.sound:e.sound},aG=lut;var hut=function(e){return this.sound.game.cache.audio.has(e)},oG=hut;var uut=function(e){return e==null||typeof e!="object"?null:Zr(e)?e:e.scene&&Zr(e.scene)?e.scene:e.parent&&e.parent.scene&&Zr(e.parent.scene)?e.parent.scene:null},Tr=uut;var dut=Phaser.Utils.Objects.GetValue,mg=class{constructor(t,i){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(dut(i,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}setParent(t){return this.parent=t,this.scene=Tr(t),this.game=Ki(t),this}};Object.assign(mg.prototype,gn);var Et=mg;var fut=Phaser.Utils.Objects.GetValue,LP=class extends Et{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(fut(i,"tickingMode",1))}boot(){this.tickingMode===2&&!this.tickingState&&this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=cut[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}},cut={no:0,lazy:1,always:2},ea=LP;var put=Phaser.Utils.Objects.GetValue,FP=class extends ea{constructor(t,i){super(t,i);var s=this.scene?"update":"step";this.tickEventName=put(i,"tickEventName",s),this.isSceneTicker=!vut(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}},vut=function(e){return e==="step"||e==="poststep"},lG=FP;var us=Phaser.Utils.Objects.GetValue,hG=Phaser.Math.Clamp,BP=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=us(t,"state",Jd),this.timeScale=us(t,"timeScale",1),this.delay=us(t,"delay",0),this.repeat=us(t,"repeat",0),this.repeatCounter=us(t,"repeatCounter",0),this.repeatDelay=us(t,"repeatDelay",0),this.duration=us(t,"duration",0),this.nowTime=us(t,"nowTime",0),this.justRestart=us(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return t===void 0&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(t){return this.repeatDelay=t,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Ch:Qd,this.repeatCounter=0,this}stop(){return this.state=Jd,this}update(t,i){this.state===Jd||this.state===gg||i===0||this.timeScale===0||(this.nowTime+=i*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=uG)):(this.nowTime=this.duration,this.state=gg):this.nowTime>=0&&(this.state=Ch))}get t(){var t;switch(this.state){case Jd:case Qd:case uG:t=0;break;case Ch:t=this.nowTime/this.duration;break;case gg:t=1;break}return hG(t,0,1)}set t(t){t=hG(t,-1,1),t<0?(this.state=Qd,this.nowTime=-this.delay*t):(this.state=Ch,this.nowTime=this.duration*t,t===1&&this.repeat!==0&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Jd}get isDelay(){return this.state===Qd}get isCountDown(){return this.state===Ch}get isRunning(){return this.state===Qd||this.state===Ch}get isDone(){return this.state===gg}get isOddIteration(){return(this.repeatCounter&1)===1}get isEvenIteration(){return(this.repeatCounter&1)===0}},Jd=0,Qd=1,Ch=2,uG=3,gg=-1,xg=BP;var NP=class extends lG{constructor(t,i){super(t,i),this.timer=new xg}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}},dG=NP;var qd=Phaser.Utils.Objects.GetValue,fG=Phaser.Utils.Objects.GetAdvancedValue,mut=Phaser.Tweens.Builders.GetEaseFunction,GP=class extends dG{resetFromJSON(t){return this.timer.resetFromJSON(qd(t,"timer")),this.setEnable(qd(t,"enable",!0)),this.setTarget(qd(t,"target",this.parent)),this.setDelay(fG(t,"delay",0)),this.setDuration(fG(t,"duration",1e3)),this.setEase(qd(t,"ease","Linear")),this.setRepeat(qd(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=mut(t),this}start(){return this.timer.isRunning?this:(super.start(),this)}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var s=this.target,n=this.timer;return n.update(t,i),n.isDelay||this.updateTarget(s,n),this.emit("update",s,this),n.isDone&&this.complete(),this}updateTarget(t,i){}},Ai=GP;var gut=Phaser.Sound.BaseSound,xut=function(e){return e instanceof gut},Sh=xut;var cG=Phaser.Utils.Objects.GetValue,pG=Phaser.Utils.Objects.GetAdvancedValue,yut=Phaser.Math.Linear,kP=class extends Ai{constructor(t,i,s){Sh(t)&&(s=i,i=t,t=void 0),i.active=!0,i.scene=t,i.game=i.manager.game,super(i,s),this.volume={},this.resetFromJSON(s)}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(cG(t,"mode",0)),this.setEnable(cG(t,"enable",!0)),this.setVolumeRange(pG(t,"volume.start",this.parent.volume),pG(t,"volume.end",0)),this}setMode(t){return typeof t=="string"&&(t=Cut[t]),this.mode=t,this}setVolumeRange(t,i){return this.volume.start=t,this.volume.end=i,this}start(){return this.timer.isRunning?this:(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start(),this)}updateTarget(t,i){t.volume=yut(this.volume.start,this.volume.end,i.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy();break}return this}},Cut={stop:1,destroy:2},yg=kP;var Sut=function(e,t,i,s,n){Sh(e)&&(n=s,s=i,i=t,t=e,e=void 0),s===void 0&&(s=1),n===void 0&&(n=0);var o={mode:0,volume:{start:n,end:s},duration:i};typeof t=="string"&&(t=e.sys.sound.add(t));var r;return t.hasOwnProperty("_fade")?(r=t._fade,r.stop().resetFromJSON(o)):(r=new yg(e,t,o),t._fade=r),r.start(),t.isPlaying||t.setVolume(n).play(),t},ia=Sut;var Tut=function(e,t,i,s){Sh(e)&&(s=i,i=t,t=e,e=void 0),s===void 0&&(s=!0);var n={mode:s?2:1,volume:{start:t.volume,end:0},duration:i},o;return t.hasOwnProperty("_fade")?(o=t._fade,o.stop().resetFromJSON(n)):(o=new yg(e,t,n),t._fade=o),o.start(),t.isPlaying||t.play(),t},Cn=Tut;var _d=Phaser.Utils.Objects.GetValue,vG={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var i=this.sound.add(e,{loop:_d(t,"loop",this.backgroundMusicLoop),mute:_d(t,"mute",this.backgroundMusicMute),volume:_d(t,"volume",this.backgroundMusicVolume),detune:_d(t,"detune",0),rate:_d(t,"rate",1)});return this.setCurrentBackgroundMusic(i),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&ia(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&Cn(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=i,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}};var tf=Phaser.Utils.Objects.GetValue,mG={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var i=this.sound.add(e,{loop:tf(t,"loop",this.backgroundMusicLoop),mute:tf(t,"mute",this.backgroundMusic2Mute),volume:tf(t,"volume",this.backgroundMusic2Volume),detune:tf(t,"detune",0),rate:tf(t,"rate",1)});return this.setCurrentBackgroundMusic2(i),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&ia(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&Cn(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=i,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}};var gG=Phaser.Utils.Array.Remove,Cg=Phaser.Utils.Objects.GetValue,xG={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:Cg(t,"mute",this.soundEffectsMute),volume:Cg(t,"volume",this.soundEffectsVolume),detune:Cg(t,"detune",0),rate:Cg(t,"rate",1)});return this.soundEffects.push(i),i.once("complete",function(){i.destroy(),this.sound&&gG(this.soundEffects,i)},this).once("destroy",function(){this.sound&&gG(this.soundEffects,i)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&ia(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var i=this.getLastSoundEffect();return i&&Cn(i,e,t),this},fadeOutAllSoundEffects(e,t){for(var i=this.soundEffects.length-1;i>=0;i--)Cn(this.soundEffects[i],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect();i&&i.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect()]:i=this.soundEffects;for(var s=0,n=i.length;s<n;s++)i[s].setDetune(e);return this},setSoundEffectRate(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect()]:i=this.soundEffects;for(var s=0,n=i.length;s<n;s++)i[s].setRate(e);return this}};var yG=Phaser.Utils.Array.Remove,Sg=Phaser.Utils.Objects.GetValue,CG={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var i=this.sound.add(e,{mute:Sg(t,"mute",this.soundEffects2Mute),volume:Sg(t,"volume",this.soundEffects2Volume),detune:Sg(t,"detune",0),rate:Sg(t,"rate",1)});return this.soundEffects2.push(i),i.once("complete",function(){i.destroy(),this.sound&&yG(this.soundEffects2,i)},this).once("destroy",function(){this.sound&&yG(this.soundEffects2,i)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&ia(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var i=this.getLastSoundEffect2();return i&&Cn(i,e,t),this},fadeOutAllSoundEffects2(e,t){for(var i=this.soundEffects2.length-1;i>=0;i--)Cn(this.soundEffects2[i],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var i=this.getLastSoundEffect2();i&&i.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect2()]:i=this.soundEffects2;for(var s=0,n=i.length;s<n;s++)i[s].setDetune(e);return this},setSoundEffect2Rate(e,t){t===void 0&&(t=!1);var i;t?i=[this.getLastSoundEffect2()]:i=this.soundEffects2;for(var s=0,n=i.length;s<n;s++)i[s].setRate(e);return this}};var SG={hasAudio:oG};Object.assign(SG,vG,mG,xG,CG);var TG=SG;var Er=Phaser.Utils.Objects.GetValue,Tg=class{constructor(t,i){this.sound=aG(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Er(i,"bgm.volume",1),this._backgroundMusicMute=Er(i,"bgm.mute",!1),this.setBackgroundMusicLoop(Er(i,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Er(i,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Er(i,"bgm2.volume",1),this._backgroundMusic2Mute=Er(i,"bgm2.mute",!1),this.setBackgroundMusic2Loop(Er(i,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Er(i,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Er(i,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Er(i,"soundEffect2.volume",1);var s=Er(i,"bgm.initial",void 0);s&&this.setCurrentBackgroundMusic(s);var n=Er(i,"bgm2.initial",void 0);n&&this.setCurrentBackgroundMusic2(n)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(var t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var i=this.soundEffects,s=0,n=i.length;s<n;s++)i[s].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var i=this.soundEffects,s=0,n=i.length;s<n;s++)i[s].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var i=this.soundEffects,s=0,n=soundEffects2.length;s<n;s++)i[s].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var i=this.soundEffects2,s=0,n=i.length;s<n;s++)i[s].setVolume(t)}};Object.assign(Tg.prototype,TG);var EG=Tg;var VP=Phaser.Utils.Objects.GetValue,UP=class extends ea{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=VP(t,"isRunning",!1),this.timeScale=VP(t,"timeScale",1),this.now=VP(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}},PG=UP;var zP=class extends PG{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,i){return!this.isRunning||this.timeScale===0?this:(this.tick(i),this)}},Eg=zP;var Eut=function(e,t){return t===void 0&&(t=.5),e<=t?e=e/t:e=1-(e-t)/(1-t),e},Th=Eut;var MG=Phaser.Math.Clamp,WP=class{constructor(t,i){this.setTimeline(t).reset(i)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,i,s,n){return this.target=t,this.onStart=i,this.onProgress=s,this.onComplete=n,this}setDuration(t,i){return i===void 0&&(i=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=i,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=MG(t,0,1),this.yoyo&&(t=Th(t)),t}setProgress(t){t=MG(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,i){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=i,this.t=this.getProgress(),this.runCallback(this.onProgress);var s=this.remainder<=0;return s&&this.runCallback(this.onComplete),s}},wG=WP;var HP=class extends hi{allocate(){return this.pop()}free(t){t.onFree(),this.push(t)}freeMultiple(t){for(var i=0,s=t.length;i<s;i++)this.free(t[i]);return this}},bG=HP;var Put=Phaser.Utils.Objects.GetValue,Mut=new bG,YP=class extends Eg{constructor(t,i){super(t,i),this.addedTimers=[],this.timers=[],this.timerPool=Put(i,"pool",Mut)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var i=this.timerPool.allocate();return i?i.setTimeline(this).reset(t):i=new wG(this,t),this.addedTimers.push(i),i.runCallback(i.onStart),this.isRunning||this.start(),i}delayCall(t,i,s,n){var o=this.addTimer({duration:t,onComplete:function(r,a,p){s===void 0&&(s=[]),s.push(p),i.apply(n,s)}});return o}delayEvent(t,i){this.removeDelayEvent(i);var s=this.delayCall(t,function(){this.removeDelayEvent(i),this.emit(i)},[],this);return this.once(`_remove.${i}`,function(){s.remove(),s=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var i=[],s=[this.addedTimers,this.timers],n=0,o=s.length;n<o;n++)for(var r=s[n],a=0,p=r.length;a<p;a++){var h=r[a];h.name===t&&i.push(h)}return i}update(t,i){if(super.update(t,i),!!this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var s=[],n=0,o=this.timers.length;n<o;n++){var r=this.timers[n],a=r.update(this.now,this.delta);a?this.timerPool.free(r):s.push(r)}this.timers=s,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}},RG=YP;var IG="_wait.complete",AG="_remove.wait";var wut=function(e,t,i,s,n){var o=Tr(e),r=o.time.delayedCall(t,function(){o.sys.events.once("preupdate",function(){i.call(s,n)})});return r},OG=wut;var Pg=class{constructor(t){t||(this.setEventEmitter(!0),t=this),this.parent=t,this.waitId=0,this.waitCompleteEventName=IG,this.removeWaitEventsEventName=AG}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(t,i,s){var n=this.getWaitCompleteTriggerCallback(s);return t.once(i,n,this),this.parent.once(this.removeWaitEventsEventName,function(){t.off(i,n,this)}),this.parent}getWaitCompleteTriggerCallback(t){t===void 0&&(t=!0);var i=this.waitId,s=this,n=function(){i<s.waitId||(s.waitId++,s.removeWaitEvents(),s.parent.emit(s.waitCompleteEventName))};if(t){var o=function(){OG(s.parent,0,n)};return o}else return n}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(t,i){return this.parent.on(this.waitCompleteEventName,t,i),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(Pg.prototype,gn);var DG=Pg;var LG={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}};var but=function(e,t){var i=`(?<!\\\\)\\${t}`,s=`\\${t}`;return e.split(new RegExp(i,"g")).map(function(n){return n.replace(s,t)})},FG=but;var BG={setClickTarget(e){return this.clickTarget=e,e?Zr(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(t,`keydown-${e.toUpperCase()}`);for(var i=FG(e,"|"),s=0,n=i.length;s<n;s++)this.waitEvent(t,`keydown-${i[s].toUpperCase()}`);return this.parent}else return this.waitEvent(t,"keydown")}};var NG={waitGameObjectTweenComplete(e,t,i){var s=this.parent.getGameObjectTweenTask(e,t,i);return s?this.waitEvent(s,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,i,s){var n=this.parent.getGameObject(e,t);if(!n)return this.waitTime(0);if(n.getData(i)===s)return this.waitTime(0);var o=`changedata-${i}`,r=function(a,p,h){p=!!p,p===s&&a.emit("_dataFlagMatch")};return n.on(o,r),this.parent.once(this.removeWaitEventsEventName,function(){n.off(o,r)}),this.waitEvent(n,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var i=this.parent.getGameObject(e,t);return i?this.waitEvent(i,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}else{var i=this.parent.gameObjectManagers,s=!1;for(var n in i)s=!0,this.waitEvent(i[n],"empty");return s?this.parent:this.waitTime(0)}}};var GG={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var i;if(t?i=this.scene.cameras.getCamera(t):i=this.cameraTarget,!i)return this.waitTime(0);var s,n;switch(e){case"camera.fadein":s=i.fadeEffect,n="camerafadeincomplete";break;case"camera.fadeout":s=i.fadeEffect,n="camerafadeoutcomplete";break;case"camera.flash":s=i.flashEffect,n="cameraflashcomplete";break;case"camera.shake":s=i.shakeEffect,n="camerashakecomplete";break;case"camera.zoom":s=i.zoomEffect,n="camerazoomcomplete";break;case"camera.rotate":s=i.rotateToEffect,n="camerarotatecomplete";break;case"camera.scroll":s=i.panEffect,n="camerapancomplete";break}return s.isRunning?this.waitEvent(i,n):this.waitTime(0)}};var kG={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}};var Rut=function(e){if(!e)return this.waitTime(0);var t=!1;for(var i in e)switch(i){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var s=i.split(".");if(s.length===2){var n=s[0],o=s[1],r=this.parent.getGameObjectManager(void 0,n);if(!r)continue;if(o==="destroy")return this.waitGameObjectDestroy(void 0,n);var a=r.getProperty(n,o);if(typeof a=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,n,o);continue}var p=o,h=p.startsWith("!");if(h&&(p=p.substring(1)),r.hasData(n,o)){t=!0,this.waitGameObjectDataFlag(void 0,n,p,!h);continue}this.waitEvent(gameObject,o);continue}else s.length;break}return t||this.waitTime(0),this.parent},VG=Rut;var UG={waitAny:VG};Object.assign(UG,LG,BG,NG,GG,kG);var zG=UG;var Mg=class extends DG{constructor(t,i){super(t),this.waitCompleteEventName=Ot(i,"completeEventName",this.waitCompleteEventName),this.setClickTarget(Ot(i,"clickTarget",this.scene)),this.setClickShortcutKeys(Ot(i,"clickShortcutKeys",void 0)),this.setCameraTarget(Ot(i,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}};Object.assign(Mg.prototype,zG);var WG=Mg;var wg=Phaser.Utils.Objects.GetValue,Iut=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var i=wg(t,"layers",!1);if(i!==!1){var s=new vg(e,{name:"LAYER",layers:i,rootLayer:wg(t,"rootLayer",void 0),depth:wg(t,"layerDepth",void 0)});this.addGameObjectManager(s),this.layerManager=s}var n=wg(t,"sounds");return n!==!1&&(this.soundManager=new EG(e,n)),this.timeline=new RG(this),this.waitEventManager=new WG(this,t),this},HG=Iut;var Aut=function(e){this.timeline.timeScale=e;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},YG=Aut;var Out=function(){return this.timeline.timeScale},XG=Out;var Dut=function(e){this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer;for(var t in this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0},$G=Dut;var bg={addGameObjectManager(e,t){var i;return e instanceof hs?i=e:typeof e=="string"?(i=t,i.name=e):(e===void 0&&(e={}),t===void 0&&(t=hs),e.createGameObjectScope||(e.createGameObjectScope=this),i=new t(this.managersScene,e)),this.gameObjectManagers[i.name]=i,this},getGameObjectManager(e,t){if(e){var i=this.gameObjectManagers[e];return i}else{t&&t.charAt(0)==="!"&&(t=t.substring(1));for(var e in this.gameObjectManagers){var i=this.gameObjectManagers[e];if(i.has(t))return i}}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}};var jG={createGameObject(e,t,...i){return this.getGameObjectManager(e,t).add(t,...i),this},destroyGameObject(e,t){var i=this.getGameObjectManager(e,t);return t===void 0?i.removeAll():i.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,i,...s){return this.getGameObjectManager(e,t).call(t,i,...s),this},setGameObjectProperty(e,t,i,s){return this.getGameObjectManager(e,t).setProperty(t,i,s),this},easeGameObjectProperty(e,t,i){return this.getGameObjectManager(e,t).easeProperty(t,i),this},getGameObjectTweenTask(e,t,i){return this.getGameObjectManager(e,t).getTweenTask(t,i)},getGameObject(e,t,i){var s=this.getGameObjectManager(e,t);if(!s)return i;if(typeof t=="string")return s.getGO(t);i===void 0&&(i=[]);var n=t;n===void 0&&(n=Object.keys(s.bobs));for(var o=Array.isArray(i),r=0,a=n.length;r<a;r++){t=n[r];var p=s.getGO(t);p&&(o?i.push(p):i[t]=p)}return i},addGameObject(e,t,i){var s=this.getGameObjectManager(e,t);if(typeof t=="string")s.addGO(t,i);else{var n=t;for(t in n)s.addGO(t,n[t])}return this},drawGameObjectsBounds(e,t,i){e instanceof Phaser.GameObjects.Graphics&&(i=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var s=0,n=e.length;s<n;s++)this.getGameObjectManager(e[s]).drawGameObjectsBounds(t,i);return this}};var Lut=function(e){class t extends e{}var i={initManagers:HG,setTimeScale:YG,getTimeScale:XG,destroyManagers:$G};return Object.assign(t.prototype,i,bg,jG),t},ZG=Lut;var QG=il(JG()),$P=class extends QG.default{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}},Ig=$P;var Ag={setEventEmitter(e,t){return t===void 0&&(t=Ig),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var Nut=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,Gut=/^0x[0-9A-F]+$/i,kut=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(Nut.test(e))e=parseFloat(e);else if(Gut.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0;break}return e},Eh=kut;var Og=class{constructor(t){this.setEventEmitter(Ot(t,"eventEmitter",void 0)),this.setValueConverter(Ot(t,"valueConvert",!0)),this.setLoopEnable(Ot(t,"loop",!1)),this.setMultipleLinesTagEnable(Ot(t,"multipleLinesTag",!1));var i=Ot(t,"delimiters","<>");this.setDelimiters(i[0],i[1]),this.setTranslateTagNameCallback(Ot(t,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(t){return t===void 0&&(t=!0),this.multipleLinesTagEnable=t,this}setDelimiters(t,i){i===void 0&&(i=t[1],t=t[0]),this.delimiterLeft=t,this.delimiterRight=i,t=os(this.delimiterLeft),i=os(this.delimiterRight);var s=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${t}(.+?)${i}`,s),this}setTranslateTagNameCallback(t){return this.translateTagNameCallback=t,this}setValueConverter(t){return t===!0?t=Eh:t||(t=Vut),this.valueConverter=t,this}setLoopEnable(t){return t===void 0&&(t=!0),this.loopEnable=t,this}setSource(t){return this.source=t,this}resetIndex(t){return t===void 0&&(t=0),this.progressIndex=t,this.reSplit.lastIndex=t,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(t){return this.setSource(t).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var t=this.source,i=t.length;for(this.reSplit.lastIndex=this.progressIndex;;){var s=this.reSplit.exec(t);if(!s){if(this.progressIndex<i&&(this.onContent(t.substring(this.progressIndex,i)),this.isPaused)){this.progressIndex=i;break}this.onComplete(),this.isRunning=!1;return}var n=this.reSplit.lastIndex,o=n-s[0].length;if(this.progressIndex<o&&(this.onContent(t.substring(this.progressIndex,o)),this.isPaused)){this.progressIndex=o;break}if(this.lastTagSource=s[0],this.onTag(s[1]),this.lastTagSource=void 0,this.progressIndex=n,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(t,i){return this.isPaused?this:(this.pause(),t.once(i,function(){this.next()},this),this)}onContent(t){this.skipEventFlag=!1,this.emit("content",t),this.lastContent=t}onTag(t){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}},Vut=function(e){return e};Object.assign(Og.prototype,Ag);var qG=Og;var Uut=function(e,t,i){if(e==null)return[];t===void 0&&(t=Eh),i===void 0&&(i=",");for(var s=e.split(i),n=0,o=s.length;n<o;n++)s[n]=t(s[n]);return s},_G=Uut;var jP=class extends qG{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(Ot(t,"regex.tag",void 0)),this.setValueExpression(Ot(t,"regex.value",void 0));var i=Ot(t,"delimiters","<>");this.setDelimiters(i[0],i[1])}setTagExpression(t){return t||(t=Dg),this.tagExpression=t,this}setValueExpression(t){return t||(t=Dg),this.valueExpression=t,this}setDelimiters(t,i){super.setDelimiters(t,i);var s=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(s,"i"),this.tagExpression!==Dg||this.valueExpression!==Dg){var n=`${this.tagExpression}(=${this.valueExpression})?`,o=`/${this.tagExpression}`;t=os(this.delimiterLeft),i=os(this.delimiterRight);var r=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${n})|(${o}))${i}`,r)}return this}onTag(t){var i=t.match(this.reTag),s=i[1],n=s.charAt(0)==="/";if(n&&(s=s.substring(1,s.length)),this.translateTagNameCallback&&(s=this.translateTagNameCallback(s)),this.skipEventFlag=!1,n)this.emit(`-${s}`),this.skipEventFlag||this.emit("-",s),this.lastTagEnd=s;else{var o=_G(i[3],this.valueConverter);this.emit(`+${s}`,...o),this.skipEventFlag||this.emit("+",s,...o),this.lastTagStart=s}}},Dg="[^=]+",t3=jP;var e3=t3;var zut=function(e,t,i){var s="color",n;t.on("start",function(){n=e.textStyle.color}).on(`+${s}`,function(o){e.textStyle.setColor(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setColor(n),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(n)})},i3=zut;var Wut=function(e,t,i){var s="stroke",n;t.on("start",function(){n=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${s}`,function(o){o===void 0&&(o=n),e.textStyle.setStrokeStyle(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(n)})},r3=Wut;var Hut=function(e,t,i){var s="b";t.on("start",function(){e.textStyle.setBold(!1)}).on(`+${s}`,function(){e.textStyle.setBold(!0),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setBold(!1),t.skipEvent()})},n3=Hut;var Yut=function(e,t,i){var s="i";t.on("start",function(){e.textStyle.setItalic(!1)}).on(`+${s}`,function(){e.textStyle.setItalic(!0),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setItalic(!1),t.skipEvent()})},s3=Yut;var Xut=function(e,t,i){var s="size",n;t.on("start",function(){n=e.textStyle.fontSize}).on(`+${s}`,function(o){e.textStyle.setFontSize(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setFontSize(n),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(n)})},a3=Xut;var $ut=function(e,t,i){var s="y",n;t.on("start",function(){n=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on(`+${s}`,function(o){o===void 0&&(o=n),e.textStyle.setOffsetY(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},o3=$ut;var jut=function(e,t,i){var s="x",n;t.on("start",function(){n=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on(`+${s}`,function(o){o===void 0&&(o=n),e.textStyle.setOffsetX(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},l3=jut;var Zut=function(e,t,i){var s="left",n;t.on("start",function(){n=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${s}`,function(o){o===void 0&&(o=n),e.textStyle.setLeftSpace(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},h3=Zut;var Kut=function(e,t,i){var s="right",n;t.on("start",function(){n=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${s}`,function(o){o===void 0&&(o=n),e.textStyle.setRightSpace(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},u3=Kut;var Jut=function(e,t,i){var s="shadow",n;t.on("start",function(){n=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${s}`,function(o){o===void 0&&(o=n),e.textStyle.setShadowColor(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(n)})},d3=Jut;var Qut=function(e,t,i){var s="align";t.on(`+${s}`,function(n){e.textStyle.setAlign(n),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},f3=Qut;var qut=function(e,t,i){var s="img";t.on(`+${s}`,function(n){var o=e.imageManager.get(n);o&&ym.call(e,o.key,o.frame,{width:o.width,hieght:o.height,leftSpace:o.left,rightSpace:o.right,color:o.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},c3=qut;var _ut=function(e,t,i){var s="space";t.on(`+${s}`,function(n){Cm.call(e,n),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},p3=_ut;var tdt=function(e,t,i){var s="speed";t.on(`+${s}`,function(n){v3(e,n),t.skipEvent()}).on(`-${s}`,function(){v3(e,void 0),t.skipEvent()})},edt=function(e){this.typeWriter.setTypingSpeed(e)},v3=function(e,t){nt.call(e,"speed",edt,t,e)},m3=tdt;var idt=function(e,t,i){var s="se";t.on(`+${s}`,function(n,o){nt.call(e,s,rdt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se2";t.on(`+${s}`,function(n,o){nt.call(e,s,ndt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},rdt=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect(t),i&&this.soundManager.fadeInSoundEffect(i)}},ndt=function(e){if(!this.skipSoundEffect){var t=e[0],i=e[1];this.soundManager.playSoundEffect2(t),i&&this.soundManager.fadeInSoundEffect2(i)}},g3=idt;var sdt=function(e,t,i){var s="se.fadein";t.on(`+${s}`,function(n){nt.call(e,s,adt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se2.fadein";t.on(`+${s}`,function(n){nt.call(e,s,odt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},adt=function(e){this.soundManager.fadeInSoundEffect(e)},odt=function(e){this.soundManager.fadeInSoundEffect2(e)},x3=sdt;var ldt=function(e,t,i){var s="se.fadeout";t.on(`+${s}`,function(n,o){o=o==="stop",nt.call(e,s,hdt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se2.fadeout";t.on(`+${s}`,function(n,o){o=o==="stop",nt.call(e,s,udt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},hdt=function(e){this.soundManager.fadeOutSoundEffect(...e)},udt=function(e){this.soundManager.fadeOutSoundEffect2(...e)},y3=ldt;var ddt=function(e,t,i){var s="se.volume";t.on(`+${s}`,function(n){nt.call(e,s,fdt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se2.volume";t.on(`+${s}`,function(n){nt.call(e,s,cdt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},fdt=function(e){this.soundManager.setSoundEffectVolume(e,!0)},cdt=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},C3=ddt;var pdt=function(e,t,i){var s="se.mute";t.on(`+${s}`,function(){nt.call(e,s,vdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se2.mute";t.on(`+${s}`,function(){nt.call(e,s,mdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se.unmute";t.on(`+${s}`,function(){nt.call(e,s,gdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="se2.unmute";t.on(`+${s}`,function(){nt.call(e,s,xdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},vdt=function(){this.soundManager.setSoundEffectMute(!0)},mdt=function(){this.soundManager.setSoundEffect2Mute(!0)},gdt=function(){this.soundManager.setSoundEffectMute(!1)},xdt=function(){this.soundManager.setSoundEffect2Mute(!1)},S3=pdt;var ydt=function(e,t,i){var s="bgm";t.on(`+${s}`,function(n,o){nt.call(e,s,Cdt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){nt.call(e,"bgm.stop",Sdt,void 0,e),t.skipEvent()});var s="bgm2";t.on(`+${s}`,function(n,o){nt.call(e,s,Tdt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){nt.call(e,"bgm2.stop",Edt,void 0,e),t.skipEvent()})},Cdt=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic(t),i&&this.soundManager.fadeInBackgroundMusic(i)},Sdt=function(){this.soundManager.stopBackgroundMusic()},Tdt=function(e){var t=e[0],i=e[1];this.soundManager.playBackgroundMusic2(t),i&&this.soundManager.fadeInBackgroundMusic2(i)},Edt=function(){this.soundManager.stopBackgroundMusic2()},T3=ydt;var Pdt=function(e,t,i){var s="bgm.fadein";t.on(`+${s}`,function(n){nt.call(e,s,Mdt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm2.fadein";t.on(`+${s}`,function(n){nt.call(e,s,wdt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Mdt=function(e){this.soundManager.fadeInBackgroundMusic(e)},wdt=function(e){this.soundManager.fadeInBackgroundMusic2(e)},E3=Pdt;var bdt=function(e,t,i){var s="bgm.fadeout";t.on(`+${s}`,function(n,o){o=o==="stop",nt.call(e,s,Rdt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm2.fadeout";t.on(`+${s}`,function(n,o){o=o==="stop",nt.call(e,s,Idt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Rdt=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},Idt=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},P3=bdt;var Adt=function(e,t,i){var s="bgm.cross";t.on(`+${s}`,function(n,o){nt.call(e,s,Odt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm2.cross";t.on(`+${s}`,function(n,o){nt.call(e,s,Ddt,[n,o],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Odt=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},Ddt=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},M3=Adt;var Ldt=function(e,t,i){var s="bgm.pause";t.on(`+${s}`,function(){nt.call(e,s,Fdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){nt.call(e,"bgm.resume",Bdt,void 0,e),t.skipEvent()});var s="bgm2.pause";t.on(`+${s}`,function(){nt.call(e,s,Ndt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){nt.call(e,"bgm2.resume",Gdt,void 0,e),t.skipEvent()})},Fdt=function(){this.soundManager.pauseBackgroundMusic()},Bdt=function(){this.soundManager.resumeBackgroundMusic()},Ndt=function(){this.soundManager.pauseBackgroundMusic2()},Gdt=function(){this.soundManager.resumeBackgroundMusic2()},w3=Ldt;var kdt=function(e,t,i){var s="bgm.volume";t.on(`+${s}`,function(n){nt.call(e,s,Vdt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm2.volume";t.on(`+${s}`,function(n){nt.call(e,s,Udt,n,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Vdt=function(e){this.soundManager.setBackgroundMusicVolume(e)},Udt=function(e){this.soundManager.setBackgroundMusicVolume2(e)},b3=kdt;var zdt=function(e,t,i){var s="bgm.mute";t.on(`+${s}`,function(){nt.call(e,s,Wdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm2.mute";t.on(`+${s}`,function(){nt.call(e,s,Hdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm.unmute";t.on(`+${s}`,function(){nt.call(e,s,Ydt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()});var s="bgm2.unmute";t.on(`+${s}`,function(){nt.call(e,s,Xdt,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},Wdt=function(){this.soundManager.setBackgroundMusicMute(!0)},Hdt=function(){this.soundManager.setBackgroundMusic2Mute(!0)},Ydt=function(){this.soundManager.setBackgroundMusicMute(!1)},Xdt=function(){this.soundManager.setBackgroundMusic2Mute(!1)},R3=zdt;var $dt=function(e,t,i){var s="camera.fadein";t.on(`+${s}`,function(n,o,r,a){nt.call(e,s,jdt,[n,o,r,a],e),t.skipEvent()})},jdt=function(e){this.cameraTarget.fadeIn(...e)},I3=$dt;var Zdt=function(e,t,i){var s="camera.fadeout";t.on(`+${s}`,function(n,o,r,a){nt.call(e,s,Kdt,[n,o,r,a],e),t.skipEvent()})},Kdt=function(e){this.cameraTarget.fadeOut(...e)},A3=Zdt;var Jdt=function(e,t,i){var s="camera.shake";t.on(`+${s}`,function(n,o){nt.call(e,s,Qdt,[n,o],e),t.skipEvent()})},Qdt=function(e){this.cameraTarget.shake(...e)},O3=Jdt;var qdt=function(e,t,i){var s="camera.flash";t.on(`+${s}`,function(n,o,r,a){nt.call(e,s,_dt,[n,o,r,a],e),t.skipEvent()})},_dt=function(e){this.cameraTarget.flash(...e)},D3=qdt;var tft=function(e,t,i){var s="camera.zoom";t.on(`+${s}`,function(n){nt.call(e,s,eft,n,e),t.skipEvent()}).on(`+${s}.to`,function(n,o,r){nt.call(e,"camera.zoom.to",ift,[n,o,r],e),t.skipEvent()})},eft=function(e){this.cameraTarget.setZoom(e)},ift=function(e){this.cameraTarget.zoomTo(...e)},L3=tft;var F3=Phaser.Math.DegToRad,rft=function(e,t,i){var s="camera.rotate";t.on(`+${s}`,function(n){n=F3(n),nt.call(e,s,nft,n,e),t.skipEvent()}).on(`+${s}.to`,function(n,o,r){n=F3(n),nt.call(e,"camera.rotate.to",sft,[n,o,r],e),t.skipEvent()})},nft=function(e){this.cameraTarget.setRotation(e)},sft=function(e){var t=e[0],i=e[1],s=e[2];this.cameraTarget.rotateTo(t,!1,i,s)},B3=rft;var aft=function(e,t,i){var s="camera.scroll";t.on(`+${s}`,function(n,o){nt.call(e,s,oft,[n,o],e),t.skipEvent()}).on(`+${s}.to`,function(n,o,r,a){nt.call(e,"camera.scroll.to",lft,[n,o,r,a],e),t.skipEvent()})},oft=function(e){this.cameraTarget.setScroll(...e)},lft=function(e){var t=e[0],i=e[1],s=e[2],n=e[3],o=this.cameraTarget,r=o.scrollX,a=o.scrollY;o.setScroll(t,i),t+=o.centerX,i+=o.centerY,o.setScroll(r,a),o.pan(t,i,s,n)},N3=aft;var hft=function(e,t,i){var s="wait",n="click";t.on(`+${s}`,function(o){G3(e,o),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}).on(`+${n}`,function(){G3(e,"click"),t.skipEvent()}).on(`-${n}`,function(){t.skipEvent()})},uft=function(e){this.typeWriter.wait(e)},G3=function(e,t){nt.call(e,"wait",uft,t,e)},k3=hft;var dft=function(e,t,i){var s="r";t.on(`+${s}`,function(){mn.call(e,`
`),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},V3=dft;var fft=function(e,t,i){for(var s=["pagebreak","pb"],n=0,o=s.length;n<o;n++){var r=s[n];t.on(`+${r}`,function(){mn.call(e,"\f"),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})}},U3=fft;var cft=function(e,t,i){var s="content.off";t.on(`+${s}`,function(){t.setContentOutputEnable(!1),t.skipEvent()})},z3=cft;var pft=function(e,t,i){var s="content.on";t.on(`+${s}`,function(){t.setContentOutputEnable(),t.skipEvent()})},W3=pft;var vft=function(e,t,i){t.on("content",function(s){if(t.contentOutputEnable)mn.call(e,s);else{var n=`+${t.lastTagStart}`;e.emit(`parser.${n}#content`,t,s)}})},H3=vft;var mft=function(e,t,i){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(s,...n){if(!t.skipEventFlag){var o=`+${s}`,r=n;e.emit(`parser.${o}`,t,...n,r),Y3(e,o,r)}}).on("-",function(s){if(!t.skipEventFlag){var n=`-${s}`,o=[];e.emit(`parser.${n}`,t,o),Y3(e,n,o)}}).on("complete",function(){e.emit("parser.complete",t)})},gft=function(e,t){var i=`tag.${t}`;e==null?this.emit(i):this.emit(i,...e)},Y3=function(e,t,i){nt.call(e,t,gft,i,e)},X3=mft;var $3=[i3,r3,n3,s3,a3,d3,f3,o3,l3,h3,u3,c3,p3,m3,g3,x3,y3,C3,S3,T3,E3,P3,M3,w3,b3,R3,I3,A3,O3,D3,L3,B3,N3,k3,V3,U3,z3,W3,H3,X3],xft=function(e,t,i){for(var s=0,n=$3.length;s<n;s++)$3[s](e,t,i)},j3=xft;var yft=function(e,t){for(var i=e.commentLineStart,s=t.split(`
`),n=0,o=s.length;n<o;n++){var r=s[n];r===""||(r.trim().length===0||i&&r.startsWith(i))&&(s[n]="")}return s.join("")},Z3=yft;var Cft=Phaser.Utils.Objects.GetValue,ZP=class extends e3{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("delimiters")||(i.delimiters="[]"),super(i),j3(t,this,i),this.setCommentLineStartSymbol(Cft(i,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(Z3(this,t)),this}},K3=ZP;var J3={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}};var ds="page.fadeout",Lg="_remove.play",KP=[ds,Lg];var Sft=function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(ds),this;var e=this.children.filter(function(s){return s.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(!t)this.emit(ds);else if(t.once)t.once("complete",function(){this.emit(ds)},this);else if(t.then){var i=this;t.then(function(){i.emit(ds)})}else this.emit(ds);return this},Q3=Sft;var ra=function(e,t){return new Promise(function(i,s){e.once(t,function(){i()})})},fe=function(e){return ra(e,"complete")};var Tft=function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),fe(this)},q3=Tft;var _3="delay",Fg="anim";var tk=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var i=this.getNextChild();if(!i){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(i.renderable){var s=this.animationConfig;if(s.duration>0){var n=this.timeline.addTimer({name:Fg,target:i,duration:s.duration,yoyo:s.yoyo,onStart:s.onStart,onProgress:s.onProgress,onComplete:s.onComplete});this.skipTypingAnimation&&n.seek(1)}else s.onStart&&s.onStart(i,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",i);var o=this.nextChild;if(o&&!(this.skipSpaceEnable&&EB(o))){if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:_3,target:this,duration:t,onComplete:function(r,a,p){r.typingTimer=void 0,tk.call(r,p.remainder)}});break}}}else PB(i)&&i.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},ek=tk;var Eft=function(){return this.timeline.pause(),this},ik=Eft;var Pft=function(){return this.timeline.resume(),this},rk=Pft;var Mft=function(){return this.isTypingPaused?this:(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0),this)},nk=Mft;var wft=function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},sk=wft;var ak=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}};var ok=function(e,t){var i=t.split(".");return e.gameObjectManagers.hasOwnProperty(i[0])},lk=function(e,t,i,s){var n=e.waitEventManager,o=t.split("."),r=o[0],a=e.getGameObjectManager(r),p=`wait.${r}`;switch(o.length){case 1:n.waitGameObjectManagerEmpty(r),e.emit(p);return;case 2:var h=o[1];n.waitGameObjectDestroy(r,h),e.emit(p,h);return;case 3:var h=o[1],u=o[2],f=a.getProperty(h,u);if(typeof f=="number"){n.waitGameObjectTweenComplete(r,h,u),e.emit(p,h,u);return}var l=u,d=l.startsWith("!");if(d&&(l=l.substring(1)),a.hasData(h,l)){n.waitGameObjectDataFlag(r,h,l,!d),e.emit(p,h,l);return}else{n.waitTime(0);return}}};var bft=Phaser.Input.Keyboard.KeyCodes,Rft=function(e,t,i,s){var n=e.waitEventManager;n.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,s),typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t=t.split("|"):t=[t];for(var o=0,r=t.length;o<r;o++){var a=t[o];if(a==null||a==="wait"){var p=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",p)}else if(typeof a=="number"||!isNaN(a)){var h=parseFloat(a);n.waitTime(h),e.emit("wait.time",h)}else if(a==="click")n.waitClick(),e.emit("wait.click");else if(a==="se"){n.waitSoundEffectComplete();var u=e.soundManager.getLastSoundEffect();e.emit("wait.music",u)}else if(a==="se2"){n.waitSoundEffect2Complete();var u=e.soundManager.getLastSoundEffect2();e.emit("wait.music",u)}else if(a==="bgm"){n.waitBackgroundMusicComplete();var u=e.soundManager.getBackgroundMusic();e.emit("wait.music",u)}else if(a==="bgm2"){n.waitBackgroundMusic2Complete();var u=e.soundManager.getBackgroundMusic2();e.emit("wait.music",u)}else if(bft.hasOwnProperty(a.toUpperCase()))n.waitKeyDown(a),e.emit("wait.keydown",a);else if(ak(a))n.waitCameraEffectComplete(a),e.emit("wait.camera",a);else if(ok(e,a))lk(e,a,i,s);else{var p=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit(`wait.${a}`,p)}}},Bg=Rft;var Ift=function(e){return this.ignoreWait?this:(this.pauseTyping(),Bg(this.textPlayer,e,this.resumeTyping,this),this)},hk=Ift;var Aft=function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},uk=Aft;var Oft=function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},dk=Oft;var Dft=function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(Fg),i=0,s=t.length;i<s;i++)t[i].seek(1);return this},fk=Dft;var Lft=function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},ck=Lft;var Fft=function(){return this.typingTimer&&this.typingTimer.seek(1),this},pk=Fft;var vk={fadeOutPage:Q3,start:q3,typing:ek,pause:ik,resume:rk,pauseTyping:nk,resumeTyping:sk,wait:hk,setIgnoreWait:uk,setSkipSpaceEnable:dk,setSkipTypingAnimation:fk,setSkipSoundEffect:ck,skipCurrentTypingDelay:pk};Object.assign(vk,J3);var mk=vk;var Ph=Phaser.Utils.Objects.GetValue,Ng=class{constructor(t,i){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Ph(i,"onTypingStart",Nft)),this.setDefaultTypingSpeed(Ph(i,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(Ph(i,"skipSpace",!1)),this.setAnimationConfig(Ph(i,"animation",void 0)),this.setMinSizeEnable(Ph(i,"minSizeEnable",!1)),this.setFadeOutPageCallback(Ph(i,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=Bft),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}},Bft=function(e){e.setVisible&&e.setVisible()},Nft=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t];s.setVisible&&s.setVisible(!1)}};Object.assign(Ng.prototype,gn,mk);var gk=Ng;var JP=class extends Rm{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}},xk=JP;var yk={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}};var Ck={};Object.assign(Ck,yk);var Sk=Ck;var Gft=function(e){return!e||e==="sprite"?e=kft:e==="image"&&(e=Vft),e},kft=function(e,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),e.add.sprite(0,0,t,i)},Vft=function(e,t,i){return typeof i!="string"&&typeof i!="number"&&(i=void 0),e.add.image(0,0,t,i)},Gg=Gft;var kg=class extends hs{constructor(t,i){i===void 0&&(i={}),i.BobClass=xk,super(t,i)}setCreateGameObjectCallback(t,i){return t=Gg(t),super.setCreateGameObjectCallback(t,i),this}};Object.assign(kg.prototype,Sk);var Tk=kg;var Ek=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},Uft=function(e,t){return e.length===3&&e[0]===t&&e[2]==="stop"},zft=function(e,t,i){var s=i.name;t.on("+",function(n,...o){if(!t.skipEventFlag){var r=n.split("."),a;if(Ek(r,s))a=r[1];else return;nt.call(e,`${s}.play`,Wft,[s,a,o],e),t.skipEvent()}}).on("+",function(n){if(!t.skipEventFlag){var o=n.split("."),r;if(Uft(o,s))r=o[1];else return;nt.call(e,`${s}.stop`,Pk,[s,r],e),t.skipEvent()}}).on("-",function(n){if(!t.skipEventFlag){var o=n.split("."),r;if(Ek(o,s))r=o[1];else return;nt.call(e,`${s}.stop`,Pk,[s,r],e),t.skipEvent()}})},Wft=function(e){var t,i,s;[t,i,s]=e;var n=s.shift(),o=this.getGameObjectManager(t);o.playAnimation(i,n),s.length>0&&o.chainAnimation(i,s)},Pk=function(e){var t,i;[t,...i]=e;var s=this.getGameObjectManager(t);s.stopAnimation(...i)},Mk=zft;var Hft=function(e,t){return e.length===3&&e[0]===t&&e[2]==="pause"},Yft=function(e,t,i){var s=i.name;t.on("+",function(n){if(!t.skipEventFlag){var o=n.split("."),r;if(Hft(o,s))r=o[1];else return;nt.call(e,`${s}.pause`,Xft,[s,r],e),t.skipEvent()}})},Xft=function(e){var t,i;[t,...i]=e;var s=this.getGameObjectManager(t);s.pauseAnimation(...i)},wk=Yft;var $ft=function(e,t){return e.length===3&&e[0]===t&&e[2]==="chain"},jft=function(e,t,i){var s=i.name;t.on("+",function(n){if(!t.skipEventFlag){var o=n.split("."),r;if($ft(o,s))r=o[1];else return;var a=Array.prototype.slice.call(arguments,1);nt.call(e,`${s}.chain`,Zft,[s,r,a],e),t.skipEvent()}})},Zft=function(e){var t,i;[t,...i]=e;var s=this.getGameObjectManager(t);s.chainAnimation(...i)},bk=jft;var Kft=[Mk,wk,bk],Jft=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=Kft,e.createGameObject=Gg(e.createGameObject),this.addGameObjectManager(e,Tk)},Rk=Jft;var Ik=function(e,t){return e.length===2&&e[0]===t},Qft=function(e,t,i){var s=i.name;t.on("+",function(n,...o){if(!t.skipEventFlag){var r=n.split("."),a;if(Ik(r,s))a=r[1];else return;nt.call(e,`${s}.add`,qft,[s,a,...o],e),t.skipEvent()}}).on("-",function(n){if(!t.skipEventFlag){var o=n.split("."),r;if(Ik(o,s))r=o[1];else return;nt.call(e,`${s}.remove`,_ft,[s,r],e),t.skipEvent()}})},qft=function(e){var t,i;[t,...i]=e;var s=this.getGameObjectManager(t);s.add(...i)},_ft=function(e){var t,i;[t,...i]=e;var s=this.getGameObjectManager(t);s.remove(...i)},Ak=Qft;var tct=function(e,t,i){var s=i.name;t.on("-",function(n){t.skipEventFlag||n===s&&(nt.call(e,`${s}.removeall`,ect,s,e),t.skipEvent())})},ect=function(e){var t=this.getGameObjectManager(e);t.removeAll()},Ok=tct;var ict=function(e,t){return e.length===3&&e[0]===t},rct=function(e,t,i){var s=i.name;t.on("+",function(n,...o){if(!t.skipEventFlag){var r=n.split("."),a,p;if(ict(r,s))a=r[1],p=r[2];else return;nt.call(e,`${s}.call`,nct,[s,a,p,...o],e),t.skipEvent()}})},nct=function(e){var t,i,s,n;[t,i,s,...n]=e;var o=`${t}.${s}`;if(this.emit(o,i,...n),!(this.listenerCount(o)>0)){var r=this.getGameObjectManager(t);r.hasMethod(i,s)?r.call(i,s,...n):r.setProperty(i,s,n[0])}},Dk=rct;var sct={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},act=function(e,t){return e.length===4&&e[0]===t&&sct[e[3]]},oct=function(e,t,i){var s=i.name,n=e.getGameObjectManager(s);t.on("+",function(o,r,a,p,h){if(!t.skipEventFlag){var u=o.split("."),f,l,d;if(act(u,s))f=u[1],l=u[2],d=u[3];else return;typeof p=="number"&&(h=p,p=void 0),nt.call(e,`${s}.ease`,lct,[s,f,l,r,a,p,h,d],e),t.skipEvent()}})},lct=function(e){var t,i,s,n,o,r,a,p;[t,i,s,n,o,r,a,p]=e;var h=this.getGameObjectManager(t),u=h.getProperty(i,s);if(typeof u=="number"){p.endsWith("Left")||p.endsWith("Up")?p.startsWith("to")||p.startsWith("yoyo")?n=u-n:p.startsWith("from")&&(h.setProperty(i,s,u-n),n=u):p.endsWith("Right")||p.endsWith("Down")?p.startsWith("to")||p.startsWith("yoyo")?n=u+n:p.startsWith("from")&&(h.setProperty(i,s,u+n),n=u):p==="from"&&(h.setProperty(i,s,n),n=u);var f=p.startsWith("yoyo");h.easeProperty(i,{property:s,value:n,duration:o,ease:r,repeat:a,yoyo:f})}},Lk=oct;var Fk=[Ak,Ok,Dk,Lk],hct=bg.addGameObjectManager,Bk={addGameObjectManager(e,t){e=e?ze(e):{};var i=e.name;i||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var s=e.defaultLayer,n=e.createGameObject,o=this.layerManager;e.createGameObject=function(h,...u){var f=n.call(this,h,...u);return s&&o&&o.addToLayer(s,f),f},hct.call(this,e,t);var r=e.parseCallbacks;r?r=[...r,...Fk]:r=Fk;for(var a=0,p=r.length;a<p;a++)r[a](this,this.parser,e);return this}};var uct=function(e){return this.waitEventManager.setClickTarget(e),this},Nk=uct;var dct=function(e){return this.waitEventManager.setCameraTarget(e),this},Gk=dct;var fct=function(e){var t=this;e?typeof e=="function"?this.nextPageInput=function(i,s){var n=t.waitEventManager;n.clearWaitCompleteCallbacks().addWaitCompleteCallback(i,s);var o=n.getWaitCompleteTriggerCallback();e.call(t,o)}:this.nextPageInput=function(i,s){Bg(t,e,i,s)}:this.nextPageInput=null},kk=fct;var cct=function(e,t){return this.imageManager.add(e,t),this},Vk=cct;var Uk={play(e){return this.isPlaying?this:(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage(),this)},playPromise(e){var t=fe(this);return this.play(e),t}};var QP=function(){return!this.isPlaying||this.isPageTyping?this:(this.typeWriter.once(ds,pct,this).fadeOutPage(),this)},pct=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(Lg),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?QP.call(this):this.nextPageInput&&this.nextPageInput(QP,this))};this.once(Lg,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)},zk=QP;var Wk={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}};var Hk={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}};var vct=function(e){return this.typeWriter.wait(e),this},Yk=vct;var Xk={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}};var mct=function(e){return this.typeWriter.setIgnoreWait(e),this},$k=mct;var gct=function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},jk=gct;var xct=function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,i=this.typeWriter.skipTypingAnimation,s=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(i).setSkipSoundEffect(s)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this},Zk=xct;var Kk={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}};var Jk={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}};var Qk={setClickTarget:Nk,setCameraTarget:Gk,setNextPageInput:kk,addImage:Vk,typingNextPage:zk,wait:Yk,setIgnoreWait:$k,setIgnoreNextPageInput:jk,showPage:Zk};Object.assign(Qk,Bk,Uk,Wk,Hk,Xk,Kk,Jk);var qk=Qk;var yct=function(e){for(var t=0,i=KP.length;t<i;t++)e.emit(KP[t])},_k=yct;var t4=Phaser.Utils.Objects.IsPlainObject,Mh=Phaser.Utils.Objects.GetValue,Vg=class extends ZG(mh){constructor(t,i,s,n,o,r){t4(i)?r=i:t4(n)&&(r=n),r===void 0&&(r={});var a=r.text;delete r.text,super(t,i,s,n,o,r),this.type="rexTextPlayer",this.initManagers(t,r),this.parser=new K3(this,Mh(r,"parser",void 0)),this.typeWriter=new gk(this,Mh(r,"typing",void 0)),this._imageManager=void 0;var p=Mh(r,"images",void 0);p&&this.addImage(p);var h=Mh(r,"sprites");h!==!1&&h!==null&&Rk.call(this,h),this.setIgnoreNextPageInput(Mh(r,"ignoreNextPageInput",!1)),this.setNextPageInput(Mh(r,"nextPageInput",null)),this.isPlaying=!1,a&&this.play(a)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new _v(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){!this.scene||this.ignoreDestroy||(_k(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}};Object.assign(Vg.prototype,qk);var e4=Vg;var i4=e4;var qP=i4;K.register("textPlayer",function(e,t,i,s,n){var o=new qP(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.TextPlayer",qP);var Ug={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},zg={direction:["direction",void 0]};var _P=function(e,t,i){if(typeof i=="string")e.hasOwnProperty(i)&&(t[i]=e[i]);else{var s=i;if(Array.isArray(s))for(var n=0,o=s.length;n<o;n++)_P(e,t,s[n]);else for(var i in s)_P(e,t,i)}},na=_P;var Cct=function(e){e===void 0&&(e={});var t={};return na(e,t,"inputType"),na(e,t,"type"),na(e,t,"style"),na(e,t,zg),na(e,t,Ug),t},r4=Cct;var Sct=function(e,t,i,s,n){if(t)return!(i&&!i(e,t)||!n4(e,t)||s&&!s(e,t));n===void 0&&(n=!1);for(var o=e.scene.input.manager,r=o.pointersTotal,a=o.pointers,t,p=0;p<r;p++)if(t=a[p],!(i&&!i(e,t))&&n4(e,t)&&!(s&&!s(e,t)))return n?t:!0;return!1},n4=function(e,t){for(var i=e.scene,s=i.input.cameras.getCamerasBelowPointer(t),n=i.input.manager,o=[e],r=0,a=s.length;r<a;r++)if(n.hitTest(t,o,s[r],Wg),Wg.length>0)return Wg.length=0,!0;return Wg.length=0,!1},Wg=[],wh=Sct;var bh=void 0,s4=function(e){e!==bh&&(bh!==void 0&&bh.close(),bh=e)},a4=function(e){e===bh&&(bh=void 0)};var Tct=Phaser.Utils.Objects.GetValue,Ect=function(e,t,i){i===void 0&&(i={});var s,n;for(var o in e)s=e[o],n=Tct(t,o,s[1]),n!==void 0&&(i[s[0]]=n);return i},Rh=Ect;var Pct=function(e){e.addEventListener("touchstart",Ih,!1),e.addEventListener("touchmove",Ih,!1),e.addEventListener("touchend",Ih,!1),e.addEventListener("mousedown",Ih,!1),e.addEventListener("mouseup",Ih,!1),e.addEventListener("mousemove",Ih,!1)},Ih=function(e){e.stopPropagation()},Hg=Pct;var Mct=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},Yg=Mct;var wct=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",Yg,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(DP.call(this.clickOutSideTarget,this.parent),OP.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},o4=wct;var bct=function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}},l4=bct;var Rct=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",Yg,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),l4(this.node),this.node=void 0,this.emit("close",this)},h4=Rct;var tM=Phaser.Utils.Objects.GetValue,Ict=function(e,t){var i,s=tM(t,"inputType",void 0);s===void 0&&(s=tM(t,"type","text")),s==="textarea"?(i=document.createElement("textarea"),i.style.resize="none"):(i=document.createElement("input"),i.type=s);var n=tM(t,"style",void 0),o=i.style;Rh(zg,n,o),o.position="absolute",o.opacity=0,o.pointerEvents="none",o.zIndex=0,o.transform="scale(0)",Rh(Ug,t,i),Hg(i);var r=e.scene.sys.scale,a=r.isFullscreen?r.fullscreenTarget:document.body;return a.appendChild(i),i.addEventListener("focus",function(p){o4.call(e)}),i.addEventListener("blur",function(p){h4.call(e)}),i},u4=Ict;var Act=function(){return this.isOpened?this:this.readOnly?this:(s4(this),this.node||(this.node=u4(this,this.nodeConfig)),this.setFocus(),this)},d4=Act;var Oct=function(){return this.isOpened?(a4(this),this.setBlur(),this):this},f4=Oct;var Dct={open:d4,close:f4},c4=Dct;var fs=Phaser.Utils.Objects.GetValue,Xg=class extends Et{constructor(t,i){super(t);var s=fs(i,"inputType",void 0);s===void 0&&(s=fs(i,"type","text")),this.setEnterCloseEnable(fs(i,"enterClose",s!=="textarea"));var n=fs(i,"onOpen",void 0);n||(n=fs(i,"onFocus",void 0)),this.onOpenCallback=n,this.clickOutSideTarget=fs(i,"clickOutSideTarget",void 0);var o=fs(i,"onClose",void 0);o||(o=fs(i,"onBlur",void 0)),this.onCloseCallback=o,this.onUpdateCallback=fs(i,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=r4(i),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){wh(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,i),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node?(this.node.style[t]=i,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}};Object.assign(Xg.prototype,c4);var $g=Xg;var Lct=function(e,t,i){e=e.replace(" ","");var s=i.previousText;if(e===s)return e;if(isNaN(e)){i.emit("nan",e,i),e=s;var n=i.cursorPosition-1;i.setText(e),i.setCursorPosition(n)}else i.previousText=e;return e},jg=Lct;var Fct=function(e){var t=e.parent,i=e.isOpened?e.selectionStart:null,s=e.isOpened?e.selectionEnd:null,n=e.prevSelectionStart,o=e.prevSelectionEnd;if(!(n===i&&o===s)){var r,a;n===null?(r=i,a=s):i===null?(r=n,a=o):(r=Math.min(n,i),a=Math.max(o,s));for(var p=r;p<a;p++){var h;n===null?h=!1:h=p>=n&&p<o;var u;if(i===null?u=!1:u=p>=i&&p<s,h!==u){var f=t.getCharChild(p);if(f){var l=h?"rangeout":"rangein";t.emit(l,f,p,t)}}}e.prevSelectionStart=i,e.prevSelectionEnd=s}},p4=Fct;var Bct=function(e){var t=e.parent,i=0,s=t.width,n=0,o=t.height,r=e.drawX,a=e.drawY,p=r+e.drawTLX,h=r+e.drawTRX,u=a+e.drawTLY,f=a+e.drawBLY,l;p<i?l=i-p:h>s?l=s-h:l=0;var d;u<n?d=n-u:f>o?d=o-f:d=0,t._textOX+=l,t._textOY+=d},v4=Bct;var Nct=function(e){var t=e.parent,i=t.text;e.requestCursorPosition!==null&&(e.setCursorPosition(e.requestCursorPosition),e.requestCursorPosition=null);var s=e.cursorPosition;if(e.prevCursorPosition!==s){if(e.prevCursorPosition!==null&&e.prevCursorPosition>i.length&&(e.prevCursorPosition=null),e.prevCursorPosition!==null){var n=t.getCharChild(e.prevCursorPosition);n&&(n.text===`
`&&n.clearTextSize(),t.emit("cursorout",n,e.prevCursorPosition,t))}if(s!=null){var n=t.getCharChild(s);n&&(n.text===`
`&&n.copyTextSize(t.lastInsertCursor),v4(n),t.emit("cursorin",n,s,t))}t.emit("movecursor",s,e.prevCursorPosition,t),e.prevCursorPosition=s}},m4=Nct;var Gct=function(e){var t=e.prevSelectionStart;if(t!==null){for(var i=e.prevSelectionEnd,s=e.parent,n=t;n<i;n++){var o=s.getCharChild(n);o&&s.emit("cursorout",o,n,s)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},eM=Gct;var kct=function(e){var t=e.prevCursorPosition;if(t!==null){var i=e.parent,s=i.getCharChild(t);s&&i.emit("cursorout",s,t,i),e.prevCursorPosition=null}},iM=kct;var Vct=Phaser.Utils.Objects.GetValue,rM=class extends $g{constructor(t,i){super(t,i),this.setSelectAllWhenFocusEnable(Vct(i,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,t.on("pointerdown",function(s,n,o,r){var a=t.getNearestChild(n,o),p=t.getCharIndex(a);(!this.selectAllWhenFocus||!this.firstClickAfterOpen)&&this.setCursorPosition(p),this.cursorMoveStartIndex=p,this.firstClickAfterOpen=!1},this).on("pointermove",function(s,n,o,r){if(s.isDown){var a=t.getNearestChild(n,o),p=t.getCharIndex(a);this.cursorMoveStartIndex<p?this.selectText(this.cursorMoveStartIndex,p+1):this.selectText(p,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var s=this.onUpdateCallback(i,t,this);s!=null&&(i=s)}return t.text!==i&&t.setText(i),this.isOpened?this.selectionStart!==this.selectionEnd?(iM(this),p4(this)):(eM(this),m4(this)):(eM(this),iM(this)),this}setNumberInput(){return this.onUpdateCallback=jg,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}setRequestCursorPosition(t){return this.isOpened?(this.requestCursorPosition=t,this):this}},g4=rM;var Uct=Phaser.Utils.Objects.GetValue,zct=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"],Wct=function(e,t){var i=Uct(t,"edit");return i===void 0&&(i={}),na(t,i,zct),new g4(e,i)},x4=Wct;var Hct=function(e,t){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var i=t.split("."),s=e,n=0;n<i.length;n++)if(s.hasOwnProperty(i[n]))s=s[i[n]];else return!1;return!0}else return!1},ir=Hct;var nM=function(e){if(e.parentContainer)return nM(e.parentContainer);var t=dg(e);return t?nM(t):e},y4=nM;var Yct=function(e){for(var t=y4(e).cameraFilter,i=e.scene.sys.cameras.cameras,s,n,o=0,r=i.length;o<r;o++)if(s=i[o],n=(t&s.id)>0,!n)return s;return null},C4=Yct;var sM=class extends Et{constructor(t,i){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,i=this.parent,s=C4(i);if(s){i.setScrollFactor(0).setOrigin(.5);var n=t.sys.scale.gameSize,o=n.width,r=n.height,a=1/s.zoom,p=o/2,h=r/2,u=o*a,f=r*a;(i.x!==p||i.y!==h)&&i.setPosition(p,h),(i.width!==u||i.height!==f)&&i.setSize(u,f)}}},Zg=sM;var Xct=Phaser.GameObjects.Zone,aM=class extends Xct{constructor(t){super(t,0,0,2,2),this.fullWindow=new Zg(this)}},Kg=aM;var $ct=function(e,t){var i=!t.textArea;if(!ir(t,"wrap.vAlign")){var s=i?"center":"top";Z(t,"wrap.vAlign",s)}if(ir(t,"wrap.wrapMode")||Z(t,"wrap.wrapMode","char"),!ir(t,"wrap.maxLines")){var s=i?1:void 0;Z(t,"wrap.maxLines",s)}if(i&&Z(t,"wrap.wrapWidth",1/0),ir(t,"wrap.useDefaultTextHeight")||Z(t,"wrap.useDefaultTextHeight",!0),t.edit||(t.edit={}),!ir(t.edit,"inputType")){var s=i?"text":"textarea";Z(t.edit,"inputType",s)}if(t.clickOutSideTarget===!0){var n=new Kg(e);e.add.existing(n),t.clickOutSideTarget=n}return t},S4=$ct;var jct=function(e,t,i,s){if(i===void 0&&(i="."),s===void 0&&(s={}),!e)return s;if(t in e)return Object.assign(s,e[t]);t+=i;for(var n in e)n.startsWith(t)&&(s[n.replace(t,"")]=e[n]);return s},Ah=jct;var Zct=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)},this).on("close",function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)},this)},T4=Zct;var Kct=function(e,t,i){if(i===void 0&&(i={}),Array.isArray(t))for(var s,n=0,o=t.length;n<o;n++)s=t[n],i[s]=e[s];else for(var s in t)i[s]=e[s];return i},sa=Kct;var Jct=function(e,t){for(var i in e)if(!(i in t)||e[i]!==t[i])return!1;for(var i in t)if(!(i in e))return!1;return!0},Sn=Jct;var Qct=function(e){xn(e)||this.setCursorStyle(e).on("cursorin",function(t){var i=this.cursorStyle,s=sa(t.style,i);Sn(i,s)||(t.styleSave=s,t.modifyStyle(i))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},E4=Qct;var qct=function(e){xn(e)||this.setRangeStyle(e).on("rangein",function(t){var i=this.rangeStyle,s=sa(t.style,i);Sn(i,s)||(t.styleSave=s,t.modifyStyle(i))},this).on("rangeout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},P4=qct;var _ct=function(e){xn(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,i=this.focusStyle,s=sa(t,i);Sn(i,s)||(t.styleSave=s,t.modifyStyle(i))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},M4=_ct;var tpt=function(e){var t=e.createCharChild("|");return t.text="",t},w4=tpt;function _e(){}_e.prototype={diff(e,t,i={}){let s=i.callback;typeof i=="function"&&(s=i,i={}),this.options=i;let n=this;function o(d){return s?(setTimeout(function(){s(void 0,d)},0),!0):d}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));let r=t.length,a=e.length,p=1,h=r+a;i.maxEditLength&&(h=Math.min(h,i.maxEditLength));let u=[{newPos:-1,components:[]}],f=this.extractCommon(u[0],t,e,0);if(u[0].newPos+1>=r&&f+1>=a)return o([{value:this.join(t),count:t.length}]);function l(){for(let d=-1*p;d<=p;d+=2){let v,c=u[d-1],m=u[d+1],g=(m?m.newPos:0)-d;c&&(u[d-1]=void 0);let y=c&&c.newPos+1<r,x=m&&0<=g&&g<a;if(!y&&!x){u[d]=void 0;continue}if(!y||x&&c.newPos<m.newPos?(v=ipt(m),n.pushComponent(v.components,void 0,!0)):(v=c,v.newPos++,n.pushComponent(v.components,!0,void 0)),g=n.extractCommon(v,t,e,d),v.newPos+1>=r&&g+1>=a)return o(ept(n,v.components,t,e,n.useLongestToken));u[d]=v}p++}if(s)(function d(){setTimeout(function(){if(p>h)return s();l()||d()},0)})();else for(;p<=h;){let d=l();if(d)return d}},pushComponent(e,t,i){let s=e[e.length-1];s&&s.added===t&&s.removed===i?e[e.length-1]={count:s.count+1,added:t,removed:i}:e.push({count:1,added:t,removed:i})},extractCommon(e,t,i,s){let n=t.length,o=i.length,r=e.newPos,a=r-s,p=0;for(;r+1<n&&a+1<o&&this.equals(t[r+1],i[a+1]);)r++,a++,p++;return p&&e.components.push({count:p}),e.newPos=r,a},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},castInput(e){return e},tokenize(e){return e.split("")},join(e){return e.join("")}};function ept(e,t,i,s,n){let o=0,r=t.length,a=0,p=0;for(;o<r;o++){let u=t[o];if(u.removed){if(u.value=e.join(s.slice(p,p+u.count)),p+=u.count,o&&t[o-1].added){let f=t[o-1];t[o-1]=t[o],t[o]=f}}else{if(!u.added&&n){let f=i.slice(a,a+u.count);f=f.map(function(l,d){let v=s[p+d];return v.length>l.length?v:l}),u.value=e.join(f)}else u.value=e.join(i.slice(a,a+u.count));a+=u.count,u.added||(p+=u.count)}}let h=t[r-1];return r>1&&typeof h.value=="string"&&(h.added||h.removed)&&e.equals("",h.value)&&(t[r-2].value+=h.value,t.pop()),t}function ipt(e){return{newPos:e.newPos,components:e.components.slice(0)}}var rpt=new _e;function oM(e,t,i){return rpt.diff(e,t,i)}var b4=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,R4=/\S/,I4=new _e;I4.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!R4.test(e)&&!R4.test(t)};I4.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let i=0;i<t.length-1;i++)!t[i+1]&&t[i+2]&&b4.test(t[i])&&b4.test(t[i+2])&&(t[i]+=t[i+2],t.splice(i+1,2),i--);return t};var lM=new _e;lM.tokenize=function(e){let t=[],i=e.split(/(\n|\r\n)/);i[i.length-1]||i.pop();for(let s=0;s<i.length;s++){let n=i[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=n:(this.options.ignoreWhitespace&&(n=n.trim()),t.push(n))}return t};var spt=new _e;spt.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var apt=new _e;apt.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var opt=Object.prototype.toString,rf=new _e;rf.useLongestToken=!0;rf.tokenize=lM.tokenize;rf.castInput=function(e){let{undefinedReplacement:t,stringifyReplacer:i=(s,n)=>typeof n>"u"?t:n}=this.options;return typeof e=="string"?e:JSON.stringify(Jg(e,null,null,i),i,"  ")};rf.equals=function(e,t){return _e.prototype.equals.call(rf,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function Jg(e,t,i,s,n){t=t||[],i=i||[],s&&(e=s(n,e));let o;for(o=0;o<t.length;o+=1)if(t[o]===e)return i[o];let r;if(opt.call(e)==="[object Array]"){for(t.push(e),r=new Array(e.length),i.push(r),o=0;o<e.length;o+=1)r[o]=Jg(e[o],t,i,s,n);return t.pop(),i.pop(),r}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),r={},i.push(r);let a=[],p;for(p in e)e.hasOwnProperty(p)&&a.push(p);for(a.sort(),o=0;o<a.length;o+=1)p=a[o],r[p]=Jg(e[p],t,i,s,p);t.pop(),i.pop()}else r=e;return r}var hM=new _e;hM.tokenize=function(e){return e.slice()};hM.join=hM.removeEmpty=function(e){return e};var upt=Phaser.Utils.Array.Remove,dpt=function(e,t){var i=e.text;if(t!==i){if(i==null&&(i=""),upt(e.children,e.lastInsertCursor),t==="")e.removeChildren();else for(var s=oM(i,t),n=0,o=0,r=s.length;o<r;o++){var a=s[o];a.removed?e.removeText(n,a.count):(a.added&&e.insertText(n,a.value),n+=a.count)}e.children.push(e.lastInsertCursor),e.runWrap(),e.isOpened&&e.textEdit.setText(t),e.emit("textchange",t,e)}},O4=dpt;var D4={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}};var Qg=Phaser.Math.Clamp,L4=function(e,t){var i={lineIndex:0,position:0};if(t<0)return i;for(var s=0,n=e.length;s<n;s++){var o=e[s];if(t<=o){i.lineIndex=s;break}t-=o}return i.position=t,i},F4=function(e,t){var i=0,s=t.lineIndex;if(s<0)return i;for(var n=0,o=e.length;n<o;n++){var r=e[n];if(s>n)i+=r;else if(s===n)i+=Math.min(t.position,r);else break}return i},B4={cursorMoveLeft(){if(!this.isOpened)return this;var e=Qg(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=Qg(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=L4(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=Qg(F4(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=L4(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=Qg(F4(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}};var N4=Phaser.Utils.Objects.IsPlainObject,qg=class extends mh{constructor(t,i,s,n,o,r){N4(i)?r=i:N4(n)&&(r=n),r===void 0&&(r={}),S4(t,r);var a=r.text;a&&delete r.text;var p=Ah(r.background,"focus"),h=Ah(r.style,"cursor"),u=Ah(r.style,"range");super(t,i,s,n,o,r),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=x4(this,r),T4.call(this),r.focusStyle&&Object.assign(p,r.focusStyle),M4.call(this,p),r.cursorStyle&&Object.assign(h,r.cursorStyle),E4.call(this,h),r.rangeStyle&&Object.assign(u,r.rangeStyle),xn(u)&&Object.assign(u,h),P4.call(this,u);var f=r.onAddChar;f&&this.on("addchar",f);var l=r.onCursorIn;l&&this.on("cursorin",l);var d=r.onCursorOut;d&&this.on("cursorout",d);var v=!r.onRangeIn&&!r.onRangeOut,c=v?r.onCursorIn:r.onRangeIn;c&&this.on("rangein",c);var m=v?r.onCursorOut:r.onRangeOut;m&&this.on("rangeout",m);var g=r.onMoveCursor;g&&this.on("movecursor",g),this.setParseTextCallback(r.parseTextCallback),this.lastInsertCursor=w4(this),a||(a=""),this.setText(a)}addChild(t,i){if(super.addChild(t,i),Array.isArray(t))for(var s=t,n=0,o=s.length;n<o;n++){var t=s[n];Cr(t)&&this.emit("addchar",t,i+n,this)}else Cr(t)&&this.emit("addchar",t,i,this);return this}get text(){return this._text}set text(t){t==null?t="":t=t.toString(),this._text!==t&&(O4(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var i=super.runWrap(t);this.contentWidth=i.maxLineWidth,this.contentHeight=i.linesHeight,this.lineHeight=i.lineHeight,this.linesCount=i.lines.length,this.characterCountOfLines.length=0;for(var s=i.lines,n=0,o=s.length;n<o;n++){for(var r=s[n].children,a=0,p=0,h=r.length;p<h;p++){var u=r[p];u.active&&!u.removed&&Cr(u)&&a++}this.characterCountOfLines.push(a)}return i}setSize(t,i){return this.width===t&&this.height===i?this:(super.setSize(t,i),this.runWrap(),this)}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=fpt),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setRangeStyle(t){return this.rangeStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(t){this.isOpened&&(this.textEdit.cursorPosition=t,this.textEdit.requestCursorPosition=t)}setCursorPosition(t){return this.cursorPosition=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}},fpt=function(e){return e};Object.assign(qg.prototype,D4,B4);var G4=qg;var k4=G4;var mo=k4;K.register("canvasInput",function(e,t,i,s,n){var o=new mo(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.CanvasInput",mo);var cpt=function(e){return Ki(e).loop.delta},Oh=cpt;var V4=Phaser.Utils.Objects.GetValue,ppt=Phaser.Math.Wrap,uM=class extends $g{constructor(t,i){i===void 0&&(i={}),i.onUpdate==="number"&&(i.onUpdate=jg),super(t,i),this.setCursor(V4(i,"cursor","|")),this.setCursorFlashDuration(V4(i,"cursorFlashDuration",1e3)),this.cursorFlashTimer=0}initText(){return this.cursorFlashTimer=0,this.prevCursorPosition=void 0,this.setText(this.parent.text),this.setCursorPosition(),this}updateText(){var t=this.parent,i=this.text;if(this.onUpdateCallback){var s=this.onUpdateCallback(i,t,this);s!=null&&(i=s)}if(this.isOpened&&this.hasCursor){var n=this.cursorPosition;i=i.substring(0,n)+this.cursor+i.substring(n),this.prevCursorPosition!==n&&(this.prevCursorPosition=n)}return t.text!==i&&(t.setText(i),this.emit("textchange",i,t,this)),this}setCursor(t){return this._cursor=t,this.hasCursor=t&&t!=="",t}setCursorFlashDuration(t){return this.cursorFlashDuration=t,this}get cursor(){if(!this._isFocused)return this._cursor;var t;this.cursorFlashTimer<this.cursorFlashDuration/2?t=this._cursor:t=" ";var i=this.cursorFlashTimer+Oh(this.scene);return this.cursorFlashTimer=ppt(i,0,this.cursorFlashDuration),t}},U4=uM;var z4=U4;var dM=z4;K.register("hiddenEdit",function(e,t){var i=new dM(e,t);return i});Z(window,"RexPlugins.UI.HiddenEdit",dM);var vpt=Phaser.GameObjects.GetCalcMatrix,mpt=function(e,t,i,s){t.updateData(),i.addToRenderList(t);var n=e.pipelines.set(t.pipeline),o=vpt(t,i,s),r=n.calcMatrix.copyFrom(o.calc),a=t._displayOriginX,p=t._displayOriginY,h=i.alpha*t.alpha;e.pipelines.preBatch(t);for(var u=t.geom,f,l=0,d=u.length;l<d;l++)f=u[l],f.visible&&f.webglRender(n,r,h,a,p);e.pipelines.postBatch(t)},W4=mpt;var gpt=Phaser.Renderer.Canvas.SetTransform,xpt=function(e,t,i,s){t.updateData(),i.addToRenderList(t);var n=e.currentContext;if(gpt(e,n,t,i,s)){for(var o=t._displayOriginX,r=t._displayOriginY,a=t.geom,p,h=0,u=a.length;h<u;h++)p=a[h],p.visible&&p.canvasRender(n,o,r);n.restore()}},H4=xpt;var Y4={renderWebGL:W4,renderCanvas:H4};var ypt=Phaser.GameObjects.Shape,Cpt=Phaser.Utils.Array.Remove,_g=class extends ypt{constructor(t,i,s,n,o){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=2),o===void 0&&(o=n),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(i,s),this.setSize(n,o),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,i){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==i,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=i,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=i),this}resize(t,i){return this.setSize(t,i),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==i,this._fillColor=t,this._fillAlpha=i,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,i,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==i||this.strokeAlpha!==s,this._lineWidth=t,this._strokeColor=i,this._strokeAlpha=s,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,i=0,s=t.length;i<s;i++){var n=t[i];n.dirty&&n.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,Ji(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var i=t.name;return i&&(this.shapes[i]=t),this.dirty=!0,this}deleteShape(t){var i=this.getShape(t);return i&&(delete this.shapes[t],Cpt(this.geom,i)),this}};Object.assign(_g.prototype,Y4);var xi=_g;var X4={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==i,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=i,this},setUncheckedBoxStrokeStyle(e,t,i){return i===void 0&&(i=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==i,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=i,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e?this:(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0,this)}};var $4={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}};var Spt=function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},Tpt=function(e,t,i){return e==null||t==null?this.isStroked=!1:(i===void 0&&(i=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=i),this},j4={fillStyle:Spt,lineStyle:Tpt};var t0=class{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,i,s,n,o){}canvasRender(t,i,s){}updateData(){this.dirty=!1}};Object.assign(t0.prototype,j4,Hs);var Dh=t0;var Ept=Phaser.Geom.Polygon.Earcut,fM=class extends Dh{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=Ept(this.pathData),super.updateData(),this}webglRender(t,i,s,n,o){this.isFilled&&Dv(t,i,this,s,n,o),this.isStroked&&Ys(t,this,s,n,o)}canvasRender(t,i,s){var n=this.pathData,o=n.length-1,r=n[0]-i,a=n[1]-s;t.beginPath(),t.moveTo(r,a),this.closePath||(o-=2);for(var p=2;p<o;p+=2){var h=n[p]-i,u=n[p+1]-s;t.lineTo(h,u)}this.closePath&&t.closePath(),this.isFilled&&(fn(t,this),t.fill()),this.isStroked&&(cn(t,this),t.stroke())}},Tn=fM;var Z4=Phaser.Math.DegToRad,cM=class extends Tn{constructor(t,i,s,n,o,r,a,p){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=0),o===void 0&&(o=0),r===void 0&&(r=360),a===void 0&&(a=!1),p===void 0&&(p=!1),super(),this.setCenterPosition(t,i),this.setRadius(s,n),this.setAngle(o,r,a),this.setPie(p),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,i){return i===void 0&&(i=t),this.x=t,this.y=i,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,i){return i===void 0&&(i=t),this.radiusX=t,this.radiusY=i,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,i,s){return s===void 0&&(s=!1),this.startAngle=t,this.endAngle=i,this.anticlockwise=s,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Re(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,i,s){t.beginPath();var n=this.x-i,o=this.y-s,r=Z4(this.startAngle),a=Z4(this.endAngle);this.pie&&(t.moveTo(n,o),t.lineTo(n+Math.cos(r)*this.radiusX,o+Math.sin(r)*this.radiusY)),t.ellipse(n,o,this.radiusX,this.radiusY,0,r,a,this.anticlockwise),this.pie&&t.lineTo(n,o),this.isFilled&&(fn(t,this),t.fill()),this.isStroked&&(cn(t,this),t.stroke())}},rr=cM;var pM=class extends rr{constructor(t,i,s){super(t,i,s,s,0,360)}},Se=pM;var vM=class extends Tn{constructor(t){super(),this.setCurve(t),this.setIterations(32)}get curve(){return this._curve}set curve(t){this.dirty=this.dirty||this._curve!==t,this._curve=t}setCurve(t){return this.curve=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){this.pathData.length=0;for(var t=this.curve.getPoints(this.iterations),i=0,s=t.length;i<s;i++)this.pathData.push(t[i].x,t[i].y);return this.pathData.push(t[0].x,t[0].y),super.updateData(),this}},mM=vM;var gM=class extends rr{constructor(t,i,s,n){super(t,i,s,n,0,360)}},xM=gM;var yM=class extends Tn{constructor(t,i,s,n){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=0),super(),this.setP0(t,i),this.setP1(s,n)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}},yi=yM;var Ppt=function(e,t,i){return i.length=0,e!=null&&i.push(e,t),i},K4=Ppt;var J4=Phaser.Math.Interpolation.QuadraticBezier,Mpt=function(e,t,i,s,n,o){for(var r=o.length,a=o[r-2],p=o[r-1],h=1,u=n-1;h<=u;h++){var f=h/u;o.push(J4(f,a,e,i),J4(f,p,t,s))}return o},Q4=Mpt;var q4=Phaser.Math.Interpolation.CubicBezier,wpt=function(e,t,i,s,n,o,r,a){for(var p=a.length,h=a[p-2],u=a[p-1],f=1,l=r-1;f<=l;f++){var d=f/l;a.push(q4(d,h,e,i,n),q4(d,u,t,s,o))}return a},_4=wpt;var t5=Phaser.Math.Interpolation.CatmullRom,bpt=function(e,t,i){for(var s=i.length,n=i[s-2],o=i[s-1],r=[n],a=[o],p=0,h=e.length;p<h;p+=2)r.push(e[p]),a.push(e[p+1]);for(var p=1,u=t-1;p<=u;p++){var f=p/u;i.push(t5(r,f),t5(a,f))}return i},e5=bpt;var Rpt=function(e){var t=e.length;if(t<2)return e;var i=e[t-2],s=e[t-1];return e.push(i),e.push(s),e},e0=Rpt;var i5={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,K4(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,i){return i===void 0&&(i=!1),i&&(e+=this.lastPointX,t+=this.lastPointY),Ee(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,i,s,n,o,r){return r===void 0&&(r=!1),Re(e,t,i,s,n,o,r,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,i,s,n,o){return this.ellipticalArc(e,t,i,i,s,n,o),this},quadraticBezierTo(e,t,i,s){return Q4(e,t,i,s,this.iterations,this.pathData),this.lastPointX=i,this.lastPointY=s,this},cubicBezierTo(e,t,i,s,n,o){return _4(e,t,i,s,n,o,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=o,this},catmullRomTo(...e){return e5(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return(e!==this.lastPointX||t!==this.lastPointY)&&this.lineTo(e,t),this.closePath=!0,this},end(){return e0(this.pathData),this}};var Ipt=Phaser.Math.RotateAround,Apt=function(e,t,i,s){for(var n={x:0,y:0},o=0,r=s.length-1;o<r;o+=2)n.x=s[o],n.y=s[o+1],Ipt(n,e,t,i),s[o]=n.x,s[o+1]=n.y;return s},r5=Apt;var Opt=function(e,t,i,s,n){for(var o=0,r=n.length-1;o<r;o+=2){var a=n[o]-e,p=n[o+1]-t;a*=i,p*=s,n[o]=a+e,n[o+1]=p+t}return n},n5=Opt;var Dpt=function(e,t,i){for(var s=0,n=i.length-1;s<n;s+=2)i[s]+=e,i[s+1]+=t;return i},i0=Dpt;var Lpt=Phaser.Math.DegToRad,rne=Phaser.Math.RotateAround,s5={rotateAround(e,t,i){if(this.pathData.length===0)return this;i=Lpt(i),r5(e,t,i,this.pathData);var s=this.pathData.length;return this.lastPointX=this.pathData[s-2],this.lastPointY=this.pathData[s-1],this},scale(e,t,i,s){return this.pathData.length===0?this:(n5(e,t,i,s,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1],this)},offset(e,t){return i0(e,t,this.pathData),this}};var Fpt=function(e,t,i,s){i===void 0&&(i=0),s===void 0&&(s=t.length),e.length=s-i;for(var n=0,o=e.length;n<o;n++)e[n]=t[n+i];return e},go=Fpt;var a5={savePathData(){return this.pathDataSaved?this:(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0,this)},restorePathData(){return this.pathDataSaved?(go(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}};var Bpt=Phaser.Math.Distance.Between,Npt=Phaser.Math.Wrap,Gpt=Phaser.Math.Linear,o5=function(e,t,i,s,n){if(s===void 0&&(s=i,i=0),i=l5(i),s=l5(s),i!==s){var o=t[t.length-1],r=o*i,a=o*s;i<s?CM(e,t,r,a,n):(CM(e,t,r,o,n),CM(e,t,0,a,n)),e0(n)}},CM=function(e,t,i,s,n){for(var o=i>0,r=0,a=t.length;r<a;r++){var p=r*2,h=t[r];if(o){if(h<i)continue;if(h==i)o=!1;else{var u=h-t[r-1],f=1-(h-i)/u;n.push(r0(e,p-2,p,f)),n.push(r0(e,p-1,p+1,f)),o=!1}}if(h<=s){if(n.push(e[p]),n.push(e[p+1]),h===s)break}else{var u=h-t[r-1],f=1-(h-s)/u;n.push(r0(e,p-2,p,f)),n.push(r0(e,p-1,p+1,f));break}}},r0=function(e,t,i,s){var n=e[t],o=e[i];return Gpt(n,o,s)},l5=function(e){return e===0?0:e%1===0?1:Npt(e,0,1)},h5={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e=this.accumulationLengths,t=this.pathData,i,s,n,o,r,a=0,p=0,h=t.length;p<h;p+=2)n=t[p],o=t[p+1],r=i===void 0?0:Bpt(i,s,n,o),a+=r,e.push(a),i=n,s=o;return this.totalPathLength=a,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,o5(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,i){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),o5(e.pathData,e.accumulationLengths,t,i,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}};var u5={draw(e,t,i){var s=this.toPoints();return t&&e.fillPoints(s,this.closePath,this.closePath),i&&e.strokePoints(s,this.closePath,this.closePath),this}};var kpt=function(e,t){t===void 0&&(t=[]);for(var i=0,s=e.length-1;i<s;i+=2)t.push({x:e[i],y:e[i+1]});return t},d5=kpt;var Vpt=Phaser.Geom.Polygon,Upt=function(e,t){return t===void 0&&(t=new Vpt),t.setTo(e),t},f5=Upt;var n0=class{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return d5(this.pathData)}toPolygon(t){return f5(this.pathData,t)}};Object.assign(n0.prototype,i5,s5,a5,h5,u5);var c5=n0;var SM=class extends Tn{constructor(){super(),this.builder=new c5(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,i){return this.builder.startAt(t,i),this.dirty=!0,this}lineTo(t,i,s){return this.builder.lineTo(t,i,s),this.dirty=!0,this}verticalLineTo(t,i){return this.builder.verticalLineTo(t,i),this.dirty=!0,this}horizontalLineTo(t,i){return this.builder.horizontalLineTo(t,i),this.dirty=!0,this}ellipticalArc(t,i,s,n,o,r,a){return this.builder.ellipticalArc(t,i,s,n,o,r,a),this.dirty=!0,this}arc(t,i,s,n,o,r){return this.builder.arc(t,i,s,n,o,r),this.dirty=!0,this}quadraticBezierTo(t,i,s,n){return this.builder.quadraticBezierTo(t,i,s,n),this.dirty=!0,this}cubicBezierTo(t,i,s,n,o,r){return this.builder.cubicBezierTo(t,i,s,n,o,r),this.dirty=!0,this}catmullRomTo(...t){return this.builder.catmullRomTo(...t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,i,s){return this.builder.rotateAround(t,i,s),this.dirty=!0,this}scale(t,i,s,n){return this.builder.scale(t,i,s,n),this.dirty=!0,this}offset(t,i){return this.builder.offset(t,i),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,i,s){return this.builder.appendFromPathSegment(t.builder,i,s),this}copyPathFrom(t,i,s){return this.builder.clear().appendFromPathSegment(t.builder,i,s),this}setDisplayPathSegment(t,i){return this.builder.setDisplayPathSegment(t,i),this}},le=SM;var zpt=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,TM=class extends Dh{constructor(t,i,s,n){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=s),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(t,i),this.setSize(s,n)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}updateData(){this.pathData.length=0;var t=this.x,i=t+this.width,s=this.y,n=s+this.height;return this.pathData.push(t,s),this.pathData.push(i,s),this.pathData.push(i,n),this.pathData.push(t,n),this.pathData.push(t,s),super.updateData(),this}webglRender(t,i,s,n,o){if(this.isFilled){var r=t.fillTint,a=zpt(this.fillColor,this.fillAlpha*s);r.TL=a,r.TR=a,r.BL=a,r.BR=a,t.batchFillRect(-n+this.x,-o+this.y,this.width,this.height)}this.isStroked&&Ys(t,this,s,n,o)}canvasRender(t,i,s){this.isFilled&&(fn(t,this),t.fillRect(-i,-s,this.width,this.height)),this.isStroked&&(cn(t,this),t.beginPath(),t.rect(-i,-s,this.width,this.height),t.stroke())}},EM=TM;var s0=Phaser.Utils.Objects.GetValue,PM=class extends Tn{constructor(t,i,s,n,o,r){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=s),o===void 0&&(o=0),r===void 0&&(r=6),super(),this.setTopLeftPosition(t,i),this.setSize(s,n),this.setRadius(o),this.setIterations(r),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,i){return this.width=t,this.height=i,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,i){return this.centerX=t,this.centerY=i,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var i=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==i,this._convexTL=i,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var i=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==i,this._convexTR=i,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var i=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==i,this._convexBL=i,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var i=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==i,this._convexBR=i,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=s0(t,"tl",0),this.radiusTR=s0(t,"tr",0),this.radiusBL=s0(t,"bl",0),this.radiusBR=s0(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var i=this.width,s=this.height,n,o=this.iterations+1;if(n=this.radiusTL,n>0)if(this._convexTL){var r=n,a=n;Re(r,a,n,n,180,270,!1,o,t)}else{var r=0,a=0;Re(r,a,n,n,90,0,!0,o,t)}else Ee(0,0,t);if(n=this.radiusTR,n>0)if(this._convexTR){var r=i-n,a=n;Re(r,a,n,n,270,360,!1,o,t)}else{var r=i,a=0;Re(r,a,n,n,180,90,!0,o,t)}else Ee(i,0,t);if(n=this.radiusBR,n>0)if(this._convexBR){var r=i-n,a=s-n;Re(r,a,n,n,0,90,!1,o,t)}else{var r=i,a=s;Re(r,a,n,n,270,180,!0,o,t)}else Ee(i,s,t);if(n=this.radiusBL,n>0)if(this._convexBL){var r=n,a=s-n;Re(r,a,n,n,90,180,!1,o,t)}else{var r=0,a=s;Re(r,a,n,n,360,270,!0,o,t)}else Ee(0,s,t);return t.push(t[0],t[1]),i0(this.x,this.y,t),super.updateData(),this}},aa=PM;var Wpt=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,MM=class extends Dh{constructor(t,i,s,n,o,r){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=0),o===void 0&&(o=0),r===void 0&&(r=0),super(),this.pathData=[],this.closePath=!0,this.setP0(t,i),this.setP1(s,n),this.setP2(o,r)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,i){return this.x0=t,this.y0=i,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,i){return this.x1=t,this.y1=i,this}get x2(){return this._x2}set x2(t){this.dirty=this.dirty||this._x2!==t,this._x2=t}get y2(){return this._y2}set y2(t){this.dirty=this.dirty||this._y2!==t,this._y2=t}setP2(t,i){return this.dirty=this.dirty||this.x2!==t||this.y2!==i,this.x2=t,this.y2=i,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(t,i,s,n,o){if(this.isFilled){var r=Wpt(this.fillColor,this.fillAlpha*s),a=this.x0-n,p=this.y0-o,h=this.x1-n,u=this.y1-o,f=this.x2-n,l=this.y2-o,d=i.getX(a,p),v=i.getY(a,p),c=i.getX(h,u),m=i.getY(h,u),g=i.getX(f,l),y=i.getY(f,l);t.batchTri(d,v,c,m,g,y,r,r,r)}this.isStroked&&Ys(t,this,s,n,o)}canvasRender(t,i,s){var n=this.x1-i,o=this.y1-s,r=this.x2-i,a=this.y2-s,p=this.x3-i,h=this.y3-s;t.beginPath(),t.moveTo(n,o),t.lineTo(r,a),t.lineTo(p,h),t.closePath(),this.isFilled&&(fn(t,this),t.fill()),this.isStroked&&(cn(t,this),t.stroke())}},wM=MM;var p5={buildShapes(){this.addShape(new aa().setName("box")).addShape(new le().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,i=Math.min(e,t),s=i*2,n=e-i,o=t-i,r=this.boxLineWidth,a=Math.max(s/10,2),p=this.getShape("box"),h=this.getShape("checker");if(this.isSizeChanged){var l=s*(1-this.boxSize)/2,u=r/2,f=s*this.boxSize-r;p.setTopLeftPosition(n+u+l,o+u+l).setSize(f,f),this.isCircleShape?p.setRadius(f/2):p.setRadius(0);var l=s*(1-this.checkerSize)/2,d=s*this.checkerSize/4,v=0,c=d*1,m=d*2,g=d*3;h.startAt(c,m).lineTo(m,g).lineTo(g,c).offset(n+l,o+l).end()}this.checked?(p.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(r,this.boxStrokeColor,this.boxStrokeAlpha),h.lineStyle(a,this.checkerColor)):(p.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(r,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),h.lineStyle()),this.checked&&h.setDisplayPathSegment(this.checkerAnimProgress)}};var oa=Phaser.Utils.Objects.GetValue,Hpt=Phaser.Math.Linear,bM=class extends Ai{constructor(t,i){super(t,i),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var i=this.target;this.propertyKey=oa(t,"key","value");var s=i[this.propertyKey];return this.fromValue=oa(t,"from",s),this.toValue=oa(t,"to",s),this.setEase(oa(t,"ease",this.ease)),this.setDuration(oa(t,"duration",this.duration)),this.setRepeat(oa(t,"repeat",0)),this.setDelay(oa(t,"delay",0)),this.setRepeatDelay(oa(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),i[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,i){var s=i.t;s=this.easeFn(s),t[this.propertyKey]=Hpt(this.fromValue,this.toValue,s)}},We=bM;var v5={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new We(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0?this:(this.checkerAnimProgressTask.stop(),this)}};var m5={};Object.assign(m5,X4,$4,p5,v5);var g5=m5;var Ie=Phaser.Utils.Objects.GetValue,x5=Phaser.Utils.Objects.IsPlainObject,a0=class extends xi{constructor(t,i,s,n,o,r,a){x5(i)?(a=i,i=Ie(a,"x",0),s=Ie(a,"y",0),n=Ie(a,"width",2),o=Ie(a,"height",2),r=Ie(a,"color",23730)):x5(r)&&(a=r,r=Ie(a,"color",23730)),super(t,i,s,n,o),this.type="rexCheckbox",r===void 0&&(r=23730),this.setBoxShape(Ie(a,"circleBox",!1)),this.setBoxFillStyle(r,Ie(a,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Ie(a,"uncheckedColor",null),Ie(a,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Ie(a,"boxLineWidth",4),Ie(a,"boxStrokeColor",r),Ie(a,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Ie(a,"uncheckedBoxStrokeColor",this.boxStrokeColor),Ie(a,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Ie(a,"checkerColor",16777215),Ie(a,"checkerAlpha",1)),this.setBoxSize(Ie(a,"boxSize",1)),this.setCheckerSize(Ie(a,"checkerSize",1)),this.setCheckerAnimationDuration(Ie(a,"animationDuration",150)),this.buildShapes();var p=Ie(a,"checked");p===void 0&&(p=Ie(a,"value",!1)),this.setValue(p)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,t?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",t))}setValue(t){return this.value=t,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(t){this.value=t}setChecked(t){return t===void 0&&(t=!0),this.setValue(t),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(t){this._checkerAnimProgress!==t&&(this._checkerAnimProgress=t,this.dirty=!0)}};Object.assign(a0.prototype,g5);var y5=a0;var nf=Phaser.Utils.Objects.GetValue,RM=class extends Et{constructor(t,i){super(t,i),this._enable=void 0,t.setInteractive(nf(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(nf(t,"enable",!0)),this.setMode(nf(t,"mode",1)),this.setClickInterval(nf(t,"clickInterval",100)),this.setDragThreshold(nf(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Xpt[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,i,s,n){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,n),this.mode===0&&this.click(t.downTime,t,n))}onRelease(t,i,s,n){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,n),this.mode===1&&this.click(t.upTime,t,n),this.pointer=void 0)}onPointOut(t,i){this.pointer===t&&this.cancel()}onMove(t,i,s,n){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,i,s,n){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,n),this):this}onOut(t,i){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,i),this):this}click(t,i,s){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,i,s),this;this.pointer=void 0;var n=this.lastClickTime;return n!==void 0&&t-n<=this.clickInterval?this:(this.lastClickTime=t,this.emit("click",this,this.parent,i,s),this)}cancel(){return this.pointer=void 0,this}},Xpt={press:0,pointerdown:0,release:1,pointerup:1},En=RM;var la=Phaser.Utils.Objects.GetValue,C5=Phaser.Utils.Objects.IsPlainObject,IM=class extends y5{constructor(t,i,s,n,o,r,a){C5(i)?(a=i,i=la(a,"x",0),s=la(a,"y",0),n=la(a,"width",2),o=la(a,"height",2),r=la(a,"color",23730)):C5(r)&&(a=r,r=la(a,"color",23730)),super(t,i,s,n,o,r,a),this._click=new En(this,la(a,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(la(a,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}},S5=IM;var T5=S5;var sf=T5;K.register("checkbox",function(e,t,i,s,n,o){var r=new sf(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.Checkbox",sf);var E5={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}};var P5={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}};var M5={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};var $pt=function(e,t,i){return(t-e)*i+e},o0=$pt;var jpt=function(e,t,i){var s=o0(Qs(e),Qs(t),i),n=o0(qs(e),qs(t),i),o=o0(_s(e),_s(t),i);return(s&255)<<16|(n&255)<<8|o&255},w5=jpt;var b5=Phaser.Math.Linear,R5={buildShapes(){this.addShape(new aa().setName("track")).addShape(new aa().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,i=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,s=this.getShape("track");if(this.isSizeChanged){var n=e*this.trackWidth,o=t*this.trackHeight,r=(e-n)/2,a=(t-o)/2,p=t*this.trackRadius;s.setTopLeftPosition(r,a).setSize(n,o).setRadius(p)}var h=w5(this.falseValueTrackColor,this.trackFillColor,i),u=b5(this.falseValueTrackFillAlpha,this.trackFillAlpha,i);s.fillStyle(h,u);var f=this.getShape("thumb");if(this.isSizeChanged){var l=e*this.thumbWidth,d=t*this.thumbHeight,v=t*this.thumbRadius;f.setSize(l,d).setRadius(v)}var c=b5(this.thumbLeftX,this.thumbRightX,i)*e;this.rtl&&(c=e-c);var m=t/2;f.setCenterPosition(c,m),f.fillStyle(this.thumbColor,this.thumbAlpha)}};var I5={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new We(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0?this:(this.toggleAnimProgressTask.stop(),this)}};var A5={};Object.assign(A5,E5,P5,M5,R5,I5);var O5=A5;var Zpt=function(e){var t=.3*Qs(e)+.59*qs(e)+.11*_s(e);return(t&255)<<16|(t&255)<<8|t&255},D5=Zpt;var Ae=Phaser.Utils.Objects.GetValue,L5=Phaser.Utils.Objects.IsPlainObject,AM=23730,Kpt=16777215,l0=class extends xi{constructor(t,i,s,n,o,r,a){L5(i)?(a=i,i=Ae(a,"x",0),s=Ae(a,"y",0),n=Ae(a,"width",2),o=Ae(a,"height",2),r=Ae(a,"color",AM)):L5(r)&&(a=r,r=Ae(a,"color",AM)),super(t,i,s,n,o),this.type="rexToggleSwitch",r===void 0&&(r=AM),this.setTrackFillStyle(r,Ae(a,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Ae(a,"falseValueTrackColor",D5(r)),Ae(a,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Ae(a,"thumbColor",Kpt),Ae(a,"thumbAlpha",1)),this.setTrackSize(Ae(a,"trackWidth",.9),Ae(a,"trackHeight",.5)),this.setTrackRadius(Ae(a,"trackRadius",this.trackHeight*.5));var p=Ae(a,"thumbHeight",void 0),h=Ae(a,"thumbWidth",p);h===void 0&&(h=this.trackHeight*.9),this.setThumbSize(h,p),this.setThumbRadius(Ae(a,"thumbRadius",this.thumbHeight*.5)),this.setThumbPosition(Ae(a,"thumbLeft",.3),Ae(a,"thumbRight",void 0)),this.setRTL(Ae(a,"rtl",!1)),this.setToggleAnimationDuration(Ae(a,"animationDuration",150)),this.buildShapes(),this.setValue(Ae(a,"value",!1),0)}get value(){return this._value}set value(t){t=!!t,this._value!==t&&(this.dirty=!0,this._value=t,this.playToggleAnimation(),this.emit("valuechange",t))}setValue(t,i){i===void 0&&(i=this.toggleAnimDuration);var s=this.toggleAnimDuration;return this.toggleAnimDuration=i,this.value=t,this.toggleAnimDuration=s,this}toggleValue(t){return this.setValue(!this.value,t),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(t){this._toggleAnimProgress!==t&&(this._toggleAnimProgress=t,this.dirty=!0)}};Object.assign(l0.prototype,O5);var F5=l0;var B5=Phaser.Utils.Objects.GetValue,OM=class extends F5{constructor(t,i,s,n,o,r,a){super(t,i,s,n,o,r,a),this._click=new En(this,B5(a,"click")),this._click.on("click",function(){this.toggleValue()},this),this.setReadOnly(B5(a,"readOnly",!1))}get readOnly(){return!this._click.enable}set readOnly(t){this._click.enable=!t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}},N5=OM;var G5=N5;var af=G5;K.register("toggleSwitch",function(e,t,i,s,n,o){var r=new af(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.ToggleSwitch",af);var k5={loadFromURL(e,t){var i=this,s=new Image;return s.onload=function(){i.width!==s.width||i.height!==s.height?i.resize(s.width,s.height):i.clear(),i.context.drawImage(s,0,0),i.updateTexture(),t&&t(),s.onload=null,s.src="",s.remove()},s.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(i,s){t.loadFromURL(e,i)})},loadFromFile(e,t){var i=URL.createObjectURL(e);return this.loadFromURL(i,function(){URL.revokeObjectURL(i),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(i,s){t.loadFromFile(e,i)})}};var h0=class extends Vi{};Object.assign(h0.prototype,k5);var V5=h0;var U5=V5;var Jr=U5;K.register("canvas",function(e,t,i,s){var n=new Jr(this.scene,e,t,i,s);return this.scene.add.existing(n),n});Z(window,"RexPlugins.UI.Canvas",Jr);var Fh=Phaser.Utils.Objects.GetValue,DM=class extends Vi{constructor(t,i,s,n,o,r){super(t,i,s),this.type="rexCircleMaskImage",this.setTexture(n,o,r)}setTexture(t,i,s){typeof i=="object"&&(s=i,i=void 0),typeof s=="string"&&(s={maskType:s});var n=Fh(s,"maskType",0),o=Fh(s,"backgroundColor",void 0),r=Fh(s,"strokeColor",void 0),a=r!=null?10:0,p=Fh(s,"strokeWidth",a);if(n===void 0?n=0:typeof n=="string"&&(n=Jpt[n]),this._textureKey=t,this._frameName=i,n===null)return this.loadTexture(t,i),this.dirty=!0,this;var h=this.scene.sys.textures.getFrame(t,i);if(!h)return this;h.cutWidth!==this.width||h.cutHeight!==this.height?this.setCanvasSize(h.cutWidth,h.cutHeight):this.clear();var u=this.canvas,f=this.context,l=u.width,d=u.height;o!=null&&(f.fillStyle=o,f.fillRect(0,0,l,d)),f.save(),f.beginPath();var v=p/2;switch(n){case 1:var x=Math.floor(l/2),C=Math.floor(d/2),c=x-v,m=C-v;f.ellipse(x,C,c,m,0,0,2*Math.PI);break;case 2:var g=Fh(s,"radius",0),y=Fh(s,"iteration",void 0);zv(f,v,v,l-p,d-p,g,y);break;default:var x=Math.floor(l/2),C=Math.floor(d/2),S=Math.min(x,C)-v;f.arc(x,C,S,0,2*Math.PI);break}return r!=null&&(f.strokeStyle=r,f.lineWidth=p,f.stroke()),f.clip(),this.loadTexture(t,i),f.restore(),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}},Jpt={circle:0,ellipse:1,roundRectangle:2},z5=DM;var W5=z5;var LM=W5;K.register("circleMaskImage",function(e,t,i,s,n){var o=new LM(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.CircleMaskImage",LM);var of=Phaser.Utils.Objects.GetValue,FM=class extends Vi{constructor(t,i,s,n,o,r){super(t,i,s),this.type="rexAlphaMaskImage",this.maskFrame=null,this.setTexture(n,o,r)}setTexture(t,i,s){typeof i=="object"&&(s=i,i=void 0),typeof s=="string"&&(s={mask:{key:s}});var n=of(s,"mask.key"),o=of(s,"mask.frame"),r=of(s,"mask.invertAlpha",!1),a=of(s,"mask.scale"),p=of(s,"backgroundColor");if(n){this._maskKey=n,this._maskFrame=o,this._maskScale=a;var h=n?this.scene.sys.textures.get(n):null;this.maskFrame=h?h.get(o):null}this._textureKey=t,this._frameName=i;var u=this.maskFrame;if(u===null)return this.loadTexture(t,i),this.dirty=!0,this;var f=p!=null;this.loadTexture(t,i);var l=this.canvas,d=this.context,v=l.width,c=l.height;d.save(),d.globalCompositeOperation=r?"destination-out":"destination-in";var m,g;this._maskScale!=null?(m=u.cutWidth*this._maskScale,g=u.cutHeight*this._maskScale):(m=v,g=c);var y=(v-m)/2,x=(c-g)/2;return this.drawFrame(this._maskKey,this._maskFrame,y,x,m,g),d.restore(),f&&(d.save(),d.globalCompositeOperation="destination-over",d.fillStyle=p,d.fillRect(0,0,v,c),d.restore()),this.dirty=!0,this}resize(t,i){return this.setDisplaySize(t,i),this}},H5=FM;var Y5=H5;var BM=Y5;K.register("alphaMaskImage",function(e,t,i,s,n){var o=new BM(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.AlphaMaskImage",BM);var Qpt=Phaser.Math.Linear,X5=Phaser.Math.Percent,$5={setValue(e,t,i){return e==null?this:(t!==void 0&&(e=X5(e,t,i)),this.value=e,this)},addValue(e,t,i){return t!==void 0&&(e=X5(e,t,i)),this.value+=e,this},getValue(e,t){var i=this.value;return e!==void 0&&t!==void 0&&(i=Qpt(e,t,i)),i}};var qpt=Phaser.Math.Percent,j5={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,i){return e==null?this:(t!==void 0&&(e=qpt(e,t,i)),this.easeValueTask===void 0&&(this.easeValueTask=new We(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction}),this)},easeValueRepeat(e,t,i,s){return i===void 0&&(i=-1),s===void 0&&(s=0),this.easeValueTask===void 0&&(this.easeValueTask=new We(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:i,repeatDelay:s}),this}};var lf=Phaser.Utils.Objects.GetValue,_pt=Phaser.Math.Clamp;function Ci(e){class t extends e{bootProgressBase(s){this.eventEmitter=lf(s,"eventEmitter",this);var n=lf(s,"valuechangeCallback",null);if(n!==null){var o=lf(s,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",n,o)}return this.setEaseValuePropName("value").setEaseValueDuration(lf(s,"easeValue.duration",0)).setEaseValueFunction(lf(s,"easeValue.ease","Linear")),this}get value(){return this._value}set value(s){s=_pt(s,0,1);var n=this._value,o=n!=s;this.dirty=this.dirty||o,this._value=s,o&&this.eventEmitter.emit("valuechange",this._value,n,this.eventEmitter)}}return Object.assign(t.prototype,$5,j5),t}var tvt=Phaser.Math.RadToDeg,Z5=Phaser.Math.DegToRad,K5=function(e,t,i,s,n,o,r,a){var p=Math.abs(r-o)===360,h=Z5(o),u=Z5(r),f=Math.cos(h),l=Math.sin(h),d=Math.cos(u),v=Math.sin(u);return e.startAt(t+f*s,i+l*s),e.arc(t,i,s,o,r,a),p&&n===0||(e.lineTo(t+d*n,i+v*n),n>0&&e.arc(t,i,n,r,o,!a)),e.close(),e},J5={buildShapes(){var e=this.iterations;this.addShape(new le().setIterations(e).setName("track")).addShape(new le().setIterations(e).setName("bar")).addShape(new Se().setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,i=this.radius,s=i-t,n=this.getShape("track");this.trackColor!=null&&this.thickness>0?(n.fillStyle(this.trackColor),K5(n,e,e,i,s,0,360,!1)):n.reset();var o=this.getShape("bar");if(this.barColor!=null&&this.thickness>0){var r,a,p;if(this.value===1)r=!1,a=0,p=360;else{r=this.anticlockwise,a=tvt(this.startAngle);var h=360*(r?1-this.value:this.value);p=h+a}o.fillStyle(this.barColor),K5(o,e,e,i+1,s-1,a,p,!1)}else o.reset();var u=this.getShape("center");this.centerColor&&s>0?u.setCenterPosition(e,e).setRadius(s).fillStyle(this.centerColor):u.reset()}};var Qr=Phaser.Utils.Objects.GetValue,evt=Phaser.Utils.Objects.IsPlainObject,ivt=Phaser.Math.Clamp,rvt=Phaser.Math.DegToRad(270),u0=class extends Ci(xi){constructor(t,i,s,n,o,r,a){evt(i)&&(a=i,i=Qr(a,"x",0),s=Qr(a,"y",0),n=Qr(a,"radius",1),o=Qr(a,"barColor",void 0),r=Qr(a,"value",0)),n===void 0&&(n=1);var p=n*2;super(t,i,s,p,p),this.type="rexCircularProgress",this.bootProgressBase(a),this.setRadius(n),this.setTrackColor(Qr(a,"trackColor",void 0)),this.setBarColor(o),this.setCenterColor(Qr(a,"centerColor",void 0)),this.setThickness(Qr(a,"thickness",.2)),this.setStartAngle(Qr(a,"startAngle",rvt)),this.setAnticlockwise(Qr(a,"anticlockwise",!1)),this.iterations=Qr(a,"iterations",128),this.buildShapes(),this.setValue(r)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=ivt(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}};Object.assign(u0.prototype,J5);var Q5=u0;var q5=Q5;var NM=q5;K.register("circularProgress",function(e,t,i,s,n,o){var r=new NM(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.CircularProgress",NM);var nvt=function(e,t,i,s,n,o,r,a,p,h,u,f){h===void 0&&(h=0),u===void 0&&(u=2*Math.PI),f===void 0&&(f=!1),t.beginPath(),t.ellipse(i,s,n,o,0,h,u,f),r!=null&&(t.fillStyle=r,t.fill()),a!=null&&(t.strokeStyle=a,t.lineWidth=p,t.stroke())},d0=nvt;var _5=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],svt=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074],GM={},t9;for(hf=0,e9=_5.length;hf<e9;hf++)t9=_5[hf].toLowerCase(),GM[t9]=svt[hf];var hf,e9,i9=function(e){return e=e.toLowerCase(),GM.hasOwnProperty(e)?GM[e]:null};var avt=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):e=i9(e)),e},uf=avt;var ovt=Phaser.Math.DegToRad,kM=Phaser.Math.Linear,lvt=function(e,t,i,s,n,o,r,a,p,h,u,f,l){h===void 0&&(h=0),u===void 0&&(u=2*Math.PI),f===void 0&&(f=!1),l===void 0&&(l=2),r=uf(r),a=uf(a),df=wP(r,df),ff=wP(a,ff);var d=ovt(l),v;f?v=h-u:v=u-h,v<0&&(v+=2*Math.PI);var c=Math.ceil(v/d),m=v/c;f&&(m=-m);for(var g=0;g<c;g++){var y=g/c,x=Math.round(kM(df.r,ff.r,y)),C=Math.round(kM(df.g,ff.g,y)),S=Math.round(kM(df.b,ff.b,y)),E=h+g*m,T=E+m;g<c-1&&(T+=m/2),t.beginPath(),t.ellipse(i,s,n,o,0,E,T,f),t.strokeStyle=`rgb(${x},${C},${S})`,t.lineWidth=p,t.stroke()}},df,ff,r9=lvt;var hvt=function(e,t,i,s,n,o,r,a,p,h,u){p===void 0&&a!=null&&(p=2),h===void 0&&(h="start"),u===void 0&&(u="alphabetic"),t.font=o,t.textAlign=h,t.textBaseline=u,t.fillStyle=r,t.strokeStyle=a,t.lineWidth=p,t.lineCap="round",t.lineJoin="round",a!=null&&a!=="none"&&p>0&&t.strokeText(n,i,s),r!=null&&r!=="none"&&t.fillText(n,i,s)},n9=hvt;var VM=Phaser.Math.PI2,uvt=function(){var e=this.radius,t=this.thickness*this.radius,i=this.radius-t/2,s=this.radius-t,n=this.canvas,o=this.context,r=this.anticlockwise,a=this.startAngle,p=this.endAngle,h=this._deltaAngle;if(this.trackColor&&t>0&&(o.save(),d0(n,o,e,e,i,i,void 0,this.trackColor,t,a,p,r),o.restore()),this.barColor&&i>0){var u;this.value>=1?u=p:r?u=(a-h*this.value+VM)%VM:u=(a+h*this.value)%VM,o.save(),this.barColor2?r9(n,o,e,e,i,i,this.barColor2,this.barColor,t,a,u,r):d0(n,o,e,e,i,i,void 0,this.barColor,t,a,u,r),o.restore()}if(this.centerColor&&s>0){var f;this.centerColor2?(f=this.context.createRadialGradient(e,e,0,e,e,s),f.addColorStop(0,this.centerColor),f.addColorStop(1,this.centerColor2)):f=this.centerColor,o.save(),d0(n,o,e,e,s,s,f),o.restore()}this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(o.save(),n9(n,o,e,e,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness,"center","middle"),o.restore())},s9=uvt;var Me=Phaser.Utils.Objects.GetValue,dvt=Phaser.Utils.Objects.IsPlainObject,fvt=Phaser.Math.Clamp,cvt=Phaser.Math.DegToRad(270),f0=Phaser.Math.PI2,zM=class extends Ci(Vi){constructor(t,i,s,n,o,r,a){dvt(i)&&(a=i,i=Me(a,"x",0),s=Me(a,"y",0),n=Me(a,"radius",1),o=Me(a,"barColor",void 0),r=Me(a,"value",0));var p=n*2,h=Me(a,"resolution",1);super(t,i,s,p,p,h),this.type="rexCircularProgressCanvas",this.bootProgressBase(a),this.setRadius(n),this.setTrackColor(Me(a,"trackColor",void 0)),this.setBarColor(o),this.setBarColor2(Me(a,"barColor2",void 0)),this.setCenterColor(Me(a,"centerColor",void 0)),this.setThickness(Me(a,"thickness",.2)),this.setAnticlockwise(Me(a,"anticlockwise",!1)),this.setStartAngle(Me(a,"startAngle",cvt));var u=Me(a,"endAngle");u===void 0&&(this.anticlockwise?u=this.startAngle-f0:u=this.startAngle+f0),this.setEndAngle(Me(a,"endAngle",u)),this.setTextColor(Me(a,"textColor",void 0)),this.setTextStrokeColor(Me(a,"textStrokeColor",void 0),Me(a,"textStrokeThickness",void 0));var f=Me(a,"textFont",void 0);f?this.setTextFont(f):this.setTextFont(Me(a,"textSize","16px"),Me(a,"textFamily","Courier"),Me(a,"textStyle","")),this.setTextFormatCallback(Me(a,"textFormatCallback",void 0),Me(a,"textFormatCallbackScope",void 0)),this.setValue(r)}resize(t,i){return t=Math.floor(Math.min(t,i)),t===this.width?this:(super.resize(t,t),this.setRadius(t/2),this)}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var i=t*2;this.resize(i,i)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get barColor2(){return this._barColor2}set barColor2(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}setBarColor2(t){return this.barColor2=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t,this._deltaAngle=UM(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(t){return this.startAngle=t,this}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!=t,this._endAngle=t,this._deltaAngle=UM(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(t){return this.endAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t,this._deltaAngle=UM(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=fvt(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}get centerColor2(){return this._centerColor2}set centerColor2(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=t,this._centerColor2=t}setCenterColor(t,i){return this.centerColor=t,this.centerColor2=i,this}get textColor(){return this._textColor}set textColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=t,this._textColor=t}setTextColor(t){return this.textColor=t,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=t,this._textStrokeColor=t}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(t){this.dirty=this.dirty||this._textStrokeThickness!=t,this._textStrokeThickness=t}setTextStrokeColor(t,i){return i===void 0&&(i=2),this.textStrokeColor=t,this.textStrokeThickness=i,this}get textFont(){return this._textFont}set textFont(t){this.dirty=this.dirty||this._textFont!=t,this._textFont=t}setTextFont(t,i,s){var n;return i===void 0?n=t:n=s+" "+t+" "+i,this.textFont=n,this}setTextFormatCallback(t,i){return this.textFormatCallback=t,this.textFormatCallbackScope=i,this}updateTexture(){return super.updateTexture(function(){this.clear(),s9.call(this)},this),this}getFormatText(t){t===void 0&&(t=this.value);var i;return this.textFormatCallbackScope?i=this.textFormatCallback(t):i=this.textFormatCallback.call(this.textFormatCallbackScope,t),i}},UM=function(e,t,i){return i?e<=t?f0+e-t:e-t:e>=t?f0+t-e:t-e},a9=zM;var o9=a9;var xo=o9;K.register("circularProgressCanvas",function(e,t,i,s,n,o){var r=new xo(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.CircularProgressCanvas",xo);var pvt=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,s=this.getShape("trackFill");s.fillStyle(this.trackColor),s.isFilled&&WM(s,0,0,t,i,e);var n=this.getShape("bar");if(n.fillStyle(this.barColor),n.isFilled){var o,r;this.rtl?(o=t*(1-this.value),r=t):(o=0,r=t*this.value),WM(n,o,0,r,i,e)}var a=this.getShape("trackStroke");a.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),a.isStroked&&WM(a,0,0,t,i,e)},WM=function(e,t,i,s,n,o){var r=(t+s)/2;return o>=0?e.startAt(r+o,i).lineTo(s+o,i).lineTo(s,n).lineTo(t,n).lineTo(t+o,i).lineTo(r+o,i):e.startAt(r,i).lineTo(s,i).lineTo(s-o,n).lineTo(t-o,n).lineTo(t,i).lineTo(r,i),e.close(),e},l9=pvt;var cf=Phaser.Utils.Objects.GetValue,HM=Phaser.Utils.Objects.IsPlainObject,c0=class extends Ci(xi){constructor(t,i,s,n,o,r,a,p){HM(i)?(p=i,i=p.x,s=p.y,n=p.width,o=p.height,r=p.barColor,a=p.value):HM(n)?(p=n,n=p.width,o=p.height,r=p.barColor,a=p.value):HM(r)&&(p=r,r=p.barColor,a=p.value),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=2),o===void 0&&(o=n),a===void 0&&(a=0),super(t,i,s,n,o,p),this.type="rexLineProgress",this.bootProgressBase(p),this.addShape(new le().setName("trackFill")).addShape(new le().setName("bar")).addShape(new le().setName("trackStroke")),this.setTrackColor(cf(p,"trackColor",void 0)),this.setBarColor(r),this.setTrackStroke(cf(p,"trackStrokeThickness",2),cf(p,"trackStrokeColor",void 0)),this.setSkewX(cf(p,"skewX",0)),this.setRTL(cf(p,"rtl",!1)),this.setValue(a)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}},vvt={updateShapes:l9};Object.assign(c0.prototype,vvt);var h9=c0;var u9=h9;var pf=u9;K.register("lineProgress",function(e,t,i,s,n,o,r){var a=new pf(this.scene,e,t,i,s,n,o,r);return this.scene.add.existing(a),a});Z(window,"RexPlugins.UI.LineProgress",pf);var mvt=function(e,t,i,s,n){e.setIterations(n).start();var a=s.tl;if(_t(a))if(a.convex){var o=a.x,r=a.y;e.ellipticalArc(o,r,a.x,a.y,180,270,!1)}else{var o=0,r=0;e.ellipticalArc(o,r,a.x,a.y,90,0,!0)}else e.lineTo(0,0);var a=s.tr;if(_t(a))if(a.convex){var o=t-a.x,r=a.y;e.ellipticalArc(o,r,a.x,a.y,270,360,!1)}else{var o=t,r=0;e.ellipticalArc(o,r,a.x,a.y,180,90,!0)}else e.lineTo(t,0);var a=s.br;if(_t(a))if(a.convex){var o=t-a.x,r=i-a.y;e.ellipticalArc(o,r,a.x,a.y,0,90,!1)}else{var o=t,r=i;e.ellipticalArc(o,r,a.x,a.y,270,180,!0)}else e.lineTo(t,i);var a=s.bl;if(_t(a))if(a.convex){var o=a.x,r=i-a.y;e.ellipticalArc(o,r,a.x,a.y,90,180,!1)}else{var o=0,r=i;e.ellipticalArc(o,r,a.x,a.y,360,270,!0)}else e.lineTo(0,i);return e.close(),e},vf=mvt;var p0=Phaser.Math.RadToDeg,gvt=function(e,t,i,s,n){var o=t*n,h=s.tl;if(_t(h)){var r;o>h.x?r=90:r=p0(Math.acos((h.x-o)/h.x));var a=h.x,p=h.y;e.ellipticalArc(a,p,h.x,h.y,180,180+r,!1)}else e.lineTo(0,0);var h=s.tr;if(_t(h)&&o>t-h.x){var r=90-p0(Math.acos((o-(t-h.x))/h.x)),a=t-h.x,p=h.y;e.ellipticalArc(a,p,h.x,h.y,270,270+r,!1)}else e.lineTo(o,0);var h=s.br;if(_t(h)&&o>t-h.x){var r=90-p0(Math.acos((o-(t-h.x))/h.x)),a=t-h.x,p=i-h.y;e.ellipticalArc(a,p,h.x,h.y,90-r,90,!1)}else e.lineTo(o,i);var h=s.bl;if(_t(h)){var r;o>h.x?r=90:r=p0(Math.acos((h.x-o)/h.x));var a=h.x,p=i-h.y;e.ellipticalArc(a,p,h.x,h.y,180-r,180,!1)}else e.lineTo(0,i)},d9=gvt;var v0=Phaser.Math.RadToDeg,xvt=function(e,t,i,s,n){var o=i*n,h=s.tl;if(_t(h)){var r;o>h.y?r=90:r=v0(Math.acos((h.y-o)/h.y));var a=h.x,p=h.y;e.ellipticalArc(a,p,h.x,h.y,270-r,270,!1)}else e.lineTo(0,0);var h=s.tr;if(_t(h)){var r;o>h.y?r=90:r=v0(Math.acos((h.y-o)/h.y));var a=t-h.x,p=h.y;e.ellipticalArc(a,p,h.x,h.y,270,270+r,!1)}else e.lineTo(t,0);var h=s.br;if(_t(h)&&o>i-h.y){var r=90-v0(Math.acos((o-(i-h.y))/h.y)),a=t-h.x,p=i-h.y;e.ellipticalArc(a,p,h.x,h.y,0,0+r,!1)}else e.lineTo(t,o);var h=s.bl;if(_t(h)&&o>i-h.y){var r=90-v0(Math.acos((o-(i-h.y))/h.y)),a=h.x,p=i-h.y;e.ellipticalArc(a,p,h.x,h.y,180-r,180,!1)}else e.lineTo(0,o)},f9=xvt;var m0=Phaser.Math.RadToDeg,yvt=function(e,t,i,s,n){var o=t*n,h=s.tr;if(_t(h)){var r;o>h.x?r=90:r=m0(Math.acos((h.x-o)/h.x));var a=t-h.x,p=h.y;e.ellipticalArc(a,p,h.x,h.y,360-r,360,!1)}else e.lineTo(t,0);var h=s.br;if(_t(h)){var r;o>h.x?r=90:r=m0(Math.acos((h.x-o)/h.x));var a=t-h.x,p=i-h.y;e.ellipticalArc(a,p,h.x,h.y,0,0+r,!1)}else e.lineTo(t,i);var h=s.bl;if(_t(h)&&o>t-h.x){var r=90-m0(Math.acos((o-(t-h.x))/h.x)),a=h.x,p=i-h.y;e.ellipticalArc(a,p,h.x,h.y,90,90+r,!1)}else e.lineTo(t-o,i);var h=s.tl;if(_t(h)&&o>t-h.x){var r=90-m0(Math.acos((o-(t-h.x))/h.x)),a=h.x,p=h.y;e.ellipticalArc(a,p,h.x,h.y,270-r,270,!1)}else e.lineTo(t-o,0)},c9=yvt;var g0=Phaser.Math.RadToDeg,Cvt=function(e,t,i,s,n){var o=i*n,h=s.br;if(_t(h)){o>h.y?p=90:p=g0(Math.acos((h.y-o)/h.y));var r=t-h.x,a=i-h.y;e.ellipticalArc(r,a,h.x,h.y,90-p,90,!1)}else e.lineTo(t,i);var h=s.bl;if(_t(h)){o>h.y?p=90:p=g0(Math.acos((h.y-o)/h.y));var r=h.x,a=i-h.y;e.ellipticalArc(r,a,h.x,h.y,90,90+p,!1)}else e.lineTo(0,i);var h=s.tl;if(_t(h)&&o>i-h.y){var p=90-g0(Math.acos((o-(i-h.y))/h.y)),r=h.x,a=h.y;e.ellipticalArc(r,a,h.x,h.y,180,180+p,!1)}else e.lineTo(0,i-o);var h=s.tr;if(_t(h)&&o>i-h.y){var p=90-g0(Math.acos((o-(i-h.y))/h.y)),r=t-h.x,a=h.y;e.ellipticalArc(r,a,h.x,h.y,360-p,360,!1)}else e.lineTo(t,i-o)},p9=Cvt;var Svt=function(e,t,i,s,n,o,r,a){if(e.setIterations(a).start(),n===0)return e;if(n===1)return vf(e,t,i,s,a);var p;return o===0?p=r?c9:d9:p=r?p9:f9,p(e,t,i,s,n),e.close(),e},v9=Svt;var Tvt=function(){var e=this.width,t=this.height,i=this.rrGeom.cornerRadius,s=this.value,n=this.orientation,o=this.rtl,r=this.iteration+1,a=this.getShape("trackFill");a.fillStyle(this.trackColor),a.isFilled&&vf(a,e,t,i,r);var p=this.getShape("bar");p.fillStyle(this.barColor),p.isFilled&&v9(p,e,t,i,s,n,o,r);var h=this.getShape("trackStroke");h.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),h.isStroked&&vf(h,e,t,i,r)},m9=Tvt;var Evt={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Pvt=function(e){return typeof e=="string"&&(e=Evt[e]),e},x0=Pvt;var Bh=Phaser.Utils.Objects.GetValue,YM=Phaser.Utils.Objects.IsPlainObject,y0=class extends Ci(xi){constructor(t,i,s,n,o,r,a,p,h){YM(i)?(h=i,i=h.x,s=h.y,n=h.width,o=h.height,r=h.radius,a=h.barColor,p=h.value):YM(n)?(h=n,n=h.width,o=h.height,r=h.radius,a=h.barColor,p=h.value):YM(r)&&(h=r,r=h.radius,a=h.barColor,p=h.value),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=n),r===void 0&&(r=0),p===void 0&&(p=0),super(t,i,s,n,o,h),this.type="rexRoundRectangleProgress",this.rrGeom=new oh,this.bootProgressBase(h),this.addShape(new le().setName("trackFill")).addShape(new le().setName("bar")).addShape(new le().setName("trackStroke")),this.setTrackColor(Bh(h,"trackColor",void 0)),this.setBarColor(a),this.setTrackStroke(Bh(h,"trackStrokeThickness",2),Bh(h,"trackStrokeColor",void 0)),this.setOrientation(Bh(h,"orientation",0)),this.setRTL(Bh(h,"rtl",!1)),this.setRadius(r),this.setIteration(Bh(r,"iteration",void 0)),this.setValue(p)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get orientation(){return this._orientation}set orientation(t){t=x0(t),this.dirty=this.dirty||this._orientation!=t,this._orientation=t}setOrientation(t){return this.orientation=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get radius(){return this.rrGeom.radius}set radius(t){this.rrGeom.setRadius(t),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(t){this.rrGeom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(t){this.rrGeom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(t){this.rrGeom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(t){this.rrGeom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){if(this._iteration===void 0){this._iteration=t;return}this._iteration!==t&&(this._iteration=t,this.dirty=!0)}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}},Mvt={updateShapes:m9};Object.assign(y0.prototype,Mvt);var g9=y0;var x9=g9;var XM=x9;K.register("roundRectanleProgress",function(e,t,i,s,n,o,r,a){var p=new XM(this.scene,e,t,i,s,n,o,r,a);return this.scene.add.existing(p),p});Z(window,"RexPlugins.UI.RoundRectangleProgress",XM);var wvt=function(e,t){e.save(),e.beginPath();var i=t[0];e.moveTo(i.x,i.y);for(var s=1,n=t.length;s<n;s++)i=t[s],e.lineTo(i.x,i.y);e.closePath(),e.restore()},y9=wvt;var bvt=function(e,t,i,s,n,o,r){r===void 0&&(r="round"),y9(t,i),t.lineJoin=r,s!=null&&(t.fillStyle=s,t.fill()),n!=null&&(t.strokeStyle=n,t.lineWidth=o,t.stroke())},C0=bvt;var Rvt=function(){var e=this.skewX,t=this.width-Math.abs(e),i=this.height,s=this.canvas,n=this.context;(this.trackColor||this.trackStrokeColor)&&C9(0,0,t,i,e,this.trackPoints);var o,r;if(this.barColor&&(this.rtl?(o=t*(1-this.value),r=t):(o=0,r=t*this.value),C9(o,0,r,i,e,this.barPoints)),this.trackColor&&(n.save(),C0(s,n,this.trackPoints,this.trackColor),n.restore()),this.barColor){n.save();var a;if(this.barColor2){var p;if(this.isHorizontalGradient){var h=i/2;p=n.createLinearGradient(o,h,r,h)}else{var u=t/2;p=n.createLinearGradient(u,0,u,i)}p.addColorStop(0,this.rtl?this.barColor:this.barColor2),p.addColorStop(1,this.rtl?this.barColor2:this.barColor),a=p}else a=this.barColor;C0(s,n,this.barPoints,a),n.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(n.save(),C0(s,n,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),n.restore())},C9=function(e,t,i,s,n,o){o===void 0&&(o=[]),o.length=4;for(var r=0;r<4;r++)o[r]||(o[r]={});var a;return n>=0?(a=o[0],a.x=e+n,a.y=t,a=o[1],a.x=i+n,a.y=t,a=o[2],a.x=i,a.y=s,a=o[3],a.x=e,a.y=s):(a=o[0],a.x=e,a.y=t,a=o[1],a.x=i,a.y=t,a=o[2],a.x=i-n,a.y=s,a=o[3],a.x=e-n,a.y=s),o},S9=Rvt;var He=Phaser.Utils.Objects.GetValue,$M=Phaser.Utils.Objects.IsPlainObject,jM=class extends Ci(Vi){constructor(t,i,s,n,o,r,a,p){$M(i)?(p=i,i=He(p,"x",0),s=He(p,"y",0),n=He(p,"width",2),o=He(p,"height",2),r=He(p,"barColor",void 0),a=He(p,"value",0)):$M(n)?(p=n,n=He(p,"width",2),o=He(p,"height",2),r=He(p,"barColor",void 0),a=He(p,"value",0)):$M(r)&&(p=r,r=He(p,"barColor",void 0),a=He(p,"value",0));var h=He(p,"resolution",1);super(t,i,s,n,o,h),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(p),this.setTrackColor(He(p,"trackColor",void 0)),this.setBarColor(r,He(p,"barColor2",void 0),He(p,"isHorizontalGradient",void 0)),this.setTrackStroke(He(p,"trackStrokeThickness",2),He(p,"trackStrokeColor",void 0)),this.setSkewX(He(p,"skewX",0)),this.setRTL(He(p,"rtl",!1)),this.setValue(a)}get trackColor(){return this._trackColor}set trackColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,i){return this.trackStrokeThickness=t,this.trackStrokeColor=i,this}get barColor(){return this._barColor}set barColor(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=vt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,i,s){return s===void 0&&(s=!0),this.barColor=t,this.barColor2=i,this.isHorizontalGradient=s,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),S9.call(this)},this),this}},T9=jM;var E9=T9;var mf=E9;K.register("circularProgressCanvas",function(e,t,i,s,n,o,r){var a=new mf(this.scene,e,t,i,s,n,o,r);return this.scene.add.existing(a),a});Z(window,"RexPlugins.UI.LineProgressCanvas",mf);var Yle=Phaser.Math.Wrap,Nh=Phaser.Math.Linear,Ivt=function(){var e=this.getShape("triangle"),t=this.padding,i=this.width-t.right,s=0+t.left,n=this.height-t.bottom,o=0+t.top,r=(s+i)/2,a=(o+n)/2,p={0:{a:{x:s,y:o},b:{x:i,y:a},c:{x:s,y:n}},1:{a:{x:s,y:o},b:{x:r,y:n},c:{x:i,y:o}},2:{a:{x:i,y:o},b:{x:s,y:a},c:{x:i,y:n}},3:{a:{x:s,y:n},b:{x:r,y:o},c:{x:i,y:n}}},h,u,f,l,d,v;if(this.previousDirection===void 0){var c=p[this.direction],m=c.a,g=c.b,y=c.c;h=m.x,u=m.y,f=g.x,l=g.y,d=y.x,v=y.y}else{var x=p[this.previousDirection],C=p[this.direction],S=this.easeDirectionProgress;h=Nh(x.a.x,C.a.x,S),u=Nh(x.a.y,C.a.y,S),f=Nh(x.b.x,C.b.x,S),l=Nh(x.b.y,C.b.y,S),d=Nh(x.c.x,C.c.x,S),v=Nh(x.c.y,C.c.y,S)}e.startAt(h,u).lineTo(f,l).lineTo(d,v),this.arrowOnly?e.end():e.close()},P9=Ivt;var Avt=Phaser.Math.DegToRad,S0=Avt(120),Ovt=function(t){var t=this.getShape("triangle"),i=this.width/2,s=this.height/2,n=Math.min(i,s)*this.radius,o=this.verticeRotation;t.startAt(i+n*Math.cos(o+S0),s+n*Math.sin(o+S0)).lineTo(i+n*Math.cos(o),s+n*Math.sin(o)).lineTo(i+n*Math.cos(o-S0),s+n*Math.sin(o-S0)),this.arrowOnly?t.end():t.close()},M9=Ovt;var w9={buildShapes(){this.addShape(new le().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?P9.call(this):M9.call(this)}};var b9={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new We(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0?this:(this.easeDirectionProgressTask.stop(),this)}};var Gh=Phaser.Utils.Objects.GetValue,Dvt=Phaser.Utils.Objects.IsPlainObject,Lvt=Phaser.Math.DegToRad,Fvt=Phaser.Math.RadToDeg,T0=class extends xi{constructor(t,i,s,n,o,r,a){var p,h,u,f,l,d,v,c;if(Dvt(i)){var m=i;i=m.x,s=m.y,n=m.width,o=m.height,r=m.color,a=m.alpha,p=m.strokeColor,h=m.strokeAlpha,u=m.strokeWidth,f=m.arrowOnly,l=m.direction,d=m.easeDuration,v=m.padding,c=m.radius}i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=n),f===void 0&&(f=!1),l===void 0&&(l=0),d===void 0&&(d=0),v===void 0&&(v=0),c===void 0&&(c=void 0),super(t,i,s,n,o),this.type="rexTriangle",this.setFillStyle(r,a),p!==void 0&&u===void 0&&(u=2),this.setStrokeStyle(u,p,h),this.setArrowOnly(f),this.setDirection(l,d),this.setPadding(v),this.setRadius(c),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=Nvt(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=t*90,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,i){return i!==void 0&&this.setEaseDuration(i),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,i,s,n){if(typeof t=="object"){var o=t,r=Gh(o,"x",null);r!==null?(t=r,s=r):(t=Gh(o,"left",0),s=Gh(o,"right",t));var a=Gh(o,"y",null);a!==null?(i=a,n=a):(i=Gh(o,"top",0),n=Gh(o,"bottom",i))}else t===void 0&&(t=0),i===void 0&&(i=t),s===void 0&&(s=t),n===void 0&&(n=i);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=i||this.padding.right!=s||this.padding.bottom!=n,this.padding.left=t,this.padding.top=i,this.padding.right=s,this.padding.bottom=n,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return Fvt(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=Lvt(t)}setVerticeAngle(t){return this.verticeAngle=t,this}},Bvt={right:0,down:1,left:2,up:3},Nvt=function(e){return typeof e=="string"&&(e=Bvt[e]),e=e%4,e};Object.assign(T0.prototype,w9,b9);var R9=T0;var I9=R9;var yo=I9;K.register("triangle",function(e,t,i,s,n,o){var r=new yo(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.Triangle",yo);Ws();var Gvt=Phaser.GameObjects.Zone,kvt=Phaser.Utils.Array.Add,Vvt=Phaser.Utils.Array.Remove,E0=class extends Gvt{constructor(t,i,s,n,o){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=1),o===void 0&&(o=1),super(t,i,s,n,o),this.children=[]}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var i,s=this.children.length-1;s>=0;s--)i=this.children[s],!i.parentContainer&&!i.displayList&&i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return this.children.indexOf(t)!==-1}add(t){var i=this;return kvt(this.children,t,0,function(s){s.once("destroy",i.onChildDestroy,i)},this),this}remove(t,i){var s=this;return Vvt(this.children,t,function(n){n.off("destroy",s.onChildDestroy,s),i&&n.destroy()}),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i=this,s,n=0,o=this.children.length;n<o;n++)s=this.children[n],s.off("destroy",i.onChildDestroy,i),t&&s.destroy();return this.children.length=0,this}},A9=Phaser.GameObjects.Components;Phaser.Class.mixin(E0,[A9.Alpha,A9.Flip]);var Co=E0;var Fe=function(e,t){var i;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent);else for(i=Fe(e);i&&i.name!==t;)i=Fe(i);return i},gf=function(e){for(var t=Fe(e);t;)e=t,t=Fe(t);return e};var Uvt=Phaser.Math.DegToRad,zvt=Phaser.Math.RadToDeg,Wvt=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return zvt(this.rotation)},set:function(i){this.rotation=Uvt(i)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(i){this.scaleX=i/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(i){this.scaleY=i/e.height}}),e.rexContainer=t}return e.rexContainer},pt=Wvt;var O9={setParent(e,t){t===void 0&&(t=this);var i=pt(e);return t?(i.parent=t,i.self=e):(i.parent=null,i.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Fe(e,t)},getTopmostParent(e){return e===void 0&&(e=this),gf(e)}};var So=Phaser.Utils.Objects.GetValue,L9=Co.prototype.add,D9=function(e,t){this.setParent(e);var i=pt(e);return F9(i,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),L9.call(this,e),B9.call(this,e,i),this},ZM=function(e,t){this.setParent(e);var i=pt(e);return F9(i,t),i.x=e.x,i.y=e.y,i.rotation=e.rotation,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.alpha=e.alpha,i.visible=e.visible,i.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),L9.call(this,e),B9.call(this,e,i),this},F9=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=So(t,"syncPosition",!0),e.syncRotation=So(t,"syncRotation",!0),e.syncScale=So(t,"syncScale",!0),e.syncAlpha=So(t,"syncAlpha",!0),e.syncScrollFactor=So(t,"syncScrollFactor",!0),e.syncCameraFilter=So(t,"syncCameraFilter",!0),e.syncDisplayList=So(t,"syncDisplayList",!0))},B9=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)},N9={add(e){return Array.isArray(e)?this.addMultiple(e):D9.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):D9.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),i=0,s=e.length;i<s;i++)t[0]=e[i],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):ZM.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):ZM.call(this,e,t),this},addLocalMultiple(e){for(var t=0,i=e.length;t<i;t++)ZM.call(this,e[t]);return this}};var G9=Co.prototype.remove,Hvt=Co.prototype.clear,k9={remove(e,t){return Fe(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),G9.call(this,e,t),this)},unpin(e,t){return Fe(e)!==this?this:(this.setParent(e,null),t||this.removeFromRenderLayer(e),G9.call(this,e,t),this)},clear(e){for(var t=this.children,i=0,s=t.length;i<s;i++){var n=t[i];this.setParent(n,null),e||this.removeFromRenderLayer(n)}return Hvt.call(this,e),this}};var V9={getLocalState(e){return pt(e)},resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,i=e.length;t<i;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};var U9={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),i=Math.sin(-this.rotation),s=e.x,n=e.y;return e.x=s*t-n*i,e.y=s*i+n*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),i=Math.sin(this.rotation),s=e.x,n=e.y;return e.x=s*t-n*i,e.y=s*i+n*t,e.x+=this.x,e.y+=this.y,e}};var Yvt=function(e,t){return e===t?1:e/t},ha=Yvt;var z9={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=pt(e),i=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,i.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+i.rotation),t.syncScale&&(e.scaleX=t.scaleX*i.scaleX,e.scaleY=t.scaleY*i.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=pt(e),i=t.parent;return t.x=e.x,t.y=e.y,i.worldToLocal(t),t.scaleX=ha(e.scaleX,i.scaleX),t.scaleY=ha(e.scaleY,i.scaleY),t.rotation=e.rotation-i.rotation,this},setChildPosition(e,t,i){return e.x=t,e.y=i,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,i){var s=pt(e);return s.x=t,s.y=i,this.updateChildPosition(e),this},resetLocalPositionState(){var e=pt(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX(e){var t=pt(e);return t.x},getChildLocalY(e){var t=pt(e);return t.y}};var Xvt=Phaser.Math.DegToRad,W9={updateChildRotation(e){var t=pt(e),i=t.parent;return t.syncRotation&&(e.rotation=i.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=pt(e),i=t.parent;return t.rotation=e.rotation-i.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){var i=pt(e);return i.rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){var i=pt(e);return i.rotation=Xvt(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=pt(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation(e){var t=pt(e);return t.rotation}};var H9={updateChildScale(e){var t=pt(e),i=t.parent;return t.syncScale&&(e.scaleX=i.scaleX*t.scaleX,e.scaleY=i.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=pt(e),i=t.parent;return t.scaleX=ha(e.scaleX,i.scaleX),t.scaleY=ha(e.scaleY,i.scaleY),this},setChildScale(e,t,i){return i===void 0&&(i=t),e.scaleX=t,e.scaleY=i,this.resetChildScaleState(e),this},setChildLocalScale(e,t,i){i===void 0&&(i=t);var s=pt(e);return s.scaleX=t,s.scaleY=i,this.updateChildScale(e),this},setChildDisplaySize(e,t,i){return e.setDisplaySize(t,i),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=pt(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX(e){var t=pt(e);return t.scaleX},getChildLocalScaleY(e){var t=pt(e);return t.scaleY}};var Y9={updateChildVisible(e){var t=pt(e),i=t.parent,s=t.hasOwnProperty("maskVisible")?t.maskVisible:!0,n=i?i.visible:!0;return e.visible=n&&t.visible&&s,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=pt(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){t===void 0&&(t=!0);var i=pt(e);return i.visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){t===void 0&&(t=!0);var i=pt(e);return i.maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=pt(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible(e){var t=pt(e);return t.visible}};var X9={updateChildAlpha(e){var t=pt(e),i=t.parent;return t.syncAlpha&&(e.alpha=i.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=pt(e),i=t.parent;return t.alpha=ha(e.alpha,i.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){var i=pt(e);return i.alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=pt(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha(e){var t=pt(e);return t.alpha}};var $9={updateChildActive(e){var t=pt(e),i=t.parent;return e.active=i.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){var t=pt(e);return t.active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){t===void 0&&(t=!0);var i=pt(e);return i.active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=pt(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive(e){var t=pt(e);return t.active}};var j9={updateChildScrollFactor(e){var t=pt(e),i=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=i.scrollFactorX,e.scrollFactorY=i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}};var Z9={updateCameraFilter(e){var t=pt(e),i=t.parent;return t.syncCameraFilter&&(e.cameraFilter=i.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}};var K9={updateChildMask(e){if(this.mask==null)return this;var t=this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask;return t!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(i){i.clearMask&&i.clearMask(!1),i.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(i)}),e&&this.mask&&this.mask.destroy(),this}};var $vt=function(e){return e.filter(function(t){if(t.displayList)return!0;if(t.parentContainer)return!0})},xf=$vt;var J9={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var i=this.getAllChildren(),s=0,n=i.length;s<n;s++)i[s].depth=e;return this},swapDepth(e){var t=this.depth,i=e.depth;return this.setDepth(i),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),i=0,s=t.length;i<s;i++)t[i].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);mi(t,!1);for(var i=0,s=t.length;i<s;i++){var n=t[i];e.exists(n)&&e.bringToTop(n)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);mi(t,!0);for(var i=0,s=t.length;i<s;i++){var n=t[i];e.exists(n)&&e.sendToBack(n)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);mi(i,!1);for(var s=0,n=i.length;s<n;s++){var o=i[s];if(t.exists(o)){t.moveBelow(e,o);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var i=this.getAllChildren([this]);mi(i,!0);for(var s=0,n=i.length;s<n;s++){var o=i[s];if(t.exists(o)){t.moveAbove(e,o);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=xf(t),t=mi(t,!1)):t=[e];var i=this.getAllChildren([this]);i=xf(i),i=mi(i,!1);for(var s=i[i.length-1],n=0,o=t.length;n<o;n++){var r=t[n];s!==r&&(r!==this&&s.displayList!==r.displayList||(s.displayList.moveAbove(r,s),s=r))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=xf(t),t=mi(t,!1)):t=[e];var i=this.getAllChildren([this]);i=xf(i),i=mi(i,!1);for(var s=i[0],n=t.length-1;n>=0;n--){var o=t[n];s!==o&&(o!==this&&s.displayList!==o.displayList||(s.displayList.moveBelow(o,s),s=o))}return this}};var KM=function(e,t){var i=t(e);if(!i&&e.isRexContainerLite)for(var s=e.children,n=0,o=s.length;n<o;n++)KM(s[n],t)},P0=function(e,t){for(var i=[e];i.length>0;){var s=i.shift(),n=t(s);!n&&s.isRexContainerLite&&i.push(...s.children)}};var To=Phaser.Utils.Array,Q9={getChildren(e){if(!e)e=this.children;else for(var t=0,i=this.children.length;t<i;t++)e.push(this.children[t]);return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return P0(t,function(i){i!==t&&e.push(i)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return P0(t,function(i){if(i!==t){if(!i.visible)return!0;e.push(i)}}),e},bfs(e,t){return t===void 0&&(t=this),P0(t,e),this},dfs(e,t){return t===void 0&&(t=this),KM(t,e),this},contains(e){var t=Fe(e);return t?t===this?!0:this.contains(t):!1},getByName(e,t){if(t){for(var i=[this],s,n;i.length;){s=i.shift();for(var o=0,r=s.children.length;o<r;o++){if(n=s.children[o],n.name===e)return n;n.isRexContainerLite&&i.push(n)}}return null}else return To.GetFirst(this.children,"name",e)},getRandom(e,t){return To.GetRandom(this.children,e,t)},getFirst(e,t,i,s){return To.GetFirstElement(this.children,e,t,i,s)},getAll(e,t,i,s){return To.GetAll(this.children,e,t,i,s)},count(e,t,i,s){return To.CountAllMatching(this.children,e,t,i,s)},swap(e,t){return To.Swap(this.children,e,t),this},setAll(e,t,i,s){return To.SetAll(this.children,e,t,i,s),this}};var q9=function(e){for(var t=[],i=0,s=e.length;i<s;i++){var n=e[i];n.hasOwnProperty("rexContainer")&&t.push(n.rexContainer)}return t},jvt=function(e){for(var t=0,i=e.length;t<i;t++){var s=e[t].scene;if(s)return s}return null},_9=function(e,t,i){if(!i.parent){e.remove();return}var s=i.parent,n=i.self;switch(t){case"x":case"y":s.updateChildPosition(n);break;case"angle":case"rotation":s.updateChildRotation(n);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":s.updateChildScale(n);break;case"alpha":s.updateChildAlpha(n);break;default:s.updateChildPosition(n),s.updateChildRotation(n),s.updateChildScale(n),s.updateChildAlpha(n);break}},tV={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var i=this.scene||jvt(t);if(i){e.targets=q9(t);var s=i.tweens.add(e);return s.on("update",_9),s}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=q9(t));var i=e.onUpdate;return e.onUpdate=function(s,n){i&&i(s,n),_9(s,void 0,n)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}};var Zvt=Phaser.GameObjects.Container,Kvt=function(e){return e instanceof Zvt},eV=Kvt;var nV=function(e){var t=e.getAllChildren([e]);return t=t.filter(function(i){return!!i.displayList||!!i.parentContainer}),t},iV=function(e){var t=nV(this);t.indexOf(this)===-1&&t.push(this),mi(t),e.add(t)},rV=function(e,t,i){if(this.scene){var s=nV(this);mi(s,t),e.remove(s),i&&s.forEach(function(n){n.addToDisplayList()})}},sV={addToContainer(e){return eV(e)?(this._setParentContainerFlag=!0,iV.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return ta(e)?(iV.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,rV.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),ta(this.displayList)?(rV.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList?this:(ta(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this)}};var aV={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();if(!t)return this;if(t===e.displayList)return this;e.isRexContainerLite?e.addToLayer(t):t.add(e);var i=pt(e);return i.layer=t,this},removeFromRenderLayer(e){var t=pt(e),i=t.layer;return i?(e.isRexContainerLite?e.removeFromLayer(!0):i.remove(e),t.layer=null,this):this}};var oV=Phaser.Geom.Rectangle,Jvt=Phaser.Geom.Rectangle.Union,Qvt=function(e,t){t===void 0?t=new oV:t===!0&&(JM===void 0&&(JM=new oV),t=JM),t.setTo(0,0,0,0);for(var i,s=!0,n=0,o=e.length;n<o;n++)if(i=e[n],!!i.getBounds){var r=xh(i,!0);s?(t.setTo(r.x,r.y,r.width,r.height),s=!1):Jvt(r,t,t)}return t},JM,lV=Qvt;var Eo=Phaser.Utils.Objects.GetValue,qvt=function(e){if(e){var t=e.gameObjects,i=e.renderTexture,s=e.saveTexture,n=Eo(e,"x",void 0),o=Eo(e,"y",void 0),r=Eo(e,"width",void 0),a=Eo(e,"height",void 0),p=Eo(e,"originX",0),h=Eo(e,"originY",0),u=Eo(e,"padding",0),f,l;if(r===void 0||a===void 0||n===void 0||o===void 0){var d=lV(t,!0),v=n!==void 0&&o!==void 0;v?(r=Math.max(n-d.left,d.right-n)*2,a=Math.max(o-d.top,d.bottom-o)*2,p=.5,h=.5):(n=d.x,o=d.y,r=d.width,a=d.height,p=0,h=0),f=d.x,l=d.y}else f=n+(0-p)*r,l=o+(0-h)*a;f-=u,l-=u,r+=u*2,a+=u*2;var c=t[0].scene,m=c.sys.textures;return s&&!i&&(i=m.addDynamicTexture(s,r,a)),i||(i=c.add.renderTexture(0,0,r,a)),i.setPosition&&i.setPosition(n,o),(i.width!==r||i.height!==a)&&i.setSize(r,a),i.setOrigin&&i.setOrigin(p,h),i.camera.setScroll(f,l),t=mi(ze(t)),i.draw(t),s&&(de(i)?i.saveTexture(s):i.key!==s&&m.renameTexture(i.key,key)),i}},Po=qvt;var hV={snapshot(e){var t=this.scaleX,i=this.scaleY,s=t===1&&i===1;s||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var n=Po(e),o=!!n.scene;return s||(this.setScale(t,i),o&&n.setScale(t,i)),o?n:this}};var uV=Phaser.Utils.Objects.GetValue,_vt=function(e,t){var i=uV(t,"drawContainer",!0),s=uV(t,"children");return s===void 0&&(s=this.getAllVisibleChildren([this])),i||(s=s.filter(function(n){return!n.isRexContainerLite})),lg(s,e,t),this},dV=_vt;var tmt=Phaser.Math.RotateAround,emt=function(e,t,i){i===void 0&&(i=t);var s={x:(t-e.originX)*e.displayWidth,y:(i-e.originY)*e.displayHeight};return tmt(s,0,0,e.rotation),e.originX=t,e.originY=i,e.x=e.x+s.x,e.y=e.y+s.y,e},fV=emt;var imt=function(e,t){this.syncChildrenEnable=!1,fV(this,e,t),this.syncChildrenEnable=!0;for(var i=this.getAllChildren(),s=0,n=i.length;s<n;s++)this.resetChildPositionState(i[s]);return this},cV=imt;var pV={changeOrigin:cV,drawBounds:dV};Object.assign(pV,O9,N9,k9,V9,U9,z9,W9,H9,Y9,X9,$9,j9,Z9,K9,J9,Q9,tV,sV,aV,hV);var vV=pV;var M0=class extends Co{constructor(t,i,s,n,o,r){Array.isArray(n)&&(r=n,n=void 0,o=void 0),super(t,i,s,n,o),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,r&&this.add(r)}destroy(t){!this.scene||this.ignoreDestroy||(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return Fe(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){if(!this._parentContainer&&!t){this._parentContainer=t;return}if(this.setParentContainerFlag){this._parentContainer=t;return}this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Fe(this);return t?t.setParentContainerFlag:!1}};Object.assign(M0.prototype,vV);var Pn=M0;var mV=Pn;var Di=mV;var rmt=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer},Mo=rmt;function gV(e){return e===void 0&&(e=this),Mo(e)}var nmt=function(e){var t=Mo(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},xV=nmt;var smt=function(e){return e===void 0&&(e=Sr(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this},yV=smt;var Oe=Phaser.Display.Align,w0={center:Oe.CENTER,left:Oe.LEFT_CENTER,right:Oe.RIGHT_CENTER,top:Oe.TOP_CENTER,bottom:Oe.BOTTOM_CENTER,"left-top":Oe.TOP_LEFT,"top-left":Oe.TOP_LEFT,"left-center":Oe.LEFT_CENTER,"center-left":Oe.LEFT_CENTER,"left-bottom":Oe.BOTTOM_LEFT,"bottom-left":Oe.BOTTOM_LEFT,"center-top":Oe.TOP_CENTER,"top-center":Oe.TOP_CENTER,"center-center":Oe.CENTER,"center-bottom":Oe.BOTTOM_CENTER,"bottom-center":Oe.BOTTOM_CENTER,"right-top":Oe.TOP_RIGHT,"top-right":Oe.TOP_RIGHT,"right-center":Oe.RIGHT_CENTER,"center-right":Oe.RIGHT_CENTER,"right-bottom":Oe.BOTTOM_RIGHT,"bottom-right":Oe.BOTTOM_RIGHT};var Mn=w0;var CV=new Phaser.GameObjects.Zone({sys:{queueDepthSort:re,events:{once:re}}},0,0,1,1);CV.setOrigin(0);var QM=CV;var amt={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12},wn=amt;var omt=function(e){var t=gt(e);return e.y+t-t*e.originY},kh=omt;var lmt=function(e){var t=mt(e);return e.x-t*e.originX+t*.5},Vh=lmt;var hmt=function(e,t){var i=gt(e);return e.y=t-i+i*e.originY,e},Uh=hmt;var umt=function(e,t){var i=mt(e),s=i*e.originX;return e.x=t+s-i*.5,e},zh=umt;var dmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),zh(e,Vh(t)+i),Uh(e,kh(t)+s),e},SV=dmt;var fmt=function(e){var t=mt(e);return e.x-t*e.originX},Wh=fmt;var cmt=function(e,t){var i=mt(e);return e.x=t+i*e.originX,e},Hh=cmt;var pmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Hh(e,Wh(t)-i),Uh(e,kh(t)+s),e},TV=pmt;var vmt=function(e){var t=mt(e);return e.x+t-t*e.originX},Yh=vmt;var mmt=function(e,t){var i=mt(e);return e.x=t-i+i*e.originX,e},Xh=mmt;var gmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Xh(e,Yh(t)+i),Uh(e,kh(t)+s),e},EV=gmt;var xmt=function(e,t){var i=gt(e),s=i*e.originY;return e.y=t+s-i*.5,e},$h=xmt;var ymt=function(e,t,i){return zh(e,t),$h(e,i)},PV=ymt;var Cmt=function(e){var t=gt(e);return e.y-t*e.originY+t*.5},jh=Cmt;var Smt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),PV(e,Vh(t)+i,jh(t)+s),e},MV=Smt;var Tmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Hh(e,Wh(t)-i),$h(e,jh(t)+s),e},wV=Tmt;var Emt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Xh(e,Yh(t)+i),$h(e,jh(t)+s),e},bV=Emt;var Pmt=function(e){var t=gt(e);return e.y-t*e.originY},Zh=Pmt;var Mmt=function(e,t){var i=gt(e);return e.y=t+i*e.originY,e},Kh=Mmt;var wmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),zh(e,Vh(t)+i),Kh(e,Zh(t)-s),e},RV=wmt;var bmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Hh(e,Wh(t)-i),Kh(e,Zh(t)-s),e},IV=bmt;var Rmt=function(e,t,i,s){return i===void 0&&(i=0),s===void 0&&(s=0),Xh(e,Yh(t)+i),Kh(e,Zh(t)-s),e},AV=Rmt;var bn=[];bn[wn.BOTTOM_CENTER]=SV;bn[wn.BOTTOM_LEFT]=TV;bn[wn.BOTTOM_RIGHT]=EV;bn[wn.CENTER]=MV;bn[wn.LEFT_CENTER]=wV;bn[wn.RIGHT_CENTER]=bV;bn[wn.TOP_CENTER]=RV;bn[wn.TOP_LEFT]=IV;bn[wn.TOP_RIGHT]=AV;var Imt=function(e,t,i,s,n){return bn[i](e,t,s,n)},b0=Imt;var Amt=function(e,t,i,s,n,o){QM.setPosition(t,i).setSize(s,n),b0(e,QM,o)},Rn=Amt;var Jh=Phaser.Utils.Objects.GetValue,Omt=Phaser.GameObjects.Group,Dmt=Phaser.GameObjects.Container,Lmt=function(e,t){var i=e.scene,s,n,o,r,a;if(typeof t=="number")s=t;else{s=Jh(t,"color"),n=Jh(t,"lineWidth");var p=Jh(t,"name",!1);p&&(o=Jh(p,"createTextCallback",Fmt),r=Jh(p,"createTextCallbackScope",void 0),a=Jh(p,"align","left-top"),typeof a=="string"&&(a=Mn[a]))}if(s===void 0&&(s=16777215),n===void 0&&(n=1),o&&!e.children){e.children=new Omt(i),e.once("destroy",function(c,m){c.children.destroy(!m),c.children=void 0});var h=e.clear.bind(e);e.clear=function(){h(),e.children.clear(!1,!0)}}var u=this.getAllShownChildren([this]);OV(u,u);for(var f,l,d=0,v=u.length;d<v;d++){if(f=u[d],f.getBounds||f.width!==void 0&&f.height!==void 0)wo=xh(f,wo);else continue;s!=null&&e.lineStyle(n,s).strokeRectShape(wo),f.name&&o&&(r?l=o.call(r,i):l=o(i),l&&(l.setText(f.name),e.children.add(l),Rn(l,wo.x,wo.y,wo.width,wo.height,a)))}return this},Fmt=function(e,t,i){return e.add.text(0,0,"")},OV=function(e,t){Array.isArray(e)||(e=[e]),t===void 0&&(t=[]);for(var i=0,s=e.length;i<s;i++){var n=e[i];n instanceof Dmt&&(t.push(...n.list),OV(n.list,t))}return t},wo=void 0,DV=Lmt;var R0=Phaser.Utils.Objects.GetValue,Bmt=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=R0(e,"left",0),t.right=R0(e,"right",0),t.top=R0(e,"top",0),t.bottom=R0(e,"bottom",0)),t},I0=Bmt;var Pr=I0;var Nmt=Di.prototype.add,Gmt=function(e){return Nmt.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this},In=Gmt;var LV={addBackground(e,t,i){this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(i=t,t=void 0),t===void 0&&(t=0),In.call(this,e),this.backgroundChildren.push(e);var s=this.getSizerConfig(e);return s.padding=Pr(t),i!==void 0&&this.addChildrenMap(i,e),this},isBackground(e){return this.backgroundChildren===void 0?!1:this.backgroundChildren.indexOf(e)!==-1}};var ua=function(e,t){var i=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&(i=e.rexContainer.parent,i?i.isRexSizer||(i=ua(i)):i=null);else for(i=ua(e);i&&i.name!==t;)i=ua(i);return i},kmt=function(e){for(var t=ua(e);t;)e=t,t=ua(t);return e},Mr={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),ua(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),kmt(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var i=ua(t);i;){if(i===e)return!0;i=ua(i)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}};var Vmt=Phaser.Utils.Array.Remove,Umt=Di.prototype.remove,FV=Mr.getParentSizer,zmt=function(e,t){for(var i=FV(e);i;)i.removeChildCallback&&i.removeChildCallback(e,t),i=FV(i);return this.isBackground(e)&&Vmt(this.backgroundChildren,e),Umt.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this},An=zmt;var Wmt=Phaser.Utils.Array.Remove,Hmt=Mr.getParentSizer,BV={removeFromParentSizer(){var e=Hmt(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0?this:this.getParentSizer(e)!==this?this:(Wmt(this.backgroundChildren,e),An.call(this,e,t),this)},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}};var Ymt=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var i=e;for(e in i)this.childrenMap[e]=i[e]}return this},qM=Ymt;var Xmt=function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},NV=Xmt;var $mt=function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var i=e.shift(),s=null;if(i.charAt(0)==="#")i=i.substring(1),s=this.getByName(i,t);else if(e.length===0&&t){var n=this.childrenMap;if(n)for(var o=[n],r;o.length;){n=o.shift();for(var a in n)if(r=n[a],a===i){s=r;break}else r&&typeof r=="object"&&r.childrenMap&&o.push(r.childrenMap);if(s)break}}else if(i.indexOf("[")===-1)this.childrenMap&&(s=this.childrenMap[i]);else{var p=i.match(jmt);if(p!=null&&this.childrenMap){var h=this.childrenMap[p[1]];h&&(s=h[p[2]])}}return e.length===0?s:s&&s.childrenMap?s.getElement(e):null}},jmt=/(\S+)\[(\d+)\]/i,GV=$mt;var Zmt=function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}else{if(this.getParentSizer(e)!==this)return null;for(var i in this.sizerChildren)if(this.sizerChildre[i]===e)return i;return null}},kV=Zmt;var VV={getInnerPadding(e){return vh(this.space,e)},setInnerPadding(e,t){return _i(this.space,e,t),this},getOuterPadding(e){return vh(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return _i(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),vh(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,i){return typeof e=="string"&&(e=this.getElement(e)),_i(this.getSizerConfig(e).padding,t,i),this}};var Kmt=function(e){var t=this.childrenWidth;if(t!==void 0){var i=this.minWidth!==void 0?this.minWidth*this.scaleX:0;return e===void 0?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${i}) or childrenWidth (${t} > targetWidth ${e})`),e}},Qh=Kmt;var Jmt=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runWidthWrap)&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},qh=Jmt;var Qmt=function(e){var t,i,s;for(var n in this.sizerChildren)t=this.sizerChildren[n],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildWidth(t,e),s=t.resolveWidth(i),s===void 0&&(s=i),t.resolveChildrenWidth(s))},UV=Qmt;var qmt=function(e){var t,i,s;for(var n in this.sizerChildren)t=this.sizerChildren[n],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(i=this.getExpandedChildWidth(t,e),t.isRexSizer?(s=t.resolveWidth(i),s===void 0&&(s=i)):s=i,t.runWidthWrap(s));return this},_h=qmt;var _mt=function(e){var t=this.childrenHeight;if(t!==void 0){var i=this.minHeight!==void 0?this.minHeight*this.scaleY:0;return e===void 0?(e=Math.max(i,t),this.layoutWarnEnable&&i>0&&t>i&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(i>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${i}) or childrenHeight (${t}) > targetHeight (${e})`),e}},tu=_mt;var tgt=function(){var e;for(var t in this.sizerChildren)if(e=this.sizerChildren[t],!(!e||e.isRexSizer&&e.ignoreLayout||!e.runHeightWrap)&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},eu=tgt;var egt=function(e){var t,i,s;for(var n in this.sizerChildren)t=this.sizerChildren[n],t&&t.isRexSizer&&!t.ignoreLayout&&(i=this.getExpandedChildHeight(t,e),s=t.resolveHeight(i),s===void 0&&(s=i),t.resolveChildrenHeight(s))},zV=egt;var igt=function(e){var t,i,s;for(var n in this.sizerChildren)t=this.sizerChildren[n],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(i=this.getExpandedChildHeight(t,e),t.isRexSizer?(s=t.resolveHeight(i),s===void 0&&(s=i)):s=i,t.runHeightWrap(s));return this},iu=igt;var rgt=function(e){var t;if(e.isRexSizer){var i=e.childrenWidth;if(i==null)return;var s=e.minWidth*e.scaleX;t=Math.max(s,i)}else e.minWidth!==void 0?t=e.minWidth:e._minWidth!==void 0?t=e._minWidth:t=mt(e);return t},WV=rgt;var ngt=function(e){var t;if(e.isRexSizer){var i=e.childrenHeight;if(i===void 0)return;var s=e.minHeight*e.scaleY;t=Math.max(s,i)}else e.minHeight!==void 0?t=e.minHeight:e._minHeight!==void 0?t=e._minHeight:t=gt(e);return t},HV=ngt;var sgt=function(e,t){return t},YV=sgt;var agt=function(e,t){return t},XV=agt;var ogt=function(){return 0},$V=ogt;var lgt=function(){return 0},jV=lgt;var hgt=function(e){e===void 0&&(e=[]);for(var t=e.length,i=this.getChildrenSizers(e),s=e.length,n=t;n<s;n++)i[n].getAllChildrenSizers(e);return e},ZV=hgt;var ugt=function(e){return e===void 0&&(e=[]),e},KV=ugt;var JV={getShownChildren(e){e===void 0&&(e=[]);for(var t=this.children,i,s=0,n=t.length;s<n;s++)i=t[s],!(i.rexSizer&&i.rexSizer.hidden)&&e.push(i);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var i=t.shift();i.rexSizer&&i.rexSizer.hidden||(i!==this&&e.push(i),i.isRexContainerLite&&t.push(...i.children))}return e}};var dgt=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e=this.getChildrenSizers(),t,i=0,s=e.length;i<s;i++)t=e[i],!t.ignoreLayout&&t.preLayout()},On=dgt;var fgt=function(){return this.runLayout(),this},QV=fgt;var cgt=function(e){if(e.resize)return!0;if(!e.setSize)return!1;for(var t=0,i=qV.length;t<i;t++){var s=qV[t];if(s&&e instanceof s)return!1}return!0},qV=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],_V=cgt;var pgt=function(e){if(e.displayWidth===void 0)return!1;for(var t=0,i=t8.length;t<i;t++){var s=t8[t];if(s&&e instanceof s)return!1}return!0},t8=[Phaser.GameObjects.BitmapText],e8=pgt;var vgt=function(e,t,i){if(!(!e||t===void 0&&i===void 0))if(_V(e)){var s,n;t===void 0?s=e.width:s=t/e.scaleX,i===void 0?n=e.height:n=i/e.scaleY,e.resize?e.resize(s,n):e.setSize(s,n)}else{var o=e8(e);t!==void 0&&(o?e.displayWidth=t:e.scaleX=t/e.width),i!==void 0&&(o?e.displayHeight=i:e.scaleY=i/e.height)}},ne=vgt;var mgt=function(e,t,i){if(this.ignoreLayout)return this;var s=!e;s&&this.preLayout();var n,o;s||e.runChildrenWrapFlag?(n=this.hasWidthWrap(),o=this.hasHeightWrap()):(n=!1,o=!1);var r=ggt(this,t,i,n,o);r||console.error("Can't resolve size of ",this);var a=r.width,p=r.height;return ne(this,a,p),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,a,p),s&&this._anchor&&this._anchor.updatePosition(),this},ggt=function(e,t,i,s,n){var o=i8(e,t,s),r=xgt(e,i,n);return o===void 0&&(o=i8(e,t,s)),o!==void 0&&r!==void 0?{width:o,height:r}:!1},i8=function(e,s,i){var s=e.resolveWidth(s);return s!==void 0&&i&&(e.resolveChildrenWidth(s),e.runWidthWrap(s)),s},xgt=function(e,s,i){var s=e.resolveHeight(s);return s!==void 0&&i&&(e.resolveChildrenHeight(s),e.runHeightWrap(s)),s},r8=mgt;var ygt=function(){},n8=ygt;var Cgt=function(e,t,i){return this},s8=Cgt;var Sgt=function(e,t,i,s){ne(i,e,t)},a8=Sgt;var A0=Phaser.Utils.Objects.GetValue,_M=class extends Et{constructor(t,i){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(i)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){t===void 0&&(t={});var i,s;t.x!==void 0?(i=null,s=t.x):t.left!==void 0?(i=0,s=t.left):t.right!==void 0?(i=1,s=t.right):t.centerX!==void 0&&(i=.5,s=t.centerX);var n,o;t.y!==void 0?(n=null,o=t.y):t.top!==void 0?(n=0,o=t.top):t.bottom!==void 0?(n=1,o=t.bottom):t.centerY!==void 0&&(n=.5,o=t.centerY);var r,a;s!==void 0&&(s=s.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),r=parseFloat(s[0])/100,a=s[1]===""?0:parseFloat(s[1]));var p,h;o!==void 0&&(o=o.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),p=parseFloat(o[0])/100,h=o[1]===""?0:parseFloat(o[1]));var u=t.width,f,l;u!==void 0&&(u=u.split("%"),f=parseFloat(u[0])/100,l=u[1]===""?0:parseFloat(u[1]));var d=t.height,v,c;d!==void 0&&(d=d.split("%"),v=parseFloat(d[0])/100,c=d[1]===""?0:parseFloat(d[1])),this.setAlign(i,n),this.setPercentage(r,p),this.setOffset(a,h),this.setSizePercentage(f,v),this.setSizePadding(l,c);var m=A0(t,"onResizeCallback",a8),g=A0(t,"onResizeCallbackScope");this.setResizeCallback(m,g);var y=A0(t,"onUpdateViewportCallback"),x=A0(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(y,x),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t?this:(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t,this)}setAlign(t,i){return this.alignX=t,this.alignY=i,this}setPercentage(t,i){return this.percentageX=t,this.percentageY=i,this}setOffset(t,i){return this.offsetX=t,this.offsetY=i,this}setSizePercentage(t,i){return this.percentageWidth=t,this.percentageHeight=i,this}setSizePadding(t,i){return this.paddingWidth=t,this.paddingHeight=i,this}setResizeCallback(t,i){return this.onResizeCallback=t,this.onResizeCallbackScope=i,this}setUpdateViewportCallback(t,i){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=i,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,i=this.onResizeCallbackScope,s=this.anchorWidth,n=this.anchorHeight;if(!(s===void 0&&n===void 0||!t)){var o=this.parent;s===void 0&&(s=o.width),n===void 0&&(n=o.height),i?t.call(i,s,n,o,this):t(s,n,o,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Sr(this.scene,t,this.viewport);var i=this.viewport,s=this.onUpdateViewportCallback,n=this.onUpdateViewportCallbackScope;s&&(n?s.call(n,i,this.parent,this):s(i,this.parent,this))}},o8=_M;var yf=o8;var Tgt=function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),i=e.hasOwnProperty("height"),s=e.hasOwnProperty("onResizeCallback");return(t||i)&&!s&&(e.onResizeCallback=function(n,o,r){t&&r.setMinWidth(n),i&&r.setMinHeight(o),r.layout()}),this._anchor===void 0?this._anchor=new yf(this,e):this._anchor.resetFromJSON(e),this},l8=Tgt;var Egt=Phaser.Utils.Objects.GetValue,ru=Phaser.Utils.Objects.GetAdvancedValue,h8=Phaser.Math.Linear,t1=class extends Ai{constructor(t,i){super(t,i),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Egt(t,"mode",0)),this.setScaleRange(ru(t,"start",void 0),ru(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=Pgt[t]),this.mode=t,this}setScaleRange(t,i){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=ru(t,"x",this.parent.scaleX),this.startY=ru(t,"y",this.parent.scaleY)),typeof i=="number"?(this.endX=i,this.endY=i):(this.endX=ru(i,"x",void 0),this.endY=ru(i,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var i=this.repeat;return this.mode===2&&i!==-1&&(i=(i+1)*2-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(i),super.start(),this}updateTarget(t,i){var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasScaleX&&(t.scaleX=h8(this.startX,this.endX,s)),this.hasScaleY&&(t.scaleY=h8(this.startY,this.endY,s))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},Pgt={stop:0,destroy:1,yoyo:2},cs=t1;var Mgt=function(e,t,i,s,n){s===void 0&&(s="Cubic");var o,r;switch(i){case 0:case"x":o={x:0},r={x:e.scaleX};break;case 1:case"y":o={y:0},r={y:e.scaleY};break;default:o=0,r=e.scale;break}var a={mode:0,start:o,end:r,duration:t,ease:s};return n===void 0?n=new cs(e,a):n.resetFromJSON(a),n.restart(),n},O0=Mgt;var Cf=O0;var wgt=function(e,t,i,s,n,o){s===void 0&&(s="Linear"),n instanceof cs&&(o=n,n=void 0),n===void 0&&(n=!0);var r={};switch(r.mode=n?1:0,i){case 0:case"x":r.end={x:0};break;case 1:case"y":r.end={y:0};break;default:r.end=0;break}return r.duration=t,r.ease=s,o===void 0?o=new cs(e,r):o.resetFromJSON(r),o.restart(),o},D0=wgt;var e1=D0;var bgt=function(e,t,i,s,n,o,r){i===void 0&&(i=1.2),s===void 0&&(s=0),o===void 0&&(o="Cubic");var a,p;switch(n){case 0:case"x":a={x:e.scaleX},p={x:i};break;case 1:case"y":a={y:e.scaleX},p={y:i};break;default:a=e.scaleX,p=i;break}var h={mode:2,start:a,end:p,duration:t/2,ease:o,repeat:s};return r===void 0?r=new cs(e,h):r.resetFromJSON(h),r.restart(),r},i1=bgt;var r1=Phaser.Utils.Objects.IsPlainObject,L0={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,i){if(r1(e)){var s=e;e=s.duration,t=s.orientation,i=s.ease}var n=this._scaleBehavior===void 0;return this._scaleBehavior=O0(this,e,t,i,this._scaleBehavior),n&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,i){return this.popUp(e,t,i),fe(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,i,s){if(r1(e)){var n=e;e=n.duration,t=n.orientation,i=n.ease,s=n.destroy}var o=this._scaleBehavior===void 0;return this._scaleBehavior=D0(this,e,t,i,s,this._scaleBehavior),o&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,i,s){return this.scaleDownDestroy(e,t,i,s),fe(this._scaleBehavior)},scaleDown(e,t,i){return this.scaleDownDestroy(e,t,i,!1),this},scaleDownPromise(e,t,i){return this.scaleDown(e,t,i),fe(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,i,s,n){if(r1(e)){var o=e;e=o.duration,t=o.peakValue,i=o.repeat,s=o.orientation,n=o.ease}var r=this._scaleBehavior===void 0;return this._scaleBehavior=i1(this,e,t,i,s,n,this._scaleBehavior),r&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,i,s,n){return this.scaleYoyo(e,t,i,s,n),fe(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}};var n1={};Object.assign(n1,L0);n1.onInitScale=function(){L0.onInitScale.call(this);var e=this,t=this._scaleBehavior;t.on("update",function(){var i=Mr.getParentSizer(e);i&&i.resetChildPositionState(e)})};var Dn=n1;var Rgt=Phaser.Utils.Objects.GetValue,u8=Phaser.Utils.Objects.GetAdvancedValue,Igt=Phaser.Math.Linear,s1=class extends Ai{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(Rgt(t,"mode",0)),this.setAlphaRange(u8(t,"start",this.parent.alpha),u8(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=Agt[t]),this.mode=t,this}setAlphaRange(t,i){return this.alphaStart=t,this.alphaEnd=i,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return t.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,i){var s=i.t;i.isOddIteration&&(s=1-s),t.alpha=Igt(this.alphaStart,this.alphaEnd,s)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},Agt={stop:0,destroy:1,yoyo:2},nu=s1;var Ogt=Phaser.Utils.Objects.IsPlainObject,Dgt=function(e,t,i,s){var n,o;Ogt(i)?(n=i.start,o=i.end):o=i,n===void 0&&(n=0),o===void 0&&(o=1);var r={mode:0,start:n,end:o,duration:t};return s===void 0?s=new nu(e,r):s.resetFromJSON(r),s.restart(),s},F0=Dgt;var bo=F0;var Lgt=function(e,t,i,s){i instanceof nu&&(s=i,i=void 0),i===void 0&&(i=!0);var n={mode:i?1:0,end:0,duration:t};return s===void 0?s=new nu(e,n):s.resetFromJSON(n),s.restart(),s},B0=Lgt;var Ro=B0;var d8=Phaser.Utils.Objects.IsPlainObject,N0={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(d8(e)){var i=e;e=i.duration,t=i.alpha}var s=this._fade===void 0;return this._fade=F0(this,e,t,this._fade),s&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),fe(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(d8(e)){var i=e;e=i.duration,t=i.destroy}var s=this._fade===void 0;return this._fade=B0(this,e,t,this._fade),s&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),fe(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),fe(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}};var a1={};Object.assign(a1,N0);a1.onInitFade=function(){N0.onInitFade.call(this);var e=this,t=this._fade;t.on("update",function(){var i=Mr.getParentSizer(e);i&&i.resetChildAlphaState(e)})};var Sf=a1;var Fgt=Phaser.Utils.Objects.GetValue,su=Phaser.Utils.Objects.GetAdvancedValue,f8=Phaser.Math.Linear,o1=class extends Ai{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(Fgt(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=su(t,"x",void 0),s=su(t,"y",void 0);this.setTargetPosition(i,s)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=Bgt[t]),this.mode=t,this}setTargetPosition(t,i){if(typeof t=="number"||typeof i=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var s=t;this.startX=su(s,"startX",void 0),this.startY=su(s,"startY",void 0),this.endX=su(s,"endX",void 0),this.endY=su(s,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,i){var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasMoveX&&(t.x=f8(this.startX,this.endX,s)),this.hasMoveY&&(t.y=f8(this.startY,this.endY,s))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}},Bgt={stop:0,destroy:1,yoyo:2},da=o1;var Ngt=function(e,t){if(typeof e=="number")return e;var i=e[0],s=parseFloat(e.substr(2));switch(i){case"+":return t+s;case"-":return t-s;case"*":return t*s;case"/":return t/s}},au=Ngt;var Ggt=function(e,t,i,s,n,o,r){o instanceof da&&(r=o,o=void 0),o===void 0&&(o=!1);var a={};return a.mode=o?1:0,i!==void 0&&(a.startX=e.x,a.endX=au(i,e.x)),s!==void 0&&(a.startY=e.y,a.endY=au(s,e.y)),a.duration=t,a.ease=n===void 0?"Linear":n,r===void 0?r=new da(e,a):r.resetFromJSON(a),r.restart(),r},ou=Ggt;var kgt=function(e,t,i,s,n,o,r){o instanceof da&&(r=o,o=void 0),o===void 0&&(o=!1);var a={};return a.mode=o?1:0,i!==void 0&&(a.startX=au(i,e.x),a.endX=e.x),s!==void 0&&(a.startY=au(s,e.y),a.endY=e.y),a.duration=t,a.ease=n===void 0?"Linear":n,r===void 0?r=new da(e,a):r.resetFromJSON(a),r.restart(),r},lu=kgt;var c8=Phaser.Utils.Objects.IsPlainObject,p8=Phaser.Math.Distance.Between,Tf={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,i,s,n){if(c8(e)){var o=e;t=o.x,i=o.y,o.hasOwnProperty("speed")?e=p8(t,i,this.x,this.y)*1e3/o.speed:e=o.duration,s=o.ease}var r=this._easeMove===void 0;return this._easeMove=lu(this,e,t,i,s,n,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,i,s,n){return this.moveFrom(e,t,i,s,n),fe(this._easeMove)},moveFromDestroy(e,t,i,s){return this.moveFrom(e,t,i,s,!0),this},moveFromDestroyPromise(e,t,i,s){return this.moveFromDestroy(e,t,i,s),fe(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,i,s,n){if(c8(e)){var o=e;t=o.x,i=o.y,o.hasOwnProperty("speed")?e=p8(t,i,this.x,this.y)*1e3/o.speed:e=o.duration,s=o.ease}var r=this._easeMove===void 0;return this._easeMove=ou(this,e,t,i,s,n,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,i,s,n){return this.moveTo(e,t,i,s,n),fe(this._easeMove)},moveToDestroy(e,t,i,s){return this.moveTo(e,t,i,s,!0),this},moveToDestroyPromise(e,t,i,s){return this.moveToDestroy(e,t,i,s,!0),fe(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}};var l1={};Object.assign(l1,Tf);l1.onInitEaseMove=function(){Tf.onInitEaseMove.call(this);var e=this,t=this._easeMove;t.on("update",function(){var i=Mr.getParentSizer(e);i&&i.resetChildPositionState(e)})};var G0=l1;var wr=Phaser.Utils.Objects.GetValue,h1=class extends ea{constructor(t,i){super(t,i),this.timer=new xg,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(wr(t,"timer")),this.setEnable(wr(t,"enable",!0)),this.setMode(wr(t,"mode",1)),this.isRunning=wr(t,"isRunning",!1),this.setMagnitudeMode(wr(t,"magnitudeMode",1)),this.setAxisMode(wr(t,"axis",0)),this.setDuration(wr(t,"duration",500)),this.setMagnitude(wr(t,"magnitude",10)),this.ox=wr(t,"ox",void 0),this.oy=wr(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=Vgt[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=zgt[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=Ugt[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,i){if(typeof t!="number"){var s=t;i=wr(s,"magnitude",void 0),t=wr(s,"duration",void 0)}return i!==void 0&&this.setMagnitude(i),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,i){return this.start(t,i),this}update(t,i){if(!this.isRunning||!this.enable)return this;var s=this.parent;if(!s.active)return this;if(this.timer.update(t,i),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=s.x,this.oy=s.y);var n=this.magnitude;this.magnitudeMode===1&&(n*=1-this.timer.t);var o=Math.random()*Math.PI*2,r=this.ox+Math.cos(o)*n,a=this.oy+Math.sin(o)*n;switch(this.axisMode){case 1:s.x=r;break;case 2:s.y=a;break;default:s.x=r,s.y=a;break}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy;break}return this.ox=void 0,this.oy=void 0,this}},Vgt={effect:0,behavior:1},Ugt={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},zgt={constant:0,decay:1},v8=h1;var m8=v8;var Ef=m8;var Wgt=Phaser.Utils.Objects.IsPlainObject,Hgt=function(e,t){t.on("complete",function(){e.emit("shake.complete",e)})},g8={shake(e,t,i){if(Wgt(e)){var s=e;e=s.duration,t=s.magnitude,i=s.magnitudeMode}return this._shake===void 0&&(this._shake=new Ef(this,{mode:0,magnitudeMode:1}),Hgt(this,this._shake)),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),i!==void 0&&this._shake.setMagnitudeMode(i),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),fe(this._shake)}};var x8=Phaser.Utils.Objects.IsPlainObject,u1=class extends Et{constructor(t,i){super(t,i),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var i=this.easeTasks[t];return i===void 0&&(i=new We(this.parent),this.easeTasks[t]=i,i.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),i}easeTo(t,i,s,n){if(x8(t)){var o=t;t=o.key,i=o.value,s=o.duration,n=o.ease;var r=o.speed;s===void 0&&r!==void 0&&(s=Math.abs(i-this.parent.data.values[t])/r*1e3)}s===void 0&&(s=1e3),n===void 0&&(n="Linear");var a=this.getEaseTask(t);return a.restart({key:t,to:i,duration:s,ease:n}),this}easeFrom(t,i,s,n){if(x8(t)){var o=t;t=o.key,i=o.value,s=o.duration,n=o.ease;var r=o.speed;s===void 0&&r!==void 0&&(s=Math.abs(i-this.parent.data.values[t])/r*1e3)}s===void 0&&(s=1e3),n===void 0&&(n="Linear");var a=this.getEaseTask(t);return a.restart({key:t,from:i,duration:s,ease:n}),this}stopEase(t,i){i===void 0&&(i=!0);var s=this.easeTasks[t];return s&&s.stop(i),this}stopAll(t){t===void 0&&(t=!0);for(var i in this.easeTasks)this.stopEase(i,t);return this}},d1=u1;var Ygt=function(e,t){t.on("complete",function(i){e.emit(`easedata.${i}.complete`,e),e.emit("easedata.complete",i,e)})},y8={easeDataTo(e,t,i,s){return this._easeData||(this._easeData=new d1(this),Ygt(this,this._easeData)),this._easeData.easeTo(e,t,i,s),this},easeDataToPromise(e,t,i,s){return this.easeDataTo(e,t,i,s),ra(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}};var Xgt=Phaser.Utils.Array.Remove,$gt=function(e){e._delayCallTimers=[],e.once("destroy",function(){for(var t=e._delayCallTimers,i=0,s=t.length;i<s;i++)t[i].remove();e._delayCallTimers=void 0})},k0={delayCall(e,t,i){var s=this._delayCallTimers;s===void 0&&$gt(this);var n,o=this,r=function(){Xgt(o._delayCallTimers,n),i?t.call(i):t()};return n=this.scene.time.delayedCall(e,r),this._delayCallTimers.push(n),this}};var br=function(e){C8(e,!1)},Rr=function(e){C8(e,!0)},hu=function(e){if(!e)return!1;var t=Mo(e);return!t.hidden},C8=function(e,t){if(e){var i=Mo(e);i.hidden=t;var s=Fe(e);s?s.setChildVisible(e,!t):e.setVisible(!t)}};var S8={show(e){return e===void 0&&(e=this),br(e,!1),this},hide(e){return e===void 0&&(e=this),Rr(e,!0),this},isShow(e){return e===void 0&&(e=this),hu(e)}};var jgt=["next","exit","enter"],V0=class{constructor(t){var i=Ot(t,"states",void 0);i&&this.addStates(i);var s=Ot(t,"extend",void 0);if(s)for(var n in s)(!this.hasOwnProperty(n)||this[n]===void 0)&&(this[n]=s[n]);var o=Ot(t,"eventEmitter",void 0),r=Ot(t,"EventEmitterClass",void 0);this.setEventEmitter(o,r),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(Ot(t,"enable",!0)),this.start(Ot(t,"start",void 0));var i=Ot(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(!(!this.enable||this._stateLock)&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var i="exit_"+this._prevState,s=this[i];s&&s.call(this),this.emit(i,this)}if(this._stateLock=!1,this._state!=null){var n="enter_"+this._state,o=this[n];o&&o.call(this),this.emit(n,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return t!=null&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(typeof i=="string"?t=i:t=i.call(this)),this.goto(t),this}get stateProperties(){return jgt}addState(t,i){typeof t!="string"&&(i=t,t=i.name);for(var s=this.stateProperties,n=0,o=s.length;n<o;n++){var r=s[n],a=i[r];a&&(this[`${r}_${t}`]=a)}return this}addStates(t){if(Array.isArray(t))for(var i=0,s=t.length;i<s;i++)this.addState(t[i]);else for(var n in t)this.addState(n,t[n]);return this}runMethod(t,i,s,n,o,r){var a=this[t+"_"+this.state];if(a){var p=arguments.length;switch(p){case 1:return a.call(this);case 2:return a.call(this,i);case 3:return a.call(this,i,s);case 4:return a.call(this,i,s,n);case 5:return a.call(this,i,s,n,o);case 6:return a.call(this,i,s,n,o,r)}for(var h=new Array(p-1),u=1;u<p;u++)h[u-1]=arguments[u];return a.apply(this,h)}}};Object.assign(V0.prototype,Ag);var T8=V0;var Zgt=function(e,t,i,s,n){n===void 0&&(n=!1);var o=e._events[t];if(!o)return!1;for(var r=0,a=o.length;r<a;r++){var p=o[r];if(p.fn===i&&p.context===s&&p.once===n)return!0}return!1},U0=Zgt;var Kgt=["next","exit","enter","update","preupdate","postupdate"],f1=class extends T8{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=Ot(t,"scene",void 0),this}get stateProperties(){return Kgt}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}startUpdate(t){t||(t=this._scene);var i=t.sys.events;return U0(i,"update",this.update,this)?this:(this._scene=t,i.on("update",this.update,this),this)}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var i=t.sys.events;return U0(i,"preupdate",this.preupdate,this)?this:(this._scene=t,i.on("preupdate",this.preupdate,this),this)}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var i=t.sys.events;return U0(i,"postupdate",this.postupdate,this)?this:(this._scene=t,i.on("postupdate",this.postupdate,this),this)}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}},z0=f1;var Si=z0;var c1=class extends Si{constructor(t,i){super(i),this.parent=t;var s=i.initState||"IDLE";this.start(s)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var t=this.parent;if(t.transitInTime>0){var i=t.runTransitionInCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_OPNE(){var t=this.parent;t.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){var t=this.parent;t.onOpen()}exit_OPEN(){var t=this.parent;t.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var t=this.parent;if(t.transitOutTime>0){var i=t.runTransitionOutCallback();t.delayCall(i,this.next,this)}else this.next()}exit_TRANS_CLOSE(){var t=this.parent;t.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){var t=this.parent;t.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}},E8=c1;var Jgt=function(e,t,i,s,n){var o=Tr(e),r=o.time.delayedCall(t,function(){o.game.events.once("poststep",function(){i.call(s,n)})});return r},P8=Jgt;var M8={delayCall(e,t,i){return this.delayCallTimer=P8(this,e,t,i),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}};var w8={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=re),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=re),this.transitOutCallback=e,this}};var b8={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var i=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=i,this}};var R8={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var i=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=i,this}};var I8={};Object.assign(I8,M8,w8,b8,R8);var A8=I8;var uu=Phaser.Utils.Objects.GetValue,W0=class extends Et{constructor(t,i){super(t,i),this.setTransitInTime(uu(i,"duration.in",200)),this.setTransitOutTime(uu(i,"duration.out",200)),this.setTransitInCallback(uu(i,"transitIn")),this.setTransitOutCallback(uu(i,"transitOut")),this.oneShotMode=uu(i,"destroy",!1),this.delayCallTimer=void 0,this._state=new E8(this,{eventEmitter:!1,initState:uu(i,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}};Object.assign(W0.prototype,A8);var du=W0;var Qgt=Phaser.GameObjects.Rectangle,p1=class extends Qgt{constructor(t,i,s){super(t,0,0,2,2,i,1),this.fullWindow=new Zg(this),this.setAlpha(s)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}},O8=p1;var H0=O8;var v1=Phaser.Utils.Objects.GetValue,m1=class extends Et{constructor(t,i){super(t,{eventEmitter:!1}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setHitAreaMode(v1(t,"hitAreaMode",0)),this.setEnable(v1(t,"enable",!0)),this.setStopMode(v1(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,i,s,n){this.stopAllLevels&&n.stopPropagation()},this).on("pointerup",function(t,i,s,n){this.stopAllLevels&&n.stopPropagation()},this).on("pointermove",function(t,i,s,n){this.stopAllLevels&&n.stopPropagation()},this).on("pointerover",function(t,i,s,n){this.stopAllLevels&&n.stopPropagation()},this).on("pointerout",function(t,i){this.stopAllLevels&&i.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=qgt[t]);var i=this.parent;return i.input&&i.removeInteractive(),t===0?i.setInteractive():i.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}},qgt={default:0,fullWindow:1},D8=m1;var Y0=D8;var L8=Phaser.Utils.Objects.GetValue,g1=class extends H0{constructor(t,i){var s=L8(i,"color",0),n=L8(i,"alpha",.8);super(t,s,n),this.touchEventStop=new Y0(this,{hitAreaMode:1})}},X0=g1;var _gt=function(e,t){var i=e.scene,s=new X0(i,t);return i.add.existing(s),e.isRexContainerLite?(e.pin(s,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),e.moveDepthBelow(s)):i.children.moveBelow(s,e),s},F8=_gt;var Pf={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,Cf(e,t)},scaleDown(e,t){e1(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,bo(e,t)},fadeOut(e,t){Ro(e,t,!1)}};var B8=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,bo(e,t,e.alpha)},N8=function(e,t){Ro(e,t,!1)};var t0t=function(e,t,i,s,n){if(!e||s&&!s(e,t,i))return!1;var o=xh(e,!0);return!(!o.contains(t,i)||n&&!n(e,t,i))},fa=t0t;var Ln=Phaser.Utils.Objects.GetValue,x1=class extends du{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=ca.popUp),i.transitOut==null&&(i.transitOut=ca.scaleDown),i.destroy=Ln(i,"destroy",!0),super(t,i);var s=Ln(i,"cover");this.cover=s!==!1?F8(t,s):void 0,this.cover&&(this.setCoverTransitInCallback(Ln(s,"transitIn",B8)),this.setCoverTransitOutCallback(Ln(s,"transitOut",N8)));var n=Ln(i,"touchOutsideClose",!1),o=Ln(i,"duration.hold",-1),r=Ln(i,"timeOutClose",o>=0),a=Ln(i,"anyTouchClose",!1),p=Ln(i,"manualClose",!1);p&&(n=!1,a=!1,r=!1),a&&(n=!1),r?this.setDisplayTime(o):this.setDisplayTime(-1),a?this.once("open",this.anyTouchClose,this):n&&this.once("open",this.touchOutsideClose,this),Ln(i,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(t){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!t&&(this.cover.destroy(),this.cover=void 0),super.shutdown(t))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&fa(this.parent,t.worldX,t.worldY)||this.requestClose()}runTransitionInCallback(){var t=super.runTransitionInCallback(),i=this.cover;return i&&this.coverTransitInCallback&&this.coverTransitInCallback(i,t),t}runTransitionOutCallback(){var t=super.runTransitionOutCallback(),i=this.cover;return i&&this.coverTransitOutCallback&&this.coverTransitOutCallback(i,t),t}onOpen(){var t=this.displayTime;t>=0&&this.delayCall(t,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(t){return this.displayTime=t,this}setTransitInCallback(t){switch(typeof t=="string"&&(t=ca[t]),t){case ca.popUp:t=Pf.popUp;break;case ca.fadeIn:t=Pf.fadeIn;break}return super.setTransitInCallback(t),this}setTransitOutCallback(t){switch(typeof t=="string"&&(t=ca[t]),t){case ca.scaleDown:t=Pf.scaleDown;break;case ca.fadeOut:t=Pf.fadeOut;break}return super.setTransitOutCallback(t),this}setCoverTransitInCallback(t){return this.coverTransitInCallback=t,this}setCoverTransitOutCallback(t){return this.coverTransitOutCallback=t,this}},ca={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},$0=x1;var Io=function(e,t){var i=new $0(e,t);return i.on("open",function(){e.emit("modal.open",i)}),i.on("close",function(s){e.emit("modal.close",s,i)}),e.on("modal.requestClose",i.requestClose,i),i},j0=function(e,t){var i=Io(e,t);return new Promise(function(s,n){i.once("close",function(o){s(o)})})},fu=function(e,t){e.emit("modal.requestClose",t)};var e0t=function(e){return e&&typeof e=="function"},Be=e0t;var pa={modal(e,t){return Be(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=Io(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(i,s){t.modal(e,i)})},modalClose(e){return fu(this,e),this}};var i0t=function(e,t,i,s,n,o){return o===void 0&&(o=!1),t[o?"once":"on"](i,s,n),e.once("destroy",function(){t.off(i,s,n)}),e},G8=i0t;var ps=function(e,t,i,s,n){Be(t)&&(n=s,s=i,i=t,t=this);var o=this.scene.events;return this.bindEvent(t,o,e,i,s,n),this},k8={bindEvent(e,t,i,s,n,o){return typeof t=="string"&&(o=n,n=s,s=i,i=t,t=e,e=this),G8(e,t,i,s,n,o),this},bindScenePreupdateEvent(e,t,i,s){return ps.call(this,"preupdate",e,t,i,s),this},bindSceneUpdateEvent(e,t,i,s){return ps.call(this,"update",e,t,i,s),this},bindScenePostupdateEvent(e,t,i,s){return ps.call(this,"postupdate",e,t,i,s),this},bindSceneRenderEvent(e,t,i,s){return ps.call(this,"render",e,t,i,s),this},bindScenePauseEvent(e,t,i,s){return ps.call(this,"pause",e,t,i,s),this},bindSceneResumeEvent(e,t,i,s){return ps.call(this,"resume",e,t,i,s),this},bindSceneSleepEvent(e,t,i,s){return ps.call(this,"sleep",e,t,i,s),this},bindSceneWakeEvent(e,t,i,s){return ps.call(this,"wake",e,t,i,s),this},bindSceneShutdownEvent(e,t,i,s){return ps.call(this,"shutdown",e,t,i,s),this}};var r0t=function(e,t,i){var s=e.camera;return s?(i===void 0?i={}:i===!0&&(i=n0t),s===t?(i.x=e.worldX,i.y=e.worldY):s.getWorldPoint(e.x,e.y,i),i):null},n0t={},cu=r0t;var s0t=function(e,t,i,s,n){var o=e.scene.sys.cameras.main,r,a=e.scrollFactorX===0&&e.scrollFactorY===0;if(t)return a?i(e,t.x,t.y,s,n):(r=cu(t,o,!0),r?i(e,r.x,r.y,s,n):!1);for(var p=e.scene.input.manager,h=p.pointersTotal,u=p.pointers,f=0;f<h;f++)if(t=u[f],a){if(i(e,t.x,t.y,s,n))return!0}else{if(r=cu(t,o,!0),!r)continue;if(i(e,r.x,r.y,s,n))return!0}return!1},V8=s0t;var a0t=function(e,t,i,s){return V8(e,t,fa,i,s)},ti=a0t;var o0t=function(e,t){return(de(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),ti(t,e)},U8=o0t;var l0t=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Ne=l0t;var h0t=function(e,t,i,s,n){return fa(e,t,i,u0t(s),n)},z8=function(e){var t=e.rexSizer&&e.rexSizer.hidden;return!t},u0t=function(e){return e?function(t,i,s){return z8(t)?(e(t,i,s),!0):!1}:z8},qr=h0t;var d0t=function(e,t,i,s,n){if(Be(i)||(n=i,i=void 0,s=void 0),n===void 0&&(this.sizerChildren?n=this.sizerChildren:this.isRexContainerLite?n=this.children:n=this.list),Ne(n)){for(var o,r=0,a=n.length;r<a;r++)if(o=n[r],qr(o,e,t,i,s))return o}else{var o;for(var p in n)if(o=n[p],qr(o,e,t,i,s))return o}return null},Z0=d0t;var f0t=function(e,t){return t===void 0?t={}:t===!0&&(t=c0t),t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.width=e.width,t.height=e.height,t.displayWidth=e.displayWidth,t.displayHeight=e.displayHeight,t},c0t={},W8=f0t;var p0t=function(e){this.sizerEventsEnable&&(W8(e,this.getChildPrevState(e)),this.layoutedChildren.push(e))},Fn=p0t;var v0t=function(e,t,i,s,n,o,r,a){r===void 0&&(r=0),a===void 0&&(a=0),Rn(e,t,i,s,n,o),e.x+=r,e.y+=a,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)},Bn=v0t;var m0t=Phaser.Display.Align.CENTER,g0t=function(){if(this.backgroundChildren!==void 0)for(var e=this.backgroundChildren,t=this.left,i=this.top,s=this.width*this.scaleX,n=this.height*this.scaleY,o,r,a,p,h,u,f,l=0,d=e.length;l<d;l++)o=e[l],r=o.rexSizer,!r.hidden&&(a=r.padding,Fn.call(this,o),p=t+a.left*this.scaleX,h=i+a.top*this.scaleY,u=s-(a.left+a.right)*this.scaleX,f=n-(a.top+a.bottom)*this.scaleY,ne(o,u,f),Bn.call(this,o,p,h,u,f,m0t,0,0))},H8=g0t;var x0t=Phaser.Utils.Objects.IsPlainObject,y0t=function(e,t,i){if(x0t(e)){var s=e;e=s.sensor,i=s.target,t=s.draggable}else typeof t!="boolean"&&(i=t,t=void 0);var n=typeof e;if(n==="string"){var o=e;if(e=this.getElement(o),!e)return console.error(`Can get element '${o}'`),this}else(e===void 0||n!="object")&&(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(r,a,p){var h=i===void 0?this.getTopmostSizer():i;h.x+=a-e.x,h.y+=p-e.y,h.emit("sizer.drag",r,a,p)},this).on("dragstart",function(r,a,p){var h=i===void 0?this.getTopmostSizer():i;h.emit("sizer.dragstart",r,a,p)},this).on("dragend",function(r,a,p,h){var u=i===void 0?this.getTopmostSizer():i;u.emit("sizer.dragend",r,a,p,h)},this).on("drop",function(r,a){var p=i===void 0?this.getTopmostSizer():i;p.emit("sizer.drop",r,a)}),e.input._rexUIDragSizer=!0),this},Y8=y0t;var X8=En;var vs=X8;var pu={onClick(e,t,i,s){return e?(typeof e=="function"&&(s=i,i=t,t=e,e=this),e._click===void 0&&(e._click=new vs(e,s)),e._click.on("click",t,i),this):this},offClick(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._click===void 0?this:(e._click.off("click",t,i),this)},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(t),this)},disableClick(e){return e===void 0&&(e=this),e._click===void 0?this:(e._click.setEnable(!1),this)}};var Mf=Phaser.Utils.Objects.GetValue,y1=class extends Et{constructor(t,i){super(t,i),this._enable=void 0;var s=Mf(i,"inputConfig",void 0);s&&t.setInteractive(s),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(Mf(t,"enable",!0)),this.setMode(Mf(t,"mode",1)),this.setClickInterval(Mf(t,"clickInterval",100)),this.setDragThreshold(Mf(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var i=this.parent.scene;i.input.off("pointerdown",this.onPress,this),i.input.off("pointerup",this.onRelease,this),i.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var i=t?"enable":"disable";this.emit(i,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=C0t[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var i=this.parent,s=i.input?wh:ti;return s(i,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.isPointerInside(t)||(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t))))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,i,s,n){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,i){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,i),this;this.pointer=void 0;var s=this.lastClickTime;return s!==void 0&&t-s<=this.clickInterval?this:(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,i),this)}cancel(){return this.pointer=void 0,this}},C0t={press:0,pointerdown:0,release:1,pointerup:1},$8=y1;var j8=$8;var wf=j8;var Z8={onClickOutside(e,t,i,s){return e?(typeof e=="function"&&(s=i,i=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new wf(e,s)),e._clickOutside.on("clickoutside",t,i),this):this},offClickOutside(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._clickOutside===void 0?this:(e._clickOutside.off("clickoutside",t,i),this)},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(t),this)},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0?this:(e._clickOutside.setEnable(!1),this)}};var C1=class extends z0{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,i){this.remainderTime-=i,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>i?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}},K8=C1;var S1=Phaser.Utils.Objects.GetValue,T1=class extends Et{constructor(t,i){super(t,i),this._enable=void 0,this.cooldown=new K8,this.parent.setInteractive(S1(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(S1(t,"enable",!0)),this.setCooldown(S1(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,i,s){!this.enable||!t.isDown||this.pointer!==void 0||(this.pointer=t,this.isInTouching=!0)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,i){this.cooldown.update(t,i),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}},J8=T1;var Q8=J8;var ms=Q8;var q8={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),e?ti(e):!1},onTouching(e,t,i,s){return e?(typeof e=="function"&&(s=i,i=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new ms(e,s)),e._inTouching.on("intouch",t,i),this):this},offTouching(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("intouch",t,i),this)},onTouchingEnd(e,t,i,s){return e?(typeof e=="function"&&(s=i,i=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new ms(e,s)),e._inTouching.on("touchend",t,i),this):this},offTouchingEnd(e,t,i){return typeof e=="function"&&(i=t,t=e,e=this),e._inTouching===void 0?this:(e._inTouching.off("touchend",t,i),this)},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(t),this)},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0?this:(e._inTouching.setEnable(!1),this)}};var _8={onOver(e,t,i){return e?(typeof e=="function"&&(i=t,t=e,e=this),e.setInteractive().on("pointerover",t,i),this):this},onOut(e,t,i){return e?(typeof e=="function"&&(i=t,t=e,e=this),e.setInteractive().on("pointerout",t,i),this):this}};var S0t=function(e,t,i,s){if(e==="parent"){for(var n,o=0,r=t.length;o<r;o++)if(n=t[o],!!qr(n,i,s))return n.pointToChild?n.pointToChild(i,s):Z0.call(n,i,s)}else for(var o=0,r=t.length;o<r;o++){var a=t[o];if(qr(a,i,s))return a}return null},K0=S0t;var T0t=function(e,t,i,s,n,o,r,a){var p;if(o===void 0)p=n;else{var h=i[0];if(!h)return;var u=r.camera,f=n+u.scrollX*(h.scrollFactorX-1),l=o+u.scrollY*(h.scrollFactorY-1);p=K0(s,i,f,l)}p&&e.emit(t,p,r,a)},Ke=T0t;var E0t=Phaser.Utils.Objects.GetValue,P0t=function(e){var t=E0t(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",M0t,this))},M0t=function(e,t,i,s){var n=this._childrenInteractive;Ke(n.eventEmitter,`${n.eventNamePrefix}down`,n.targetSizers,n.targetMode,e.worldX,e.worldY,e,s)},tU=P0t;var w0t=Phaser.Utils.Objects.GetValue,b0t=function(e){var t=w0t(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",R0t,this))},R0t=function(e,t,i,s){var n=this._childrenInteractive;Ke(n.eventEmitter,`${n.eventNamePrefix}up`,n.targetSizers,n.targetMode,e.worldX,e.worldY,e,s)},eU=b0t;var I0t=Phaser.Utils.Objects.GetValue,A0t=function(e){var t=I0t(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",iU,this).on("pointerover",iU,this).on("pointerout",O0t,this))},iU=function(e,t,i,s){var n=this._childrenInteractive,o=n.targetSizers[0];if(o){var r=e.camera,a=e.worldX+r.scrollX*(o.scrollFactorX-1),p=e.worldY+r.scrollY*(o.scrollFactorY-1),h=K0(n.targetMode,n.targetSizers,a,p),u=n.lastOverChild;h&&u&&h===u||(n.lastOverChild=h,Ke(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,n.targetMode,u,void 0,e,s),Ke(n.eventEmitter,`${n.eventNamePrefix}over`,n.targetSizers,n.targetMode,h,void 0,e,s))}},O0t=function(e,t){var i=this._childrenInteractive,s=i.lastOverChild;i.lastOverChild=null,Ke(i.eventEmitter,`${i.eventNamePrefix}out`,i.targetSizers,i.targetMode,s,void 0,e,t)},rU=A0t;var D0t=Phaser.Utils.Objects.GetValue,L0t=function(e){var t=D0t(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var i=this._childrenInteractive;this._click=new En(this,t),this._click.on("click",function(s,n,o,r){Ke(i.eventEmitter,`${i.eventNamePrefix}click`,i.targetSizers,i.targetMode,o.worldX,o.worldY,o,r)},this)}},nU=L0t;var E1=Phaser.Utils.Objects.GetValue,M1=class extends ea{constructor(t,i){var s=Tr(t);s===t&&(t=void 0),super(s,i),this.gameObject=t,t&&t.setInteractive(E1(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(E1(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(E1(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=P1,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){if(this.enable&&this.pointer===void 0){var s=this.bounds?this.bounds.contains(t.x,t.y):!0;s&&this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=sU,this.gameObject===void 0&&(this.isTouchingAnyObject=i.length>0),this.onDragStart())}}onPointerUp(t){if(this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;i&&this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=P1,this.onDragEnd())}}onPointerMove(t){if(this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,s=this.pointer===t;!s&&i||(s&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===sU&&this.onDragEnd(),this.pointer=void 0,this.tracerState=P1,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=F0t,this}isPointerInGameObject(t,i,s){var n=this.lastPointer;return n?ti(t,n,i,s):!1}},P1=0,sU=1,F0t="IDLE",va=M1;var Ao=Phaser.Utils.Objects.GetValue,B0t=Phaser.Math.Distance.Between,w1=class extends va{constructor(t,i){super(t,i);var s=this,n={states:{IDLE:{enter:function(){s.stop(),s.tapsCount=0,s.x=0,s.y=0,s.worldX=0,s.worldY=0,s.lastPointer=void 0},exit:function(){var o=s.lastPointer;s.x=o.x,s.y=o.y,s.worldX=o.worldX,s.worldY=o.worldY}},BEGIN:{enter:function(){s.start(),s.tapsCount=0,s.emit("tappingstart",s,s.gameObject,s.lastPointer)}},RECOGNIZED:{enter:function(){s.start(),s.emit("tap",s,s.gameObject,s.lastPointer),s.emit(`${s.tapsCount}tap`,s,s.gameObject,s.lastPointer)}}},init:function(){this.state=Oo},eventEmitter:!1};this.setRecongizedStateObject(new Si(n))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(Ao(t,"time",250)),this.setTapInterval(Ao(t,"tapInterval",200)),this.setDragThreshold(Ao(t,"threshold",9)),this.setTapOffset(Ao(t,"tapOffset",10));var i=Ao(t,"taps",void 0);return i!==void 0?this.setTaps(i):(this.setMaxTaps(Ao(t,"maxTaps",void 0)),this.setMinTaps(Ao(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case Oo:this.state=vu;break;case vu:var t=this.lastPointer,i=B0t(t.upX,t.upY,t.x,t.y);i>this.tapOffset&&(this.state=mu,this.state=vu);break;case mu:this.state=vu;break}}onDragEnd(){this.state===vu&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=mu))}onDrag(){this.state!==Oo&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Oo)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===vu){var s=this.lastPointer;if(s.isDown){var n=t-s.downTime;n>this.holdTime&&(this.state=Oo)}else{var o=t-s.upTime;o>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=mu:this.state=Oo)}}}postUpdate(t,i){!this.isRunning||!this.enable||this.state===mu&&(this.state=Oo)}get isTapping(){return this.state===mu}get isTapped(){return this.isTapping}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return i===void 0&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}},Oo="IDLE",vu="BEGIN",mu="RECOGNIZED",b1=w1;var aU=Phaser.Utils.Objects.GetValue,I1=class extends va{constructor(t,i){super(t,i);var s=this,n={states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0,s.lastPointer=void 0},exit:function(){var o=s.lastPointer;s.x=o.x,s.y=o.y,s.worldX=o.worldX,s.worldY=o.worldY}},BEGIN:{enter:function(){s.start()},exit:function(){s.stop()}},RECOGNIZED:{enter:function(){s.emit("pressstart",s,s.gameObject,s.lastPointer)},exit:function(){s.emit("pressend",s,s.gameObject,s.lastPointer)}}},init:function(){this.state=J0},eventEmitter:!1};this.setRecongizedStateObject(new Si(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(aU(t,"threshold",9)),this.setHoldTime(aU(t,"time",251)),this}onDragStart(){this.state=oU,this.holdTime===0&&(this.state=R1)}onDragEnd(){this.state=J0}onDrag(){this.state!==J0&&this.pointer.getDistance()>this.dragThreshold&&(this.state=J0)}preUpdate(t,i){if(!(!this.isRunning||!this.enable)&&this.state===oU){var s=t-this.pointer.downTime;s>=this.holdTime&&(this.state=R1)}}get isPressing(){return this.state===R1}get isPressed(){return this.isPressing}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}},J0="IDLE",oU="BEGIN",R1="RECOGNIZED",A1=I1;var N0t=Phaser.Utils.Objects.GetValue,O1=class extends va{constructor(t,i){super(t,i);var s=this,n={states:{IDLE:{},BEGIN:{enter:function(){var o=s.pointer;s.startX=o.x,s.startY=o.y,s.startWorldX=o.worldX,s.startWorldY=o.worldY}},RECOGNIZED:{enter:function(){s.emit("panstart",s,s.gameObject,s.lastPointer)},exit:function(){var o=s.lastPointer;s.endX=o.x,s.endY=o.y;var r=cu(o,s.pointerCamera,!0);s.endWorldX=r.x,s.endWorldY=r.y,s.emit("panend",s,s.gameObject,s.lastPointer)}}},init:function(){this.state=lU},eventEmitter:!1};this.setRecongizedStateObject(new Si(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(N0t(t,"threshold",10)),this}onDragStart(){this.state=hU,this.dragThreshold===0&&(this.state=Q0)}onDragEnd(){this.state=lU}onDrag(){switch(this.state){case hU:if(this.pointer.getDistance()>=this.dragThreshold){this.state=Q0,this.dx=0,this.dy=0,this.dWorldX=0,this.dWorldY=0;var n=this.pointer;this.x=n.x,this.y=n.y,this.worldX=n.worldX,this.worldY=n.worldY}break;case Q0:var t=this.pointerCamera,i=this.pointer.position,s=this.pointer.prevPosition;this.dx=i.x-s.x,this.dy=i.y-s.y,this.dWorldX=this.dx/t.zoom,this.dWorldY=this.dy/t.zoom;var n=this.pointer;this.x=n.x,this.y=n.y;var o=cu(n,t,!0);this.worldX=o.x,this.worldY=o.y,this.emit("pan",this,this.gameObject,this.lastPointer);break}}get isPanning(){return this.state===Q0}get isPanned(){return this.isPanning}setDragThreshold(t){return this.dragThreshold=t,this}},lU="IDLE",hU="BEGIN",Q0="RECOGNIZED",D1=O1;var G0t=Phaser.Math.Distance.Between,k0t=Phaser.Math.Angle.Between,uU={getDt:function(){var e=Oh(this.scene);return e},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=G0t(t.x,t.y,e.x,e.y),s=i/(this.getDt()*.001);return s},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.x-t.x),s=i/(this.getDt()*.001);return s},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=Math.abs(e.y-t.y),s=i/(this.getDt()*.001);return s},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition,i=k0t(t.x,t.y,e.x,e.y);return i}};var dU={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var V0t=function(e,t,i){switch(i===void 0?i={}:i===!0&&(i=U0t),i.left=!1,i.right=!1,i.up=!1,i.down=!1,e=(e+360)%360,t){case 0:e<180?i.down=!0:i.up=!0;break;case 1:e>90&&e<=270?i.left=!0:i.right=!0;break;case 2:e>45&&e<=135?i.down=!0:e>135&&e<=225?i.left=!0:e>225&&e<=315?i.up=!0:i.right=!0;break;case 3:e>22.5&&e<=67.5?(i.down=!0,i.right=!0):e>67.5&&e<=112.5?i.down=!0:e>112.5&&e<=157.5?(i.down=!0,i.left=!0):e>157.5&&e<=202.5?i.left=!0:e>202.5&&e<=247.5?(i.left=!0,i.up=!0):e>247.5&&e<=292.5?i.up=!0:(e>292.5&&e<=337.5&&(i.up=!0),i.right=!0);break}return i},U0t={},fU=V0t;var L1=Phaser.Utils.Objects.GetValue,z0t=Phaser.Math.RadToDeg,q0=class extends va{constructor(t,i){super(t,i);var s=this,n={states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var o=s.lastPointer;s.x=o.x,s.y=o.y,s.worldX=o.worldX,s.worldY=o.worldY}},BEGIN:{enter:function(){s.validDrag=!1}},RECOGNIZED:{enter:function(){s.start(),s.updateDirectionStates(),s.emit("swipe",s,s.gameObject,s.lastPointer)},exit:function(){s.stop(),s.clearDirectionStates()}}},init:function(){this.state=F1},eventEmitter:!1};this.setRecongizedStateObject(new Si(n)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(L1(t,"threshold",10)),this.setVelocityThreshold(L1(t,"velocityThreshold",1e3)),this.setDirectionMode(L1(t,"dir","8dir")),this}onDragStart(){this.state=cU}onDragEnd(){this.state=F1}onDrag(){this.state===cU&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=B1))}postUpdate(t,i){!this.isRunning||!this.enable||this.state===B1&&(this.state=F1)}get isSwiping(){return this.state===B1}get isSwiped(){return this.isSwiping}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();break}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=dU[t]),this.dirMode=t,this}updateDirectionStates(){var t=z0t(this.getVelocityAngle());return fU(t,this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}};Object.assign(q0.prototype,uU);var F1="IDLE",cU="BEGIN",B1="RECOGNIZED",N1=q0;var _0=Phaser.Utils.Objects.GetValue,W0t=Phaser.Utils.Array.SpliceOne,H0t=Phaser.Math.Distance.Between,Y0t=Phaser.Math.Angle.Between,ex=class{constructor(t,i){var s=Tr(t);s===t&&(t=void 0);var n=s.input.manager.pointersTotal-1;n<2&&s.input.addPointer(2-n),this.scene=s,this.gameObject=t,t&&t.setInteractive(_0(i,"inputConfig",void 0)),this.setEventEmitter(_0(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(_0(t,"enable",!0)),this.bounds=_0(t,"bounds",void 0),this.tracerState=tx,this.pointers.length=0,Ji(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Ji(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(i){var s=this.pointers.indexOf(t);if(s===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case tx:this.tracerState=Rf,this.onDrag1Start();break;case Rf:this.tracerState=Nn,this.onDrag2Start();break}}}}onPointerUp(t){if(this.enable){var i=this.bounds?this.bounds.contains(t.x,t.y):!0;if(i){var s=this.pointers.indexOf(t);if(s!==-1)switch(delete this.movedState[t.id],W0t(this.pointers,s),this.tracerState){case Rf:this.tracerState=tx,this.onDrag1End();break;case Nn:this.tracerState=Rf,this.onDrag2End(),this.onDrag1Start();break}}}}onPointerMove(t){if(this.enable&&t.isDown){var i=this.bounds?this.bounds.contains(t.x,t.y):!0,s=this.pointers.indexOf(t)!==-1;if(!(!s&&i)){if(s&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Rf:this.onDrag1();break;case Nn:this.onDrag2();break}}}}dragCancel(){return this.tracerState===Nn&&this.onDrag2End(),this.pointers.length=0,Ji(this.movedState),this.tracerState=tx,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Nn)return 0;var t=this.pointers[0],i=this.pointers[1];return H0t(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==Nn)return 0;var t=this.pointers[0],i=this.pointers[1];return Y0t(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,s=t.prevPosition;bf.x=i.x-s.x,bf.y=i.y-s.y}else bf.x=0,bf.y=0;return bf}get centerX(){if(this.tracerState!==Nn)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==Nn)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==Nn)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==Nn)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=X0t,this}isPointer0InGameObject(t,i,s){var n=this.pointers[0];return n?ti(t,n,i,s):!1}isPointer1InGameObject(t,i,s){var n=this.pointers[1];return n?ti(t,n,i,s):!1}};Object.assign(ex.prototype,gn);var bf={},tx=0,Rf=1,Nn=2,X0t="IDLE",ix=ex;var $0t=Phaser.Utils.Objects.GetValue,G1=class extends ix{constructor(t,i){super(t,i);var s=this,n={states:{IDLE:{enter:function(){s.prevDistance=void 0,s.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){s.emit("pinchstart",s)},exit:function(){s.emit("pinchend",s)}}},init:function(){this.state=pU},eventEmitter:!1};this.setRecongizedStateObject(new Si(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold($0t(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=vU,this.dragThreshold===0&&(this.state=rx)}onDrag2End(){this.state=pU}onDrag2(){switch(this.state){case vU:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=rx}break;case rx:var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;break}}get isPinching(){return this.state===rx}get isPinched(){return this.isPinching}setDragThreshold(t){return this.dragThreshold=t,this}},pU="IDLE",vU="BEGIN",rx="RECOGNIZED",k1=G1;var j0t=Phaser.Math.RotateAround,Z0t=function(e,t,i,s){return j0t(e,t,i,s),e.rotation+=s,e},V1=Z0t;var K0t=function(e,t,i,s){return s===void 0?s={}:s===!0&&(s=J0t),i.getWorldPoint(e,t,s),s},J0t={},mU=K0t;var Q0t=function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var i=this.movementCenterX,s=this.movementCenterY,n=mU(this.centerX,this.centerY,t,!0),o=n.x,r=n.y,a=this.rotation;if(Array.isArray(e))for(var p=e,h=0,u=p.length;h<u;h++)e=p[h],e.x+=i,e.y+=s,V1(e,o,r,a);else e.x+=i,e.y+=s,V1(e,o,r,a);return this},gU=Q0t;var q0t=Phaser.Utils.Objects.GetValue,U1=Phaser.Math.Angle.WrapDegrees,xU=Phaser.Math.Angle.ShortestBetween,z1=Phaser.Math.RadToDeg,_0t=Phaser.Math.DegToRad,sx=class extends ix{constructor(t,i){super(t,i);var s=this,n={states:{IDLE:{enter:function(){s.prevAngle=void 0,s.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){s.emit("rotatestart",s)},exit:function(){s.emit("rotateend",s)}}},init:function(){this.state=yU},eventEmitter:!1};this.setRecongizedStateObject(new Si(n))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(q0t(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=U1(z1(this.angleBetween)),this.state=CU,this.dragThreshold===0&&(this.state=nx)}onDrag2End(){this.state=yU}onDrag2(){switch(this.state){case CU:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=U1(z1(this.angleBetween));this.angle=xU(this.prevAngle,t),this.prevAngle=t,this.state=nx}break;case nx:var t=U1(z1(this.angleBetween));this.angle=xU(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this);break}}get isRotating(){return this.state===nx}get isRotated(){return this.isRotating}get rotation(){return _0t(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}},txt={spinObject:gU};Object.assign(sx.prototype,txt);var yU="IDLE",CU="BEGIN",nx="RECOGNIZED",W1=sx;var Do=b1;var ext=Phaser.Utils.Objects.GetValue,ixt=function(e){var t=ext(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._tap=new Do(this,t),this._tap.on("tap",function(s,n,o){Ke(i.eventEmitter,`${i.eventNamePrefix}${s.tapsCount}tap`,i.targetSizers,i.targetMode,s.worldX,s.worldY,o,s),Ke(i.eventEmitter,`${i.eventNamePrefix}tap`,i.targetSizers,i.targetMode,s.worldX,s.worldY,o,s)},this)}},SU=ixt;var Lo=A1;var rxt=Phaser.Utils.Objects.GetValue,nxt=function(e){var t=rxt(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var i=this._childrenInteractive;this._press=new Lo(this,t),this._press.on("pressstart",function(s,n,o){Ke(i.eventEmitter,`${i.eventNamePrefix}pressstart`,i.targetSizers,i.targetMode,s.worldX,s.worldY,o,s)},this).on("pressend",function(s,n,o){Ke(i.eventEmitter,`${i.eventNamePrefix}pressend`,i.targetSizers,i.targetMode,s.worldX,s.worldY,o,s)},this)}},TU=nxt;var Fo=N1;var sxt=Phaser.Utils.Objects.GetValue,axt=function(e){var t=sxt(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var i=this._childrenInteractive;this._swipe=new Fo(this,t),this._swipe.on("swipe",function(s,n,o){var r=s.left?"left":s.right?"right":s.up?"up":"down";Ke(i.eventEmitter,`${i.eventNamePrefix}swipe${r}`,i.targetSizers,i.targetMode,s.worldX,s.worldY,o,s),Ke(i.eventEmitter,`${i.eventNamePrefix}swipe`,i.targetSizers,i.targetMode,s.worldX,s.worldY,o,s)},this)}},EU=axt;var If=Phaser.Utils.Objects.GetValue,oxt=function(e,t){return e.setInteractive(),If(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:If(t,"targets",[e]),targetMode:If(t,"targetMode","parent"),eventEmitter:If(t,"eventEmitter",e),eventNamePrefix:If(t,"inputEventPrefix","child.")},tU.call(e,t),eU.call(e,t),rU.call(e,t),nU.call(e,t),SU.call(e,t),TU.call(e,t),EU.call(e,t),e},ma=oxt;var lxt=function(e){return ma(this,e),this},PU=lxt;var hxt=function(){for(var e=this.getAllChildren([this]),t=0,i=e.length;t<i;t++){var s=e[t];s.emit.apply(s,arguments)}return this},MU=hxt;var wU={getSizerConfig:gV,getChildPrevState:xV,pushIntoBounds:yV,drawBounds:DV,resolveWidth:Qh,hasWidthWrap:qh,resolveChildrenWidth:UV,runWidthWrap:_h,resolveHeight:tu,hasHeightWrap:eu,resolveChildrenHeight:zV,runHeightWrap:iu,getChildWidth:WV,getChildHeight:HV,getExpandedChildWidth:YV,getExpandedChildHeight:XV,getChildrenWidth:$V,getChildrenHeight:jV,addChildrenMap:qM,addElement:qM,removeChildrenMap:NV,getElement:GV,getChildIndex:kV,getAllChildrenSizers:ZV,getChildrenSizers:KV,preLayout:On,layout:QV,runLayout:r8,layoutChildren:n8,layoutBackgrounds:H8,postLayout:s8,setAnchor:l8,isInTouching:U8,pointToChild:Z0,setDraggable:Y8,setChildrenInteractive:PU,broadcastEvent:MU};Object.assign(wU,VV,LV,BV,Mr,Dn,Sf,G0,g8,y8,k0,pu,Z8,q8,_8,S8,pa,JV,k8);var bU=wU;var gs=Phaser.Utils.Objects.GetValue,ax=class extends Di{constructor(t,i,s,n,o,r){super(t,i,s,1,1),this.isRexSizer=!0;var a=gs(r,"origin",.5),p=gs(r,"originX",a),h=gs(r,"originY",a);this.setOrigin(p,h),this.setMinSize(n,o),this.setName(gs(r,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var u=gs(r,"anchor",void 0);u&&this.setAnchor(u),this.setInnerPadding(gs(r,"space",0));var f=gs(r,"draggable",!1);f&&this.setDraggable(f),this.setSizerEventsEnable(gs(r,"sizerEvents",!1)),this.setDirty(!0),gs(r,"enableLayer",!1)&&this.enableLayer()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(t)for(var i=this.getAllChildrenSizers([this]),s=0,n=i.length;s<n;s++)i[s].sizerEventsEnable=!1;super.destroy(t),Ji(this.backgroundChildren),Ji(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(t,i){return this.setMinWidth(t).setMinHeight(i),this}setMinWidth(t){return t==null&&(t=0),this.minWidth=t,this}setMinHeight(t){return t==null&&(t=0),this.minHeight=t,this}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSizerEventsEnable(t){return t===void 0&&(t=!0),this.sizerEventsEnable=t,this}enableLayoutWarn(t){return t===void 0&&(t=!0),this.layoutWarnEnable=t,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-mt(this)*this.originX}set left(t){this.x+=t-this.left}alignLeft(t){return this.left=t,this}get right(){return this.left+mt(this)}set right(t){this.x+=t-this.right}alignRight(t){return this.right=t,this}get centerX(){return this.left+mt(this)/2}set centerX(t){this.x+=t-this.centerX}alignCenterX(t){return this.centerX=t,this}get top(){return this.y-gt(this)*this.originY}set top(t){this.y+=t-this.top}alignTop(t){return this.top=t,this}get bottom(){return this.top+gt(this)}set bottom(t){this.y+=t-this.bottom}alignBottom(t){return this.bottom=t,this}get centerY(){return this.top+gt(this)/2}set centerY(t){this.y+=t-this.centerY}alignCenterY(t){return this.centerY=t,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var t=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(t,0)}get minInnerHeight(){var t=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(t,0)}};Object.assign(ax.prototype,bU);var Ir=ax;var uxt=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,s,n,o=!1;for(var r in t)i=t[r],n=this.getChildWidth(i),n===void 0&&(o=!0),!o&&(s=i.rexSizer.padding,n+=(s.left+s.right)*this.scaleX,e=Math.max(n,e));if(!o)return e+(this.space.left+this.space.right)*this.scaleX},RU=uxt;var dxt=function(){if(this.rexSizer.hidden)return 0;var e=0,t=this.sizerChildren,i,s,n,o=!1;for(var r in t)i=t[r],n=this.getChildHeight(i),n===void 0&&(o=!0),!o&&(s=i.rexSizer.padding,n+=(s.top+s.bottom)*this.scaleY,e=Math.max(n,e));if(!o)return e+(this.space.top+this.space.bottom)*this.scaleY},IU=dxt;var fxt=function(e,t){t===void 0&&(t=this.width*this.scaleX);var i,s=e.rexSizer;if(s.expandWidth){var n=t-(this.space.left+this.space.right)*this.scaleX,o=s.padding;i=n-(o.left+o.right)*this.scaleX}return i},AU=fxt;var cxt=function(e,t){t===void 0&&(t=this.height);var i,s=e.rexSizer;if(s.expandHeight){var n=t-(this.space.top+this.space.bottom)*this.scaleY,o=s.padding;i=n-(o.top+o.bottom)*this.scaleY}return i},OU=cxt;var pxt=function(e){e===void 0&&(e=[]);var t=this.sizerChildren,i;for(var s in t)i=t[s],i.isRexSizer&&e.push(i);return e},DU=pxt;var vxt=function(e,t,i,s){if(i===void 0)i=0;else{var n=typeof i;n==="boolean"?(s=i,i=0):n==="string"&&(i=mxt[i])}s===void 0?s={}:s===!0&&(s=gxt);var o=t.width/e.width,r=t.height/e.height,a=i?Math.max(o,r):Math.min(o,r);return s.width=e.width*a,s.height=e.height*a,s},mxt={fit:0,FIT:0,envelop:1,ENVELOP:1},gxt={},gu=vxt;var xxt=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},xu=xxt;var yxt=function(){var e,t,i,s=this.innerLeft,n=this.innerTop,o=this.innerWidth,r=this.innerHeight,a,p,h,u,f,l,d,v,c,m=this.sizerChildren;for(var g in m)e=m[g],!e.rexSizer.hidden&&(t=e.rexSizer,i=t.padding,Fn.call(this,e),d=this.getExpandedChildWidth(e),v=this.getExpandedChildHeight(e),t.aspectRatio>0&&(H1.width=t.aspectRatio,H1.height=1,Y1.width=d,Y1.height=v,c=gu(H1,Y1,"FIT",!0),d=c.width,v=c.height),e.isRexSizer?(e.runLayout(this,d,v),xu(e,this)):ne(e,d,v),a=s+i.left*this.scaleX,h=o-(i.left+i.right)*this.scaleX,p=n+i.top*this.scaleY,u=r-(i.top+i.bottom)*this.scaleY,d===void 0&&(d=mt(e)),v===void 0&&(v=gt(e)),f=(t.alignOffsetX+t.alignOffsetOriginX*d)*this.scaleX,l=(t.alignOffsetY+t.alignOffsetOriginY*v)*this.scaleY,Bn.call(this,e,a,p,h,u,t.align,f,l))},H1={},Y1={},LU=yxt;var FU=Phaser.Utils.Objects.IsPlainObject,nr=Phaser.Utils.Objects.GetValue,BU=Phaser.Display.Align.CENTER,Cxt=Phaser.Utils.String.UUID,Sxt=function(e,t,i,s,n,o,r,a,p,h){var u,f;if(In.call(this,e),FU(t)){var d=t;t=nr(d,"key",void 0),i=nr(d,"align",BU),s=nr(d,"padding",0),n=nr(d,"expand",!0),e.isRexSizer||(o=nr(d,"minWidth",e._minWidth),r=nr(d,"minHeight",e._minHeighted)),a=nr(d,"offsetX",0),p=nr(d,"offsetY",0),u=nr(d,"offsetOriginX",0),f=nr(d,"offsetOriginY",0),h=nr(d,"aspectRatio",0)}var l=t!==void 0;l||(t=Cxt()),typeof i=="string"&&(i=Mn[i]),i===void 0&&(i=BU),s===void 0&&(s=0),n===void 0&&(n=!0),e.isRexSizer||(o===void 0&&(o=e._minWidth),r===void 0&&(r=e._minHeight)),a===void 0&&(a=0),p===void 0&&(p=0),u===void 0&&(u=0),f===void 0&&(f=0),h===void 0?h=0:h===!0&&(h=mt(e)/gt(e)),h>0&&(n=!0,o===void 0&&(o=0),r===void 0&&(r=0));var d=this.getSizerConfig(e);return d.align=i,d.padding=Pr(s),FU(n)?(d.expandWidth=nr(n,"width",!1),d.expandHeight=nr(n,"height",!1)):(d.expandWidth=n,d.expandHeight=n),e.isRexSizer||(d.expandWidth&&(e.minWidth=o===void 0?mt(e):o),d.expandHeight&&(e.minHeight=r===void 0?gt(e):r)),d.alignOffsetX=a,d.alignOffsetY=p,d.alignOffsetOriginX=u,d.alignOffsetOriginY=f,d.aspectRatio=h,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,l&&this.addChildrenMap(t,e),this},NU={add:Sxt};var Txt=Di.prototype.clear,Ext=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t=!e&&this.sizerEventsEnable,i;if(t&&(i=this.getChildren([])),Txt.call(this,e),t)for(var s,n=0,o=i.length;n<o;n++)s=i[n],s.emit("sizer.remove",s,this),this.emit("remove",s,this);return this},ga=Ext;var GU={remove(e,t){var i;if(typeof e=="string"){if(i=e,e=this.sizerChildren[i],!e)return this}else{if(this.getParentSizer(e)!==this)return this;i=this.childToKey(e)}return i&&(delete this.sizerChildren[i],this.childrenMap.hasOwnProperty(i)&&delete this.childrenMap[i]),An.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return ga.call(this,e),this}};var kU={getChildrenWidth:RU,getChildrenHeight:IU,getExpandedChildWidth:AU,getExpandedChildHeight:OU,getChildrenSizers:DU,layoutChildren:LU};Object.assign(kU,NU,GU);var VU=kU;var Pxt=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var i in e)if(e[i]===t)return i;return null},xa=Pxt;var UU=Phaser.Utils.Objects.IsPlainObject,yu=Phaser.Utils.Objects.GetValue,ox=class extends Ir{constructor(t,i,s,n,o,r){UU(i)?(r=i,i=yu(r,"x",0),s=yu(r,"y",0),n=yu(r,"width",void 0),o=yu(r,"height",void 0)):UU(n)&&(r=n,n=yu(r,"width",void 0),o=yu(r,"height",void 0)),super(t,i,s,n,o,r),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t=="string"){var i=t;if(this.sizerChildren.hasOwnPropery(i))return i}else return xa(this.sizerChildren,t);return null}};Object.assign(ox.prototype,VU);var Ge=ox;var Mxt=Phaser.Math.Distance.Between,wxt=function(e,t,i){var s=e.width/2;return Mxt(s,s,t,i)<=s},Cu=wxt;var bxt=Phaser.Math.Angle.Between,Rxt=Phaser.Math.Angle.Normalize,zU=function(e,t,i){if(this.enable&&e.isDown){var s=this.sizerChildren.knob;if(Cu(s,t,i)){var n=s.width/2,o=s.startAngle,r=bxt(n,n,t,i),a=s.anticlockwise?o-r:r-o,p=Rxt(a)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-p)<.1?this.value=p:this.easeValueTo(p)}}},Ixt=function(){var e=this.sizerChildren.knob;e.on("pointerdown",zU,this).on("pointermove",zU,this).setInteractive()},WU=Ixt;var HU=Phaser.Math.Angle.Between,Axt=Phaser.Math.Angle.Wrap,Oxt=function(e,t,i){if(!(!this.enable||this.panPointer)){var s=this.sizerChildren.knob;Cu(s,t,i)&&YU.call(this,e)}},Dxt=function(e,t,i){if(this.enable&&e.isDown){var s=this.sizerChildren.knob;switch(this.panState){case X1:Cu(s,t,i)&&YU.call(this,e);break;case $U:Cu(s,t,i)?Fxt.call(this):XU.call(this);break}}},Lxt=function(e,t,i){!this.enable||this.panPointer!==e||XU.call(this)},YU=function(e){this.panPointer=e,this.panState=$U},XU=function(){this.panPointer=void 0,this.panState=X1},Fxt=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,i=this.sizerChildren.knob,s=HU(i.x,i.y,e.x,e.y),n=HU(i.x,i.y,t.x,t.y),o=i.anticlockwise?s-n:n-s,r=Axt(o)/(Math.PI*2);this.stopEaseValue(),this.value+=r},X1=0,$U=1,Bxt=function(){var e=this.sizerChildren.knob;e.on("pointerdown",Oxt,this).on("pointermove",Dxt,this).on("pointerup",Lxt,this).setInteractive(),this.panPointer=void 0,this.panState=X1},jU=Bxt;var Nxt=function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},ZU=function(e){e===void 0&&(e=this.value);var t;return this.textFormatCallbackScope?t=this.textFormatCallback(e):t=this.textFormatCallback.call(this.textFormatCallbackScope,e),t},Gxt=function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(ZU.call(this,e)),t.layout&&t.layout()),this},KU={setTextFormatCallback:Nxt,getFormatText:ZU,updateText:Gxt};var _r=Phaser.Utils.Objects.GetValue,kxt=Phaser.Math.Snap.To,lx=class extends Ci(Ge){constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexKnob",this.bootProgressBase(i);var s=_r(i,"background",void 0),n=_r(i,"text",void 0);s&&this.addBackground(s),n&&(i.textColor=void 0,i.textStrokeColor=void 0,this.setTextFormatCallback(_r(i,"textFormatCallback",void 0),_r(i,"textFormatCallbackScope",void 0)),i.textFormatCallback=void 0,i.textFormatCallbackScope=void 0);var o=new xo(t,i);o.setDepth(_r(i,"knobDepth",0)),o._value=-1,t.add.existing(o),this.add(o,"knob"),n&&(this.add(n,"text","center",0,!1),t.children.moveBelow(o,n)),this.addChildrenMap("background",s),this.addChildrenMap("knob",o),this.addChildrenMap("text",n),this.setEnable(_r(i,"enable",void 0)),this.setGap(_r(i,"gap",void 0)),this.setValue(_r(i,"value",0),_r(i,"min",void 0),_r(i,"max",void 0));var r=_r(i,"input",0);switch(typeof r=="string"&&(r=Vxt[r]),r){case 0:jU.call(this);break;case 1:WU.call(this);break}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=kxt(t,this.gap));var i=this.value;this.sizerChildren.knob.value=t;var s=this.value;i!==s&&(this.updateText(),this.eventEmitter.emit("valuechange",s,i,this.eventEmitter))}},Vxt={pan:0,drag:0,click:1,none:-1};Object.assign(lx.prototype,KU);var $1=lx;K.register("knob",function(e){var t=new $1(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Knob",$1);var Uxt={arc:rr,circle:Se,curve:mM,ellipse:xM,line:yi,lines:le,rectangle:EM,roundRectangle:aa,triangle:wM},JU=Phaser.Utils.Objects.GetValue,zxt=Phaser.Utils.Objects.IsPlainObject,Wxt=function(){for(var e=this.getShapes(),t=0,i=e.length;t<i;t++)e[t].lineStyle().fillStyle()},QU={createShape(e,t){var i=Uxt[e],s=new i;return t&&s.setName(t),s},buildShapes(e){var t=JU(e,"create",void 0);if(zxt(t)){var i=t;for(var s in i){var n=i[s];switch(typeof n){case"number":for(var o=0;o<n;o++)this.addShape(this.createShape(s));break;case"string":this.addShape(this.createShape(s,n));break;default:for(var r=n,o=0,a=r.length;o<a;o++)this.addShape(this.createShape(s,r[o]));break}}}else if(Array.isArray(t))for(var i=t,o=0,a=i.length;o<a;o++){var p=i[o];this.addShape(this.createShape(p.type,p.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(JU(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=Wxt),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}};var Af=Phaser.Utils.Objects.GetValue,Hxt=Phaser.Utils.Objects.IsPlainObject,hx=class extends xi{constructor(t,i,s,n,o,r){Hxt(i)&&(r=i,i=Af(r,"x",0),s=Af(r,"y",0),n=Af(r,"width",2),o=Af(r,"height",2)),super(t,i,s,n,o),this.type=Af(r,"type","rexCustomShapes"),this.buildShapes(r)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,i,s,n){return typeof s=="boolean"&&(n=s,s=void 0),Zv(this,t,i,s,n)}};Object.assign(hx.prototype,QU);var ux=hx;var qU=ux;var j1=qU;K.register("customShapes",function(e,t,i,s,n){var o=new j1(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.CustomShapes",j1);var Of=Phaser.Utils.Objects.GetValue,Yxt=Phaser.Utils.Objects.IsPlainObject,Z1=class extends Ci(ux){constructor(t,i,s,n,o,r){Yxt(i)&&(r=i,i=Of(r,"x",0),s=Of(r,"y",0),n=Of(r,"width",2),o=Of(r,"height",2)),r===void 0&&(r={}),r.type||(r.type="rexCustomProgress"),super(t,i,s,n,o,r),this.bootProgressBase(r),this.setValue(Of(r,"value",0))}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}},_U=Z1;var ei=_U;var K1=ei;K.register("customProgress",function(e,t,i,s,n){var o=new K1(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.CustomProgress",K1);var Xxt=function(e){return this.easeValueTask||(this.easeValueTask=new We(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning?this:(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty(),this)},$xt=function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},jxt=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},Zxt=function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},t6={start:Xxt,stop:$xt,pause:jxt,resume:Zxt};var tn=Phaser.Utils.Objects.GetValue,dx=class extends xi{constructor(t,i){var s=tn(i,"x",0),n=tn(i,"y",0),o=tn(i,"width",64),r=tn(i,"height",64);super(t,s,n,o,r),this.resetFromConfig(i,!0),this.buildShapes(i),tn(i,"start",!0)&&this.start()}resetFromConfig(t,i){i===void 0&&(i=!1);var s;return s=i?1e3:this.duration,this.setDuration(tn(t,"duration",s)),s=i?"Linear":this.ease,this.setEase(tn(t,"ease",s)),s=i?0:this.delay,this.setDelay(tn(t,"delay",s)),s=i?0:this.repeatDelay,this.setRepeatDelay(tn(t,"repeatDelay",s)),s=i?16777215:this.color,this.setColor(tn(t,"color",s)),s=i?0:this.value,this.setValue(tn(t,"value",s)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return this.tweenTask?this.tweenTask.isRunning:!1}};Object.assign(dx.prototype,t6);var e6=dx;var ve=Th;var ya=Phaser.Math.DegToRad,Kxt=Phaser.Math.Linear,Jxt=Phaser.Math.Easing.Expo.In,Qxt={right:0,down:1,left:2,up:3},qxt=function(e,t,i,s,n,o,r,a,p,h,u){var f=Su(t,0,s,n,o,r,a,p,h,u);e.startAt(f.x,f.y);var l=Su(i,0,s,n,o,r,a,p,h,u);e.lineTo(l.x,l.y);var d=Su(i,i,s,n,o,r,a,p,h,u);e.lineTo(d.x,d.y);var v=Su(0,i,s,n,o,r,a,p,h,u);e.lineTo(v.x,v.y);var c=Su(0,t,s,n,o,r,a,p,h,u);e.lineTo(c.x,c.y);var m=Su(t,t,s,n,o,r,a,p,h,u);e.lineTo(m.x,m.y),e.close()},J1={},Su=function(e,t,i,s,n,o,r,a,p,h){var u=e*i,f=t*s;return J1.x=r*u+a*f+n,J1.y=p*u+h*f+o,J1},Df={setDirection(e){return typeof e=="string"&&(e=Qxt[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new le)},updateShapes(){var e,t,i,s,n,o;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var r=ya(315);i=Math.cos(r),s=Math.sin(r);var a=ya(45);n=Math.cos(a),o=Math.sin(a);break;case 3:e=this.centerX,t=this.centerY+this.radius;var r=ya(135);i=Math.cos(r),s=Math.sin(r);var a=ya(225);n=Math.cos(a),o=Math.sin(a);break;case 2:e=this.centerX+this.radius,t=this.centerY;var r=ya(225);i=Math.cos(r),s=Math.sin(r);var a=ya(315);n=Math.cos(a),o=Math.sin(a);break;default:e=this.centerX-this.radius,t=this.centerY;var r=ya(45);i=Math.cos(r),s=Math.sin(r);var a=ya(135);n=Math.cos(a),o=Math.sin(a);break}for(var p=this.radius/7,h=this.getShapes(),u=0,f=h.length;u<f;u++){var l=h[u],d=(this.value+(f-u)*.1)%1;d=Jxt(ve(d));var v=Kxt(.25,1,d);l.fillStyle(this.color,v);var c=u*3+1,m=c+2;qxt(l,c,m,p,p,e,t,i,s,n,o)}}};var _xt=Phaser.Math.Linear,i6={buildShapes(){for(var e=0;e<4;e++)this.addShape(new yi);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=t+i,o=i*2,r=this.getShapes(),a=r.length,p=i*2/a,h=p*.7;if(this.prevValue===void 0||this.prevValue>this.value)for(var u=0;u<a;u++){var f=r[u],l=this.prevValue===void 0?Math.random():f.getData("to");f.setData("from",l).setData("to",Math.random())}this.prevValue=this.value;for(var u=0;u<a;u++){var f=r[u],l=f.getData("from"),d=f.getData("to"),v=_xt(l,d,this.value),c=v*o,m=s+p*(u+.5);f.lineStyle(h,this.color,1).setP0(m,n).setP1(m,n-c)}}};var tyt=Phaser.Math.Linear,r6={buildShapes(){for(var e=0;e<3;e++)this.addShape(new Se)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=i*.1,n=Math.ceil(s*.25),o=1-ve(this.value),r=tyt(.3,.9,o)*i,a=this.getShapes(),p=0,h=a.length;p<h;p++){var u=a[p],o=(this.value+p/h)%1,f=Math.PI*2*o;u.lineStyle(n,this.color).setRadius(s).setCenterPosition(e+Math.cos(f)*r,t+Math.sin(f)*r)}}};var eyt=Phaser.Math.Linear,iyt=Phaser.Math.Easing.Expo.In,n6={buildShapes(){for(var e=5,t=0;t<e;t++){var i=new yi;this.addShape(i);var s=ve(t/(e-1))/2;i.setData("offset",s)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=i*2,o=this.getShapes(),r=o.length,a=i*2/r,p=a*.7,h=0;h<r;h++){var u=o[h],f=(this.value+u.getData("offset"))%1;f=iyt(ve(f));var l=eyt(.4,1,f)*n,d=s+a*(h+.5);u.lineStyle(p,this.color,1).setP0(d,t-l/2).setP1(d,t+l/2)}}};var s6={buildShapes(){this.addShape(new le().setName("border")),this.addShape(new le().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=i*.7,n=e-s,o=t-s,r=s*2;if(this.getShape("border").lineStyle(2,this.color,1).startAt(n,o).lineTo(r,0,!0).lineTo(0,r,!0).lineTo(-r,0,!0).lineTo(0,-r,!0).close(),this.value<.5){var a=(.5-this.value)*2,p=r*a;this.getShape("fill").fillStyle(this.color,1).startAt(n,o).lineTo(r,0,!0).lineTo(0,p,!0).lineTo(-r,0,!0).lineTo(0,-p,!0).close()}else{var a=(this.value-.5)*2,h=180*a;this.getShape("border").rotateAround(e,t,h),this.getShape("fill").fillStyle().lineStyle()}}};var a6=Phaser.Math.RadToDeg,o6=Phaser.Math.Angle.WrapDegrees,ryt=Phaser.Math.Angle.Wrap,nyt=Phaser.Math.Angle.ShortestBetween,syt=Phaser.Math.DegToRad,l6=Phaser.Math.DegToRad(270),h6={buildShapes(){this.addShape(new Se().setName("border")),this.addShape(new yi().setName("minuteHand")),this.addShape(new yi().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s/2,o=i*.8,r=i*.5,a=this.minuteHandAngle;this.minuteHandAngle=Math.PI*2*this.value;var p=o6(a6(a)),h=o6(a6(this.minuteHandAngle)),u=nyt(p,h);this.hourHandAngle=ryt(this.hourHandAngle+syt(u)/12),this.getShape("border").lineStyle(s,this.color).setRadius(n).setCenterPosition(e,t);var f=this.minuteHandAngle+l6;this.getShape("minuteHand").lineStyle(s,this.color).setP0(e,t).setP1(e+Math.cos(f)*o,t+Math.sin(f)*o);var f=this.hourHandAngle+l6;this.getShape("hourHand").lineStyle(s,this.color).setP0(e,t).setP1(e+Math.cos(f)*r,t+Math.sin(f)*r)}};var u6=Phaser.Math.Linear,ayt=Phaser.Math.Easing.Expo.In,Q1=2,q1=2,d6={buildShapes(){for(var e=Q1*q1,t=0;t<e;t++){var i=new yi;this.addShape(i)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=t-i,o=i*2/q1,r=i*2/Q1,a=this.getShapes(),p=a.length,h=0;h<p;h++){var u=h%q1,f=Math.floor(h/Q1),l=s+o*(u+.5),d=n+r*(f+.5),v=a[h],c=(this.value+(p-h)*.1)%1;c=ayt(ve(c));var m=(p-h)/p,g=u6(.7,1,c)*r,y=u6(.7,1,c)*o;v.lineStyle(y,this.color,m).setP0(l-g/2,d).setP1(l+g/2,d)}}};var f6=Phaser.Math.Linear,c6={buildShapes(){for(var e=3,t=0;t<e;t++){var i=new Se;this.addShape(i);var s=ve(t/(e-1))/2;i.setData("offset",s)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=this.getShapes(),o=n.length,r=i*2/o,a=r/2,p=0;p<o;p++){var h=n[p],u=(this.value+h.getData("offset"))%1;u=ve(u);var f=f6(.25,1,u),l=f6(.5,1,u)*a;h.fillStyle(this.color,f).setRadius(l).setCenterPosition(s+r*(p+.5),t)}}};var p6=Phaser.Math.Linear,oyt=Phaser.Math.Easing.Expo.In,v6={buildShapes(){for(var e=0;e<3;e++){var t=new yi;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=e-i,n=this.getShapes(),o=n.length,r=i*2/o,a=i*2,p=0;p<o;p++){var h=n[p],u=(this.value+(o-p)*.1)%1;u=oyt(ve(u));var f=(p+1)/o,l=p6(.7,1,u)*a,d=p6(.7,1,u)*r,v=s+r*(p+.5);h.lineStyle(d,this.color,f).setP0(v,t-l/2).setP1(v,t+l/2)}}};var lyt=Phaser.Math.Linear,_1=3,tw=3,m6={buildShapes(){for(var e=_1*tw,t=0;t<e;t++){var i=new Se;this.addShape(i),i.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=this.isInitialize||this.isSizeChanged,n=e-i,o=t-i,r=i*2/tw,a=i*2/_1,p=Math.min(r,a)/2*.8,h=this.getShapes(),u=0,f=h.length;u<f;u++){var l=u%tw,d=Math.floor(u/_1),v=n+r*(l+.5),c=o+a*(d+.5),m=h[u],g=(this.value+m.getData("offset"))%1;g=ve(g),m.fillStyle(this.color,lyt(.25,1,g)),s&&m.setRadius(p).setCenterPosition(v,c)}this.isInitialize=!1}};var g6={buildShapes(){for(var e=0;e<2;e++)this.addShape(new le)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s,o=n*.6,r=n*.7,a=n*1.2,p=this.getShapes(),h=0,u=p.length;h<u;h++){var f=p[h],l=(this.value+h/u)%1,d=ve(l),v=e,c=t-15*l,m=n*l,g=o*l,y=r*l,x=a*l;f.lineStyle(s,this.color,d).startAt(v,c).cubicBezierTo(v,c-g,v-m,c-g,v-m,c).cubicBezierTo(v-m,c+g,v,c+y,v,c+x).cubicBezierTo(v,c+y,v+m,c+g,v+m,c).cubicBezierTo(v+m,c-g,v,c-g,v,c).close()}}};var hyt=Phaser.Math.Linear,x6={buildShapes(){for(var e=0;e<12;e++)this.addShape(new yi);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.isInitialize||this.isSizeChanged,s=this.radius,n=s/2,o=Math.ceil(s/20),r=this.getShapes(),a=0,p=r.length;a<p;a++){var h=r[a],u=a/p,f=Math.PI*2*u,l=hyt(.25,1,(1-this.value+u)%1);h.lineStyle(o,this.color,l),i&&h.setP0(e+Math.cos(f)*n,t+Math.sin(f)*n).setP1(e+Math.cos(f)*s,t+Math.sin(f)*s)}this.isInitialize=!1}};var y6={buildShapes(){this.addShape(new Se().setName("track")),this.addShape(new Se().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=i*.9,n=Math.ceil(s/25),o=i*.1,r=Math.PI*2*this.value;this.getShape("track").lineStyle(n,this.color,.7).setRadius(s).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(o).setCenterPosition(e+Math.cos(r)*s,t+Math.sin(r)*s)}};var C6={buildShapes(){this.addShape(new Se().setName("track")),this.addShape(new rr().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s/2;this.getShape("track").lineStyle(s,this.color,.5).setRadius(n).setCenterPosition(e,t);var o=this.value*360,r=o+60;this.getShape("arc").lineStyle(s,this.color,1).setRadius(n).setCenterPosition(e,t).setAngle(o,r)}};var uyt=Phaser.Math.Linear,S6={buildShapes(){for(var e=0;e<4;e++){var t=new rr().setPie();this.addShape(t),t.setData("speed",uyt(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s;this.prevValue!==void 0&&(s=this.value-this.prevValue,this.prevValue>this.value&&(s+=1));for(var n=this.getShapes(),o=0,r=n.length;o<r;o++){var a=n[o],p=(o+1)/r;if(this.prevValue===void 0){var h=o/r*360,u=h+90;a.fillStyle(this.color,p).setRadius(i).setCenterPosition(e,t).setAngle(h,u).setData("angle",h)}else{var h=a.getData("angle")+a.getData("speed")*s;h=h%360;var u=h+90;a.fillStyle(this.color,p).setRadius(i).setCenterPosition(e,t).setAngle(h,u).setData("angle",h)}}this.prevValue=this.value}};var T6={buildShapes(){this.addShape(new Se)},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=i*this.value,n=Math.ceil(i/25),o=ve(this.value);this.getShapes()[0].lineStyle(n,this.color,o).setRadius(s).setCenterPosition(e,t)}};var dyt=Phaser.Math.Linear,fyt=Phaser.Math.Easing.Expo.In,E6={buildShapes(){this.addShape(new Se().setName("center")),this.addShape(new le().setName("arc0")),this.addShape(new le().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=this.isInitialize||this.isSizeChanged,n=i*2/6,o=e-i+n,r=t+i-n,a=this.getShapes(),p=0,h=a.length;p<h;p++){var u=a[p],f=(this.value+(h-p)*.1)%1;f=fyt(ve(f));var l=dyt(.25,1,f);switch(u.name){case"center":u.fillStyle(this.color,l),s&&u.setRadius(n).setCenterPosition(o,r);break;case"arc0":if(u.fillStyle(this.color,l),s){var d=n*2,v=n*3;u.startAt(o,r-d).lineTo(o,r-v).setIterations(8).arc(o,r,v,270,360).lineTo(o+d,r).setIterations(6).arc(o,r,d,360,270,!0).close()}break;case"arc1":if(u.fillStyle(this.color,l),s){var d=n*4,v=n*5;u.startAt(o,r-d).lineTo(o,r-v).setIterations(8).arc(o,r,v,270,360).lineTo(o+d,r).setIterations(6).arc(o,r,d,360,270,!0).close()}break}}this.isInitialize=!1}};var P6={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Se)},updateShapes(){for(var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/25),n=i-s,o=this.getShapes(),r=0,a=o.length;r<a;r++){var p=o[r],h=(this.value+r/a)%1,u=ve(h);p.lineStyle(s,this.color,u).setRadius(h*n).setCenterPosition(e,t)}}};var M6={buildShapes(){this.addShape(new rr().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,i=this.radius,s=Math.ceil(i/10),n=i-s,o=this.value*720,r=ve(this.value)*180,a=o-r;this.getShape("arc").lineStyle(s,this.color,1).setRadius(n).setCenterPosition(e,t).setAngle(a+315,o+315)}};var _Te=Phaser.Utils.Objects.GetValue,ew={leftArrow:Df,rightArrow:Df,upArrow:Df,downArrow:Df,audio:i6,ball:r6,bars:n6,box:s6,clock:h6,cube:d6,dots:c6,facebook:v6,grid:m6,hearts:g6,ios:x6,oribit:y6,oval:C6,pie:S6,puff:T6,radio:E6,rings:P6,spinner:M6},iw=[];for(w6 in ew)iw.push(w6);var w6,b6=Phaser.Utils.Array.GetRandom,R6={setAnimationMode(e,t){ew.hasOwnProperty(e)||(e=b6(iw)),this.animationMode=e;var i=ew[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":i.setDirection.call(this,"left");break;case"rightArrow":i.setDirection.call(this,"right");break;case"upArrow":i.setDirection.call(this,"up");break;case"downArrow":i.setDirection.call(this,"down");break}return this.clear(),i.buildShapes.call(this),this.updateShapes=i.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=b6(iw);return this.setAnimationMode(t,e),this}};var cyt=Phaser.Utils.Objects.GetValue,fx=class extends e6{constructor(t,i){super(t,i),this.type="rexSpinnerAIO",this.setAnimationMode(cyt(i,"animationMode"))}};Object.assign(fx.prototype,R6);var I6=fx;var rw=I6;K.register("aioSpinner",function(e){var t=new rw(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.AIOSpinner",rw);var A6={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}};var pyt=function(){for(var e=this.scaleMode-1,t=0,i=this.images.length;t<i;t++){var s=this.images[t],n=gu(s,this,e,!0),o=n.width/s.width;this.setChildLocalScale(s,o),s.biasScale=o}},cx=pyt;var vyt=function(e){this.scaleMode===0?this.resize(e.width,e.height):cx.call(this)},Tu=vyt;var O6=Phaser.Utils.Objects.IsPlainObject,nw=Phaser.Utils.Objects.GetValue,myt=Phaser.Utils.Array.GetRandom,gyt={out:0,in:1},Gn=function(e,t,...i){for(var s=0,n=i.length;s<n;s++){var o=i[s];if(o&&o.hasOwnProperty(e))return o[e]}return t},D6={setTransitionDirection(e){return typeof e=="string"&&(e=gyt[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),Tu.call(this,this.nextImage),this},transit(e,t,i){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),i!==void 0&&(e={key:e,frame:t,mode:i}),this.currentTransitionMode=void 0,O6(e)){var s=e;e=nw(s,"key",void 0),t=nw(s,"frame",void 0),i=nw(s,"mode"),Array.isArray(i)&&(i=myt(i));var n;this.transitionModes&&this.transitionModes.hasOwnProperty(i)&&(n=this.transitionModes[i],this.currentTransitionMode=i),this.setDuration(Gn("duration",this.duration,s,n)).setEaseFunction(Gn("ease",this.easeFunction,s,n)).setTransitionDirection(Gn("dir",this.dir,s,n));var o=Gn("mask",void 0,s,n);o&&this.setMaskGameObject(o),this.setMaskEnable(o===!0);var r=Gn("onStart",void 0,s,n),a=Gn("onProgress",void 0,s,n),p=Gn("onComplete",void 0,s,n);(r!==void 0||a!==void 0||p!==void 0)&&this.setTransitionStartCallback(r,Gn("onStartScope",void 0,s,n)).setTransitionProgressCallback(a,Gn("onProgressScope",void 0,s,n)).setTransitionCompleteCallback(p,Gn("onCompleteScope",void 0,s,n))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),O6(e)&&(t=e,e=t.name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new We(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}};var xyt=Phaser.GameObjects.Graphics.prototype.setPosition,yyt=function(e,t){var i=this.parent;return e===void 0&&(e=i.x),t===void 0&&(t=i.y),xyt.call(this,e,t),this},L6=yyt;var F6=Phaser.Geom.Rectangle,B6=Phaser.Geom.Circle,Cyt=function(e,t,i,s,n,o,r){switch(e){case 1:s=s.left;var a=-t*(n-.5),p=-i*(o-.5),h=Math.min(t,i)/2+s;(r===void 0||!(r instanceof B6))&&(r=new B6),r.setTo(a,p,h);break;default:var u=-(t*n)-s.left,f=-(i*o)-s.top,l=t+s.left+s.right,d=i+s.top+s.bottom;(r===void 0||!(r instanceof F6))&&(r=new F6),r.setTo(u,f,l,d);break}return r},N6=Cyt;var Syt=function(e,t,i,s,n){switch(this.geom=N6(this.shapeType,e,t,i,s,n,this.geom),this.clear().fillStyle(16777215),this.shapeType){case 1:this.fillCircleShape(this.geom);break;default:this.fillRectShape(this.geom);break}},px=Syt;var Tyt=function(e,t,i){var s=this.parent;e===void 0&&(e=s.width),t===void 0&&(t=s.height),i===void 0?i=this.padding:typeof i=="number"&&(i=GetBoundsConfig(i));var n=this.width!==e||this.height!==t,o=this.padding!==i&&!Sn(this.padding,i);return!n&&!o?this:(this.width=e,this.height=t,o&&ze(i,this.padding),this.originX=s.originX,this.originY=s.originY,px.call(this,e,t,i,s.originX,s.originY),this)},G6=Tyt;var Eyt=function(e,t){t===void 0&&(t=e);var i=this.parent;return e===void 0&&(e=i.originX),t===void 0&&(t=i.originY),this.originX===e&&this.originY===t?this:(this.originX=e,this.originY=t,px.call(this,this.width,this.height,this.padding,e,t),this)},k6=Eyt;var Pyt=function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)},V6=Pyt;var Myt={setPosition:L6,resize:G6,setOrigin:k6,contains:V6},U6=Myt;var wyt=Phaser.GameObjects.Graphics,vx=class extends wyt{constructor(t,i,s){i===void 0&&(i=0),typeof i=="string"&&(i=byt[i]),super(t.scene),this.parent=t,this.shapeType=i,this.padding=I0(s),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}},byt={rectangle:0,circle:1};Object.assign(vx.prototype,U6);var Lf=vx;var z6={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof Lf)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new Lf(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,i){return t===void 0&&(t=!0),i===void 0&&(i=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(i)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var i=this.getCellImages(),s=0,n=i.length;s<n;s++)this.setImageMaskEnable(i[s],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}};var Ryt=function(e,t){typeof e=="object"&&(e=e.name),t===void 0&&(t=",");var i;return e==="__BASE"?i=function(s,n){return`${s}${t}${n}`}:i=function(s,n){return`${e}_${s}${t}${n}`},i},W6=Ryt;var Iyt=function(e,t,i,s,n,o){i==null&&(i="__BASE"),o||(o=W6(i,o));for(var r=e.sys.textures.get(t),a=typeof i=="object"?i:r.get(i),p=a.width,h=a.height,u,f,l,d=p/s,v=h/n,c=a.cutX,m=a.cutY,g=0,y=0,x=0;x<n;x++){g=0;for(var C=0;C<s;C++)l=o(C,x),u=g+c,f=y+m,r.add(l,0,u,f,d,v),g+=d;y+=v}return{getFrameNameCallback:o,cellWidth:d,cellHeight:v,columns:s,rows:n}},H6=Iyt;var xs=Phaser.Utils.Objects.GetValue,Ayt=Phaser.GameObjects.Image,Oyt=Phaser.Utils.Objects.IsPlainObject,Dyt=Phaser.Math.RotateAround,Lyt=function(e,t,i,s){Oyt(t)&&(s=t,t=xs(s,"columns",1),i=xs(s,"rows",1));var n=xs(s,"createImageCallback");if(!n){var o=xs(s,"ImageClass",Ayt);n=function(F,G,U){return new o(F,0,0,G,U)}}for(var r=xs(s,"originX",.5),a=xs(s,"originY",.5),p=xs(s,"add",!0),h=xs(s,"align",p),u=xs(s,"objectPool",void 0),f=e.scene,l=e.texture,d=e.frame,v=H6(f,l,d,t,i),c=v.getFrameNameCallback,m=e.scaleX,g=e.scaleY,y=e.rotation,x=e.getTopLeft(),C=x.x,S=x.y,E=[],T=v.cellWidth*m,P=v.cellHeight*g,M=0;M<i;M++)for(var w=0;w<t;w++){var b,I=c(w,M);if(u&&u.length>0?b=u.pop().setTexture(l,I):b=n(f,l,I),p&&f.add.existing(b),h){var R=C+T*w,A=S+P*M,L=R+r*T,O=A+a*P;b.setOrigin(r,a).setPosition(L,O).setScale(m,g).setRotation(y),Dyt(b,C,S,y)}E.push(b)}return E},Y6=Lyt;var X6={gridCutImage(e,t,i,s){s===void 0&&(s={}),s.objectPool=this.imagesPool;for(var n=Y6(e,t,i,s),o,r=0,a=n.length;r<a;r++)o=n[r],o.setVisible(!0),this.add(o);return this.cellImages=n,this.setChildLocalVisible(e,!1),n},gridCutCurrentImage(e,t,i){return this.gridCutImage(this.currentImage,e,t,i)},gridCutNextImage(e,t,i){return this.gridCutImage(this.nextImage,e,t,i)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e=this.cellImages[0].texture,t=this.cellImages,i,s,n=0,o=t.length;n<o;n++)i=t[n],this.setChildLocalAlpha(i,1).setChildLocalScale(i,1).setChildLocalVisible(i,!1),i.clearMask(),s=i.frame.name,i.setTexture(),e.remove(s);return this.imagesPool.push(...t),t.length=0,this}};var mx={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var $6={};Object.assign($6,A6,D6,z6,X6,mx);var j6=$6;var Z6=function(e,t,i,s){},K6=function(e,t,i,s){e.setChildLocalAlpha(t,1-s).setChildLocalAlpha(i,s)},J6=function(e,t,i,s){e.setChildLocalAlpha(t,1)};var Q6=Phaser.Utils.Objects.IsPlainObject,Je=Phaser.Utils.Objects.GetValue,Fyt=Phaser.Math.Clamp,gx=class extends Pn{constructor(t,i,s,n,o,r){Q6(i)?(r=i,i=Je(r,"x",0),s=Je(r,"y",0),n=Je(r,"key",void 0),o=Je(r,"frame",void 0)):Q6(o)&&(r=o,o=void 0);var a=Je(r,"back",void 0),p=Je(r,"front",void 0);a||(a=t.add.image(i,s,n,o)),p||(p=t.add.image(i,s,n,o));var h=Je(r,"width",void 0),u=Je(r,"height",void 0),f=h!==void 0&&u!==void 0?1:0;h===void 0&&(h=p.width),u===void 0&&(u=p.height),super(t,i,s,h,u),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,f=Je(r,"scaleMode",f),typeof f=="string"&&(f=Byt[f]),this.scaleMode=f,a.setVisible(!1),this.addMultiple([a,p]),this.backImage=a,this.frontImage=p,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var l=Je(r,"onStart",void 0),d=Je(r,"onProgress",void 0),v=Je(r,"onComplete",void 0),c=Je(r,"dir",0);l===void 0&&d===void 0&&v===void 0&&(l=Z6,d=K6,v=J6,c=0),this.setTransitionStartCallback(l,Je(r,"onStartScope",void 0)).setTransitionProgressCallback(d,Je(r,"onProgressScope",void 0)).setTransitionCompleteCallback(v,Je(r,"onCompleteScope",void 0)).setTransitionDirection(c).setDuration(Je(r,"duration",1e3)).setEaseFunction(Je(r,"ease","Linear"));var m=Je(r,"mask",void 0);m&&this.setMaskGameObject(m),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,Tu.call(this,this.frontImage)}destroy(t){!this.scene||this.ignoreDestroy||(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(t),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(t){this._tint!==t&&(this._tint=t,this.backImage.setTint(t),this.frontImage.setTint(t))}setTint(t){return this.tint=t,this}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.backImage.setFlipX(t),this.frontImage.setFlipX(t))}setFlipX(t){return this.flipX=t,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.backImage.setFlipY(t),this.frontImage.setFlipY(t))}setFlipY(t){return this.flipY=t,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(t,i){return this.flipX=t,this.flipY=i,this}get t(){return this._t}set t(t){if(t=Fyt(t,0,1),this._t!==t){this._t=t;var i=this.currentImage,s=this.nextImage;if(t===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),sw.call(this,this.onStartCallback,this.onStartCallbackScope,this,i,s,t)),sw.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,i,s,t),t===1){sw.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,i,s,t);var n=s.texture.key,o=s.frame.name;this.frontImage.setTexture(n,o),this.backImage.setTexture(n,o),Tu.call(this,s),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}t===1&&!this.ignoreCompleteEvent&&this.emit("complete")}}setT(t){return this.t=t,this}get isRunning(){return this.easeValueTask?this.easeValueTask.isRunning:!1}setOrigin(t,i){return super.setOrigin(t,i),this.backImage.setOrigin(t,i),this.frontImage.setOrigin(t,i),this.maskGameObject&&this.maskGameObject.setOrigin(t,i),this}setTexture(t,i){return this.frontImage.setTexture(t,i),this.backImage.setTexture(t,i).setVisible(!1),Tu.call(this,this.frontImage),this}setSize(t,i){return super.setSize(t,i),this.scaleMode&&cx.call(this),this}},sw=function(e,t,i,s,n,o){if(e){if(this.scaleMode){var r;s.biasScale>0&&(r=this.getChildLocalScaleX(s),r=r/s.biasScale,this.setChildLocalScale(s,r)),n.biasScale&&(r=this.getChildLocalScaleX(n),r=r/n.biasScale,this.setChildLocalScale(n,r))}if(t?e.call(t,i,s,n,o):e(i,s,n,o),this.scaleMode){var r;s.biasScale>0&&(r=this.getChildLocalScaleX(s),r=r*s.biasScale,this.setChildLocalScale(s,r)),n.biasScale&&(r=this.getChildLocalScaleX(n),r=r*n.biasScale,this.setChildLocalScale(n,r))}}};Object.assign(gx.prototype,j6);var Byt={fit:1,FIT:1,envelop:2,ENVELOP:2},q6=gx;var xx=q6;var aw=xx;K.register("transitionImage",function(e,t,i,s,n){var o=new aw(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.TransitionImage",aw);var _6="slideLeft",tz="slideRight",ez="slideUp",iz="slideDown",rz="slideAwayLeft",nz="slideAwayRight",sz="slideAwayUp",az="slideAwayDown",oz="pushLeft",lz="pushRight",hz="pushUp",uz="pushDown",dz="zoomOut",fz="zoomIn",cz="zoomInOut",pz="fade",vz="crossFade",mz="wipeLeft",gz="wipeRight",xz="wipeUp",yz="wipeDown",Cz="irisOut",Sz="irisIn",Tz="irisInOut",Ez="pieOut",Pz="pieIn",Mz="pieInOut",wz="blinds",bz="squares",Rz="diamonds",Iz="circles",Az="curtain",Oz="pixellate",Dz="dissolve",Lz="revealLeft",Fz="revealRight",Bz="revealUp",Nz="revealDown";var Nyt=function(e){e.addTransitionMode(nz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.width*n;t.setChildLocalPosition(i,o,0)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(rz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.width*-n;t.setChildLocalPosition(i,o,0)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(az,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.height*n;t.setChildLocalPosition(i,0,o)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0)}}).addTransitionMode(sz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.height*-n;t.setChildLocalPosition(i,0,o)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0)}})},Gz=Nyt;var Gyt=function(e){e.addTransitionMode(tz,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=s.width*(n-1);t.setChildLocalPosition(s,o,0)},onComplete:function(t,i,s,n){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(_6,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=s.width*(1-n);t.setChildLocalPosition(s,o,0)},onComplete:function(t,i,s,n){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(iz,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=s.height*(n-1);t.setChildLocalPosition(s,0,o)},onComplete:function(t,i,s,n){t.setChildLocalPosition(s,0,0)}}).addTransitionMode(ez,{ease:"Linear",dir:"in",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=s.height*(1-n);t.setChildLocalPosition(s,0,o)},onComplete:function(t,i,s,n){t.setChildLocalPosition(s,0,0)}})},kz=Gyt;var kyt=function(e){e.addTransitionMode(lz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.width*n;t.setChildLocalPosition(i,o,0);var o=s.width*(n-1);t.setChildLocalPosition(s,o,0)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(s,0,0)}}).addTransitionMode(oz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.width*-n;t.setChildLocalPosition(i,o,0);var o=s.width*(1-n);t.setChildLocalPosition(s,o,0)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(s,0,0)}}).addTransitionMode(uz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.height*n;t.setChildLocalPosition(i,0,o);var o=s.height*(n-1);t.setChildLocalPosition(s,0,o)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(s,0,0)}}).addTransitionMode(hz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=i.height*-n;t.setChildLocalPosition(i,0,o);var o=s.height*(1-n);t.setChildLocalPosition(s,0,o)},onComplete:function(t,i,s,n){t.setChildLocalPosition(i,0,0),t.setChildLocalPosition(s,0,0)}})},Vz=kyt;var ii=Th;var Vyt=function(e){e.addTransitionMode(dz,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=1-n;t.setChildLocalScale(i,o,o)},onComplete:function(t,i,s,n){t.setChildLocalScale(i,1,1)}}).addTransitionMode(fz,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){var o=n;t.setChildLocalScale(s,o,o)},onComplete:function(t,i,s,n){t.setChildLocalScale(s,1,1)}}).addTransitionMode(cz,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,s,n){s.tint=0},onProgress:function(t,i,s,n){var o;n<.5?(o=1-ii(n),t.setChildLocalScale(i,o,o)):(i.visible&&t.setChildVisible(i,!1),o=1-ii(n),t.setChildLocalScale(s,o,o))},onComplete:function(t,i,s,n){t.setChildLocalScale(i,1,1),t.setChildVisible(i,!0),i.tint=16777215,t.setChildLocalScale(s,1,1),t.setChildVisible(s,!0),s.tint=16777215}})},Uz=Vyt;var Uyt=function(e){e.addTransitionMode(pz,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,s,n){s.tint=0},onProgress:function(t,i,s,n){var o;n<.5?(n=ii(n),o=Math.floor(255*(1-n)),i.tint=(o<<16)+(o<<8)+o):(i.visible&&t.setChildVisible(i,!1),n=ii(n),o=Math.floor(255*(1-n)),s.tint=(o<<16)+(o<<8)+o)},onComplete:function(t,i,s,n){t.setChildVisible(i,!0),i.tint=16777215,t.setChildVisible(s,!0),s.tint=16777215}}).addTransitionMode(vz,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,s,n){},onProgress:function(t,i,s,n){t.setChildLocalAlpha(i,1-n),t.setChildLocalAlpha(s,n)},onComplete:function(t,i,s,n){t.setChildLocalAlpha(i,1)}})},zz=Uyt;var zyt=function(e){var t=new ei(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){var i=this.getShape("rect").fillStyle(16777215),s=1-this.value;switch(this.wipeMode){case"right":i.setSize(this.width*s,this.height).setTopLeftPosition(this.width-i.width,0);break;case"left":i.setSize(this.width*s,this.height).setTopLeftPosition(0,0);break;case"down":i.setSize(this.width,this.height*s).setTopLeftPosition(0,this.height-i.height);break;case"up":i.setSize(this.width,this.height*s).setTopLeftPosition(0,0);break}}});return t},Wyt=function(e){var t=zyt(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(gz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="right"},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(mz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="left"},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(yz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="down"},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(xz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0),i.maskGameObject.wipeMode="up"},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}})},Wz=Wyt;var Hyt=function(e){var t=new ei(e,{type:"Graphics",create:[{name:"rect",type:"rectangle"}],update:function(){this.getShape("rect").fillStyle(16777215).setSize(this.width*this.value,this.height*this.value).setCenterPosition(this.centerX,this.centerY)}});return t},Yyt=function(e){var t=Hyt(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(Cz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(Sz,{ease:"Linear",dir:"in",mask:t,onStart:function(i,s,n,o){i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(1-o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(Tz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){n.tint=0,i.setCurrentImageMaskEnable(!0),i.setNextImageMaskEnable(!0)},onProgress:function(i,s,n,o){var r;o<.5?(o=ii(o),r=Math.floor(255*(1-o)),i.maskGameObject.setValue(1-o),s.tint=(r<<16)+(r<<8)+r):(s.visible&&i.setChildVisible(s,!1),o=ii(o),r=Math.floor(255*(1-o)),i.maskGameObject.setValue(1-o),n.tint=(r<<16)+(r<<8)+r)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1),i.setChildVisible(s,!0),s.tint=16777215,i.setChildVisible(n,!0),n.tint=16777215}})},Hz=Yyt;var Xyt=function(e){var t=new ei(e,{type:"Graphics",create:[{name:"pie",type:"arc"}],update:function(){var i=Math.max(this.width,this.height)*2,s=90*this.value;this.getShape("pie").fillStyle(16777215).setCenterPosition(this.centerX,0).setRadius(i).setAngle(90-s,90+s).setPie()}});return t},$yt=function(e){var t=Xyt(e.scene);e.once("destroy",function(){t.destroy()}).addTransitionMode(Ez,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(Pz,{ease:"Linear",dir:"in",mask:t,onStart:function(i,s,n,o){i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(1-o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}}).addTransitionMode(Mz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){n.tint=0,i.setCurrentImageMaskEnable(!0),i.setNextImageMaskEnable(!0)},onProgress:function(i,s,n,o){var r;o<.5?(o=ii(o),r=Math.floor(255*(1-o)),i.maskGameObject.setValue(1-o),s.tint=(r<<16)+(r<<8)+r):(s.visible&&i.setChildVisible(s,!1),o=ii(o),r=Math.floor(255*(1-o)),i.maskGameObject.setValue(1-o),n.tint=(r<<16)+(r<<8)+r)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1),i.setChildVisible(s,!0),s.tint=16777215,i.setChildVisible(n,!0),n.tint=16777215}})},Yz=$yt;var jyt=function(e,t){var i=new ei(e,{type:"Graphics",create:{rectangle:t},update:function(){for(var s=this.getShapes(),n=this.width/t,o=0;o<t;o++)s[o].fillStyle(16777215).setSize(n*this.value,this.height).setTopLeftPosition(n*o,0)}});return i},Zyt=function(e){var t=jyt(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(wz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}})},Xz=Zyt;var Kyt=function(e,t,i){var s=new ei(e,{type:"Graphics",create:{rectangle:t*i},update:function(){for(var n=this.getShapes(),o=this.width/t,r=this.height/i,a=0;a<i;a++)for(var p=0;p<t;p++)n[p*i+a].fillStyle(16777215).setSize(o*this.value,r*this.value).setCenterPosition(o*(p+.5),r*(a+.5))}});return s},Jyt=function(e){var t=Kyt(e.scene,Math.ceil(e.width/40),Math.ceil(e.height/40));e.once("destroy",function(){t.destroy()}).addTransitionMode(bz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}})},$z=Jyt;var Qyt=function(e,t,i){var s=new ei(e,{type:"Graphics",create:{lines:t*i},update:function(){for(var n=this.getShapes(),o=this.width/(t-1),r=this.height/i,a=r*2,p=o*this.value,h=r*this.value,u=0;u<i;u++)for(var f=0;f<t;f++){var l=f*o,d=u*a+f%2*r;n[f*i+u].fillStyle(16777215).start(l+p,d).lineTo(l,d+h).lineTo(l-p,d).lineTo(l,d-h).lineTo(l+p,d).close()}}});return s},qyt=function(e){var t=Qyt(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(Rz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}})},jz=qyt;var _yt=function(e,t,i){var s=new ei(e,{type:"Graphics",create:{circle:t*i},update:function(){for(var n=this.getShapes(),o=this.width/(t-1),r=this.height/i,a=r*2,p=Math.max(o,r)*this.value,h=0;h<i;h++)for(var u=0;u<t;u++){var f=u*o,l=h*a+u%2*r;n[u*i+h].fillStyle(16777215).setCenterPosition(f,l).setRadius(p)}}});return s},tCt=function(e){var t=_yt(e.scene,Math.ceil(e.width/60),Math.ceil(e.height/60));e.once("destroy",function(){t.destroy()}).addTransitionMode(Iz,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){i.setCurrentImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){i.maskGameObject.setValue(o)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1)}})},Zz=tCt;var eCt=function(e,t){var i=new ei(e,{type:"Graphics",create:{lines:t},update:function(){for(var s=this.getShapes(),n=this.width/t,o=n/2,r=0;r<t;r++){var a=n*r,p=this.height*this.value,h=a+o;s[r].fillStyle(16777215).start(a,0).horizontalLineTo(p).arc(h,p,o,180,0,!0).horizontalLineTo(-p).lineTo(a,0).close()}}});return i},iCt=function(e){var t=eCt(e.scene,10);e.once("destroy",function(){t.destroy()}).addTransitionMode(Az,{ease:"Linear",dir:"out",mask:t,onStart:function(i,s,n,o){n.tint=0,i.setCurrentImageMaskEnable(!0,!0),i.setNextImageMaskEnable(!0,!0)},onProgress:function(i,s,n,o){var r;o<.5?(o=ii(o),r=Math.floor(255*(1-o)),i.maskGameObject.setValue(o),s.tint=(r<<16)+(r<<8)+r):(s.visible&&i.setChildVisible(s,!1),o=ii(o),r=Math.floor(255*(1-o)),i.maskGameObject.setValue(o),n.tint=(r<<16)+(r<<8)+r)},onComplete:function(i,s,n,o){i.removeMaskGameObject(!1),i.setChildVisible(s,!0),s.tint=16777215,i.setChildVisible(n,!0),n.tint=16777215}})},Kz=iCt;var rCt=function(e){e.addTransitionMode(Oz,{ease:"Linear",dir:"out",mask:!0,onStart:function(t,i,s,n){t.setChildVisible(s,!1),i.effect=i.preFX.addPixelate(0),s.effect=s.preFX.addPixelate(0)},onProgress:function(t,i,s,n){if(n<.5){n=ii(n);var o=Math.min(i.width,i.height)/5;i.effect.amount=Math.ceil(o*n)}else{i.visible&&t.setChildVisible(i,!1),s.visible||t.setChildVisible(s,!0),n=ii(n);var o=Math.min(s.width,s.height)/5;s.effect.amount=Math.ceil(o*n)}},onComplete:function(t,i,s,n){i.preFX.remove(i.effect),delete i.effect,t.setChildVisible(i,!0),s.preFX.remove(s.effect),delete s.effect}})},Jz=rCt;var nCt=`vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }
vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }
vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }
vec3 fade(vec3 t) { return t*t*t*(t*(t*6.0-15.0)+10.0); }
float Perlin(vec3 P) {
    vec3 i0 = mod289(floor(P)), i1 = mod289(i0 + vec3(1.0));
    vec3 f0 = fract(P), f1 = f0 - vec3(1.0), f = fade(f0);
    vec4 ix = vec4(i0.x, i1.x, i0.x, i1.x), iy = vec4(i0.yy, i1.yy);
    vec4 iz0 = i0.zzzz, iz1 = i1.zzzz;
    vec4 ixy = permute(permute(ix) + iy), ixy0 = permute(ixy + iz0), ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0), gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    vec4 gx1 = ixy1 * (1.0 / 7.0), gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0); gx1 = fract(gx1);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0), sz0 = step(gz0, vec4(0.0));
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1), sz1 = step(gz1, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5); gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    gx1 -= sz1 * (step(0.0, gx1) - 0.5); gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g0 = vec3(gx0.x,gy0.x,gz0.x), g1 = vec3(gx0.y,gy0.y,gz0.y),
        g2 = vec3(gx0.z,gy0.z,gz0.z), g3 = vec3(gx0.w,gy0.w,gz0.w),
        g4 = vec3(gx1.x,gy1.x,gz1.x), g5 = vec3(gx1.y,gy1.y,gz1.y),
        g6 = vec3(gx1.z,gy1.z,gz1.z), g7 = vec3(gx1.w,gy1.w,gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g0,g0), dot(g2,g2), dot(g1,g1), dot(g3,g3)));
    vec4 norm1 = taylorInvSqrt(vec4(dot(g4,g4), dot(g6,g6), dot(g5,g5), dot(g7,g7)));
    g0 *= norm0.x; g2 *= norm0.y; g1 *= norm0.z; g3 *= norm0.w;
    g4 *= norm1.x; g6 *= norm1.y; g5 *= norm1.z; g7 *= norm1.w;
    vec4 nz = mix(vec4(dot(g0, vec3(f0.x, f0.y, f0.z)), dot(g1, vec3(f1.x, f0.y, f0.z)),
        dot(g2, vec3(f0.x, f1.y, f0.z)), dot(g3, vec3(f1.x, f1.y, f0.z))),
        vec4(dot(g4, vec3(f0.x, f0.y, f1.z)), dot(g5, vec3(f1.x, f0.y, f1.z)),
            dot(g6, vec3(f0.x, f1.y, f1.z)), dot(g7, vec3(f1.x, f1.y, f1.z))), f.z);
    return 2.2 * mix(mix(nz.x,nz.z,f.y), mix(nz.y,nz.w,f.y), f.x);
}
float Perlin(vec2 P) { return Perlin(vec3(P, 0.0)); }
`,Qz=nCt;var sCt=`#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
// Scene buffer
uniform sampler2D uMainSampler;
uniform sampler2D uMainSampler2;

uniform int resizeMode;
uniform float progress;
uniform float fromRatio;
uniform float toRatio;
varying vec2 outFragCoord;
// Effect parameters
uniform float noiseX;
uniform float noiseY;
uniform float noiseZ;
uniform float fromEdgeStart;
uniform float fromEdgeWidth;
uniform float toEdgeStart;
uniform float toEdgeWidth;

${Qz}

vec4 getFromColor (vec2 uv) {
  return texture2D(uMainSampler, uv);
}

vec4 getToColor (vec2 uv) {
  if (resizeMode == 2) {
    //  cover
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(min(fromRatio / toRatio, 1.0), min((toRatio / fromRatio), 1.0)));
  } else if (resizeMode == 1) {
    //  contain
    return texture2D(uMainSampler2, 0.5 + (vec2(uv.x, 1.0 - uv.y) - 0.5) * vec2(max(fromRatio / toRatio, 1.0), max((toRatio / fromRatio), 1.0)));
  } else {
    //  stretch
    return texture2D(uMainSampler2, vec2(uv.x, 1.0 - uv.y));
  }
}

vec4 transition (vec2 uv) {    
  vec4 colorFront = getFromColor(uv);
  vec4 colorTo = getToColor(uv);

  float noise = (Perlin(vec3(uv.x * noiseX, uv.y * noiseY, noiseZ)) + 1.0) / 2.0
    * (1.0 - (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth))
    + (fromEdgeStart + fromEdgeWidth + toEdgeStart + toEdgeWidth) * 0.5;
  vec4 colorResult = colorFront * smoothstep(progress - (fromEdgeStart + fromEdgeWidth), progress - fromEdgeStart, noise)
    + colorTo * smoothstep((1.0 - progress) - (toEdgeStart + toEdgeWidth), (1.0 - progress) - toEdgeStart, (1.0 - noise));
  return colorResult;
}

void main () {
  vec2 uv = outFragCoord;
  gl_FragColor = transition(uv);
}
`,qz=sCt;var aCt=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,en=Phaser.Utils.Objects.GetValue,oCt=Phaser.Math.Clamp,ow=class extends aCt{constructor(t){super({name:"rexDissolvePostFx",game:t,renderTarget:!0,fragShader:qz}),this._progress=0,this.toFrame=null,this.targetTexture=null,this.resizeMode=1,this.toRatio=1,this.noiseX=0,this.noiseY=0,this.noiseZ=0,this.fromEdgeStart=.01,this.fromEdgeWidth=.05,this.toEdgeStart=.01,this.toEdgeWidth=.05}resetFromJSON(t){return this.setProgress(en(t,"progress",0)),this.setTransitionTargetTexture(en(t,"toTexture","__DEFAULT"),en(t,"toFrame",void 0),en(t,"resizeMode",1)),this.setNoise(en(t,"noiseX",void 0),en(t,"noiseY",void 0),en(t,"noiseZ",void 0)),this.setFromEdge(en(t,"fromEdgeStart",.01),en(t,"fromEdgeWidth",.05)),this.setToEdge(en(t,"toEdgeStart",.01),en(t,"toEdgeWidth",.05)),this}onBoot(){}onPreRender(){this.set1f("progress",this.progress),this.set1i("resizeMode",this.resizeMode),this.set1f("noiseX",this.noiseX),this.set1f("noiseY",this.noiseY),this.set1f("noiseZ",this.noiseZ),this.set1f("fromEdgeStart",this.fromEdgeStart),this.set1f("fromEdgeWidth",this.fromEdgeWidth),this.set1f("toEdgeStart",this.toEdgeStart),this.set1f("toEdgeWidth",this.toEdgeWidth)}onDraw(t){this.set1f("fromRatio",t.width/t.height),this.set1f("toRatio",this.toRatio),this.set1i("uMainSampler2",1),this.bindTexture(this.targetTexture,1),this.bindAndDraw(t)}get progress(){return this._progress}set progress(t){this._progress=oCt(t,0,1)}setProgress(t){return this.progress=t,this}setTransitionTargetTexture(t,i,s){t===void 0&&(t="__DEFAULT");var n=this.game.textures.getFrame(t,i);return n||(n=this.game.textures.getFrame("__DEFAULT")),this.toRatio=n.width/n.height,this.toFrame=n,this.targetTexture=n.glTexture,s!==void 0&&(this.resizeMode=s),this}setResizeMode(t){return typeof t=="string"&&(t=lCt[t]),this.resizeMode=t,this}setNoise(t,i,s){return t===void 0&&(t=4+Math.random()*6),i===void 0&&(i=4+Math.random()*6),s===void 0&&(s=Math.random()*10),this.noiseX=t,this.noiseY=i,this.noiseZ=s,this}setFromEdge(t,i){return this.fromEdgeStart=t,this.fromEdgeWidth=i,this}setToEdge(t,i){return this.toEdgeStart=t,this.toEdgeWidth=i,this}},lCt={stretch:0,contain:1,cover:2},_z=ow;var yx=_z;var hCt=function(e,t,i){Ki(e).renderer.pipelines.addPostPipeline(t,i)},tW=hCt;var uCt=function(e,t,i){i===void 0&&(i={}),e.setPostPipeline(t);var s=e.postPipelines[e.postPipelines.length-1];return s.resetFromJSON(i),i.name&&(s.name=i.name),s},eW=uCt;var iW=Phaser.Utils.Array.SpliceOne,dCt=function(e,t,i){if(i===void 0)for(var s=e.postPipelines,n=s.length-1;n>=0;n--){var o=s[n];o instanceof t&&(o.destroy(),iW(s,n))}else for(var s=e.postPipelines,n=0,r=s.length;n<r;n++){var o=s[n];o instanceof t&&o.name===i&&(o.destroy(),iW(s,n))}e.hasPostPipeline=e.postPipelines.length>0},rW=dCt;var fCt=function(e){tW(e.scene.game,"rexDissolvePostFx",yx),e.addTransitionMode(Dz,{ease:"Linear",dir:"out",mask:!1,onStart:function(t,i,s,n){i.effect=eW(i,yx)},onProgress:function(t,i,s,n){i.effect.setProgress(n)},onComplete:function(t,i,s,n){rW(i,yx),delete i.effect}})},nW=fCt;var Cx=.1,cCt=0,pCt=0,vCt=1,mCt=1,sW=0,aW=1,gCt=function(e){e.addTransitionMode(Fz,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,s,n){s.effect=s.preFX.addReveal(Cx,cCt,sW)},onProgress:function(t,i,s,n){s.effect.progress=n},onComplete:function(t,i,s,n){s.preFX.remove(s.effect),delete s.effect}}).addTransitionMode(Lz,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,s,n){s.effect=s.preFX.addReveal(Cx,vCt,sW)},onProgress:function(t,i,s,n){s.effect.progress=n},onComplete:function(t,i,s,n){s.preFX.remove(s.effect),delete s.effect}}).addTransitionMode(Nz,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,s,n){s.effect=s.preFX.addReveal(Cx,pCt,aW)},onProgress:function(t,i,s,n){s.effect.progress=n},onComplete:function(t,i,s,n){s.preFX.remove(s.effect),delete s.effect}}).addTransitionMode(Bz,{ease:"Linear",dir:"in",mask:!1,onStart:function(t,i,s,n){s.effect=s.preFX.addReveal(Cx,mCt,aW)},onProgress:function(t,i,s,n){s.effect.progress=n},onComplete:function(t,i,s,n){s.preFX.remove(s.effect),delete s.effect}})},oW=gCt;var xCt=[Gz,kz,Vz,Uz,zz,Hz,Yz,Wz,Xz,$z,jz,Zz,Kz,Jz,nW,oW],lw=xCt;var hw=class extends xx{constructor(t,i,s,n,o,r){super(t,i,s,n,o,r);for(var a=0,p=lw.length;a<p;a++)lw[a](this)}},lW=hw;var uw=lW;K.register("transitionImagePack",function(e,t,i,s,n){var o=new uw(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.TransitionImagePack",uw);var yCt=function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=gu(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this},hW=yCt;var uW={scaleImage:hW};Object.assign(uW,mx);var dW=uW;var CCt=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),ne(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this},fW=CCt;var cW=Phaser.Utils.Objects.IsPlainObject,ys=Phaser.Utils.Objects.GetValue,Sx=class extends Pn{constructor(t,i,s,n,o,r){cW(i)?(r=i,i=ys(r,"x",0),s=ys(r,"y",0),n=ys(r,"key",void 0),o=ys(r,"frame",void 0)):cW(o)&&(r=o,o=void 0);var a=ys(r,"image");a?a.setPosition(i,s).setOrigin(.5):(a=t.add.image(i,s,n,o),n===void 0&&a.setVisible(!1)),super(t,i,s,1,1),this.type="rexImageBox";var p=ys(r,"background");p&&this.add(p),this.background=p,this.add(a),this.image=a,this.scaleUp=ys(r,"scaleUp",!1);var h=ys(r,"width",a.width),u=ys(r,"height",a.height);this.resize(h,u)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,i){return super.resize(t,i),fW.call(this),this.scaleImage(),this}setTexture(t,i){var s=this.image;return s.setTexture(t,i),t!==null?(this.setChildVisible(s,!0),this.scaleImage()):this.setChildVisible(s,!1),this}};Object.assign(Sx.prototype,dW);var pW=Sx;var vW=pW;var Ff=vW;K.register("imageBox",function(e,t,i,s,n){var o=new Ff(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.ImageBox",Ff);var dw=H0;K.register("fullWindowRectangle",function(e,t){var i=new dw(this.scene,e,t);return this.scene.add.existing(i),i});Z(window,"RexPlugins.UI.FullWindowRectangle",dw);var mW=Kg;var fw=mW;K.register("fullWindowZone",function(){var e=new fw(this.scene);return this.scene.add.existing(e),e});Z(window,"RexPlugins.UI.FullWindowZone",fw);var cw=X0;K.register("cover",function(e){var t=new cw(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Cover",cw);var SCt=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var i=this.node.style;return i.width=`${e}px`,i.height=`${t}px`,this.updateSize(),this},Eu=SCt;var pw={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},vw={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},gW={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"};var xW=Phaser.Utils.Objects.GetValue,TCt=function(e,t,i,s){var n=xW(s,"preventDefault",!1),o=xW(s,"preTest");for(let r in i)t.addEventListener(r,function(a){(!o||o(e,r))&&e.emit(i[r],e,a),n&&a.preventDefault()})},Tx=TCt;var ECt=Phaser.GameObjects.DOMElement,yW=Phaser.Utils.Objects.IsPlainObject,kn=Phaser.Utils.Objects.GetValue,Ex=class extends ECt{constructor(t,i,s,n,o,r){yW(i)?(r=i,i=kn(r,"x",0),s=kn(r,"y",0),n=kn(r,"width",0),o=kn(r,"height",0)):yW(n)&&(r=n,n=kn(r,"width",0),o=kn(r,"height",0)),r===void 0&&(r={});var a,p=kn(r,"inputType",void 0);p===void 0&&(p=kn(r,"type","text")),p==="textarea"?(a=document.createElement("textarea"),a.style.resize="none"):(a=document.createElement("input"),a.type=p),Rh(pw,r,a);var h=kn(r,"style",void 0);h=Rh(vw,r,h);var u=a.style;for(var f in r)if(!(f in pw||f in vw)){if(f in u)h[f]=r[f];else if(f in a){if(f==="type")continue;a[f]=r[f]}}h["box-sizing"]="border-box",super(t,i,s,a,h),this.type="rexInputText",this.resize(n,o),Tx(this,a,gW),Hg(a),kn(r,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,i){return t===void 0?this.node.select():this.node.setSelectionRange(t,i),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,i){return this.node.style[t]=i,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}},PCt={resize:Eu};Object.assign(Ex.prototype,PCt);var Px=Ex;var CW=Px;var mw=CW;K.register("inputText",function(e){var t=new mw(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.InputText",mw);var SW=Phaser.Utils.Objects.GetValue,MCt=function(e,t){var i=document.createElement("input");i.type="file";var s=SW(t,"accept",""),n=SW(t,"multiple",!1);return i.setAttribute("accept",s),n?i.setAttribute("multiple",""):i.removeAttribute("multiple"),i},TW=MCt;var wCt=function(e,t){return e===void 0&&(e=0),new Promise(function(i,s){setTimeout(function(){i(t)},e)})},Mx=wCt;var bCt=function({game:e,fileInput:t,closeDelay:i}){return ra(Ki(e).events,"focus").then(function(){return Mx(i)}).then(function(){var s={files:t.files};return Promise.resolve(s)})},wx=bCt;var RCt=Phaser.Utils.Objects.GetValue,ICt=Phaser.DOM.RemoveFromDOM,ACt=function(e,t){var i=RCt(t,"closeDelay",200),s=TW(e,t);return s.click(),wx({game:e,fileInput:s,closeDelay:i}).then(function(n){return ICt(s),s.remove(),Promise.resolve(n)})},Pu=ACt;var OCt=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},bx=OCt;var DCt=function(e,t,i){if(i===void 0)switch(t){case"image":case"svg":i="textures";break;case"animation":i="json";break;case"tilemapTiledJSON":case"tilemapCSV":i="tilemap";break;case"glsl":i="shader";break;default:i=t;break}e=Ki(e);var s;return i==="textures"?s=e.textures:s=e.cache[i],s},EW=DCt;var LCt=function(e,t,i,s,n,o){if(!(n===null||n===!1))if(Be(n))n();else{var r=EW(e,i,n);r.exists(s)&&r.remove(s)}var a=e.load;if(o&&a.once(`filecomplete-${i}-${s}`,function(h,u,f){o(f)}),Be(t))t();else{var p=window.URL.createObjectURL(t);a[i](s,p)}a.start()},gw=LCt;var FCt=function(e,t,i,s,n){var o=this.scene;return gw(o,e,t,i,s,n),this},BCt=function(e,t,i,s){var n=this.scene;return new Promise(function(o,r){var a=function(p){o(p)};gw(n,e,t,i,s,a)})},Rx={loadFile:FCt,loadFilePromise:BCt};var NCt=Phaser.GameObjects.DOMElement,PW=Phaser.Utils.Objects.IsPlainObject,Vn=Phaser.Utils.Objects.GetValue,Ix=class extends NCt{constructor(t,i,s,n,o,r){PW(i)?(r=i,i=Vn(r,"x",0),s=Vn(r,"y",0),n=Vn(r,"width",0),o=Vn(r,"height",0)):PW(n)&&(r=n,n=Vn(r,"width",0),o=Vn(r,"height",0));var a=document.createElement("input");a.type="file";var p=a.style;p.display="none";var h=document.createElement("label");h.appendChild(a);var u=Vn(r,"style",void 0);super(t,i,s,h,u),this.type="rexFileChooser",this.resetFromJSON(r),this.resize(n,o);var f=this;a.onchange=function(){f.emit("change",f)},this.setCloseDelay(Vn(r,"closeDelay",200)),a.onclick=function(){wx({game:t,fileInput:a,closeDelay:f.closeDelay}).then(function(){f.emit("select",f)})}}resetFromJSON(t){return this.setAccept(Vn(t,"accept","")),this.setMultiple(Vn(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}},GCt={resize:Eu,syncTo:bx};Object.assign(Ix.prototype,GCt,Rx);var Cs=Ix;K.register("fileChooser",function(e){var t=new Cs(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FileChooser",Cs);var MW={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}};var wW={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){this.filters||(this.filters={});for(var t in e)this.filters[t]=e[t];return this}};var bW={resize:Eu,syncTo:bx};Object.assign(bW,MW,wW,Rx);var RW=bW;var IW={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"};var kCt=Phaser.GameObjects.DOMElement,AW=Phaser.Utils.Objects.IsPlainObject,Ss=Phaser.Utils.Objects.GetValue,Ax=class extends kCt{constructor(t,i,s,n,o,r){AW(i)?(r=i,i=Ss(r,"x",0),s=Ss(r,"y",0),n=Ss(r,"width",0),o=Ss(r,"height",0)):AW(n)&&(r=n,n=Ss(r,"width",0),o=Ss(r,"height",0)),r===void 0&&(r={});var a=document.createElement("div"),p=Ss(r,"style",void 0);super(t,i,s,a,p),this.type="rexFileDropZone",this.resize(n,o),this._files=[],this.setDropEnable(Ss(r,"dropEnable",!0));var h=Ss(r,"filters");h&&this.addFilters(h),Tx(this,a,IW,{preventDefault:!0,preTest(u){return u.dropEnable}}),this.on("drop",function(u,f){this._files=f.dataTransfer.files;var l=this._files;if(l&&this.filters)for(var d in this.filters){for(var v=this.filters[d],c=[],m=0,g=l.length;m<g;m++){var y=l[m];v(y,l)&&c.push(y)}c.length>0&&this.emit(`drop.${d}`,c)}},this)}get files(){return this._files}};Object.assign(Ax.prototype,RW);var OW=Ax;var DW=OW;var xw=DW;K.register("fileDropZone",function(e){var t=new xw(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FileDropZone",xw);var VCt=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,s,n,o,r,a,p=!1,h=this.childrenProportion;if(this.orientation===0)for(var u=!0,f=0,l=i.length;f<l;f++)s=i[f],s.hasOwnProperty("rexSizer")&&(n=s.rexSizer,!n.hidden&&(o=n.proportion,o===0||e?(a=this.getChildWidth(s),n.fitRatio>0&&!n.resolved&&(a=void 0),a===void 0&&(o!==0&&!this.hasProportion0Child?a=0:p=!0)):a=0,!p&&(r=s.rexSizer.padding,a+=(r.left+r.right)*this.scaleX,u?u=!1:a+=this.space.item*this.scaleX,t+=a)));else for(var f=0,l=i.length;f<l;f++)s=i[f],s.hasOwnProperty("rexSizer")&&(n=s.rexSizer,!n.hidden&&(a=this.getChildWidth(s),a===void 0&&(p=!0),!p&&(r=n.padding,a+=(r.left+r.right)*this.scaleX,t=Math.max(a,t))));if(!p)return t+(this.space.left+this.space.right)*this.scaleX},LW=VCt;var UCt=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t=0,i=this.sizerChildren,s,n,o,r,a,p=!1,h=this.childrenProportion;if(this.orientation===0)for(var u=0,f=i.length;u<f;u++)s=i[u],s.hasOwnProperty("rexSizer")&&(n=s.rexSizer,!n.hidden&&(a=this.getChildHeight(s),a===void 0&&(p=!0),!p&&(r=n.padding,a+=(r.top+r.bottom)*this.scaleY,t=Math.max(a,t))));else for(var l=!0,u=0,f=i.length;u<f;u++)s=i[u],s.hasOwnProperty("rexSizer")&&(n=s.rexSizer,!n.hidden&&(o=n.proportion,o===0||e?(a=this.getChildHeight(s),n.fitRatio>0&&!n.resolved&&(a=void 0),a===void 0&&(o!==0&&!this.hasProportion0Child?a=0:p=!0)):a=0,!p&&(r=n.padding,a+=(r.top+r.bottom)*this.scaleY,l?l=!1:a+=this.space.item*this.scaleY,t+=a)));if(!p)return t+(this.space.top+this.space.bottom)*this.scaleY},FW=UCt;var zCt=function(e,t){t===void 0&&(t=this.width*this.scaleX);var i,s=e.rexSizer;if(this.orientation===0)s.proportion>0&&this.proportionLength>0&&(i=s.proportion*this.proportionLength);else if(s.expand){var n=this.space,o=t-(n.left+n.right)*this.scaleX,r=s.padding;i=o-(r.left+r.right)*this.scaleX}return i},BW=zCt;var WCt=function(e,t){t===void 0&&(t=this.height);var i,s=e.rexSizer;if(this.orientation===0){if(s.expand){var n=this.space,o=t-(n.top+n.bottom)*this.scaleY,r=s.padding;i=o-(r.top+r.bottom)*this.scaleY}}else s.proportion>0&&this.proportionLength>0&&(i=s.proportion*this.proportionLength);return i},NW=WCt;var HCt=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,s=0,n=t.length;s<n;s++)i=t[s],i.isRexSizer&&e.push(i);return e},GW=HCt;var YCt=function(){this.hasRatioFitChild=!1;for(var e,t,i=this.sizerChildren,s=0,n=i.length;s<n;s++)e=i[s],t=e.rexSizer,!t.hidden&&t.fitRatio>0&&(ne(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,On.call(this),this},kW=YCt;var XCt=Phaser.Math.Wrap,$Ct=function(){for(var e=this.sizerChildren,t,i,s,n=this.innerLeft,o=this.innerTop,r=this.innerWidth,a=this.innerHeight,p=n,h=o,u,f,l,d,v,c,m,g,y,x=this.startChildIndex,C=0,S=e.length;C<S;C++)x===0?y=C:y=XCt(C+x,0,S),this.rtl&&(y=S-y-1),t=e[y],!t.rexSizer.hidden&&(i=t.rexSizer,s=i.padding,Fn.call(this,t),t.isRexSpace?(m=0,g=0):(m=this.getExpandedChildWidth(t),g=this.getExpandedChildHeight(t)),t.isRexSizer?(t.runLayout(this,m,g),xu(t,this)):ne(t,m,g),m===void 0&&(m=mt(t)),g===void 0&&(g=gt(t)),this.orientation===0?(u=p+s.left*this.scaleX,i.proportion===0||this.proportionLength===0?l=m:l=i.proportion*this.proportionLength,f=h+s.top*this.scaleY,d=a-(s.top+s.bottom)*this.scaleY):(u=p+s.left*this.scaleX,l=r-(s.left+s.right)*this.scaleX,f=h+s.top*this.scaleY,i.proportion===0||this.proportionLength===0?d=g:d=i.proportion*this.proportionLength),m===void 0&&(m=mt(t)),g===void 0&&(g=gt(t)),v=(i.alignOffsetX+i.alignOffsetOriginX*m)*this.scaleX,c=(i.alignOffsetY+i.alignOffsetOriginY*g)*this.scaleY,Bn.call(this,t,u,f,l,d,i.align,v,c),this.orientation===0?p+=l+(s.left+s.right)*this.scaleX+this.space.item*this.scaleX:h+=d+(s.top+s.bottom)*this.scaleY+this.space.item*this.scaleY)},VW=$Ct;var jCt=function(t){var t=Qh.call(this,t);if(t!==void 0&&this.orientation===0&&this.proportionLength===void 0){var i=t-this.childrenWidth;i>0?(i=t-this.getChildrenWidth(!1),this.proportionLength=i/this.childrenProportion):(this.proportionLength=0,i<0)}return t},UW=jCt;var ZCt=function(t){var t=tu.call(this,t);if(t!==void 0&&this.orientation===1&&this.proportionLength===void 0){var i=t-this.childrenHeight;i>0?(i=t-this.getChildrenHeight(!1),this.proportionLength=i/this.childrenProportion):(this.proportionLength=0,i<0)}return t},zW=ZCt;var KCt=function(){return this.hasRatioFitChild&&this.orientation===1?!0:qh.call(this)},WW=KCt;var JCt=function(e,t){if(this.hasRatioFitChild){var i,s;this.orientation===0?i=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:s=e-(this.getInnerPadding("left")+this.getInnerPadding("right"))*this.scaleX;for(var n,o,r,a,p=this.sizerChildren,h=0,u=p.length;h<u;h++){var n=p[h],o=n.rexSizer;if(!o.hidden){var f=o.fitRatio;f&&(this.orientation===0?(a=i-(this.getChildOuterPadding(n,"top")+this.getChildOuterPadding(n,"bottom"))*this.scaleY,r=a*f):(r=i-(this.getChildOuterPadding(n,"top")+this.getChildOuterPadding(n,"bottom"))*this.scaleX,a=r/f),ne(n,r,a),n.isRexSizer&&n.setMinSize(r,a),o.resolved=!0)}}}},Ox=JCt;var QCt=function(e){this.wrapResult||(this.orientation===1&&Ox.call(this,e,void 0),_h.call(this,e))},HW=QCt;var qCt=function(){return this.hasRatioFitChild&&this.orientation===0?!0:eu.call(this)},YW=qCt;var _Ct=function(e){this.wrapResult||(this.orientation===0&&Ox.call(this,void 0,e),iu.call(this,e))},XW=_Ct;var tSt=Phaser.GameObjects.Zone,yw=class extends tSt{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}},Bf=yw;var eSt=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var s=-1,n=1/0,o=0,r=i.length;o<r;o++){var a=i[o],p;this.orientation===0?p=Math.abs(a.left-e):p=Math.abs(a.top-t),n>p&&(n=p,s=o)}var a=i[i.length-1],p;return this.orientation===0?p=Math.abs(a.right-e):p=Math.abs(a.bottom-t),n>p&&(n=p,s=o+1),s},$W=eSt;var ZW=Phaser.Utils.Objects.IsPlainObject,sr=Phaser.Utils.Objects.GetValue,jW=Phaser.Display.Align.CENTER,iSt={min:0,full:-1},Cw=function(e,t,i,s,n,o,r,a,p,h){var u,f,l,d;In.call(this,e);var v=e.isRexSpace,c=typeof t;if(t===null)return this;if(c!=="number"){if(c==="string")t=iSt[t];else if(ZW(t)){var m=t;t=sr(m,"proportion",void 0),i=sr(m,"align",jW),s=sr(m,"padding",0),n=sr(m,"expand",!1),o=sr(m,"key",void 0),r=sr(m,"index",void 0),e.isRexSizer||(a=sr(m,"minWidth",void 0),p=sr(m,"minHeight",void 0)),h=sr(m,"fitRatio",0),u=sr(m,"offsetX",0),f=sr(m,"offsetY",0),l=sr(m,"offsetOriginX",0),d=sr(m,"offsetOriginY",0)}}typeof i=="string"&&(i=Mn[i]),t===void 0&&(t=v?1:0),i===void 0&&(i=jW),s===void 0&&(s=0),n===void 0&&(n=!1),a===void 0&&(v?a=0:e.isRexSizer||(a=e._minWidth)),p===void 0&&(v?p=0:e.isRexSizer||(p=e._minHeight)),h===void 0||h===!1?h=0:h===!0&&(h=mt(e)/gt(e)),u===void 0&&(u=0),f===void 0&&(f=0),l===void 0&&(l=0),d===void 0&&(d=0);var m=this.getSizerConfig(e);return m.proportion=t,m.align=i,m.padding=Pr(s),m.expand=n,m.fitRatio=t===0?h:0,m.alignOffsetX=u,m.alignOffsetY=f,m.alignOffsetOriginX=l,m.alignOffsetOriginY=d,r===void 0||r>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(r,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=a===void 0?mt(e):a:e.minHeight=p===void 0?gt(e):p),n&&(this.orientation===0?e.minHeight=p:e.minWidth=a)),o!==void 0&&this.addChildrenMap(o,e),this},KW={add:Cw,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),Cw.call(this,new Bf(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,i,s,n,o,r,a){return ZW(i)&&(i.index=e),Cw.call(this,t,i,s,n,o,r,e,a),this},insertAtPosition(e,t,i,s,n,o,r,a,p){var h=$W.call(this,e,t);return h===-1&&(h=void 0),this.insert(h,i,s,n,o,r,a,p),this}};var rSt=Phaser.Utils.Array.Remove,JW={remove(e,t){return this.getParentSizer(e)!==this?this:(rSt(this.sizerChildren,e),An.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,ga.call(this,e),this}};var QW={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=Mn[t]),this.getSizerConfig(e).align=t,this}};var qW={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}};var _W={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}};var nSt=function(e){e===void 0&&(e="left");var t=this.sizerChildren,i=t[0],s=i&&i.isRexSpace;e==="right"||e==="bottom"||e==="center"?s||this.insertSpace(0):s&&this.remove(i,!0);var n=t.length-1,o=t[n],r=o&&o.isRexSpace;return e==="center"?r||this.insertSpace(n+1):r&&this.remove(o,!0),this},t7=nSt;var Mu={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(i,s){var n=i.getData(e),o=s.getData(e);return t?o-n:n-o}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(i,s){var n=i[e],o=s[e];return t?o-n:n-o}),this}};var e7={getChildrenWidth:LW,getChildrenHeight:FW,getExpandedChildWidth:BW,getExpandedChildHeight:NW,getChildrenSizers:GW,preLayout:kW,layoutChildren:VW,resolveWidth:UW,resolveHeight:zW,hasWidthWrap:WW,runWidthWrap:HW,hasHeightWrap:YW,runHeightWrap:XW,setChildrenAlignMode:t7};Object.assign(e7,KW,JW,QW,qW,_W,Mu);var i7=e7;var sSt=function(){for(var e=0,t=this.sizerChildren,i,s,n=0,o=t.length;n<o;n++)i=t[n],!i.rexSizer.hidden&&(s=i.rexSizer.proportion,s>0?e+=s:s===0&&(this.hasProportion0Child=!0));return e},r7=sSt;var Ar=x0;var Sw=Phaser.Utils.Objects.IsPlainObject,Or=Phaser.Utils.Objects.GetValue,Dx=class extends Ir{constructor(t,i,s,n,o,r,a){Sw(i)?(a=i,i=Or(a,"x",0),s=Or(a,"y",0),n=Or(a,"width",void 0),o=Or(a,"height",void 0),r=Or(a,"orientation",0)):Sw(n)?(a=n,n=Or(a,"width",void 0),o=Or(a,"height",void 0),r=Or(a,"orientation",0)):Sw(r)&&(a=r,r=Or(a,"orientation",0)),r===void 0&&(r=0),super(t,i,s,n,o,a),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(r),this.setItemSpacing(Or(a,"space.item",0)),this.setStartChildIndex(Or(a,"startChildIndex",0)),this.setRTL(Or(a,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Ar(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=r7.call(this)),this._childrenProportion}};Object.assign(Dx.prototype,i7);var ht=Dx;var aSt=function(e,t,i){if(e){var s=t==null,n=i==null;return s&&n||(s||(e.displayWidth=t),n||(e.displayHeight=i),s&&(e.scaleX=e.scaleY),n&&(e.scaleY=e.scaleX)),e}},Nf=aSt;var oSt=function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var i=this.childrenMap.icon;if(i){e.icon?this.show(i):this.hide(i);var s=e.iconSize;s&&(this.setChildDisplaySize(i,s,s),this.iconWidth!==void 0&&this.setIconSize(s)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var n=this.childrenMap.action;if(n){e.action?this.show(n):this.hide(n);var o=e.actionSize;o&&(this.setChildDisplaySize(n,o,o),this.actionWidth!==void 0&&this.setActionSize(o)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this},n7=oSt;var lSt={appendText:tm,resetDisplayContent:n7},s7=lSt;var Lx=class extends ht{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var i=this.childrenMap.text;i&&i.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,i){var s=this.childrenMap.icon;return!s||!s.setTexture?this:(s.setTexture(t,i),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(Nf(s,this.iconWidth,this.iconHeight),this.resetChildScaleState(s)),this)}setTexture(t,i){return this.setIconTexture(t,i),this}setIconSize(t,i){return i===void 0&&(i=t),this.iconWidth=t,this.iconHeight=i,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,i){var s=this.childrenMap.action;return!s||!s.setTexture?this:(s.setTexture(t,i),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(Nf(s,this.actionWidth,this.actionHeight),this.resetChildScaleState(s)),this)}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,i){return i===void 0&&(i=t),this.actionWidth=t,this.actionHeight=i,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&Nf(t,this.iconWidth,this.iconHeight);var i=this.childrenMap.action;i&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&Nf(i,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,i,s){var n=this.childrenMap.iconMask;n&&(n.setPosition(),this.resetChildPositionState(n));var o=this.childrenMap.actionMask;return o&&(o.setPosition(),this.resetChildPositionState(o)),super.postLayout(t,i,s),this}resize(t,i){super.resize(t,i);var s=this.childrenMap.iconMask;s&&s.resize();var n=this.childrenMap.actionMask;return n&&n.resize(),this}};Object.assign(Lx.prototype,s7);var Fx=Lx;var hSt=function(e,t,i,s){var n=new Lf(t,i,s);if(e&&!e.isRexSizer){var o=n.createGeometryMask();e.setMask(o),this.once("destroy",function(){e.setMask(),o.destroy()})}return this.pin(n),n},ri=hSt;var uSt=Phaser.GameObjects.Text,dSt=function(e){return e instanceof uSt},wu=dSt;var fSt=Phaser.GameObjects.BitmapText,cSt=function(e){return e instanceof fSt},Bx=cSt;var ce=0,pe=1,Te=2,pSt=function(e){var t;return Bx(e)?t=Te:wu(e)?t=ce:t=pe,t},Ti=pSt;var vSt=function(e,t){for(var i=[],s=e.split(`
`),n=t.style,o=n.wordWrapWidth,r=n.hasOwnProperty("wrapMode")?n.wrapMode:3,a=t.context,p=0,h=s.length;p<h;p++)gSt(a,s[p],o,r,i);return i},mSt=function(e,t){var i;if(t===2)i=e.split("");else{i=[];for(var s=e.split(" "),n,o=0,r=s.length;o<r;o++)n=s[o],o<r-1?Ks(n)?i.push(n+" "):(i.push(...n.split("")),i.push(" ")):n!==""&&(Ks(n)?i.push(n):i.push(...n.split("")))}return i},gSt=function(e,t,i,s,n){if(t.length<=100){var o=e.measureText(t).width;if(o<=i)return n.push(t),n}for(var r=mSt(t,s),a,p,h=[],u=i,f=0,l=r.length;f<l;f++)a=r[f],p=e.measureText(a).width,u-=p,u<0&&(n.push(h.join("")),h.length=0,u=i-p),h.push(a);return h.length>0&&n.push(h.join("")),n},a7=vSt;var xSt=function(e,t){var i=Ti(e);switch(i){case ce:switch(typeof t=="string"&&(t=hh[t]||0),e.style.wrapMode=t,t){case 2:case 3:e.style.wordWrapCallback=a7;break;case 1:default:e.style.wordWrapCallback=null;break}break;case pe:typeof t=="string"&&(t=hh[t]||0),e.style.wrapMode=t;break;case Te:break}},Gf=xSt;var ySt=function(e){var t=function(i){var s=e.padding,n=i-(s.left+s.right)*e.scaleX,o=e.style;return wu(e)?(o.wordWrapWidth=n,o.maxLines=0):(o.wrapMode===0&&(o.wrapMode=1),o.wrapWidth=n,o.maxLines=0),o.fixedWidth=i,o.fixedHeight=0,e.updateText(),e.minHeight=e.height,e};return t},o7=ySt;var CSt=function(e){var t=function(i){return e.setFixedSize(i,0).runWordWrap(),e.minHeight=e.height,e};return t},l7=CSt;var SSt=function(e){var t=function(i){return e.setMaxWidth(i),e.minHeight=e.height,e};return t},h7=SSt;var TSt=function(e){return e instanceof Xd},ESt=function(e,t){return t===void 0&&(t=0),e._minWidth=t,e.runWidthWrap=TSt(e)?l7(e):Bx(e)?h7(e):o7(e),e},Bo=ESt;var PSt=function(e,t,i){if(t==null)return e;if(t===0)return Tw(e,0,i),e;var s=e.text.length;if(s===0)return Tw(e,t,i),e;var n=Math.floor(t*1.5/s);i!==void 0&&n>i&&(n=Math.floor(i));for(var o={},r=d7(e,n,t,i,o),a=0;a<=65535&&r!==0;a++){if(n+=r,n<0){n=0;break}r=d7(e,n,t,i,o)}return a===65535&&console.warn("FontSizeFit: Test count exceeds 65535"),e.setFontSize(n),Tw(e,t,i),e},u7=function(e,t,i){return i[t]===void 0&&(e.setFontSize(t),i[t]={width:e.width,height:e.height}),i[t]},d7=function(e,t,i,s,n){var o=u7(e,t,n),r=u7(e,t+1,n),a;if(s!==void 0)if(o.height<=s&&r.height>s)a=0;else{if(o.height>s)return-1;a=Math.floor(s-o.height)}var p;if(o.width<=i&&r.width>i)return 0;if(o.width>i)return-1;var p=Math.floor(i-o.width);return a===void 0?p:Math.min(p,a)},Tw=function(e,t,i){var s=e.style;s&&(s.fixedWidth=t,s.parent.width=t,i!==void 0&&(s.fixedHeight=i,s.parent.height=i),s.update(!1))},bu=PSt;var Ew=Phaser.Utils.Objects.GetValue,MSt=function(e,t){typeof t=="number"&&(t={minWidth:t});var i=Ew(t,"minWidth",0),s=Ew(t,"minHeight",0),n=Ew(t,"fitHeight",!1);return e._minWidth=i,e._minHeight=s,n?(e.runWidthWrap=function(o){return e.setFixedSize&&e.setFixedSize(0,0),e.setFontSize(1),e},e.resize=function(o,r){return bu(e,o,r),e}):(e.runWidthWrap=function(o){return e.setFixedSize&&e.setFixedSize(0,0),bu(e,o,void 0),e},e.resize=function(o,r){return e.width===o&&e.height===r||e.setFixedSize(o,r),e}),e},No=MSt;var Ht=Phaser.Utils.Objects.GetValue,Pw=class extends Fx{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexLabel";var s=Ht(i,"background",void 0),n=Ht(i,"icon",void 0),o=Ht(i,"iconMask",void 0),r=Ht(i,"text",void 0),a=Ht(i,"action",void 0),p=Ht(i,"actionMask",void 0),h=Ht(i,"align",void 0);if(s&&this.addBackground(s),n){var u;this.orientation===0?(r||a)&&(u={right:Ht(i,"space.icon",0),top:Ht(i,"space.iconTop",0),bottom:Ht(i,"space.iconBottom",0),left:Ht(i,"space.iconLeft",0)}):(r||a)&&(u={bottom:Ht(i,"space.icon",0),left:Ht(i,"space.iconLeft",0),right:Ht(i,"space.iconRight",0),top:Ht(i,"space.iconTop",0)});var f=Ht(i,"squareFitIcon",!1)?1:0;if(this.add(n,{proportion:0,padding:u,fitRatio:f}),o&&(o=ri.call(this,n,n,1)),!f){var l=Ht(i,"iconSize",void 0);this.setIconSize(Ht(i,"iconWidth",l),Ht(i,"iconHeight",l))}}if(r){var d=Ht(i,"wrapText",!1),v=Ht(i,"adjustTextFontSize",!1);d?(d===!0&&(d="word"),Gf(r,d),i.expandTextWidth=!0,Bo(r)):v&&(i.expandTextWidth=!0,i.expandTextHeight=!0,No(r,{fitHeight:!0}));var c=Ht(i,"space.text",0),m=Ht(i,"expandTextWidth",!1),g=Ht(i,"expandTextHeight",!1),y,u,x;this.orientation===0?(y=m?1:0,a&&(u={right:c}),x=g):(y=g?1:0,a&&(u={bottom:c}),x=m),this.add(r,{proportion:y,expand:x,padding:u})}if(a){var u;this.orientation===0?u={top:Ht(i,"space.actionTop",0),bottom:Ht(i,"space.actionBottom",0),right:Ht(i,"space.actionRight",0)}:u={left:Ht(i,"space.actionLeft",0),right:Ht(i,"space.actionRight",0),bottom:Ht(i,"space.actionBottom",0)};var f=Ht(i,"squareFitAction",!1)?1:0;if(this.add(a,{proportion:0,padding:u,fitRatio:f}),p&&(p=ri.call(this,a,a,1)),!f){var C=Ht(i,"actionSize");this.setActionSize(Ht(i,"actionWidth",C),Ht(i,"actionHeight",C))}}this.setChildrenAlignMode(h),this.addChildrenMap("background",s),this.addChildrenMap("icon",n),this.addChildrenMap("iconMask",o),this.addChildrenMap("text",r),this.addChildrenMap("action",a),this.addChildrenMap("actionMask",p)}},di=Pw;var Ca=Phaser.Utils.Objects.GetValue,wSt=function(e,t){var i=Ca(t,"canvas"),s=Ca(i,"width",128),n=Ca(i,"height",128),o=new Jr(e,0,0,s,n);e.add.existing(o);var r=Ca(i,"key"),a=Ca(i,"frame"),p=Ca(i,"fill");return p!==void 0?o.fill(p):r!==void 0&&o.loadTexture(r,a),o.setTexture=o.loadTexture.bind(o),o},bSt=function(e,t){var i=new Ff(e,{scaleUp:Ca(t,"scaleUpIcon",!1),background:Ca(t,"iconBackground"),image:wSt(e,t)});return e.add.existing(i),i},f7=bSt;var RSt=Phaser.Utils.Objects.GetValue,ISt=function(e,t){var i=RSt(t,"clickTarget",this);return typeof i=="string"&&(i=e.getElement(i)),i},Nx=ISt;var ASt=Phaser.Utils.Objects.GetValue,OSt=function(e,t){var i=Nx(e,t);if(i){var s=ASt(t,"click"),n=new vs(i,s);return n.on("click",e.open,e),n}},c7=OSt;var DSt={accept:"image/*",multiple:!1},Gx=DSt;var LSt=function(e,t){if(t.length!==0){var i=e.childrenMap.icon,s=i.image,n=t[0];return s.loadFromFilePromise(n).then(function(){return i.scaleImage(),e.emit("select",n,e),Promise.resolve(n)})}},kx=LSt;var FSt=function(e,t){var i=e.scene,s=new Cs(i,Gx);return i.add.existing(s),e.pin(s),s.on("change",function(){kx(e,s.files)}),s},p7=FSt;var v7={openPromise(){return yc(this,null,function*(){var e=this;return Pu(this.scene.game,Gx).then(function(t){return kx(e,t.files)})})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}};var BSt=function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},m7=BSt;var NSt=function(e){var t=this.childrenMap.canvas;return t.generateTexture(e),this},g7=NSt;var x7={getFileName:m7,saveTexture:g7};Object.assign(x7,v7);var y7=x7;var GSt=Phaser.Utils.Objects.GetValue,Vx=class extends di{constructor(t,i){var s=f7(t,i);i.icon=s,super(t,i),this.type="rexImageFileInputLabel";var n=this.iconWidth,o=this.iconWidth;n!==void 0&&o!==void 0&&s.resize(n,o),this.clickTarget=Nx(this,i),this.clickTarget&&(GSt(i,"domButton",!0)?this.fileChooser=p7(this,i):this.clickBehavior=c7(this,i)),this.addChildrenMap("canvas",s.image),this.addChildrenMap("iconBackground",s.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(t,i,s){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(t,i,s)}};Object.assign(Vx.prototype,y7);var Mw=Vx;K.register("imageInputLabel",function(e){var t=new Mw(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ImageInputLabel",Mw);var Sa=gh;var ww=class extends Et{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(ct(t,i))return t[i];var s=t.parent;if(ct(s,i))return s[i]}set(t,i,s){return ct(t,i)?t[i]=s:ct(t.parent,i)&&(t.parent[i]=s),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.parent.setFrame(t)}get scale(){return this.parent.scaleX}set scale(t){this.parent.setScale(t)}},C7=ww;var bw=Phaser.Utils.Objects.GetValue,Aw=class extends Et{constructor(t,i){super(t,i),this.style=bw(i,"style",this);var s=bw(i,"propertiesMap");this.activeStyle=Rw(i,"active",s),this.hoverStyle=Rw(i,"hover",s),this.disableStyle=Rw(i,"disable",s),this.onModifyStyle=bw(i,"onModifyStyle")}getStyle(t){return sa(this.style,t)}modifyStyle(t){for(var i in t)this.style[i]=t[i];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var i=this.getStyle(t);if(!Sn(i,t))return this.modifyStyle(t),i}}setActiveState(t){return Iw.call(this,"active",t),this}setHoverState(t){return Iw.call(this,"hover",t),this}setDisableState(t){return Iw.call(this,"disable",t),this}},Rw=function(e,t,i){var s=Ah(e,t);if(i)for(var n in s)i.hasOwnProperty(n)&&(s[i[n]]=s[n],delete s[n]);return s},Iw=function(e,t){t===void 0&&(t=!0);var i=`${e}State`,s=`${e}Style`,n=`${e}StyleSave`;this[i]!==t&&(this[i]=t,t?this[n]=this.applyStyle(this[s]):(this.applyStyle(this[n]),this[n]=void 0))},S7=Aw;var Wi={addStyleManager(e){return this.styleManager=new S7(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};var kSt=Phaser.GameObjects.Image,kf=Phaser.Utils.Objects.GetValue,Ux=class extends kSt{constructor(t,i){i===void 0&&(i={});var s=kf(i,"x",0),n=kf(i,"y",0),o=kf(i,"key",""),r=kf(i,"frame",void 0);super(t,s,n,o,r),this.type="rexStatesImage";var a=kf(i,"effects",!0);a&&Sa(this,a),this.style=new C7(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(Ux.prototype,Wi);var Go=Ux;K.register("statesImage",function(e){var t=new Go(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesImage",Go);var zx=class extends Qi{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexStatesRoundRectangleShape",i.style=this,i.propertiesMap=VSt,this.addStyleManager(i),delete i.style,delete i.propertiesMap}},VSt={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(zx.prototype,Wi);var ko=zx;K.register("statesRoundRectangle",function(e){var t=new ko(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesRoundRectangle",ko);var Ow=class extends Et{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(ct(t,i))return t[i];var s=t.parent;if(ct(s,i))return s[i]}set(t,i,s){return ct(t,i)?t[i]=s:ct(t.parent,i)&&(t.parent[i]=s),!0}get key(){return this.parent.texture.key}set key(t){this.key!==t&&this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.frame!==t&&this.parent.setFrame(t)}},T7=Ow;var USt=Phaser.GameObjects.NineSlice,rn=Phaser.Utils.Objects.GetValue,Wx=class extends USt{constructor(t,i){i===void 0&&(i={});var s=rn(i,"x",0),n=rn(i,"y",0),o=rn(i,"key",null),r=rn(i,"frame",null),a=rn(i,"width",0),p=rn(i,"height",0),h=rn(i,"leftWidth",0),u=rn(i,"rightWidth",0),f=rn(i,"topHeight",0),l=rn(i,"bottomHeight",0);super(t,s,n,o,r,a,p,h,u,f,l),this.type="rexStatesNineSlice";var d=rn(i,"effects",!0);d&&Sa(this,d),this.style=new T7(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(Wx.prototype,Wi);var Vo=Wx;K.register("statesNineSlice",function(e){var t=new Vo(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesNineSlice",Vo);var Dw=class extends Et{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(ct(t,i))return t[i];var s=t.parent;if(ct(s,i))return s[i]}set(t,i,s){return ct(t,i)?t[i]=s:ct(t.parent,i)&&(t.parent[i]=s),!0}get key(){return this.parent.textureKey}set key(t){this.key!==t&&this.parent.setBaseTexture(t,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(t){this.frame!==t&&this.parent.setBaseTexture(this.parent.textureKey,t)}},E7=Dw;var zSt=Phaser.Utils.Objects.GetValue,Hx=class extends Ud{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexStatesNinePatch";var s=zSt(i,"effects",!0);s&&Sa(this,s),this.style=new E7(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(Hx.prototype,Wi);var Uo=Hx;K.register("statesNinePatch",function(e){var t=new Uo(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesNinePatch",Uo);var WSt=Phaser.GameObjects.Text,Lw=Phaser.Utils.Objects.GetValue,Yx=class extends WSt{constructor(t,i){i===void 0&&(i={});var s=Lw(i,"x",0),n=Lw(i,"y",0),o=Lw(i,"text","");super(t,s,n,o,i),this.type="rexStatesText",i.style=this.style,i.onModifyStyle=function(r,a){var p=a.hasOwnProperty("fontStyle")||a.hasOwnProperty("fontSize")||a.hasOwnProperty("fontFamily");r.style.update(p)},this.addStyleManager(i),delete i.style}};Object.assign(Yx.prototype,Wi);var Vf=Yx;K.register("statesText",function(e){var t=new Vf(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesText",Vf);var Fw=class extends Et{constructor(t,i){return super(t),new Proxy(this,this)}get(t,i){if(ct(t,i))return t[i];var s=t.parent;if(ct(s,i))return s[i]}set(t,i,s){return ct(t,i)?t[i]=s:ct(t.parent,i)&&(t.parent[i]=s),!0}get key(){return this.parent.texture.key}set key(t){this.parent.setTexture(t,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(t){this.parent.setFontSize(t)}get tint(){return this.parent.tintTopLeft}set tint(t){this.parent.setTint(t)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(t){this.parent.setLetterSpacing(t)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(t){this.parent.setLineSpacing(t)}},P7=Fw;var HSt=Phaser.GameObjects.BitmapText,zo=Phaser.Utils.Objects.GetValue,Xx=class extends HSt{constructor(t,i){i===void 0&&(i={});var s=zo(i,"x",0),n=zo(i,"y",0),o=zo(i,"font",""),r=zo(i,"fontSize",!1),a=zo(i,"align",0),p=zo(i,"tint");super(t,s,n,o,"",r,a),this.type="rexStatesBitmapText",p!==void 0&&this.setTint(p);var h=zo(i,"effects",!0);h&&Sa(this,h),this.style=new P7(this,i),i.style=this.style,this.addStyleManager(i),delete i.style}};Object.assign(Xx.prototype,Wi);var Uf=Xx;K.register("statesBitmapText",function(e){var t=new Uf(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesBitmapText",Uf);var $x=class extends pf{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("value")||(i.value=0),i.hasOwnProperty("hover.bar")||(i["hover.bar"]=!0),i.hasOwnProperty("easeDuration")||(i.easeDuration=200),i.hasOwnProperty("ease")||(i.ease="Quad"),Z(i,"easeValue.duration",i.easeDuration),Z(i,"easeValue.ease",i.ease),super(t,i),this.type="rexStatesBarRectangleShape",this.barState=!1,i.style=this,i.propertiesMap=YSt,this.addStyleManager(i),delete i.style,delete i.propertiesMap}get bar(){return this.barState}set bar(t){t=!!t,this.barState!==t&&(this.barState=t,this.easeValueTo(this.barState?1:0))}},YSt={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign($x.prototype,Wi);var zf=$x;K.register("statesBarRectangle",function(e){var t=new zf(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.StatesBarRectangle",zf);var XSt=function(e){if(!window.Chart){var t=`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`;return console.error(t),this}return this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,$St(this,e)),this},$St=function(e,t){t===void 0&&(t={}),t.options===void 0&&(t.options={});var i=t.options;i.responsive=!1,i.maintainAspectRatio=!1,i.hasOwnProperty("devicePixelRatio")||(i.devicePixelRatio=1);var s=!1;i.animation===void 0?i.animation={}:i.animation===!1&&(s=!0,i.animation={});var n=i.animation;s&&(n.duration=0);var o=n.onProgress;n.onProgress=function(a){o&&o(a),e.needRedraw()};var r=n.onComplete;return n.onComplete=function(a){r&&r(a),e.needRedraw()},t},M7=XSt;var jSt=function(e){if(this.chart!==void 0)if(typeof e=="string"){for(var t=this.chart.data.datasets,i,s=0,n=t.length;s<n;s++)if(i=t[s],i.label===e)return i}else return this.chart.data.datasets[e]},w7=jSt;var ZSt=function(e,t){var i=this.getChartDataset(e);if(i!==void 0){if(typeof t=="string"){var s=this.chart.data.labels;if(t=s.indexOf(t),t===-1)return}return i.data[t]}},b7=ZSt;var KSt=function(e,t,i){if(this.chart===void 0)return this;var s=this.getChartDataset(e);if(typeof t=="string"){var n=this.chart.data.labels;if(t=n.indexOf(t),t===-1)return this}return s.data[t]=i,this},R7=KSt;var JSt=function(){return this.chart===void 0?this:(this.chart.update(),this)},I7=JSt;var jx=class extends Jr{constructor(t,i,s,n,o,r){super(t,i,s,n,o),this.type="rexChart",this.chart=void 0,r!==void 0&&this.setChart(r)}destroy(t){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(t))}resize(t,i){if(t===this.width&&i===this.height)return this;if(super.resize(t,i),this.chart){var s=this.chart;s.height=this.canvas.height,s.width=this.canvas.width,s.aspectRatio=s.height?s.width/s.height:null,s.update()}return this}},QSt={setChart:M7,getChartDataset:w7,getChartData:b7,setChartData:R7,updateChart:I7};Object.assign(jx.prototype,QSt);var Bw=jx;K.register("chart",function(e,t,i,s,n){var o=new Bw(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.Chart",Bw);K.register("container",function(e,t,i,s,n){var o=new Di(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.Container",Di);K.register("sizer",function(e,t,i,s,n,o){var r=new ht(this.scene,e,t,i,s,n,o);return this.scene.add.existing(r),r});Z(window,"RexPlugins.UI.Sizer",ht);var qSt=function(){return Array.prototype.reduce.call(arguments,_St,0)},_St=function(e,t){return e+t},Zx=qSt;var tTt=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);for(var t=0,i,s=this.sizerChildren,n,o,r,a,p=!1,h=this.totalColumnProportions,u=0;u<this.columnCount;u++){if(a=this.columnProportions[u],i=0,a===0||e){for(var f=0;f<this.rowCount;f++)n=s[f*this.columnCount+u],n&&(n.rexSizer.hidden||(r=this.getChildWidth(n),r===void 0&&(a!==0&&!this.hasColumnProportion0Child?r=0:p=!0),!p&&(o=n.rexSizer.padding,r+=(o.left+o.right)*this.scaleX,i=Math.max(i,r))));p||(t+=i)}p||e&&(this.columnWidth[u]=i)}if(!p){var l=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven),d=Zx(this.space.left,l,...this.space.column,this.space.right);return t+d*this.scaleX}},A7=tTt;var eTt=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);for(var t=0,i,s=this.sizerChildren,n,o,r,a,p=!1,h=this.totalRowProportions,u=0;u<this.rowCount;u++){if(a=this.rowProportions[u],i=0,a===0||e){for(var f=0;f<this.columnCount;f++)n=s[u*this.columnCount+f],n&&(n.rexSizer.hidden||(r=this.getChildHeight(n),r===void 0&&(a!==0&&!this.hasRowProportion0Child?r=0:p=!0),!p&&(o=n.rexSizer.padding,r+=(o.top+o.bottom)*this.scaleY,i=Math.max(i,r))));p||(t+=i)}p||e&&(this.rowHeight[u]=i)}if(!p){var l=Math.max(this.space.indentTopOdd,this.space.indentTopEven),d=Zx(this.space.top,l,...this.space.row,this.space.bottom);return t+d*this.scaleY}},O7=eTt;var iTt=function(e,t){var i,s=e.rexSizer;if(s.expandWidth){var n=s.padding;i=t-(n.left+n.right)*this.scaleX}return i},D7=iTt;var rTt=function(e,t){var i,s=e.rexSizer;if(s.expandHeight){var n=s.padding;i=t-(n.top+n.bottom)*this.scaleY}return i},L7=rTt;var nTt=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,s=0,n=t.length;s<n;s++)i=t[s],i&&i.isRexSizer&&e.push(i);return e},F7=nTt;var sTt=function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,On.call(this),this},B7=sTt;var aTt=function(){for(var e,t,i,s=this.innerLeft,n=this.innerTop,o,r=n,a,p,h,u,f,l,d,v,c,m,g,y,x=0;x<this.rowCount;x++){m=this.getRowHeight(x),g=x%2?this.space.indentLeftEven:this.space.indentLeftOdd,o=s+g*this.scaleX;for(var C=0;C<this.columnCount;C++){if(c=this.getColumnWidth(C),e=this.getChildAt(C,x),!e||e.rexSizer.hidden){o+=c+this.space.column[C]*this.scaleX;continue}Fn.call(this,e),d=this.getExpandedChildWidth(e,c),v=this.getExpandedChildHeight(e,m),e.isRexSizer?(e.runLayout(this,d,v),xu(e,this)):ne(e,d,v),t=e.rexSizer,i=t.padding,a=o+i.left*this.scaleX,h=c-(i.left+i.right)*this.scaleX,y=C%2?this.space.indentTopEven:this.space.indentTopOdd,p=r+y*this.scaleY+i.top*this.scaleY,u=m-(i.top+i.bottom)*this.scaleY,d===void 0&&(d=mt(e)),v===void 0&&(v=gt(e)),f=(t.alignOffsetX+t.alignOffsetOriginX*d)*this.scaleX,l=(t.alignOffsetY+t.alignOffsetOriginY*v)*this.scaleY,Bn.call(this,e,a,p,h,u,t.align,f,l),o+=c+this.space.column[C]*this.scaleX}r+=m+this.space.row[x]*this.scaleY}},N7=aTt;var oTt=function(t){var t=Qh.call(this,t);if(t!==void 0&&this.proportionWidthLength===void 0){var i=this.totalColumnProportions;if(i>0){var s=t-this.getChildrenWidth(!1);s>=0&&(this.proportionWidthLength=s/i)}else this.proportionWidthLength=0}return t},G7=oTt;var lTt=function(t){var t=tu.call(this,t);if(t!==void 0&&this.proportionHeightLength===void 0){var i=this.totalRowProportions;if(i>0){var s=t-this.getChildrenHeight(!1);s>=0&&(this.proportionHeightLength=s/i)}else this.proportionHeightLength=0}return t},k7=lTt;var hTt=function(e){var t,i,s,n;for(var o in this.sizerChildren)t=this.sizerChildren[o],t&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getColumnWidth(parseInt(o)%this.columnCount),i=this.getExpandedChildWidth(t,n),s=t.resolveWidth(i),s===void 0&&(s=i),t.resolveChildrenWidth(s))},V7=hTt;var uTt=function(e){var t,i,s,n;for(var o in this.sizerChildren)t=this.sizerChildren[o],t&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getRowHeight(Math.floor(parseInt(o)/this.rowCount)),i=this.getExpandedChildHeight(t,n),s=t.resolveHeight(i),s===void 0&&(s=i),t.resolveChildrenHeight(s))},U7=uTt;var dTt=function(e){var t,i,s,n;for(var o in this.sizerChildren)t=this.sizerChildren[o],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap)&&(n=this.getColumnWidth(parseInt(o)%this.columnCount),i=this.getExpandedChildWidth(t,n),t.isRexSizer&&(s=t.resolveWidth(i),s===void 0&&(s=i)),t.runWidthWrap(s));return this},z7=dTt;var fTt=function(e){var t,i,s,n;for(var o in this.sizerChildren)t=this.sizerChildren[o],!(!t||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap)&&(n=this.getRowHeight(Math.floor(parseInt(o)/this.rowCount)),i=this.getExpandedChildHeight(t,n),t.isRexSizer&&(s=t.resolveHeight(i),s===void 0&&(s=i)),t.runHeightWrap(s));return this},W7=fTt;var H7=Phaser.Utils.Objects.IsPlainObject,Dr=Phaser.Utils.Objects.GetValue,Y7=Phaser.Display.Align.CENTER,X7=function(e,t,i,s,n){if(typeof e=="number"||typeof t=="number")if(e===void 0){for(var o,r=0;r<s;r++)if(o=t*s+r,!i[o])return o}else if(t===void 0){for(var o,r=0;r<n;r++)if(o=r*s+e,!i[o])return o}else{var o=t*s+e;if(!i[o])return o}else if(t===!0){for(var o,r=0;r<s;r++)for(var a=0;a<n;a++)if(o=a*s+r,!i[o])return o}else for(var r=0,p=i.length;r<p;r++)if(!i[r])return r;return null},cTt=function(e,t,i,s,n,o,r){var a,p,h,u;if(In.call(this,e),H7(t)){var l=t;t=Dr(l,"column",void 0),i=Dr(l,"row",void 0),s=Dr(l,"align",Y7),n=Dr(l,"padding",0),o=Dr(l,"expand",!1),r=Dr(l,"key",void 0),a=Dr(l,"offsetX",0),p=Dr(l,"offsetY",0),h=Dr(l,"offsetOriginX",0),u=Dr(l,"offsetOriginY",0)}var f=X7(t,i,this.sizerChildren,this.columnCount,this.rowCount);if(f===null){if(typeof t=="number"&&typeof i=="number")return this;i===!0||typeof i=="number"?this.addEmptyColumn():this.addEmptyRow(),f=X7(t,i,this.sizerChildren,this.columnCount,this.rowCount)}typeof s=="string"&&(s=Mn[s]),s===void 0&&(s=Y7),n===void 0&&(n=0),o===void 0&&(o=!0),a===void 0&&(a=0),p===void 0&&(p=0),h===void 0&&(h=0),u===void 0&&(u=0);var l=this.getSizerConfig(e);return l.align=s,l.padding=Pr(n),H7(o)?(l.expandWidth=Dr(o,"width",!1),l.expandHeight=Dr(o,"height",!1)):(l.expandWidth=o,l.expandHeight=o),l.alignOffsetX=a,l.alignOffsetY=p,l.alignOffsetOriginX=h,l.alignOffsetOriginY=u,this.sizerChildren[f]=e,r!==void 0&&this.addChildrenMap(r,e),this},$7={add:cTt};var pTt=function(e,t,i,s){i===void 0&&(i=0),s===void 0&&(s=e.length-1);for(var n=i;n<=s;n++)e[n]=t;return e},Ts=pTt;var j7={remove(e,t){if(this.getParentSizer(e)!==this)return this;var i=this.sizerChildren.indexOf(e);return i!==-1&&(this.sizerChildren[i]=null),An.call(this,e,t),this},removeAt(e,t,i){var s=this.getChildAt(e,t);return s&&this.remove(s,i),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var i=this.sizerChildren[t];i&&this.remove(i,e)}return this},clear(e){return Ts(this.sizerChildren,null),ga.call(this,e),this}};var Z7={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")this.space.column0=e,Ts(this.space.column,e);else{this.space.column0=e[0];for(var t=0,i=this.columnCount-1;t<i;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")this.space.row0=e,Ts(this.space.row,e);else{this.space.row0=e[t];for(var t=0,i=this.rowCount-1;t<i;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}};var K7=Phaser.Utils.Objects.GetValue,vTt=function(e,t,i,s,n){if(e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,Ts(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof i=="number")Ts(this.columnProportions,i);else for(var o=0;o<e;o++)this.columnProportions[o]=i[o]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof s=="number")Ts(this.rowProportions,s);else for(var o=0;o<t;o++)this.rowProportions[o]=s[o]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(K7(n,"column",0)),this.setRowSpace(K7(n,"row",0));var r=this.scene,a=this.createCellContainerCallback;if(a)for(var p=0,h=this.rowCount;p<h;p++)for(var u=0,f=this.columnCount;u<f;u++){var l={column:u,row:p},d=a(r,u,p,l);d&&this.add(d,l)}return this},J7=vTt;var Nw=function(e,t,i){t===void 0&&(t=this.rowProportions[0]||0),i===void 0&&(i=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var s=[e*this.columnCount,0],n=0;n<this.columnCount;n++)s.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,s),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,i),this},Q7=function(e,t){return Nw.call(this,this.rowCount,e,t),this};var Gw=function(e,t,i){t===void 0&&(t=this.columnProportions[0]||0),i===void 0&&(i=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var s=this.rowCount-1;s>=0;s--){var n=s*this.columnCount+e;this.sizerChildren.splice(n,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,i),this},q7=function(e,t){return Gw.call(this,this.columnCount,e,t),this};var _7={getChildrenWidth:A7,getChildrenHeight:O7,getExpandedChildWidth:D7,getExpandedChildHeight:L7,getChildrenSizers:F7,preLayout:B7,layoutChildren:N7,resolveWidth:G7,resolveHeight:k7,resolveChildrenWidth:V7,resolveChildrenHeight:U7,runWidthWrap:z7,runHeightWrap:W7,resetGrid:J7,insertEmptyRow:Nw,addEmptyRow:Q7,insertEmptyColumn:Gw,addEmptyColumn:q7};Object.assign(_7,$7,j7,Z7,Mu);var tH=_7;var mTt=function(){for(var e=0,t,i=0;i<this.columnCount;i++)t=this.columnProportions[i],t>0?e+=t:t===0&&(this.hasColumnProportion0Child=!0);return e},eH=mTt;var gTt=function(){for(var e=0,t,i=0;i<this.rowCount;i++)t=this.rowProportions[i],t>0?e+=t:t===0&&(this.hasRowProportion0Child=!0);return e},iH=gTt;var Kx=Phaser.Utils.Objects.IsPlainObject,me=Phaser.Utils.Objects.GetValue,Jx=class extends Ir{constructor(t,i,s,n,o,r,a,p,h,u){Kx(i)?(u=i,i=me(u,"x",0),s=me(u,"y",0),n=me(u,"width",void 0),o=me(u,"height",void 0),r=me(u,"column",u.col||0),a=me(u,"row",0),p=me(u,"columnProportions",0),h=me(u,"rowProportions",0)):Kx(n)?(u=n,n=me(u,"width",void 0),o=me(u,"height",void 0),r=me(u,"column",u.col||0),a=me(u,"row",0),p=me(u,"columnProportions",0),h=me(u,"rowProportions",0)):Kx(r)?(u=r,r=me(u,"column",u.col||0),a=me(u,"row",0),p=me(u,"columnProportions",0),h=me(u,"rowProportions",0)):Kx(p)&&(u=p,p=me(u,"columnProportions",0),h=me(u,"rowProportions",0)),super(t,i,s,n,o,u),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(me(u,"createCellContainerCallback")),this.setIndentLeft(me(u,"space.indentLeftOdd",0),me(u,"space.indentLeftEven",0)),this.setIndentTop(me(u,"space.indentTopOdd",0),me(u,"space.indentTopEven",0)),this.resetGrid(r,a,p,h,me(u,"space",void 0))}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,i){return t>=this.columnProportions.length?this:(this.columnProportions[t]=i,this)}setRowProportion(t,i){return t>=this.rowProportions.length?this:(this.rowProportions[t]=i,this)}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=eH.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=iH.call(this)),this._totalRowProportions}getChildAt(t,i){return this.sizerChildren[i*this.columnCount+t]}childToGridIndex(t,i){if(!t)return null;var s=this.sizerChildren.indexOf(t);return s===-1?null:(i===void 0&&(i={}),i.x=s%this.columnCount,i.y=Math.floor(s/this.columnCount),i)}getColumnWidth(t){var i=this.columnProportions[t],s=i===0?this.columnWidth[t]:i*this.proportionWidthLength;return s}getRowHeight(t){var i=this.rowProportions[t],s=i===0?this.rowHeight[t]:i*this.proportionHeightLength;return s}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}};Object.assign(Jx.prototype,tH);var fi=Jx;K.register("gridSizer",function(e,t,i,s,n,o,r,a,p){var h=new fi(this.scene,e,t,i,s,n,o,r,a,p);return this.scene.add.existing(h),h});Z(window,"RexPlugins.UI.GridSizer",fi);var xTt=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===0?e?t=this.maxChildWidth:t=this.rexSizer.resolved?this.wrapResult.width:void 0:t=this.rexSizer.resolved?this.wrapResult.width:void 0,t!==void 0)return t+(this.space.left+this.space.right)*this.scaleX},rH=xTt;var yTt=function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t;if(this.orientation===1?e?t=this.maxChildHeight:t=this.rexSizer.resolved?this.wrapResult.height:void 0:t=this.rexSizer.resolved?this.wrapResult.height:void 0,t!==void 0)return t+(this.space.top+this.space.bottom)*this.scaleY},nH=yTt;var CTt=function(e){e===void 0&&(e=[]);for(var t=this.sizerChildren,i,s=0,n=t.length;s<n;s++)i=t[s],i!==`
`&&i.isRexSizer&&e.push(i);return e},sH=CTt;var STt=function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,On.call(this),this},aH=STt;var TTt=function(){for(var e=this.orientation===0,t=e?this.innerWidth:this.innerHeight,i,s,n,o=0,r,a,p=this.innerLeft,h=this.innerTop,u,f,l,d,v,c,m=this.wrapResult.lines,g,y,x,C=p,S=h,E=0,T=m.length;E<T;E++){switch(g=m[E],y=g.children,this.rtl&&y.reverse(),e?(r=E%2?this.space.indentLeftEven:this.space.indentLeftOdd,C=p+r*this.scaleX):(a=E%2?this.space.indentTopEven:this.space.indentTopOdd,S=h+a*this.scaleY),x=t-(e?g.width:g.height),this.align){case 0:break;case 1:e?C+=x:S+=x;break;case 2:e?C+=x/2:S+=x/2;break;case 3:o=kw(t,x,this.justifyPercentage,y.length);break;case 4:o=kw(t,x,this.justifyPercentage,y.length),o===0&&(e?C+=x:S+=x);break;case 5:o=kw(t,x,this.justifyPercentage,y.length),o===0&&(e?C+=x/2:S+=x/2);break}for(var P=!0,M=0,w=y.length;M<w;M++)i=y[M],!i.rexSizer.hidden&&(s=i.rexSizer,n=s.padding,Fn.call(this,i),e?u=C+n.left*this.scaleX:f=S+n.top*this.scaleY,P?P=!1:e?u+=this.space.item*this.scaleX:f+=this.space.item*this.scaleY,l=mt(i),d=gt(i),e?(a=M%2?this.space.indentTopEven:this.space.indentTopOdd,f=S+a*this.scaleY+n.top*this.scaleY,C=u+l+n.right*this.scaleX+o):(r=M%2?this.space.indentLeftEven:this.space.indentLeftOdd,u=C+r*this.scaleX+n.left*this.scaleX,S=f+d+n.top*this.scaleY+o),v=(s.alignOffsetX+s.alignOffsetOriginX*l)*this.scaleX,c=(s.alignOffsetY+s.alignOffsetOriginY*d)*this.scaleY,Bn.call(this,i,u,f,l,d,s.align,v,c));e?S+=g.height+this.space.line*this.scaleY:C+=g.width+this.space.line*this.scaleX}},kw=function(e,t,i,s){return t/e<=i?t/(s-1):0},oH=TTt;var ETt=function(){return this.orientation===0?!0:qh.call(this)},lH=ETt;var PTt=function(e){var t={lines:[],width:0,height:0},i=this.sizerChildren,s,n,o,r,a=0,p,h,u=t.lines,f=void 0,l;if(this.orientation===0){for(var d=0,v=i.length;d<v;d++){if(s=i[d],s===`
`)s=void 0,o=0,l=!0;else{if(s.rexSizer.hidden)continue;s.isRexSizer&&s.runLayout(this),o=this.getChildWidth(s),n=s.rexSizer.padding,o+=(n.left+n.right)*this.scaleX,l=a<o||f===void 0}l&&(f&&(f.width=e-(a+this.space.item*this.scaleX),t.width=Math.max(t.width,f.width),t.height+=f.height+this.space.line*this.scaleY),f={children:[],width:0,height:0},u.push(f),p=u.length%2?this.space.indentLeftOdd:this.space.indentLeftEven,a=e-p*this.scaleX),a-=o+this.space.item*this.scaleX,s&&(f.children.push(s),r=this.getChildHeight(s),n=s.rexSizer.padding,r+=(n.top+n.bottom)*this.scaleY,f.height=Math.max(f.height,r))}f&&(f.width=e-(a+this.space.item*this.scaleX),t.width=Math.max(t.width,f.width),t.height+=f.height),t.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{for(var c=e,d=0,v=i.length;d<v;d++){if(s=i[d],s===`
`)s=void 0,o=0,l=!0;else{if(s.rexSizer.hidden)continue;s.isRexSizer&&s.layout(),r=this.getChildHeight(s),n=s.rexSizer.padding,r+=(n.top+n.bottom)*this.scaleY,l=a<r||f===void 0}l&&(f&&(f.height=c-(a+this.space.item*this.scaleY),t.height=Math.max(t.height,f.height),t.width+=f.width+this.space.line*this.scaleX),f={children:[],width:0,height:0},u.push(f),h=u.length%2?this.space.indentTopOdd:this.space.indentTopEven,a=c-h*this.scaleY),a-=r+this.space.item*this.scaleY,s&&(f.children.push(s),o=this.getChildWidth(s),n=s.rexSizer.padding,o+=(n.left+n.right)*this.scaleX,f.width=Math.max(f.width,o))}f&&(f.height=c-(a+this.space.item*this.scaleY),t.height=Math.max(t.height,f.height),t.width+=f.width),t.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return t},Qx=PTt;var MTt=function(e){if(!this.wrapResult&&this.orientation===0){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=Qx.call(this,t),this.rexSizer.resolved=!0,_h.call(this,e)}},hH=MTt;var wTt=function(){return this.orientation===1?!0:eu.call(this)},uH=wTt;var bTt=function(e){if(!this.wrapResult&&this.orientation===1){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=Qx.call(this,t),this.rexSizer.resolved=!0,iu.call(this,e)}},dH=bTt;var RTt=function(e,t){},fH=RTt;var ITt=function(e,t){},cH=ITt;var pH=Phaser.Math.Distance.Between,ATt=function(e,t){var i=this.sizerChildren;if(i.length===0)return-1;for(var s=-1,n=1/0,o=0,r=i.length;o<r;o++){var a=i[o];if(!(Math.abs(a.centerY-t)>a.height/2)){var h=pH(a.left,a.centerY,e,t);n>h&&(n=h,s=o);var p=i[o+1];if(!(p&&p.y===a.y)){var h=pH(a.right,a.centerY,e,t);n>h&&(n=h,s=o+1)}}}return s},vH=ATt;var OTt=Phaser.Utils.Objects.IsPlainObject,Wo=Phaser.Utils.Objects.GetValue,DTt=Phaser.Display.Align.CENTER,Vw=function(e,t,i,s){if(e===`
`)return this.addNewLine(),this;var n,o,r,a;if(In.call(this,e),OTt(t)){var p=t;t=Wo(p,"padding",0),i=Wo(p,"key",void 0),s=Wo(p,"index",void 0),n=Wo(p,"offsetX",0),o=Wo(p,"offsetY",0),r=Wo(p,"offsetOriginX",0),a=Wo(p,"offsetOriginY",0)}t===void 0&&(t=0),n===void 0&&(n=0),o===void 0&&(o=0),r===void 0&&(r=0),a===void 0&&(a=0);var p=this.getSizerConfig(e);return p.align=DTt,p.padding=Pr(t),p.alignOffsetX=n,p.alignOffsetY=o,p.alignOffsetOriginX=r,p.alignOffsetOriginY=a,s===void 0||s>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(s,0,e),i!==void 0&&this.addChildrenMap(i,e),this},mH={add(e,t,i){if(Ne(e))for(var s=e,n=0,o=s.length;n<o;n++)Vw.call(this,s[n],t);else Vw.call(this,e,t,i);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,i,s){return Vw.call(this,t,i,s,e),this},insertAtPosition(e,t,i,s,n){var o=vH.call(this,e,t);return o===-1&&(o=void 0),this.insert(o,i,s,n),this}};var LTt=Phaser.Utils.Array.Remove,gH={remove(e,t){return this.getParentSizer(e)!==this?this:(LTt(this.sizerChildren,e),An.call(this,e,t),this)},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,ga.call(this,e),this}};var xH={getChildrenWidth:rH,getChildrenHeight:nH,getChildrenSizers:sH,preLayout:aH,layoutChildren:oH,hasWidthWrap:lH,runWidthWrap:hH,hasHeightWrap:uH,runHeightWrap:dH,getExpandedChildWidth:fH,getExpandedChildHeight:cH};Object.assign(xH,mH,gH,Mu);var yH=xH;var FTt=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,s,n=!1,o=0,r=e.length;o<r;o++)i=e[o],i!==`
`&&(s=this.getChildWidth(i),s===void 0&&(n=!0),!n&&(t=Math.max(s,t)));if(!n)return t},CH=FTt;var BTt=function(e){e===void 0&&(e=this.sizerChildren);for(var t=0,i,s,n=!1,o=0,r=e.length;o<r;o++)i=e[o],i!==`
`&&(s=this.getChildHeight(i),s===void 0&&(n=!0),!n&&(t=Math.max(s,t)));if(!n)return t},SH=BTt;var TH=Phaser.Utils.Objects.IsPlainObject,Ei=Phaser.Utils.Objects.GetValue,qx=class extends Ir{constructor(t,i,s,n,o,r){TH(i)?(r=i,i=Ei(r,"x",0),s=Ei(r,"y",0),n=Ei(r,"width",void 0),o=Ei(r,"height",void 0)):TH(n)&&(r=n,n=Ei(r,"width",void 0),o=Ei(r,"height",void 0)),super(t,i,s,n,o,r),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(Ei(r,"orientation",0)),this.setItemSpacing(Ei(r,"space.item",0)),this.setLineSpacing(Ei(r,"space.line",0)),this.setIntentLeft(Ei(r,"space.indentLeftOdd",0),Ei(r,"space.indentLeftEven",0)),this.setIntentTop(Ei(r,"space.indentTopOdd",0),Ei(r,"space.indentTopEven",0)),this.setAlign(Ei(r,"align",0)),this.setJustifyPercentage(Ei(r,"justifyPercentage",.25)),this.setRTL(Ei(r,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Ar(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,i){return this.space.indentLeftOdd=t,this.space.indentLeftEven=i,this}setIntentTop(t,i){return this.space.indentTopOdd=t,this.space.indentTopEven=i,this}setAlign(t){return typeof t=="string"&&(t=NTt[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=CH.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=SH.call(this)),this._maxChildHeight}},NTt={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(qx.prototype,yH);var Lr=qx;K.register("fixWidthSizer",function(e,t,i,s,n){var o=new Lr(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.FixWidthSizer",Lr);K.register("overlapSizer",function(e,t,i,s,n){var o=new Ge(this.scene,e,t,i,s,n);return this.scene.add.existing(o),o});Z(window,"RexPlugins.UI.OverlapSizer",Ge);K.register("space",function(){var e=new Bf(this.scene);return e});Z(window,"RexPlugins.UI.Space",Bf);K.register("label",function(e){var t=new di(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Label",di);var EH=["alpha","tint","flipX","flipY"],GTt=function(e,t){if(!t)return e;for(var i=0,s=EH.length;i<s;i++){var n=EH[i];n in t&&n in e&&(e[n]=t[n])}if("origin"in t&&"originX"in e)e.setOrigin(t.origin);else{var o,r;"originX"in t&&"originX"in e&&(o=t.originX),"originY"in t&&"originY"in e&&(r=t.originY),o!==void 0&&r!==void 0&&e.setOrigin(o,r)}return e},Ru=GTt;var kTt=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("barColor")?i="bar":t.hasOwnProperty("leftWidth")?i="nineSlice":t.hasOwnProperty("key")&&(i="image"));var s;switch(i){case"bar":s=new zf(e,t);break;case"image":s=new Go(e,t);break;case"nineSlice":t.hasOwnProperty("stretchMode")?s=new Uo(e,t):s=new Vo(e,t);break;default:s=new ko(e,t);break}return Ru(s,t),e.add.existing(s),s},Zt=kTt;var VTt=function(){switch(this.scrollMode){case 0:case 1:Uw.call(this),this.updateController(),zw.call(this),Ww.call(this);break;default:Uw.call(this,"y"),Uw.call(this,"x"),this.updateController(),zw.call(this,"y"),zw.call(this,"x"),Ww.call(this,"y"),Ww.call(this,"x");break}return this},Uw=function(e){var t,i,s,n;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,i=this.bottomChildOY,s=this.childrenMap.scroller,n=this.childrenMap.slider,e=this.scrollMode===0?"Y":"X";break;default:e=e.toUpperCase(),e==="Y"?(t=this.topChildOY,i=this.bottomChildOY):(t=this.leftChildOX,i=this.rightChildOX),s=this.childrenMap[`scroller${e}`],n=this.childrenMap[`slider${e}`]}var o=e==="Y"?this.scaleY:this.scaleX;i*=o,s&&s.setBounds(t,i),n&&(n.setEnable(t!==i),n.tickLength&&n.setTick(n.tickLength,t,i))},zw=function(e){switch(this.scrollMode){case 0:case 1:var i=this.childrenMap.slider;i&&this.hideUnscrollableSlider&&this.setChildVisible(i,this.isOverflow);var n=this.childrenMap.scroller;n&&this.disableUnscrollableDrag&&n.setEnable(this.isOverflow);break;default:e=e.toUpperCase();var t=this[`isOverflow${e}`],i=this.childrenMap[`slider${e}`],s=this[`hideUnscrollableSlider${e}`];i&&s&&this.setChildVisible(i,t);var n=this.childrenMap.scroller,o=this[`disableUnscrollableDrag${e}`];n&&o&&n.setEnable(t);break}},Ww=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode)return;var o=this.childrenMap.slider;if(!o)return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),r=o.childrenMap.track,a=o.childrenMap.thumb,p=this.minThumbSize;if(this.scrollMode===0){var i=r.displayHeight*t;p!==void 0&&i<p&&(i=p),ne(a,void 0,i)}else{var s=r.displayWidth*t;p!==void 0&&s<p&&(s=p),ne(a,s,void 0)}PH(o);break;default:e=e.toUpperCase();var n=this[`adaptThumb${e}SizeMode`];if(!n)return;var o=this.childrenMap[`slider${e}`];if(!o)return;var r=o.childrenMap.track,a=o.childrenMap.thumb,p=this[`minThumb${e}Size`];if(e==="Y"){var t=Math.min(this.childVisibleHeight/this.childHeight,1),i=r.displayHeight*t;p!==void 0&&i<p&&(i=p),ne(a,void 0,i)}else{var t=Math.min(this.childVisibleWidth/this.childWidth,1),s=r.displayWidth*t;p!==void 0&&s<p&&(s=p),ne(a,s,void 0)}PH(o);break}},PH=function(e){var t=e.minWidth,i=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=i},MH=VTt;var UTt=function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var i=this.childrenMap.scrollerY,s=this.childrenMap.sliderY,n=this.childrenMap.scrollerX,o=this.childrenMap.sliderX;i&&i.setValue(this.childOY),s&&s.setValue(this.t),n&&n.setValue(this.childOX),o&&o.setValue(this.s);break}},wH=UTt;var _x=Phaser.Math.Clamp,bH={setChildOY(e,t){return t===void 0&&(t=!1),t&&(e=_x(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return t===void 0&&(t=!1),t&&(e=_x(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this},setChildOX(e,t){return t===void 0&&(t=!1),t&&(e=_x(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return t===void 0&&(t=!1),t&&(e=_x(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}};var RH={resizeController:MH,updateController:wH};Object.assign(RH,bH);var IH=RH;var ty={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2};var zTt=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=WTt(e));var i=e[t];return typeof i=="string"&&(i=ty[i]),i},WTt=function(e){var t=!!e.sliderY||!!e.scrollerY,i=!!e.sliderX||!!e.scrollerX,s;return t&&i?s=2:t?s=0:i?s=1:s=0,s},Iu=zTt;var ni=Phaser.Utils.Objects.GetValue,HTt=function(e,t,i){var s=ni(i,"child"),n=ni(s,"gameObject",void 0);if(n){var o=ni(i,"space.child",0);e.childMargin={};var r=e.childMargin,a={};if(typeof o=="number")switch(e.scrollMode){case 0:case 1:r.top=0,r.bottom=0,r.left=0,r.right=0;break;default:r.top=o,r.bottom=o,r.left=o,r.right=o;break}else switch(e.scrollMode){case 0:r.top=ni(o,"top",0),r.bottom=ni(o,"bottom",0),a.left=ni(o,"left",0),a.right=ni(o,"right",0);break;case 1:r.top=ni(o,"left",0),r.bottom=ni(o,"right",0),a.top=ni(o,"top",0),a.bottom=ni(o,"bottom",0);break;default:r.top=ni(o,"top",0),r.bottom=ni(o,"bottom",0),r.left=ni(o,"left",0),r.right=ni(o,"right",0);break}t.add(n,{column:1,row:1,align:ni(s,"align","center"),padding:a,expand:{width:ni(s,"expandWidth",!0),height:ni(s,"expandHeight",!0)}})}e.addChildrenMap("child",n)},AH=HTt;var OH=Phaser.Math.Percent,YTt=function(e,t,i){var s;return e.y===t.y?s=OH(i.x,e.x,t.x):e.x===t.x&&(s=OH(i.y,e.y,t.y)),s},DH=YTt;var XTt=function(e,t){Hw.x=e,Hw.y=t;var i,s;this.reverseAxis?(i=this.getEndPoint(),s=this.getStartPoint()):(i=this.getStartPoint(),s=this.getEndPoint());var n=DH(i,s,Hw);return n},Hw={},ey=XTt;var $Tt=function(e,t,i){!this.enable||!this.inputActive||(this.value=ey.call(this,t,i))},LH=$Tt;var jTt=function(e){if(!(!this.enable||!this.inputActive)&&e.isDown){var t=ey.call(this,e.worldX,e.worldY);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}},iy=jTt;var ZTt=Phaser.Utils.Objects.GetValue,KTt=function(e){this.inputActive=!1;var t=ZTt(e,"input",0);typeof t=="string"&&(t=JTt[t]);var i=this.childrenMap.thumb;switch(t){case 0:i&&(i.setInteractive(),this.scene.input.setDraggable(i),i.on("dragstart",function(n){this.inputActive=!0,this.eventEmitter.emit("inputstart",n)},this).on("dragend",function(n){this.inputActive=!1,this.eventEmitter.emit("inputend",n)},this).on("drag",LH,this));break;case 1:this.setInteractive().on("pointerdown",function(n){this.inputActive=!0,this.eventEmitter.emit("inputstart",n)},this).on("pointerdown",iy,this);var s=function(n){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",n))};this.scene.input.on("pointerup",s,this).on("pointermove",iy,this),this.once("destroy",function(){this.scene.input.on("pointerup",s,this).off("pointermove",iy,this)},this);break}},JTt={pan:0,drag:0,click:1,none:-1},FH=KTt;var QTt=function(e,t){t===void 0&&(t=qTt);var i=this.childrenMap.thumb,s=i.x,n=i.y;return Rn(i,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=i.x,t.y=i.y,i.x=s,i.y=n,t},qTt={},ry=QTt;var _Tt=Phaser.Display.Align.LEFT_CENTER,tEt=Phaser.Display.Align.TOP_CENTER,eEt=function(e){if(e===void 0&&(e=iEt),this.childrenMap.thumb){var t=this.orientation===0?_Tt:tEt;ry.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},iEt={},BH=eEt;var rEt=Phaser.Display.Align.RIGHT_CENTER,nEt=Phaser.Display.Align.BOTTOM_CENTER,sEt=function(e){if(e===void 0&&(e=aEt),this.childrenMap.thumb){var t=this.orientation===0?rEt:nEt;ry.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},aEt={},NH=sEt;var GH=Phaser.Math.Linear,oEt=function(e,t,i,s){return s===void 0&&(s=lEt),s.x=GH(t.x,i.x,e),s.y=GH(t.y,i.y,e),s},lEt={},kH=oEt;var hEt=function(e){var t=this.childrenMap.thumb;if(t===void 0)return this;e===void 0&&(e=this.value);var i,s;return this.reverseAxis?(i=this.getEndPoint(),s=this.getStartPoint()):(i=this.getStartPoint(),s=this.getEndPoint()),kH(e,i,s,t),t.x+=this.thumbOffsetX,t.y+=this.thumbOffsetY,this.resetChildPositionState(t),this},VH=hEt;var uEt=Phaser.Display.Align.LEFT_CENTER,dEt=Phaser.Display.Align.TOP_CENTER,fEt=Phaser.Display.Align.RIGHT_CENTER,cEt=Phaser.Display.Align.BOTTOM_CENTER,pEt=function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var i=this.reverseAxis,s,n,o=this.childrenMap.thumb;if(o)if(this.orientation===0){var r=mt(o);if(i){var a=o.x-r*o.originX;s=this.right-a}else{var a=o.x-r*o.originX,p=a+r;s=p-this.left}}else{var h=gt(o);if(i){var u=o.y-h*o.originY;n=this.bottom-u}else{var u=o.y-h*o.originY,f=u+h;n=f-this.top}}else this.orientation===0?s=this.width*e:n=this.height*e;ne(t,s,n);var l;i?l=this.orientation===0?fEt:cEt:l=this.orientation===0?uEt:dEt,b0(t,this,l),this.resetChildPositionState(t)},UH=pEt;var ar=Phaser.Utils.Objects.GetValue,ny=Phaser.Utils.Objects.IsPlainObject,vEt=Phaser.Math.Clamp,mEt=Phaser.Math.Snap.To,sy=class extends Ci(ht){constructor(t,i){super(t,i),this.type="rexSlider",this.bootProgressBase(i),this.reverseAxis=ar(i,"reverseAxis",!1);var s=ar(i,"background",void 0),n=ar(i,"track",void 0),o=ar(i,"indicator",void 0),r=ar(i,"thumb",void 0);if(s&&(ny(s)&&(s=Zt(t,s)),this.addBackground(s)),n&&(ny(n)&&(n=Zt(t,n)),this.add(n,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),o&&(ny(o)&&(o=Zt(t,o)),this.pin(o)),r){ny(r)&&(r=Zt(t,r)),this.pin(r);var a=ar(i,"thumbOffsetX",0),p=ar(i,"thumbOffsetY",0);this.setThumbOffset(a,p)}this.addChildrenMap("background",s),this.addChildrenMap("track",n),this.addChildrenMap("indicator",o),this.addChildrenMap("thumb",r),this.setEnable(ar(i,"enable",void 0));var h=ar(i,"tick",void 0);h===void 0&&(h=ar(i,"gap",void 0)),this.setGap(h),FH.call(this,i),this.setValue(ar(i,"value",0),ar(i,"min",void 0),ar(i,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,i,s){return t&&i!==void 0&&(t=t/(s-i)),this.gap=t,this}setTick(t,i,s){return this.setGap(t,i,s),this}get tick(){return this.gap}set tick(t){this.gap=t}setThumbOffset(t,i){return this.thumbOffsetX=t,this.thumbOffsetY=i,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=mEt(t,this.gap));var i=this._value;this._value=vEt(t,0,1),i!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,i,this.eventEmitter))}postLayout(t,i,s){return this.updateThumb(),this.updateIndicator(),super.postLayout(t,i,s),this}},gEt={getStartPoint:BH,getEndPoint:NH,updateThumb:VH,updateIndicator:UH};Object.assign(sy.prototype,gEt);var Es=sy;var Hi=Phaser.Utils.Objects.GetValue,Yw=class extends ht{constructor(t,i){super(t,i),this.type="rexScrollBar";var s=Hi(i,"background",void 0),n=Hi(i,"buttons",void 0),o=Hi(n,"top",Hi(n,"left",void 0)),r=Hi(n,"bottom",Hi(n,"right",void 0)),a,p=Hi(i,"slider",void 0);if(s&&this.addBackground(s),o){this.add(o);var h=new ms(o);h.on("intouch",function(){if(this.enable){var m=a.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=m}},this)}if(p){p.orientation=this.orientation,p.eventEmitter=this,p.value=null;var u;if(this.orientation===0){var f=Hi(p,"width",void 0);u=f===void 0?1:0}else{var l=Hi(p,"height",void 0);u=l===void 0?1:0}a=new Es(t,p),t.add.existing(a),this.add(a,{proportion:u})}if(r){this.add(r);var h=new ms(r);h.on("intouch",function(){if(this.enable){var g=a.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=g}},this)}var d=[o,r];this.addChildrenMap("background",s),this.addChildrenMap("slider",a),this.addChildrenMap("buttons",d);var v=Hi(i,"valuechangeCallback",null);if(v!==null){var c=Hi(i,"valuechangeCallbackScope",void 0);this.on("valuechange",v,c)}this.setEnable(Hi(i,"enable",void 0)),this.setValue(Hi(i,"value",0)),this.setScrollStep(Hi(n,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,s),this}addValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,s),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}setGap(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setGap(t,i,s),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(t){this.childrenMap.slider&&(this.childrenMap.slider.gap=t)}setTick(t,i,s){return this.setGap(t,i,s),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(t){this.childrenMap.slider&&(this.childrenMap.slider.tick=t)}},Wf=Yw;var xEt=function(e,t){t===void 0&&(t={});var i=ze(t);t={slider:i},t.orientation=i.orientation,delete i.orientation,t.background=i.background,delete i.background,t.buttons=i.buttons,delete i.buttons,t.value=null;var s=new Wf(e,t);e.add.existing(s);var n=s.childrenMap.slider;return s.addChildrenMap("track",n.childrenMap.track),s.addChildrenMap("indicator",n.childrenMap.indicator),s.addChildrenMap("thumb",n.childrenMap.thumb),s},zH=xEt;var yEt=Phaser.Math.Snap.To,TFe=Phaser.Math.Clamp,WH=function(){this.emit("dragstart")},HH=function(){this.emit("dragend")},YH=function(){this.value+=this.dragDelta},XH=function(){var e=this.value,t=this.dragSpeed,i=this.snapStep,s=!!i;if(s){var o=e,r=t===0?0:t*t/(2*this.slidingDeceleration);if(o+=t>0?r:-r,o=yEt(o,i,this.minValue),r=Math.abs(o-e),r>0){var n;t===0?(n=this.backDeceleration,t=Math.sqrt(2*n*r)):(n=t*t/(2*r),n*=.99),this._slowDown.init(e,void 0,t,n,o)}else this._slowDown.stop(),this._state.next()}else if(t===0)this._slowDown.stop(),this._state.next();else{var n=this.slidingDeceleration;this._slowDown.init(e,t>0,t,n)}},$H=function(e,t){t*=.001;var i=this._slowDown.update(t).value;this.overMax(i)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(i)?(this.value=this.minValue,this._slowDown.stop()):this.value=i},jH=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,i=Math.abs(t-e),s=this.backDeceleration,n=Math.sqrt(2*s*i);this._slowDown.init(e,void 0,n,s,t)},ZH=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},Xw=function(){this._slowDown.stop()};var $w=class extends Si{constructor(t,i){super(i),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,i=this.parent,s=i.dragState;return s.isDown&&(t=i.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,i){this.next()}next_DRAGBEGIN(){var t,i=this.parent,s=i.dragState;return s.isDown?t=s.pointer.getDistance()>=i.dragThreshold?"DRAG":"DRAGBEGIN":t="IDLE",t}update_DRAGBEGIN(t,i){this.next()}next_DRAG(){var t,i=this.parent,s=i.dragState;return s.isUp&&(i.outOfBounds?t="BACK":i.slidingEnable?t="SLIDE":t="IDLE"),t}update_DRAG(t,i){var s=this.parent,n=s.dragState;n.justMoved&&YH.call(s),this.next()}enter_DRAG(){WH.call(this.parent)}exit_DRAG(){HH.call(this.parent)}next_SLIDE(){var t,i=this.parent,s=i.dragState;return s.isDown?t="DRAG":i.isSliding||(t="IDLE"),t}enter_SLIDE(){XH.call(this.parent)}exit_SLIDE(){Xw.call(this.parent)}update_SLIDE(t,i){$H.call(this.parent,t,i),this.next()}next_BACK(){var t,i=this.parent,s=i.dragState;return s.isDown?t="DRAG":i.isPullBack||(t="IDLE"),t}enter_BACK(){jH.call(this.parent)}exit_BACK(){Xw.call(this.parent)}update_BACK(t,i){ZH.call(this.parent,t,i),this.next()}},KH=$w;var Hf=Phaser.Utils.Objects.GetValue,CEt=Phaser.Math.Distance.Between,jw=class extends Et{constructor(t,i){super(t,i),this._enable=void 0,this.rectBoundsInteractive=Hf(i,"rectBoundsInteractive",!1),this.rectBoundsInteractive||t.setInteractive(Hf(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(Hf(t,"enable",!0)),this.holdThreshold=Hf(t,"holdThreshold",50),this.pointerOutReleaseEnable=Hf(t,"pointerOutRelease",!0),this}boot(){var t=this.scene,i=this.parent;this.rectBoundsInteractive?(t.input.on("pointerdown",this.onPointIn,this),t.input.on("pointerup",this.onPointOut,this),t.input.on("pointermove",this.onPointerMove,this)):(i.on("pointerdown",this.onPointIn,this),i.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&i.on("pointerout",this.onPointOut,this),i.on("pointermove",this.onPointerMove,this)),t.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){if(!this.isShutdown){var i=this.scene,s=this.parent;this.rectBoundsInteractive&&(i.input.off("pointerdown",this.onPointIn,this),i.input.off("pointerup",this.onPointOut,this),i.input.off("pointermove",this.onPointerMove,this)),i.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t)}}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){var t=Oh(this.scene);return t}get speed(){if(this.x===this.preX&&this.y===this.preY)return 0;var t=CEt(this.preX,this.preY,this.x,this.y),i=t/(this.dt*.001);return i}get speedX(){return this.dx/(this.dt*.001)}get speedY(){return this.dy/(this.dt*.001)}onPointIn(t,i,s){!this.enable||!t.isDown||this.pointer!==void 0||this.rectBoundsInteractive&&!ti(this.parent,t)||(this.pointer=t,this.localX=i,this.localY=s)}onPointOut(t){!this.enable||this.pointer!==t||(this.pointer=void 0)}onPointerMove(t,i,s){if(!(!this.enable||!t.isDown||this.pointer!==t)){if(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!ti(this.parent,t)){this.onPointOut(t);return}this.localX=i,this.localY=s}}preupdate(t,i){if(this.enable){var s=this.pointer;this.justMoved=!1,s&&!this.isInTouched?(this.x=s.worldX,this.y=s.worldY,this.preX=s.worldX,this.preY=s.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",s,this.localX,this.localY)):s&&this.isInTouched?this.x===s.x&&this.y===s.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=s.worldX,this.y=s.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",s,this.localX,this.localY)):!s&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",s))}}},JH=jw;var QH=JH;var Zw=Phaser.Utils.Objects.GetValue,Kw=class{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(Zw(t,"value",0)),this.setSpeed(Zw(t,"speed",0)),this.setAcceleration(Zw(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}},qH=Kw;var Jw=class{constructor(){this.value,this.dir,this.movement=new qH}init(t,i,s,n,o){return this.value=t,this.end=o,o!==void 0?this.dir=t<o:this.dir=i,s=Math.abs(s),this.movement.setSpeed(s).setAcceleration(-n),this}stop(){this.movement.reset()}update(t){var i=this.movement.getDeltaValue(t);return this.dir||(i=-i),this.end===void 0?this.value+=i:i===0?this.value=this.end:(this.value+=i,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}},_H=Jw;var De=Phaser.Utils.Objects.GetValue,SEt=Phaser.Math.Clamp,Qw=class extends Et{constructor(t,i){super(t,i);var s=De(i,"enable",!0);this._state=new KH(this,{enable:s,eventEmitter:!1});var n={rectBoundsInteractive:De(i,"rectBoundsInteractive",!1),inputConfig:De(i,"inputConfig",void 0),enable:s,pointerOutRelease:De(i,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new QH(t,n),this._enable=void 0,this._value=void 0,this._slowDown=new _H,this.setSnapStep(De(i,"snapStep",void 0));var o=De(i,"valuechangeCallback",null);if(o!==null){var r=De(i,"valuechangeCallbackScope",void 0);this.on("valuechange",o,r)}if(o=De(i,"overmaxCallback",null),o!==null){var r=De(i,"overmaxCallbackScope",void 0);this.on("overmax",o,r)}if(o=De(i,"overminCallback",null),o!==null){var r=De(i,"overminCallbackScope",void 0);this.on("overmin",o,r)}this.resetFromJSON(i),this.boot()}resetFromJSON(t){this.setOrientationMode(De(t,"orientation",0)),this.setDragThreshold(De(t,"threshold",10)),this.setSlidingDeceleration(De(t,"slidingDeceleration",5e3)),this.setBackDeceleration(De(t,"backDeceleration",2e3));var i=De(t,"dragRate",1);i=i*(De(t,"dragReverse",!1)?-1:1),this.setDragRate(i);var s=De(t,"bounds",void 0);return s?this.setBounds(s):this.setBounds(De(t,"max",0),De(t,"min",0)),this.setValue(De(t,"value",this.maxValue||0)),this.setEnable(De(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=TEt[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,i){if(Array.isArray(t)){var s=t;t=s[0],i=s[1]}return t<i?(this.minValue=t,this.maxValue=i):(this.minValue=i,this.maxValue=t),this}setSnapStep(t){return this.snapStep=t,this}get value(){return this._value}set value(t){if(t!==this._value){var i=this._value,s=this.overMax(t),n=this.overMin(t);s&&this.emit("overmax",t,i),n&&this.emit("overmin",t,i),this.backEnable||(s&&(t=this.maxValue),n&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,i)}}setValue(t,i){return i===void 0&&(i=!1),i&&(t=SEt(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,i){return this.setValue(this.value+t,i),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){var t;return this.orientationMode===0?t=this.dragState.dy:this.orientationMode===1?t=this.dragState.dx:t=0,t*=this.dragRate,t}get dragSpeed(){var t;return this.orientationMode===0?t=this.dragState.speedY:this.orientationMode===1?t=this.dragState.speedX:t=0,t*=this.dragRate,t}},TEt={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},tY=Qw;var eY=tY;var ay=Phaser.Utils.Objects.GetValue,qw=class extends Et{constructor(t,i){switch(super(t,i),this.parent!==this.scene?this.focusMode=ay(i,"focus",!0):this.focusMode=!1,typeof this.focusMode=="boolean"&&(this.focusMode=this.focusMode?1:0),this.setSpeed(ay(i,"speed",.1)),this.setEnable(ay(i,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:t.setInteractive(ay(i,"inputConfig",void 0)).on("wheel",function(s,n,o,r,a){this.tryScroll(o)},this);break}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this);break;default:break}}onSceneScroll(t,i,s,n,o,r){this.focusMode===2&&!ti(this.parent,t)||this.tryScroll(n)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}tryScroll(t){if(this.enable)return this.scroll(t),this}scroll(t){return t*=this.speed,this.emit("scroll",t,this.parent,this),this}},iY=qw;var we=Phaser.Utils.Objects.GetValue,EEt=Phaser.Math.Snap.To,PEt=function(e,t,i,s){i=i.toUpperCase();var n=i==="Y",o=e.scrollMode===2,r=e.childrenMap.child,a,p=`snapStep${i}`;if(o)a=we(s,p,void 0);else{var a=we(s,"snapStep",void 0);a===void 0&&(a=we(s,p,void 0))}e[p]=a;var h,u,f=`slider${i}`;if(o||s.hasOwnProperty(f)?h=we(s,f,void 0):h=we(s,"slider",void 0),h){h===!0&&(h={}),h.orientation=n?1:0,u=zH(e.scene,h);var l,d,v,c=we(h,"position",0);typeof c=="string"&&(c=MEt[c]);var m=we(s,`space.slider${i}`,void 0),g;m===void 0&&(m=we(s,"space.slider",void 0),m===void 0&&(o?m=0:g=we(s,"space.child",0)));var y;g===void 0?y=typeof m=="number":y=typeof g=="number",n?c===0?(l=2,d=1,g===void 0?v=y?{left:m}:m:v={left:we(g,"right",g)}):(l=0,d=1,g===void 0?v=y?{right:m}:m:v={right:we(g,"left",g)}):c===0?(l=1,d=2,g===void 0?v=y?{top:m}:m:v={top:we(g,"bottom",g)}):(l=1,d=0,g===void 0?v=y?{bottom:m}:m:v={bottom:we(g,"top",g)}),t.add(u,{column:l,row:d,align:"center",padding:v,expand:!0}),e[`hideUnscrollableSlider${i}`]=we(h,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${i}`]=we(h,"disableUnscrollableDrag",!1),e[`adaptThumb${i}SizeMode`]=we(h,"adaptThumbSize",!1),e[`minThumb${i}Size`]=we(h,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${i}`]=!1,e[`disableUnscrollableDrag${i}`]=!1,e[`adaptThumb${i}SizeMode`]=!1,e[`minThumb${i}Size`]=void 0;var x=we(s,"scrollDetectionMode");typeof x=="string"&&(x=wEt[x]);var C,S,E=`scroller${i}`;o||s.hasOwnProperty(E)?C=we(s,E,!0):C=we(s,"scroller",!0),C&&r&&(C===!0&&(C={}),C.orientation=n?0:1,x!==void 0&&(C.rectBoundsInteractive=x===1),C.snapStep=a,S=new eY(r,C),r.isRexContainerLite&&r.sendChildToBack(r));var T=we(s,o?`mouseWheelScroller${i}`:"mouseWheelScroller",!1),P;if(T&&r&&(x!==void 0&&(T.focus=x===1?2:0),P=new iY(r,T)),e.addChildrenMap(`slider${i}`,u),e.addChildrenMap(`scroller${i}`,S),e.addChildrenMap(`mouseWheelScroller${i}`,P),(!o||n)&&(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${i}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${i}`],e.adaptThumbSizeMode=e[`adaptThumb${i}SizeMode`],e.minThumbSize=e[`minThumb${i}Size`],e.addChildrenMap("slider",u),e.addChildrenMap("scroller",S),e.addChildrenMap("mouseWheelScroller",P)),u){var M,w;o?(M=n?"t":"s",w=`scroll${i}`):(M="t",w="scroll"),u.on("valuechange",function(R){e[M]=R,e.emit(w,e)}).on("inputend",function(){var R=e[`snapStep${i}`];if(R){var A=e[n?"topChildOY":"leftChildOX"],L=e[n?"bottomChildOY":"rightChildOX"],O=e[`childO${i}`],F=EEt(O,R,A),G=500*(Math.abs(F-O)/R);u.setEaseValueDuration(G).easeValueTo(F,A,L)}})}if(S){var b,w;o?(b=`childO${i}`,w=`scroll${i}`):(b="childOY",w="scroll"),S.on("valuechange",function(A){e[b]=A,e.emit(w,e)})}if(P){var I;o?I=`addChildO${i}`:I="addChildOY",P.on("scroll",function(R){var A=e[p];A&&(R=A),e[I](-R,!0)})}},MEt={right:0,left:1,bottom:0,top:1},wEt={gameObject:0,rectBounds:1},Yf=PEt;var oy=Phaser.Utils.Objects.GetValue,bEt=function(e,t){var i=e.scene,s=[0,1,0],n=[0,1,0],o=oy(t,"width"),r=oy(t,"height");if(!o){var a=oy(t,"child.expandWidth",!0);a||(s[1]=0)}if(!r){var p=oy(t,"child.expandHeight",!0);p||(n[1]=0)}var h=new fi(i,{column:3,row:3,columnProportions:s,rowProportions:n});switch(AH(e,h,t),e.scrollMode){case 0:Yf(e,h,"y",t);break;case 1:Yf(e,h,"x",t);break;default:Yf(e,h,"y",t),Yf(e,h,"x",t);break}return h},rY=bEt;var Un=Phaser.Utils.Objects.GetValue,ly=class extends ht{constructor(t,i){i===void 0&&(i={});var s=Iu(i),n=s===1;i.orientation=n?0:1,super(t,i),this.type=Un(i,"type","rexScrollable"),this.scrollMode=s;var o=Un(i,"background",void 0);o&&this.addBackground(o);var r=Un(i,"header",void 0);if(r){var a=Un(i,"align.header","center"),p=Un(i,"space.header",0),h;n?h={right:p}:h={bottom:p},this.add(r,{proportion:0,align:a,padding:h,expand:Un(i,"expand.header",!0)})}var u=rY(this,i);u&&this.add(u,{proportion:1,align:"center",padding:0,expand:!0});var f=Un(i,"footer",void 0);if(f){var a=Un(i,"align.footer","center"),l=Un(i,"space.footer",0),h;n?h={left:l}:h={top:l},this.add(f,{proportion:0,align:a,padding:h,expand:Un(i,"expand.footer",!0)})}this.addChildrenMap("background",o),this.addChildrenMap("header",r),this.addChildrenMap("footer",f),this.runLayoutFlag=!1}postLayout(t,i,s){var n=0,o=0;return this.runLayoutFlag?(o=this.t,this.scrollMode===2&&(n=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(o),this.scrollMode===2&&this.setS(n),super.postLayout(t,i,s),this}set t(t){var i=this.childMargin;if(i.top!==0||i.bottom!==0){var s=this.childrenMap.child,n=s.topChildOY-s.bottomChildOY,o=n+i.top+i.bottom,r=o*t-i.top;t=n!==0?r/n:0}this.childrenMap.child.t=t,this.updateController()}get t(){var t=this.childrenMap.child.t,i=this.childMargin;if(i.top!==0||i.bottom!==0){var s=this.childrenMap.child,n=s.topChildOY-s.bottomChildOY,o=n+i.top+i.bottom,r=n*t+i.top;t=o!==0?r/o:0}return t}set s(t){var i=this.childMargin;if(i.left!==0||i.right!==0){var s=this.childrenMap.child,n=s.leftChildOX-s.rightChildOX,o=n+i.left+i.right,r=o*t-i.left;t=n!==0?r/n:0}this.childrenMap.child.s=t,this.updateController()}get s(){var t=this.childrenMap.child.s,i=this.childMargin;if(i.left!==0||i.right!==0){var s=this.childrenMap.child,n=s.leftChildOX-s.rightChildOX,o=n+i.left+i.right,r=n*t+i.left;t=o!==0?r/o:0}return t}set childOY(t){this.childrenMap.child.childOY=t,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(t){this.childrenMap.child.childOX=t,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var t=this.childrenMap.child;return t.topChildOY!==t.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var t=this.childrenMap.child;return t.leftChildOX!==t.rightChildOX}get sliderEnable(){var t=this.childrenMap.slider;return t?t.enable:!1}set sliderEnable(t){var i=this.childrenMap.slider;i&&i.setEnable(t)}setSliderEnable(t){return t===void 0&&(t=!0),this.sliderEnable=t,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(t){this.sliderEnable=t}setSliderYEnable(t){return this.setSliderEnable(t),this}get sliderXEnable(){var t=this.childrenMap.sliderX;return t?t.enable:!1}set sliderXEnable(t){var i=this.childrenMap.sliderX;i&&i.setEnable(t)}setSliderXEnable(t){return t===void 0&&(t=!0),this.sliderXEnable=t,this}get scrollerEnable(){var t=this.childrenMap.scroller;return t?t.enable:!1}set scrollerEnable(t){var i=this.childrenMap.scroller;i&&i.setEnable(t)}setScrollerEnable(t){return t===void 0&&(t=!0),this.scrollerEnable=t,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(t){this.scrollerEnable=t}setScrollerYEnable(t){return this.setScrollerEnable(t),this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var i=this.childrenMap.scrollerX;i&&i.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get scrollerXEnable(){var t=this.childrenMap.scrollerX;return t?t.enable:!1}set scrollerXEnable(t){var i=this.childrenMap.scrollerX;i&&i.setEnable(t)}setScrollerXEnable(t){return t===void 0&&(t=!0),this.scrollerXEnable=t,this}get mouseWheelScrollerEnable(){var t=this.childrenMap.mouseWheelScroller;return t?t.enable:!1}set mouseWheelScrollerEnable(t){var i=this.childrenMap.mouseWheelScroller;i&&i.setEnable(t)}setMouseWheelScrollerEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerEnable=t,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(t){this.mouseWheelScrollerEnable=t}setMouseWheelScrollerYEnable(t){return this.setMouseWheelScrollerEnable(t),this}get mouseWheelScrollerXEnable(){var t=this.childrenMap.mouseWheelScrollerX;return t?t.enable:!1}set mouseWheelScrollerXEnable(t){var i=this.childrenMap.mouseWheelScrollerX;i&&i.setEnable(t)}setMouseWheelScrollerXEnable(t){return t===void 0&&(t=!0),this.mouseWheelScrollerXEnable=t,this}setDropZoneEnable(t){t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setInteractive(),i.input.dropZone=t,this}};Object.assign(ly.prototype,IH);var Ta=ly;var REt=function(e,t,i){var s=Ti(e);switch(s){case ce:i=e.getWrappedText(t);break;case pe:i=e.getPenManager(t,i);break;case Te:e.maxWidth>0?i=e.setText(t).getTextBounds().wrappedText.split(`
`):i=t.split(`
`);break}return i},Au=REt;var IEt=function(e){return e!==void 0&&(this.text=e),this.lines=Au(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},nY=IEt;var AEt=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},hy=AEt;var OEt=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},uy=OEt;var DEt=function(e){var t=e+this.visibleLinesCount+1,i;switch(this.textObjectType){case ce:i=this.lines.slice(e,t).join(`
`);break;case pe:var s=this.lines.getLineStartIndex(e),n=this.lines.getLineEndIndex(t-1);i=this.lines.getSliceTagText(s,n,!0);break;case Te:i=this.lines.slice(e,t).join(`
`);break}return i},sY=DEt;var LEt=function(e,t){var i=Ti(e);switch(i){case ce:var o=e.style,s=o.wordWrapWidth,n=o.wordWrapCallback;o.wordWrapWidth=0,o.wordWrapCallback=void 0,e.setText(t),o.wordWrapWidth=s,o.wordWrapCallback=n;break;case pe:var o=e.style,r=o.wrapMode;o.wrapMode=0,e.setText(t),o.wrapMode=r;break;case Te:var a=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=a;break}},Ea=LEt;var FEt=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&BEt.call(this)},BEt=function(){if(this.textObject.setCrop){var e=this.textObject.rexSizer.offsetY,t,i;e<=0?(t=-e,i=this.height):(t=0,i=this.height-e),this.textObject.setCrop(0,t,this.width,i)}},dy=FEt;var NEt=function(){var e=Math.max(Math.floor(hy.call(this,-this.textOY)),0),t=uy.call(this,e)+this.textOY,i=sY.call(this,e);return Ea(this.textObject,i),this.textObject.rexSizer.offsetY=t,dy.call(this),this},aY=NEt;var GEt=function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,On.call(this),this},oY=GEt;var kEt=function(e,t,i){if(i+=this.textLineHeight+this.textLineSpacing,!(this.textObjectWidth===t&&this._textObjectRealHeight===i)){switch(this.textObjectWidth=t,this._textObjectRealHeight=i,this.textObjectType){case ce:case pe:e.setFixedSize(t,i);var s=e.style,n=Math.max(t,0);this.textObjectType===ce?s.wordWrapWidth=n:(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=n);break;case Te:e.setMaxWidth(t);break}this.setText()}},lY=kEt;var VEt=function(){var e,t,i,s=this.left,n=this.top,o,r,a,p;e=this.textObject,e.rexSizer.hidden||(t=e.rexSizer,i=t.padding,o=s+i.left*this.scaleX,r=n+i.top*this.scaleY,a=this.width*this.scaleX-(i.left+i.right)*this.scaleX,p=this.height*this.scaleY-(i.top+i.bottom)*this.scaleY,lY.call(this,e,a,p),Rn(e,o,r,a,p,t.align),t.preOffsetY=0,dy.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))},hY=VEt;var uY={setText:nY,updateTextObject:aY,preLayout:oY,layoutChildren:hY};var dY=Phaser.Utils.Objects.IsPlainObject,or=Phaser.Utils.Objects.GetValue,UEt=Phaser.Display.Align.TOP_LEFT,fy=class extends Ir{constructor(t,i,s,n,o,r){dY(i)?(r=i,i=or(r,"x",0),s=or(r,"y",0),n=or(r,"width",void 0),o=or(r,"height",void 0)):dY(n)&&(r=n,n=or(r,"width",void 0),o=or(r,"height",void 0)),super(t,i,s,n,o,r),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=or(r,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(or(r,"clampTextOY",!0)),this.alwaysScrollable=or(r,"alwaysScrollable",!1);var a=or(r,"background",void 0),p=or(r,"text",void 0);p===void 0&&(p=zEt(t)),this.textCropEnable=or(r,"textCrop",!!p.setCrop);var h=or(r,"textMask",!this.textCropEnable);a&&this.addBackground(a),this.add(p),this.sizerChildren=[p];var u=this.getSizerConfig(p);u.align=UEt,u.padding=Pr(0),u.expand=!0,this.textObject=p,this.textObjectType=Ti(p),u.preOffsetY=0,u.offsetY=0,h&&(this.textMask=ri.call(this,this.textObject,this)),this.addChildrenMap("background",a),this.addChildrenMap("text",p)}destroy(t){if(!(!this.scene||this.ignoreDestroy)){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case ce:this.lines.length=0;break;case pe:this.lines.destroy();break;case Te:this.lines.length=0;break}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case ce:case pe:var i=this.textObject.style;t=i.metrics.fontSize+i.strokeThickness;break;case Te:var s=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*s;break}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case ce:case pe:t=this.textObject.lineSpacing;break;case Te:t=0;break}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(hy.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=uy.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var i=this.topTextOY,s=this.bottomTextOY,n=this.textOYExceedTop(t),o=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:n?t=i:o&&(t=s)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),n&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=n,o&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=o}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}},zEt=function(e){return e.add.text(0,0,"")};Object.assign(fy.prototype,uY);var fY=fy;var WEt=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textObjectHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.textHeight}})},cY=WEt;var pY={setText(e){var t=this.childrenMap.child;return t.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}};var vY={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};var zn=Phaser.Utils.Objects.GetValue,cy=class extends Ta{constructor(t,i){i===void 0&&(i={});var s=zn(i,"text",void 0),n=zn(i,"textWidth",void 0),o=zn(i,"textHeight",void 0),r=zn(i,"textCrop",!!s.setCrop),a=zn(i,"textMask",!r),p=zn(i,"content",""),h=new fY(t,{width:n,height:o,text:s,textMask:a,textCrop:r&&!a,content:p,clampTextOY:zn(i,"clampChildOY",!1),alwaysScrollable:zn(i,"alwaysScrollable",!1)});t.add.existing(h),cY(h),i.scrollMode=0,i.type="rexTextArea",i.child={gameObject:h,expandWidth:n===void 0,expandHeight:o===void 0};var u=zn(i,"space",void 0);u&&(u.child=zn(u,"text",0)),super(t,i),this.addChildrenMap("text",s)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.textHeight}};Object.assign(cy.prototype,pY,vY);var Ho=cy;var py=Phaser.Utils.Objects.GetValue,HEt=function(e,t,i){t=t?qt(t):{};var s=py(i,"background",Zt),n=py(i,"text",Ou),o=py(i,"track",Zt),r=py(i,"thumb",Zt);s?t.background=s(e,t.background):delete t.background,n?t.text=n(e,t.text):delete t.text;var a=t.slider;a!==!1&&a!==null&&(a===void 0&&(a={}),o?a.track=o(e,a.track):delete a.track,r?a.thumb=r(e,a.thumb):delete a.thumb,t.slider=a);var p=new Ho(e,t);return e.add.existing(p),p},vy=HEt;var YEt=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("key")&&(i="bitmaptext",t.font=t.key));var s;switch(i){case"bitmaptext":case"bitmap":s=new Uf(e,t);break;case"bbcodetext":case"bbcode":s=new Wd(e,0,0,"",t);break;case"label":s=new Ps(e,t);break;case"textarea":s=vy(e,t);break;default:s=new Vf(e,t);break}return Ru(s,t),e.add.existing(s),s},Ou=YEt;var XEt=function(e,t){var i;t&&(t.hasOwnProperty("$type")?i=t.$type:t.hasOwnProperty("leftWidth")?i="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(i="roundRectangle"));var s;switch(i){case"nineSlice":t.hasOwnProperty("stretchMode")?s=new Uo(e,t):s=new Vo(e,t);break;case"roundRectangle":s=new ko(e,t);break;default:s=new Go(e,t);break}return Ru(s,t),e.add.existing(s),s},_w=XEt;var my=Phaser.Utils.Objects.GetValue,$Et=function(e,t,i){t=t?qt(t):{};var s=my(i,"background",Zt),n=my(i,"text",Ou),o=my(i,"icon",_w),r=my(i,"action",_w);return t.background!==null&&s?t.background=s(e,t.background):delete t.background,t.text!==null&&n?t.text=n(e,t.text):delete t.text,t.icon!==null&&o?t.icon=o(e,t.icon):delete t.icon,t.action!==null&&r?t.action=r(e,t.action):delete t.action,t},Pa=$Et;var eb=class extends di{constructor(t,i,s){i=Pa(t,i,s),super(t,i),this.type="rexSimpleLabel"}setActiveState(t){return tb(this.getChildren(),"setActiveState",t),this}setHoverState(t){return tb(this.getChildren(),"setHoverState",t),this}setDisableState(t){return tb(this.getChildren(),"setDisableState",t),this}},tb=function(e,t,i){for(var s=0,n=e.length;s<n;s++){var o=e[s];o&&o[t]&&o[t](i)}},Ps=eb;K.register("simpleLabel",function(e,t){var i=new Ps(this.scene,e,t);return this.scene.add.existing(i),i});Z(window,"RexPlugins.UI.SimpleLabel",Ps);var St=Phaser.Utils.Objects.GetValue,jEt=function(e){var t=this.scene,i=St(e,"orientation",0);this.setOrientation(i);var s=St(e,"icon",void 0),n=St(e,"iconMask",void 0),o=St(e,"innerBackground",void 0),r=St(e,"title",void 0),a=St(e,"separator",void 0),p=St(e,"text",void 0),h=St(e,"action",void 0),u=St(e,"actionMask",void 0);if(s){var f=St(e,"align.icon","center"),E;this.orientation===0?E={right:St(e,"space.icon",0),top:St(e,"space.iconTop",0),bottom:St(e,"space.iconBottom",0),left:St(e,"space.iconLeft",0)}:E={bottom:St(e,"space.icon",0),left:St(e,"space.iconLeft",0),right:St(e,"space.iconRight",0),top:St(e,"space.iconTop",0)};var l=St(e,"squareFitIcon",!1)?1:0;if(this.add(s,{proportion:0,align:f,padding:E,fitRatio:l}),n&&(n=ri.call(this,s,s,1)),!l){var d=St(e,"iconSize",void 0);this.setIconSize(St(e,"iconWidth",d),St(e,"iconHeight",d))}}var v=new ht(t,{orientation:1});o&&v.addBackground(o);var c=St(e,"space.separator",0);if(r){var f=St(e,"align.title","left"),m=St(e,"expandTitleWidth",!1),g=St(e,"expandTitleHeight",!1),y,E,x;y=g?1:0,x=m,E={bottom:!a&&p?St(e,"space.title",c):0,left:St(e,"space.titleLeft",0),right:St(e,"space.titleRight",0)},v.add(r,{proportion:y,expand:x,align:f,padding:E})}if(a){var E={top:r?c:0,bottom:p?c:0,left:St(e,"space.separatorLeft",0),right:St(e,"space.separatorRight",0)};v.add(a,{expand:!0,padding:E})}if(p){var f=St(e,"align.text","left"),C=St(e,"expandTextWidth",!1),S=St(e,"expandTextHeight",!1),y,E,x;y=S?1:0,x=C,E={left:St(e,"space.textLeft",0),right:St(e,"space.textRight",0)},v.add(p,{proportion:y,expand:x,align:f,padding:E})}var E=void 0;if(h&&(E={right:St(e,"space.text",0)}),this.add(v,{proportion:1,padding:E}),h){var f=St(e,"align.action","center"),E;this.orientation===0?E={top:St(e,"space.actionTop",0),bottom:St(e,"space.actionBottom",0),right:St(e,"space.actionRight",0)}:E={left:St(e,"space.actionLeft",0),right:St(e,"space.actionRight",0),bottom:St(e,"space.actionBottom",0)};var l=St(e,"squareFitAction",!1)?1:0;if(this.add(h,{proportion:0,align:f,padding:E,fitRatio:l}),u&&(u=ri.call(this,h,h,1)),!l){var T=St(e,"actionSize");this.setActionSize(St(e,"actionWidth",T),St(e,"actionHeight",T))}}this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",n),this.addChildrenMap("innerSizer",v),this.addChildrenMap("innerBackground",o),this.addChildrenMap("title",r),this.addChildrenMap("separator",a),this.addChildrenMap("text",p),this.addChildrenMap("action",h),this.addChildrenMap("actionMask",u)},mY=jEt;var xt=Phaser.Utils.Objects.GetValue,ZEt=function(e){this.setOrientation(1),this.setRTL(!1);var t=this.scene,i=xt(e,"title",void 0),s=xt(e,"separator",void 0),n=xt(e,"innerBackground",void 0),o=xt(e,"icon",void 0),r=xt(e,"iconMask",void 0),a=xt(e,"text",void 0),p=xt(e,"action",void 0),h=xt(e,"actionMask",void 0);if(i){var u=xt(e,"align.title","left"),f=xt(e,"expandTitleWidth",!1),l=xt(e,"expandTitleHeight",!1),d,v,c;d=l?1:0,c=f,v={bottom:xt(e,"space.title",0),left:xt(e,"space.titleLeft",0),right:xt(e,"space.titleRight",0)},this.add(i,{proportion:d,expand:c,align:u,padding:v})}if(s){var m=xt(e,"space.separator",0),v={top:i?m:0,bottom:a?m:0,left:xt(e,"space.separatorLeft",0),right:xt(e,"space.separatorRight",0)};this.add(s,{proportion:0,expand:!0,padding:v})}var g=xt(e,"orientation",0),y=new ht(t,{orientation:g,rtl:xt(e,"rtl",!1),space:{left:xt(e,"space.innerLeft",0),right:xt(e,"space.innerRight",0),top:xt(e,"space.innerTop",0),bottom:xt(e,"space.innerBottom",0)}});if(n&&y.addBackground(n),this.add(y,{proportion:1,expand:!0}),o){var u=xt(e,"align.icon","center"),v;y.orientation===0?v={right:xt(e,"space.icon",0),top:xt(e,"space.iconTop",0),bottom:xt(e,"space.iconBottom",0),left:xt(e,"space.iconLeft",0)}:v={bottom:xt(e,"space.icon",0),left:xt(e,"space.iconLeft",0),right:xt(e,"space.iconRight",0),top:xt(e,"space.iconTop",0)};var x=xt(e,"squareFitIcon",!1)?1:0;if(y.add(o,{proportion:0,align:u,padding:v,fitRatio:x}),r&&(r=ri.call(this,o,o,1)),!x){var C=xt(e,"iconSize",void 0);this.setIconSize(xt(e,"iconWidth",C),xt(e,"iconHeight",C))}}if(a){var u=xt(e,"align.text","left"),S=xt(e,"space.text",0),E=xt(e,"expandTextWidth",!1),T=xt(e,"expandTextHeight",!1),d,v,c;y.orientation===0?(d=E?1:0,p&&(v={right:S}),c=T):(d=T?1:0,p&&(v={bottom:S}),c=E),y.add(a,{proportion:d,expand:c,align:u,padding:v})}if(p){var u=xt(e,"align.action","center"),v;y.orientation===0?v={top:xt(e,"space.actionTop",0),bottom:xt(e,"space.actionBottom",0),right:xt(e,"space.actionRight",0)}:v={left:xt(e,"space.actionLeft",0),right:xt(e,"space.actionRight",0),bottom:xt(e,"space.actionBottom",0)};var x=xt(e,"squareFitAction",!1)?1:0;if(y.add(p,{proportion:0,align:u,padding:v,fitRatio:x}),h&&(h=ri.call(this,p,p,1)),!x){var P=xt(e,"actionSize");this.setActionSize(xt(e,"actionWidth",P),xt(e,"actionHeight",P))}}this.addChildrenMap("title",i),this.addChildrenMap("separator",s),this.addChildrenMap("innerSizer",y),this.addChildrenMap("innerBackground",n),this.addChildrenMap("icon",o),this.addChildrenMap("iconMask",r),this.addChildrenMap("text",a),this.addChildrenMap("action",p),this.addChildrenMap("actionMask",h)},gY=ZEt;var Ma=Phaser.Utils.Objects.GetValue,xY=[mY,gY],ib=class extends Fx{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTitleLabel";var s=Ma(i,"background",void 0);s&&this.addBackground(s);var n=Ma(i,"title",void 0),o=Ma(i,"text",void 0);if(n){var r=Ma(i,"wrapTitle",!1),a=Ma(i,"adjustTitleFontSize",!1);r?(r===!0&&(r="word"),Gf(n,r),i.expandTitleWidth=!0,Bo(n)):a&&(i.expandTextWidth=!0,i.expandTextHeight=!0,No(n,{fitHeight:!0}))}if(o){var p=Ma(i,"wrapText",!1),h=Ma(i,"adjustTextFontSize",!1);p?(p===!0&&(p="word"),Gf(o,p),i.expandTextWidth=!0,Bo(o)):h&&(i.expandTextWidth=!0,i.expandTextHeight=!0,No(o,{fitHeight:!0}))}var u=Ma(i,"layoutMode",0),f=xY[u]||xY[0];f.call(this,i),this.addChildrenMap("background",i.background)}get title(){var t=this.childrenMap.title;return t?t.title:""}set title(t){var i=this.childrenMap.title;i&&i.setText(t)}setTitle(t){return this.title=t,this}resetDisplayContent(t){t===void 0?t={}:typeof t=="string"&&(t={text:t}),super.resetDisplayContent(t);var i=this.childrenMap.title;return i&&(t.title===void 0||(t.title?(this.show(i),this.setTitle(t.title)):this.hide(i))),this}},Yo=ib;K.register("titleLabel",function(e){var t=new Yo(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TitleLabel",Yo);var rb=Phaser.Utils.Objects.GetValue,KEt=function(e,t,i){var s=rb(i,"innerBackground",Zt),n=rb(i,"separator",Zt),o=rb(i,"title",Ou),r,a;t.innerBackground!==null&&s&&(r=s(e,t.innerBackground)),t.separator!==null&&n&&(a=n(e,t.separator)),t=Pa(e,t,i),r?t.innerBackground=r:delete t.innerBackground,a?t.separator=a:delete t.separator,t.title!==null&&o?t.title=o(e,t.title):delete t.title;var p=t.background;return p&&(r?e.children.moveBelow(p,r):a&&e.children.moveBelow(p,a)),t},gy=KEt;var sb=class extends Yo{constructor(t,i,s){i=gy(t,i,s),super(t,i),this.type="rexSimpleTitleLabel"}setActiveState(t){return nb(this.getChildren(),"setActiveState",t),this}setHoverState(t){return nb(this.getChildren(),"setHoverState",t),this}setDisableState(t){return nb(this.getChildren(),"setDisableState",t),this}},nb=function(e,t,i){for(var s=0,n=e.length;s<n;s++){var o=e[s];o&&o[t]&&o[t](i)}},ab=sb;K.register("simpleTitleLabel",function(e,t){var i=new ab(this.scene,e,t);return this.scene.add.existing(i),i});Z(window,"RexPlugins.UI.SimpleTitleLabel",ab);var Yt=Phaser.Utils.Objects.GetValue,JEt=Phaser.Utils.Objects.IsPlainObject,QEt=function(e,t){var i=Yt(t,"background",void 0),s=Yt(t,"icon",void 0),n=Yt(t,"iconMask",void 0),o=Yt(t,"nameText",void 0),r=Yt(t,"valueText",void 0),a=Yt(t,"bar",void 0),p=Yt(t,"action",void 0),h=Yt(t,"actionMask",void 0),u=Yt(t,"barShape","line")==="line";if(JEt(a)){var f=u?mf:xo;a=new f(e,a),e.add.existing(a),o&&e.children.moveBelow(a,o),r&&e.children.moveBelow(a,r)}var l=o||r||a;if(i&&this.addBackground(i),s){var d=void 0;this.orientation===0?(l||p)&&(d={right:Yt(t,"space.icon",0),top:Yt(t,"space.iconTop",0),bottom:Yt(t,"space.iconBottom",0)}):(l||p)&&(d={bottom:Yt(t,"space.icon",0),left:Yt(t,"space.iconLeft",0),right:Yt(t,"space.iconRight",0)}),this.add(s,{proportion:0,padding:d}),n&&(n=ri.call(this,s,s,1))}if(l){var v=new ht(e,{orientation:1}),c;if(o||r){if(c=new ht(e,{orientation:0}),o){o.text===""&&o.setText(" "),o.setOrigin(0,o.originY);var d={left:Yt(t,"space.name",0)};c.add(o,{padding:d})}if(r){r.text===""&&r.setText(" "),r.setOrigin(1,r.originY),c.addSpace();var d={right:Yt(t,"space.value",0)};c.add(r,{padding:d}),this.setValueTextFormatCallback(Yt(t,"valueTextFormatCallback",qEt),Yt(t,"valueTextFormatCallbackScope",void 0))}v.add(c,{expand:!0})}if(a)if(u){var m=c?Yt(t,"space.bar"):0;m===void 0&&(m=Yt(t,"space.barTop",0));var d={top:m,bottom:Yt(t,"space.barBottom",0),left:Yt(t,"space.barLeft",0),right:Yt(t,"space.barRight",0)};v.add(a,{expand:!0,padding:d})}else{var d={top:Yt(t,"space.barTop",0),bottom:Yt(t,"space.barBottom",0),left:Yt(t,"space.barLeft",0),right:Yt(t,"space.barRight",0)};this.addBackground(a,d)}var d=void 0;p&&(d={right:Yt(t,"space.text",0)});var g=Yt(t,"align.text","bottom");this.add(v,{proportion:1,align:g,padding:d})}if(p){var d;this.orientation===0?d={top:Yt(t,"space.actionTop",0),bottom:Yt(t,"space.actionBottom",0)}:d={left:Yt(t,"space.actionLeft",0),right:Yt(t,"space.actionRight",0)},this.add(p,{proportion:0,padding:d}),h&&(h=ri.call(this,p,p,1))}this.addChildrenMap("background",i),this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",n),this.addChildrenMap("name",o),this.addChildrenMap("value",r),this.addChildrenMap("bar",a),this.addChildrenMap("action",p),this.addChildrenMap("actionMask",h)},qEt=function(e,t,i){return e.toString()},yY=QEt;var _Et=Phaser.Math.Clamp,CY={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,i){e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),i===void 0&&(i=this.maxValue);var s;return this.valueTextFormatCallbackScope?s=this.valueTextFormatCallback(e,t,i):s=this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,i),s},updateValueText(e,t,i){var s=this.childrenMap.value;return s&&this.valueTextFormatCallback&&(s.setText(this.getFormatValueText(e,t,i)),s.layout&&s.layout()),this},setValue(e,t,i){return t===void 0?t=this.minValue:this.minValue=t,i===void 0?i=this.maxValue:this.maxValue=i,e=_Et(e,t,i),this.value=e,this.updateValueText(e,t,i),this.setBarValue(e,t,i),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,i){return t===void 0?t=this.minValue:this.minValue=t,i===void 0?i=this.maxValue:this.maxValue=i,this.easeValueTask===void 0&&(this.easeValueTask=new We(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};var xy=class extends ht{constructor(t,i){super(t,i),this.type="rexNameValueLabel",yY.call(this,t,i),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var i=this.childrenMap.name;i!==void 0&&i.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var i=this.childrenMap.value;i!==void 0&&i.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var i=this.childrenMap.bar;i!==void 0&&i.setValue(t)}setBarValue(t,i,s){var n=this.childrenMap.bar;return n===void 0?this:(n.setValue(t,i,s),this)}easeBarValueTo(t,i,s){var n=this.childrenMap.bar;return n===void 0?this:(n.easeValueTo(t,i,s),this)}setTexture(t,i){var s=this.childrenMap.icon;if(s!==void 0)return s.setTexture(t,i),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,i,s){var n=this.childrenMap.iconMask;n&&(n.setPosition(),this.resetChildPositionState(n));var o=this.childrenMap.actionMask;return o&&(o.setPosition(),this.resetChildPositionState(o)),super.postLayout(t,i,s),this}resize(t,i){super.resize(t,i);var s=this.childrenMap.iconMask;s&&s.resize();var n=this.childrenMap.actionMask;return n&&n.resize(),this}};Object.assign(xy.prototype,CY);var Xf=xy;K.register("nameValueLabel",function(e){var t=new Xf(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.NameValueLabel",Xf);var ob=class extends Ig{constructor(t){super(),this.setTable(Ot(t,"table")),this.setMaxLevel(Ot(t,"maxLevel"));var i=Ot(t,"exp",0),s=Ot(t,"level",void 0);s!==void 0&&!this.checkLevel(s,i)&&(console.error(`Level ${s} and Exp ${i} are mismatch`),s=void 0),this.resetExp(i,s)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=Be(t),this}setMaxLevel(t){t===void 0&&(Array.isArray(this.levelTable)?t=this.levelTable.length-1:t=-1);var i;return t!==-1?i=this.getExp(t):i=-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=i,this}resetExp(t,i){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),i===void 0&&(i=this.getLevel(t)),this._exp=t,this._level=i,this._requiredExp=this.getRequiredExpToNextLevel(i,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp){this.resetExp(t);return}if(t!==this._exp){for(var i=this.getLevel(t,this._level),s=this._level,n=this._exp,o;;){var r=this.getExp(s),a=this.getExp(s+1);if(o=Math.min(a,t),this.emit("levelup",s,n,o,r,a),s===i&&o===t)break;s++,n=a}this.resetExp(t,i)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,i){if(t===void 0)return this._level;for(i===void 0&&(i=0);;){var s=this.getExp(i+1);if(s>t||(i++,this.hasMaxLevel&&s===this.maxExp))break}return i}getRequiredExpToNextLevel(t,i){return t===void 0&&(t=this.level),i===void 0&&(i=this.exp),this.getExp(t+1)-i}checkLevel(t,i){return i>=this.getExp(t)&&i<this.getExp(t+1)}gainExp(t,i,s){return i&&this.on("levelup",i,s),this.exp+=t,i&&this.off("levelup",i,s),this}setExp(t,i,s){return i&&this.on("levelup",i,s),this.exp=t,i&&this.off("levelup",i,s),this}setLevel(t,i,s){return i&&this.on("levelup",i,s),this.level=t,i&&this.off("levelup",i,s),this}},SY=ob;var TY=SY;var EY=Eg;var lb=function(e,t,i){var s=Ot(i,"reverse",!1),n;if(Ne(e[0]))if(s)for(var r=e.length,o=r-1;o>=0;o--)n=lb(e[o],t,i);else for(var o=0,r=e.length;o<r;o++)n=lb(e[o],t,i);else n=tPt(e,t,i);return n},tPt=function(e,t,i){var s=Ot(i,"argsConvert",void 0),n=Ot(i,"argsConvertScope",void 0),o=e[0];if(wa=go(wa,e,1),s){s===!0&&(s=Eh,n=void 0);for(var r=0,a=wa.length;r<a;r++)n?wa[r]=s.call(n,wa[r],e):wa[r]=s(wa[r],e)}var p;typeof o=="string"?(p=t[o],p==null&&(p=Ot(t,o,null))):p=o;var h=p.apply(t,wa);return h},wa=[],PY=lb;var MY=PY;var nn=Phaser.Utils.Objects.GetValue,hb=class extends Et{constructor(t,i){super(t,i);var s=nn(i,"clock",void 0);s||(s=new EY(t)),this.clock=s,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(i)}resetFromJSON(t){return this.clock.resetFromJSON(nn(t,"clock",void 0)),this.state=nn(t,"state",0),this.commands=nn(t,"commands",[]),this.scope=nn(t,"scope",void 0),this.setTimeUnit(nn(t,"timeUnit",0)),this.setDtMode(nn(t,"dtMode",0)),this.index=nn(t,"index",0),this.nextTime=nn(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,i,s){this.stop();var n=nn(s,"timeUnit",void 0);n!==void 0&&this.setTimeUnit(n);var o=nn(s,"dtMode",void 0);return o!==void 0&&this.setDtMode(o),t=t.filter(function(r){var a=r[0];return!isNaN(a)}).map(function(r){var a=r[0];return typeof a=="string"&&(r[0]=parseFloat(r[0])),r}),this.dtMode===0&&t.sort(function(r,a){var p=r[0],h=a[0];return p>h?1:p<h?-1:0}),go(this.commands,t),this.scope=i,this}clear(){return this.commands.length=0,this}append(t,i,...s){var n;return Array.isArray(i)?n=i:n=[i,...s],this.commands.push([t,n]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var i=this.commands;;){var s=i[this.index],n=s[1];if(Ne(n)||(n=go(ePt,s,1)),MY(n,this.scope),this.emit("runcommand",n,this.scope),this.index>=i.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var i=this.commands[this.index][0];return this.timeUnit===1&&(i=i*1e3),this.dtMode===1&&(i+=t),i}setDtMode(t){return typeof t=="string"&&(t=rPt[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=iPt[t]),this.timeUnit=t,this}},ePt=[],iPt={ms:0,s:1,sec:1},rPt={abs:0,absolute:0,inc:1,increment:1},yy=hb;var nPt=function(e,t,i,s,n){var o=(i-t)/(n-s)*this.totalEaseDuration,r=i===n?e+1:e;this.player.append(0,this.setEaseValueDuration,o).append(0,this.easeValueTo,i,s,n).append(0,this.emit,"levelup.start",e,t,i,this).append(o,re).append(0,this.emit,"levelup.end",r,t,i,this),this.player.isPlaying||this.player.start()},wY=nPt;var bY={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}};var RY=Phaser.Utils.Objects.GetValue,Cy=class extends Xf{constructor(t,i){super(t,i),this.type="rexExpBar",this.setTotalEaseDuration(RY(i,"easeDuration",1e3)),this.levelCounter=new TY(RY(i,"levelCounter")),this.player=new yy(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",wY,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(t){!this.scene||this.ignoreDestroy||(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(t))}get exp(){return this.levelCounter.exp}set exp(t){this.levelCounter.exp=t}get level(){return this.levelCounter.level}set level(t){this.levelCounter.level=t}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(t){return this.totalEaseDuration=t,this}};Object.assign(Cy.prototype,bY);var ub=Cy;K.register("expBar",function(e){var t=new ub(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ExpBar",ub);var Sy=ht.prototype.add,IY=ht.prototype.addSpace,db=function(e){var t=!e.isRexSpace,i=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){var s=!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom");s&&IY.call(this),Sy.call(this,e,{proportion:i,expand:!0});var n=!this.buttonsExpand&&this.buttonsAlign==="center";n&&IY.call(this),this.hasTailSpace=n}else Sy.call(this,e,{proportion:i,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var o=this.sizerChildren.length-1;Sy.call(this,e,{index:o,proportion:i,expand:!0})}else Sy.call(this,e,{proportion:i,expand:!0});return t&&this.buttonGroup.add(e),this},AY={addButton(e){if(Ne(e))for(var t=e,i=0,s=t.length;i<s;i++)db.call(this,t[i]);else db.call(this,e);return this},addButtons(e){for(var t=0,i=e.length;t<i;t++)db.call(this,e[t]);return this}};var sPt=ht.prototype.remove,aPt=ht.prototype.clear,fb=function(e,t){return this.getParentSizer(e)!==this?this:(this.buttonGroup.remove(e),sPt.call(this,e,t),this)},OY={remove(e,t){if(Ne(e))for(var i=e,s=0,n=i.length;s<n;s++)fb.call(this,i[s],t);else fb.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,aPt.call(this,e),this},removeButton(i,t){var i=this.getButton(i);return i?(this.remove(i,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)fb.call(this,t[i],e);return this}};var oPt=function(e,t,i){if(e){var s=this.setValueCallback,n=this.setValueCallbackScope;s&&(n?s.call(n,e,t,i):s(e,t,i)),this.fireEvent("button.statechange",e,t,i)}},DY=oPt;var lPt=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(i){if(e._selected!==i){var s=e._selected;e._selected=i,DY.call(t,e,i,s)}},enumerable:!0,configurable:!0}),e.selected=!1},LY=lPt;var FY={add(e){return this.buttons.push(e),e._click||(e._click=new vs(e,this.clickConfig),e._click.on("click",function(t,i,s,n){this.fireEvent("button.click",i,s,n)},this).on("enable",function(t,i){this.fireEvent("button.enable",i)},this).on("disable",function(t,i){this.fireEvent("button.disable",i)},this).on("over",function(t,i,s,n){this.fireEvent("button.over",i,s,n)},this).on("out",function(t,i,s,n){this.fireEvent("button.out",i,s,n)},this).on("down",function(t,i,s,n){this.fireEvent("button.down",i,s,n)},this).on("up",function(t,i,s,n){this.fireEvent("button.up",i,s,n)},this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),LY.call(this,e)),this},addMultiple(e){for(var t=0,i=e.length;t<i;t++)this.add(e[t]);return this}};var hPt=Phaser.Utils.Array.Remove,BY={remove(e){return this.buttonsType&&delete e.selected,hPt(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,i=e.length;t<i;t++)delete e[t].selected;return this.buttons.length=0,this}};var uPt=function(e,t,...i){if(this.buttons){var s;if(typeof t=="number"){if(s=t,t=this.buttons[s],!t)return}else if(s=this.buttons.indexOf(t),s===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,s,...i),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,s,...i):this.eventEmitter.emit(e,t,s,...i)}},NY=uPt;var $f=Phaser.Utils.Objects.GetValue,GY={setButtonsType(e){e===void 0&&(e={});var t=$f(e,"buttonsType",e.type);if(this.buttonsType=t,!this.buttonsType)return this;var i,s;switch(i=$f(e,"setValueCallback",void 0),s=$f(e,"setValueCallbackScope",void 0),i===void 0&&(i=$f(e,"setButtonStateCallback",void 0),s=$f(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=i,this.setValueCallbackScope=s,t){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType();break}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var i=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(s){if(e._value!==s){e._value=s;for(var n=0,o=t.length;n<o;n++){var r=t[n];r.rexSizer.hidden||(i===void 0?r.name===s?r.selected=!0:r.selected=!1:i===n?r.selected=!0:r.selected=!1)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(s){i=this.buttons.indexOf(s),e.value=s.name,i=void 0},this),this},setCheckboxesType(){var e=this.parent;return e.on("button.click",function(t){t.selected=!t.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,i=e.length;t<i;t++){var s=e[t];s.selected=!1}return this},getAllButtonsState(){for(var e={},t=this.buttons,i=0,s=t.length;i<s;i++){var n=t[i];n.rexSizer.hidden||(e[n.name]=n.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var i=this.buttons,s=0,n=i.length;s<n;s++){var o=i[s];if(!o.rexSizer.hidden&&o.name===e){o.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,i=0,s=t.length;i<s;i++){var n=t[i];if(!n.rexSizer.hidden&&n.name===e)return n.selected}}};var dPt=function(e,t){if(e)if(Ne(e)){for(var i,s=0,n=e.length;s<n;s++)if(i=kY(e[s],t),i)return i}else{var i;for(var o in e)if(i=kY(e[o],t),i)return i}else return null},kY=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null},VY=dPt;var UY=VY;var ba={getButton(e){var t=this.buttons,i,s=typeof e;switch(s){case"number":i=t[e];break;case"string":i=UY(t,e);break;default:i=e,t.indexOf(i)===-1&&(i=void 0);break}return i},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var i=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var s=0,n=i.length;s<n;s++)i[s]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var i=0,s=t.length;i<s;i++)t[i]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){var t=this.buttonGroup?this.buttonGroup:this;return t.fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,i=this.buttons,s=0,n=i.length;s<n;s++){var o=i[s];o._click.isOver&&(o._click.isOver=!1,t.fireEvent("button.out",o))}var o=this.getButton(e);return o&&(o._click.isOver=!0,t.fireEvent("button.over",o)),this},showButton(e){return br(this.getButton(e)),this},hideButton(e){return Rr(this.getButton(e)),this},isButtonShown(e){return hu(this.getButton(e)),this},forEachButtton(e,t){for(var i=this.buttons,s=0,n=i.length;s<n;s++)t?e.call(t,i[s],s,i):e(i[s],s,i);return this}};var Ty=class{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}},fPt={fireEvent:NY};Object.assign(Ty.prototype,FY,BY,GY,ba,fPt);var Du=Ty;var Lu={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}};var Xo=Phaser.Utils.Objects.GetValue,Ey=class extends ht{constructor(t,i){i===void 0&&(i={});var s=i.space;typeof s=="number"&&(i.space={item:s}),super(t,i),this.type="rexButtons",this.buttonGroup=new Du({parent:this,eventEmitter:Xo(i,"eventEmitter",this),groupName:Xo(i,"groupName",void 0),clickConfig:Xo(i,"click",void 0)}).setButtonsType(i);var n=Xo(i,"background",void 0),o=Xo(i,"buttons",void 0);this.buttonsExpand=Xo(i,"expand",!1),this.buttonsAlign=Xo(i,"align",void 0),n&&this.addBackground(n),o&&this.addButtons(o),this.addChildrenMap("background",n),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Ey.prototype,AY,OY,ba,Lu);var xe=Ey;K.register("buttons",function(e){var t=new xe(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Buttons",xe);var cPt=fi.prototype.add,zY={addButton(e,t,i){return cPt.call(this,e,t,i,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var i=0,s=e;i<s;i++)this.addButton(e[i],void 0,t);return this}};var pPt=fi.prototype.remove,vPt=fi.prototype.clear,cb=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),pPt.call(this,i,t),this):this},WY={remove(e,t){if(Ne(e))for(var i=e,s=0,n=i.length;s<n;s++)cb.call(this,i[s],t);else cb.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,vPt.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)cb.call(this,t[i],e);return this}};var Wn=Phaser.Utils.Objects.GetValue,Py=class extends fi{constructor(t,i){i===void 0&&(i={});var s=Wn(i,"row",0),n=Wn(i,"column",i.col||0),o=Wn(i,"createCellContainerCallback"),r=Wn(i,"buttons",void 0),a=Wn(i,"expand",!0),p=a?1:0;if(o&&(i.createCellContainerCallback=void 0),r!==void 0){s=Math.max(s,r.length);for(var h=0,u=r.length;h<u;h++)n=Math.max(n,r[h].length)}i.row=s,i.column=n,i.columnProportions=p,i.rowProportions=p,super(t,i),this.type="rexGridButtons",this.buttonGroup=new Du({parent:this,eventEmitter:Wn(i,"eventEmitter",this),groupName:Wn(i,"groupName",void 0),clickConfig:Wn(i,"click",void 0)}).setButtonsType(i);var f=Wn(i,"background",void 0);this.buttonsExpand=a;var l=Wn(i,"space",void 0);if(typeof l=="number"&&(l={itemX:l,itemY:l}),f&&this.addBackground(f),r)for(var d,v,c=0,m=r.length;c<m;c++){d=r[c];for(var g=0,y=d.length;g<y;g++)v=d[g],v&&this.addButton(v,g,c)}else if(o)for(var x=0;x<s;x++)for(var C=0;C<n;C++){var v=o(t,C,x);v&&this.addButton(v,C,x)}this.addChildrenMap("background",f),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(Py.prototype,zY,WY,ba,Lu);var jf=Py;K.register("gridButtons",function(e){var t=new jf(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.GridButtons",jf);var HY=Lr.prototype.add,My=function(e){return HY.call(this,e),this.buttonGroup.add(e),this},YY={addButton(e){if(Ne(e))for(var t=e,i=0,s=t.length;i<s;i++)My.call(this,t[i]);else My.call(this,e);return this},addButtons(e){if(Ne(e[0]))for(var t=e,i,s=0,n=t.length-1;s<=n;s++){i=t[s];for(var o=0,r=i.length;o<r;o++)My.call(this,i[o]);s>n&&HY.addNewLine(this)}else for(var o=0,r=e.length;o<r;o++)My.call(this,e[o]);return this}};var mPt=Lr.prototype.remove,gPt=Lr.prototype.clear,pb=function(i,t){var i=this.getButton(i);return i?(this.buttonGroup.remove(i),mPt.call(this,i,t),this):this},XY={remove(e,t){if(Ne(e))for(var i=e,s=0,n=i.length;s<n;s++)pb.call(this,i[s],t);else pb.call(this,e,t);return this},clear(e){var t=this.buttonGroup.buttons;return t.length=0,gPt.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,i=t.length-1;i>=0;i--)pb.call(this,t[i],e);return this}};var Fu=Phaser.Utils.Objects.GetValue,wy=class extends Lr{constructor(t,i){i===void 0&&(i={});var s=i.space;typeof s=="number"&&(i.space={item:s,line:s}),super(t,i),this.type="rexFixWidthButtons",this.buttonGroup=new Du({parent:this,eventEmitter:Fu(i,"eventEmitter",this),groupName:Fu(i,"groupName",void 0),clickConfig:Fu(i,"click",void 0)}).setButtonsType(i);var n=Fu(i,"background",void 0),o=Fu(i,"buttons",void 0);this.buttonsAlign=Fu(i,"align",void 0),n&&this.addBackground(n),o&&this.addButtons(o),this.addChildrenMap("background",n),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(wy.prototype,YY,XY,ba,Lu);var Fr=wy;K.register("fixWidthButtons",function(e){var t=new Fr(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FixWidthButtons",Fr);var $Y={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,i,s,n){return this.childrenMap.fileChooser.loadFile(e,t,i,s,n),this},loadFilePromise(e,t,i,s){return this.childrenMap.fileChooser.loadFilePromise(e,t,i,s)}};var jY=Phaser.Utils.Objects.GetValue,by=class extends di{constructor(t,i){super(t,i),this.type="rexFileSelectorButton";var s=new Cs(t);t.add.existing(s),this.addBackground(s),this.addChildrenMap("fileChooser",s),this.setAccept(jY(i,"accept","")),this.setMultiple(jY(i,"multiple",!1)),s.on("change",function(n){var o=n.files;o.length!==0&&(o=Array.from(o),this.emit("select",o,this))},this)}get files(){return this.childrenMap.fileChooser.files}};Object.assign(by.prototype,$Y);var vb=by;K.register("fileSelectorButton",function(e){var t=new vb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.FileSelectorButton",vb);var ZY={getChoice(e){var t=this.childrenMap.choicesSizer;if(t)return t.getButton(e)},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t?t.getButtonEnable(e):!1},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var i=this.childrenMap.choicesSizer;return i&&i.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:t?t.getButtonState(e):!1},setChoicesButtonState(e,t){var i=this.childrenMap.choicesSizer;return i&&i.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return e?e.hasAnyButton():!1},hasAnyAction(){var e=this.childrenMap.actionsSizer;return e?e.hasAnyButton():!1},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return e?e.hasAnyButton():!1},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return e?e.hasAnyButton():!1}};var KY={onCreateModalBehavior(e){e.on("button.click",function(t,i,s,n,o){var r=!1;switch(i){case"actions":r=!0;break;case"choices":e.hasAnyAction()||(r=!0);break}if(r){var a={index:s,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":a.value=e.getChoicesSelectedButtonName();break;case"checkboxes":a.value=e.getChoicesButtonStates();break;default:a.value=void 0}e.modalClose(a)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,pa.modal.call(this,e,t),this}};var JY={};Object.assign(JY,ZY,KY);var QY=JY;var ft=Phaser.Utils.Objects.GetValue,Ry=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexDialog",this.eventEmitter=ft(i,"eventEmitter",this);var s=ft(i,"background",void 0),n=ft(i,"title",void 0),o=ft(i,"toolbar",void 0),r=ft(i,"toolbarBackground",void 0),a=ft(i,"leftToolbar",void 0),p=ft(i,"leftToolbarBackground",void 0),h=ft(i,"content",void 0),u=ft(i,"description",void 0),f,l=ft(i,"choices",void 0),d=ft(i,"choicesBackground",void 0),v,c=ft(i,"actions",void 0),m=ft(i,"actionsBackground",void 0),g=ft(i,"click",void 0);s&&this.addBackground(s);var y;o&&(y=new xe(t,{groupName:"toolbar",background:r,buttons:o,orientation:0,space:{item:ft(i,"space.toolbarItem",0)},click:g,eventEmitter:this.eventEmitter}),t.add.existing(y));var x;if(a&&(x=new xe(t,{groupName:"leftToolbar",background:p,buttons:a,orientation:0,space:{item:ft(i,"space.leftToolbarItem",0)},click:g,eventEmitter:this.eventEmitter}),t.add.existing(x)),n||o||a){var C=!!n&&ft(i,"expand.title",!0),S=ft(i,"align.title","center"),E=n&&!C&&S==="center"||!n&&(o||a),T=!E,P;T?P=new ht(t,{orientation:0}):P=new Ge(t),t.add.existing(P);var M=T?!0:{height:!0};if(x&&P.add(x,{align:"left",expand:M}),n){T&&!C&&S==="right"&&P.addSpace();var w={left:ft(i,"space.titleLeft",0),right:ft(i,"space.titleRight",0)},b=C?1:0;P.add(n,{align:S,proportion:b,expand:M,padding:w}),T&&!C&&S==="left"&&P.addSpace()}y&&(T&&!n&&P.addSpace(),P.add(y,{align:"right",expand:M}));var w;(h||u||l||c)&&(w={bottom:ft(i,"space.title",0),top:ft(i,"space.titleTop",0)});var b=ft(i,"proportion.title",0);this.add(P,{padding:w,proportion:b,expand:!0})}if(h){var I=ft(i,"align.content","center"),R=ft(i,"space.content",0),w={left:ft(i,"space.contentLeft",0),right:ft(i,"space.contentRight",0),bottom:u||l||c?R:0},b=ft(i,"proportion.content",0),A=ft(i,"expand.content",!0);this.add(h,{align:I,padding:w,proportion:b,expand:A})}if(u){var I=ft(i,"align.description","center"),L=ft(i,"space.description",0),w={left:ft(i,"space.descriptionLeft",0),right:ft(i,"space.descriptionRight",0),bottom:l||c?L:0},b=ft(i,"proportion.description",0),A=ft(i,"expand.description",!0);this.add(u,{align:I,padding:w,proportion:b,expand:A})}if(l){var O=ft(i,"choicesType","").split("-"),F=Zf(O,"wrap")?Fr:Zf(O,"grid")?jf:xe,G=Zf(O,"radio")?"radio":Zf(O,"checkboxes")?"checkboxes":void 0,U={left:ft(i,"space.choicesBackgroundLeft",0),right:ft(i,"space.choicesBackgroundRight",0),top:ft(i,"space.choicesBackgroundTop",0),bottom:ft(i,"space.choicesBackgroundBottom",0)},z=ft(i,"space.choice",0);F===xe?U.item=z:F===Fr?(U.item=z,U.line=ft(i,"space.choiceLine",z)):(U.column=ft(i,"space.choiceColumn",z),U.row=ft(i,"space.choiceRow",z));var N={width:ft(i,"choicesWidth",void 0),height:ft(i,"choicesHeight",void 0),groupName:"choices",buttonsType:G,background:d,buttons:l,space:U,click:g,eventEmitter:this.eventEmitter,setValueCallback:ft(i,"choicesSetValueCallback",void 0),setValueCallbackScope:ft(i,"choicesSetValueCallbackScope",void 0)};F===xe&&(N.orientation=Zf(O,"x")?0:1),f=new F(t,N),t.add.existing(f);var k=ft(i,"space.choices",0),w={left:ft(i,"space.choicesLeft",0),right:ft(i,"space.choicesRight",0),bottom:c?k:0},I=ft(i,"align.choices","center"),b=ft(i,"proportion.choices",0),A=ft(i,"expand.choices",!0);this.add(f,{align:I,padding:w,proportion:b,expand:A}),this.buttonsType=G}if(c){v=new xe(t,{groupName:"actions",background:m,buttons:c,orientation:0,space:{item:ft(i,"space.action",0)},expand:ft(i,"expand.actions",!1),align:ft(i,"align.actions","center"),click:g,eventEmitter:this.eventEmitter}),t.add.existing(v);var w={left:ft(i,"space.actionsLeft",0),right:ft(i,"space.actionsRight",0),bottom:ft(i,"space.actionsBottom",0)},b=ft(i,"proportion.action",0);this.add(v,{align:"center",padding:w,proportion:b,expand:!0})}Kf(this,"click"),Kf(this,"over"),Kf(this,"out"),Kf(this,"enable"),Kf(this,"disable"),this.addChildrenMap("background",s),this.addChildrenMap("title",n),this.addChildrenMap("toolbar",o),this.addChildrenMap("leftToolbar",a),this.addChildrenMap("content",h),this.addChildrenMap("description",u),this.addChildrenMap("choices",f?f.buttons:void 0),this.addChildrenMap("actions",v?v.buttons:void 0),this.addChildrenMap("choicesSizer",f),this.addChildrenMap("actionsSizer",v),this.addChildrenMap("toolbarSizer",y),this.addChildrenMap("leftToolbarSizer",x)}},Zf=function(e,t){return e.indexOf(t)!==-1},qY={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},Kf=function(e,t){e.on(`button.${t}`,function(i,s,n,o,r){qY.hasOwnProperty(s)&&e.emit(`${qY[s]}.${t}`,i,n,o,r)})};Object.assign(Ry.prototype,QY);var $o=Ry;K.register("dialog",function(e){var t=new $o(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Dialog",$o);var xPt=function(e,t,i){var s=new Ps(e,t,i);return e.add.existing(s),s},ge=xPt;var yPt=function(e){return e===void 0&&(e={}),CPt.call(this,e),SPt.call(this,e),TPt.call(this,e),EPt.call(this,e),this},CPt=function(e){var t=this.childrenMap.title;e=e.title,e===null?t.hide():(t.show(),t.resetDisplayContent(e))},SPt=function(e){var t=this.childrenMap.content;if(e=e.content,e===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var i=e||"";t.setText(i)}},TPt=function(e){var t=this.childrenMap.actions;if(t){var i=e.buttons;if(i){for(var o=this.scene,r=this.defaultActionConfig,a=this.defaultActionButtonCreator,p=0,h=i.length;p<h;p++){var u=i[p],f=t[p];f||(f=ge(o,r,a),this.addAction(f)),f.show().resetDisplayContent(u)}this.buttonMode=i.length;for(var p=i.length,h=t.length;p<h;p++)t[p].hide()}else{var s=t[0];s&&(e.buttonA===null?s.hide():(s.show(),s.resetDisplayContent(e.buttonA)));var n=t[1];n&&(e.buttonB===null?n.hide():(n.show(),n.resetDisplayContent(e.buttonB)))}}},EPt=function(e){var t=this.childrenMap.choices;if(t){var i=e.choices;i||(i=[]);for(var s=this.scene,n=this.defaultChoiceConfig,o=this.defaultActionButtonCreator,r=0,a=i.length;r<a;r++){var p=i[r];typeof p=="string"&&(p={text:p});var h=t[r];h||(h=ge(s,n,o),this.addChoice(h)),h.show().resetDisplayContent(p);var u;p.hasOwnProperty("value")?u=p.value:u=p.text,h.setName(u)}for(var r=i.length,a=t.length;r<a;r++)t[r].hide()}},_Y=yPt;var PPt=Phaser.Utils.Objects.Merge,MPt=function(e,t){Be(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=PPt(e,this.modalStyle);var i;this.buttonMode===0?this.hasAnyChoice()?i=!1:i=!0:i=!1,e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=i),e.hasOwnProperty("manualClose")||(e.manualClose=!i);var s=this,n=function(o){var r=o.index;r===s.confirmButtonIndex?s.emit("confirm",o):r===s.cancelButtonIndex&&s.emit("cancel",o),t&&t(o)};return pa.modal.call(this,e,n),this},tX=MPt;var eX={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}};var iX={resetDisplayContent:_Y,modal:tX};Object.assign(iX,eX);var rX=iX;var wPt=function(e){e.setHoverState&&e.setHoverState(!0)},bPt=function(e){e.setHoverState&&e.setHoverState(!1)},RPt=function(e,t,i,s){e.setActiveState&&e.setActiveState(s)},IPt=function(e){e.setDisableState&&e.setDisableState(!1)},APt=function(e){e.setDisableState&&e.setDisableState(!0)},OPt=function(){this.on("button.over",wPt).on("button.out",bPt).on("button.enable",IPt).on("button.disable",APt).on("button.statechange",RPt)},Iy=OPt;var DPt=Phaser.Utils.Objects.GetValue,LPt=function(e,t,i){var s=DPt(t,"$type");s===void 0&&t&&(t.hasOwnProperty("slider")||t.hasOwnProperty("scroller"))&&(s="textarea");var n;switch(s){case"textarea":n=new vy(e,t,i);break;default:n=new ge(e,t,i);break}return e.add.existing(n),n},nX=LPt;var mb=Phaser.Utils.Objects.GetValue,Ay=class extends $o{constructor(t,i,s){i=i?qt(i):{},s===void 0&&(s={});var n=mb(s,"background",Zt);i.background=n(t,i.background),i.title=ge(t,i.title,s.title),i.content=nX(t,i.content,s.content),i.content instanceof Ho&&ir(i,"height")&&!ir(i,"proportion.content")&&Z(i,"proportion.content",1);var o=i.button,r=i.buttonA||o,a=i.buttonB||o,p=i.buttonMode;p===void 0&&(p=r&&a?2:r?1:0);var h=s.button,u=s.buttonA||h,f=s.buttonB||h;switch(p){case 2:i.actions=[ge(t,r,u),ge(t,a,f)];break;case 1:i.actions=[ge(t,r,u)];break;case 0:break;default:i.actions=[];break}var l=i.choice;l&&(i.choices=[]),super(t,i),this.type="rexConfirmDialog",this.buttonMode=p,this.defaultActionConfig=o,this.defaultActionButtonCreator=h,this.defaultChoiceConfig=l,this.defaultChoiceCreator=s.choice;var d=this.childrenMap.actions;this.addChildrenMap("buttonA",d?d[0]:null),this.addChildrenMap("buttonB",d?d[1]:null),Iy.call(this),this.setConfirmButtonIndex(mb(i,"confirmButtonIndex",0)),this.setCancelButtonIndex(mb(i,"cancelButtonIndex",1)),this.modalStyle=i.modal||{}}};Object.assign(Ay.prototype,rX);var Jf=Ay;K.register("confirmDialog",function(e,t){var i=new Jf(this.scene,e,t);return this.scene.add.existing(i),i});Z(window,"RexPlugins.UI.ConfirmDialog",Jf);var sX=Phaser.Utils.Objects.GetValue,FPt=function(e,t){var i=t.dialog,s=!i;if(s){var n=t.style;n.buttonMode=2,i=new Jf(e,n,t.creators),e.add.existing(i)}i.setConfirmButtonIndex(sX(t,"confirmButtonIndex",0)).setCancelButtonIndex(sX(t,"cancelButtonIndex",1)).resetDisplayContent(t.content).layout(),s&&t.onCreateDialog&&t.onCreateDialog(i);var o=t.modal;o&&!o.hasOwnProperty("destroy")&&(o.destroy=s);var r=t.confirm,a=t.cancel,p=t.confirmScope,h=t.cancelScope;r&&i.once("confirm",r,p),a&&i.once("cancel",a,h);var u=function(f){i.off("confirm",r,p),i.off("cancel",a,h)};return i.modal(o,u),i},Oy=FPt;var gb=class extends di{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexConfirmActionButton",this.setConfirmDialogEnable(),this.confirmActionConfig=ze(i.confirmDialog||{}),i.confirm&&this.setConfirmCallback(i.confirm,i.confirmScope),i.cancel&&this.setCancelCallback(i.cancel,i.cancelScope),this.onClickCallback=function(){if(this.confirmDialogEnable){if(this.confirmDialog)return;this.confirmDialog=Oy(t,this.confirmActionConfig),this.confirmDialog.once("destroy",function(){this.confirmDialog=void 0},this)}else this.runConfirmCallback()},this.onClick(this.onClickCallback,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.confirmDialog&&this.confirmDialog.destroy(),super.destroy(t),this.confirmActionConfig=void 0,this.onClickCallback=void 0,this.confirmDialog=void 0)}setConfirmCallback(t,i){return this.confirmActionConfig.confirm=t,this.confirmActionConfig.confirmScope=i,this}setCancelCallback(t,i){return this.confirmActionConfig.cancel=t,this.confirmActionConfig.cancelScope=i,this}setConfirmDialogContent(t){return this.confirmActionConfig.content=t,this}setConfitmDialogStyle(t){return this.confirmActionConfig.style=t,this}setConfitmDialogModalConfig(t){return this.confirmActionConfig.modal=t,this}setConfirmDialogEnable(t){return t===void 0&&(t=!0),this.confirmDialogEnable=t,this}runConfirmCallback(){var t=this.confirmActionConfig.confirm,i=this.confirmActionConfig.confirmScope;return t&&t.call(i),this}},xb=gb;K.register("confirmActionButton",function(e){var t=new xb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ConfirmActionButton",xb);var BPt=function(e){return e===void 0&&(e={}),NPt.call(this,e),GPt.call(this,e),kPt.call(this,e),this},NPt=function(e){var t=this.childrenMap.title;e.title===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},GPt=function(e){var t=this.childrenMap.firstNameTitle;if(e.firstNameTitle===null)this.hide(t);else{this.show(t);var i=e.firstNameTitle||"";t.resetDisplayContent(i)}var s=this.childrenMap.firstNameInput;if(e.firstName===null)this.hide(s);else{this.show(s);var n=e.firstName||"";s.setText(n)}var o=this.childrenMap.lastNameTitle;if(e.lastNameTitle===null)this.hide(o);else{this.show(o);var r=e.lastNameTitle||"";o.resetDisplayContent(r)}var a=this.childrenMap.lastNameInput;if(e.lastName===null)this.hide(a);else{this.show(a);var p=e.lastName||"";a.setText(p)}},kPt=function(e){var t=this.childrenMap.actions[0];e.button===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))},aX=BPt;var VPt=Phaser.Utils.Objects.Merge,UPt=function(e,t){Be(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=VPt(e,this.modalStyle),e.anyTouchClose=!1,e.manualClose=!1;var i=this,s=function(n){n.firstName=i.firstName,n.lastName=i.lastName,i.emit("confirm",n),t&&t(n)};return pa.modal.call(this,e,s),this},oX=UPt;var zPt={resetDisplayContent:aX,modal:oX},lX=zPt;var WPt=function(e,t,i){i===void 0&&(i=!0),i?t=t?qt(t):{}:t||(t={});var s=new mo(e,t);return e.add.existing(s),s},Ms=WPt;var Br=Phaser.Utils.Objects.GetValue,HPt=function(e,t,i){var s=Ar(Br(t,"layoutMode",0)),n=s===0,o=new ht(e,{orientation:s,space:{item:Br(t,"space.firstName",0)}});e.add.existing(o);var r=new ht(e,{orientation:"x"});e.add.existing(r);var a=Br(t,"firstNameTitle",t.nameTitle),p=ge(e,a,i.firstNameTitle||i.nameTitle);r.add(p,{expand:!0,proportion:Br(t,"proportion.firstNameTitle",0),padding:{right:Br(t,"space.firstNameTitle",0)}});var h=t.nameInput||{},u=Br(t,"firstNameInput",h),f=Ms(e,u,i.firstNameInput||i.nameInput),l=!u.hasOwnProperty("width");r.add(f,{expand:!0,proportion:l?1:0});var d=new ht(e,{orientation:"x"});e.add.existing(d);var v=Br(t,"lastNameTitle",t.nameTitle),c=ge(e,v,i.lastNameTitle||i.nameTitle);d.add(c,{expand:!0,proportion:Br(t,"proportion.lastNameTitle",0),padding:{right:Br(t,"space.lastNameTitle",0)}});var m=Br(t,"firstNameInput",h),g=Ms(e,m,i.lastNameInput||i.nameInput),y=!m.hasOwnProperty("width");if(d.add(g,{expand:!0,proportion:y?1:0}),n){var x=l?1:0,C=Br(t,"proportion.firstName",x);o.add(r,{expand:!0,proportion:C});var S=y?1:0,E=Br(t,"proportion.lastName",S);o.add(d,{expand:!0,proportion:E})}else o.add(r,{expand:l,proportion:0}),o.add(d,{expand:y,proportion:0});return o.addChildrenMap("firstNameTitle",p),o.addChildrenMap("firstNameInput",f),o.addChildrenMap("lastNameTitle",c),o.addChildrenMap("lastNameInput",g),o},hX=HPt;var YPt=Phaser.Utils.Objects.GetValue,Dy=class extends $o{constructor(t,i,s){i===void 0&&(i={}),s===void 0&&(s={}),i.orientation="y";var n=i.space;n&&(n.hasOwnProperty("names")&&(n.content=n.names),n.hasOwnProperty("namesLeft")&&(n.contentLeft=n.namesLeft),n.hasOwnProperty("namesRight")&&(n.contentRight=n.namesRight));var o=YPt(s,"background",Zt);i.background=o(t,i.background),i.title=ge(t,i.title,s.title),i.content=hX(t,i,s),i.actions=[ge(t,i.button,s.button)],super(t,i),this.type="rexNameInputDialog";var r=i.content.childrenMap;this.addChildrenMap("firstNameTitle",r.firstNameTitle),this.addChildrenMap("firstNameInput",r.firstNameInput),this.addChildrenMap("lastNameTitle",r.lastNameTitle),this.addChildrenMap("lastNameInput",r.lastNameInput),this.addChildrenMap("button",i.actions[0]),Iy.call(this),this.modalStyle=i.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(t){this.childrenMap.firstNameInput.setText(t)}setFirstName(t){return this.firstName=t,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(t){this.childrenMap.lastNameInput.setText(t)}setLastName(t){return this.lastName=t,this}};Object.assign(Dy.prototype,lX);var yb=Dy;K.register("nameInputDialog",function(e,t){var i=new yb(this.scene,e,t);return this.scene.add.existing(i),i});Z(window,"RexPlugins.UI.NameInputDialog",yb);var XPt=function(e,t){if(e){var i=Fe(e);i&&i.remove(e,t)}},ws=XPt;var Ly=Phaser.Utils.Objects.GetValue,Qf=function(e,t,i){var s=Ly(e,`proportion.${t}`,i.proportion),n=Ly(e,`align.${t}`,"center"),o=Ly(e,`space.${t}`,void 0);if(typeof o=="number"&&i.paddingKey){var r=o;o={},o[i.paddingKey]=r}var a=Ly(e,`expand.${t}`,!0);return{proportion:s,align:n,padding:o,expand:a}},Ra=function(e){return Qf(e,"header",{proportion:0,paddingKey:"bottom"})},Ia=function(e){return Qf(e,"leftSide",{proportion:0,paddingKey:"right"})},Aa=function(e){return Qf(e,"content",{proportion:1})},Oa=function(e){return Qf(e,"rightSide",{proportion:0,paddingKey:"left"})},Da=function(e){return Qf(e,"footer",{proportion:0,paddingKey:"top"})},lr=function(e){return{proportion:1,align:"center",padding:0,expand:!0}};var $Pt=function(e,t){var i=new ht(e,{orientation:t});return e.add.existing(i),i},hr=$Pt;var jPt=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ra(e));var s=hr(t,0);this.add(s,lr(e));var n=e.leftSide;n&&s.add(n,Ia(e));var o=e.content;o&&s.add(o,Aa(e));var r=e.rightSide;r&&s.add(r,Oa(e));var a=e.footer;a&&this.add(a,Da(e))},uX=jPt;var ZPt=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ra(e));var s=hr(t,0);this.add(s,lr(e));var n=e.leftSide;n&&s.add(n,Ia(e));var o=hr(t,1);s.add(o,lr(e));var r=hr(t,0);o.add(r,lr(e));var a=e.content;a&&r.add(a,Aa(e));var p=e.rightSide;p&&r.add(p,Oa(e));var h=e.footer;h&&o.add(h,Da(e))},dX=ZPt;var KPt=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ra(e));var s=hr(t,0);this.add(s,lr(e));var n=hr(t,1);s.add(n,lr(e));var o=hr(t,0);n.add(o,lr(e));var r=e.leftSide;r&&o.add(r,Ia(e));var a=e.content;a&&o.add(a,Aa(e));var p=e.footer;p&&n.add(p,Da(e));var h=e.rightSide;h&&s.add(h,Oa(e))},fX=KPt;var JPt=function(e){var t=this.scene,i=e.header;i&&this.add(i,Ra(e));var s=hr(t,0);this.add(s,lr(e));var n=e.leftSide;n&&s.add(n,Ia(e));var o=hr(t,1);s.add(o,lr(e));var r=e.content;r&&o.add(r,Aa(e));var a=e.footer;a&&o.add(a,Da(e));var p=e.rightSide;p&&s.add(p,Oa(e))},cX=JPt;var QPt=Phaser.Utils.Objects.GetValue,pX=[uX,dX,fX,cX],qPt=function(e){e===void 0&&(e={});var t=e.background,i=e.header,s=e.leftSide,n=e.content,o=e.rightSide,r=e.footer;ws(t),ws(i),ws(s),ws(n),ws(o),ws(r),this.clear(!0),t&&this.addBackground(t);var a=QPt(e,"layoutMode",0);typeof a=="string"&&(a=_Pt[a.toUpperCase()]);var p=pX[a]||pX[0];return p.call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",i),this.addChildrenMap("leftSide",s),this.addChildrenMap("content",n),this.addChildrenMap("rightSide",o),this.addChildrenMap("footer",r),this},_Pt={FFF:0,LFF:1,FFR:2,LFR:3},vX=qPt;var Fy=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexHolyGrail",this.build(i)}},tMt={build:vX};Object.assign(Fy.prototype,tMt);var Cb=Fy;K.register("holyGrail",function(e){var t=new Cb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.HolyGrail",Cb);var mX={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var i=this.getButtonsSizer(e);return i?i.getButton(t):void 0},setButtonEnable(e,t,i){return this.getButtonsSizer(e).setButtonEnable(t,i),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var i=this.getButtonsSizer(e);return i?(i.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return br(this.getButton(e,t)),this},showLeftButton(e){return br(this.getLeftButton(e)),this},showRightButton(e){return br(this.getRightButton(e)),this},showTopButton(e){return br(this.getTopButton(e)),this},showBottomButton(e){return br(this.getBottomButton(e)),this},hideButton(e,t){return Rr(this.getButton(e,t)),this},hideLeftButton(e){return Rr(this.getLeftButton(e)),this},hideRightButton(e){return Rr(this.getRightButton(e)),this},hideTopButton(e){return Rr(this.getTopButton(e)),this},hideBottomButton(e){return Rr(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,i){return this.getButtonsSizer(e).removeButton(t,i),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,i){return this.getButtonsSizer(e).forEachButtton(t,i),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}};var Kt=Phaser.Utils.Objects.GetValue,By=class extends fi{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var s=Kt(i,"expand.panel",!1);s&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(t,i),this.type="rexTabs",this.eventEmitter=Kt(i,"eventEmitter",this);var n=Kt(i,"background",void 0),o=Kt(i,"panel",void 0),r=Kt(i,"leftButtons",void 0),a=Kt(i,"leftButtonsBackground",void 0),p,h=Kt(i,"rightButtons",void 0),u=Kt(i,"rightButtonsBackground",void 0),f,l=Kt(i,"topButtons",void 0),d=Kt(i,"topButtonsBackground",void 0),v,c=Kt(i,"bottomButtons",void 0),m=Kt(i,"bottomButtonsBackground",void 0),g,y=Kt(i,"click",void 0);if(n&&this.addBackground(n),o&&this.add(o,{column:1,row:1,expand:s}),r){var x=Kt(i,"space.leftButtonsOffset",0),C=Kt(i,"space.leftButton",0),S=Kt(i,"expand.leftButtons",!1),E=Kt(i,"align.leftButtons","top");p=new xe(t,{groupName:"left",background:a,buttons:r,orientation:"y",space:{item:C},expand:S,click:y,eventEmitter:this.eventEmitter}),this.add(p,{column:0,row:1,align:E,padding:{top:x},expand:S})}if(h){var T=Kt(i,"space.rightButtonsOffset",0),P=Kt(i,"space.rightButton",0),M=Kt(i,"expand.rightButtons",!1),w=Kt(i,"align.rightButtons","top");f=new xe(t,{groupName:"right",background:u,buttons:h,orientation:"y",space:{item:P},expand:M,click:y,eventEmitter:this.eventEmitter}),this.add(f,{column:2,row:1,align:w,padding:{top:T},expand:M})}if(l){var b=Kt(i,"space.topButtonsOffset",0),I=Kt(i,"space.topButton",0),R=Kt(i,"expand.topButtons",!1),A=Kt(i,"align.topButtons","left");v=new xe(t,{groupName:"top",background:d,buttons:l,orientation:"x",space:{item:I},expand:R,align:Kt(i,"align.topButtons",void 0),click:y,eventEmitter:this.eventEmitter}),this.add(v,{column:1,row:0,align:A,padding:{left:b},expand:R})}if(c){var L=Kt(i,"space.bottomButtonsOffset",0),O=Kt(i,"space.bottomButton",0),F=Kt(i,"expand.bottomButtons",!1),G=Kt(i,"align.bottomButtons","left");g=new xe(t,{groupName:"bottom",background:m,buttons:c,orientation:"x",space:{item:O},expand:F,align:Kt(i,"align.bottomButtons",void 0),click:y,eventEmitter:this.eventEmitter}),this.add(g,{column:1,row:2,align:G,padding:{left:L},expand:F})}this.addChildrenMap("background",n),this.addChildrenMap("panel",o),this.addChildrenMap("leftButtons",r),this.addChildrenMap("rightButtons",h),this.addChildrenMap("topButtons",l),this.addChildrenMap("bottomButtons",c),this.addChildrenMap("leftButtonsSizer",p),this.addChildrenMap("rightButtonsSizer",f),this.addChildrenMap("topButtonsSizer",v),this.addChildrenMap("bottomButtonsSizer",g)}};Object.assign(By.prototype,mX);var Sb=By;K.register("tabs",function(e){var t=new Sb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Tabs",Sb);K.register("slider",function(e){var t=new Es(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Slider",Es);var Ny=class{constructor(t,i){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}else return null}setXY(t,i){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,i),this}setCellContainerAlign(t){return typeof t=="string"&&(t=w0[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var i=this.parent;this._deltaHeight===0&&t!==0?i.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&i.nonZeroDeltaHeightCount--;var s=this._deltaHeight!==t;if(this._deltaHeight=t,s){i.resetTotalRowsHeight();var n=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(n,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}};Object.assign(Ny.prototype,Hs);var gX=Ny;var xX=Phaser.Utils.Objects.GetValue,eMt=Phaser.Utils.Array.SpliceOne,Tb=class{constructor(t,i){this.parent=t,this.cells=[],this.cellPool=new hi,this.resetFromJSON(i)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var i=t.cellHeight;i===void 0&&(i=60);var s=t.cellWidth;return s===void 0&&(s=60),this.setDefaultCellHeight(i),this.setDefaultCellWidth(s),this.initCells(xX(t,"cellsCount",0)),this.setColumnCount(xX(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var i=this.cells;i.length=t;for(var s=0;s<t;s++)i[s]=null;return this}insertNewCells(t,i){var s=this.cells;if(t===s.length){var n=t+i;s.legth=n;for(var o=t;o<n;o++)s[o]=null}else{var r=[];r.length=i;for(var o=0;o<i;o++)r[o]=null;this.cells.splice(t,0,...r)}return this.resetTotalRowsHeight(),this}removeCells(t,i){for(var s=t+i,n=t;n<s;n++)this.freeCell(n);return s===this.cells.length?this.cells.length=t:(i===1?eMt(this.cells,t):this.cells.splice(t,i),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var i=this.parent;if(i.expandCellSize){var s=i.scrollMode===0?i.width:i.height,n=s/t;this.setDefaultCellWidth(n)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,i){if(i===void 0&&(i=0),t===0)return 0;if(this.defaultCellHeightMode){var p=t/this.defaultCellHeight;switch(i){case 1:p=Math.ceil(p);break;default:p=Math.floor(p);break}return p}for(var s=this.rowCount,n=t,o,r,a,p=0;;)if(a=this.getRowHeight(p),n-=a,o=p>=0&&p<s,n>0&&o)p+=1;else{if(n===0)return i===2&&(p+=1),p;if(i===1){var h=p;p+=1,o=p>=0&&p<s,o||(p=h)}return p}}widthToColIndex(t,i){if(t===0)return 0;var s=t/this.defaultCellWidth;return i?s=Math.ceil(s):s=Math.floor(s),s}colRowToCellIndex(t,i){return t>=this.colCount?null:i*this.colCount+t}rowIndexToHeight(t,i){if(this.defaultCellHeightMode)return(i-t+1)*this.defaultCellHeight;for(var s,n=0,o=t;o<=i;o++)s=this.getRowHeight(o),n+=s;return n}colIndexToWidth(t,i){return(i-t+1)*this.defaultCellWidth}getRowHeight(t){var i=this.colCount;if(i<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var s=0,n,o=0;o<i;o++)n=this.getCellHeight(this.colRowToCellIndex(o,t)),s<n&&(s=n);return s}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var i;if(this.defaultCellHeightMode)i=this.defaultCellHeight;else{var s=this.getCell(t,!1),n=s?s.deltaHeight:0;i=this.defaultCellHeight+n}return i}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,i){if(!this.isValidCellIdx(t))return null;if(i===void 0&&(i=!0),this.cells[t]===null&&i){var s=this.newCell(t);this.cells[t]=s}return this.cells[t]}newCell(t){var i=this.cellPool.pop();return i===null?i=new gX(this):i.setParent(this),i.index=t,i}buildCellIndex(t){t===void 0&&(t=0);for(var i=this.cells,s,n=t,o=i.length;n<o;n++)s=i[n],s&&(s.index=n);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}},yX=Tb;var iMt=function(e){var t=this.table,i=this.topTableOY,s=this.bottomTableOY,n=e>i,o=e<s;if(this.clampTableOXY){var r=t.rowCount,a=t.heightToRowIndex(this.instHeight,1);r<a?e=0:n?e=i:o&&(e=s)}return this._tableOY!==e&&(this._tableOY=e),n&&(this.execeedTopState||this.emit("execeedtop",this,e,i)),this.execeedTopState=n,o&&(this.execeedBottomState||this.emit("execeedbottom",this,e,s)),this.execeedBottomState=o,this},CX=iMt;var rMt=function(e){var t=this.table,i=this.leftTableOX,s=this.rightTableOX,n=e>this.leftTableOX,o=e<this.rightTableOX;if(this.clampTableOXY){var r=t.colCount,a=t.widthToColIndex(this.instWidth,!0);r<a?e=0:n?e=i:o&&(e=s)}return this._tableOX!==e&&(this._tableOX=e),n&&(this.execeedLeftState||this.emit("execeedleft",this,e,i)),this.execeedLeftState=n,o&&(this.execeedRightState||this.emit("execeedright",this,e,s)),this.execeedRightState=o,this},SX=rMt;var nMt=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask},Bu=nMt;var sMt=Phaser.Geom.Intersects.RectangleToRectangle,aMt=Phaser.Geom.Rectangle.Overlaps,oMt=function({parent:e,mask:t,children:i,onVisible:s,onInvisible:n,scope:o}){if(t){i===void 0&&(i=e.getAllChildren());for(var r=!!s||!!n,a=e.getBounds(),p=Bu(t),h,u,f,l,d=0,v=i.length;d<v;d++)if(h=i[d],h!==p&&lMt(h)){if(l=h.visible,h.getBounds)switch(u=h.getBounds(u),f=hMt(a,u),f){case 4:uMt(e,h,t);break;case 0:sMt(a,u)||aMt(a,u)?Eb(e,h,t):dMt(e,h,t);break;default:Eb(e,h,t);break}else Eb(e,h,t);if(r&&h.visible!==l){var c=h.visible?s:n;c&&(o?c.call(o,h,e):c(h,e))}}}},lMt=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t)if(t.visible){var i=t.parent;if(i){e=i;continue}else return!0}else return!1;else return e.visible}},hMt=function(e,t){var i=t.top,s=t.bottom,n=t.left,o=t.right,r=0;return r+=e.contains(n,i)?1:0,r+=e.contains(n,s)?1:0,r+=e.contains(o,i)?1:0,r+=e.contains(o,s)?1:0,r},uMt=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},Eb=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(i),e.setChildMaskVisible(t,!0))},dMt=function(e,t,i){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))},TX=oMt;var Nu=Phaser.Utils.Objects.GetValue,fMt={update:0,everyTick:1},Gy={setupChildrenMask(e){return e===!1?this:(this.setMaskUpdateMode(Nu(e,"updateMode",0)),this.enableChildrenMask(Nu(e,"padding",0)),this.setMaskLayer(Nu(e,"layer",void 0)),this.onMaskGameObjectVisible=Nu(e,"onVisible"),this.onMaskGameObjectInvisible=Nu(e,"onInvisible"),this.maskGameObjectCallbackScope=Nu(e,"scope"),this.startMaskUpdate(),this)},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=fMt[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=ri.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return!this.childrenMask||!this.maskChildrenFlag||this.alpha===0||!this.visible?this:(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):TX({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this)},layoutChildrenMask(){if(!this.childrenMask)return this;var e=Bu(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}};var cMt=function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,i=e===1&&t===1;i||this.setScale(1);var s=this.table,n=this.tableOYOffset,o=this.tableOY+n,r=this.tableOX;this.startRowIndex=Math.max(s.heightToRowIndex(-o,2),0);for(var a=this.startRowIndex,p=Math.max(s.widthToColIndex(-r),0),h=p,u=s.colRowToCellIndex(h,a),f=this.bottomBound,l=this.rightBound,d=s.cellsCount-1,v=s.colCount-1,c=this.getCellTLX(h),m=c,g=this.getCellTLY(a)+n,y=g;y<f&&u<=d;){if(this.table.isValidCellIdx(u)){var x=s.getCell(u,!0);this.visibleCells.set(x),this.preVisibleCells.contains(x)||this.showCell(x);var C,S;if(this.scrollMode===0?(C=m,S=y):(C=y,S=m),x.cellContainerAlign==null)x.setXY(C,S);else{var E=x.getContainer();Rn(E,C,S,x.width,x.height,x.cellContainerAlign),x.setXY(E.x,E.y)}}m<l&&h<v?(m+=s.getColWidth(h),h+=1):(m=c,y+=s.getRowHeight(a),h=p,a+=1),u=s.colRowToCellIndex(h,a)}i||this.setScale(e,t)}},EX=cMt;var pMt=function(e){var t=null,i=e.getContainer();if(i?(t=i,e.popContainer()):this.cellContainersPool&&(t=this.cellContainersPool.getFirstDead(),t!==null&&t.setActive(!0).setVisible(!0)),this.emit("cellvisible",e,t,this),this.cellContainersPool){var i=e.getContainer();i?t===null?this.cellContainersPool.add(i):t!==i&&(this.cellContainersPool.add(i),this.cellContainersPool.killAndHide(t)):t!==null&&this.cellContainersPool.killAndHide(t)}},ky=pMt;var vMt=function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY,i=this.tableOX+this.table.colIndexToWidth(0,e-1)+t;return i},PX=vMt;var mMt=function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX,i=this.tableOY+this.table.rowIndexToHeight(0,e-1)+t;return i},MX=mMt;var gMt=function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(i){t.contains(i)||this.hideCell(i)},this)},wX=gMt;var xMt=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},Vy=xMt;var yMt=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),e&&(bX.call(this),this.hideCells()),bX.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},bX=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},RX=yMt;var CMt=function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},IX=CMt;var Pb=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var i=this.tableOY-(this.scrollMode===0?t:e),s=this.tableOX-(this.scrollMode===0?e:t),n=this.table,o=n.heightToRowIndex(-i,0),r=n.widthToColIndex(-s),a=n.colRowToCellIndex(r,o);return a===null||!this.isCellVisible(a)?null:a},AX=function(e,t){var i=Pb.call(this,e,t);if(i!==null)return this.getCellContainer(i)};var OX=function(e,t){return this.visibleCells.each(e,t),this},DX=function(e,t){return this.visibleCells.iterate(e,t),this},LX=function(e,t){return this.table.cells.slice().forEach(e,t),this},FX=function(e,t){return this.table.cells.forEach(e,t),this};var SMt=function(e){var t=this.cellsCount;return t===e?this:(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t),this)},BX=SMt;var TMt=Phaser.Math.Clamp,EMt=function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0?this:(e=TMt(e,0,this.cellsCount),this.table.insertNewCells(e,t),this)},NX=EMt;var PMt=function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var i,s=e,n=e+t;s<n;s++)i=this.getCell(s,!1),i&&(this.visibleCells.contains(i)&&(Vy.call(this,i),this.visibleCells.delete(i)),this.preVisibleCells.delete(i));return this.table.removeCells(e,t),this},GX=PMt;var MMt=function(e){return this.table.colCount===e?this:(this.table.setColumnCount(e),this)},kX=MMt;var wMt=function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},VX=wMt;var bMt=function(e){var t=this.table.getCell(e,!1);return!t||!t.container?this:(ky.call(this,t),this)},UX=bMt;var zX={setTableOY:CX,setTableOX:SX,showCells:EX,showCell:ky,getCellTLX:PX,getCellTLY:MX,hideCells:wX,hideCell:Vy,updateTable:RX,isCellVisible:IX,pointToCellIndex:Pb,pointToCellContainer:AX,eachVisibleCell:OX,iterateVisibleCell:DX,eachCell:LX,iterateCell:FX,setCellsCount:BX,insertNewCells:NX,removeCells:GX,setColumnCount:kX,setGridSize:VX,updateVisibleCell:UX};Object.assign(zX,Gy);var WX=zX;var RMt=Phaser.GameObjects.Group,HX=Phaser.Structs.Set,Nr=Phaser.Utils.Objects.GetValue,Uy=class extends Pn{constructor(t,i,s,n,o,r){r===void 0&&(r={}),super(t,i,s,n,o),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new HX,this.preVisibleCells=new HX,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1;var a=Nr(r,"reuseCellContainer",!1);a&&(this.cellContainersPool=new RMt(t));var p=Nr(r,"cellVisibleCallback",null);if(p!==null){var h=Nr(r,"cellVisibleCallbackScope",void 0);this.on("cellvisible",p,h)}if(p=Nr(r,"cellInvisibleCallback",null),p!==null){var h=Nr(r,"cellInvisibleCallbackScope",void 0);this.on("cellinvisible",p,h)}Nr(r,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Nr(r,"mask",void 0)),this.setScrollMode(Nr(r,"scrollMode",0)),this.setClampMode(Nr(r,"clampTableOXY",!0)),this.setStartFromBottomEnable(Nr(r,"startFromBottom",!1));var u,f,l,d=this.scrollMode===0;if(d?(u=r.cellWidth,f=r.cellHeight,l=r.columns):(u=r.cellHeight,f=r.cellWidth,l=Nr(r,"rows",r.columns)),this.fixedCellSize=Nr(r,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&u===void 0,l||(l=1),this.fixedCellSize)l=Math.max(Math.floor(this.instWidth/u),1);else if(this.expandCellSize){var n=d?this.width:this.height;u=n/l}r.cellWidth=u,r.cellHeight=f,r.columns=l,this.table=new yX(this,r),this.updateTable()}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.table.destroy(t),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=IMt[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t){return t===void 0&&(t=!0),this.clampTableOXY=t,this}setStartFromBottomEnable(t){return t===void 0&&(t=!0),this.startFromBottomEnable=t,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(t){this.setTableOY(t).updateTable()}set tableOX(t){this.setTableOX(t).updateTable()}setTableOXY(t,i){return this.setTableOY(i).setTableOX(t),this}addTableOY(t){return this.setTableOY(this.tableOY+t),this}addTableOX(t){return this.setTableOX(this.tableOX+t),this}addTableOXY(t,i){return this.addTableOY(i).addTableOX(t),this}setTableOYByPercentage(t){return this.setTableOY(-this.tableVisibleHeight*t),this}getTableOYPercentage(){var t=this.tableVisibleHeight;return t===0?0:this.tableOY/-t}setTableOXByPercentage(t){return this.setTableOX(-this.tableVisibleWidth*t),this}getTableOXPercentage(){var t=this.tableVisibleWidth;return t===0?0:this.tableOX/-t}set t(t){this.setTableOYByPercentage(t).updateTable()}get t(){return this.getTableOYPercentage()}set s(t){this.setTableOXByPercentage(t).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(t){this.scrollToBottom();var i=this.table.rowIndexToHeight(0,t-1);return this.setTableOY(-i).updateTable(),this}scrollToNextRow(t){return t===void 0&&(t=1),this.scrollToRow(this.startRowIndex+t),this}getCell(t){return this.table.getCell(t,!0)}getCellContainer(t){var i=this.table.getCell(t,!1),s;return i&&(s=i.getContainer()),s}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(t,i){var s;return typeof t=="number"?s=this.table.getCell(t,!0):s=t,s.height=i,this}setCellWidth(t,i){var s;return typeof t=="number"?s=this.table.getCell(t,!0):s=t,s.width=i,this}resetAllCellsSize(t,i){if(this.scrollMode===1){var s=t;t=i,i=s}this.table.setDefaultCellHeight(i).setDefaultCellWidth(t);for(var n=this.table.cells,o=0,r=n.length;o<r;o++){var a=n[o];a&&(a.deltaHeight=0)}if(this.fixedCellSize){var p=Math.floor(this.instWidth/t);this.table.setColumnCount(p)}return this.updateTable(!0,!0),this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var t=this.tableHeight-this.instHeight;if(t<0)return-t}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var t=this.tableHeight-this.instHeight;return t<0&&(t=0),t}get tableVisibleWidth(){var t=this.tableWidth-this.instWidth;return t<0&&(t=0),t}get bottomLeftY(){return-(this.displayHeight*this.originY)+this.displayHeight}get topRightX(){return-(this.displayWidth*this.originX)+this.displayWidth}get topLeftX(){return-(this.displayWidth*this.originX)}get topLeftY(){return-(this.displayHeight*this.originY)}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(t,i){if(this.width===t&&this.height===i)return this;if(super.resize(t,i),this.fixedCellSize){var s=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(s)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(Uy.prototype,WX);var IMt={v:0,vertical:0,h:1,horizontal:1};var YX=Uy;var XX=YX;var AMt=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.tableOY},set:function(t){e.tableOY=t}}),Object.defineProperty(e,"childOX",{configurable:!0,get:function(){return e.tableOX},set:function(t){e.tableOX=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTableOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTableOY}}),Object.defineProperty(e,"leftChildOX",{get:function(){return e.leftTableOX}}),Object.defineProperty(e,"rightChildOX",{get:function(){return e.rightTableOX}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.instHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.tableHeight}}),Object.defineProperty(e,"childVisibleWidth",{get:function(){return e.instWidth}}),Object.defineProperty(e,"childWidth",{get:function(){return e.tableWidth}})},$X=AMt;var OMt=function(e){e.on("cellvisible",function(t,r,s){var n=this.createCellContainerCallback,o=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items;var r;o?r=n.call(o,t,r,s):r=n(t,r,s),r&&(t.cellContainerAlign==null&&r.setOrigin&&r.setOrigin(0),r.isRexSizer&&r.layout()),t.item=void 0,t.items=void 0,t.setContainer(r)},this)},jX=OMt;var DMt=function(e,t,i,s,n,o,r){var a;if(n===void 0)a=s;else{var p=o.camera,h=s+p.scrollX*(i.scrollFactorX-1),u=n+p.scrollY*(i.scrollFactorY-1);a=i.pointToCellIndex(h,u)}if(a!=null){var f=i.getCellContainer(a);f&&e.emit(t,f,a,o,r)}},Pi=DMt;var LMt=function(e,t){e.on("pointerdown",function(i,s,n,o){Pi(this.eventEmitter,"cell.down",e,i.worldX,i.worldY,i,o)},this).on("pointerup",function(i,s,n,o){Pi(this.eventEmitter,"cell.up",e,i.worldX,i.worldY,i,o)},this)},ZX=LMt;var FMt=function(e,t){e.on("pointermove",KX,this).on("pointerover",KX,this).on("pointerout",BMt,this)},KX=function(e,t,i,s){var n=this.childrenMap.child,o=e.camera,r=e.worldX+o.scrollX*(n.scrollFactorX-1),a=e.worldY+o.scrollY*(n.scrollFactorY-1),p=n.pointToCellIndex(r,a);if(p!==n.input.lastOverCellIndex){var h=n.input.lastOverCellIndex;n.input.lastOverCellIndex=p,Pi(this.eventEmitter,"cell.out",n,h,void 0,e,s),Pi(this.eventEmitter,"cell.over",n,p,void 0,e,s)}},BMt=function(e,t){var i=this.childrenMap.child,s=i.input.lastOverCellIndex;i.input.lastOverCellIndex=void 0,Pi(this.eventEmitter,"cell.out",i,s,void 0,e,t)},JX=FMt;var NMt=Phaser.Utils.Objects.GetValue,GMt=function(e,t){var i=NMt(t,"click",void 0);i!==!1&&(i===void 0&&(i={}),i.threshold=10,e._click=new En(e,i),e._click.on("click",function(s,n,o,r){Pi(this.eventEmitter,"cell.click",n,o.worldX,o.worldY,o,r)},this))},QX=GMt;var kMt=Phaser.Utils.Objects.GetValue,VMt=function(e,t){var i=kMt(t,"tap",void 0);i!==!1&&(e._tap=new Do(e,i),e._tap.on("tap",function(s,n,o){var r=`cell.${s.tapsCount}tap`;Pi(this.eventEmitter,r,s.gameObject,s.worldX,s.worldY,o)},this))},qX=VMt;var UMt=Phaser.Utils.Objects.GetValue,zMt=function(e,t){var i=UMt(t,"press",void 0);i!==!1&&(e._press=new Lo(e,i),e._press.on("pressstart",function(s,n,o){Pi(this.eventEmitter,"cell.pressstart",e,s.worldX,s.worldY,o)},this).on("pressend",function(s,n,o){Pi(this.eventEmitter,"cell.pressend",e,s.worldX,s.worldY,o)},this))},_X=zMt;var WMt=Phaser.Utils.Objects.GetValue,HMt=function(e,t){var i=WMt(t,"swipe",void 0);i!==!1&&(i===void 0&&(i={}),i.dir="4dir",e._swipe=new Fo(e,i),e._swipe.on("swipe",function(s,n,o){var r=s.left?"left":s.right?"right":s.up?"up":"down";Pi(this.eventEmitter,`cell.swipe${r}`,e,s.worldX,s.worldY,o)},this))},t$=HMt;var YMt=function(e,t){e.setInteractive(),ZX.call(this,e,t),JX.call(this,e,t),QX.call(this,e,t),qX.call(this,e,t),_X.call(this,e,t),t$.call(this,e,t)},e$=YMt;var XMt=function(e,t){e===void 0?this.items=[]:this.items=e,t===void 0&&(t=!0);var i=this.childrenMap.child;return i.setCellsCount(this.items.length),t&&(i.updateTable(!0),this.resizeController()),this},i$=XMt;var r$={scrollToRow(e){var t=this.childrenMap.child;return t.scrollToRow(e),this},scrollToNextRow(e){var t=this.childrenMap.child;return t.scrollToNextRow(e),this}};var sn=Phaser.Utils.Objects.GetValue,zy=class extends Ta{constructor(t,i){i===void 0&&(i={});var s=Iu(i),n=sn(i,"table",void 0);n===void 0&&(n={}),n.scrollMode=s===2?0:s,n.clampTableOXY=sn(i,"clampChildOY",!1);var o=sn(n,"width",void 0),r=sn(n,"height",void 0),a=new XX(t,0,0,o,r,n);t.add.existing(a);var p,h;n.scrollMode===0?(p=o===void 0,h=r===void 0):(p=r===void 0,h=o===void 0),$X(a),a._minWidth=o===void 0?0:void 0,a._minHeight=r===void 0?0:void 0,i.type="rexGridTable",i.child={gameObject:a,expandWidth:p,expandHeight:h};var u=sn(i,"space",void 0);u&&(u.child=sn(u,"table",0)),super(t,i),this.addChildrenMap("table",a),this.addChildrenMap("tableLayer",a.maskLayer),this.eventEmitter=sn(i,"eventEmitter",this);var f=sn(i,"createCellContainerCallback",re),l=sn(i,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(f,l),jX.call(this,a),this.resizeControllerFlag=!1;var d=s===0?"cellheightchange":"cellwidthchange";a.on(d,function(){this.resizeControllerFlag=!0},this),sn(n,"interactive",!0)&&e$.call(this,a,n),this.setItems(sn(i,"items",[]),!1),t.game.events.on("poststep",this.onPostStep,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(t))}setCreateCellContainerCallback(t,i){return this.createCellContainerCallback=t,this.createCellContainerCallbackScope=i,this}refresh(){return this.setItems(this.items),this}getCell(t){var i=this.childrenMap.child;return i.getCell(t)}getCellContainer(t){var i=this.childrenMap.child;return i.getCellContainer(t)}updateVisibleCell(t){var i=this.childrenMap.child;return i.updateVisibleCell(t)}resetAllCellsSize(t,i){var s=this.childrenMap.child;return s.resetAllCellsSize(t,i),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){var t=this.childrenMap.child;return t.startRowIndex}},$Mt={setItems:i$};Object.assign(zy.prototype,r$,$Mt);var Mb=zy;K.register("gridTable",function(e){var t=new Mb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.GridTable",Mb);var jMt=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},qf=jMt;var ZMt=function(e,t){e.popUp(qf(e.root.easeIn,e))},KMt=function(e,t){e.scaleDown(qf(e.root.easeOut,e))},n$={setTransitInCallback(e){return e===void 0&&(e=ZMt),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=KMt),this.transitOutCallback=e,this}};var JMt=function(e,t,i,s,n){var o=Tr(e),r=o.time.delayedCall(t,function(){o.sys.events.once("postupdate",function(){i.call(s,n)})});return r},s$=JMt;var a$={delayCall(e,t,i){return this.timer=s$(this,e,t,i),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var QMt=function(e,t){var s=this.childrenMap.subMenu;if(s&&s.parentButton===e)return this;this.collapseSubMenu();var i;this.root.toggleOrientation?i=this.orientation===0?1:0:i=this.orientation;var s=new this.constructor(this.scene,{items:t,orientation:i,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(s),this.childrenMap.subMenu=s,this.root.emit("expand",s,e,this),this},o$=QMt;var qMt=function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},l$=qMt;var _Mt=function(){var e=this.childrenMap.subMenu;return e===void 0?this:(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse(),this)},h$=_Mt;var u$={expandSubMenu:o$,collapse:l$,collapseSubMenu:h$};Object.assign(u$,n$,a$);var d$=u$;var t1t=function(e,t,i,s){var n;return i&&(t.scene=e,s?n=i.call(s,t):n=i(t),t.scene=void 0),n},f$=t1t;var e1t=function(e,t,i,s){var n,o=[],r;if(t&&i)for(var a=0,p=t.length;a<p;a++)n=t[a],n.scene=e,s?r=i.call(s,n,a,t):r=i(n,a,t),n.scene=void 0,o.push(r);return o},c$=e1t;var i1t=function(e){e.on(e.root.expandEventName,function(t,i){if(!this._isPassedEvent){var s=this.root.childrenKey,n=this.items[i][s];n&&this.expandSubMenu(t,n)}},e).on("button.click",function(t,i,s,n){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",t,i,s,n),this.root._isPassedEvent=!1)},e).on("button.over",function(t,i,s,n){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",t,i,s,n),this.root._isPassedEvent=!1)},e).on("button.out",function(t,i,s,n){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",t,i,s,n),this.root._isPassedEvent=!1)},e)},p$=i1t;var r1t=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Ar(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},wb=r1t;var n1t=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)},v$=n1t;var Li=Phaser.Utils.Objects.GetValue,Yy=class extends xe{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1);var s=i._rootMenu,n=i._parentMenu,o=i._parentButton,r=Li(i,"popup",!0),a=Li(i,"items",void 0),p=Li(i,"createBackgroundCallback",void 0),h=Li(i,"createBackgroundCallbackScope",void 0);i.background=f$(t,a,p,h);var u=Li(i,"createButtonCallback",void 0),f=Li(i,"createButtonCallbackScope",void 0);if(i.buttons=c$(t,a,u,f),super(t,i),this.type="rexMenu",this.items=a,this.root=s===void 0?this:s,this.isRoot=this.root===this,this.parentMenu=n,this.parentButton=o,this.timer=void 0,this.isRoot){this.isPopUpMode=r;var l=i.bounds;l===void 0&&(l=Sr(t)),this.bounds=l,this.subMenuSide=[this.y<l.centerY?Rb:Hy,this.x<l.centerX?bb:Wy];var d=Li(i,"subMenuSide",void 0);d!==void 0&&(typeof d=="string"&&(d=s1t[d]),this.subMenuSide[this.orientation]=d),this.toggleOrientation=Li(i,"toggleOrientation",!1),this.expandEventName=Li(i,"expandEvent","button.click"),this.easeIn=wb(this,Li(i,"easeIn",0)),this.easeOut=wb(this,Li(i,"easeOut",0)),this.setTransitInCallback(Li(i,"transitIn")),this.setTransitOutCallback(Li(i,"transitOut")),this.createBackgroundCallback=p,this.createBackgroundCallbackScope=h,this.createButtonCallback=u,this.createButtonCallbackScope=f,this.childrenKey=Li(i,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=Li(i,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&t.input.on("pointerdown",this.onPointerDownOutside,this)}var v=0,c=0;if(!this.root.easeIn.sameOrientation){var m=qf(this.root.easeIn,this).orientation,g=n?n.orientation:this.orientation,d=this.root.subMenuSide[g];m===0&&d===Wy&&(v=1),m===1&&d===Hy&&(c=1)}if(r&&this.setOrigin(v,c).layout(),!this.isRoot){this.setScale(this.root.scaleX,this.root.scaleY);var d=this.root.subMenuSide[n.orientation];switch(d){case Wy:this.alignTop(o.top).alignRight(o.left);break;case bb:this.alignTop(o.top).alignLeft(o.right);break;case Hy:this.alignLeft(o.left).alignBottom(o.top);break;case Rb:this.alignLeft(o.left).alignTop(o.bottom);break}}p$(this),r&&(this.pushIntoBounds(this.root.bounds),v$.call(this))}destroy(t){!this.scene||this.ignoreDestroy||(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(t),this.removeDelayCall())}isInTouching(t){return super.isInTouching(t)?!0:this.childrenMap.subMenu?this.childrenMap.subMenu.isInTouching(t):!1}onPointerDownOutside(t){this.isInTouching(t)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}},Wy=2,bb=0,Hy=3,Rb=1,s1t={up:Hy,down:Rb,left:Wy,right:bb};Object.assign(Yy.prototype,d$);var Ib=Yy;K.register("menu",function(e){var t=new Ib(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Menu",Ib);var a1t={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return e===void 0&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return e===void 0&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=o1t[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}},o1t={down:0,up:1},m$=a1t;var l1t=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer,s=!1;if(i.hidden)e=0;else switch(this.scrollMode){case 0:e=this.getChildWidth(t),e===void 0&&(s=!0);break;case 1:e=0;break;default:e=0;break}if(!s)return e},g$=l1t;var h1t=function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,i=t.rexSizer,s=!1;if(i.hidden)e=0;else switch(this.scrollMode){case 0:e=0;break;case 1:e=this.getChildHeight(t),e===void 0&&(s=!0);break;default:e=0;break}if(!s)return e},x$=h1t;var u1t=function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},y$=u1t;var d1t=function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX;break}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},C$=d1t;var f1t=function(){var e=this.child,t,i;if(!e.rexSizer.hidden){switch(this.scrollMode){case 0:t=this.width*this.scaleX;break;case 1:i=this.height*this.scaleY;break;default:break}e.isRexSizer?e.runLayout(this,t,i):ne(e,t,i),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},S$=f1t;var c1t=function(e,t){t||e.clearMask&&e.clearMask(!1)},T$=c1t;var E$={getChildrenWidth:g$,getChildrenHeight:x$,getChildrenSizers:y$,resetChildPosition:C$,layoutChildren:S$,removeChildCallback:T$};Object.assign(E$,Gy);var P$=E$;var M$=Phaser.Utils.Objects.IsPlainObject,Gr=Phaser.Utils.Objects.GetValue,p1t=Phaser.Display.Align.TOP_LEFT,Xy=class extends Ir{constructor(t,i,s,n,o,r){M$(i)?(r=i,i=Gr(r,"x",0),s=Gr(r,"y",0),n=Gr(r,"width",void 0),o=Gr(r,"height",void 0)):M$(n)&&(r=n,n=Gr(r,"width",void 0),o=Gr(r,"height",void 0)),super(t,i,s,n,o,r),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(Gr(r,"scrollMode",0));var a=Gr(r,"clampChildOY",!0),p=Gr(r,"clampChildOX",a);this.setClampMode(a,p);var h=Gr(r,"child",void 0),u=Gr(r,"expand",!0);h.setOrigin&&h.setOrigin(0),this.add(h),this.sizerChildren=[h];var f=this.getSizerConfig(h);f.align=p1t,f.expand=u,this.child=h;var l=Gr(r,"mask");this.setupChildrenMask(l),this.childrenMask&&(this.maskGameObject=Bu(this.childrenMask))}destroy(t){!this.scene||this.ignoreDestroy||(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=ty[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,i){return this.clampChildOY=t,this.clampChildOX=i,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.displayHeight:this.displayWidth}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.displayWidth:this.displayHeight}get childHeight(){return this.scrollMode===0||this.scrollMode===2?gt(this.child):mt(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?mt(this.child):gt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var i=this.topChildOY,s=this.bottomChildOY,n=this.childOYExceedTop(t),o=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:n?t=i:o&&(t=s)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),n&&(this.execeedTopState||this.emit("execeedtop",this,t,i)),this.execeedTopState=n,o&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=o}get childOX(){return this._childOX}set childOX(t){var i=this.leftChildOX,s=this.rightChildOX,n=this.childOXExceedLeft(t),o=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:n?t=i:o&&(t=s)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),n&&(this.execeedLeftState||this.emit("execeedleft",this,t,i)),this.execeedLeftState=n,o&&(this.execeedRightState||this.emit("execeedright",this,t,s)),this.execeedRightState=o}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}};Object.assign(Xy.prototype,P$);var w$=Xy;var v1t=function(e,t,i,s){if(!this.hasChild(e))return this;var n,o;switch(this.scrollMode){case 0:n=this.childOY+$y.call(this,e,"y",t);break;case 1:n=this.childOY+$y.call(this,e,"x",t);break;default:n=this.childOY+$y.call(this,e,"y",t),o=this.childOX+$y.call(this,e,"x",t);break}return i===void 0||i<=0?(this.childOY=n,this.scrollMode===2&&(this.childOX=o)):(this._easeScrollChildOY===void 0&&(this._easeScrollChildOY=new We(this)),this._easeScrollChildOY.restart({key:"childOY",to:n,duration:i,ease:s}),this.scrollMode===2&&(this._easeScrollChildOX===void 0&&(this._easeScrollChildOX=new We(this)),this._easeScrollChildOX.restart({key:"childOX",to:o,duration:i,ease:s}))),this},b$=["top","bottom","centerY","center"],R$=["left","right","centerX","center"],$y=function(e,t,i){t=t.toUpperCase();var s=t==="Y",n=this.childrenMap.child,o;if(s){if(i)for(var r=0,a=b$.length;r<a;r++){var p=b$[r];if(i.indexOf(p)!==-1){i=p;break}}switch(i){case"top":o=n.top-ls(e).y;break;case"bottom":o=n.bottom-vo(e).y;break;case"centerY":case"center":o=n.centerY-AP(e).y;break;default:var h=n.top-ls(e).y,u=n.bottom-vo(e).y;h<=0&&u>=0?o=0:o=Math.abs(h)<=Math.abs(u)?h:u;break}}else{if(i)for(var r=0,a=R$.length;r<a;r++){var p=R$[r];if(i.indexOf(p)!==-1){i=p;break}}switch(i){case"left":o=n.left-ls(e).x;break;case"right":o=n.right-po(e).x;break;case"centerX":case"center":o=n.centerX-AP(e).x;break;default:var f=n.left-ls(e).x,l=n.right-po(e).x;f<=0&&l>=0?o=0:o=Math.abs(f)<=Math.abs(l)?f:l;break}}return o},I$=v1t;var La=Phaser.Utils.Objects.GetValue,jy=class extends Ta{constructor(t,i){i===void 0&&(i={});var s=Iu(i),n=La(i,"panel",void 0);n===void 0&&(n={}),n.scrollMode=s,n.clampChildOY=La(i,"clampChildOY",!1),n.clampChildOX=La(i,"clampChildOX",!1);var o=new w$(t,n);t.add.existing(o);var r,a;switch(s){case 0:r=La(i,"expand.panel",!0),a=!0;break;case 1:r=!0,a=La(i,"expand.panel",!0);break;default:r=!0,a=!0}i.type="rexScrollablePanel",i.child={gameObject:o,expandWidth:r,expandHeight:a,align:La(i,"align.panel","center")};var p=La(i,"space",void 0);p&&(p.child=La(p,"panel",0)),super(t,i),this.addChildrenMap("panel",o.child),this.addChildrenMap("panelLayer",o.maskLayer),this.addChildrenMap("mask",o.maskGameObject),this.addChildrenMap("scrollableBlock",o)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),ma(this.childrenMap.child,t),this}},m1t={scrollToChild:I$};Object.assign(jy.prototype,m1t);var jo=jy;var g1t=Phaser.Utils.Objects.GetValue,x1t=function(){var e=this.scene,t,i=this.listCreateBackgroundCallback;i&&(t=i.call(this,e),e.add.existing(t));var f=[],s=this.listCreateButtonCallback;if(s)for(var n=this.options,o=0,r=n.length;o<r;o++){var a=s.call(this,e,n[o],o,n);a&&(e.add.existing(a),f.push(a))}var p=this.listWidth;p===void 0&&(this.listAlignMode==="text"?p=this.getElement("text").width:p=this.width);var h=this.listHeight,u={width:p,buttons:f,space:this.listSpace},f,l,d;if(this.listCreateSliderThumbCallback?d=h>0||this.listMaxHeight>0:d=!1,!d)u.height=h,f=A$(e,u,this.listWrapEnable),l=f;else{var f=A$(e,u,this.listWrapEnable);if(this.listMaxHeight>0&&(f.layout(),f.height<=this.listMaxHeight&&(l=f)),!l){h===0&&(h=this.listMaxHeight);var v=O$(e,this.listCreateSliderTrackCallback),c=O$(e,this.listCreateSliderThumbCallback);l=new jo(e,{height:h,scrollMode:0,panel:{child:f,mask:{padding:1}},slider:{track:v,thumb:c,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:g1t(this.listSpace,"panel",0)}}),e.add.existing(l)}}return t&&l.addBackground(t,"background"),this.listDraggable&&l.setDraggable(!0),l!==f&&f.on("button.over",function(m,g,y,x){l.emit("button.over",m,g,y,x)}).on("button.out",function(m,g,y,x){l.emit("button.out",m,g,y,x)}).on("button.click",function(m,g,y,x){l.emit("button.click",m,g,y,x)}),l},A$=function(e,t,i){var s;return i?(t.orientation="x",s=new Fr(e,t)):(t.orientation="y",s=new xe(e,t)),e.add.existing(s),s},O$=function(e,t,i){var s;return t&&(s=t.call(i,e),e.add.existing(s)),s},D$=x1t;var y1t=function(e,t,i,s,n){s===void 0&&(s="Linear");var o={};switch(o.mode=0,i){case 0:case"x":o.end={x:0};break;case 1:case"y":o.end={y:0};break;default:o.end=0;break}return o.duration=t,o.ease=s,n===void 0?n=new cs(e,o):n.resetFromJSON(o),n.restart(),n},L$=y1t;var C1t=function(e,t,i,s,n){return ir(e,t)?Ot(e,t):i&&ir(e,i)?Ot(e,i):s&&ir(e,s)?Ot(e,s):n},F$=C1t;var Gu=Phaser.Utils.Objects.GetValue,S1t=function(e,t){var i=Gu(t,"expandDirection",void 0);typeof i=="string"&&(i=T1t[i]);var s=F$(t,"alignTarget","alignTargetX"),n=Gu(t,"alignTargetY",s),o=Gu(t,"alignOffsetX",0),r=Gu(t,"alignOffsetY",0),a=Gu(t,"alignSide",""),p=a.includes("right"),h=Gu(t,"bounds"),u=i===0,f=i===1,l=!u&&!f,d=p?1:0,v=u||l?0:1;e.setOrigin(d,v);var c,m;p?c=s.getTopRight().x:c=s.getTopLeft().x,m=n.getBottomLeft().y,e.setPosition(c+o,m+r);var g=h;g||(g=Sr(e.scene)),l&&e.getBottomLeft().y>g.bottom&&(m=n.getTopLeft().y,e.setOrigin(0,1).setPosition(c+o,m+r))},T1t={down:0,up:1},B$=S1t;var N$=Phaser.Utils.Objects.GetValue,Ab=class extends du{constructor(t,i){i===void 0&&(i={}),i.transitIn==null&&(i.transitIn=function(o,r){Cf(o,r,"y","Cubic")}),i.transitOut==null&&(i.transitOut=function(o,r){L$(o,r,"y","Linear")}),i.manualClose=!0,i.clickOutsideClose=!0,i.destroy=!0,super(t,i),B$(t,i),t.isRexSizer&&t.layout();var s=N$(i,"touchOutsideClose",!1),n=N$(i,"anyTouchClose",!1);n&&(s=!1),n?this.once("open",this.anyTouchClose,this):s&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&fa(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}},G$=Ab;var k$=G$;var Zy=k$;var E1t=function(){if(this.listPanel)return this;if(this.options.length===0)return this;var e=D$.call(this);e.on("button.over",function(s,n,o,r){this.currentOverIndex=n,this.listOnButtonOver&&this.listOnButtonOver.call(this,s,n,o,r),this.emit("button.over",this,e,s,n,o,r)},this).on("button.out",function(s,n,o,r){this.currentOverIndex===n&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,s,n,o,r),this.emit("button.out",this,e,s,n,o,r)},this);var t;!this.listAlignMode||this.listAlignMode==="label"?t=this:t=this.getElement(this.listAlignMode);var i=new Zy(e,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:t,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",function(){e.on("button.click",function(s,n,o,r){this.listOnButtonClick&&this.listOnButtonClick.call(this,s,n,o,r),this.emit("button.click",this,e,s,n,o,r),this.dropDownBehavior.requestClose()},this),this.emit("list.open",this,e)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return e.onClickOutside(function(){i.requestClose()}),this.listPanel=e,this.dropDownBehavior=i,this.pin(e),this},V$=E1t;var P1t=function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},U$=P1t;var M1t=function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},z$=M1t;var w1t=function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,i=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,i,e),this.emit("button.click",this,t,i,e),this},W$=w1t;var b1t=function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this},H$=b1t;var Y$={focusNextButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var i=this.listPanel.getButtons().length;t=(e+1)%i}return this.emitButtonOver(t),this},focusPrevButton(){if(!this.isOpened)return this;var e=this.currentOverIndex,t;if(e===void 0)t=0;else{var i=this.listPanel.getButtons().length;t=(e-1+i)%i}return this.emitButtonOver(t),this}};var X$={openListPanel:V$,closeListPanel:U$,toggleListPanel:z$,emitButtonClick:W$,emitButtonOver:H$};Object.assign(X$,m$,Y$);var $$=X$;var se=Phaser.Utils.Objects.GetValue,Ky=class extends di{constructor(t,i){super(t,i),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(se(i,"options"));var s=se(i,"list");this.setWrapEnable(se(s,"wrap",!1)),this.setCreateButtonCallback(se(s,"createButtonCallback")),this.setCreateListBackgroundCallback(se(s,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(se(s,"createTrackCallback")),this.setCreateListSliderThumbCallback(se(s,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(se(s,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(se(s,"scroller")),this.setListMouseWheelScrollerConfig(se(s,"mouseWheelScroller")),this.setButtonClickCallback(se(s,"onButtonClick")),this.setButtonOverCallback(se(s,"onButtonOver")),this.setButtonOutCallback(se(s,"onButtonOut")),this.setListExpandDirection(se(s,"expandDirection")),this.setListEaseInDuration(se(s,"easeIn",500)),this.setListEaseOutDuration(se(s,"easeOut",100)),this.setListTransitInCallback(se(s,"transitIn")),this.settListTransitOutCallback(se(s,"transitOut")),this.setListMaxHeight(se(s,"maxHeight",0)),this.setListSize(se(s,"width"),se(s,"height",0)),this.setListAlignmentMode(se(s,"alignParent","text")),this.setListAlignmentSide(se(s,"alignSide","")),this.setListBounds(se(s,"bounds")),this.setListSpace(se(s,"space")),this.setListDraggable(se(s,"draggable",!1)),this.setValueChangeCallback(se(i,"setValueCallback"),se(i,"setValueCallbackScope")),this.setValue(se(i,"value")),this.onClick(this.toggleListPanel,this)}destroy(t){!this.scene||this.ignoreDestroy||(this.listPanel&&(this.listPanel.destroy(t),this.listPanel=void 0),super.destroy(t))}get isOpened(){return!!this.listPanel}setOptions(t){return t===void 0&&(t=[]),this.options=t,this}setValueChangeCallback(t,i){return this.valueChangeCallback=t,this.valueChangeCallbackScope=i,this}setValue(t){return this.value=t,this}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t;var s=this.valueChangeCallback,n=this.valueChangeCallbackScope;s&&(n?s.call(n,this,t,i):s(this,t,i)),this.emit("valuechange",this,t,i)}}};Object.assign(Ky.prototype,$$);var Zo=Ky;K.register("dropDownList",function(e){var t=new Zo(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.DropDownList",Zo);var R1t=function(e,t,i){t=t?qt(t):{},i===void 0&&(i={});var s=t.label||t.button,n=t.button||t.label;delete t.label,delete t.button;var o=i.label||i.button||i,r=i.button||i.label||i,a=Pa(e,s,o);a.list=t.list||{},a.list.createButtonCallback=function(u,f){var l=ge(u,n,r).resetDisplayContent(f);return f.hasOwnProperty("value")&&(l.value=f.value),l};var p=t.track;p&&(a.list.createTrackCallback=function(u){return Zt(u,p)},delete t.track);var h=t.thumb;return h&&(a.list.createThumbCallback=function(u){return Zt(u,h)},delete t.thumb),a.list.onButtonOver=function(u,f,l,d){u.setHoverState&&u.setHoverState(!0)},a.list.onButtonOut=function(u,f,l,d){u.setHoverState&&u.setHoverState(!1)},a},Jy=R1t;var Ob=class extends Zo{constructor(t,i,s){i=Jy(t,i,s),super(t,i),this.type="rexSimpleDropDownList"}setOptions(t){t===void 0&&(t=[]);for(var i=0,s=t.length;i<s;i++){var n=t[i];typeof n=="string"&&(t[i]={text:n,value:n})}return super.setOptions(t),this}},Db=Ob;K.register("simpleDropDownList",function(e,t){var i=new Db(this.scene,e,t);return this.scene.add.existing(i),i});Z(window,"RexPlugins.UI.SimpleDropDownList",Db);var I1t=function(e){var t=Ti(e),i,s,n;switch(t){case ce:case pe:i=e.height-e.padding.top-e.padding.bottom,s=e.lineSpacing,n=e.style.metrics.fontSize+e.style.strokeThickness;break;case Te:i=e.height,s=0;var o=e.fontSize/e.fontData.size;n=e.fontData.lineHeight*o;break}return(i-s)/(n+s)},j$=I1t;var A1t=function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var i=this.pageLinesCount;i>0?t=e+i:t=this.totalLinesCount}t>this.totalLinesCount&&(t=this.totalLinesCount);var s;switch(this.textObjectType){case ce:case Te:s=this.lines.slice(e,t).join(`
`);break;case pe:var n=this.lines.getLineStartIndex(e),o=this.lines.getLineEndIndex(t-1);s=this.lines.getSliceTagText(n,o,!0);var r=(s.match(/\n/g)||[]).length;r>t-e-1&&(s=s.substring(0,s.length-1));break}return s},Z$=A1t;var K$={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(i){var t=this.totalLinesCount;this.sections.push(pn(i));var i=this.sections.join(`
`);this.lines=Au(this.parent,i,this.lines);var s=this.totalLinesCount-t,n=this.pageLinesCount,o;n>0?o=Math.ceil(s/this.pageLinesCount):o=1;for(var r=0;r<o;r++)this.pageStartIndexes.push(t+r*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var i=pn(e).split(this.pageBreak),s=0,n=i.length;s<n;s++)this.appendPage(i[s]);return this},appendText(e){var t=this.content+pn(e);return this.setText(t,!1),this}};var J$=Phaser.Math.Clamp,Q$={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=J$(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=J$(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}};var q$={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){Ea(this.parent,e)}};var _$={getLines:Z$};Object.assign(_$,K$,Q$,q$);var tj=_$;var ku=Phaser.Utils.Objects.GetValue,R6e=Phaser.Math.Clamp,Qy=class extends Et{constructor(t,i){super(t,{eventEmitter:!1}),this.textObjectType=Ti(this.parent),this.pageStartIndexes=[],this.lines=Au(this.parent,""),this.sections=[],this.resetFromJSON(i)}resetFromJSON(t){this.setMaxLines(ku(t,"maxLines",void 0)),this.setPageBreak(ku(t,"pageBreak",`\f
`)),this.setText(ku(t,"text","")),this.startLineIndex=ku(t,"start",-1),this.endLineIndex=ku(t,"end",void 0);var i=ku(t,"page");return i===void 0?this.resetIndex():this.setPageIndex(i),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(t){if(!this.isShutdown){switch(this.textObjectType){case ce:this.lines.length=0;break;case pe:this.lines.destroy();break;case Te:this.lines.length=0;break}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(t)}}setMaxLines(t){return this.maxLines=t,this}setPageBreak(t){return this.pageBreak=t,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var t;switch(this.textObjectType){case ce:case pe:var i=this.parent.style.maxLines;i>0?t=i:t=Math.floor(j$(this.parent));break;case Te:t=this.totalLinesCount;break}return t}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}};Object.assign(Qy.prototype,tj);var ej=Qy;var ij=ej;var _f=ij;var rj={setText(e){this.setTextCallback&&(this.setTextCallbackScope?e=this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):e=this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?Ea(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(pn(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}};var O1t=function(e,t,i,s){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),i===void 0&&(i=0),this.typingIndex=i+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(s)),this},nj=O1t;var D1t=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},qy=D1t;var L1t=function(e,t,i,s,n){var o;if(t>0){s===void 0&&(s=0);var r=qy(this.parent,e);o=F1t(r,t)+s}return this.start(e,i,o,n)},F1t=function(e,t){for(var i=void 0,s=0;s<t&&(i=e.indexOf(`
`,i+1),i!==-1);s++);return i},sj=L1t;var B1t=function(e,t,i,s){var n;return e.getSubString?n=e.getSubString(t,i,s):n=t.slice(i,s),n},Vu=B1t;var N1t=function(e,t,i,s){var n=this.parent,o;if(s===0){var r=0,a=t;this.insertIndex=a,o=Vu(n,e,r,a)}else if(s===1){var a=i,r=a-t;this.insertIndex=0,o=Vu(n,e,r,a)}else if(s===2){var p=i/2,r=Math.floor(p-t/2),a=r+t;this.insertIndex=t%2?t:0,o=Vu(n,e,r,a)}else if(s===3){var h=Math.floor(t/2),u;if(h>0){var a=i,r=a-h;u=Vu(n,e,r,a)}else u="";var f=t-h,l;if(f>0){var r=0,a=r+f;this.insertIndex=a,l=Vu(n,e,r,a)}else l="",this.insertIndex=0;o=l+u}return this.insertChar=o.charAt(this.insertIndex-1),o},_y=N1t;var G1t=function(e){var t=this.getTimer();if(t&&this.freeTimer(),e){for(;!this.isLastChar;)_y.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},aj=G1t;var k1t=function(){var e=this.getTimer();return e&&(e.paused=!0),this},oj=k1t;var V1t=function(){var e=this.getTimer();return e&&(e.paused=!1),this},lj=V1t;var hj={start:nj,startFromLine:sj,stop:aj,pause:oj,resumeTyping:lj};Object.assign(hj,rj);var uj=hj;var U1t=function(e,t){var i=Ti(e);switch(i){case ce:e.style.syncFont(e.canvas,e.context),t=e.runWordWrap(t);break;case pe:t=e.getText(t,void 0,void 0,!0);break;case Te:t=e.setText(t).getTextBounds().wrappedText;break}return t},dj=U1t;var tc=Phaser.Utils.Objects.GetFastValue,Lb=Phaser.Utils.Objects.GetValue,tC=class extends Et{constructor(t,i){super(t,i),this.timer=null,this.resetFromJSON(i)}resetFromJSON(t){this.setTextWrapEnable(Lb(t,"wrap",!1)),this.setTypeMode(Lb(t,"typeMode",0)),this.setTypingSpeed(Lb(t,"speed",333)),this.setTextCallback=tc(t,"setTextCallback",null),this.setTextCallbackScope=tc(t,"setTextCallbackScope",null),this.setTypingContent(tc(t,"text","")),this.typingIndex=tc(t,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var i=tc(t,"elapsed",null);return i!==null&&this.start(void 0,void 0,this.typingIndex,i),this}shutdown(t){this.isShutdown||(this.freeTimer(),super.shutdown(t))}setTypeMode(t){return typeof t=="string"&&(t=z1t[t]),this.typeMode=t,this}setTypeSpeed(t){return this.speed=t,this}setTypingSpeed(t){return this.speed=t,this}setTextWrapEnable(t){return t===void 0&&(t=!0),this.textWrapEnable=t,this}set text(t){var i=pn(t);this.textWrapEnable&&(i=dj(this.parent,i)),this._text=i}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(t){return this.text=t,this.textLength=qy(this.parent,this.text).length,this}onTyping(){var t=_y.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(t),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(t){this.timer&&this.freeTimer();var i,s;return t===void 0?(i=0,s=0):(i=this.speed,s=t),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:s,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(t){this.setTextCallback&&(this.setTextCallbackScope?t=this.setTextCallback.call(this.setTextCallbackScope,t,this.isLastChar,this.insertIndex):t=this.setTextCallback(t,this.isLastChar,this.insertIndex)),this.textWrapEnable?Ea(this.parent,t):this.parent.setText(t)}},z1t={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign(tC.prototype,uj);var fj=tC;var cj=fj;var ec=cj;var ic=Phaser.Utils.Objects.GetValue,W1t=function(e,t){t===void 0&&(t="rexTextBox");class i extends e{constructor(n,o){super(n,o),this.type=t,this.isRunning=!1,this._isPageEnd=!1;var r=this.childrenMap.text,a=ic(o,"expandTextWidth",!1),p=ic(o,"expandTextHeight",!1);if(a||p){var h=Ti(r);switch(h){case ce:case pe:if(r.resize=function(f,l){var d=a?f:0,v=p?l:0;r.setFixedSize(d,v),d>0&&r.setWordWrapWidth(d)},h===pe){var u=r.style;u.wrapMode===0&&(u.wrapMode=1)}break}a&&(r._minWidth=0),p&&(r._minHeight=0)}this.setTypingMode(ic(o,"typingMode","page")),this.page=new _f(r,ic(o,"page",void 0)),this.typing=new ec(r,ic(o,"typing",o.type)),this.typing.on("complete",this.onTypingComplete,this).on("type",this.onType,this).on("typechar",this.onTypeChar,this),this.textWidthSave=r.width,this.textHeightSave=r.height}setTypingMode(n){return typeof n=="string"&&(n=H1t[n]),this.typingMode=n,this}start(n,o){return o!==void 0&&this.setTypingSpeed(o),this.isRunning=!0,this.page.setText(n),this.emit("start"),this.typingMode===0?this.typeNextPage():this.typeNextLine(),this}more(n,o){if(o!==void 0&&this.setTypingSpeed(o),this.isRunning)this.page.appendText(n),this.typing.appendText(n);else{if(this.isRunning=!0,this.page.appendText(n),this.emit("start"),this.typingMode===0){this._isPageEnd=!1;var r=this.page.getPage(),a=this.typing.textLength;this.typing.start(r,void 0,a)}return this}}typeNextPage(){if(!this.isRunning)return this;if(this.isLastPage)this.emit("complete");else{this._isPageEnd=!1;var n=this.page.getNextPage();this.typing.start(n)}return this}typeNextLine(){if(!this.isRunning)return this;if(this.isLastLine)this.isRunning=!1,this.emit("pageend"),this.emit("complete");else{var n=this.page.getPageOfNextLine(),o;this.isFirstLine?o=0:o=this.page.pageLinesCount-1,this.typing.startFromLine(n,o)}}pause(){return this.isRunning?(this.isTyping&&(this.typing.pause(),this.emit("pause")),this):this}resume(){return this.isRunning?(this.isTyping||(this.emit("resume"),this.typing.resume()),this):this}stop(n){return this.isRunning?(this.typing.stop(n),this):this}showLastPage(){return this.isRunning?(this.typing.stop(),this.typingMode===0?this.page.showLastPage():this.page.showLastLine(),this.emit("type"),this.onTypingComplete(),this):this}setTypeSpeed(n){return this.typing.setTypingSpeed(n),this}setTypingSpeed(n){return this.typing.setTypingSpeed(n),this}get isTyping(){return this.typing.isTyping}get isPageEnd(){return this._isPageEnd}get isLastPage(){return this.page.isLastPage}get isFirstPage(){return this.page.isFirstPage}get pageCount(){return this.page.pageCount}get pageIndex(){return this.page.pageIndex}get isLastLine(){return this.page.isLastLine}get isFirstLine(){return this.page.isFirstLine}get lineCound(){return this.page.totalLinesCount}get startLineIndex(){return this.page.startLineIndex}get endLineIndex(){return this.page.endLineIndex}get typingSpeed(){return this.typing.speed}onType(){var n=this.childrenMap.text;(this.textWidthSave!==n.width||this.textHeightSave!==n.height)&&(this.textWidthSave=n.width,this.textHeightSave=n.height,this.getTopmostSizer().layout()),this.emit("type")}onTypeChar(n){this.emit("typechar",n)}onTypingComplete(){if(this.typingMode===0){this._isPageEnd=!0;var n=this.isLastPage;this.isRunning=!n,this.emit("pageend"),n&&this.emit("complete")}else this.typeNextLine()}}return i},H1t={page:0,line:1},pj=W1t;var Fb=class extends pj(Yo){constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("layoutMode")||(i.layoutMode=1),super(t,i)}},rc=Fb;K.register("textBox",function(e){var t=new rc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TextBox",rc);var Bb=class extends rc{constructor(t,i,s){i=gy(t,i,s),super(t,i)}},Nb=Bb;K.register("simpleTextBox",function(e){var t=new Nb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.SimpleTextBox",Nb);var ur=Phaser.Utils.Objects.GetValue,Gb=class extends ht{constructor(t,i){super(t,i),this.type="rexNumberBar";var s=ur(i,"background",void 0),n=ur(i,"icon",void 0),o=ur(i,"iconMask",void 0),r=ur(i,"slider",void 0),a=ur(i,"text",void 0),p=ur(i,"space.icon",0),h=ur(i,"space.slider",0);if(s&&this.addBackground(s),n){var u;this.orientation===0?(r||a)&&(u={right:p}):(r||a)&&(u={bottom:p}),this.add(n,{proportion:0,align:"center",padding:u}),o&&(o=ri.call(this,n,n,1))}var f;if(r){r.orientation=this.orientation,r.eventEmitter=this,r.value=null,r.hasOwnProperty("input")||(r.input=-1),f=new Es(t,r),t.add.existing(f);var u;this.orientation===0?a&&(u={right:h}):a&&(u={bottom:h});var l;if(this.orientation===0){var d=ur(r,"width",void 0);l=d===void 0?1:0}else{var v=ur(r,"height",void 0);l=v===void 0?1:0}this.add(f,{proportion:l,align:"center",padding:u})}a&&this.add(a),this.addChildrenMap("background",s),this.addChildrenMap("icon",n),this.addChildrenMap("iconMask",o),this.addChildrenMap("slider",f),this.addChildrenMap("text",a);var c=ur(i,"valuechangeCallback",null);if(c!==null){var m=ur(i,"valuechangeCallbackScope",void 0);this.on("valuechange",c,m)}this.setEnable(ur(i,"enable",void 0)),this.setValue(ur(i,"value",0))}get enable(){return this.childrenMap.slider?this.childrenMap.slider.enable:!1}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,i,s),this}addValue(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,i,s),this}getValue(t,i){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,i):0}easeValueTo(t,i,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,i,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}get text(){var t=this.childrenMap.text;if(t===void 0)return"";var i;return t.text?i=t.text:i=t.getData("text"),i}set text(t){var i=this.childrenMap.text;i!==void 0&&(i.setText?i.setText(t):i.setData("text",t))}setText(t){return this.text=t,this}},kb=Gb;K.register("numberBar",function(e){var t=new kb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.NumberBar",kb);K.register("scrollBar",function(e){var t=new Wf(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ScrollBar",Wf);var Vb=Phaser.Utils.Objects.GetValue,vj={leftTop:"left-top",centerTop:"center-top",rightTop:"right-top",leftCenter:"left-center",center:"center",rightCenter:"right-center",leftBottom:"left-bottom",centerBottom:"center-bottom",rightBottom:"right-bottom"},Ub=class extends Ge{constructor(t,i){super(t,i),this.type="rexBadge";var s=Vb(i,"background",void 0);s&&this.addBackground(s),this.addChildrenMap("background",s);var n=Vb(i,"main",void 0);n&&this.add(n,{key:"main",align:"center",expand:!1}),this.addChildrenMap("main",n);for(var o in vj){var r=Vb(i,o,void 0);r&&(this.add(r,{key:o,align:vj[o],expand:!1}),this.addChildrenMap(o,r))}}},zb=Ub;K.register("badgeLabel",function(e){var t=new zb(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.BadgeLabel",zb);var Y1t=Ge.prototype.add,mj=function(e,t,i,s,n,o,r,a,p){return e.setVisible(!1),Y1t.call(this,e,t,i,s,n,o,r,a,p),this},gj={add:mj,addPage:mj};var X1t=function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null},xj=X1t;var yj=Di.prototype.setChildVisible,$1t=function(e,t){this._previousKey=this._currentKey;var i=this.previousPage;i&&(this.swapMode===0?(yj.call(this,i,!1),this.emit("pageinvisible",i,this._previousKey,this)):i.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var s=this.currentPage;return s&&(yj.call(this,s,!0),this.emit("pagevisible",s,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&s.setAlpha(0).fadeIn(t,1)),this},Cj=$1t;var j1t=function(e){return this.sizerChildren.hasOwnProperty(e)},Sj=j1t;var Tj={getPage:xj,swapPage:Cj,hasPage:Sj};Object.assign(Tj,gj);var Ej=Tj;var Pj=Phaser.Utils.Objects.GetValue,eC=class extends Ge{constructor(t,i){super(t,i),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Pj(i,"swapMode",0)),this.setFadeInDuration(Pj(i,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=Z1t[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}};Object.assign(eC.prototype,Ej);var Z1t={invisible:0,destroy:1},nc=eC;K.register("pages",function(e){var t=new nc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Pages",nc);var K1t=Phaser.GameObjects.Mesh,Wb=class extends K1t{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}},iC=Wb;var Rj=Phaser.Math.Vector3,J1t=Phaser.Math.Matrix4,Mj=new Rj,wj=new Rj,bj=new J1t,Q1t=function(e,t,i,s,n,o,r){t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=0),o===void 0&&(o=0),r===void 0&&(r=0),Mj.set(t,i,s),wj.set(n,o,r),bj.fromRotationXYTranslation(wj,Mj,!0);for(var a=0,p=e.vertices.length;a<p;a++)e.vertices[a].transformMat4(bj)},Ij=Q1t;var q1t=Phaser.Utils.Objects.IsPlainObject,Ko=Phaser.Utils.Objects.GetValue,_1t=Phaser.Geom.Mesh.GenerateGridVerts,Hb=Phaser.Math.RadToDeg,rC=Phaser.Math.DegToRad,Aj=45,twt=1+1/Math.sin(rC(Aj)),Yb=class extends iC{constructor(t,i,s,n,o,r){q1t(i)&&(r=i,i=Ko(r,"x",0),s=Ko(r,"y",0),n=Ko(r,"key",null),o=Ko(r,"frame",null)),super(t,i,s,n,o),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(twt),this.hideCCW=Ko(r,"hideCCW",!0);var a=Ko(r,"gridWidth",0),p=Ko(r,"gridHeight",a);this.resetVerts(a,p),this.prevFrame=this.frame}preUpdate(t,i){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(t,i)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,Aj),this}resetVerts(o,r){if(o!==void 0&&(this.gridWidth=o),r!==void 0&&(this.gridHeight=r),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var s=this.frame.cutWidth,n=this.frame.cutHeight,o,r;this.gridWidth===0?o=Math.max(s/8,32):r=this.gridWidth,this.gridHeight===0?r=Math.max(n/8,32):r=this.gridHeight,_1t({mesh:this,width:s/this.height,height:n/this.height,widthSegments:Math.ceil(s/o),heightSegments:Math.ceil(n/r)});var a=this.transformInfo;return a&&this.transformVerts(a.x,a.y,a.z,a.rotateX,a.rotateY,a.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(t){this.modelRotation.x=t}get angleX(){return Hb(this.rotationX)}set angleX(t){this.rotationX=rC(t)}get rotationY(){return this.modelRotation.y}set rotationY(t){this.modelRotation.y=t}get angleY(){return Hb(this.rotationY)}set angleY(t){this.rotationY=rC(t)}get rotationZ(){return this.modelRotation.z}set rotationZ(t){this.modelRotation.z=t}get angleZ(){return Hb(this.rotationZ)}set angleZ(t){this.rotationZ=rC(t)}transformVerts(t,i,s,n,o,r){return t===void 0&&(t=0),i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=0),o===void 0&&(o=0),r===void 0&&(r=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=t,this.transformInfo.y=i,this.transformInfo.rotateX=n,this.transformInfo.rotateY=o,this.transformInfo.rotateZ=r,Ij(this,t,i,s,n,o,r),this}},Uu=Yb;var ewt=Phaser.Textures.DynamicTexture,iwt=function(e,t,i){t===void 0&&(t=2),i===void 0&&(i=2);var s=new ewt(e.sys.textures,null,t,i);return s},sc=iwt;var rwt=Phaser.Utils.Objects.IsPlainObject,nC=Phaser.Utils.Objects.GetValue,Xb=class extends Uu{constructor(t,i,s,n,o,r){rwt(i)&&(r=i,i=nC(r,"x",0),s=nC(r,"y",0),n=nC(r,"width",32),o=nC(r,"height",32));var a=sc(t,n,o);super(t,i,s,a,null,r),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}snapshot(t,i){return i===void 0&&(i={}),i.gameObjects=t,i.renderTexture=this.rt,Po(i),(this.width!==this.frame.realWidth||this.height!==this.frame.realHeight)&&this.syncSize(),this}},zu=Xb;var IWe=Phaser.Animations.AnimationState,AWe=Phaser.Utils.Objects.IsPlainObject,OWe=Phaser.Utils.Objects.GetValue;var nwt=function(e,t,i,s){if(Array.isArray(e))for(var n=!1,o=0,r=e.length;o<r;o++){var a=e[o];if(!(s&&!a)&&(i?n=t.call(i,a,o,e):n=t(a,o,e),n))return}else{var n=!1;for(var p in e){var a=e[p];if(!(s&&!a)&&(i?n=t.call(i,a,p,e):n=t(a,p,e),n))return}}},Fi=nwt;var Wu=Phaser.Math.RadToDeg,Hu=Phaser.Math.DegToRad,$b=class extends Pn{constructor(t,i,s,n,o,r){super(t,i,s,n,o),this.faces=r,Fi(r,function(a){a.setPosition(i,s),this.add(a)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return Wu(this.rotationX)}set angleX(t){this.rotationX=Hu(t)}get rotateX(){return Wu(this.rotationX)}set rotateX(t){this.rotationX=Hu(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return Wu(this.rotationY)}set angleY(t){this.rotationY=Hu(t)}get rotateY(){return Wu(this.rotationY)}set rotateY(t){this.rotationY=Hu(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return Wu(this.rotationZ)}set angleZ(t){this.rotationZ=Hu(t)}get rotateZ(){return Wu(this.rotationZ)}set rotateZ(t){this.rotationZ=Hu(t)}setDebug(t,i){return Fi(this.faces,function(s){s.setDebug(t,i)},null,!0),this}panX(t){return Fi(this.faces,function(i){i.panX(t)},null,!0),this}panY(t){return Fi(this.faces,function(i){i.panY(t)},null,!0),this}panZ(t){return Fi(this.faces,function(i){i.panZ(t)},null,!0),this}transformVerts(t,i,s,n,o,r){return Fi(this.faces,function(a){a.transformVerts(t,i,s,n,o,r)},null,!0),this}forEachFace(t,i,s){return Fi(this.faces,t,i,s),this}},jb=$b;var swt=Phaser.Utils.Objects.IsPlainObject,awt={key:"__WHITE"},owt={image:Uu,rendertexture:zu},lwt=function(e,t){t===void 0&&(t=awt);var i;return swt(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),i=new owt[t.type](e,t),e.add.existing(i)):i=t,i},Zb=lwt;var hwt=function(e,t,i){var s;if(i===void 0){s=[];for(var n,o,r=0,a=t.length;r<a;r++)o=t[r],o?n=Zb(e,o):n=null,s.push(n)}else{s={};for(var n,p,r=0,a=i.length;r<a;r++)p=i[r],t.hasOwnProperty(p)?n=Zb(e,t[p]):n=null,s[p]=n}return s},Kb=hwt;var uwt=Phaser.Math.DegToRad,Oj=uwt(180),dwt=function(e,t){var i=t.back;i&&(e.orientation===0?i.transformVerts(0,0,0,0,Oj,0):i.transformVerts(0,0,0,Oj,0,0))},Dj=dwt;var Jb=Phaser.Utils.Objects.GetValue,fwt=Phaser.Math.Linear,Qb=class extends Ai{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Jb(t,"ease","Cubic")),this.setFrontToBackDirection(Jb(t,"frontToBack",0)),this.setBackToFrontDirection(Jb(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Lj[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Lj[t]),this.endAngleBF=t===0?-180:180,this}start(t,i){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var s=i+1,n=this.parent;return n.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*s):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*s),super.start(),this}flip(t,i){return this.isRunning?this:(t===void 0&&(t=this.duration),i===void 0&&(i=0),this.start(t,i),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+i+1)%2,this)}flipRight(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,i),this}flipLeft(t,i){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,i),this}updateTarget(t,i){var s=this.easeFn(i.t),n=fwt(this.startAngle,this.endAngle,s);t.orientation===0?t.angleY=n:t.angleX=n}},Lj={right:0,"left-to-right":0,left:1,"right-to-left":1},Fj=Qb;var cwt=Phaser.Utils.Objects.IsPlainObject,Jo=Phaser.Utils.Objects.GetValue,pwt=["back","front"],qb=class extends jb{constructor(t,i,s,n){cwt(i)&&(n=i,i=Jo(n,"x",0),s=Jo(n,"y",0));var o=Kb(t,n,pwt),r=o.back,a=o.front,p=Jo(n,"width"),h=Jo(n,"height");if(p===void 0||h===void 0){if(p===void 0){var u=a?a.width:0,f=r?r.width:0;p=Math.max(u,f)}if(h===void 0){var l=a?a.height:0,d=r?r.height:0;h=Math.max(l,d)}}super(t,i,s,p,h,o),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Fi(o,function(c,m){this[`${m}Face`]=c},this);var v=Jo(n,"flip",void 0);v!==!1&&(this.flip=new Fj(this,v)),this.setOrientation(Jo(n,"orientation",0)),Dj(this,o),this.setFace(Jo(n,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,Fi(this.faces,function(i){i.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,Fi(this.faces,function(i){i.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,Fi(this.faces,function(i){i.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=vwt[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=mwt[t]),this.currentFaceIndex=t;var i=t===1,s=i?180:0;this.orientation===0?this.angleY=s:this.angleX=s}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}},vwt={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},mwt={front:0,back:1},_b=qb;var t7e=Phaser.Utils.Objects.GetValue,e7e=Phaser.Math.RadToDeg,i7e=Phaser.Math.DegToRad,r7e=Phaser.Math.Angle.WrapDegrees,n7e=Phaser.Math.Angle.ShortestBetween,s7e=Phaser.Math.Wrap,a7e=Phaser.Math.Linear;var C7e=Phaser.Utils.Objects.IsPlainObject,S7e=Phaser.Utils.Objects.GetValue,T7e=Phaser.Math.DegToRad,E7e=Phaser.Math.RadToDeg,P7e=Phaser.Math.Angle.WrapDegrees,M7e=Phaser.Math.Linear,w7e=Phaser.Math.Wrap;var U7e=Phaser.Utils.Objects.IsPlainObject,z7e=Phaser.Utils.Objects.GetValue,W7e=Phaser.Math.Wrap;var Cwt=Phaser.Utils.Objects.GetValue,Swt=function(e,t,i){t.visibleSibling=[],t.isRunning=!1,t.useParentBounds=Cwt(i,"useParentBounds",!1),t.setPosition(e.x,e.y).setVisible(!1),e.pin(t)},Bj=Swt;var Twt=function(e,t){if(!e)return!1;for(var i=t.visibleSibling,s=0,n=i.length;s<n;s++)e.setChildVisible(i[s],!0);return i.length=0,e.setChildVisible(t,!1),t.isRunning=!1,!0},sC=Twt;var Ewt=function(e,t){if(!e)return!1;sC(e,t);var i=t.useParentBounds;Po({gameObjects:e.getAllVisibleChildren(),renderTexture:t.rt,x:t.x,y:t.y,width:i?e.displayWidth:void 0,height:i?e.displayHeighth:void 0,originX:i?e.originX:void 0,originY:i?e.originY:void 0}),e.setChildVisible(t,!0);for(var s=t.visibleSibling,n=e.children,o=0,r=n.length;o<r;o++){var a=n[o];a.visible&&a!==t&&(e.setChildVisible(a,!1),s.push(a))}return t.isRunning=!0,!0},Nj=Ewt;var Pwt=function(e){return class extends e{constructor(i,s){var n=i.scene;super(n,0,0,1,1,s),n.add.existing(this),Bj(i,this,s)}destroy(i){!this.scene||this.ignoreDestroy||(this.exit(),super.destroy(i))}enter(){var i=Nj(this.rexContainer.parent,this);return i&&this.syncSize(),this}exit(){return sC(this.rexContainer.parent,this),this}}},aC=Pwt;var tR=class extends aC(zu){get perspectiveState(){return this.isRunning}},eR=tR;var Mwt=Phaser.Utils.Objects.GetValue,wwt=function(e){var t=this.scene;this.setSnapshotPadding(Mwt(e,"snapshotPadding",0)),e=ze(e),delete e.width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var i=new _b(t,e);t.add.existing(i);var s=i.flip;if(s){var n=this;s.on("start",function(){n.enterPerspectiveMode()}).on("complete",function(){n.exitPerspectiveMode()})}return i},Gj=wwt;var bwt=["front","back"],kj={enterPerspectiveMode(){return this.isInPerspectiveMode?this:(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height),this)},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=bwt[e]);var t=this.perspectiveCard.faces[e],i=this.childrenMap[e];t.rt.clear();var s=i.visible;i.visible=!0;var n=i.isRexContainerLite?i.getAllVisibleChildren():i;return t.snapshot(n,{padding:this.snapshotPadding}),i.visible=s,this}};var Vj=Phaser.Utils.Objects.GetValue,oC=class extends Ge{constructor(t,i){super(t,i),this.type="rexPerspectiveCard";var s=i.back,n=Vj(i,"expand.back",!0);this.add(s,{key:"back",expand:n});var o=i.front,r=Vj(i,"expand.front",!0);this.add(o,{key:"front",expand:r}),this.perspectiveCard=Gj.call(this,i),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(t){if(!(this.flip&&this.flip.isRunning)){this.perspectiveCard.face=t;var i=t===0,s=this.childrenMap.front,n=this.childrenMap.back;this.setChildVisible(s,i),this.setChildVisible(n,!i)}}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=t}get angleX(){return this.perspectiveCard.angleX}set angleX(t){this.enterPerspectiveMode(),this.perspectiveCard.angleX=t}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=t}get angleY(){return this.perspectiveCard.angleY}set angleY(t){this.enterPerspectiveMode(),this.perspectiveCard.angleY=t}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(t){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=t}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(t){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=t}panX(t){return this.enterPerspectiveMode(),this.perspectiveCard.panX(t),this}panY(t){return this.enterPerspectiveMode(),this.perspectiveCard.panY(t),this}panZ(t){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(t),this}transformVerts(t,i,s,n,o,r){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(t,i,s,n,o,r),this}forEachFace(t,i,s){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(t,i,s),this}};Object.assign(oC.prototype,kj);var iR=oC;K.register("perspectiveCard",function(e){var t=new iR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.PerspectiveCard",iR);var Rwt=function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},Uj=Rwt;var Iwt=function(e){for(var t=this.getElement("tabs.buttons"),i=0,s=t.length;i<s;i++)if(t[i].name===e)return i},zj=Iwt;var Awt=Phaser.Utils.Objects.IsPlainObject,rR=Phaser.Utils.Objects.GetValue,Owt=Phaser.Utils.String.UUID,Dwt=function(e,t,i){if(Awt(e)){var s=e;e=rR(s,"key"),t=rR(s,"tab"),i=rR(s,"page")}return e||(e=Owt()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(i,{key:e}),this},Wj=Dwt;var Lwt=function(e,t){var i;if(typeof e=="number"?i=e:i=this.getPageIndex(e),i!=null){var s;t!==void 0&&(s=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(i),s!==void 0&&(this.childrenMap.pages.fadeInDuration=s)}return this},Fwt=function(e){return this.swapPage(0,e),this},Bwt=function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this},Hj={swapPage:Lwt,swapFirstPage:Fwt,swapLastPage:Bwt};var Yj={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var i=this.childrenMap.tabs,s=i.getByName(e),n=this.childrenMap.pages,o=n.getElement(e);return!s||!o?this:(n.removeChildrenMap(e),i.removeButton(s,t),n.remove(o,t),this)},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),i=t.length-1;i>=0;i--)this.removePage(t[i].name,e);return this}};var Nwt=function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},Xj=Nwt;var Gwt=function(e){var t;return typeof e=="number"?t=e:t=this.getPageIndex(e),this.getElement("tabs.buttons")[t]},$j=Gwt;var kwt={top:1,left:3,right:5,bottom:7},jj={top:"bottom",left:"right",right:"left",bottom:"top"},Vwt=function(e){var t=kwt[e];if(t===void 0)return this;var i=this.childrenMap.tabs,s=this.sizerChildren.indexOf(i);if(s===t)return this;this.sizerChildren[s]=null,this.sizerChildren[t]=i;var n=this.getSizerConfig(i).padding,o=jj[this.tabsPosition],r=jj[e];return n[r]=n[o],n[o]=0,this.tabsPosition=e,this},Zj=Vwt;var Kj={setTabsPadding(e,t){var i=this.childrenMap.tabs;return i.setOuterPadding(e,t),this},getTabsPadding(e){var t=this.childrenMap.tabs;return t.getOuterPadding(e)}};var Jj={getPageKey:Uj,getPageIndex:zj,addPage:Wj,getPage:Xj,getTab:$j,setTabPosition:Zj};Object.assign(Jj,Hj,Yj,Kj);var Qj=Jj;var an=Phaser.Utils.Objects.GetValue,qj=fi.prototype.add,lC=class extends fi{constructor(t,i){i===void 0&&(i={}),i.column=3,i.row=3,i.columnProportions=[0,0,0],i.rowProportions=[0,0,0];var s=an(i,"expand.pages",!0);s&&(i.columnProportions[1]=1,i.rowProportions[1]=1),super(t,i),this.type="rexTabPages";var n=an(i,"background",void 0);n&&this.addBackground(n);var o=an(i,"pages"),r=new nc(t,o);t.add.existing(r);var a=an(i,"tabsPosition",void 0);a===void 0&&(a=an(i,"tabPosition","top"));var p=an(i,"wrapTabs",!1),h=p?Fr:xe,u=an(i,"tabs",void 0);u===void 0&&(u={}),u.orientation=a==="top"||a==="bottom"?"x":"y",u.buttonsType="radio",!p&&!u.hasOwnProperty("expand")&&(u.expand=an(i,"expand.tabs",!1));var f=new h(t,u);t.add.existing(f),qj.call(this,r,{column:1,row:1,expand:s});var l,d,v=an(i,"space.item",0);switch(a){case"top":l=1,d=0,v={bottom:v};break;case"bottom":l=1,d=2,v={top:v};break;case"left":l=0,d=1,v={right:v};break;case"right":l=2,d=1,v={left:v};break}qj.call(this,f,{column:l,row:d,padding:v,expand:p?!0:an(i,"expand.tabs",!1),align:an(i,"align.tabs","left")}),this.addChildrenMap("background",n),this.addChildrenMap("tabs",f),this.addChildrenMap("pages",r),this.tabsPosition=a,f.on("button.click",function(c){var m=c.name;r.hasPage(m)&&r.swapPage(m)}),f.on("button.statechange",function(c,m,g,y){var x=g?"tab.focus":"tab.blur";this.emit(x,c,c.name)},this),r.on("pagevisible",function(c,m,g){this.emit("page.focus",c,m)}),r.on("pageinvisible",function(c,m,g){this.emit("page.blur",c,m)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(t){this.showPage(t)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(lC.prototype,Qj);var ac=lC;K.register("tabPages",function(e){var t=new ac(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TabPages",ac);var nR=class extends du{constructor(t,i){i===void 0&&(i={}),i.destroy=!1,super(t,i)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}},_j=nR;var tZ={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,i=this.childrenMap.child;if(this.show(i),this.reLayoutEnable){var s=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();s.layout()}return t.emit("folder.expand",e,this),i.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,i=this.childrenMap.child;return t.emit("folder.collapse",e,this),i.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){if(this.setChildScale(i,1,1).hide(i),this.reLayoutEnable){var s=this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer();s.layout()}this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}};var Uwt=function(e,t){Dn.popUp.call(e,t,this.expandDirection)},zwt=function(e,t){Dn.scaleDown.call(e,t,this.expandDirection)},eZ={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=Uwt.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=zwt.bind(this)),this.childTransition.setTransitOutCallback(e),this}};var ke=Phaser.Utils.Objects.GetValue,hC=class extends ht{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var s=i.background,n=i.title,o=i.child;s&&this.addBackground(s);var r=ke(i,"space"),a=this.orientation===1?"left":"top",l=ke(i,"align.title",a),d=ke(i,"expand.title",!0);this.add(n,{proportion:0,align:l,expand:d,padding:{left:ke(r,"titleLeft",0),right:ke(r,"titleRight",0),top:ke(r,"titleTop",0),bottom:ke(r,"titleBottom",0)}});var p=ke(i,"toggleByTarget",void 0),h=ke(i,"toggleClickConfig");p===void 0&&(p=n),p&&pu.onClick.call(p,function(){this.toggle()},this,h),this.childTransition=new _j(o);var u=ke(i,"customChildOrigin",!1);if(!u){var f=this.rtl?1:0;o.setOrigin(f)}var l=ke(i,"align.child","left"),d=ke(i,"expand.child",!0),v=d?1:0;this.add(o,{proportion:v,align:l,expand:d,padding:{left:ke(r,"childLeft",0),right:ke(r,"childRight",0),top:ke(r,"childTop",0),bottom:ke(r,"childBottom",0)}}),this.addChildrenMap("title",n),this.addChildrenMap("child",o),this.addChildrenMap("background",s);var c=i.transition;this.setTransitionDuration(ke(c,"duration",200)),this.setExpandCallback(ke(c,"expandCallback",void 0)),this.setCollapseCallback(ke(c,"collapseCallback",void 0)),this.reLayoutTarget=ke(i,"reLayoutTarget",void 0);var m=i.onExpandStart;m&&this.on("expand.start",m);var g=i.onExpandComplete;g&&this.on("expand.complete",g);var y=i.onCollapseStart;y&&this.on("collapse.start",y);var x=i.onCollapseComplete;x&&this.on("collapse.complete",x);var C=ke(i,"expanded",void 0);C!==void 0&&this.setExpandedState(C)}};Object.assign(hC.prototype,tZ,eZ);var Qo=hC;K.register("folder",function(e){var t=new Qo(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Folder",Qo);var Wwt=function(e,t,i,s){for(var n in this.treesMap){var o=this.treesMap[n];if(qr(o.nodeBody,e,t,i,s))return o;var r=o.pointToChild(e,t,i,s);if(r)return r}return null},iZ=Wwt;var Hwt=function(e){return e===void 0&&(e={}),e.targetMode="parent",e.targetSizers=[this],ma(this,e),this},rZ=Hwt;var Ywt=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(i){return this.text=i,this}get text(){var i=this.nodeBody;return i.text}set text(i){var s=this.nodeBody;s.setText&&s.setText(i)}setTexture(i,s){var n=this.nodeBody;return n.setTexture&&n.setTexture(i,s),this}get texture(){var i=this.nodeBody;if(i)return i.texture}get frame(){var i=this.nodeBody;if(i)return i.frame}}},uC=Ywt;var Xwt=function(e,t,i,s){for(var n in this.nodesMap){var o=this.nodesMap[n];if(this.isTreeObject(o)){var r=o;if(qr(r.nodeBody,e,t,i,s))return r;var a=r.pointToChild(e,t,i,s);if(a)return a}else if(qr(o,e,t,i,s))return o}return null},nZ=Xwt;var sZ={getTreePatent(e){if(e===void 0&&(e=this),!!e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){e===void 0&&(e=this);for(var t;;){if(!e.rexSizer)return;if(t=e.rexSizer.treeParent,t===null)return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if(t=e.rexSizer.treeParent,t===this)return!0;if(t===null)return!1;e=t}return!1}};var $wt=function(e,t,i,s,n=!1){var o;if(de(t))o=t,delete t[key];else if(Be(t)){var r=t;o=r(e,i),o&&e.add.existing(o)}else(n||t)&&s&&(o=s(e,t,i));return o},bs=$wt;var jwt=function(e,t,i){var s=Zt(e,t);return s},Yu=jwt;var Zwt=function(e,t,i){var s=new Ps(e,t);return e.add.existing(s),s.resetDisplayContent(""),s},aZ=Zwt;var Xu=Phaser.Utils.Objects.GetValue,sR=class extends uC(ht){constructor(t,i,s){var n=i.space;super(t,{orientation:"x",space:{left:Xu(n,"nodeLeft",0),right:Xu(n,"nodeRight",0),top:Xu(n,"nodeTop",0),bottom:Xu(n,"nodeBottom",0)}}),this.type="rexTreeNode";var o=bs(t,Xu(i,"nodeBackground"),s,Yu,!1),r=bs(t,Xu(i,"nodeBody"),s,aZ,!0);o&&this.addBackground(o),this.add(r,{proportion:1}),this.nodeBody=r,this.addChildrenMap("background",o),this.addChildrenMap("nodeBody",r)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}getTreesSizer(){var t=this.getTreeRoot();return t?t.getParentSizer():null}},dC=sR;var Kwt=function(e,t){var i=e.parentContainer;if(i){t.isRexContainerLite?t.addToContainer(i):i.add(t);return}var s=e.displayList;if(ta(s)){t.isRexContainerLite?t.addToLayer(s):s.add(t);return}e.scene.add.existing(t)},fC=Kwt;var oZ=Phaser.Utils.String.UUID,lZ={addTree(e,t){if(de(e)){var i=e;e={nodeBody:i,nodeKey:t}}return this.insertTree(void 0,e)},insertTree(e,t){var i;typeof t=="string"?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),i===void 0&&(i=oZ());var s=this.createTree(t);return fC(this,s),this.insertNode(e,s,{expand:!0}),s._postAddCallback(),s},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,i){var s;de(t)||(i=t,t=new dC(this.scene,this.configSave,{isLeaf:!0})),typeof i=="string"?(s=i,i=void 0):i&&(s=i.nodeKey,delete i.nodeKey),s===void 0&&(s=oZ()),i===void 0&&(i={}),i.hasOwnProperty("expand")||(i.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(s)&&(console.error(`[Trees] Duplicate nodeKey '${s}'`),this.removeNode(this.nodesMap[s],!0)),t.nodeKey=s,this.nodesMap[s]=t;var n=this.childrenMap.child;return n.insert(e,t,i),t}};var hZ={removeNode(e,t){if(typeof e=="string"&&(e=this.getTree(e)),!e)return this;var i=this.getTreePatent(e);if(!i)return this;delete i.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null;var s=i.childrenMap.child;return s.remove(e,t),this},removeAllNodes(e){var t=this.nodesMap;for(var i in t)this.removeNode(t[i],e);return this}};var uZ={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),i=this.nodesMap[t];return e.length===0?i:i&&this.isTreeObject(i)?i.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(!e)e=nodes;else for(var i in t)e.push(t[i]);return e},getAllNodes(e){}};var dZ={pointToChild:nZ};Object.assign(dZ,sZ,lZ,hZ,uZ);var fZ=dZ;var Jwt=function(e,t,i){var s=new yo(e,t);return e.add.existing(s),s.on("expand.start",function(n){n.setDirection("down")}).on("collapse.complete",function(n){n.setDirection("right")}),s},cZ=Jwt;var pZ=Phaser.Utils.Objects.GetValue,Qwt=function(e,t){var i=new dC(e,t,{isLeaf:!1});e.add.existing(i);var s=bs(e,pZ(t,"toggleButton"),{isLeaf:!1},cZ,!0);return i.insert(0,s,{padding:{right:pZ(t,"space.toggleButton",0)},fitRatio:1}),i.addChildrenMap("toggleButton",s),i},vZ=Qwt;var mZ=Phaser.Utils.Objects.GetValue,qwt=function(e,t){var i=new ht(e,{orientation:mZ(t,"childrenOrientation","y")});e.add.existing(i);var s=bs(e,mZ(t,"childrenBackground"),{isLeaf:!1},Yu,!1);return s&&i.addBackground(s),i},gZ=qwt;var _wt=Phaser.Utils.Objects.Clone,tbt=function(e,t){var i=e?_wt(e):{};if(!t)return i;for(var s in t)i[s]=t[s];return i},xZ=tbt;var Fa=Phaser.Utils.Objects.GetValue,yZ=(()=>{class e extends uC(Qo){constructor(i,s){s===void 0&&(s={});var n=bs(i,Fa(s,"background"),{isLeaf:!1},Yu,!1),o=gZ(i,s),r=o.childrenMap.items,a=vZ(i,s),p=a.childrenMap.toggleButton,h=a.childrenMap.nodeBody,u=Ar(Fa(s,"orientation","y")),f=s.space;if(f){var l=Fa(f,"indent",0);f.childLeft=Fa(f,"indentLeft",u===1?l:0),f.childRight=Fa(f,"indentRight",0),f.childTop=Fa(f,"indentTop",u===0?l:0),f.childBottom=Fa(f,"indentBottom",0)}var d={background:n,title:a,child:o,toggleByTarget:p,transition:s.transition,orientation:u,space:f,align:s.align,expand:s.expand};super(i,d),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=s,this.nodeBody=h,this.addChildrenMap("toggleButton",p),this.addChildrenMap("nodeBody",h),this.addChildrenMap("childrenNodes",r),this.on("expand.start",function(){p.emit("expand.start",p),cC(this,"expand.start")},this).on("expand.complete",function(){p.emit("expand.complete",p),cC(this,"expand.complete")}).on("collapse.start",function(){p.emit("collapse.start",p),cC(this,"collapse.start")}).on("collapse.complete",function(){p.emit("collapse.complete",p),cC(this,"collapse.complete")});var v=this;v._postAddCallback=function(){var c=Fa(s,"expanded",!0);c!==void 0&&v.setExpandedState(c),delete v._postAddCallback}}destroy(i){!this.scene||this.ignoreDestroy||(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(i))}get isTree(){return!0}createTree(i){return e.CreateTree(this.scene,this.configSave,i)}isTreeObject(i){return i&&i instanceof e}}return e.CreateTree=function(t,i,s){return new e(t,xZ(i,s))},e})(),cC=function(e,t){var i=e.getTreesSizer();i&&i.emit(t,e)};Object.assign(yZ.prototype,fZ);var CZ=yZ;var ebt=Phaser.Utils.String.UUID,SZ={addTree(e){if(de(e)){var t=e;e={nodeBody:t,nodeKey}}return this.insertTree(void 0,e)},insertTree(e,t){var i;typeof t=="string"?(i=t,t=void 0):t&&(i=t.nodeKey,delete t.nodeKey),i===void 0&&(i=ebt());var s=CZ.CreateTree(this.scene,this.treeConfig,t);return fC(this,s),s.nodeKey=i,this.treesMap[i]=s,this.insert(e,s,{expand:!0}),s._postAddCallback(),s}};var TZ={removeTree(e,t){return typeof e=="string"&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var i in t)this.removeTree(t[i],e);return this}};var EZ={getTree(e){return this.treesMap[e]},getTrees(e){e===void 0&&(e=[]);for(var t in this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var i=this.getTree(e.substring(0,t));if(i)return i.getNode(e.substring(t+1))}};var PZ={pointToChild:iZ,setChildrenInteractive:rZ};Object.assign(PZ,SZ,TZ,EZ);var MZ=PZ;var ibt=Phaser.Utils.Objects.GetValue,pC=class extends ht{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation="y"),super(t,i),this.type="rexTrees",this.treesMap={},this.treeConfig=ibt(i,"tree")}destroy(t){!this.scene||this.ignoreDestroy||(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(t))}};Object.assign(pC.prototype,MZ);var aR=pC;K.register("trees",function(e){var t=new aR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Trees",aR);K.register("textArea",function(e){var t=new Ho(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TextArea",Ho);var rbt=function(e){Object.defineProperty(e,"childOY",{configurable:!0,get:function(){return e.textOY},set:function(t){e.textOY=t}}),Object.defineProperty(e,"topChildOY",{get:function(){return e.topTextOY}}),Object.defineProperty(e,"bottomChildOY",{get:function(){return e.bottomTextOY}}),Object.defineProperty(e,"childVisibleHeight",{get:function(){return e.textVisibleHeight}}),Object.defineProperty(e,"childHeight",{get:function(){return e.contentHeight}})},wZ=rbt;var bZ={setText(e){var t=this.childrenMap.child;return t.setText(e),this},appendText(e){return this.setText(this.text+e),this}};var RZ={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}};var vC=Phaser.Utils.Objects.GetValue,mC=class extends Ta{constructor(t,i){i===void 0&&(i={});var s=vC(i,"text"),n;de(s)?n=s:(s===void 0&&(s={}),s.textArea=!0,n=new mo(t,s),t.add.existing(n)),wZ(n);var o=s.width===void 0,r=s.height===void 0;o&&(n.minWidth=0),r&&(n.minHeight=0),i.scrollMode=0,i.type="rexTextAreaInput",i.child={gameObject:n,expandWidth:o,expandHeight:r};var a=vC(i,"space",void 0);a&&(a.child=vC(a,"text",0)),i.scroller=!1,super(t,i),this.addChildrenMap("text",n);var p,h;n.on("cursorin",function(){var f=n.textOY,l=n.contentHeight,d=p!==f,v=h!==l;p=f,h=l,v&&this.resizeController(),(d||v)&&(this.t=n.t)},this),n.on("textchange",function(f){this.emit("textchange",f,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var u=vC(i,"content",void 0);u&&this.setText(u)}get text(){return this.childrenMap.child.text}set text(t){t==null?t="":t=t.toString(),this.childrenMap.child.text!==t&&this.setText(t)}get lineHeight(){var t=this.childrenMap.child;return t.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){var t=this.childrenMap.child;return t.linesCount}get contentHeight(){var t=this.childrenMap.child;return t.contentHeight}get readOnly(){var t=this.childrenMap.child;return t.readOnly}set readOnly(t){var i=this.childrenMap.child;i.readOnly=t}setReadOnly(t){var i=this.childrenMap.child;return i.setReadOnly(t),this}get value(){return this.text}set value(t){this.text=t}};Object.assign(mC.prototype,bZ,RZ);var oc=mC;K.register("textAreaInput",function(e){var t=new oc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.TextAreaInput",oc);K.register("scrollablePanel",function(e){var t=new jo(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ScrollablePanel",jo);var lc={popUp:function(e,t){e.popUp(t)},scaleDown:function(e,t){e.scaleDown(t)},fadeIn:function(e,t){e.fadeIn(t)},fadeOut:function(e,t){e.fadeOut(t)}};var nbt={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},Hn=nbt;var IZ={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=Hn[e]),e){case Hn.popUp:e=lc.popUp;break;case Hn.fadeIn:e=lc.fadeIn;break}return e||(e=re),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=Hn[e]),e){case Hn.scaleDown:e=lc.scaleDown;break;case Hn.fadeOut:e=lc.fadeOut;break}return e||(e=re),this.transitOutCallback=e,this}};var AZ={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[re]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[re]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}};var hc=Phaser.Utils.Objects.GetValue,gC=class extends di{constructor(t,i){i===void 0&&(i={text:createDefaultTextObject(t)}),super(t,i),this.type="rexToast",this.setTransitInTime(hc(i,"duration.in",200)),this.setDisplayTime(hc(i,"duration.hold",1200)),this.setTransitOutTime(hc(i,"duration.out",200)),this.setTransitInCallback(hc(i,"transitIn",Hn.popUp)),this.setTransitOutCallback(hc(i,"transitOut",Hn.scaleDown)),this.player=new yy(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(t){!this.scene||this.ignoreDestroy||(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(t))}setScale(t,i){return i===void 0&&(i=t),this.scaleX0=t,this.scaleY0=i,super.setScale(t,i),this}get isShowingMessage(){return this.player.isPlaying}};Object.assign(gC.prototype,IZ,AZ);var oR=gC;K.register("toast",function(e){var t=new oR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Toast",oR);var sbt={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0},OZ={setQueueDirection(e){return typeof e=="string"&&(e=sbt[e]),this.rtl=e===0,this.orientation===1?e?this.queueDirection=0:this.queueDirection=1:e?this.queueDirection=2:this.queueDirection=3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=re),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=re),this.transitOutCallback=e,this}};var abt=pu.onClick,DZ=k0.delayCall,obt=G0.moveTo,lbt=function(e,t,i){var s=t(e.scene,i,e);if(abt.call(s,function(){e.removeMessage(s)}),e.displayTime){var n=e.transitInTime+e.displayTime+10;DZ.call(s,n,function(){e.removeMessage(s)})}return s},LZ=function(e){for(var t=e.childrenMap.items,i,s=[],n=0,o=t.length;n<o;n++)i=t[n],s.push({x:i.x,y:i.y});return s},hbt=function(e){for(var t=e.childrenMap.items,i,s=[],n=0,o=t.length;n<o;n++)i=t[n],s.push({x:i.scaleX,y:i.scaleY}),i.setScale(1);e.layout();for(var r=LZ(e),n=0,o=t.length;n<o;n++){var a=s[n];t[n].setScale(a.x,a.y)}return r},ubt=function(e,t,i,s){for(var n=e.childrenMap.items,o=Math.min(t.length,i.length,n.length),r,a,p,h=e.queueDirection,u=0;u<o;u++){switch(r=n[u],a=t[u],p=i[u],r.setPosition(a.x,a.y),h){case 0:if(a.y<=p.y)continue;break;case 1:if(a.y>=p.y)continue;break;case 2:if(a.x<=p.x)continue;break;case 3:if(a.x>=p.x)continue;break}obt.call(r,s,p.x,p.y)}},dbt=function(e,t,i){var s=LZ(e);e.add(t);var n=hbt(e);ubt(e,s,n,i),e.transitInCallback(t,i,e)},FZ={showMessage(e){var t=lbt(this,this.createMessageLabelCallback,e);return dbt(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),DZ.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,i=e.length;t<i;t++)this.removeMessage(e[t]);return this}};var BZ={};Object.assign(BZ,OZ,FZ);var NZ=BZ;var lR={transitIn(e,t,i){switch(i.queueDirection){case 0:e.setOrigin(.5,1),Dn.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),Dn.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),Dn.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),Dn.popUp.call(e,t,"x");break}Sf.fadeIn.call(e,t)},transitOut(e,t,i){Sf.fadeOut.call(e,t)}};var qo=Phaser.Utils.Objects.GetValue,xC=class extends ht{constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("orientation")||(i.orientation=1),super(t,i),this.type="rexToastQueue",this.setCreateMessageLabelCallback(qo(i,"createMessageLabelCallback")),this.setQueueDirection(qo(i,"queueDirection",1)),this.setTransitInTime(qo(i,"duration.in",200)),this.setDisplayTime(qo(i,"duration.hold",2e3)),this.setTransitOutTime(qo(i,"duration.out",200)),this.setTransitInCallback(qo(i,"transitIn",lR.transitIn)),this.setTransitOutCallback(qo(i,"transitOut",lR.transitOut))}};Object.assign(xC.prototype,NZ);var hR=xC;K.register("toastQueue",function(e){var t=new hR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ToastQueue",hR);var fbt=function(e,t){if(t===!1)return null;if(de(t))return t;var i=new Qi(e,t);return e.add.existing(i),i},GZ=fbt;var cbt=Phaser.Utils.String.Pad,pbt=function(e,t){t===void 0&&(t="0x");var i=e.toString(16).toUpperCase();return i=cbt(i,6,0,1),i=t+i,i},uR=pbt;var vbt=function(e,t){e&&(e.setTint?e.setTint(t):e.setFillStyle&&e.setFillStyle(t))},kZ=vbt;var kr=Phaser.Utils.Objects.GetValue,mbt=Phaser.Utils.Objects.IsPlainObject,gbt=Phaser.Math.Clamp,dR=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorInputLite";var s=kr(i,"background",void 0),n=kr(i,"swatch"),o;mbt(n)&&(o=kr(n,"size"));var r=GZ(t,kr(i,"swatch")),a=kr(i,"inputText",{}),p;if(a&&(p=Ms(t,a)),s&&this.addBackground(s),r){o=kr(i,"swatchSize",o);var h;o!==void 0?(ne(r,o,o),h=!1):h=kr(i,"squareExpandSwatch",!0);var u=h?1:0;this.add(r,{proportion:0,expand:!0,fitRatio:u})}if(p){var f=kr(a,"width")===void 0?1:0,l=kr(a,"height")===void 0;this.add(p,{proportion:f,expand:l})}this.addChildrenMap("background",s),this.addChildrenMap("swatch",r),this.addChildrenMap("inputText",p),p&&p.on("close",function(){this.setValue(p.value)},this);var d=kr(i,"valuechangeCallback",null);if(d!==null){var v=kr(i,"valuechangeCallbackScope",void 0);this.on("valuechange",d,v)}this.setValue(kr(i,"value",0))}get value(){return this._value}set value(t){if(typeof t=="string"){if(t=uf(t),t==null){var s=this.childrenMap.inputText;s&&s.setText(uR(this._value));return}}else t=gbt(Math.floor(t),0,16777215);if(this._value!==t){this._value=t;var i=this.childrenMap.swatch;i&&kZ(i,t);var s=this.childrenMap.inputText;s&&s.setText(uR(t)),this.emit("valuechange",this._value)}}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}},uc=dR;var xbt={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=ybt[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}},ybt={down:0,up:1},VZ=xbt;var UZ=Phaser.Display.Color,yC=Phaser.Math.Percent,zZ=function(e,t,i){i===void 0&&(i=!1);var s=e.width,n=e.height,o=new UZ;if(i)for(var r=0;r<n;r++){var a=yC(r,0,n);o.setFromHSV(a,1,1),t.fillStyle=o.rgba,t.fillRect(0,r,s,1)}else for(var p=0;p<s;p++){var a=yC(p,0,s);o.setFromHSV(a,1,1),t.fillStyle=o.rgba,t.fillRect(p,0,1,n)}},WZ=function(e,t,i){for(var s=e.width,n=e.height,o=t.getImageData(0,0,s,n),r=o.data,a=new UZ,p=0;p<n;p++)for(var h=0;h<s;h++){var u=yC(h,0,s),f=1-yC(p,0,n);a.setFromHSV(i,u,f);var l=(p*s+h)*4;r[l]=a.red,r[l+1]=a.green,r[l+2]=a.blue,r[l+3]=255}t.putImageData(o,0,0)};var Cbt=Phaser.Display.Color,HZ=Phaser.Math.Percent,Sbt=Phaser.Display.Color.ColorToRGBA,Tbt=Phaser.Display.Color.HSVToRGB,cR=class extends Jr{constructor(t,i,s,n,o,r){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=2),o===void 0&&(o=2),super(t,i,s,n,o),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new Cbt,this.setOrientation(r),this.setSize(n,o)}setOrientation(t){return this.orientation=Ar(t),this}updateTexture(){return zZ(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,i){return t===void 0?this.hue:(this.orientation===0?this.hue=HZ(t,0,this.width):this.hue=HZ(i,0,this.height),this.hue)}getColor(t,i){if(t===void 0)return this.color;var s=this.getHue(t,i);return this.colorObject.setFromRGB(Tbt(s,1,1)),this.colorObject.color}setColor(t){return this.color===t?this:this}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(fR===void 0&&(fR={}),i=fR),this.colorObject.setFromRGB(Sbt(t)),this.orientation===0?(i.x=this.width*this.colorObject.h,i.y=this.height/2):(i.x=this.width/2,i.y=this.height*this.colorObject.h),i}},fR=void 0,YZ=cR;var Ebt=Phaser.Math.RotateAround,CC=function(e,t,i,s){s===void 0?s={}:s===!0&&(pR===void 0&&(pR={}),s=pR),t-=e.width*e.originX,i-=e.height*e.originY;var n={x:t*e.scaleX,y:i*e.scaleY};return Ebt(n,0,0,-e.rotation),s.x=e.x+t,s.y=e.y+i,s},pR;var vR=class extends Ge{constructor(t,i){i===void 0&&(i={}),super(t,i);var s=i.width!=null?1:0,n=new YZ(t).setOrientation(s);t.add.existing(n),this.type="rexColorPicker.HPalette",n.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var o=new Qi(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(o),this.add(n,{key:"paletteCanvas",expand:!0}).add(o,{key:"marker",expand:!1})}resize(t,i){if(this.width===t&&this.height===i)return this;super.resize(t,i);var s=Math.min(t,i);return this.childrenMap.marker.setSize(s,s),this}onPaletteCanvasPointerDown(t,i,s,n){if(t.isDown){var o=this.childrenMap.paletteCanvas,r=o.getColor(i,s);this.setMarkerPosition(r),this.emit("input",r)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,s=this.childrenMap.marker,n=i.colorToLocalPosition(t,!0);return CC(i,n.x,n.y,s),this.resetChildPositionState(s),this}getHue(t,i){var s=this.childrenMap.paletteCanvas;return s.getHue(t,i)}},XZ=vR;var Pbt=Phaser.Display.Color,$Z=Phaser.Math.Percent,jZ=Phaser.Display.Color.ColorToRGBA,Mbt=Phaser.Display.Color.HSVToRGB,gR=class extends Jr{constructor(t,i,s,n,o,r){i===void 0&&(i=0),s===void 0&&(s=0),n===void 0&&(n=2),o===void 0&&(o=2),super(t,i,s,n,o),this.type="rexColorPicker.SVPaletteCanvas",r===void 0&&(r=1),this.colorObject=new Pbt,this.setHue(r),this.setSize(n,o)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return WZ(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,i){if(t===void 0)return this.colorObject.color;var s=$Z(t,0,this.width),n=1-$Z(i,0,this.height);return this.colorObject.setFromRGB(Mbt(this.hue,s,n)),this.colorObject.color}setColor(t){return this.color===t?this:(this.colorObject.setFromRGB(jZ(t)),this.setHue(this.colorObject.h),this)}colorToLocalPosition(t,i){return i===void 0?i={}:i===!0&&(mR===void 0&&(mR={}),i=mR),this.colorObject.setFromRGB(jZ(t)),i.x=this.width*this.colorObject.s,i.y=this.height*(1-this.colorObject.v),i}},mR=void 0,ZZ=gR;var xR=class extends Ge{constructor(t,i){super(t,i);var s=new ZZ(t);t.add.existing(s),this.type="rexColorPicker.SVPalette",s.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var n=new Qi(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(n),this.add(s,{key:"paletteCanvas",expand:!0}).add(n,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,i,s,n){if(t.isDown){var o=this.childrenMap.paletteCanvas,r=o.getColor(i,s);this.setMarkerPosition(r),this.emit("input",r)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){var i=this.childrenMap.paletteCanvas;return i.setHue(t),this}setColor(t){if(this.color===t)return this;var i=this.childrenMap.paletteCanvas;return i.setColor(t),this.setMarkerPosition(t),this}setMarkerPosition(t){var i=this.childrenMap.paletteCanvas,s=this.childrenMap.marker,n=i.colorToLocalPosition(t,!0);return CC(i,n.x,n.y,s),this.resetChildPositionState(s),this}},KZ=xR;var on=Phaser.Utils.Objects.GetValue,yR=class extends ht{constructor(t,i){super(t,i),this.type="rexColorPicker",this.freezePalettes=!1;var s=on(i,"hPalette.position",0);typeof s=="string"&&(s=wbt[s]);var n=s===0||s===2?1:0;this.setOrientation(n);var o=on(i,"background",void 0),r,a;if(this.orientation===0){var r=on(i,"hPalette.width",void 0);r===void 0&&(r=on(i,"hPalette.size",10))}else a=on(i,"hPalette.height",void 0),a===void 0&&(a=on(i,"hPalette.size",10));var p=new XZ(t,{width:r,height:a});t.add.existing(p);var h=on(i,"svPalette.width",void 0),u=on(i,"svPalette.height",void 0),f=new KZ(t,{width:h,height:u});t.add.existing(f),o&&this.addBackground(o);var l={proportion:0,expand:!0},d,v;this.orientation===0?(d=h===void 0?1:0,v=u===void 0):(d=u===void 0?1:0,v=h===void 0);var c={proportion:d,expand:v};s===0||s===3?this.add(f,c).add(p,l):this.add(p,l).add(f,c),p.on("input",function(){f.setHue(p.getHue()),this.setValue(f.color,!0)},this),f.on("input",function(){this.setValue(f.color,!0)},this),this.addChildrenMap("background",o),this.addChildrenMap("hPalette",p),this.addChildrenMap("svPalette",f);var m=on(i,"valuechangeCallback",null);if(m!==null){var g=on(i,"valuechangeCallbackScope",void 0);this.on("valuechange",m,g)}this.setValue(on(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var i=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,i,this)}}setValue(t,i){return this.freezePalettes=!!i,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,i,s){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(t,i,s),this}},wbt={bottom:0,left:1,top:2,right:3},dc=yR;var Yn=Phaser.Utils.Objects.GetValue,bbt=Phaser.Display.Color,Rbt=Phaser.Display.Color.ColorToRGBA,Ibt=Phaser.Display.Color.HSVToRGB,_o=Phaser.Math.Clamp,CR=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation=0,super(t,i),this.type="rexColorComponents",this.colorObject=new bbt;var s=Yn(i,"background",void 0),n=Yn(i,"formatLabel",void 0);de(n)||(n=ge(t,n).resetDisplayContent());var o=[];if(i.inputText0&&i.inputText1&&i.inputText2)o.push(i.inputText0),o.push(i.inputText1),o.push(i.inputText2);else for(var r=Yn(i,"inputText"),a=0;a<3;a++){var p=Ms(t,r).setMaxLength(3).setNumberInput();o.push(p)}s&&this.addBackground(s);var u=Yn(i,"proportion.formatLabel",0),h=!!n.isRexContainerLite,f=Yn(i,"expand.formatLabel",h);this.add(n,{proportion:u,expand:f});for(var u=Yn(r,"width")===void 0?1:0,f=Yn(r,"height")===void 0,a=0,l=o.length;a<l;a++)this.add(o[a],{proportion:u,expand:f});this.addChildrenMap("background",s),this.addChildrenMap("formatLabel",n),this.addChildrenMap("components",o),this.onClick(n,this.toggleColorFormat,this);for(var a=0,l=o.length;a<l;a++)o[a].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var d=Yn(i,"valuechangeCallback",null);if(d!==null){var v=Yn(i,"valuechangeCallbackScope",void 0);this.on("valuechange",d,v)}n.setText("RGB"),this.setValue(Yn(i,"value",16777215))}get value(){return this._value}set value(t){t=_o(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(Rbt(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t=this.childrenMap.components,i,s,n;return this.colorFormat==="RGB"?(i=this.colorObject.red,s=this.colorObject.green,n=this.colorObject.blue):(i=Math.floor(this.colorObject.h*360),s=Math.floor(this.colorObject.s*100),n=Math.floor(this.colorObject.v*100)),t[0].setValue(i),t[1].setValue(s),t[2].setValue(n),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var i=_o(t[0].value,0,255),s=_o(t[1].value,0,255),n=_o(t[2].value,0,255);this.colorObject.setTo(i,s,n)}else{var o=_o(t[0].value,0,359)/360,r=_o(t[1].value,0,100)/100,a=_o(t[2].value,0,100)/100;this.colorObject.setFromRGB(Ibt(o,r,a))}return this}},fc=CR;var cc=Y0;var SR=Phaser.Utils.Objects.GetValue,TR=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexColorInput.ColorPickerPanel";var s=SR(i,"background",void 0),n=new dc(t,{hPalette:i.hPalette||{},svPalette:i.svPalette||{},space:{item:SR(i,"space.hPalette",8)}});t.add.existing(n);var o;if(i.colorComponents&&(o=new fc(t,i.colorComponents),t.add.existing(o)),s){this.addBackground(s);var r=new cc(s,{stopAllLevels:!1})}this.add(n,{proportion:1,expand:!0}),o&&this.add(o,{proportion:0,expand:!0}),this.addChildrenMap("background",s),this.addChildrenMap("colorPicker",n),this.addChildrenMap("colorComponents",o),n.on("valuechange",function(a){this.setValue(a)},this),o&&o.on("valuechange",function(a){this.setValue(a)},this),this.setValue(SR(i,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t;var i=this.childrenMap.colorPicker;i.setValue(t);var s=this.childrenMap.colorComponents;s&&s.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}},JZ=TR;var Vje=Phaser.Utils.Objects.GetValue,Abt=function(t){var t=this.scene,i,s=this.colorPickerCreateBackgroundCallback;s&&(i=s.call(this,t),t.add.existing(i));var n=this.colorPickerWidth;n===void 0&&(n=this.width);var o=this.colorPickerHeight;o===void 0&&(o=n);var r;this.colorComponentsHeight>0?r={height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace}:r=!1;var a=new JZ(t,{width:n,height:o,background:i,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:r,value:this.value});return t.add.existing(a),a},QZ=Abt;var Obt=function(){if(!this.colorPicker){var e=QZ.call(this).layout(),t=new Zy(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(i){this.setValue(i)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}},qZ=Obt;var _Z={openColorPicker:qZ};Object.assign(_Z,VZ);var tK=_Z;var ci=Phaser.Utils.Objects.GetValue,SC=class extends uc{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexColorInput",i.hasOwnProperty("colorPicker")||(i.colorPicker={background:{color:0}});var s=i.colorPicker,n=s!==!1&&s!==null;if(n){this.setColorPickerSize(ci(s,"width",160),ci(s,"height",170));var o,r=ci(s,"background");r?o=function(d){return Zt(d,r)}:o=ci(s,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(o),this.setColorPickerHPalettePosition(ci(s,"hPalettePosition",0)),this.setColorPickerExpandDirection(ci(s,"expandDirection")),this.setColorPickerEaseInDuration(ci(s,"easeIn",200)),this.setColorPickerEaseOutDuration(ci(s,"easeOut",200)),this.setColorPickerTransitInCallback(ci(s,"transitIn")),this.setColorPickerTransitOutCallback(ci(s,"transitOut")),this.setColorPickerBounds(ci(s,"bounds"));var a=ci(s,"space");a===void 0&&(a={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(a)}var p=i.colorComponents,h=p!==!1&&p!==null;if(n&&h){this.setColorComponentsHeight(ci(p,"height",30)),this.setColorComponentsFormatLabelConfig(ci(p,"formatLabel"));var u=ci(p,"inputText");u||(u=ci(i,"inputText")),this.setColorComponentsInputTextConfig(u);var f=ci(p,"space");f===void 0&&(f={item:8}),this.setColorComponentsSpace(f)}var l=this.childrenMap.swatch;l&&n&&this.onClick(l,this.openColorPicker,this)}};Object.assign(SC.prototype,tK);var pc=SC;K.register("colorInput",function(e){var t=new pc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorInput",pc);K.register("colorInputLite",function(e){var t=new uc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorInputBase",uc);K.register("colorPicker",function(e){var t=new dc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorPicker",dc);K.register("colorComponents",function(e){var t=new fc(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.ColorComponents",fc);var Dbt=function(e){for(var t=e.scene.input,i=t.manager,s=i.pointersTotal,n=i.pointers,o,r=0;r<s;r++)if(o=n[r],!(!o.primaryDown||t.getDragState(o)!==0||!wh(e,o)))return t.setDragState(o,1),t._drag[o.id]=[e],t.dragDistanceThreshold===0||t.dragTimeThreshold===0?(t.setDragState(o,3),t.processDragStartList(o)):t.setDragState(o,2),!0;return!1},TC=Dbt;var EC=Phaser.Utils.Objects.GetValue,eK=Phaser.Math.Distance.Between,iK=Phaser.Math.RotateAroundDistance,ER=class extends Et{constructor(t,i){super(t,{eventEmitter:!1}),this._enable=void 0,t.setInteractive(EC(i,"inputConfig",void 0)),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.setEnable(EC(t,"enable",!0)),this.setAxisMode(EC(t,"axis",0)),this.setAxisRotation(EC(t,"rotation",0)),this}toJSON(){return{enable:this.enable,axis:this.axisMode,rotation:this.axisRotation}}boot(){var t=this.parent;t.on("dragstart",this.onDragStart,this),t.on("drag",this.onDrag,this),t.on("dragend",this.onDragEnd,this)}shutdown(t){this.isShutdown||(this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragend(),this._enable=t,this.scene.input.setDraggable(this.parent,t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setAxisMode(t){return typeof t=="string"&&(t=Lbt[t]),this.axisMode=t,this}setAxisRotation(t){return this.axisRotation=t,this}drag(){return TC(this.parent),this}dragend(){if(this.isDragging)return this.scene.input.setDragState(this.pointer,5),this}onDragStart(t,i,s){this.isDragging||(this.pointer=t)}onDrag(t,i,s){if(this.pointer===t){var n=this.parent;if(this.axisMode===0)n.x=i,n.y=s;else if(this.axisRotation===0)this.axisMode===1?n.x=i:this.axisMode===2&&(n.y=s);else{var o,r={x:i,y:s};o=eK(r.x,r.y,n.x,n.y),r=iK(r,n.x,n.y,-this.axisRotation,o),this.axisMode===1?r.y=n.y:this.axisMode===2&&(r.x=n.x),o=eK(r.x,r.y,n.x,n.y),r=iK(r,n.x,n.y,this.axisRotation,o),n.x=r.x,n.y=r.y}}}onDragEnd(t,i,s,n){this.pointer===t&&(this.pointer=void 0)}get isDragging(){return this.pointer!==void 0}},Lbt={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},PC=ER;var Fbt=function(){var e=this.sizerChildren[0],t=this.sizerChildren[1],i=this.sizerChildren[2],s=this.getSizerConfig(e).padding,n=this.getSizerConfig(t).padding,o=this.getSizerConfig(i).padding;if(this.orientation===0){var r=this.innerLeft+s.left,a=this.innerRight-o.right,p=mt(t),h=t.x+p*(0-t.originX),u=t.x+p*(1-t.originX),f=h-n.left-this.space.item-s.right,l=u+n.right+this.space.item+o.left,d=f-r,v=a-l,c=d+v;this.minFirstChildSize>0&&d<this.minFirstChildSize&&(d=this.minFirstChildSize,v=c-d),this.minSecondChildSize>0&&v<this.minSecondChildSize&&(v=this.minSecondChildSize,d=c-v),this.setSplitRatio(d/c)}else{var m=this.innerTop+s.top,g=this.innerBottom-o.bottom,y=gt(t),x=t.y+y*(0-t.originY),C=t.y+y*(1-t.originY),S=x-n.top-this.space.item-s.bottom,E=C+n.bottom+this.space.item+o.top,T=S-m,P=g-E,M=T+P;this.minFirstChildSize>0&&T<this.minFirstChildSize&&(T=this.minFirstChildSize,P=M-T),this.minSecondChildSize>0&&P<this.minSecondChildSize&&(P=this.minSecondChildSize,T=M-P),this.setSplitRatio(T/M)}var w=this.minWidth,b=this.minHeight;this.setMinSize(this.width,this.height).layout().setMinSize(w,b)},rK=Fbt;var Ye=Phaser.Utils.Objects.GetValue,Bbt=Phaser.Math.Clamp,PR=class extends ht{constructor(t,i){i.hasOwnProperty("orientation")||(i.orientation=i.hasOwnProperty("leftPanel")?0:1),super(t,i),this.type="rexSplit";var s=Ye(i,"background",void 0),n,o,r,a;this.orientation===0?(n="leftPanel",o="rightPanel",r="minLeftPanelWidth",a="minRightPanelWidth"):(n="topPanel",o="bottomPanel",r="minTopPanelHeight",a="minBottomPanelHeight");var p=Ye(i,n,void 0),h=Ye(i,"splitter",void 0),u=Ye(i,o,void 0);s&&this.addBackground(s);var f=Ye(i,"space",void 0);this.add(p,{proportion:1,expand:!0,padding:{left:Ye(f,`${n}Left`,0),right:Ye(f,`${n}Right`,0),top:Ye(f,`${n}Top`,0),bottom:Ye(f,`${n}Bottom`,0)}}),this.add(h,{proportion:0,expand:!0,padding:{left:Ye(f,"splitterLeft",0),right:Ye(f,"splitterRight",0),top:Ye(f,"splitterTop",0),bottom:Ye(f,"splitterBottom",0)}}),this.add(u,{proportion:1,expand:!0,padding:{left:Ye(f,`${o}Left`,0),right:Ye(f,`${o}Right`,0),top:Ye(f,`${o}Top`,0),bottom:Ye(f,`${o}Bottom`,0)}}),this.addChildrenMap("background",s),this.addChildrenMap(n,p),this.addChildrenMap("splitter",h),this.addChildrenMap(o,u),this.minFirstChildSize=Ye(i,r,0),this.minSecondChildSize=Ye(i,a,0),this.setSplitRatio(Ye(i,"splitRatio",.5)),this.splitterDragBehavior=new PC(h,{axis:this.orientation===0?1:2}),h.on("dragstart",function(){this.emit("splitter.dragstart",h,this.splitRatio)},this).on("dragend",function(){this.emit("splitter.dragend",h,this.splitRatio)},this).on("drag",function(){rK.call(this),this.emit("splitter.drag",h,this.splitRatio)},this).on("pointerover",function(){this.emit("splitter.over",h,this.splitRatio)},this).on("pointerout",function(){this.emit("splitter.out",h,this.splitRatio)},this)}get splitterEnable(){return this.splitterDragBehavior.enable}set splitterEnable(t){this.splitterDragBehavior.setEnable(t)}setSplitterEnable(t){return t===void 0&&(t=!0),this.splitterEnable=t,this}set minLeftPanelWidth(t){this.minFirstChildSize=t}get minLeftPanelWidth(){return this.minFirstChildSize}set minRightPanelWidth(t){this.minSecondChildSize=t}get minRightPanelWidth(){return this.minSecondChildSize}set minTopPanelHeight(t){this.minFirstChildSize=t}get minTopPanelHeight(){return this.minFirstChildSize}set minBottomPanelHeight(t){this.minSecondChildSize=t}get minBottomPanelHeight(){return this.minSecondChildSize}setMinLeftPanelWidth(t){return this.minLeftPanelWidth=t,this}setMinRightPanelWidth(t){return this.minRightPanelWidth=t,this}setMinTopPanelHeight(t){return this.minTopPanelHeight=t,this}setMinBottomPanelHeight(t){return this.minBottomPanelHeight=t,this}get splitRatio(){return this._splitRatio}set splitRatio(t){t=Bbt(t,0,1),this._splitRatio!==t&&(this._splitRatio=t,this.getSizerConfig(this.sizerChildren[0]).proportion=t,this.getSizerConfig(this.sizerChildren[2]).proportion=1-t)}setSplitRatio(t){return this.splitRatio=t,this}},MR=PR;K.register("splitPanels",function(e){var t=new MR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.SplitPanels",MR);var Nbt=function(){return function(e,t,i,s){t!=="panel"&&i.setChildVisible(e,!0)}},Gbt=function(){return function(e,t,i,s){t!=="panel"&&i.setChildVisible(e,!1)}},nK={show:Nbt,hide:Gbt};var kbt=function(e,t){return t===void 0&&(t=1),function(i,s,n,o){s!=="panel"&&n.fadeChild(i,o?0:e,t)}},Vbt=function(e,t){return t===void 0&&(t=0),function(i,s,n,o){s!=="panel"&&n.fadeChild(i,o?0:e,t)}},sK={show:kbt,hide:Vbt};var aK=function(e,t){return function(i,s,n,o){s!=="panel"&&n.moveChild(i,o?0:e,t)}},oK={show:aK,hide:aK};var lK=function(e,t){return function(i,s,n,o){s==="panel"&&n.moveChild(i,o?0:e,t)}},hK={show:lK,hide:lK};var wR={visible:nK,fade:sK,move:oK,"move-panel":hK},Ubt=function(e){var t,i;[t,...i]=typeof e=="string"?[e]:e;var s,n;return wR.hasOwnProperty(t)?(s=wR[t].show.apply(null,i),n=wR[t].hide.apply(null,i)):(s=re,n=re),{show:s,hide:n}},uK=Ubt;var dK={showChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("showchild",i,e,this,t),this.resetChildState(i)),this},hideChild(e,t){var i=this.sizerChildren[e];return i&&(this.emit("hidechild",i,e,this,t),this.resetChildState(i)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}};var zbt=Di.prototype.setChildVisible,fK={setChildVisible(e,t){var i;if(typeof e=="string"){var i=e;e=this.sizerChildren[i]}else i=xa(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===i),zbt.call(this,e,t),this}};var cK={fadeChild(e,t,i){var s;return typeof e=="string"?(s=e,e=this.sizerChildren[s]):s=xa(this.sizerChildren,e),t===void 0&&(t=500),i===void 0&&(i=this.currentChildKey===s?1:0),e.fadeIn(t,{start:e.alpha,end:i}),this},fadeChildPromise(e,t,i){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,i),e._fade?fe(e._fade):Promise.resolve()}};var pK={moveChild(e,t,i,s){var n;typeof e=="string"?(n=e,e=this.sizerChildren[n]):n=xa(this.sizerChildren,e),t===void 0&&(t=500);var o=this.currentChildKey===n;if(s===void 0)switch(n){case"leftSide":case"rightSide":s=mt(e);break;case"topSide":case"bottomSide":s=gt(e);break;default:if(o)switch(this.previousChildKey){case"leftSide":case"rightSide":s=mt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":s=gt(this.sizerChildren[this.previousChildKey]);break;default:s=0;break}else switch(this.currentChildKey){case"leftSide":case"rightSide":s=mt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":s=gt(this.sizerChildren[this.currentChildKey]);break;default:s=0;break}break}var r,a,p,h;if(o)switch(n){case"panel":switch(this.previousChildKey){case"leftSide":r=!0;break;case"rightSide":a=!0;break;case"topSide":p=!0;break;case"bottomSide":h=!0;break}break;case"leftSide":a=!0;break;case"rightSide":r=!0;break;case"topSide":h=!0;break;case"bottomSide":p=!0;break}else switch(n){case"panel":switch(this.currentChildKey){case"leftSide":a=!0;break;case"rightSide":r=!0;break;case"topSide":h=!0;break;case"bottomSide":p=!0;break}break;case"leftSide":r=!0;break;case"rightSide":a=!0;break;case"topSide":p=!0;break;case"bottomSide":h=!0;break}return r?e.moveTo(t,`-=${s}`,void 0,i):a?e.moveTo(t,`+=${s}`,void 0,i):p?e.moveTo(t,void 0,`-=${s}`,i):h?e.moveTo(t,void 0,`+=${s}`,i):e.moveTo(0),this},moveChildPromise(e,t,i,s){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,i,s),e._easeMove?fe(e._easeMove):Promise.resolve()}};var vK={};Object.assign(vK,fK,cK,pK);var mK=vK;var Yi=Phaser.Utils.Objects.GetValue,MC=class extends Ge{constructor(t,i){super(t,i),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var s=Yi(i,"showChildCallback",void 0);if(s)if(Be(s)){var n=Yi(i,"showChildCallbackScope",void 0);this.on("showchild",s,n);var o=Yi(i,"hideChildCallback",void 0),r=Yi(i,"hideChildCallbackScope",void 0);this.on("hidechild",o,r)}else{var a=uK(s);this.on("showchild",a.show),this.on("hidechild",a.hide)}var p=Yi(i,"background",void 0),h=Yi(i,"panel",void 0),u=Yi(i,"leftSide",void 0),f=Yi(i,"rightSide",void 0),l=Yi(i,"topSide",void 0),d=Yi(i,"bottomSide",void 0);if(p&&this.addBackground(p),h&&this.add(h,"panel","center",0,!0),u){var v=Yi(i,"expand.left",!0);this.add(u,"leftSide","left-top",0,{height:v})}if(f){var v=Yi(i,"expand.right",!0);this.add(f,"rightSide","right-top",0,{height:v})}if(l){var v=Yi(i,"expand.top",!0);this.add(l,"topSide","left-top",0,{width:v})}if(d){var v=Yi(i,"expand.bottom",!0);this.add(d,"bottomSide","left-bottom",0,{width:v})}}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}};Object.assign(MC.prototype,dK,mK);var bR=MC;K.register("sides",function(e){var t=new bR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Sides",bR);var Wbt=function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this},gK=Wbt;var Hbt=Phaser.Utils.Array.GetFirst,Ybt=Phaser.Utils.Array.Remove,Xbt=function(e){var t=Hbt(this.inputHandlers,"name",e);return t&&Ybt(this.inputHandlers,t),this},xK=Xbt;var RR=class extends di{constructor(t,i){i=Pa(t,i),super(t,i),this.type="rexTweaker.Title"}setTitle(t){return t=t?qt(t):{},t.hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}},Xn=RR;var IR=class extends Xn{constructor(t,i){i===void 0&&(i={}),super(t,i),this.type="rexTweaker.FolderTitle";var s=new yo(t,i.expandedIcon);t.add.existing(s),this.addSpace().add(s,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",s)}setExpandedState(t){t===void 0&&(t=!0);var i=t?"down":"right",s=this.childrenMap.expandedIcon;return s.setDirection(i),this}},yK=IR;var $bt=function(e,t){var i=ze(e);for(var s in t)i.hasOwnProperty(s)||(i[s]=t[s]);return i},wC=$bt;var jbt=function(e,t,i){return Zt(e,wC(t,i))},Ba=jbt;var CK={setBindingTarget(e){var t=this.childrenMap.child;return t.setBindingTarget(e),this}};var SK={getMaxInputRowTitleWidth(){var e=this.childrenMap.child,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.child;return t.setInputRowTitleWidth(e),this}};var bC=class extends Qo{constructor(t,i){i===void 0&&(i={}),i.orientation=1,super(t,i),this.type="rexTweaker.Folder"}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}};Object.assign(bC.prototype,CK,SK);var TK=bC;var $u=Phaser.Utils.Objects.GetValue,Zbt=function(e,t,i){var s=e.scene,n=$u(i,"title")||{},o=new yK(s,n);s.add.existing(o),o.on("folder.expand",function(){o.setExpandedState(!0)}).on("folder.collapse",function(){o.setExpandedState(!1)});var r={root:$u(i,"root"),styles:$u(i,"tweaker"),space:$u(i,"space")||{}},a=e.createTweaker(r),p=$u(i,"background"),h=Ba(s,t,p),u=new TK(s,{title:o,child:a,background:h,transition:{duration:$u(i,"transition.duration",200)}});return s.add.existing(u),u},EK=Zbt;var PK=Phaser.Utils.Objects.GetValue,Kbt=function(e){e===void 0&&(e={});var t=PK(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var i=EK(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var s=PK(e,"expanded",!0);s!==void 0&&i.setExpandedState(s);var n=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,n),n},MK=Kbt;var wK={setBindingTarget(e){for(var t=this.childrenMap.pages.children,i=0,s=t.length;i<s;i++)t[i].setBindingTarget(e);return this}};var bK={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,i=0,s=t.length;i<s;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,i=0,s=t.length;i<s;i++)t[i].setInputRowTitleWidth(e);return this}};var RC=class extends ac{constructor(t,i){super(t,i),this.type="rexTweaker.TabPages"}};Object.assign(RC.prototype,wK,bK);var RK=RC;var IC=Phaser.Utils.Objects.GetValue,Jbt=function(e,t,i){var s=e.scene,n=new RK(s,i);s.add.existing(n);for(var o=IC(i,"tab"),r={root:IC(i,"root"),styles:IC(i,"tweaker")},a=IC(t,"pages")||[],p=0,h=a.length;p<h;p++){var u=a[p];n.addPage({key:u.title,tab:ge(s,o).setActiveState(!1).resetDisplayContent({text:u.title}),page:e.createTweaker(r)})}return n.on("tab.focus",function(f,l){f.setActiveState(!0)}).on("tab.blur",function(f,l){f.setActiveState(!1)}),n},IK=Jbt;var AK=Phaser.Utils.Objects.GetValue,Qbt=function(e){e===void 0&&(e={});var t=AK(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var i=IK(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0});for(var s=AK(e,"pages")||[],n=[],o=0,r=0,a=s.length;r<a;r++){var p=i.getPage(r),h=s[r].show;h&&(o=r);var u=s[r].key;u&&this.root.addChildrenMap(u,p),n.push(p)}return i.swapPage(o,0),n},OK=Qbt;var DK={setBindingTarget(e){for(var t=this.childrenMap.columns,i=0,s=t.length;i<s;i++)t[i].setBindingTarget(e);return this}};var LK={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,i=0,s=t.length;i<s;i++)e=Math.max(e,t[i].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,i=0,s=t.length;i<s;i++)t[i].setInputRowTitleWidth(e);return this}};var ju=Phaser.Utils.Objects.GetValue,AC=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation="y",super(t,i),this.type="rexTweaker.Columns";var s=ju(i,"background",void 0),n=ju(i,"title",void 0);s&&this.addBackground(s),n&&this.add(n,{expand:!0,space:{bottom:ju(i,"space.title",0)}});var o=new ht(t,{orientation:"x",space:{item:ju(i,"space.column",0)}});t.add.existing(o);for(var r=ju(i,"columns",void 0),a,p,h=0,u=r.length;h<u;h++)a=r[h],p=a.child,o.add(a.child,{proportion:p.minWidth===0?1:0,expand:ju(a,"expand",!0)});this.add(o,{expand:!0}),this.addChildrenMap("title",n),this.addChildrenMap("columnsSizer",o),this.addChildrenMap("columns",o.childrenMap.items)}setTitle(t){var i=this.childrenMap.title;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(t){return this.childrenMap.columns[t]}};Object.assign(AC.prototype,DK,LK);var FK=AC;var tl=Phaser.Utils.Objects.GetValue,qbt=function(e,t,i){var s=e.scene,n=tl(i,"title")||{},o=new Xn(s,n);s.add.existing(o);var r={root:tl(i,"root"),styles:tl(i,"tweaker")},a=tl(i,"background");a&&!Array.isArray(a)&&(a=[a]);var p=tl(t,"columns",2);if(typeof p=="number"){var h=p;p=[];for(var u=0,f=h;u<f;u++)p.push({})}for(var u=0,f=p.length;u<f;u++){var l=p[u];a&&(r.background=a[u%a.length]),r.width=tl(l,"width",0);var d=e.createTweaker(r);l.child=d}var v=new FK(s,{title:o,columns:p,space:tl(i,"space")});return s.add.existing(v),v},BK=qbt;var NK=Phaser.Utils.Objects.GetValue,_bt=function(e){e===void 0&&(e={}),typeof e=="number"&&(e={columns:e});var t=NK(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var i=BK(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var s=NK(e,"columns",void 0);if(s&&Array.isArray(s))for(var n=0,o=s.length;n<o;n++){var r=s[n].key;r&&this.root.addChildrenMap(r,i.getColumn(n))}return i.getColumns()},GK=_bt;var kK={setBindingTarget(e){for(var t=this.childrenMap.child,i=0,s=t.length;i<s;i++)t[i].setBindingTarget(e);return this}};var VK={getMaxInputRowTitleWidth(){return 0},setInputRowTitleWidth(e){return this}};var OC=Phaser.Utils.Objects.GetValue,DC=class extends ht{constructor(t,i){i===void 0&&(i={}),i.orientation="y",super(t,i),this.type="rexTweaker.Wrap";var s=OC(i,"background",void 0),n=OC(i,"title",void 0);s&&this.addBackground(s),n&&this.add(n,{expand:!0,space:{bottom:OC(i,"space.title",0)}});var o=OC(i,"child",void 0);this.add(o,{expand:!0}),this.addChildrenMap("title",n),this.addChildrenMap("child",o)}setTitle(t){var i=this.childrenMap.title;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}};Object.assign(DC.prototype,kK,VK);var UK=DC;var $n=Phaser.Utils.Objects.GetValue,tRt=function(e,t,i){var s=e.scene,n=$n(i,"title")||{},o=new Xn(s,n);s.add.existing(o);var r=$n(i,"itemWidth",0),a=$n(i,"itemHeight",0),p={root:$n(i,"root"),styles:$n(i,"tweaker"),space:$n(i,"space"),align:$n(i,"align",5),wrap:!0,itemWidth:$n(t,"itemWidth",r),itemHeight:$n(t,"itemHeight",a)},h=$n(i,"background");h&&!Array.isArray(h)&&(h=[h]);var u=e.createTweaker(p),f=new UK(s,{title:o,child:u});return s.add.existing(f),f},zK=tRt;var eRt=Phaser.Utils.Objects.GetValue,iRt=function(e){e===void 0&&(e={});var t=eRt(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var i=zK(this,e,t);delete t.tweaker,delete t.root,this.add(i,{expand:!0}),i.setTitle(e);var s=i.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,s),s},WK=iRt;var HK={setBindingTarget(e){var t=this.childrenMap.panel;return t.setBindingTarget(e),this}};var YK={getMaxInputRowTitleWidth(){var e=this.childrenMap.panel,t=e.getMaxInputRowTitleWidth();return t+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");var t=this.childrenMap.panel;return t.setInputRowTitleWidth(e),this}};var LC=class extends jo{constructor(t,i){super(t,i),this.type="rexTweaker.Scrollable"}setTitle(t){var i=this.childrenMap.header;return t.title||t.icon?i.show().setTitle(t):i.hide(),this}};Object.assign(LC.prototype,HK,YK);var XK=LC;var Na=Phaser.Utils.Objects.GetValue,rRt=function(e,t,i){var s=e.scene,n=Na(i,"title")||{},o=new Xn(s,n);s.add.existing(o);var r={root:Na(i,"root"),styles:Na(i,"tweaker"),space:Na(i,"space")||{}},a=e.createTweaker(r),p=Na(i,"slider");if(p){p=qt(p);var h=p.track;h&&(p.track=Ba(s,t,h));var u=p.thumb;u&&(p.thumb=Ba(s,t,u))}var f=Na(i,"background"),l=Ba(s,t,f),d=new XK(s,{scrollMode:0,header:o,panel:{child:a,mask:{padding:1}},slider:p,background:l,height:Na(t,"height",0),space:Na(i,"space",void 0)});return s.add.existing(d),d},$K=rRt;var nRt=Phaser.Utils.Objects.GetValue,sRt=function(e){e===void 0&&(e={});var t=nRt(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var i=$K(this,e,t);delete t.tweaker,delete t.root,this.add(i,{proportion:i.minWidth===0?1:0,expand:!0}),i.setTitle(e);var s=i.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,s),s},jK=sRt;var ZK=Phaser.Utils.Objects.GetValue,KK={setupBinding(){var e=this.childrenMap.inputField;return e.on("valuechange",function(t){this.autoUpdateEnable&&this.setTargetValue(t)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue();var i=this.childrenMap.inputField;return i.onBindTarget&&i.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=ZK(e,"onGetValue"),this.onSetValue=ZK(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget){if(this.bindTargetKey!=null)return this.bindingTarget[this.bindTargetKey];if(this.onGetValue)return this.onGetValue(this.bindingTarget)}},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}};var JK={startMonitorTarget(){return this.isMonitoring?this:(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this),this)},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}};var QK={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding,i=this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX;return i+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var i=t.rexSizer.padding;return e-=(i.left+i.right)*t.scaleX,t.minWidth=e,this}};var AR=Phaser.Utils.Objects.GetValue,FC=class extends ht{constructor(t,i){super(t,i),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var s=i.inputTitle,n=i.inputField,o=i.background,h=AR(i,"proportion.title",0),r=AR(i,"space.title",0),a;this.orientation===0?a={right:r}:a={bottom:r},this.add(s,{proportion:h,expand:!0,padding:a});var p=n.defaultProportion;p===void 0&&(p=i.defaultExpandWidth?1:0);var h=AR(i,"proportion.inputField",p);this.add(n,{proportion:h,expand:!0}),o&&this.addBackground(o),this.addChildrenMap("title",s),this.addChildrenMap("inputField",n),this.addChildrenMap("background",o),this.setupBinding()}destroy(t){!this.scene||this.ignoreDestroy||(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){var i=this.childrenMap.title;return i.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}};Object.assign(FC.prototype,KK,JK,QK);var BC=FC;var aRt=function(e,t,i){var s=new Xn(e,i);return e.add.existing(s),s},NC=aRt;var oRt=function(e){e===void 0&&(e=ht);class t extends e{get bindingTarget(){var s=this.getParentSizer();return s.bindingTarget}get bindingKey(){var s=this.getParentSizer();return s.bindTargetKey}get value(){return this._value}get root(){var s=this.getParentSizer(),n=s.getParentSizer();return n.root}onBindTarget(s,n){this.onBindTargetCallback&&this.onBindTargetCallback(this,s,n)}validate(s){return this.syncValueFlag||!this.validateCallback?!0:this.validateCallback(s,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(s){return this.textFormatCallback?s=this.textFormatCallback(s):s=s.toString(),s}set value(s){if(this._value!==s&&(this.validate(s)||(s=this._value),this.filterValueCallback&&(s=this.filterValueCallback(this,s)),this.displayValueCallback&&this.displayValueCallback(this,s),this._value!==s)){var n=this._value;if(this._value=s,!this.syncValueFlag){var o=this.bindingTarget,r=this.bindingKey;this.emit("valuechange",s,n,o,r),this.root.emit("valuechange",s,n,o,r)}}}getValue(){return this.value}setValue(s){return this.value=s,this}syncValue(s){return this.syncValueFlag=!0,this.value=s,this.syncValueFlag=!1,this}setup(s,n){return n===void 0&&(n=!1),(n||s.hasOwnProperty("format"))&&this.setTextFormatCallback(s.format),(n||s.hasOwnProperty("onValidate"))&&this.setValidateCallback(s.onValidate),this.setupCallback&&this.setupCallback(this,s,n),this}setSetupCallback(s){return this.setupCallback=s,this}setFilterValueCallback(s){return this.filterValueCallback=s,this}setDisplayValueCallback(s){return this.displayValueCallback=s,this}setOnBindTargetCallback(s){return this.onBindTargetCallback=s,this}setTextFormatCallback(s){return this.textFormatCallback=s,this}setValidateCallback(s){return this.validateCallback=s,this}}return t},qK=oRt;var lRt=function(e,t,i){for(var s,n=this.inputHandlers,o=0,r=n.length;o<r;o++){var a=n[o];if(a.accept(t)){var p=qK(a.baseClass);s=new p(e),e.add.existing(s),s.setSetupCallback(a.setup).setFilterValueCallback(a.filterValue).setDisplayValueCallback(a.displayValue).setOnBindTargetCallback(a.onBindTarget),a.build(s,i);break}}return s&&s.setup(t,!0),s},_K=lRt;var tJ=Phaser.Utils.Objects.GetValue,hRt=function(e,t,i){var s=_K.call(this,e,t,i);if(!s)return null;var n=tJ(i,"title")||{},o=NC(e,t,n),r=tJ(i,"background")||{},a=Zt(e,r),p=new BC(e,At(_(_({},i),t),{inputTitle:o,inputField:s,background:a}));return e.add.existing(p),p.setTitle(t),p.setValueCallbacks(t),p},eJ=hRt;var uRt=function(e,t,i){arguments.length===1?(i=e,e=i.bindingTarget,t=i.bindingKey):(i===void 0&&(i={}),i.bindingTarget=e,i.bindingKey=t),i.title||(i.title=t),i.bindingTarget&&i.bindingKey?i.value=i.bindingTarget[i.bindingKey]:i.value=void 0;var s=this.styles.inputRow||{};this.isWrapMode?s.defaultExpandWidth=!0:s.defaultExpandWidth=this.styles.orientation===1;var n=eJ.call(this,this.scene,i,s);if(!n)return console.error(`[Tweaker] Can't add Input
    title: ${i.title}
    view: ${i.view}
`),this;if(this.isWrapMode)n.setMinWidth(this.itemWidth),n.setMinHeight(this.itemHeight),this.add(n);else{var o;this.orientation===1?o=0:(o=this.itemWidth>0?0:1,n.minWidth===0&&n.setMinWidth(this.itemWidth)),n.minHeight===0&&n.setMinHeight(this.itemHeight),this.add(n,{proportion:o,expand:!0})}if(i.onValueChange){var r=n.childrenMap.inputField;r.on("valuechange",i.onValueChange)}return n.setAutoUpdateEnable(i.autoUpdate),n.setBindingTarget(e,t),i.monitor&&n.startMonitorTarget(),i.key&&this.root.addChildrenMap(i.key,n),this},iJ=uRt;var dRt=function(e,t){var i=new Qi(e,t);return e.add.existing(i),i},rJ=dRt;var fRt=Phaser.Utils.Objects.GetValue,cRt=function(e,t){var i=fRt(t,"wrap",!1),s=i?Fr:xe,n=new s(e,t);return e.add.existing(n),n},nJ=cRt;var GC=Phaser.Utils.Objects.GetValue,pRt=function(e,t,i){for(var s=GC(i,"title")||{},n=NC(e,t,s),o=t.buttons,r=GC(i,"button")||{},a=[],p=0,h=o.length;p<h;p++){var u=ge(e,r);a.push(u);var f=o[p];u.resetDisplayContent(f.label),u.callback=f.callback}var l=nJ(e,{buttons:a,expand:!0,wrap:GC(t,"wrap",!1)});l.defaultProportion=1;var d=GC(i,"background")||{},v=rJ(e,d),c=new BC(e,At(_({},i),{inputTitle:n,inputField:l,background:v}));return e.add.existing(c),c.setTitle(t),l.on("button.click",function(m){m.callback(c.bindingTarget)}),c},sJ=pRt;var vRt=Phaser.Utils.Objects.GetValue,mRt=function(e){e===void 0&&(e={});var t=this.scene,i=e.bindingTarget;delete e.bindingTarget;var s=vRt(this.styles,"inputRow")||{},n=sJ(t,e,s);return this.add(n,{expand:!0}),i&&n.setBindingTarget(i),e.key&&this.root.addChildrenMap(e.key,n),this},aJ=mRt;var gRt=function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},oJ=gRt;var xRt=function(e,t,i){return Zt(e,wC(t,i))},lJ=xRt;var yRt=Phaser.Utils.Objects.GetValue,CRt=function(e){e===void 0&&(e={});var t=this.scene,i=yRt(this.styles,"separator"),s=lJ(t,e,i);return this.add(s,{expand:!0}),this},hJ=CRt;var SRt=function(e,t,i){return typeof t=="boolean"&&(i=t,t=void 0),i===void 0&&(i=!0),vc(this,qt(e),t,i),this},vc=function(e,t,i,s){if(t)for(var n=0,o=t.length;n<o;n++){var r=t[n];r.hasOwnProperty("$target")&&(i=r.$target,delete r.$target);var a=r.$type;switch(delete r.$type,a){case"folder":var p=e.addFolder(r);vc(p,r.$properties,i,s);break;case"tab":for(var h=e.addTab(r),u=0,f=h.length;u<f;u++)vc(h[u],r.pages[u].$properties,i,s);break;case"columns":for(var l=e.addColumns(r),u=0,f=l.length;u<f;u++)vc(l[u],r.columns[u].$properties,i,s);break;case"scrollable":var d=e.addScrollable(r);vc(d,r.$properties,i,s);break;case"separator":e.addSeparator();break;case"button":r.bindingTarget=i,e.addButton(r);break;case"buttons":r.bindingTarget=i,e.addButtons(r);break;default:var v=r.$key;if(delete r.$key,v.indexOf(".")===-1)r.bindingTarget=i,r.bindingKey=v;else{var c=v.split(".");r.bindingKey=c.pop();for(var m=i,g=0,y=c.length;g<y;g++)if(m=m[c[g]],!i){console.warn(`[Monitor] Key path '${v}' is invalid`);continue}r.bindingTarget=m}r.hasOwnProperty("monitor")||(r.monitor=s),e.addInput(r);break}}},uJ=SRt;var TRt=function(e){for(var t=this.sizerChildren,i=0,s=t.length;i<s;i++){var n=t[i];n.setBindingTarget&&n.setBindingTarget(e)}return this},dJ=TRt;var ERt=function(){for(var e=0,t=this.sizerChildren,i=0,s=t.length;i<s;i++){var n=t[i];n.rexSizer.hidden||(n.getMinTitleWidth?e=Math.max(e,n.getMinTitleWidth()):n.getMaxInputRowTitleWidth&&(e=Math.max(e,n.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},fJ=ERt;var PRt=function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,i=0,s=t.length;i<s;i++){var n=t[i];n.rexSizer.hidden||(n.setMinTitleWidth?n.setMinTitleWidth(e):n.setInputRowTitleWidth&&n.setInputRowTitleWidth(e))}return this},cJ=PRt;var MRt={registerInputHandler:gK,removeInputHandler:xK,addFolder:MK,addTab:OK,addColumns:GK,addWrap:WK,addScrollable:jK,addInput:iJ,addButtons:aJ,addButton:oJ,addSeparator:hJ,addRows:uJ,setBindingTarget:dJ,getMaxInputRowTitleWidth:fJ,setInputRowTitleWidth:cJ},pJ=MRt;var Ga=Phaser.Utils.Objects.GetValue,vJ=function(e){var t=Ga(e,"wrap",!1),i=t?Lr:ht;class s extends i{constructor(o,r){r===void 0&&(r={}),r.orientation===void 0&&(r.orientation=t?0:1),super(o,r),this.type="rexTweakerShell",this.isWrapMode=t,r.root?(this.root=r.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=Ga(r,"styles")||{},this.styles.orientation=this.orientation;var a=Ga(r,"itemWidth");a===void 0&&(a=Ga(this.styles,"itemWidth",0)),this.itemWidth=a;var p=Ga(r,"itemHeight");if(p===void 0&&(p=Ga(this.styles,"itemHeight",0)),this.itemHeight=p,t||this.root===this&&this.orientation===1){var h=Ga(r,"inputRow.alignTitle");if(h===void 0){var u=Ga(this.styles,"inputRow.proportion.title");h=!u}else h&&Z(this.styles,"inputRow.proportion.title",0);this.alignInputRowTitleStartFlag=h}else this.alignInputRowTitleStartFlag=!1;var f=Ba(o,void 0,r.background);f&&this.addBackground(f)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(o,r){r===void 0&&(r=!0);var a=vJ(o),p=new a(this.scene,o);return r&&this.scene.add.existing(p),p}}return Object.assign(s.prototype,pJ),s},mJ=vJ;var ka=Ms;var wRt=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},gJ={name:"TextInput",accept(e){return e.hasOwnProperty("view")?e.view==="string":typeof e.value=="string"},build(e,t){var i=e.scene;e.type="rexTweaker.TextInput";var s=t.inputText,n=ka(i,s);e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",function(){e.setValue(n.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&wRt(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))}};var bRt=function(e,t,i){i===void 0&&(i=!0),i?t=t?qt(t):{}:t||(t={});var s=new oc(e,t);return e.add.existing(s),s},xJ=bRt;var yJ=xJ;var RRt=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},CJ={name:"TextAreaInput",accept(e){return e.hasOwnProperty("view")?e.view==="textarea":!1},build(e,t){var i=e.scene;this.type="rexTweaker.TextAreaInput";var s=t.inputTextArea;s===void 0&&(s={}),s.hasOwnProperty("text")||(s.text=t.inputText),s.hasOwnProperty("slider")||(s.slider=t.slider);var n=yJ(i,s);e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",function(){e.setValue(n.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&RRt(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))},onBindTarget(e){var t=e.childrenMap.inputText;t.scrollToTop()}};var IRt=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},SJ={name:"NumberInput",accept(e){return e.hasOwnProperty("view")?e.view==="number":typeof e.value=="number"},build(e,t){var i=e.scene;e.type="rexTweaker.NumberInput";var s=t.inputNumber||t.inputText,n=ka(i,s).setNumberInput();e.add(n,{proportion:1,expand:!0,key:"inputText"}),n.on("close",function(){e.setValue(n.value)})},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&IRt(e,!!t.inputTextReadOnly),e.isFloatType=!t.int},filterValue(e,t){return e.isFloatType?t:Math.floor(t)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText(e.getFotmatText(t))}};var ARt=function(e,t){var i=new Es(e,t);return e.add.existing(i),i},TJ=ARt;var OR=Phaser.Utils.Objects.GetValue,ORt=Phaser.Math.Linear,DRt=Phaser.Math.Snap.Floor,LRt=function(e,t,i,s){e.minValue=t,e.maxValue=i,e.step=s;var n=e.childrenMap.slider;n.setGap(s,t,i)},FRt=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},EJ={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="range":typeof e.value=="number"&&e.hasOwnProperty("min")&&e.hasOwnProperty("max")},build(e,t){var i=e.scene;e.type="rexTweaker.RangeInput";var s=t.slider,n=e.orientation===0?"track.height":"track.width",o=OR(s,n),r=TJ(i,s),u=t.defaultExpandWidth?2:0,f=OR(t,"proportion.range.slider",u),a=o===void 0;e.add(r,{proportion:f,expand:a,key:"slider"});var p=t.inputNumber||t.inputText,h=ka(i,p).setNumberInput(),u=t.defaultExpandWidth?1:0,f=OR(t,"proportion.range.inputText",u);e.add(h,{proportion:f,expand:!0,key:"inputText"}),h.on("close",function(){e.setValue(h.value)}),r.on("valuechange",function(){var l=ORt(e.minValue,e.maxValue,r.value);e.step&&(l=DRt(l,e.step,e.minValue)),e.setValue(l)})},setup(e,t,i){(i||t.hasOwnProperty("max"))&&LRt(e,t.min,t.max,t.step),(i||t.hasOwnProperty("inputTextReadOnly"))&&FRt(e,!!t.inputTextReadOnly)},displayValue(e,t){var i=e.childrenMap.slider;i.setValue(t,e.minValue,e.maxValue);var s=e.childrenMap.inputText;s.setText("").setText(e.getFotmatText(t))}};var BRt=function(e,t){var i=new xe(e,t);return e.add.existing(i),i},kC=BRt;var mc=ge;var NRt=Phaser.Utils.Objects.GetValue,GRt=function(e,t){t===void 0&&(t=!0);var i=e.childrenMap.inputText;i.setReadOnly(t)},PJ={name:"RangeInput",accept(e){return e.hasOwnProperty("view")?e.view==="incdec":!1},build(e,t){var i=e.scene;e.type="rexTweaker.IncDecInput";var s=NRt(t,"incDec")||{},n={text:null,action:null},o=kC(i,{expand:!1}),r=t.defaultExpandWidth?1:0;e.add(o,{proportion:r,expand:!0});var a=t.inputNumber||t.inputText,p=ka(i,a).setNumberInput();p.on("close",function(){e.setValue(p.value)});var h=Object.assign(qt(n),s.incButton||{}),u=mc(i,h),f=Object.assign(qt(n),s.decButton||{}),l=mc(i,f);o.addButton(u),o.addButton(l);var d=s.inputTextIndex||0;o.insert(d,p,{proportion:1,expand:!0}),e.step=1,e.minValue=void 0,e.maxValue=void 0,o.on("button.click",function(v,c,m,g){var y=e.value;c===0?y+=e.step:y-=e.step,e.maxValue!==void 0&&y>e.maxValue&&(y=e.maxValue),e.minValue!==void 0&&y<e.minValue&&(y=e.minValue),e.setValue(y)}),e.addChildrenMap("incButton",u),e.addChildrenMap("decButton",l),e.addChildrenMap("inputText",p)},setup(e,t,i){(i||t.hasOwnProperty("inputTextReadOnly"))&&GRt(e,!!t.inputTextReadOnly),(i||t.hasOwnProperty("step"))&&(e.step=t.hasOwnProperty("step")?t.step:1),(i||t.hasOwnProperty("min"))&&(e.minValue=t.min),(i||t.hasOwnProperty("max"))&&(e.maxValue=t.max)},displayValue(e,t){var i=e.childrenMap.inputText;i.setText("").setText(e.getFotmatText(t))}};var kRt=function(e,t,i){i===void 0&&(i=!0),i?t=t?qt(t):{}:t||(t={});var s=new pc(e,t);return e.add.existing(s),s},MJ=kRt;var wJ=MJ;var bJ={name:"ColorInput",accept(e){return e.hasOwnProperty("view")?e.view==="color":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ColorInput";var s=t.colorInput;s===void 0&&(s={}),s.hasOwnProperty("inputText")||(s.inputText=t.inputText);var n=wJ(i,s);e.add(n,{proportion:1,expand:!0,key:"colorInput"}),n.on("valuechange",function(o){e.setValue(o)})},displayValue(e,t){var i=e.childrenMap.colorInput;i.setValue(t)}};var VRt=function(e,t){var i=new sf(e,t);return e.add.existing(i),i},RJ=VRt;var IJ={name:"CheckboxInput",accept(e){return e.hasOwnProperty("view")?e.view==="boolean":typeof e.value=="boolean"},build(e,t){var i=e.scene;e.type="rexTweaker.CheckboxInput";var s=t.checkbox,n=RJ(i,s),o=s.size;o!==void 0&&n.setSize(o,o);var r=o!==void 0?0:1;e.add(n,{proportion:0,expand:!1,fitRatio:r,key:"checkbox"}),n.on("valuechange",function(a){e.setValue(a)})},displayValue(e,t){var i=e.childrenMap.checkbox;i.setValue(t)}};var URt=function(e,t){var i=new af(e,t);return e.add.existing(i),i},AJ=URt;var OJ={name:"ToggleSwitchInput",accept(e){return e.hasOwnProperty("view")?e.view==="toggleSwitch":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ToggleSwitchInput";var s=t.toggleSwitch,n=AJ(i,s),o=s.size;o!==void 0&&n.setSize(o,o);var r=o!==void 0?0:1;e.addSpace().add(n,{proportion:0,expand:!1,fitRatio:r,key:"toggleSwitch"}),n.on("valuechange",function(a){e.setValue(a)})},displayValue(e,t){var i=e.childrenMap.toggleSwitch;i.setValue(t)}};var zRt=function(e,t){t=Jy(e,t);var i=new Zo(e,t);return e.add.existing(i),i},DJ=zRt;var LJ=DJ;var DR=function(e,t){for(var i=0,s=e.length;i<s;i++){var n=e[i];if(n.value===t)return i}},FJ=function(e,t){var i=DR(e,t);if(i!=null)return e[i]};var WRt=function(e,t){var i=e.childrenMap.list;i.setOptions(t)},BJ={name:"ListInput",accept(e){return e.hasOwnProperty("view")?e.view==="list":e.hasOwnProperty("options")},build(e,t){var i=e.scene;e.type="rexTweaker.ListInput";var s=LJ(i,t.list);e.add(s,{proportion:1,expand:!0,key:"list"}),s.on("button.click",function(n,o,r,a,p,h){e.setValue(r.value)})},setup(e,t,i){(i||t.hasOwnProperty("options"))&&WRt(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,s=FJ(i.options,t);i.resetDisplayContent(s).setMinSize(i.width,i.height).layout().setMinSize(0,0)}};var HRt=function(e,t){for(var i=0,s=e.length;i<s;i++){var n=e[i];n&&n.setActiveState(i===t)}},NJ=HRt;var YRt=Phaser.Utils.Objects.GetValue,XRt=function(e,t){var i=e.childrenMap.list;i.options=t;var s=e.scene,n=i.buttonConfig;i.clearButtons(!0);for(var o=0,r=t.length;o<r;o++){var a=t[o],p=mc(s,n).setActiveState(!1).resetDisplayContent({text:a.text});i.addButton(p)}},GJ={name:"ButtonsInput",accept(e){return e.hasOwnProperty("view")?e.view==="buttons":!1},build(e,t){var i=e.scene;e.type="rexTweaker.ButtonsInput";var s=t.button?qt(t.button):{},n=YRt(s,"expand",!0);n&&(s.align="center"),delete s.expand;var o=kC(i,{expand:n});o.buttonConfig=s,e.add(o,{proportion:1,expand:!0,key:"list"}),o.on("button.click",function(r,a,p,h){var u=o.options[a];u&&(e._selectedIndex=a,e.setValue(u.value),e._selectedIndex=void 0)})},setup(e,t,i){(i||t.hasOwnProperty("options"))&&XRt(e,t.options)},displayValue(e,t){var i=e.childrenMap.list,s=e._selectedIndex;s===void 0&&(s=DR(i.options,t)),NJ(i.childrenMap.buttons,s)}};var $Rt=function(){this.registerInputHandler(gJ).registerInputHandler(CJ).registerInputHandler(SJ).registerInputHandler(EJ).registerInputHandler(PJ).registerInputHandler(bJ).registerInputHandler(IJ).registerInputHandler(OJ).registerInputHandler(BJ).registerInputHandler(GJ)},kJ=$Rt;var LR=class extends mJ(){constructor(t,i){i===void 0&&(i={}),i.hasOwnProperty("style")&&(i.styles=i.style),i.styles===void 0&&(i.styles={}),i.background=i.styles.background||{},i.space=i.styles.space||{},super(t,i),this.type="rexTweaker",kJ.call(this)}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.inputHandlers=void 0)}},FR=LR;K.register("tweaker",function(e){var t=new FR(this.scene,e);return this.scene.add.existing(t),t});Z(window,"RexPlugins.UI.Tweaker",FR);K.register("click",function(e,t){return new vs(e,t)});Z(window,"RexPlugins.UI.Click",vs);K.register("clickOutside",function(e,t){return new wf(e,t)});Z(window,"RexPlugins.UI.ClickOutside",wf);K.register("inTouching",function(e,t){return new ms(e,t)});Z(window,"RexPlugins.UI.InTouching",ms);K.register("tap",function(e,t){return de(e)||(t=e,e=this.scene),new Do(e,t)});Z(window,"RexPlugins.UI.Tap",Do);K.register("press",function(e,t){return de(e)||(t=e,e=this.scene),new Lo(e,t)});Z(window,"RexPlugins.UI.Press",Lo);K.register("swipe",function(e,t){return de(e)||(t=e,e=this.scene),new Fo(e,t)});Z(window,"RexPlugins.UI.Swipe",Fo);var BR=D1;K.register("pan",function(e,t){return de(e)||(t=e,e=this.scene),new BR(e,t)});Z(window,"RexPlugins.UI.Pan",BR);var VJ=PC;var NR=VJ;K.register("drag",function(e,t){return new NR(e,t)});Z(window,"RexPlugins.UI.Drag",NR);var GR=k1;K.register("pinch",function(e){return new GR(this.scene,e)});Z(window,"RexPlugins.UI.Pinch",GR);var kR=W1;K.register("rotate",function(e){return new kR(this.scene,e)});Z(window,"RexPlugins.UI.Rotate",kR);var jRt=Phaser.Utils.Objects.IsPlainObject,UJ=Phaser.Utils.Objects.GetValue,ZRt=function(e,t,i){var s;if(e===void 0)e=i.texture.key,t=i.frame.name;else if(jRt(e)){var n=e;e=UJ(n,"key",i.texture.key),t=UJ(n,"frame",i.frame.name)}else typeof e=="string"||(s=e);return s===void 0&&(s=function(o){o.setTexture(e,t)}),s},VR=ZRt;var gc=Phaser.Utils.Objects.GetValue,KRt=Phaser.Utils.Objects.GetAdvancedValue,JRt=Phaser.Math.Linear,UR=class extends Ai{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setDuration(KRt(t,"duration",500)),this.setEase(gc(t,"ease","Sine")),this.setOrientation(gc(t,"orientation",0)),this.setFrontFace(gc(t,"front",void 0)),this.setBackFace(gc(t,"back",void 0)),this.setFace(gc(t,"face",0)),this}setOrientation(t){return typeof t=="string"&&(t=QRt[t]),this.orientation=t,this}get face(){return this._face}set face(t){typeof t=="string"&&(t=qRt[t]),this._face=t,t===0&&this.frontFaceCallback?this.frontFaceCallback(this.parent):t===1&&this.backFaceCallback&&this.backFaceCallback(this.parent)}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}setFrontFace(t,i){return this.frontFaceCallback=VR(t,i,this.parent),this}setBackFace(t,i){return this.backFaceCallback=VR(t,i,this.parent),this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.orientation===0?this.scale0=t.scaleX:this.scale0=t.scaleY,this.timer.setDelay(this.delay).setDuration(this.duration/2).setRepeat(1),super.start(),this}flip(t){return this.isRunning?this:(t!==void 0&&this.setDuration(t),this.start(),this)}updateTarget(t,i){i.justRestart&&this.toggleFace();var s=i.t;i.isOddIteration&&(s=1-s),s=this.easeFn(s);var n=JRt(this.scale0,0,s);this.orientation===0?t.scaleX=n:t.scaleY=n}},QRt={x:0,horizontal:0,y:1,vertical:1},qRt={front:0,back:1},zJ=UR;var WJ=zJ;var zR=WJ;K.register("flip",function(e,t){return new zR(e,t)});Z(window,"RexPlugins.UI.Flip",zR);K.register("shake",function(e,t){return new Ef(e,t)});Z(window,"RexPlugins.UI.Shake",Ef);K.register("touchEventStop",function(e,t){return new cc(e,t)});Z(window,"RexPlugins.UI.TouchEventStop",cc);var WR=eR;K.register("perspective",function(e,t){return new WR(e,t)});Z(window,"RexPlugins.UI.Perspective",WR);var HJ=Phaser.Math.RotateAround,VC=function(e,t,i){var s=e.width/2,n=e.height/2;return Mi.x=t-s,Mi.y=i-n,HJ(Mi,0,0,e.rotation),Mi.x*=e.scaleX,Mi.y*=e.scaleY,Mi.x+=e.x,Mi.y+=e.y,Mi},YJ=function(e,t,i){var s=e.width/2,n=e.height/2;return Mi.x=t-e.x,Mi.y=i-e.y,Mi.x/=e.scaleX,Mi.y/=e.scaleY,HJ(Mi,0,0,-e.rotation),Mi.x+=s,Mi.y+=n,Mi},Mi={x:0,y:0};var HR=class{constructor(t,i){this.parent=t,this.vertex=i,this._localX=void 0,this._localY=void 0}destroy(){this.parent=void 0,this.vertex=void 0}updateVertexPosition(t,i){var s=this.parent,n=s.height,o=s.frame.cutWidth/n/2,r=s.frame.cutHeight/n/2,a=t/n-o,p=i/n-r,h=this.vertex;return h.x=a,h.y=-p,s.forceUpdate(),this}get localX(){return this._localX}set localX(t){this.setLocalXY(t,this._localY)}get localY(){return this._localY}set localY(t){this.setLocalXY(this._localX,t)}get localXOrigin(){return this._localXOrigin}get localYOrigin(){return this._localYOrigin}resetLocalXY(t,i){return this._localXOrigin=t,this._localYOrigin=i,this._localX=t,this._localY=i,this}setLocalXY(t,i,s){return this._localX===t&&this._localY===i?this:(this._localX=t,this._localY=i,s||this.updateVertexPosition(t,i),this)}setWorldXY(t,i){if(this._worldX===t&&this._worldY===i)return this;var s=YJ(this.parent,t,i);return this.setLocalXY(s.x,s.y),this}setPosition(t,i){return this.setWorldXY(t,i),this}getWorldXY(){return VC(this.parent,this._localX,this._localY)}get x(){var t=VC(this.parent,this._localX,this._localY);return t.x}set x(t){this.setWorldXY(t,this.y)}get y(){var t=VC(this.parent,this._localX,this._localY);return t.y}set y(t){this.setWorldXY(this.x,t)}},XJ=HR;var _Rt=Phaser.Geom.Mesh.Vertex,tIt=Phaser.Geom.Mesh.Face,eIt=function(e){for(var t=e.isNinePointMode,i=t?9:4,s=e.vertices,n=e.faces,o=e.controlPoints,r=0;r<i;r++){var a=new _Rt;s.push(a),o.push(new XJ(e,a))}var p;t?p=nIt:e.fourPointsModeRTL?p=rIt:p=iIt;for(var r=0,h=p.length;r<h;r+=3){var u=s[p[r+0]],f=s[p[r+1]],l=s[p[r+2]];n.push(new tIt(u,f,l))}t?(e.topLeft=o[0],e.topCenter=o[1],e.topRight=o[2],e.centerLeft=o[3],e.center=o[4],e.centerRight=o[5],e.bottomLeft=o[6],e.bottomCenter=o[7],e.bottomRight=o[8]):(e.topLeft=o[0],e.topRight=o[1],e.bottomLeft=o[2],e.bottomRight=o[3])},iIt=[0,2,3,0,3,1],rIt=[1,3,2,1,2,0],nIt=[0,3,4,0,4,1,1,4,2,4,5,2,3,6,4,6,7,4,4,7,8,4,8,5],$J=eIt;var sIt=function(e){var t,i=0,s=e.height,n=0,o=e.width;if(e.isNinePointMode){var r=(n+o)/2,a=(i+s)/2;t=[n,i,r,i,o,i,n,a,r,a,o,a,n,s,r,s,o,s]}else t=[n,i,o,i,n,s,o,s];return t},jJ=sIt;var aIt=Phaser.Utils.Objects.IsPlainObject,Zu=Phaser.Utils.Objects.GetValue,YR=class extends iC{constructor(t,i,s,n,o,r){aIt(i)&&(r=i,i=Zu(r,"x",0),s=Zu(r,"y",0),n=Zu(r,"key",null),o=Zu(r,"frame",null)),super(t,i,s,n,o),this.type="rexQuadImage",this.isNinePointMode=Zu(r,"ninePointMode",!1),this.fourPointsModeRTL=Zu(r,"rtl",!1),this.controlPoints=[],$J(this),this.hideCCW=!1,this.syncSize()}destroy(t){if(!(!this.scene||this.ignoreDestroy)){super.destroy(t);for(var i=0,s=this.controlPoints.length;i<s;i++)this.controlPoints[i].destroy();this.controlPoints=void 0}}resetVerts(){this.dirtyCache[9]=-1;for(var t=jJ(this),i=this.width,s=this.height,n=this.frame.cutWidth/s/2,o=this.frame.cutHeight/s/2,r=this.frame.u0,a=this.frame.u1,p=this.frame.v0,h=this.frame.v1,u=a-r,f=h-p,l=this.controlPoints,d=0,v=t.length;d<v;d+=2){var c=t[d+0],m=t[d+1],g=d/2,y=c/s-n,x=m/s-o,C=r+u*(c/i),S=p+f*(m/s);this.vertices[g].set(y,-x,0).setUVs(C,S),l[g].resetLocalXY(c,m)}return this}syncSize(){return this.setSizeToFrame(),this.setOrtho(this.width/this.height,1),this.resetVerts(),this}},UC=YR;var Kti=Phaser.Utils.Objects.IsPlainObject,Jti=Phaser.Utils.Objects.GetValue;var oIt=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=0);for(var s=e.width,n=e.height,o=s*.5,r=n*.5,a=Math.tan(t)*r,p=Math.tan(i)*o,h=e.controlPoints,u=0,f=h.length;u<f;u++){var l=h[u],d=l.localXOrigin,v=l.localYOrigin;l.localX=d+(v>r?a:-a),l.localY=v+(d>o?p:-p)}},XR=oIt;var lIt=Phaser.Utils.Objects.IsPlainObject,zC=Phaser.Utils.Objects.GetValue,ZJ=Phaser.Math.DegToRad,KJ=Phaser.Math.RadToDeg,$R=class extends UC{constructor(t,i,s,n,o){if(lIt(i)){var r=i;i=zC(r,"x",0),s=zC(r,"y",0),n=zC(r,"key",null),o=zC(r,"frame",null)}super(t,i,s,n,o),this.type="rexSkewmage",this._skewX=0,this._skewY=0}get skewX(){return this._skewX}set skewX(t){this._skewX=t,XR(this,this._skewX,this._skewY)}get skewXDeg(){return KJ(this._skewX)}set skewXDeg(t){this.skewX=ZJ(t)}get skewY(){return this._skewY}set skewY(t){this._skewY=t,XR(this,this._skewX,this._skewY)}get skewYDeg(){return KJ(this._skewY)}set skewYDeg(t){this.skewY=ZJ(t)}setSkewX(t){return this.skewX=t,this}setSkewY(t){return this.skewY=t,this}setSkew(t,i){return i===void 0&&(i=t),this.skewX=t,this.skewY=i,this}setSkewXDeg(t){return this.skewXDeg=t,this}setSkewYDeg(t){return this.skewYDeg=t,this}setSkewDeg(t,i){return i===void 0&&(i=t),this.skewXDeg=t,this.skewYDeg=i,this}},jR=$R;var hIt=Phaser.Utils.Objects.IsPlainObject,WC=Phaser.Utils.Objects.GetValue,ZR=class extends jR{constructor(t,i,s,n,o){if(hIt(i)){var r=i;i=WC(r,"x",0),s=WC(r,"y",0),n=WC(r,"width",32),o=WC(r,"height",32)}var a=sc(t,n,o);super(t,i,s,a,null),this.type="rexSkewRenderTexture",this.rt=this.texture}destroy(t){!this.scene||this.ignoreDestroy||(super.destroy(t),this.rt.destroy(),this.rt=null)}},KR=ZR;var JR=class extends aC(KR){get skewState(){return this.isRunning}},QR=JR;var qR=QR;K.register("skew",function(e,t){return new qR(e,t)});Z(window,"RexPlugins.UI.Skew",qR);K.register("anchor",function(e,t){return new yf(e,t)});Z(window,"RexPlugins.UI.Anchor",yf);K.register("textTyping",function(e,t){return new ec(e,t)});Z(window,"RexPlugins.UI.TextTyping",ec);K.register("textPage",function(e,t){return new _f(e,t)});Z(window,"RexPlugins.UI.TextPage",_f);var Ku=void 0,JJ=function(e){e!==Ku&&(Ku!==void 0&&Ku.close(),Ku=e)},QJ=function(e){e===Ku&&(Ku=void 0)};var jn=Phaser.Utils.Objects.GetValue,uIt=Phaser.Utils.Objects.Clone,dIt=function(e,t){t===void 0&&(t={}),t=uIt(t);var i=e.scene,s=e.style,n=jn(t,"backgroundColor",s.backgroundColor);n===null&&(n="transparent"),t.text=jn(t,"text",e.text),t.fontFamily=jn(t,"fontFamily",s.fontFamily),t.fontSize=jn(t,"fontSize",s.fontSize),t.color=jn(t,"color",s.color),t.backgroundColor=n,t.direction=jn(t,"rtl",s.rtl)?"rtl":"ltr",t.align=jn(t,"align",fIt(s)),t.direction==="rtl"&&wu(e)&&(t.align="right");var o=e.padding;o.left>0&&(t.paddingLeft=`${o.left}px`),o.right>0&&(t.paddingRight=`${o.right}px`),s.backgroundCornerRadius&&(t.borderRadius=jn(t,"borderRadius",`${s.backgroundCornerRadius}px`));var r=new Px(i,e.x,e.y,jn(t,"width",e.width),jn(t,"height",e.height),t);r.setScale(e.scaleX,e.scaleY).setOrigin(e.originX,e.originY).setScrollFactor(e.scrollFactorX,e.scrollFactorY);var a=e.parentContainer;return a?a.add(r):i.add.existing(r),r},fIt=function(e){return e.hasOwnProperty("align")?e.align:e.hasOwnProperty("halign")?e.halign:"left"};var qJ=dIt;var cIt=function(e,t,i){return e.time.delayedCall(0,t,[],i)},_J=cIt;var el=Phaser.Utils.Objects.GetValue,pIt=Phaser.Utils.Objects.Merge,vIt=function(e,t){e===void 0&&(e={}),e=pIt(e,this.openConfig),JJ(this),Be(e)&&(t=e,e=void 0);var i=el(e,"inputType",void 0);i===void 0&&(i=el(e,"type","text")),t===void 0&&(t=el(e,"onClose",void 0));var s=el(e,"onCreate",void 0),n=el(e,"onOpen",void 0),o=el(e,"onTextChanged",void 0);return this.inputText=qJ(this.parent,e),s&&s(this.parent,this.inputText),this.inputText.on("textchange",function(r){var a=r.text;o?o(this.parent,a):this.parent.text=a},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,el(e,"enterClose",i!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=_J(this.scene,function(){this.scene.input.once("pointerdown",this.close,this),n&&n(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)},this),this},tQ=vIt;var mIt=function(){return QJ(this),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this},eQ=mIt;var gIt={open:tQ,close:eQ},iQ=gIt;var xIt=Phaser.Utils.Objects.GetValue,HC=class extends Et{constructor(t,i){super(t),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(i);var s=xIt(i,"clickEnable",!0);s&&t.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(t){this.isShutdown||(this.close(),super.shutdown(t))}setOpenConfig(t){return t===void 0&&(t={}),this.openConfig=t,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}};Object.assign(HC.prototype,iQ);var xc=HC;var yIt=function(e,t,i){return e._edit||(e._edit=new xc(e,{clickEnable:!1})),e._edit.open(t,i),e._edit},_R=yIt;var tI=xc;K.register("textEdit",function(e,t){return new tI(e,t)});Z(window,"RexPlugins.UI.TextEdit",tI);var rQ=vg;var eI=rQ;K.register("layerManager",function(e){return new eI(this.scene,e)});Z(window,"RexPlugins.UI.LayerManager",eI);var nQ=_R;var YC=class extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new K(t)}boot(){var t=this.scene.events;t.on("destroy",this.destroy,this)}destroy(){this.add.destroy(),super.destroy()}isInTouching(t,i,s,n){return t.visible?ti(t,i,s,n):!1}get viewport(){return Sr(this.scene,this.scene.cameras.main,!0)}},CIt={getParentSizer:Fe,getTopmostSizer:gf,removeFromParent:ws,hide:Rr,show:br,isShown:hu,confirmAction:Oy,edit:nQ,wrapExpandText:Bo,fontSizeExpandText:No,fontSizeResize:bu,setFontSizeToFitWidth:bu,waitEvent:ra,waitComplete:fe,delayPromise:Mx,setChildrenInteractive:ma,fadeIn:bo,fadeOutDestroy:Ro,easeMoveTo:ou,easeMoveFrom:lu,modal:Io,modalPromise:j0,modalClose:fu,requestDrag:TC,openFileChooser:Pu};Object.assign(YC.prototype,CIt);var sQ=YC;var SIt={type:XC.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#87CEEB",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1024,height:768,min:{width:512,height:384},max:{width:2048,height:1536}},fps:{target:60,min:30,forceSetTimeOut:!1},input:{activePointers:4},physics:{default:"arcade",arcade:{gravity:{y:800,x:0},debug:!1}},render:{pixelArt:!1,antialias:!0,roundPixels:!0},scene:[Sv,yv],plugins:{scene:[{key:"rexUI",plugin:sQ,mapping:"rexUI"}]}},TIt=e=>new XC.Game(At(_({},SIt),{parent:e})),aQ=TIt;var $C=class e{ngOnInit(){this.game=aQ("game-container"),j.on("current-scene-ready",t=>{this.scene=t,this.sceneCallback&&this.sceneCallback(t)})}ngOnDestroy(){this.game&&this.game.destroy(!0)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=wl({type:e,selectors:[["phaser-game"]],decls:1,vars:0,consts:[["id","game-container"]],template:function(i,s){i&1&&so(0,"div",0)},styles:["#game-container[_ngcontent-%COMP%]{width:100%;height:100%;display:block}"]})}};var jC=class e{constructor(){j.on("current-scene-ready",t=>{console.log("Scene ready:",t.scene.key)})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=wl({type:e,selectors:[["app-root"]],decls:2,vars:0,consts:[["id","app"]],template:function(i,s){i&1&&(Dp(0,"main",0),so(1,"phaser-game"),Lp())},dependencies:[$C],styles:["#app[_ngcontent-%COMP%]{width:100vw;height:100vh;margin:0;padding:0;overflow:hidden;background-color:#1a1a1a;display:block}phaser-game[_ngcontent-%COMP%]{width:100%;height:100%;display:block}"]})}};XT(jC,H2).catch(e=>console.error(e));
